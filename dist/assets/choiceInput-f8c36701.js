import{av as S,bn as D,r as I,R as W,br as M,j as r,i as f,bp as _,a0 as w,aP as L,bq as O,a as l,F as k,s as T}from"./index-51be1395.js";const p=T.button`
  position: relative;
  /* width: 24px; */
  height: 24px;
  color: #ffffff;
  background-color: var(--mainBlue);
  display: inline-block;
  text-align: center;
  padding: 2px;
  z-index: 0;
  /* border: var(--mainBorder); */
  border: none;
  border-radius: var(--mainBorderRadius);
  margin: 0px 4px 4px 0px;

  &:hover {
    background-color: var(--lightBlue);
    color: black;
  };
`,K=S.memo(function N(R){let{name:H,id:a,SVs:e,actions:y,children:V,sourceOfUpdate:j,ignoreUpdate:E,rendererName:F,callAction:x}=D(R);N.baseStateVariable="selectedIndices";const[g,A]=I.useState(e.selectedIndices),P=W(M(F));let C=I.useRef(null);!E&&C.current!==e.selectedIndices?(A(e.selectedIndices),C.current=e.selectedIndices):C.current=null;let d="unvalidated";(e.valueHasBeenValidated||e.numberOfAttemptsLeft<1)&&(e.creditAchieved===1?d="correct":e.creditAchieved===0?d="incorrect":d="partialcorrect");function v(n){let t=[];if(e.inline)n.target.value&&(t=Array.from(n.target.selectedOptions,i=>Number(i.value)));else if(e.selectMultiple){t=[...g];let i=Number(n.target.value);if(n.target.checked)t.includes(i)||(t.push(i),t.sort((s,o)=>s-o));else{let s=t.indexOf(i);s!==-1&&t.splice(s,1)}}else t=[Number(n.target.value)];(g.length!==t.length||g.some((i,s)=>i!=t[s]))&&(A(t),C.current=e.selectedIndices,P(i=>{let s={...i};return s.ignoreUpdate=!0,s}),x({action:y.updateSelectedIndices,args:{selectedIndices:t},baseVariableValue:t}))}if(e.hidden)return null;let b=e.disabled;if(e.inline){let n={cursor:"pointer",padding:"1px 6px 1px 6px",width:"24px"},t=null;if(e.includeCheckWork&&!e.suppressCheckwork){if(d==="unvalidated")b&&(n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGray")),t=r(p,{id:a+"_submit",disabled:b,tabIndex:"0",style:n,onClick:()=>x({action:y.submitAnswer}),onKeyPress:m=>{m.key==="Enter"&&x({action:y.submitAnswer})},children:r(f,{style:{},icon:_,transform:{rotate:90}})});else if(e.showCorrectness)if(d==="correct")n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGreen"),t=r(p,{id:a+"_correct",style:n,children:r(f,{icon:w})});else if(d==="partialcorrect"){let u=`${Math.round(e.creditAchieved*100)} %`;n.width="44px",n.backgroundColor="#efab34",t=r(p,{id:a+"_partial",style:n,children:u})}else n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainRed"),t=r(p,{id:a+"_incorrect",style:n,children:r(f,{icon:L})});else n.backgroundColor="rgb(74, 3, 217)",n.padding="1px 8px 1px 4px",t=r(p,{id:a+"_saved",style:n,children:r(f,{icon:O})});e.numberOfAttemptsLeft<0?t=l(k,{children:[t,r("span",{children:"(no attempts remaining)"})]}):e.numberOfAttemptsLeft==1?t=l(k,{children:[t,r("span",{children:"(1 attempt remaining)"})]}):Number.isFinite(e.numberOfAttemptsLeft)&&(t=l(k,{children:[t,l("span",{children:["(",e.numberOfAttemptsLeft," attempts remaining)"]})]}))}let i=e,s=e.choiceTexts.map(function(m,u){return i.choicesHidden[u]?null:r("option",{value:u+1,disabled:i.choicesDisabled[u],children:m},u+1)}),o=g;return o===void 0?o="":e.selectMultiple||(o=o[0],o===void 0&&(o="")),l(S.Fragment,{children:[r("a",{name:a}),l("select",{className:"custom-select",id:a,onChange:v,value:o,disabled:b,multiple:e.selectMultiple,children:[r("option",{hidden:!0,value:"",children:e.placeHolder}),s]}),t]})}else{let n={height:"24px",display:"inline-block",padding:"1px 6px 1px 6px",cursor:"pointer"},t=null;if(e.includeCheckWork&&!e.suppressCheckwork)if(d==="unvalidated"){let h=e.submitLabel;e.showCorrectness||(h=e.submitLabelNoCorrectness),b&&(n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGray")),t=l(p,{id:a+"_submit",tabIndex:"0",disabled:b,style:n,onClick:()=>x({action:y.submitAnswer}),onKeyPress:c=>{c.key==="Enter"&&x({action:y.submitAnswer})},children:[r(f,{style:{},icon:_,transform:{rotate:90}})," ",h]})}else if(e.showCorrectness){if(d==="correct")n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGreen"),t=l(p,{id:a+"_correct",style:n,children:[r(f,{icon:w}),"  Correct"]});else if(d==="incorrect")n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainRed"),t=l(p,{id:a+"_incorrect",style:n,children:[r(f,{icon:L}),"  Incorrect"]});else if(d==="partialcorrect"){n.backgroundColor="#efab34";let c=`${Math.round(e.creditAchieved*100)}% Correct`;t=r(p,{id:a+"_partial",style:n,children:c})}}else n.backgroundColor="rgb(74, 3, 217)",t=l(p,{id:a+"_saved",style:n,children:[r(f,{icon:O}),"  Response Saved"]});e.numberOfAttemptsLeft<0?t=l(k,{children:[t,r("span",{children:"(no attempts remaining)"})]}):e.numberOfAttemptsLeft==1?t=l(k,{children:[t,r("span",{children:"(1 attempt remaining)"})]}):Number.isFinite(e.numberOfAttemptsLeft)&&(t=l(k,{children:[t,l("span",{children:["(",e.numberOfAttemptsLeft," attempts remaining)"]})]}));let i=a,s={listStyleType:"none"},o=i+"_choice",m="radio";e.selectMultiple&&(m="checkbox");let u=e,B=e.choiceOrder.map(h=>V[h-1]).map(function(h,c){if(u.choicesHidden[c])return null;if(m=="radio")return l("label",{className:"radio-container",children:[r("input",{type:"radio",id:o+(c+1)+"_input",name:i,value:c+1,checked:g.includes(c+1),onChange:v,disabled:b||u.choicesDisabled[c]}),r("span",{className:"radio-checkmark"}),r("label",{htmlFor:o+(c+1)+"_input",style:{marginLeft:"2px"},children:h})]},i+"_choice"+(c+1));if(m=="checkbox")return l("label",{className:"checkbox-container",children:[r("input",{type:"checkbox",id:o+(c+1)+"_input",name:i,value:c+1,checked:g.includes(c+1),onChange:v,disabled:b||u.choicesDisabled[c]}),r("span",{className:"checkbox-checkmark"}),r("label",{htmlFor:o+(c+1)+"_input",style:{marginLeft:"2px"},children:h})]},i+"_choice"+(c+1))});return l(S.Fragment,{children:[l("ol",{id:i,style:s,children:[r("a",{name:a}),B]}),t]})}});export{K as default};
