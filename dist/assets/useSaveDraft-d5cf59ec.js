import{y as m,v as u,k as p,aZ as d,z as v}from"./index-ab5ab855.js";import{t as y}from"./EditorViewerRecoil-a442c8de.js";function x(){const a=m();return{saveDraft:u(({snapshot:r,set:n})=>async({pageId:t,courseId:c,backup:i=!1})=>{const e=await r.getPromise(y);try{const s={doenetML:e,pageId:t,courseId:c,backup:i},{data:{success:o,message:f}}=await p.post("/api/saveDoenetML.php",s);if(!o)throw new Error(f);return n(d(t),e),{success:o}}catch(s){return a(s.message,v.ERROR),{success:!1}}},[a])}}export{x as u};
