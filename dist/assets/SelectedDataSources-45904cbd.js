import{r as u,e as g,z as m,s as y,o as f,A as w,S as D,v as S,a as h,F as x,j as c,aR as A,w as v,g as C}from"./index-b99cb1f6.js";function B(){const[s,r]=u.useState([]),n=g(m),i=g(y("courseId")),l=f(({snapshot:t})=>async o=>{let e=[];for(let d of o){let a=await t.getPromise(w(d));if(a.type=="activity"&&a.isAssigned)e.push(d);else if(a.type=="section"&&a.isAssigned){let p=await t.getPromise(D({courseId:i,sectionId:d}));e=[...await l(p),...e]}}return e=[...new Set(e)],e},[i]);u.useEffect(()=>{n.length>0?l(n).then(t=>{r(t)}):r([])},[n]);const I=S();return h(x,{children:[c("h2",{"data-test":"selectedDataSourcesHeading",style:{margin:"16px 5px"},children:"Event Data"}),h("div",{children:[s.length," ",s.length==1?"Activity":"Activities"]}),c("br",{}),c(A,{width:"menu",value:"View on Shiny",disabled:s.length==0,onClick:async()=>{if(s.length==0)I("No activities found",v.INFO);else{let t=s.join("&data=");const o=await C.get(`/api/createSecretCode.php?courseId=${i}`),{secretCode:e}=o.data;window.open(`https://doenet.shinyapps.io/analyzer/?data=${t}&code=${e}`,"_blank")}}})]})}export{B as default};
