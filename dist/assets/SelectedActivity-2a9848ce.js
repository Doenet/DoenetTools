import{l as u,m as k,T as I,R as D,p as S,G as L,a6 as x,r as b,y as F,H as V,a as s,F as h,j as e,z as B,B as f,i as O,X as R,ag as E}from"./index-c9d6e71c.js";import{A as G,u as M,a as _,b as j,D as X,T as J,c as N,d as z,e as H,G as U,I as q,f as K,S as W,g as Q,h as Y,i as Z,j as $,k as ee,P as te,l as ie,m as ae,n as se,M as ne,o as oe,C as le,p as re}from"./SettingComponents-63658bef.js";import{A as g}from"./ActionButton-a1abb797.js";import{A as de}from"./ActionButtonGroup-ea0c6861.js";import{B as ce}from"./ButtonGroup-3786a888.js";import{e as P}from"./RoleDropdown-cc8fa46a.js";import{T as me}from"./Textfield-be683687.js";import"./DateTime-9f4938ed.js";import"./moment-1c63fbec.js";import"./IncrementMenu-f24cd096.js";import"./DropdownMenu-45b68756.js";import"./setPrototypeOf-51e8cf87.js";import"./RelatedItems-c008c125.js";import"./useSaveDraft-efff7d16.js";import"./EditorViewerRecoil-e3485b3b.js";function Ie(){const o=u(k("courseId")),i=u(I)[0],r=D(S),{canEditContent:w}=u(P(o)),{label:n,content:p}=u(L(i)),{renameItem:A,create:d,compileActivity:y,deleteItem:t}=x(o),[l,c]=b.useState(n),v=F();b.useEffect(()=>{c(n)},[n]);const m=()=>{let a=l;l===""&&(a=n,n===""&&(a="Untitled"),c(a)),n!==a&&A(i,a)};if(i==null)return null;let T=V(p),C=s("h2",{"data-test":"infoPanelItemLabel",style:{margin:"16px 5px"},children:[e(O,{icon:R})," ",n]});return w==="1"?s(h,{children:[C,s(de,{vertical:!0,children:[e(g,{width:"menu",value:"Edit Activity",dataTest:"Edit Activity",onClick:()=>{T==null?v("ERROR: No page found in activity",B.INFO):r(a=>({page:"course",tool:"editor",view:a.view,params:{doenetId:i,pageId:T}}))}}),e(g,{width:"menu",value:"View Draft Activity",dataTest:"View Draft Activity",onClick:()=>{y({activityDoenetId:i,courseId:o,successCallback:()=>{r({page:"course",tool:"draftactivity",view:"",params:{doenetId:i,requestedVariant:1}})}})}}),e(g,{width:"menu",value:"View Assigned Activity",dataTest:"View Assigned Activity",onClick:()=>{r({page:"course",tool:"assignment",view:"",params:{doenetId:i}})}})]}),e("br",{}),e(G,{doenetId:i,courseId:o}),e(me,{label:"Label",dataTest:"Label Activity",vertical:!0,width:"menu",value:l,onChange:a=>c(a.target.value),onKeyDown:a=>{a.keyCode===13&&m()},onBlur:m}),e("br",{}),s(ce,{vertical:!0,children:[e(f,{width:"menu",onClick:()=>d({itemType:"page"}),value:"Add Page",dataTest:"Add Page"}),e(f,{width:"menu",onClick:()=>d({itemType:"order"}),value:"Add Order",dataTest:"Add Order"}),e(f,{width:"menu",onClick:()=>d({itemType:"collectionLink"}),dataTest:"Add Collection Link",value:"Add Collection Link"})]}),e("br",{}),e(ue,{doenetId:i,courseId:o}),e(f,{width:"menu",value:"Delete Activity",dataTest:"Delete Activity",alert:!0,onClick:a=>{a.preventDefault(),a.stopPropagation(),t({doenetId:i})}})]}):s(h,{children:[C,e(g,{width:"menu",dataTest:"View Activity",value:"View Activity",onClick:()=>{r({page:"course",tool:"assignment",view:"",params:{doenetId:i}})}})]})}E({key:"temporaryRestrictToAtom",default:[]});function ue({doenetId:o,courseId:i}){const{canModifyActivitySettings:r,canViewActivitySettings:w}=u(P(i)),{value:{numberOfAttemptsAllowed:n,timeLimit:p,assignedDate:A,dueDate:d,totalPointsOrPercent:y}}=M(i,o);D(S);const t={courseId:i,doenetId:o,editable:r??"0"};if(w==="1")return s(h,{children:[e(_,{...t}),e("br",{}),e(j,{...t}),e(X,{...t}),e(J,{...t}),e(N,{...t}),e(z,{...t}),e(H,{...t}),e(U,{...t}),e(q,{...t}),s("div",{style:{margin:"16px 0"},children:[e(K,{...t}),e(W,{...t}),e(Q,{...t}),e(Y,{...t}),e(Z,{...t}),e($,{...t}),e(ee,{...t}),e(te,{...t}),e(ie,{...t}),e(ae,{...t}),e(se,{...t}),e(ne,{...t}),e(oe,{...t}),e(le,{...t})]}),e(re,{...t})]});let l=n;l===null&&(l="unlimited");let c=null;p!==null&&(c=s("p",{children:["Time Limit: ",p," minutes"]}));let v=null;A!==null&&(v=s("p",{children:["Assigned: ",A]}));let m=e("p",{children:"No Due Date"});return d!==null&&(m=s("p",{children:["Due: ",d]})),e(h,{children:s("div",{children:[v,m,c,s("p",{children:["Attempts Allowed: ",l]}),s("p",{children:["Points: ",y]})]})})}export{ue as AssignmentSettings,Ie as default};
