import{e as i,s as w,q as Q,R as T,N as G,r as e,O as J,P as K,f as W,u as X,A as Y,o as Z,g as ee,Q as te,j as n,F as ae,D as se}from"./index-1e3edf2b.js";function ce(){const t=i(w("doenetId")),m=i(Q),o=i(w("requestedVariant")),S=o&&Number.isFinite(Number(o))?Number(o):1,y=T(G);let[f,r]=e.useState("Initializing"),[I,g]=e.useState("");const[{showCorrectness:A,paginate:D,showFeedback:P,showHints:C,autoSubmit:V,cid:_,doenetId:p,solutionDisplayMode:F},L]=e.useState({});let R=e.useRef([]);J(t),K(m);let k=W(),x=X(),l=i(Y(t)),d=l.label;e.useEffect(()=>{const a=document.title;return d&&(document.title=`${d} - Doenet`),()=>{document.title=a}},[d]),e.useEffect(()=>{E(t,l)},[l,t]);function M({index:a,numVariants:b}){y({index:a,numVariants:b})}const E=Z(({snapshot:a,set:b})=>async(h,{type:O,timeLimit:ne,assignedDate:oe,dueDate:re,showCorrectness:q,showCreditAchievedMenu:le,paginate:U,showFeedback:j,showHints:z,autoSubmit:H,showSolution:$,proctorMakesAvailable:de})=>{if(O===void 0)return;let v="button";$||(v="none");let u=null,s=await ee.get("/api/getCidForAssignment.php",{params:{doenetId:h,latestAttemptOverrides:!1,getDraft:!0}});if(!s.data.success||!s.data.cid){r("Problem"),g(`Error loading assignment: ${s.data.message}`);return}else u=s.data.cid;let c=await te(u);if(c.errors.length>0){r("Problem"),g(c.errors[0].message);return}R.current=[...Array(c.numVariants).keys()].map(B=>B+1),L({showCorrectness:q,paginate:U,showFeedback:j,showHints:z,autoSubmit:H,cid:u,doenetId:h,solutionDisplayMode:v}),r("Ready")},[]);if(t==="")return null;if(m==="__not_found__")return n("h1",{children:"Content not found or no permission to view content"});if(f==="Initializing")return null;if(f==="Problem")return n("h1",{children:I});const N=document.getElementById("mainPanel");return n(ae,{children:n(se,{cid:_,activityId:p,flags:{showCorrectness:A,readOnly:!1,solutionDisplayMode:F,showFeedback:P,showHints:C,autoSubmit:V,allowLoadState:!1,allowSaveState:!1,allowLocalState:!1,allowSaveSubmissions:!1,allowSaveEvents:!1},requestedVariantIndex:S,generatedVariantCallback:M,idsIncludeActivityId:!1,paginate:D,location:x,navigate:k,linkSettings:{viewURL:"/course?tool=assignment",editURL:"/course?tool=editor",useQueryParameters:!0},scrollableContainer:N,apiURLs:{loadActivityState:"/api/loadActivityState.php",loadPageState:"/api/loadPageState.php"}},`activityViewer${p}`)})}export{ce as default};
