import{z as m,w as u,k as p,aZ as d,A as w}from"./index-e32334a0.js";import{t as D}from"./EditorViewerRecoil-3acd5a83.js";function y(){const a=m();return{saveDraft:u(({snapshot:r,set:n})=>async({pageId:t,courseId:c,backup:i=!1})=>{const e=await r.getPromise(D);try{const s={doenetML:e,pageId:t,courseId:c,backup:i},{data:{success:o,message:f}}=await p.post("/api/saveDoenetML.php",s);if(!o)throw new Error(f);return n(d(t),e),{success:o}}catch(s){return a(s.message,w.ERROR),{success:!1}}},[a])}}export{y as u};
