import{aw as F,bn as G,r as v,j as o,a as h,F as A,s as H}from"./index-93892358.js";import{A as M}from"./ActionButton-5e8adc81.js";import{A as K}from"./ActionButtonGroup-40e40ada.js";import{T as P}from"./ToggleButton-9bb8d7af.js";import{T as O}from"./ToggleButtonGroup-fad64e2a.js";import{V as S}from"./visibility-sensor-a100d000.js";const D=H.text`
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-tap-highlight-color: rgba(255, 255, 255, 0);
`,Z=F.memo(function(X){let{name:z,id:L,SVs:f,actions:s,callAction:r}=G(X,!1),[d,b]=v.useState("add remove points"),w=v.useRef(null),l=v.useRef(null),B=e=>{r({action:s.recordVisibilityChange,args:{isVisible:e}})};if(v.useEffect(()=>()=>{r({action:s.recordVisibilityChange,args:{isVisible:!1}})},[]),f.hidden)return null;function $(e){e===0?(console.log(e),b("add remove points")):e===1?(console.log(e),b("toggle")):e===2&&(console.log(e),b("move points"))}let V=null;f.fixed||(V=h(A,{children:[h(O,{onClick:$,children:[o(P,{value:"Add/Remove points"}),o(P,{value:"Toggle points and intervals"}),o(P,{value:"Move Points"})]}),h(K,{children:[o(M,{onClick:()=>r({action:s.clear}),value:"Clear"}),o(M,{onClick:()=>r({action:s.setToR}),value:"R"})]})]}));let y=40,k=36,I=[],C=[];for(let e=-10;e<=10;e++)C.push(e);let T=[];for(let e=y;e<780;e=e+k){I.push(o("line",{x1:e,y1:"35",x2:e,y2:"45",style:{stroke:"black",strokeWidth:"1"},shapeRendering:"geometricPrecision"},"hash"+e));let t=C.shift();T.push(o(D,{x:e,y:"66",textAnchor:"middle",children:t},"label"+e))}let p=[];for(let e of f.points){let t=e.inSubset,i=x(e.value),n="var(--mainPurple)";t||(n="white");let a=`point-${i}`;p.push(o("circle",{cx:i,cy:"40",r:"6",stroke:"black",strokeWidth:"1",fill:n},a))}let R=[];for(let e of f.intervals){if(e.right<e.left||!e.inSubset)continue;let t=x(e.left),i=x(e.right);const n=`lowerIntervalPoint${t}`,a=`higherIntervalPoint${i}`,u=`line${t}-${i}`;let c="var(--mainPurple)",m=t,W=i;t<38&&(m=20,p.push(o("polygon",{points:"5,40 20,46 20,34",style:{fill:c,stroke:c,strokeWidth:"1"}},n))),i>778&&(W=782,p.push(o("polygon",{points:"795,40 780,46 780,34",style:{fill:c,stroke:c,strokeWidth:"1"}},a))),R.push(o("line",{x1:m,y1:"40",x2:W,y2:"40",style:{stroke:c,strokeWidth:"8"}},u))}function x(e){let t=10,i=1,n=e+t;return y+n/i*k}function j(e){let t=e-y,i=10,n=1,a=t/k*n;return a=a-i,a}async function g(e,t){let i=e.clientX-w.current.offsetLeft,n=j(i),a=.2;if(t==="up"){if(d==="move points"&&l.current!==null&&(r({action:s.movePoint,args:{pointInd:l.current,value:n,transient:!1}}),l.current=null),d==="add remove points")l.current!==null?r({action:s.deletePoint,args:{pointInd:l.current}}):f.points.map(u=>u.value).includes(n)||r({action:s.addPoint,args:{value:n}});else if(d==="toggle")if(l.current!==null)r({action:s.togglePoint,args:{pointInd:l.current}});else{let u=0;for(let c of f.points)c.value<n&&u++;r({action:s.toggleInterval,args:{intervalInd:u}})}}else if(t==="down"){let u=null;for(let[c,m]of f.points.entries())if(Math.abs(m.value-n)<a){u=c;break}u!==null?l.current=u:l.current=null}else t==="move"?d==="move points"&&l.current!==null&&r({action:s.movePoint,args:{pointInd:l.current,value:n,transient:!0}}):t=="leave"&&d==="move points"&&l.current!==null&&(r({action:s.movePoint,args:{pointInd:l.current,value:n,transient:!1}}),l.current=null)}return o(S,{partialVisibility:!0,onChange:B,children:h(A,{children:[o("a",{name:L}),o("div",{ref:w,style:{display:"flex",gap:"12px"},children:V}),h("svg",{width:"808",height:"80",style:{backgroundColor:"white"},onMouseDown:e=>{g(e,"down")},onMouseUp:e=>{g(e,"up")},onMouseMove:e=>{g(e,"move")},onMouseLeave:e=>{g(e,"leave")},children:[o("polygon",{points:"5,40 20,50 20,30",style:{fill:"black",stroke:"black",strokeWidth:"1"}}),o("polygon",{points:"795,40 780,50 780,30",style:{fill:"black",stroke:"black",strokeWidth:"1"}}),R,I,o("line",{x1:"20",y1:"40",x2:"780",y2:"40",style:{stroke:"black",strokeWidth:"2"}}),p,T]})]})})});export{Z as default};
