import{aw as C,bn as F,r as u,bs as p,j as a,F as v}from"./index-f703603d.js";import{BoardContext as x,LINE_LAYER_OFFSET as y}from"./graph-aa5358d9.js";import"./css-14ccef8c.js";import"./visibility-sensor-4b3aac5f.js";const P=C.memo(function h(b){let{name:L,id:o,SVs:e}=F(b);h.ignoreActionsWithoutCore=!0;const t=u.useContext(x);let l=u.useRef(null),r=u.useRef(null);u.useEffect(()=>()=>{r.current!==null&&s()},[]);function g(){if(!e.haveFunction||e.boundaryValues.length!==2||!e.boundaryValues.every(Number.isFinite))return null;let n=e.selectedStyle.fillColor,i={name:e.labelForGraph,visible:!e.hidden,withLabel:e.showLabel&&e.labelForGraph!=="",fixed:!0,layer:10*e.layer+y,fillColor:n,fillOpacity:e.selectedStyle.fillOpacity,highlight:!1,curveLeft:{visible:!1},curveRight:{visible:!1}};i.label={highlight:!1};let c=p(e.fDefinition);return l.current=t.create("functiongraph",c,{visible:!1}),t.create("integral",[e.boundaryValues,l.current],i)}function s(){r.current&&(t.removeObject(r.current),r.current=null,t.removeObject(l.current),l.current=null)}if(t){if(r.current===null)r.current=g();else if(!e.haveFunction||e.boundaryValues.length!==2||!e.boundaryValues.every(Number.isFinite))s();else{let n=p(e.fDefinition);l.current.Y=n,r.current.visProp.visible=!e.hidden,r.current.visPropCalc.visible=!e.hidden;let[i,c]=e.boundaryValues,[m,R]=e.boundaryValues.map(n);r.current.curveLeft.coords.setCoordinates(JXG.COORDS_BY_USER,[i,m]),r.current.curveRight.coords.setCoordinates(JXG.COORDS_BY_USER,[c,R]);let f=10*e.layer+y;r.current.visProp.layer!==f&&r.current.setAttribute({layer:f});let d=e.selectedStyle.fillColor;r.current.visProp.fillcolor!==d&&(r.current.visProp.fillcolor=d),r.current.visProp.fillopacity!==e.selectedStyle.fillOpacity&&(r.current.visProp.fillopacity=e.selectedStyle.fillOpacity),r.current.curveLeft.needsUpdate=!0,r.current.curveLeft.update(),r.current.curveLeft.fullUpdate(),r.current.curveRight.needsUpdate=!0,r.current.curveLeft.update(),r.current.curveRight.fullUpdate(),r.current.needsUpdate=!0,r.current.curveLeft.update(),r.current.fullUpdate(),t.update(),t.fullUpdate(),t.updateRenderer()}return a(v,{children:a("a",{name:o})})}return e.hidden?null:a(v,{children:a("a",{name:o})})});export{P as default};
