import{aw as B,bn as S,r as m,j as l,a as R,F as V,s as W}from"./index-2be4b65a.js";import{V as I}from"./visibility-sensor-69a0b294.js";const j=W.svg`
border: '2px solid red';
margin: 2px;
outline: none;
`,P=B.memo(function k(e){let{name:u,id:i,SVs:a,actions:o,callAction:r}=S(e),x=a.selectedRowIndex-1,g=a.selectedBoxIndex-1;k.ignoreActionsWithoutCore=!0;let c=m.createRef(a.fixed);c.current=a.fixed;let f=t=>{r({action:o.recordVisibilityChange,args:{isVisible:t}})};if(m.useEffect(()=>()=>{r({action:o.recordVisibilityChange,args:{isVisible:!1}})},[]),a.hidden)return null;function h(t){c.current||r({action:o.selectRow,args:{index:Number(t)+1}})}function w(t,s){c.current||(s!==void 0&&r({action:o.selectRow,args:{index:Number(s)+1}}),r({action:o.selectBox,args:{index:Number(t)+1}}))}function n(t){c.current||r({action:o.updateRowText,args:{newValue:t}})}function d(t){var s,p,y,T,v,C,D,O,A,U;((s=t.relatedTarget)==null?void 0:s.id)!==`orbitaladdrow${i}`&&((p=t.relatedTarget)==null?void 0:p.id)!==`orbitalremoverow${i}`&&((y=t.relatedTarget)==null?void 0:y.id)!==`orbitaladdbox${i}`&&((T=t.relatedTarget)==null?void 0:T.id)!==`orbitaladduparrow${i}`&&((v=t.relatedTarget)==null?void 0:v.id)!==`orbitaladddownarrow${i}`&&((C=t.relatedTarget)==null?void 0:C.id)!==`orbitalremovearrow${i}`&&((D=t.relatedTarget)==null?void 0:D.id)!==`orbitalremovebox${i}`&&(((O=t.relatedTarget)==null?void 0:O.id)!==`OrbitalText${x}${i}`&&((A=t.relatedTarget)==null?void 0:A.id)!==`OrbitalRow${x}${i}`&&((U=t.relatedTarget)==null?void 0:U.id.substring(0,10+i.length))!==`orbitalbox${i}`&&h(-1),w(-1))}let b=[];for(let[t,s]of Object.entries(a.rows)){let p=a.rows.length-t-1;b.push(l(E,{updateRowText:n,rowNumber:p,selectedRow:x,setSelectedRow:h,orbitalText:s.orbitalText,boxes:s.boxes,selectedBox:g,setSelectedBox:w,deselect:d,name:i},`OrbitalRow${p}`))}let $=null;return a.fixed||($=R("div",{children:[l("button",{id:`orbitaladdrow${i}`,onBlur:t=>{d(t)},onClick:()=>{r({action:o.addRow})},children:"Add Row"}),l("button",{id:`orbitalremoverow${i}`,onClick:()=>{r({action:o.removeRow})},children:"Remove Row"}),l("button",{id:`orbitaladdbox${i}`,onBlur:t=>{d(t)},onClick:()=>{r({action:o.addBox})},children:"Add Box"}),l("button",{id:`orbitalremovebox${i}`,onBlur:t=>{d(t)},onClick:()=>{r({action:o.removeBox})},children:"Remove Box"}),l("button",{id:`orbitaladduparrow${i}`,onBlur:t=>{d(t)},onClick:()=>{r({action:o.addUpArrow})},children:"Add Up Arrow"}),l("button",{id:`orbitaladddownarrow${i}`,onBlur:t=>{d(t)},onClick:()=>{r({action:o.addDownArrow})},children:"Add Down Arrow"}),l("button",{id:`orbitalremovearrow${i}`,onBlur:t=>{d(t)},onClick:()=>{r({action:o.removeArrow})},children:"Remove Arrow"})]})),l(I,{partialVisibility:!0,onChange:f,children:R(V,{children:[$,b]})})}),E=B.memo(function({rowNumber:e,updateRowText:u,selectedRow:i,setSelectedRow:a,orbitalText:o,boxes:r,selectedBox:x,setSelectedBox:g,deselect:c,name:f}){let h={width:"800px",height:"44px",display:"flex",backgroundColor:"#E2E2E2",marginTop:"2px",marginBottom:"2px",padding:"2px",border:"white solid 2px"};i===e&&(h.border="#1A5A99 solid 2px");let w=[];for(let[n,d]of Object.entries(r)){let b=!1;i==e&&x==n&&(b=!0),w.push(l(X,{boxNum:n,rowNumber:e,arrows:d,isSelected:b,setSelectedBox:g,name:f},`OrbitalBox${e}-${n}`))}return R("div",{id:`OrbitalRow${e}${f}`,tabIndex:"-1",onClick:()=>{i!==e&&a(e)},onBlur:n=>{c(n)},style:h,children:[l(J,{orbitalText:o,rowNumber:e,updateRowText:u,name:f}),w]},`OrbitalRow${e}`)}),J=B.memo(function({rowNumber:e,updateRowText:u,orbitalText:i,name:a}){return l("input",{id:`OrbitalText${e}${a}`,style:{marginRight:"4px",height:"14px"},type:"text",size:"4",value:i,onChange:o=>{let r=o.target.value;u(r)}})}),X=B.memo(function({boxNum:e,arrows:u="",setSelectedBox:i,isSelected:a,rowNumber:o,name:r}){const x=l("polyline",{id:`firstUp${e}`,points:"6,14 12,6 18,14 12,6 12,35",style:{fill:"none",stroke:"black",strokeWidth:"2"}},`orbitalboxfirstUp${e}`),g=l("polyline",{id:`firstDown${e}`,points:"6,26 12,34 18,26 12,34 12,5",style:{fill:"none",stroke:"black",strokeWidth:"2"}},`orbitalboxfirstDown${e}`),c=l("polyline",{id:`secondUp${e}`,points:"22,14 28,6 34,14 28,6 28,35",style:{fill:"none",stroke:"black",strokeWidth:"2"}},`orbitalboxsecondUp${e}`),f=l("polyline",{id:`secondDown${e}`,points:"22,26 28,34 34,26 28,34 28,5",style:{fill:"none",stroke:"black",strokeWidth:"2"}},`orbitalboxsecondDown${e}`),h=l("polyline",{id:`thirdUp${e}`,points:"38,14 44,6 50,14 44,6 44,35",style:{fill:"none",stroke:"black",strokeWidth:"2"}},`orbitalboxthirdUp${e}`),w=l("polyline",{id:`thirdDown${e}`,points:"38,26 44,34 50,26 44,34 44,5",style:{fill:"none",stroke:"black",strokeWidth:"2"}},`orbitalboxthirdDown${e}`);let n=[],[d,b,$]=u.split("");d=="U"&&n.push(x),d=="D"&&n.push(g),b=="U"&&n.push(c),b=="D"&&n.push(f),$=="U"&&n.push(h),$=="D"&&n.push(w);let t=40;$&&(t=56);let s="black",p="2px";return a&&(s="#1A5A99",p="6px"),R(j,{id:`orbitalbox${r}${o}-${e}`,tabIndex:"-1",onClick:y=>{i(e,o),y.stopPropagation()},width:t,height:"40",children:[l("rect",{x:"0",y:"0",rx:"4",ry:"4",width:t,height:"40",style:{fill:"white",stroke:s,strokeWidth:p,fillOpacity:"1",strokeOpacity:"1"}}),n]},`orbitalbox${e}`)});export{P as default};
