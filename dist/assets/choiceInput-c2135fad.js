import{ao as L,bl as j,r as N,R as O,bs as G,j as i,H as f,bq as R,$ as D,aP as V,br as E,a as r,F as k,h as U,bm as $}from"./index-a1cd8b25.js";const p=U.button`
  position: relative;
  /* width: 24px; */
  height: 24px;
  color: #ffffff;
  background-color: var(--mainBlue);
  display: inline-block;
  text-align: center;
  padding: 2px;
  z-index: 0;
  /* border: var(--mainBorder); */
  border: none;
  border-radius: var(--mainBorderRadius);
  margin: 0px 4px 4px 0px;

  &:hover {
    background-color: var(--lightBlue);
    color: black;
  }
`,J=L.memo(function P(B){let{name:K,id:a,SVs:e,actions:x,children:F,sourceOfUpdate:q,ignoreUpdate:M,rendererName:W,callAction:y}=j(B);P.baseStateVariable="selectedIndices";const[g,w]=N.useState(e.selectedIndices),H=O(G(W));let S=N.useRef(null);!M&&S.current!==e.selectedIndices?(w(e.selectedIndices),S.current=e.selectedIndices):S.current=null;let u="unvalidated";(e.valueHasBeenValidated||e.numAttemptsLeft<1)&&(e.creditAchieved===1?u="correct":e.creditAchieved===0?u="incorrect":u="partialcorrect");function _(n){let t=[];if(e.inline)n.target.value&&(t=Array.from(n.target.selectedOptions,l=>Number(l.value)));else if(e.selectMultiple){t=[...g];let l=Number(n.target.value);if(n.target.checked)t.includes(l)||(t.push(l),t.sort((o,s)=>o-s));else{let o=t.indexOf(l);o!==-1&&t.splice(o,1)}}else t=[Number(n.target.value)];(g.length!==t.length||g.some((l,o)=>l!=t[o]))&&(w(t),S.current=e.selectedIndices,H(l=>{let o={...l};return o.ignoreUpdate=!0,o}),y({action:x.updateSelectedIndices,args:{selectedIndices:t},baseVariableValue:t}))}if(e.hidden)return null;let m=e.disabled,A=e.label;if(e.labelHasLatex&&(A=i($.MathJax,{hideUntilTypeset:"first",inline:!0,dynamic:!0,children:A})),e.inline){let n={cursor:"pointer",padding:"1px 6px 1px 6px",width:"24px"},t=null;if(e.includeCheckWork&&!e.suppressCheckwork){if(u==="unvalidated")m&&(n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGray")),t=i(p,{id:a+"_submit",disabled:m,tabIndex:"0",style:n,onClick:()=>y({action:x.submitAnswer}),onKeyPress:h=>{h.key==="Enter"&&y({action:x.submitAnswer})},children:i(f,{style:{},icon:R,transform:{rotate:90}})});else if(e.showCorrectness)if(u==="correct")n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGreen"),t=i(p,{id:a+"_correct",style:n,children:i(f,{icon:D})});else if(u==="partialcorrect"){let d=`${Math.round(e.creditAchieved*100)} %`;n.width="44px",n.backgroundColor="#efab34",t=i(p,{id:a+"_partial",style:n,children:d})}else n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainRed"),t=i(p,{id:a+"_incorrect",style:n,children:i(f,{icon:V})});else n.backgroundColor="rgb(74, 3, 217)",n.padding="1px 8px 1px 4px",t=i(p,{id:a+"_saved",style:n,children:i(f,{icon:E})});e.numAttemptsLeft<0?t=r(k,{children:[t,i("span",{children:"(no attempts remaining)"})]}):e.numAttemptsLeft==1?t=r(k,{children:[t,i("span",{children:"(1 attempt remaining)"})]}):Number.isFinite(e.numAttemptsLeft)&&(t=r(k,{children:[t,r("span",{children:["(",e.numAttemptsLeft," attempts remaining)"]})]}))}let l=e,o=e.choiceTexts.map(function(h,d){return l.choicesHidden[d]?null:i("option",{value:d+1,disabled:l.choicesDisabled[d],children:h},d+1)}),s=g;return s===void 0?s="":e.selectMultiple||(s=s[0],s===void 0&&(s="")),r(L.Fragment,{children:[i("a",{name:a}),r("label",{style:{display:"inline-flex",maxWidth:"100%"},id:a+"-label",children:[A,r("select",{className:"custom-select",id:a,onChange:_,value:s,disabled:m,multiple:e.selectMultiple,children:[i("option",{hidden:!0,value:"",children:e.placeHolder}),o]})]}),t]})}else{let n={height:"24px",display:"inline-block",padding:"1px 6px 1px 6px",cursor:"pointer"},t=null;if(e.includeCheckWork&&!e.suppressCheckwork)if(u==="unvalidated"){let b=e.submitLabel;e.showCorrectness||(b=e.submitLabelNoCorrectness),m&&(n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGray")),t=r(p,{id:a+"_submit",tabIndex:"0",disabled:m,style:n,onClick:()=>y({action:x.submitAnswer}),onKeyPress:c=>{c.key==="Enter"&&y({action:x.submitAnswer})},children:[i(f,{style:{},icon:R,transform:{rotate:90}})," ",b]})}else if(e.showCorrectness){if(u==="correct")n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainGreen"),t=r(p,{id:a+"_correct",style:n,children:[i(f,{icon:D}),"  Correct"]});else if(u==="incorrect")n.backgroundColor=getComputedStyle(document.documentElement).getPropertyValue("--mainRed"),t=r(p,{id:a+"_incorrect",style:n,children:[i(f,{icon:V}),"  Incorrect"]});else if(u==="partialcorrect"){n.backgroundColor="#efab34";let c=`${Math.round(e.creditAchieved*100)}% Correct`;t=i(p,{id:a+"_partial",style:n,children:c})}}else n.backgroundColor="rgb(74, 3, 217)",t=r(p,{id:a+"_saved",style:n,children:[i(f,{icon:E}),"  Response Saved"]});e.numAttemptsLeft<0?t=r(k,{children:[t,i("span",{children:"(no attempts remaining)"})]}):e.numAttemptsLeft==1?t=r(k,{children:[t,i("span",{children:"(1 attempt remaining)"})]}):Number.isFinite(e.numAttemptsLeft)&&(t=r(k,{children:[t,r("span",{children:["(",e.numAttemptsLeft," attempts remaining)"]})]}));let l=a,o={listStyleType:"none"},s=l+"_choice",h="radio";e.selectMultiple&&(h="checkbox");let d=e,T=e.choiceOrder.map(b=>F[b-1]).map(function(b,c){if(d.choicesHidden[c])return null;if(h=="radio"){let I=m||d.choicesDisabled[c],C="radio-container",v="radio-checkmark";return I&&(C+=" radio-container-disabled",v+=" radio-checkmark-disabled"),r("label",{className:C,children:[i("input",{type:"radio",id:s+(c+1)+"_input",name:l,value:c+1,checked:g.includes(c+1),onChange:_,disabled:I}),i("span",{className:v}),i("label",{htmlFor:s+(c+1)+"_input",style:{marginLeft:"2px"},children:b})]},l+"_choice"+(c+1))}else if(h=="checkbox"){let I=m||d.choicesDisabled[c],C="checkbox-container",v="checkbox-checkmark";return I&&(C+=" checkbox-container-disabled",v+=" checkbox-checkmark-disabled"),r("label",{className:C,children:[i("input",{type:"checkbox",id:s+(c+1)+"_input",name:l,value:c+1,checked:g.includes(c+1),onChange:_,disabled:m||d.choicesDisabled[c]}),i("span",{className:v}),i("label",{htmlFor:s+(c+1)+"_input",style:{marginLeft:"2px"},children:b})]},l+"_choice"+(c+1))}});return r("div",{id:l+"-label",children:[A,r("ol",{id:l,style:o,children:[i("a",{name:a}),T]}),t]})}});export{J as default};
