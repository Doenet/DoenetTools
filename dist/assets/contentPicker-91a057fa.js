import{ao as j,bl as k,r as h,R as B,bs as N,j as r,a as f,bn as T}from"./index-e270c841.js";const E=j.memo(function g(I){let{name:w,id:c,SVs:e,children:m,actions:a,ignoreUpdate:S,rendererName:V,callAction:d}=k(I);g.baseStateVariable="selectedIndices";const[o,p]=h.useState(e.selectedIndices),y=B(N(V));let s=h.useRef(null);!S&&s.current!==e.selectedIndices?(p(e.selectedIndices),s.current=e.selectedIndices):s.current=null;let C=t=>{d({action:a.recordVisibilityChange,args:{isVisible:t}})};h.useEffect(()=>()=>{d({action:a.recordVisibilityChange,args:{isVisible:!1}})},[]);function R(t){let n=[];t.target.value&&(n=Array.from(t.target.selectedOptions,l=>Number(l.value))),(o.length!==n.length||o.some((l,i)=>l!=n[i]))&&(p(n),s.current=e.selectedIndices,y(l=>{let i={...l};return i.ignoreUpdate=!0,i}),d({action:a.updateSelectedIndices,args:{selectedIndices:n},baseVariableValue:n}))}if(e.hidden)return null;let u=[];if(e.separateByTopic)for(let t in e.childrenByTopic){let l=e.childrenByTopic[t].map(function(i){return r("option",{value:i+1,children:e.childInfo[i].title},i+1)});u.push(r("optgroup",{label:t,children:l},t))}else u=e.childInfo.map(function(t,n){return r("option",{value:n+1,children:t.title},n+1)});let v=o[0],b=null;e.label&&(b=e.label+": ");let x=r("p",{children:f("label",{children:[b,r("select",{className:"custom-select",id:c+"-select",onChange:t=>R(t),value:v,disabled:e.disabled,children:u})]})});return r(T,{partialVisibility:!0,onChange:C,children:f("section",{id:c,children:[r("a",{name:c}),x,m]})})});export{E as default};
