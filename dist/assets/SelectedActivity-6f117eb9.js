import{e as u,s as _,z as b,R as L,p as x,A as k,ab as E,r as I,v as M,f as j,o as G,k as N,E as J,a as s,F as h,j as e,aR as f,w as X,_ as z,B as g,H,V as U,ap as $}from"./index-a1cd8b25.js";import{A as q,u as K,a as W,b as Q,D as Y,T as Z,c as ee,d as te,e as ie,G as ae,I as se,f as ne,S as oe,g as le,h as re,i as ce,j as de,k as ue,P as me,l as Ae,m as pe,n as ve,M as fe,o as ge,C as he,p as we}from"./SettingComponents-83b3d3e4.js";import{A as ye}from"./ActionButtonGroup-24932f5c.js";import{e as V}from"./RoleDropdown-6cbb7a86.js";import{T as Te}from"./Textfield-07b7a0c1.js";import"./DateTime-3a486389.js";import"./moment-e3d6e6af.js";import"./IncrementMenu-54a2d7c6.js";import"./DropdownMenu-3b5a6419.js";import"./RelatedItems-9e7662ee.js";function Re(){const o=u(_("courseId")),i=u(b)[0],d=L(x),{canEditContent:w}=u(V(o)),{label:n,content:m}=u(k(i)),{renameItem:A,create:r,compileActivity:y,deleteItem:t}=E(o),[l,c]=I.useState(n),p=M();I.useEffect(()=>{c(n)},[n]);const v=j();let F=G(({snapshot:a,set:T})=>async()=>{const R=await a.getPromise(b);T(N,null),T(b,[]);for(let B of R)T(k(B),O=>{let D={...O};return D.isSelected=!1,D})});const C=()=>{let a=l;l===""&&(a=n,n===""&&(a="Untitled"),c(a)),n!==a&&A(i,a)};if(i==null)return null;let S=J(m),P=s("h2",{"data-test":"infoPanelItemLabel",style:{margin:"16px 5px"},children:[e(H,{icon:U})," ",n]});return w==="1"?s(h,{children:[P,s(ye,{vertical:!0,children:[e(f,{width:"menu",value:"Edit Activity",dataTest:"Edit Activity",onClick:()=>{S==null?p("ERROR: No page found in activity",X.INFO):(F(),v(`/courseactivityeditor/${i}/${S}`))}}),e(f,{width:"menu",value:"View Draft Activity",dataTest:"View Draft Activity",onClick:()=>{y({activityDoenetId:i,courseId:o,successCallback:()=>{d({page:"course",tool:"draftactivity",view:"",params:{doenetId:i,requestedVariant:1}})}})}}),e(f,{width:"menu",value:"View Assigned Activity",dataTest:"View Assigned Activity",onClick:()=>{d({page:"course",tool:"assignment",view:"",params:{doenetId:i}})}})]}),e("br",{}),e(q,{doenetId:i,courseId:o}),e(Te,{label:"Label",dataTest:"Label Activity",vertical:!0,width:"menu",value:l,onChange:a=>c(a.target.value),onKeyDown:a=>{a.keyCode===13&&C()},onBlur:C}),e("br",{}),s(z,{vertical:!0,children:[e(g,{width:"menu",onClick:()=>r({itemType:"page"}),value:"Add Page",dataTest:"Add Page"}),e(g,{width:"menu",onClick:()=>r({itemType:"order"}),value:"Add Order",dataTest:"Add Order"}),e(g,{width:"menu",onClick:()=>r({itemType:"collectionLink"}),dataTest:"Add Collection Link",value:"Add Collection Link"})]}),e("br",{}),e(be,{doenetId:i,courseId:o}),e(g,{width:"menu",value:"Delete Activity",dataTest:"Delete Activity",alert:!0,onClick:a=>{a.preventDefault(),a.stopPropagation(),t({doenetId:i})}})]}):s(h,{children:[P,e(f,{width:"menu",dataTest:"View Activity",value:"View Activity",onClick:()=>{d({page:"course",tool:"assignment",view:"",params:{doenetId:i}})}})]})}$({key:"temporaryRestrictToAtom",default:[]});function be({doenetId:o,courseId:i}){const{canModifyActivitySettings:d,canViewActivitySettings:w}=u(V(i)),{value:{numberOfAttemptsAllowed:n,timeLimit:m,assignedDate:A,dueDate:r,totalPointsOrPercent:y}}=K(i,o);L(x);const t={courseId:i,doenetId:o,editable:d??"0"};if(w==="1")return s(h,{children:[e(W,{...t}),e("br",{}),e(Q,{...t}),e(Y,{...t}),e(Z,{...t}),e(ee,{...t}),e(te,{...t}),e(ie,{...t}),e(ae,{...t}),e(se,{...t}),s("div",{style:{margin:"16px 0"},children:[e(ne,{...t}),e(oe,{...t}),e(le,{...t}),e(re,{...t}),e(ce,{...t}),e(de,{...t}),e(ue,{...t}),e(me,{...t}),e(Ae,{...t}),e(pe,{...t}),e(ve,{...t}),e(fe,{...t}),e(ge,{...t}),e(he,{...t})]}),e(we,{...t})]});let l=n;l===null&&(l="unlimited");let c=null;m!==null&&(c=s("p",{children:["Time Limit: ",m," minutes"]}));let p=null;A!==null&&(p=s("p",{children:["Assigned: ",A]}));let v=e("p",{children:"No Due Date"});return r!==null&&(v=s("p",{children:["Due: ",r]})),e(h,{children:s("div",{children:[p,v,c,s("p",{children:["Attempts Allowed: ",l]}),s("p",{children:["Points: ",y]})]})})}export{be as AssignmentSettings,Re as default};
