import{a3 as E,R as L,a4 as M,e as a,a5 as R,a6 as h,s as m,q as k,a7 as A,r as n,a8 as T,j as p,a9 as b}from"./index-1e3edf2b.js";function j(){let c=E();const s=c==null?void 0:c.pageDoenetId,I=L(M),g=a(R),D=a(h),P=a(m("pageId")),d=a(m("linkPageId"));let i=P,f=!1;d&&(f=!0,i=d),s&&(i=s);const o=a(k),t=a(A);let v=n.useRef(null),e=n.useRef(null),r=n.useRef(!0);const{saveDraft:u}=T();return n.useEffect(()=>()=>{t!==""&&(u({pageId:t,courseId:o,backup:r.current}),e.current!==null&&clearTimeout(e.current),e.current=null)},[t,u,o]),n.useEffect(()=>{t!==""&&(u({pageId:t,courseId:o,backup:r.current}).then(({success:l})=>{l&&(r.current=!1)}),e.current!==null&&clearTimeout(e.current),e.current=null)},[D]),i!==t?(r.current=!0,null):p("div",{children:p(b,{readOnly:f,editorRef:v,setInternalValueTo:g,onBeforeChange:l=>{I(l),clearTimeout(e.current),e.current=setTimeout(function(){u({pageId:t,courseId:o,backup:r.current}).then(({success:x})=>{x&&(r.current=!1)}),e.current=null},3e3)},paddingBottom:"50vh"},"codemirror")})}export{j as default};
