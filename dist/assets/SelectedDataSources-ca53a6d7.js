import{r as u,l as h,V as p,m as f,w as y,H as w,W as D,z as x,a as g,F as A,j as c,A as S,k as v}from"./index-1922ac75.js";import{A as C}from"./ActionButton-dfcbbba6.js";function F(){const[s,r]=u.useState([]),n=h(p),i=h(f("courseId")),l=y(({snapshot:t})=>async o=>{let e=[];for(let d of o){let a=await t.getPromise(w(d));if(a.type=="activity"&&a.isAssigned)e.push(d);else if(a.type=="section"&&a.isAssigned){let I=await t.getPromise(D({courseId:i,sectionId:d}));e=[...await l(I),...e]}}return e=[...new Set(e)],e},[i]);u.useEffect(()=>{n.length>0?l(n).then(t=>{r(t)}):r([])},[n]);const m=x();return g(A,{children:[c("h2",{"data-test":"selectedDataSourcesHeading",style:{margin:"16px 5px"},children:"Event Data"}),g("div",{children:[s.length," ",s.length==1?"Activity":"Activities"]}),c("br",{}),c(C,{width:"menu",value:"View on Shiny",disabled:s.length==0,onClick:async()=>{if(s.length==0)m("No activities found",S.INFO);else{let t=s.join("&data=");const o=await v.get(`/api/createSecretCode.php?courseId=${i}`),{secretCode:e}=o.data;window.open(`https://doenet.shinyapps.io/analyzer/?data=${t}&code=${e}`,"_blank")}}})]})}export{F as default};
