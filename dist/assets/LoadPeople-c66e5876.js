import{v as C,R as c,e as P,s as T,ab as _,r as d,o as k,g as S,i as L,a_ as w,a as n,j as e,_ as D,B as F,C as N,ap as l,w as j}from"./index-a1cd8b25.js";import{p as B}from"./index-817199da.js";import{C as V}from"./CollapseSection-8160ccfb.js";const $=l({key:"peopleTableDataAtom",default:[]}),z=l({key:"processAtom",default:"Idle"}),J=Object.freeze({Email:"Email",FirstName:"FirstName",LastName:"LastName",Section:"Section",ExternalId:"ExternalId"}),O=l({key:"headersAtom",default:[]}),H=l({key:"entriesAtom",default:[]}),K=l({key:"enrolllearnerAtom",default:""}),W=Object.freeze({IDLE:"idle",SELECT:"select",PREVIEW:"preview"});function M({style:A}){const x=C(),u=c(z),p=c(O),m=c(H),h=P(T("courseId"));let{canAutoEnroll:r}=_(h);const[i,f]=d.useState(r);d.useEffect(()=>{let s=!1;r=="1"&&(s=!0),f(s)},[r]);const v=k(s=>async(t,a)=>{let o=0;a&&(o=1),await S.post("/api/modifyCourse.php",{courseId:t,canAutoEnroll:o}),s(L,R=>{let E={...R};return E.canAutoEnroll=o,E})}),y=d.useCallback(s=>{const t=new FileReader;t.onabort=()=>{},t.onerror=()=>{},t.onload=()=>{B(t.result,{comment:"#"},function(a,o){a!=null&&a.message?x(`${a.message}. Please reformat and try again`,j.ERROR):(p(o[0]),o.shift(),m(o),u(W.PREVIEW))})},t.readAsText(s[0])},[m,p,u]),{getRootProps:I,getInputProps:b,isDragActive:g}=w({onDrop:y});return n("div",{style:A,children:[n("div",{...I(),children:[e("input",{...b(),"data-test":"Import CSV file"}),g?e("p",{children:"Drop the files here"}):e(D,{vertical:!0,children:e(F,{width:"menu",value:"Import CSV file"})})]},"drop"),e("div",{style:{height:"4px"}}),n(V,{title:"Formatting Instructions",collapsed:!0,style:{marginTop:"12px"},children:[e("p",{children:"Your file needs to contain an email address. The parser will ignore columns which are not listed."}),e("div",{children:e("b",{children:"Email (required)"})}),e("div",{children:e("b",{children:"ExternalId"})}),e("div",{children:e("b",{children:"FirstName"})}),e("div",{children:e("b",{children:"LastName"})}),e("div",{children:e("b",{children:"Section"})})]}),n("p",{style:{display:"flex"},children:[e(N,{dataTest:"Auto Enroll",checked:i,onClick:()=>{f(!i),v(h,!i)}})," ",e("span",{style:{marginLeft:"10px"},children:"Auto Enrollment"})," "]})]})}export{W as csvPeopleProcess,M as default,K as enrolllearnerAtom,H as entriesAtom,O as headersAtom,$ as peopleTableDataAtom,z as processAtom,J as validHeaders};
