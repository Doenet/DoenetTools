import{av as V,bp as A,r as u,j as n,a as h}from"./index-64d70d3a.js";import{V as H}from"./visibility-sensor-c312bf1f.js";import{M as E}from"./index.esm-69c9359a.js";import"./setPrototypeOf-51e8cf87.js";const j=V.memo(function(g){var m;let{name:R,id:r,SVs:a,children:l,actions:c,callAction:d}=A(g),y=e=>{d({action:c.recordVisibilityChange,args:{isVisible:e}})};if(u.useEffect(()=>()=>{d({action:c.recordVisibilityChange,args:{isVisible:!1}})},[]),a.hidden||!l)return null;let p=l,s=null,o=null;if(a.captionChildName){let e;for(let[i,t]of l.entries())if(((m=t==null?void 0:t.props)==null?void 0:m.componentInstructions.componentName)===a.captionChildName){e=i;break}o=l[e],p.splice(e,1)}if(a.suppressFigureNameInCaption)o&&(s=n("div",{children:o}));else{let e=n("strong",{children:a.figureName});o?s=h("div",{children:[e,": ",o]}):s=n("div",{children:e})}const[C,f]=u.useState("center");function v(e){var i=document.createElement(e.nodeName),t;return i.setAttribute("style","margin:0; padding:0; font-family:"+(e.style.fontFamily||"inherit")+"; font-size:"+(e.style.fontSize||"inherit")),i.innerHTML="A",e.parentNode.appendChild(i),t=i.clientHeight,i.parentNode.removeChild(i),t}function b(){var e=document.getElementById(r+"_caption"),i=e.offsetHeight,t=v(document.getElementById(r+"_caption")),x=Math.round(i/t);return x}function N(){b()>=2?f("left"):f("center")}return n(H,{partialVisibility:!0,onChange:y,children:h("figure",{id:r,style:{margin:"12px 0"},children:[n("a",{name:r}),p,n("figcaption",{id:r+"_caption",children:n(E,{onResize:N,children:({measureRef:e})=>n("div",{ref:e,style:{textAlign:C},children:s})})})]})})});export{j as default};
