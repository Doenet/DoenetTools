var NU=Object.create;var bp=Object.defineProperty;var CU=Object.getOwnPropertyDescriptor;var SU=Object.getOwnPropertyNames;var AU=Object.getPrototypeOf,wU=Object.prototype.hasOwnProperty;var xU=(i,t,e)=>t in i?bp(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var px=i=>bp(i,"__esModule",{value:!0});var Te=(i,t)=>()=>(i&&(t=i(i=0)),t);var U=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),lt=(i,t)=>{px(i);for(var e in t)bp(i,e,{get:t[e],enumerable:!0})},EU=(i,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of SU(t))!wU.call(i,r)&&r!=="default"&&bp(i,r,{get:()=>t[r],enumerable:!(e=CU(t,r))||e.enumerable});return i},j=i=>EU(px(bp(i!=null?NU(AU(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var T=(i,t,e)=>(xU(i,typeof t!="symbol"?t+"":t,e),e);var vp=U((Nd,dx)=>{(function(i,t){typeof Nd=="object"?dx.exports=Nd=t():typeof define=="function"&&define.amd?define([],t):i.CryptoJS=t()})(Nd,function(){var i=i||function(t,e){var r=Object.create||function(){function y(){}return function(b){var g;return y.prototype=b,g=new y,y.prototype=null,g}}(),a={},s=a.lib={},o=s.Base=function(){return{extend:function(y){var b=r(this);return y&&b.mixIn(y),(!b.hasOwnProperty("init")||this.init===b.init)&&(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var b in y)y.hasOwnProperty(b)&&(this[b]=y[b]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=s.WordArray=o.extend({init:function(y,b){y=this.words=y||[],b!=e?this.sigBytes=b:this.sigBytes=y.length*4},toString:function(y){return(y||c).stringify(this)},concat:function(y){var b=this.words,g=y.words,v=this.sigBytes,C=y.sigBytes;if(this.clamp(),v%4)for(var w=0;w<C;w++){var S=g[w>>>2]>>>24-w%4*8&255;b[v+w>>>2]|=S<<24-(v+w)%4*8}else for(var w=0;w<C;w+=4)b[v+w>>>2]=g[w>>>2];return this.sigBytes+=C,this},clamp:function(){var y=this.words,b=this.sigBytes;y[b>>>2]&=4294967295<<32-b%4*8,y.length=t.ceil(b/4)},clone:function(){var y=o.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var b=[],g=function(S){var S=S,A=987654321,E=4294967295;return function(){A=36969*(A&65535)+(A>>16)&E,S=18e3*(S&65535)+(S>>16)&E;var I=(A<<16)+S&E;return I/=4294967296,I+=.5,I*(t.random()>.5?1:-1)}},v=0,C;v<y;v+=4){var w=g((C||t.random())*4294967296);C=w()*987654071,b.push(w()*4294967296|0)}return new l.init(b,y)}}),u=a.enc={},c=u.Hex={stringify:function(y){for(var b=y.words,g=y.sigBytes,v=[],C=0;C<g;C++){var w=b[C>>>2]>>>24-C%4*8&255;v.push((w>>>4).toString(16)),v.push((w&15).toString(16))}return v.join("")},parse:function(y){for(var b=y.length,g=[],v=0;v<b;v+=2)g[v>>>3]|=parseInt(y.substr(v,2),16)<<24-v%8*4;return new l.init(g,b/2)}},p=u.Latin1={stringify:function(y){for(var b=y.words,g=y.sigBytes,v=[],C=0;C<g;C++){var w=b[C>>>2]>>>24-C%4*8&255;v.push(String.fromCharCode(w))}return v.join("")},parse:function(y){for(var b=y.length,g=[],v=0;v<b;v++)g[v>>>2]|=(y.charCodeAt(v)&255)<<24-v%4*8;return new l.init(g,b)}},m=u.Utf8={stringify:function(y){try{return decodeURIComponent(escape(p.stringify(y)))}catch(b){throw new Error("Malformed UTF-8 data")}},parse:function(y){return p.parse(unescape(encodeURIComponent(y)))}},f=s.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=m.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var b=this._data,g=b.words,v=b.sigBytes,C=this.blockSize,w=C*4,S=v/w;y?S=t.ceil(S):S=t.max((S|0)-this._minBufferSize,0);var A=S*C,E=t.min(A*4,v);if(A){for(var I=0;I<A;I+=C)this._doProcessBlock(g,I);var V=g.splice(0,A);b.sigBytes-=E}return new l.init(V,E)},clone:function(){var y=o.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),d=s.Hasher=f.extend({cfg:o.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var b=this._doFinalize();return b},blockSize:512/32,_createHelper:function(y){return function(b,g){return new y.init(g).finalize(b)}},_createHmacHelper:function(y){return function(b,g){return new h.HMAC.init(y,g).finalize(b)}}}),h=a.algo={};return a}(Math);return i})});var F0=U((Cd,hx)=>{(function(i,t){typeof Cd=="object"?hx.exports=Cd=t(vp()):typeof define=="function"&&define.amd?define(["./core"],t):t(i.CryptoJS)})(Cd,function(i){return function(){var t=i,e=t.lib,r=e.WordArray,a=e.Hasher,s=t.algo,o=[],l=s.SHA1=a.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,c){for(var p=this._hash.words,m=p[0],f=p[1],d=p[2],h=p[3],y=p[4],b=0;b<80;b++){if(b<16)o[b]=u[c+b]|0;else{var g=o[b-3]^o[b-8]^o[b-14]^o[b-16];o[b]=g<<1|g>>>31}var v=(m<<5|m>>>27)+y+o[b];b<20?v+=(f&d|~f&h)+1518500249:b<40?v+=(f^d^h)+1859775393:b<60?v+=(f&d|f&h|d&h)-1894007588:v+=(f^d^h)-899497514,y=h,h=d,d=f<<30|f>>>2,f=m,m=v}p[0]=p[0]+m|0,p[1]=p[1]+f|0,p[2]=p[2]+d|0,p[3]=p[3]+h|0,p[4]=p[4]+y|0},_doFinalize:function(){var u=this._data,c=u.words,p=this._nDataBytes*8,m=u.sigBytes*8;return c[m>>>5]|=128<<24-m%32,c[(m+64>>>9<<4)+14]=Math.floor(p/4294967296),c[(m+64>>>9<<4)+15]=p,u.sigBytes=c.length*4,this._process(),this._hash},clone:function(){var u=a.clone.call(this);return u._hash=this._hash.clone(),u}});t.SHA1=a._createHelper(l),t.HmacSHA1=a._createHmacHelper(l)}(),i.SHA1})});var M0=U((Sd,yx)=>{(function(i,t){typeof Sd=="object"?yx.exports=Sd=t(vp()):typeof define=="function"&&define.amd?define(["./core"],t):t(i.CryptoJS)})(Sd,function(i){return function(){var t=i,e=t.lib,r=e.WordArray,a=t.enc,s=a.Base64={stringify:function(l){var u=l.words,c=l.sigBytes,p=this._map;l.clamp();for(var m=[],f=0;f<c;f+=3)for(var d=u[f>>>2]>>>24-f%4*8&255,h=u[f+1>>>2]>>>24-(f+1)%4*8&255,y=u[f+2>>>2]>>>24-(f+2)%4*8&255,b=d<<16|h<<8|y,g=0;g<4&&f+g*.75<c;g++)m.push(p.charAt(b>>>6*(3-g)&63));var v=p.charAt(64);if(v)for(;m.length%4;)m.push(v);return m.join("")},parse:function(l){var u=l.length,c=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<c.length;m++)p[c.charCodeAt(m)]=m}var f=c.charAt(64);if(f){var d=l.indexOf(f);d!==-1&&(u=d)}return o(l,u,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function o(l,u,c){for(var p=[],m=0,f=0;f<u;f++)if(f%4){var d=c[l.charCodeAt(f-1)]<<f%4*2,h=c[l.charCodeAt(f)]>>>6-f%4*2;p[m>>>2]|=(d|h)<<24-m%4*8,m++}return r.create(p,m)}}(),i.enc.Base64})});var j0=U((wd,Tx)=>{(function(i,t){typeof wd=="object"?Tx.exports=wd=t(vp()):typeof define=="function"&&define.amd?define(["./core"],t):t(i.CryptoJS)})(wd,function(i){return function(t){var e=i,r=e.lib,a=r.WordArray,s=r.Hasher,o=e.algo,l=[],u=[];(function(){function m(y){for(var b=t.sqrt(y),g=2;g<=b;g++)if(!(y%g))return!1;return!0}function f(y){return(y-(y|0))*4294967296|0}for(var d=2,h=0;h<64;)m(d)&&(h<8&&(l[h]=f(t.pow(d,1/2))),u[h]=f(t.pow(d,1/3)),h++),d++})();var c=[],p=o.SHA256=s.extend({_doReset:function(){this._hash=new a.init(l.slice(0))},_doProcessBlock:function(m,f){for(var d=this._hash.words,h=d[0],y=d[1],b=d[2],g=d[3],v=d[4],C=d[5],w=d[6],S=d[7],A=0;A<64;A++){if(A<16)c[A]=m[f+A]|0;else{var E=c[A-15],I=(E<<25|E>>>7)^(E<<14|E>>>18)^E>>>3,V=c[A-2],O=(V<<15|V>>>17)^(V<<13|V>>>19)^V>>>10;c[A]=I+c[A-7]+O+c[A-16]}var k=v&C^~v&w,M=h&y^h&b^y&b,L=(h<<30|h>>>2)^(h<<19|h>>>13)^(h<<10|h>>>22),G=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),K=S+G+k+u[A]+c[A],B=L+M;S=w,w=C,C=v,v=g+K|0,g=b,b=y,y=h,h=K+B|0}d[0]=d[0]+h|0,d[1]=d[1]+y|0,d[2]=d[2]+b|0,d[3]=d[3]+g|0,d[4]=d[4]+v|0,d[5]=d[5]+C|0,d[6]=d[6]+w|0,d[7]=d[7]+S|0},_doFinalize:function(){var m=this._data,f=m.words,d=this._nDataBytes*8,h=m.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=t.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,m.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m}});e.SHA256=s._createHelper(p),e.HmacSHA256=s._createHmacHelper(p)}(Math),i.SHA256})});var B0=U((xd,Nx)=>{(function(i,t){typeof xd=="object"?Nx.exports=xd=t(vp()):typeof define=="function"&&define.amd?define(["./core"],t):t(i.CryptoJS)})(xd,function(i){return i.enc.Hex})});var Zx=U((lAe,Yx)=>{Yx.exports={space:"",cycles:!1,replacer:(i,t)=>t,stringify:JSON.stringify}});var ss=U((uAe,Jx)=>{"use strict";Jx.exports={isArray:Array.isArray,assign:Object.assign,isObject:i=>typeof i=="object",isFunction:i=>typeof i=="function",isBoolean:i=>typeof i=="boolean",isRegex:i=>i instanceof RegExp,keys:Object.keys}});var eE=U((cAe,Qx)=>{"use strict";var $p=Zx(),cz=ss().isFunction,pz=ss().isBoolean,mz=ss().isObject,fz=ss().isArray,dz=ss().isRegex,hz=ss().assign,yz=ss().keys;function bz(i){return i==null?i:dz(i)?i.toString():i.toJSON?i.toJSON():i}function gz(i,t){t=t||hz({},$p),cz(t)&&(t={compare:t});let e=t.space||$p.space,r=pz(t.cycles)?t.cycles:$p.cycles,a=t.replacer||$p.replacer,s=t.stringify||$p.stringify,o=t.compare&&function(u){return function(c){return function(p,m){let f={key:p,value:c[p]},d={key:m,value:c[m]};return u(f,d)}}}(t.compare);r||s(i);let l=[];return function u(c,p,m,f){let d=e?`
`+new Array(f+1).join(e):"",h=e?": ":":";if(m=bz(m),m=a.call(c,p,m),m!==void 0){if(!mz(m)||m===null)return s(m);if(fz(m)){let y=[];for(let b=0;b<m.length;b++){let g=u(m,b,m[b],f+1)||s(null);y.push(d+e+g)}return"["+y.join(",")+d+"]"}else{if(r){if(l.indexOf(m)!==-1)return s("[Circular]");l.push(m)}let y=yz(m).sort(o&&o(m)),b=[];for(let g=0;g<y.length;g++){let v=y[g],C=u(m,v,m[v],f+1);if(!C)continue;let w=s(v)+h+C;b.push(d+e+w)}return l.splice(l.indexOf(m),1),"{"+b.join(",")+d+"}"}}}({"":i},"",i,0)}Qx.exports=gz});var at=U((Ewe,sE)=>{var dh=function(i){return i&&i.Math==Math&&i};sE.exports=dh(typeof globalThis=="object"&&globalThis)||dh(typeof window=="object"&&window)||dh(typeof self=="object"&&self)||dh(typeof window=="object"&&window)||function(){return this}()||Function("return this")()});var De=U((Rwe,oE)=>{oE.exports=function(i){try{return!!i()}catch(t){return!0}}});var Tr=U((Vwe,lE)=>{var Ez=De();lE.exports=!Ez(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})});var am=U(pE=>{"use strict";var uE={}.propertyIsEnumerable,cE=Object.getOwnPropertyDescriptor,Rz=cE&&!uE.call({1:2},1);pE.f=Rz?function(t){var e=cE(this,t);return!!e&&e.enumerable}:uE});var bu=U((Owe,mE)=>{mE.exports=function(i,t){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:t}}});var vo=U((Dwe,fE)=>{var Vz={}.toString;fE.exports=function(i){return Vz.call(i).slice(8,-1)}});var gu=U((Pwe,dE)=>{var Iz=De(),Oz=vo(),Dz="".split;dE.exports=Iz(function(){return!Object("z").propertyIsEnumerable(0)})?function(i){return Oz(i)=="String"?Dz.call(i,""):Object(i)}:Object});var Mn=U((_we,hE)=>{hE.exports=function(i){if(i==null)throw TypeError("Can't call method on "+i);return i}});var ti=U((kwe,yE)=>{var Pz=gu(),_z=Mn();yE.exports=function(i){return Pz(_z(i))}});var Rt=U((Fwe,bE)=>{bE.exports=function(i){return typeof i=="function"}});var Mt=U((Mwe,gE)=>{var kz=Rt();gE.exports=function(i){return typeof i=="object"?i!==null:kz(i)}});var ma=U((jwe,vE)=>{var cT=at(),Fz=Rt(),Mz=function(i){return Fz(i)?i:void 0};vE.exports=function(i,t){return arguments.length<2?Mz(cT[i]):cT[i]&&cT[i][t]}});var vu=U((Bwe,TE)=>{var jz=ma();TE.exports=jz("navigator","userAgent")||""});var Tu=U((Lwe,xE)=>{var NE=at(),pT=vu(),CE=NE.process,SE=NE.Deno,AE=CE&&CE.versions||SE&&SE.version,wE=AE&&AE.v8,Mi,hh;wE?(Mi=wE.split("."),hh=Mi[0]<4?1:Mi[0]+Mi[1]):pT&&(Mi=pT.match(/Edge\/(\d+)/),(!Mi||Mi[1]>=74)&&(Mi=pT.match(/Chrome\/(\d+)/),Mi&&(hh=Mi[1])));xE.exports=hh&&+hh});var yh=U((Uwe,RE)=>{var EE=Tu(),Bz=De();RE.exports=!!Object.getOwnPropertySymbols&&!Bz(function(){var i=Symbol();return!String(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&EE&&EE<41})});var mT=U((zwe,VE)=>{var Lz=yh();VE.exports=Lz&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var sm=U((Hwe,IE)=>{var Uz=Rt(),zz=ma(),Hz=mT();IE.exports=Hz?function(i){return typeof i=="symbol"}:function(i){var t=zz("Symbol");return Uz(t)&&Object(i)instanceof t}});var fT=U((Gwe,OE)=>{OE.exports=function(i){try{return String(i)}catch(t){return"Object"}}});var To=U((qwe,DE)=>{var Gz=Rt(),qz=fT();DE.exports=function(i){if(Gz(i))return i;throw TypeError(qz(i)+" is not a function")}});var Nu=U((Wwe,PE)=>{var Wz=To();PE.exports=function(i,t){var e=i[t];return e==null?void 0:Wz(e)}});var kE=U(($we,_E)=>{var dT=Rt(),hT=Mt();_E.exports=function(i,t){var e,r;if(t==="string"&&dT(e=i.toString)&&!hT(r=e.call(i))||dT(e=i.valueOf)&&!hT(r=e.call(i))||t!=="string"&&dT(e=i.toString)&&!hT(r=e.call(i)))return r;throw TypeError("Can't convert object to primitive value")}});var No=U((Kwe,FE)=>{FE.exports=!1});var bh=U((Xwe,jE)=>{var ME=at();jE.exports=function(i,t){try{Object.defineProperty(ME,i,{value:t,configurable:!0,writable:!0})}catch(e){ME[i]=t}return t}});var gh=U((Ywe,LE)=>{var $z=at(),Kz=bh(),BE="__core-js_shared__",Xz=$z[BE]||Kz(BE,{});LE.exports=Xz});var om=U((Zwe,zE)=>{var Yz=No(),UE=gh();(zE.exports=function(i,t){return UE[i]||(UE[i]=t!==void 0?t:{})})("versions",[]).push({version:"3.18.3",mode:Yz?"pure":"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})});var Hr=U((Jwe,HE)=>{var Zz=Mn();HE.exports=function(i){return Object(Zz(i))}});var ir=U((Qwe,GE)=>{var Jz=Hr(),Qz={}.hasOwnProperty;GE.exports=Object.hasOwn||function(t,e){return Qz.call(Jz(t),e)}});var lm=U((exe,qE)=>{var eH=0,tH=Math.random();qE.exports=function(i){return"Symbol("+String(i===void 0?"":i)+")_"+(++eH+tH).toString(36)}});var st=U((txe,KE)=>{var rH=at(),nH=om(),WE=ir(),iH=lm(),$E=yh(),aH=mT(),um=nH("wks"),cm=rH.Symbol,sH=aH?cm:cm&&cm.withoutSetter||iH;KE.exports=function(i){return(!WE(um,i)||!($E||typeof um[i]=="string"))&&($E&&WE(cm,i)?um[i]=cm[i]:um[i]=sH("Symbol."+i)),um[i]}});var yT=U((rxe,ZE)=>{var XE=Mt(),YE=sm(),oH=Nu(),lH=kE(),uH=st(),cH=uH("toPrimitive");ZE.exports=function(i,t){if(!XE(i)||YE(i))return i;var e=oH(i,cH),r;if(e){if(t===void 0&&(t="default"),r=e.call(i,t),!XE(r)||YE(r))return r;throw TypeError("Can't convert object to primitive value")}return t===void 0&&(t="number"),lH(i,t)}});var pm=U((nxe,JE)=>{var pH=yT(),mH=sm();JE.exports=function(i){var t=pH(i,"string");return mH(t)?t:String(t)}});var vh=U((ixe,eR)=>{var fH=at(),QE=Mt(),bT=fH.document,dH=QE(bT)&&QE(bT.createElement);eR.exports=function(i){return dH?bT.createElement(i):{}}});var gT=U((axe,tR)=>{var hH=Tr(),yH=De(),bH=vh();tR.exports=!hH&&!yH(function(){return Object.defineProperty(bH("div"),"a",{get:function(){return 7}}).a!=7})});var fa=U(nR=>{var gH=Tr(),vH=am(),TH=bu(),NH=ti(),CH=pm(),SH=ir(),AH=gT(),rR=Object.getOwnPropertyDescriptor;nR.f=gH?rR:function(t,e){if(t=NH(t),e=CH(e),AH)try{return rR(t,e)}catch(r){}if(SH(t,e))return TH(!vH.f.call(t,e),t[e])}});var Ut=U((oxe,iR)=>{var wH=Mt();iR.exports=function(i){if(wH(i))return i;throw TypeError(String(i)+" is not an object")}});var Dr=U(oR=>{var xH=Tr(),EH=gT(),aR=Ut(),RH=pm(),sR=Object.defineProperty;oR.f=xH?sR:function(t,e,r){if(aR(t),e=RH(e),aR(r),EH)try{return sR(t,e,r)}catch(a){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}});var da=U((uxe,lR)=>{var VH=Tr(),IH=Dr(),OH=bu();lR.exports=VH?function(i,t,e){return IH.f(i,t,OH(1,e))}:function(i,t,e){return i[t]=e,i}});var Th=U((cxe,uR)=>{var DH=Rt(),vT=gh(),PH=Function.toString;DH(vT.inspectSource)||(vT.inspectSource=function(i){return PH.call(i)});uR.exports=vT.inspectSource});var TT=U((pxe,pR)=>{var _H=at(),kH=Rt(),FH=Th(),cR=_H.WeakMap;pR.exports=kH(cR)&&/native code/.test(FH(cR))});var mm=U((mxe,fR)=>{var MH=om(),jH=lm(),mR=MH("keys");fR.exports=function(i){return mR[i]||(mR[i]=jH(i))}});var Cu=U((fxe,dR)=>{dR.exports={}});var ji=U((dxe,gR)=>{var BH=TT(),LH=at(),UH=Mt(),zH=da(),NT=ir(),CT=gh(),HH=mm(),GH=Cu(),hR="Object already initialized",qH=LH.WeakMap,Nh,fm,Ch,WH=function(i){return Ch(i)?fm(i):Nh(i,{})},$H=function(i){return function(t){var e;if(!UH(t)||(e=fm(t)).type!==i)throw TypeError("Incompatible receiver, "+i+" required");return e}};BH||CT.state?(ms=CT.state||(CT.state=new qH),yR=ms.get,ST=ms.has,bR=ms.set,Nh=function(i,t){if(ST.call(ms,i))throw new TypeError(hR);return t.facade=i,bR.call(ms,i,t),t},fm=function(i){return yR.call(ms,i)||{}},Ch=function(i){return ST.call(ms,i)}):(Co=HH("state"),GH[Co]=!0,Nh=function(i,t){if(NT(i,Co))throw new TypeError(hR);return t.facade=i,zH(i,Co,t),t},fm=function(i){return NT(i,Co)?i[Co]:{}},Ch=function(i){return NT(i,Co)});var ms,yR,ST,bR,Co;gR.exports={set:Nh,get:fm,has:Ch,enforce:WH,getterFor:$H}});var Su=U((hxe,TR)=>{var AT=Tr(),KH=ir(),vR=Function.prototype,XH=AT&&Object.getOwnPropertyDescriptor,wT=KH(vR,"name"),YH=wT&&function(){}.name==="something",ZH=wT&&(!AT||AT&&XH(vR,"name").configurable);TR.exports={EXISTS:wT,PROPER:YH,CONFIGURABLE:ZH}});var jn=U((yxe,AR)=>{var JH=at(),NR=Rt(),QH=ir(),CR=da(),eG=bh(),tG=Th(),SR=ji(),rG=Su().CONFIGURABLE,nG=SR.get,iG=SR.enforce,aG=String(String).split("String");(AR.exports=function(i,t,e,r){var a=r?!!r.unsafe:!1,s=r?!!r.enumerable:!1,o=r?!!r.noTargetGet:!1,l=r&&r.name!==void 0?r.name:t,u;if(NR(e)&&(String(l).slice(0,7)==="Symbol("&&(l="["+String(l).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!QH(e,"name")||rG&&e.name!==l)&&CR(e,"name",l),u=iG(e),u.source||(u.source=aG.join(typeof l=="string"?l:""))),i===JH){s?i[t]=e:eG(t,e);return}else a?!o&&i[t]&&(s=!0):delete i[t];s?i[t]=e:CR(i,t,e)})(Function.prototype,"toString",function(){return NR(this)&&nG(this).source||tG(this)})});var fs=U((bxe,wR)=>{var sG=Math.ceil,oG=Math.floor;wR.exports=function(i){var t=+i;return t!==t||t===0?0:(t>0?oG:sG)(t)}});var Au=U((gxe,xR)=>{var lG=fs(),uG=Math.max,cG=Math.min;xR.exports=function(i,t){var e=lG(i);return e<0?uG(e+t,0):cG(e,t)}});var So=U((vxe,ER)=>{var pG=fs(),mG=Math.min;ER.exports=function(i){return i>0?mG(pG(i),9007199254740991):0}});var ri=U((Txe,RR)=>{var fG=So();RR.exports=function(i){return fG(i.length)}});var xT=U((Nxe,IR)=>{var dG=ti(),hG=Au(),yG=ri(),VR=function(i){return function(t,e,r){var a=dG(t),s=yG(a),o=hG(r,s),l;if(i&&e!=e){for(;s>o;)if(l=a[o++],l!=l)return!0}else for(;s>o;o++)if((i||o in a)&&a[o]===e)return i||o||0;return!i&&-1}};IR.exports={includes:VR(!0),indexOf:VR(!1)}});var RT=U((Cxe,OR)=>{var ET=ir(),bG=ti(),gG=xT().indexOf,vG=Cu();OR.exports=function(i,t){var e=bG(i),r=0,a=[],s;for(s in e)!ET(vG,s)&&ET(e,s)&&a.push(s);for(;t.length>r;)ET(e,s=t[r++])&&(~gG(a,s)||a.push(s));return a}});var Sh=U((Sxe,DR)=>{DR.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Ao=U(PR=>{var TG=RT(),NG=Sh(),CG=NG.concat("length","prototype");PR.f=Object.getOwnPropertyNames||function(t){return TG(t,CG)}});var Ah=U(_R=>{_R.f=Object.getOwnPropertySymbols});var FR=U((xxe,kR)=>{var SG=ma(),AG=Ao(),wG=Ah(),xG=Ut();kR.exports=SG("Reflect","ownKeys")||function(t){var e=AG.f(xG(t)),r=wG.f;return r?e.concat(r(t)):e}});var VT=U((Exe,MR)=>{var EG=ir(),RG=FR(),VG=fa(),IG=Dr();MR.exports=function(i,t){for(var e=RG(t),r=IG.f,a=VG.f,s=0;s<e.length;s++){var o=e[s];EG(i,o)||r(i,o,a(t,o))}}});var hm=U((Rxe,jR)=>{var OG=De(),DG=Rt(),PG=/#|\.prototype\./,dm=function(i,t){var e=kG[_G(i)];return e==MG?!0:e==FG?!1:DG(t)?OG(t):!!t},_G=dm.normalize=function(i){return String(i).replace(PG,".").toLowerCase()},kG=dm.data={},FG=dm.NATIVE="N",MG=dm.POLYFILL="P";jR.exports=dm});var ce=U((Vxe,BR)=>{var IT=at(),jG=fa().f,BG=da(),LG=jn(),UG=bh(),zG=VT(),HG=hm();BR.exports=function(i,t){var e=i.target,r=i.global,a=i.stat,s,o,l,u,c,p;if(r?o=IT:a?o=IT[e]||UG(e,{}):o=(IT[e]||{}).prototype,o)for(l in t){if(c=t[l],i.noTargetGet?(p=jG(o,l),u=p&&p.value):u=o[l],s=HG(r?l:e+(a?".":"#")+l,i.forced),!s&&u!==void 0){if(typeof c==typeof u)continue;zG(c,u)}(i.sham||u&&u.sham)&&BG(c,"sham",!0),LG(o,l,c,i)}}});var OT=U((Ixe,LR)=>{var GG=De();LR.exports=!GG(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})});var ym=U((Oxe,zR)=>{var qG=ir(),WG=Rt(),$G=Hr(),KG=mm(),XG=OT(),UR=KG("IE_PROTO"),YG=Object.prototype;zR.exports=XG?Object.getPrototypeOf:function(i){var t=$G(i);if(qG(t,UR))return t[UR];var e=t.constructor;return WG(e)&&t instanceof e?e.prototype:t instanceof Object?YG:null}});var wh=U((Pxe,WR)=>{var rq=ti(),GR=Ao().f,nq={}.toString,qR=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],iq=function(i){try{return GR(i)}catch(t){return qR.slice()}};WR.exports.f=function(t){return qR&&nq.call(t)=="[object Window]"?iq(t):GR(rq(t))}});var xh=U((kxe,KR)=>{var uq=st(),cq=uq("toStringTag"),$R={};$R[cq]="z";KR.exports=String($R)==="[object z]"});var bm=U((Fxe,XR)=>{var pq=xh(),mq=Rt(),Eh=vo(),fq=st(),dq=fq("toStringTag"),hq=Eh(function(){return arguments}())=="Arguments",yq=function(i,t){try{return i[t]}catch(e){}};XR.exports=pq?Eh:function(i){var t,e,r;return i===void 0?"Undefined":i===null?"Null":typeof(e=yq(t=Object(i),dq))=="string"?e:hq?Eh(t):(r=Eh(t))=="Object"&&mq(t.callee)?"Arguments":r}});var Pr=U((Mxe,YR)=>{var bq=bm();YR.exports=function(i){if(bq(i)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(i)}});var Rh=U((jxe,ZR)=>{var gq=Mt(),vq=vo(),Tq=st(),Nq=Tq("match");ZR.exports=function(i){var t;return gq(i)&&((t=i[Nq])!==void 0?!!t:vq(i)=="RegExp")}});var Vh=U((Bxe,JR)=>{var Cq=Rh();JR.exports=function(i){if(Cq(i))throw TypeError("The method doesn't accept regular expressions");return i}});var Ih=U((Lxe,QR)=>{var Sq=st(),Aq=Sq("match");QR.exports=function(i){var t=/./;try{"/./"[i](t)}catch(e){try{return t[Aq]=!1,"/./"[i](t)}catch(r){}}return!1}});var vm=U((zxe,aV)=>{var _q=De(),nV=Rt(),kq=bm(),Fq=ma(),Mq=Th(),jq=[],iV=Fq("Reflect","construct"),DT=/^\s*(?:class|function)\b/,Bq=DT.exec,Lq=!DT.exec(function(){}),gm=function(i){if(!nV(i))return!1;try{return iV(Object,jq,i),!0}catch(t){return!1}},Uq=function(i){if(!nV(i))return!1;switch(kq(i)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Lq||!!Bq.call(DT,Mq(i))};aV.exports=!iV||_q(function(){var i;return gm(gm.call)||!gm(Object)||!gm(function(){i=!0})||i})?Uq:gm});var PT=U((Hxe,sV)=>{var zq=vm(),Hq=fT();sV.exports=function(i){if(zq(i))return i;throw TypeError(Hq(i)+" is not a constructor")}});var wu=U((Gxe,oV)=>{var Gq=RT(),qq=Sh();oV.exports=Object.keys||function(t){return Gq(t,qq)}});var uV=U((qxe,lV)=>{var Wq=Tr(),$q=Dr(),Kq=Ut(),Xq=wu();lV.exports=Wq?Object.defineProperties:function(t,e){Kq(t);for(var r=Xq(e),a=r.length,s=0,o;a>s;)$q.f(t,o=r[s++],e[o]);return t}});var pV=U((Wxe,cV)=>{var Yq=ma();cV.exports=Yq("document","documentElement")});var ds=U(($xe,gV)=>{var Zq=Ut(),Jq=uV(),mV=Sh(),Qq=Cu(),eW=pV(),tW=vh(),rW=mm(),fV=">",dV="<",_T="prototype",kT="script",hV=rW("IE_PROTO"),FT=function(){},yV=function(i){return dV+kT+fV+i+dV+"/"+kT+fV},bV=function(i){i.write(yV("")),i.close();var t=i.parentWindow.Object;return i=null,t},nW=function(){var i=tW("iframe"),t="java"+kT+":",e;return i.style.display="none",eW.appendChild(i),i.src=String(t),e=i.contentWindow.document,e.open(),e.write(yV("document.F=Object")),e.close(),e.F},Oh,Dh=function(){try{Oh=new ActiveXObject("htmlfile")}catch(t){}Dh=typeof document!="undefined"?document.domain&&Oh?bV(Oh):nW():bV(Oh);for(var i=mV.length;i--;)delete Dh[_T][mV[i]];return Dh()};Qq[hV]=!0;gV.exports=Object.create||function(t,e){var r;return t!==null?(FT[_T]=Zq(t),r=new FT,FT[_T]=null,r[hV]=t):r=Dh(),e===void 0?r:Jq(r,e)}});var NV=U((Kxe,TV)=>{"use strict";var iW=To(),aW=Mt(),vV=[].slice,MT={},sW=function(i,t,e){if(!(t in MT)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";MT[t]=Function("C,a","return new C("+r.join(",")+")")}return MT[t](i,e)};TV.exports=Function.bind||function(t){var e=iW(this),r=vV.call(arguments,1),a=function(){var o=r.concat(vV.call(arguments));return this instanceof a?sW(e,o.length,o):e.apply(t,o)};return aW(e.prototype)&&(a.prototype=e.prototype),a}});var xu=U((Yxe,RV)=>{var mW=vo();RV.exports=Array.isArray||function(t){return mW(t)=="Array"}});var Tm=U((Zxe,VV)=>{"use strict";var fW=pm(),dW=Dr(),hW=bu();VV.exports=function(i,t,e){var r=fW(t);r in i?dW.f(i,r,hW(0,e)):i[r]=e}});var Eu=U((Jxe,IV)=>{var yW=De(),bW=st(),gW=Tu(),vW=bW("species");IV.exports=function(i){return gW>=51||!yW(function(){var t=[],e=t.constructor={};return e[vW]=function(){return{foo:1}},t[i](Boolean).foo!==1})}});var _V=U((eEe,PV)=>{"use strict";var DW=xh(),PW=bm();PV.exports=DW?{}.toString:function(){return"[object "+PW(this)+"]"}});var Nm=U((nEe,FV)=>{var HW=To();FV.exports=function(i,t,e){if(HW(i),t===void 0)return i;switch(e){case 0:return function(){return i.call(t)};case 1:return function(r){return i.call(t,r)};case 2:return function(r,a){return i.call(t,r,a)};case 3:return function(r,a,s){return i.call(t,r,a,s)}}return function(){return i.apply(t,arguments)}}});var BT=U((iEe,jV)=>{var MV=Ut(),GW=Nu();jV.exports=function(i,t,e){var r,a;MV(i);try{if(r=GW(i,"return"),!r){if(t==="throw")throw e;return e}r=r.call(i)}catch(s){a=!0,r=s}if(t==="throw")throw e;if(a)throw r;return MV(r),e}});var LV=U((aEe,BV)=>{var qW=Ut(),WW=BT();BV.exports=function(i,t,e,r){try{return r?t(qW(e)[0],e[1]):t(e)}catch(a){WW(i,"throw",a)}}});var Ru=U((sEe,UV)=>{UV.exports={}});var LT=U((oEe,zV)=>{var $W=st(),KW=Ru(),XW=$W("iterator"),YW=Array.prototype;zV.exports=function(i){return i!==void 0&&(KW.Array===i||YW[XW]===i)}});var Ph=U((lEe,GV)=>{var ZW=bm(),HV=Nu(),JW=Ru(),QW=st(),e$=QW("iterator");GV.exports=function(i){if(i!=null)return HV(i,e$)||HV(i,"@@iterator")||JW[ZW(i)]}});var UT=U((uEe,qV)=>{var t$=To(),r$=Ut(),n$=Ph();qV.exports=function(i,t){var e=arguments.length<2?n$(i):t;if(t$(e))return r$(e.call(i));throw TypeError(String(i)+" is not iterable")}});var KV=U((cEe,$V)=>{"use strict";var i$=Nm(),a$=Hr(),s$=LV(),o$=LT(),l$=vm(),u$=ri(),WV=Tm(),c$=UT(),p$=Ph();$V.exports=function(t){var e=a$(t),r=l$(this),a=arguments.length,s=a>1?arguments[1]:void 0,o=s!==void 0;o&&(s=i$(s,a>2?arguments[2]:void 0,2));var l=p$(e),u=0,c,p,m,f,d,h;if(l&&!(this==Array&&o$(l)))for(f=c$(e,l),d=f.next,p=r?new this:[];!(m=d.call(f)).done;u++)h=o?s$(f,s,[m.value,u],!0):m.value,WV(p,u,h);else for(c=u$(e),p=r?new this(c):Array(c);c>u;u++)h=o?s(e[u],u):e[u],WV(p,u,h);return p.length=u,p}});var HT=U((pEe,JV)=>{var m$=st(),XV=m$("iterator"),YV=!1;try{ZV=0,zT={next:function(){return{done:!!ZV++}},return:function(){YV=!0}},zT[XV]=function(){return this},Array.from(zT,function(){throw 2})}catch(i){}var ZV,zT;JV.exports=function(i,t){if(!t&&!YV)return!1;var e=!1;try{var r={};r[XV]=function(){return{next:function(){return{done:e=!0}}}},i(r)}catch(a){}return e}});var _h=U((fEe,e7)=>{var b$=fs(),g$=Pr(),v$=Mn(),QV=function(i){return function(t,e){var r=g$(v$(t)),a=b$(e),s=r.length,o,l;return a<0||a>=s?i?"":void 0:(o=r.charCodeAt(a),o<55296||o>56319||a+1===s||(l=r.charCodeAt(a+1))<56320||l>57343?i?r.charAt(a):o:i?r.slice(a,a+2):(o-55296<<10)+(l-56320)+65536)}};e7.exports={codeAt:QV(!1),charAt:QV(!0)}});var $T=U((dEe,n7)=>{"use strict";var T$=De(),N$=Rt(),C$=ds(),t7=ym(),S$=jn(),A$=st(),w$=No(),GT=A$("iterator"),r7=!1,ha,qT,WT;[].keys&&(WT=[].keys(),"next"in WT?(qT=t7(t7(WT)),qT!==Object.prototype&&(ha=qT)):r7=!0);var x$=ha==null||T$(function(){var i={};return ha[GT].call(i)!==i});x$?ha={}:w$&&(ha=C$(ha));N$(ha[GT])||S$(ha,GT,function(){return this});n7.exports={IteratorPrototype:ha,BUGGY_SAFARI_ITERATORS:r7}});var Cm=U((hEe,a7)=>{var E$=Dr().f,R$=ir(),V$=st(),i7=V$("toStringTag");a7.exports=function(i,t,e){i&&!R$(i=e?i:i.prototype,i7)&&E$(i,i7,{configurable:!0,value:t})}});var o7=U((yEe,s7)=>{"use strict";var I$=$T().IteratorPrototype,O$=ds(),D$=bu(),P$=Cm(),_$=Ru(),k$=function(){return this};s7.exports=function(i,t,e){var r=t+" Iterator";return i.prototype=O$(I$,{next:D$(1,e)}),P$(i,r,!1,!0),_$[r]=k$,i}});var u7=U((bEe,l7)=>{var F$=Rt();l7.exports=function(i){if(typeof i=="object"||F$(i))return i;throw TypeError("Can't set "+String(i)+" as a prototype")}});var KT=U((gEe,c7)=>{var M$=Ut(),j$=u7();c7.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var i=!1,t={},e;try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(t,[]),i=t instanceof Array}catch(r){}return function(a,s){return M$(a),j$(s),i?e.call(a,s):a.__proto__=s,a}}():void 0)});var Mh=U((vEe,T7)=>{"use strict";var B$=ce(),kh=No(),p7=Su(),L$=Rt(),U$=o7(),m7=ym(),f7=KT(),z$=Cm(),H$=da(),XT=jn(),G$=st(),d7=Ru(),h7=$T(),q$=p7.PROPER,W$=p7.CONFIGURABLE,y7=h7.IteratorPrototype,Fh=h7.BUGGY_SAFARI_ITERATORS,Sm=G$("iterator"),b7="keys",Am="values",g7="entries",v7=function(){return this};T7.exports=function(i,t,e,r,a,s,o){U$(e,t,r);var l=function(g){if(g===a&&f)return f;if(!Fh&&g in p)return p[g];switch(g){case b7:return function(){return new e(this,g)};case Am:return function(){return new e(this,g)};case g7:return function(){return new e(this,g)}}return function(){return new e(this)}},u=t+" Iterator",c=!1,p=i.prototype,m=p[Sm]||p["@@iterator"]||a&&p[a],f=!Fh&&m||l(a),d=t=="Array"&&p.entries||m,h,y,b;if(d&&(h=m7(d.call(new i)),h!==Object.prototype&&h.next&&(!kh&&m7(h)!==y7&&(f7?f7(h,y7):L$(h[Sm])||XT(h,Sm,v7)),z$(h,u,!0,!0),kh&&(d7[u]=v7))),q$&&a==Am&&m&&m.name!==Am&&(!kh&&W$?H$(p,"name",Am):(c=!0,f=function(){return m.call(this)})),a)if(y={values:l(Am),keys:s?f:l(b7),entries:l(g7)},o)for(b in y)(Fh||c||!(b in p))&&XT(p,b,y[b]);else B$({target:t,proto:!0,forced:Fh||c},y);return(!kh||o)&&p[Sm]!==f&&XT(p,Sm,f,{name:a}),d7[t]=f,y}});var YT=U(S7=>{var J$=st();S7.f=J$});var w7=U((CEe,A7)=>{var Q$=at();A7.exports=Q$});var ZT=U((SEe,E7)=>{var x7=w7(),eK=ir(),tK=YT(),rK=Dr().f;E7.exports=function(i){var t=x7.Symbol||(x7.Symbol={});eK(t,i)||rK(t,i,{value:tK.f(i)})}});var I7=U((AEe,V7)=>{var R7=xu(),nK=vm(),iK=Mt(),aK=st(),sK=aK("species");V7.exports=function(i){var t;return R7(i)&&(t=i.constructor,nK(t)&&(t===Array||R7(t.prototype))?t=void 0:iK(t)&&(t=t[sK],t===null&&(t=void 0))),t===void 0?Array:t}});var jh=U((wEe,O7)=>{var oK=I7();O7.exports=function(i,t){return new(oK(i))(t===0?0:t)}});var ys=U((xEe,P7)=>{var lK=Nm(),uK=gu(),cK=Hr(),pK=ri(),mK=jh(),D7=[].push,hs=function(i){var t=i==1,e=i==2,r=i==3,a=i==4,s=i==6,o=i==7,l=i==5||s;return function(u,c,p,m){for(var f=cK(u),d=uK(f),h=lK(c,p,3),y=pK(d),b=0,g=m||mK,v=t?g(u,y):e||o?g(u,0):void 0,C,w;y>b;b++)if((l||b in d)&&(C=d[b],w=h(C,b,f),i))if(t)v[b]=w;else if(w)switch(i){case 3:return!0;case 5:return C;case 6:return b;case 2:D7.call(v,C)}else switch(i){case 4:return!1;case 7:D7.call(v,C)}return s?-1:r||a?a:v}};P7.exports={forEach:hs(0),map:hs(1),filter:hs(2),some:hs(3),every:hs(4),find:hs(5),findIndex:hs(6),filterReject:hs(7)}});var Du=U((IEe,n3)=>{var MK=st(),jK=ds(),BK=Dr(),fN=MK("unscopables"),dN=Array.prototype;dN[fN]==null&&BK.f(dN,fN,{configurable:!0,value:jK(null)});n3.exports=function(i){dN[fN][i]=!0}});var q=U((OEe,o3)=>{"use strict";var LK=ti(),hN=Du(),i3=Ru(),a3=ji(),UK=Mh(),s3="Array Iterator",zK=a3.set,HK=a3.getterFor(s3);o3.exports=UK(Array,"Array",function(i,t){zK(this,{type:s3,target:LK(i),index:0,kind:t})},function(){var i=HK(this),t=i.target,e=i.kind,r=i.index++;return!t||r>=t.length?(i.target=void 0,{value:void 0,done:!0}):e=="keys"?{value:r,done:!1}:e=="values"?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}},"values");i3.Arguments=i3.Array;hN("keys");hN("values");hN("entries")});var yN=U((DEe,l3)=>{l3.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var gN=U((PEe,c3)=>{var GK=vh(),bN=GK("span").classList,u3=bN&&bN.constructor&&bN.constructor.prototype;c3.exports=u3===Object.prototype?void 0:u3});var v3=U((kEe,g3)=>{"use strict";var y3=Tr(),WK=De(),CN=wu(),$K=Ah(),KK=am(),XK=Hr(),YK=gu(),Pu=Object.assign,b3=Object.defineProperty;g3.exports=!Pu||WK(function(){if(y3&&Pu({b:1},Pu(b3({},"a",{enumerable:!0,get:function(){b3(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var i={},t={},e=Symbol(),r="abcdefghijklmnopqrst";return i[e]=7,r.split("").forEach(function(a){t[a]=a}),Pu({},i)[e]!=7||CN(Pu({},t)).join("")!=r})?function(t,e){for(var r=XK(t),a=arguments.length,s=1,o=$K.f,l=KK.f;a>s;)for(var u=YK(arguments[s++]),c=o?CN(u).concat(o(u)):CN(u),p=c.length,m=0,f;p>m;)f=c[m++],(!y3||l.call(u,f))&&(r[f]=u[f]);return r}:Pu});var Nr=U((jEe,SN)=>{var w3=function(i){"use strict";var t=Object.prototype,e=t.hasOwnProperty,r,a=typeof Symbol=="function"?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(B,_,F){return Object.defineProperty(B,_,{value:F,enumerable:!0,configurable:!0,writable:!0}),B[_]}try{u({},"")}catch(B){u=function(_,F,z){return _[F]=z}}function c(B,_,F,z){var H=_&&_.prototype instanceof b?_:b,ie=Object.create(H.prototype),fe=new L(z||[]);return ie._invoke=V(B,F,fe),ie}i.wrap=c;function p(B,_,F){try{return{type:"normal",arg:B.call(_,F)}}catch(z){return{type:"throw",arg:z}}}var m="suspendedStart",f="suspendedYield",d="executing",h="completed",y={};function b(){}function g(){}function v(){}var C={};C[s]=function(){return this};var w=Object.getPrototypeOf,S=w&&w(w(G([])));S&&S!==t&&e.call(S,s)&&(C=S);var A=v.prototype=b.prototype=Object.create(C);g.prototype=A.constructor=v,v.constructor=g,g.displayName=u(v,l,"GeneratorFunction");function E(B){["next","throw","return"].forEach(function(_){u(B,_,function(F){return this._invoke(_,F)})})}i.isGeneratorFunction=function(B){var _=typeof B=="function"&&B.constructor;return _?_===g||(_.displayName||_.name)==="GeneratorFunction":!1},i.mark=function(B){return Object.setPrototypeOf?Object.setPrototypeOf(B,v):(B.__proto__=v,u(B,l,"GeneratorFunction")),B.prototype=Object.create(A),B},i.awrap=function(B){return{__await:B}};function I(B,_){function F(ie,fe,we,Ne){var ve=p(B[ie],B,fe);if(ve.type==="throw")Ne(ve.arg);else{var Vn=ve.arg,In=Vn.value;return In&&typeof In=="object"&&e.call(In,"__await")?_.resolve(In.__await).then(function(bn){F("next",bn,we,Ne)},function(bn){F("throw",bn,we,Ne)}):_.resolve(In).then(function(bn){Vn.value=bn,we(Vn)},function(bn){return F("throw",bn,we,Ne)})}}var z;function H(ie,fe){function we(){return new _(function(Ne,ve){F(ie,fe,Ne,ve)})}return z=z?z.then(we,we):we()}this._invoke=H}E(I.prototype),I.prototype[o]=function(){return this},i.AsyncIterator=I,i.async=function(B,_,F,z,H){H===void 0&&(H=Promise);var ie=new I(c(B,_,F,z),H);return i.isGeneratorFunction(_)?ie:ie.next().then(function(fe){return fe.done?fe.value:ie.next()})};function V(B,_,F){var z=m;return function(ie,fe){if(z===d)throw new Error("Generator is already running");if(z===h){if(ie==="throw")throw fe;return K()}for(F.method=ie,F.arg=fe;;){var we=F.delegate;if(we){var Ne=O(we,F);if(Ne){if(Ne===y)continue;return Ne}}if(F.method==="next")F.sent=F._sent=F.arg;else if(F.method==="throw"){if(z===m)throw z=h,F.arg;F.dispatchException(F.arg)}else F.method==="return"&&F.abrupt("return",F.arg);z=d;var ve=p(B,_,F);if(ve.type==="normal"){if(z=F.done?h:f,ve.arg===y)continue;return{value:ve.arg,done:F.done}}else ve.type==="throw"&&(z=h,F.method="throw",F.arg=ve.arg)}}}function O(B,_){var F=B.iterator[_.method];if(F===r){if(_.delegate=null,_.method==="throw"){if(B.iterator.return&&(_.method="return",_.arg=r,O(B,_),_.method==="throw"))return y;_.method="throw",_.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var z=p(F,B.iterator,_.arg);if(z.type==="throw")return _.method="throw",_.arg=z.arg,_.delegate=null,y;var H=z.arg;if(!H)return _.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,y;if(H.done)_[B.resultName]=H.value,_.next=B.nextLoc,_.method!=="return"&&(_.method="next",_.arg=r);else return H;return _.delegate=null,y}E(A),u(A,l,"Generator"),A[s]=function(){return this},A.toString=function(){return"[object Generator]"};function k(B){var _={tryLoc:B[0]};1 in B&&(_.catchLoc=B[1]),2 in B&&(_.finallyLoc=B[2],_.afterLoc=B[3]),this.tryEntries.push(_)}function M(B){var _=B.completion||{};_.type="normal",delete _.arg,B.completion=_}function L(B){this.tryEntries=[{tryLoc:"root"}],B.forEach(k,this),this.reset(!0)}i.keys=function(B){var _=[];for(var F in B)_.push(F);return _.reverse(),function z(){for(;_.length;){var H=_.pop();if(H in B)return z.value=H,z.done=!1,z}return z.done=!0,z}};function G(B){if(B){var _=B[s];if(_)return _.call(B);if(typeof B.next=="function")return B;if(!isNaN(B.length)){var F=-1,z=function H(){for(;++F<B.length;)if(e.call(B,F))return H.value=B[F],H.done=!1,H;return H.value=r,H.done=!0,H};return z.next=z}}return{next:K}}i.values=G;function K(){return{value:r,done:!0}}return L.prototype={constructor:L,reset:function(B){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(M),!B)for(var _ in this)_.charAt(0)==="t"&&e.call(this,_)&&!isNaN(+_.slice(1))&&(this[_]=r)},stop:function(){this.done=!0;var B=this.tryEntries[0],_=B.completion;if(_.type==="throw")throw _.arg;return this.rval},dispatchException:function(B){if(this.done)throw B;var _=this;function F(Ne,ve){return ie.type="throw",ie.arg=B,_.next=Ne,ve&&(_.method="next",_.arg=r),!!ve}for(var z=this.tryEntries.length-1;z>=0;--z){var H=this.tryEntries[z],ie=H.completion;if(H.tryLoc==="root")return F("end");if(H.tryLoc<=this.prev){var fe=e.call(H,"catchLoc"),we=e.call(H,"finallyLoc");if(fe&&we){if(this.prev<H.catchLoc)return F(H.catchLoc,!0);if(this.prev<H.finallyLoc)return F(H.finallyLoc)}else if(fe){if(this.prev<H.catchLoc)return F(H.catchLoc,!0)}else if(we){if(this.prev<H.finallyLoc)return F(H.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(B,_){for(var F=this.tryEntries.length-1;F>=0;--F){var z=this.tryEntries[F];if(z.tryLoc<=this.prev&&e.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var H=z;break}}H&&(B==="break"||B==="continue")&&H.tryLoc<=_&&_<=H.finallyLoc&&(H=null);var ie=H?H.completion:{};return ie.type=B,ie.arg=_,H?(this.method="next",this.next=H.finallyLoc,y):this.complete(ie)},complete:function(B,_){if(B.type==="throw")throw B.arg;return B.type==="break"||B.type==="continue"?this.next=B.arg:B.type==="return"?(this.rval=this.arg=B.arg,this.method="return",this.next="end"):B.type==="normal"&&_&&(this.next=_),y},finish:function(B){for(var _=this.tryEntries.length-1;_>=0;--_){var F=this.tryEntries[_];if(F.finallyLoc===B)return this.complete(F.completion,F.afterLoc),M(F),y}},catch:function(B){for(var _=this.tryEntries.length-1;_>=0;--_){var F=this.tryEntries[_];if(F.tryLoc===B){var z=F.completion;if(z.type==="throw"){var H=z.arg;M(F)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(B,_,F){return this.delegate={iterator:G(B),resultName:_,nextLoc:F},this.method==="next"&&(this.arg=r),y}},i}(typeof SN=="object"?SN.exports:{});try{regeneratorRuntime=w3}catch(i){Function("r","regeneratorRuntime = r")(w3)}});var E3=U((LEe,x3)=>{var yX=De();x3.exports=!yX(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Im=U((UEe,I3)=>{var bX=ce(),gX=Cu(),vX=Mt(),AN=ir(),TX=Dr().f,R3=Ao(),NX=wh(),CX=lm(),SX=E3(),V3=!1,va=CX("meta"),AX=0,wN=Object.isExtensible||function(){return!0},xN=function(i){TX(i,va,{value:{objectID:"O"+AX++,weakData:{}}})},wX=function(i,t){if(!vX(i))return typeof i=="symbol"?i:(typeof i=="string"?"S":"P")+i;if(!AN(i,va)){if(!wN(i))return"F";if(!t)return"E";xN(i)}return i[va].objectID},xX=function(i,t){if(!AN(i,va)){if(!wN(i))return!0;if(!t)return!1;xN(i)}return i[va].weakData},EX=function(i){return SX&&V3&&wN(i)&&!AN(i,va)&&xN(i),i},RX=function(){VX.enable=function(){},V3=!0;var i=R3.f,t=[].splice,e={};e[va]=1,i(e).length&&(R3.f=function(r){for(var a=i(r),s=0,o=a.length;s<o;s++)if(a[s]===va){t.call(a,s,1);break}return a},bX({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:NX.f}))},VX=I3.exports={enable:RX,fastKey:wX,getWeakData:xX,onFreeze:EX};gX[va]=!0});var Wh=U((zEe,D3)=>{var IX=Ut(),OX=LT(),DX=ri(),PX=Nm(),_X=UT(),kX=Ph(),O3=BT(),Om=function(i,t){this.stopped=i,this.result=t};D3.exports=function(i,t,e){var r=e&&e.that,a=!!(e&&e.AS_ENTRIES),s=!!(e&&e.IS_ITERATOR),o=!!(e&&e.INTERRUPTED),l=PX(t,r,1+a+o),u,c,p,m,f,d,h,y=function(g){return u&&O3(u,"normal",g),new Om(!0,g)},b=function(g){return a?(IX(g),o?l(g[0],g[1],y):l(g[0],g[1])):o?l(g,y):l(g)};if(s)u=i;else{if(c=kX(i),!c)throw TypeError(String(i)+" is not iterable");if(OX(c)){for(p=0,m=DX(i);m>p;p++)if(f=b(i[p]),f&&f instanceof Om)return f;return new Om(!1)}u=_X(i,c)}for(d=u.next;!(h=d.call(u)).done;){try{f=b(h.value)}catch(g){O3(u,"throw",g)}if(typeof f=="object"&&f&&f instanceof Om)return f}return new Om(!1)}});var $h=U((HEe,P3)=>{P3.exports=function(i,t,e){if(i instanceof t)return i;throw TypeError("Incorrect "+(e?e+" ":"")+"invocation")}});var Kh=U((GEe,k3)=>{var FX=Rt(),MX=Mt(),_3=KT();k3.exports=function(i,t,e){var r,a;return _3&&FX(r=t.constructor)&&r!==e&&MX(a=r.prototype)&&a!==e.prototype&&_3(i,a),i}});var Xh=U((qEe,M3)=>{"use strict";var jX=ce(),BX=at(),F3=hm(),LX=jn(),UX=Im(),zX=Wh(),HX=$h(),GX=Rt(),EN=Mt(),RN=De(),qX=HT(),WX=Cm(),$X=Kh();M3.exports=function(i,t,e){var r=i.indexOf("Map")!==-1,a=i.indexOf("Weak")!==-1,s=r?"set":"add",o=BX[i],l=o&&o.prototype,u=o,c={},p=function(g){var v=l[g];LX(l,g,g=="add"?function(w){return v.call(this,w===0?0:w),this}:g=="delete"?function(C){return a&&!EN(C)?!1:v.call(this,C===0?0:C)}:g=="get"?function(w){return a&&!EN(w)?void 0:v.call(this,w===0?0:w)}:g=="has"?function(w){return a&&!EN(w)?!1:v.call(this,w===0?0:w)}:function(w,S){return v.call(this,w===0?0:w,S),this})},m=F3(i,!GX(o)||!(a||l.forEach&&!RN(function(){new o().entries().next()})));if(m)u=e.getConstructor(t,i,r,s),UX.enable();else if(F3(i,!0)){var f=new u,d=f[s](a?{}:-0,1)!=f,h=RN(function(){f.has(1)}),y=qX(function(g){new o(g)}),b=!a&&RN(function(){for(var g=new o,v=5;v--;)g[s](v,v);return!g.has(-0)});y||(u=t(function(g,v){HX(g,u,i);var C=$X(new o,g,u);return v!=null&&zX(v,C[s],{that:C,AS_ENTRIES:r}),C}),u.prototype=l,l.constructor=u),(h||b)&&(p("delete"),p("has"),r&&p("get")),(b||d)&&p(s),a&&l.clear&&delete l.clear}return c[i]=u,jX({global:!0,forced:u!=o},c),WX(u,i),a||e.setStrong(u,i,r),u}});var Yh=U((WEe,j3)=>{var KX=jn();j3.exports=function(i,t,e){for(var r in t)KX(i,r,t[r],e);return i}});var VN=U(($Ee,L3)=>{"use strict";var XX=ma(),YX=Dr(),ZX=st(),JX=Tr(),B3=ZX("species");L3.exports=function(i){var t=XX(i),e=YX.f;JX&&t&&!t[B3]&&e(t,B3,{configurable:!0,get:function(){return this}})}});var ON=U((KEe,q3)=>{"use strict";var QX=Dr().f,eY=ds(),U3=Yh(),tY=Nm(),rY=$h(),nY=Wh(),iY=Mh(),aY=VN(),Dm=Tr(),z3=Im().fastKey,H3=ji(),G3=H3.set,IN=H3.getterFor;q3.exports={getConstructor:function(i,t,e,r){var a=i(function(u,c){rY(u,a,t),G3(u,{type:t,index:eY(null),first:void 0,last:void 0,size:0}),Dm||(u.size=0),c!=null&&nY(c,u[r],{that:u,AS_ENTRIES:e})}),s=IN(t),o=function(u,c,p){var m=s(u),f=l(u,c),d,h;return f?f.value=p:(m.last=f={index:h=z3(c,!0),key:c,value:p,previous:d=m.last,next:void 0,removed:!1},m.first||(m.first=f),d&&(d.next=f),Dm?m.size++:u.size++,h!=="F"&&(m.index[h]=f)),u},l=function(u,c){var p=s(u),m=z3(c),f;if(m!=="F")return p.index[m];for(f=p.first;f;f=f.next)if(f.key==c)return f};return U3(a.prototype,{clear:function(){for(var c=this,p=s(c),m=p.index,f=p.first;f;)f.removed=!0,f.previous&&(f.previous=f.previous.next=void 0),delete m[f.index],f=f.next;p.first=p.last=void 0,Dm?p.size=0:c.size=0},delete:function(u){var c=this,p=s(c),m=l(c,u);if(m){var f=m.next,d=m.previous;delete p.index[m.index],m.removed=!0,d&&(d.next=f),f&&(f.previous=d),p.first==m&&(p.first=f),p.last==m&&(p.last=d),Dm?p.size--:c.size--}return!!m},forEach:function(c){for(var p=s(this),m=tY(c,arguments.length>1?arguments[1]:void 0,3),f;f=f?f.next:p.first;)for(m(f.value,f.key,this);f&&f.removed;)f=f.previous},has:function(c){return!!l(this,c)}}),U3(a.prototype,e?{get:function(c){var p=l(this,c);return p&&p.value},set:function(c,p){return o(this,c===0?0:c,p)}}:{add:function(c){return o(this,c=c===0?0:c,c)}}),Dm&&QX(a.prototype,"size",{get:function(){return s(this).size}}),a},setStrong:function(i,t,e){var r=t+" Iterator",a=IN(t),s=IN(r);iY(i,t,function(o,l){G3(this,{type:r,target:o,state:a(o),kind:l,last:void 0})},function(){for(var o=s(this),l=o.kind,u=o.last;u&&u.removed;)u=u.previous;return!o.target||!(o.last=u=u?u.next:o.state.first)?(o.target=void 0,{value:void 0,done:!0}):l=="keys"?{value:u.key,done:!1}:l=="values"?{value:u.value,done:!1}:{value:[u.key,u.value],done:!1}},e?"entries":"values",!e,!0),aY(t)}}});var gs=U((XEe,W3)=>{"use strict";var sY=Xh(),oY=ON();W3.exports=sY("Set",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},oY)});var Pm=U((YEe,$3)=>{"use strict";var lY=De();$3.exports=function(i,t){var e=[][i];return!!e&&lY(function(){e.call(null,t||function(){throw 1},1)})}});var X3=U((ZEe,K3)=>{"use strict";var uY=ys().forEach,cY=Pm(),pY=cY("forEach");K3.exports=pY?[].forEach:function(t){return uY(this,t,arguments.length>1?arguments[1]:void 0)}});var e4=U((eRe,Q3)=>{var gY=at(),vY=gY.isFinite;Q3.exports=Number.isFinite||function(t){return typeof t=="number"&&vY(t)}});var PN=U((rRe,t4)=>{var CY=1 .valueOf;t4.exports=function(i){return CY.call(i)}});var _N=U((nRe,r4)=>{r4.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var FN=U((iRe,n4)=>{var SY=Mn(),AY=Pr(),wY=_N(),Jh="["+wY+"]",xY=RegExp("^"+Jh+Jh+"*"),EY=RegExp(Jh+Jh+"*$"),kN=function(i){return function(t){var e=AY(SY(t));return i&1&&(e=e.replace(xY,"")),i&2&&(e=e.replace(EY,"")),e}};n4.exports={start:kN(1),end:kN(2),trim:kN(3)}});var ey=U((sRe,l4)=>{"use strict";var UY=Ut();l4.exports=function(){var i=UY(this),t="";return i.global&&(t+="g"),i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.dotAll&&(t+="s"),i.unicode&&(t+="u"),i.sticky&&(t+="y"),t}});var ty=U(LN=>{var m4=De(),XY=at(),f4=XY.RegExp;LN.UNSUPPORTED_Y=m4(function(){var i=f4("a","y");return i.lastIndex=2,i.exec("abcd")!=null});LN.BROKEN_CARET=m4(function(){var i=f4("^r","gy");return i.lastIndex=2,i.exec("str")!=null})});var UN=U((uRe,d4)=>{var YY=De(),ZY=at(),JY=ZY.RegExp;d4.exports=YY(function(){var i=JY(".","s");return!(i.dotAll&&i.exec(`
`)&&i.flags==="s")})});var zN=U((cRe,h4)=>{var QY=De(),eZ=at(),tZ=eZ.RegExp;h4.exports=QY(function(){var i=tZ("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"})});var km=U((mRe,A4)=>{"use strict";var SZ=Pr(),AZ=ey(),C4=ty(),wZ=om(),xZ=ds(),EZ=ji().get,RZ=UN(),VZ=zN(),ry=RegExp.prototype.exec,IZ=wZ("native-string-replace",String.prototype.replace),$N=ry,KN=function(){var i=/a/,t=/b*/g;return ry.call(i,"a"),ry.call(t,"a"),i.lastIndex!==0||t.lastIndex!==0}(),S4=C4.UNSUPPORTED_Y||C4.BROKEN_CARET,XN=/()??/.exec("")[1]!==void 0,OZ=KN||XN||S4||RZ||VZ;OZ&&($N=function(t){var e=this,r=EZ(e),a=SZ(t),s=r.raw,o,l,u,c,p,m,f;if(s)return s.lastIndex=e.lastIndex,o=$N.call(s,a),e.lastIndex=s.lastIndex,o;var d=r.groups,h=S4&&e.sticky,y=AZ.call(e),b=e.source,g=0,v=a;if(h&&(y=y.replace("y",""),y.indexOf("g")===-1&&(y+="g"),v=a.slice(e.lastIndex),e.lastIndex>0&&(!e.multiline||e.multiline&&a.charAt(e.lastIndex-1)!==`
`)&&(b="(?: "+b+")",v=" "+v,g++),l=new RegExp("^(?:"+b+")",y)),XN&&(l=new RegExp("^"+b+"$(?!\\s)",y)),KN&&(u=e.lastIndex),c=ry.call(h?l:e,v),h?c?(c.input=c.input.slice(g),c[0]=c[0].slice(g),c.index=e.lastIndex,e.lastIndex+=c[0].length):e.lastIndex=0:KN&&c&&(e.lastIndex=e.global?c.index+c[0].length:u),XN&&c&&c.length>1&&IZ.call(c[0],l,function(){for(p=1;p<arguments.length-2;p++)arguments[p]===void 0&&(c[p]=void 0)}),c&&d)for(c.groups=m=xZ(null),p=0;p<d.length;p++)f=d[p],m[f[0]]=c[f[1]];return c});A4.exports=$N});var ar=U(()=>{"use strict";var DZ=ce(),w4=km();DZ({target:"RegExp",proto:!0,forced:/./.exec!==w4},{exec:w4})});var Vt=U((hRe,x4)=>{"use strict";var PZ=Xh(),_Z=ON();x4.exports=PZ("Map",function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},_Z)});var ZN=U((ORe,k4)=>{"use strict";ar();var D4=jn(),BZ=km(),P4=De(),_4=st(),LZ=da(),UZ=_4("species"),YN=RegExp.prototype;k4.exports=function(i,t,e,r){var a=_4(i),s=!P4(function(){var c={};return c[a]=function(){return 7},""[i](c)!=7}),o=s&&!P4(function(){var c=!1,p=/a/;return i==="split"&&(p={},p.constructor={},p.constructor[UZ]=function(){return p},p.flags="",p[a]=/./[a]),p.exec=function(){return c=!0,null},p[a](""),!c});if(!s||!o||e){var l=/./[a],u=t(a,""[i],function(c,p,m,f,d){var h=p.exec;return h===BZ||h===YN.exec?s&&!d?{done:!0,value:l.call(p,m,f)}:{done:!0,value:c.call(m,p,f)}:{done:!1}});D4(String.prototype,i,u[0]),D4(YN,a,u[1])}r&&LZ(YN[a],"sham",!0)}});var j4=U((DRe,M4)=>{var F4=Ut(),zZ=PT(),HZ=st(),GZ=HZ("species");M4.exports=function(i,t){var e=F4(i).constructor,r;return e===void 0||(r=F4(e)[GZ])==null?t:zZ(r)}});var JN=U((PRe,B4)=>{"use strict";var qZ=_h().charAt;B4.exports=function(i,t,e){return t+(e?qZ(i,t).length:1)}});var QN=U((_Re,L4)=>{var WZ=Ut(),$Z=Rt(),KZ=vo(),XZ=km();L4.exports=function(i,t){var e=i.exec;if($Z(e)){var r=e.call(i,t);return r!==null&&WZ(r),r}if(KZ(i)==="RegExp")return XZ.call(i,t);throw TypeError("RegExp#exec called on incompatible receiver")}});var W4=U((FRe,q4)=>{var uJ=To(),cJ=Hr(),pJ=gu(),mJ=ri(),G4=function(i){return function(t,e,r,a){uJ(e);var s=cJ(t),o=pJ(s),l=mJ(s),u=i?l-1:0,c=i?-1:1;if(r<2)for(;;){if(u in o){a=o[u],u+=c;break}if(u+=c,i?u<0:l<=u)throw TypeError("Reduce of empty array with no initial value")}for(;i?u>=0:l>u;u+=c)u in o&&(a=e(a,o[u],u,s));return a}};q4.exports={left:G4(!1),right:G4(!0)}});var K4=U((MRe,$4)=>{var fJ=vo(),dJ=at();$4.exports=fJ(dJ.process)=="process"});var Z4=U((BRe,Y4)=>{var NJ=Hr(),CJ=Math.floor,SJ="".replace,AJ=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wJ=/\$([$&'`]|\d{1,2})/g;Y4.exports=function(i,t,e,r,a,s){var o=e+i.length,l=r.length,u=wJ;return a!==void 0&&(a=NJ(a),u=AJ),SJ.call(s,u,function(c,p){var m;switch(p.charAt(0)){case"$":return"$";case"&":return i;case"`":return t.slice(0,e);case"'":return t.slice(o);case"<":m=a[p.slice(1,-1)];break;default:var f=+p;if(f===0)return c;if(f>l){var d=CJ(f/10);return d===0?c:d<=l?r[d-1]===void 0?p.charAt(1):r[d-1]+p.charAt(1):c}m=r[f-1]}return m===void 0?"":m})}});var nC=Te(()=>{});function Se(i){return i&&i.length===0}function Un(i){return i==null?[]:Object.keys(i)}function vt(i){for(var t=[],e=Object.keys(i),r=0;r<e.length;r++)t.push(i[e[r]]);return t}function rI(i,t){for(var e=[],r=Un(i),a=0;a<r.length;a++){var s=r[a];e.push(t.call(null,i[s],s))}return e}function Z(i,t){for(var e=[],r=0;r<i.length;r++)e.push(t.call(null,i[r],r));return e}function It(i){for(var t=[],e=0;e<i.length;e++){var r=i[e];Array.isArray(r)?t=t.concat(It(r)):t.push(r)}return t}function Cr(i){return Se(i)?void 0:i[0]}function Ny(i){var t=i&&i.length;return t?i[t-1]:void 0}function ee(i,t){if(Array.isArray(i))for(var e=0;e<i.length;e++)t.call(null,i[e],e);else if(Cy(i))for(var r=Un(i),e=0;e<r.length;e++){var a=r[e],s=i[a];t.call(null,s,a)}else throw Error("non exhaustive match")}function zn(i){return typeof i=="string"}function Gt(i){return i===void 0}function ii(i){return i instanceof Function}function qt(i,t){return t===void 0&&(t=1),i.slice(t,i.length)}function ws(i,t){return t===void 0&&(t=1),i.slice(0,i.length-t)}function Hn(i,t){var e=[];if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];t.call(null,a)&&e.push(a)}return e}function Bi(i,t){return Hn(i,function(e){return!t(e)})}function Gr(i,t){for(var e=Object.keys(i),r={},a=0;a<e.length;a++){var s=e[a],o=i[s];t(o)&&(r[s]=o)}return r}function ne(i,t){return Cy(i)?i.hasOwnProperty(t):!1}function qe(i,t){return Ca(i,function(e){return e===t})!==void 0}function Ot(i){for(var t=[],e=0;e<i.length;e++)t.push(i[e]);return t}function xs(i){var t={};for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e]);return t}function Ca(i,t){for(var e=0;e<i.length;e++){var r=i[e];if(t.call(null,r))return r}}function nI(i,t){for(var e=[],r=0;r<i.length;r++){var a=i[r];t.call(null,a)&&e.push(a)}return e}function ct(i,t,e){for(var r=Array.isArray(i),a=r?i:vt(i),s=r?[]:Un(i),o=e,l=0;l<a.length;l++)o=t.call(null,o,a[l],r?l:s[l]);return o}function Sa(i){return Bi(i,function(t){return t==null})}function Hm(i,t){t===void 0&&(t=function(r){return r});var e=[];return ct(i,function(r,a){var s=t(a);return qe(e,s)?r:(e.push(s),r.concat(a))},[])}function YRe(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var r=[null],a=r.concat(t);return Function.bind.apply(i,a)}function or(i){return Array.isArray(i)}function ai(i){return i instanceof RegExp}function Cy(i){return i instanceof Object}function Sr(i,t){for(var e=0;e<i.length;e++)if(!t(i[e],e))return!1;return!0}function Ro(i,t){return Bi(i,function(e){return qe(t,e)})}function Sy(i,t){for(var e=0;e<i.length;e++)if(t(i[e]))return!0;return!1}function iI(i,t){for(var e=0;e<i.length;e++)if(i[e]===t)return e;return-1}function ZRe(i,t){var e=Ot(i);return e.sort(function(r,a){return t(r)-t(a)}),e}function JRe(i,t){if(i.length!==t.length)throw Error("can't zipObject with different number of keys and values!");for(var e={},r=0;r<i.length;r++)e[i[r]]=t[r];return e}function Cn(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=0;r<t.length;r++)for(var a=t[r],s=Un(a),o=0;o<s.length;o++){var l=s[o];i[l]=a[l]}return i}function $J(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=0;r<t.length;r++){var a=t[r];if(!Gt(a))for(var s=Un(a),o=0;o<s.length;o++){var l=s[o];ne(i,l)||(i[l]=a[l])}}return i}function Vo(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];return $J.apply(null,[{}].concat(i))}function Ay(i,t){var e={};return ee(i,function(r){var a=t(r),s=e[a];s?s.push(r):e[a]=[r]}),e}function iC(i,t){for(var e=xs(i),r=Un(t),a=0;a<r.length;a++){var s=r[a],o=t[s];e[s]=o}return e}function Wt(){}function aC(i){return i}function aI(i){for(var t=[],e=0;e<i.length;e++){var r=i[e];t.push(r!==void 0?r:void 0)}return t}function Gm(i){console&&console.error&&console.error("Error: "+i)}function Mu(i){console&&console.warn&&console.warn("Warning: "+i)}function sC(){return typeof Map=="function"}function sI(i,t){t.forEach(function(e){var r=e.prototype;Object.getOwnPropertyNames(r).forEach(function(a){if(a!=="constructor"){var s=Object.getOwnPropertyDescriptor(r,a);s&&(s.get||s.set)?Object.defineProperty(i.prototype,a,s):i.prototype[a]=e.prototype[a]}})})}function wy(toBecomeFast){function FakeConstructor(){}FakeConstructor.prototype=toBecomeFast;var fakeInstance=new FakeConstructor;function fakeAccess(){return typeof fakeInstance.bar}return fakeAccess(),fakeAccess(),toBecomeFast;eval(toBecomeFast)}function qm(i){return i[i.length-1]}function xy(i){var t=new Date().getTime(),e=i(),r=new Date().getTime(),a=r-t;return{time:a,value:e}}var Pe=Te(()=>{});var Ry=U((oI,Ey)=>{(function(i,t){typeof define=="function"&&define.amd?define([],t):typeof Ey=="object"&&Ey.exports?Ey.exports=t():i.regexpToAst=t()})(typeof self!="undefined"?self:oI,function(){function i(){}i.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},i.prototype.restoreState=function(h){this.idx=h.idx,this.input=h.input,this.groupIdx=h.groupIdx},i.prototype.pattern=function(h){this.idx=0,this.input=h,this.groupIdx=0,this.consumeChar("/");var y=this.disjunction();this.consumeChar("/");for(var b={type:"Flags",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":o(b,"global");break;case"i":o(b,"ignoreCase");break;case"m":o(b,"multiLine");break;case"u":o(b,"unicode");break;case"y":o(b,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:b,value:y}},i.prototype.disjunction=function(){var h=[];for(h.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),h.push(this.alternative());return{type:"Disjunction",value:h}},i.prototype.alternative=function(){for(var h=[];this.isTerm();)h.push(this.term());return{type:"Alternative",value:h}},i.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},i.prototype.assertion=function(){switch(this.popChar()){case"^":return{type:"StartAnchor"};case"$":return{type:"EndAnchor"};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary"};case"B":return{type:"NonWordBoundary"}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var h;switch(this.popChar()){case"=":h="Lookahead";break;case"!":h="NegativeLookahead";break}l(h);var y=this.disjunction();return this.consumeChar(")"),{type:h,value:y}}u()},i.prototype.quantifier=function(h){var y;switch(this.popChar()){case"*":y={atLeast:0,atMost:1/0};break;case"+":y={atLeast:1,atMost:1/0};break;case"?":y={atLeast:0,atMost:1};break;case"{":var b=this.integerIncludingZero();switch(this.popChar()){case"}":y={atLeast:b,atMost:b};break;case",":var g;this.isDigit()?(g=this.integerIncludingZero(),y={atLeast:b,atMost:g}):y={atLeast:b,atMost:1/0},this.consumeChar("}");break}if(h===!0&&y===void 0)return;l(y);break}if(!(h===!0&&y===void 0))return l(y),this.peekChar(0)==="?"?(this.consumeChar("?"),y.greedy=!1):y.greedy=!0,y.type="Quantifier",y},i.prototype.atom=function(){var h;switch(this.peekChar()){case".":h=this.dotAll();break;case"\\":h=this.atomEscape();break;case"[":h=this.characterClass();break;case"(":h=this.group();break}return h===void 0&&this.isPatternCharacter()&&(h=this.patternCharacter()),l(h),this.isQuantifier()&&(h.quantifier=this.quantifier()),h},i.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[a(`
`),a("\r"),a("\u2028"),a("\u2029")]}},i.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},i.prototype.decimalEscapeAtom=function(){var h=this.positiveInteger();return{type:"GroupBackReference",value:h}},i.prototype.characterClassEscape=function(){var h,y=!1;switch(this.popChar()){case"d":h=p;break;case"D":h=p,y=!0;break;case"s":h=f;break;case"S":h=f,y=!0;break;case"w":h=m;break;case"W":h=m,y=!0;break}return l(h),{type:"Set",value:h,complement:y}},i.prototype.controlEscapeAtom=function(){var h;switch(this.popChar()){case"f":h=a("\f");break;case"n":h=a(`
`);break;case"r":h=a("\r");break;case"t":h=a("	");break;case"v":h=a("\v");break}return l(h),{type:"Character",value:h}},i.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var h=this.popChar();if(/[a-zA-Z]/.test(h)===!1)throw Error("Invalid ");var y=h.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:y}},i.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:a("\0")}},i.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},i.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},i.prototype.identityEscapeAtom=function(){var h=this.popChar();return{type:"Character",value:a(h)}},i.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var h=this.popChar();return{type:"Character",value:a(h)}}},i.prototype.characterClass=function(){var h=[],y=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),y=!0);this.isClassAtom();){var b=this.classAtom(),g=b.type==="Character";if(g&&this.isRangeDash()){this.consumeChar("-");var v=this.classAtom(),C=v.type==="Character";if(C){if(v.value<b.value)throw Error("Range out of order in character class");h.push({from:b.value,to:v.value})}else s(b.value,h),h.push(a("-")),s(v.value,h)}else s(b.value,h)}return this.consumeChar("]"),{type:"Set",complement:y,value:h}},i.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},i.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:a("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},i.prototype.group=function(){var h=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),h=!1;break;default:this.groupIdx++;break}var y=this.disjunction();this.consumeChar(")");var b={type:"Group",capturing:h,value:y};return h&&(b.idx=this.groupIdx),b},i.prototype.positiveInteger=function(){var h=this.popChar();if(r.test(h)===!1)throw Error("Expecting a positive integer");for(;e.test(this.peekChar(0));)h+=this.popChar();return parseInt(h,10)},i.prototype.integerIncludingZero=function(){var h=this.popChar();if(e.test(h)===!1)throw Error("Expecting an integer");for(;e.test(this.peekChar(0));)h+=this.popChar();return parseInt(h,10)},i.prototype.patternCharacter=function(){var h=this.popChar();switch(h){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:a(h)}}},i.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},i.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},i.prototype.isDigit=function(){return e.test(this.peekChar(0))},i.prototype.isClassAtom=function(h){switch(h===void 0&&(h=0),this.peekChar(h)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},i.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},i.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},i.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},i.prototype.isQuantifier=function(){var h=this.saveState();try{return this.quantifier(!0)!==void 0}catch(y){return!1}finally{this.restoreState(h)}},i.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},i.prototype.parseHexDigits=function(h){for(var y="",b=0;b<h;b++){var g=this.popChar();if(t.test(g)===!1)throw Error("Expecting a HexDecimal digits");y+=g}var v=parseInt(y,16);return{type:"Character",value:v}},i.prototype.peekChar=function(h){return h===void 0&&(h=0),this.input[this.idx+h]},i.prototype.popChar=function(){var h=this.peekChar(0);return this.consumeChar(),h},i.prototype.consumeChar=function(h){if(h!==void 0&&this.input[this.idx]!==h)throw Error("Expected: '"+h+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++};var t=/[0-9a-fA-F]/,e=/[0-9]/,r=/[1-9]/;function a(h){return h.charCodeAt(0)}function s(h,y){h.length!==void 0?h.forEach(function(b){y.push(b)}):y.push(h)}function o(h,y){if(h[y]===!0)throw"duplicate flag "+y;h[y]=!0}function l(h){if(h===void 0)throw Error("Internal Error - Should never get here!")}function u(){throw Error("Internal Error - Should never get here!")}var c,p=[];for(c=a("0");c<=a("9");c++)p.push(c);var m=[a("_")].concat(p);for(c=a("a");c<=a("z");c++)m.push(c);for(c=a("A");c<=a("Z");c++)m.push(c);var f=[a(" "),a("\f"),a(`
`),a("\r"),a("	"),a("\v"),a("	"),a("\xA0"),a("\u1680"),a("\u2000"),a("\u2001"),a("\u2002"),a("\u2003"),a("\u2004"),a("\u2005"),a("\u2006"),a("\u2007"),a("\u2008"),a("\u2009"),a("\u200A"),a("\u2028"),a("\u2029"),a("\u202F"),a("\u205F"),a("\u3000"),a("\uFEFF")];function d(){}return d.prototype.visitChildren=function(h){for(var y in h){var b=h[y];h.hasOwnProperty(y)&&(b.type!==void 0?this.visit(b):Array.isArray(b)&&b.forEach(function(g){this.visit(g)},this))}},d.prototype.visit=function(h){switch(h.type){case"Pattern":this.visitPattern(h);break;case"Flags":this.visitFlags(h);break;case"Disjunction":this.visitDisjunction(h);break;case"Alternative":this.visitAlternative(h);break;case"StartAnchor":this.visitStartAnchor(h);break;case"EndAnchor":this.visitEndAnchor(h);break;case"WordBoundary":this.visitWordBoundary(h);break;case"NonWordBoundary":this.visitNonWordBoundary(h);break;case"Lookahead":this.visitLookahead(h);break;case"NegativeLookahead":this.visitNegativeLookahead(h);break;case"Character":this.visitCharacter(h);break;case"Set":this.visitSet(h);break;case"Group":this.visitGroup(h);break;case"GroupBackReference":this.visitGroupBackReference(h);break;case"Quantifier":this.visitQuantifier(h);break}this.visitChildren(h)},d.prototype.visitPattern=function(h){},d.prototype.visitFlags=function(h){},d.prototype.visitDisjunction=function(h){},d.prototype.visitAlternative=function(h){},d.prototype.visitStartAnchor=function(h){},d.prototype.visitEndAnchor=function(h){},d.prototype.visitWordBoundary=function(h){},d.prototype.visitNonWordBoundary=function(h){},d.prototype.visitLookahead=function(h){},d.prototype.visitNegativeLookahead=function(h){},d.prototype.visitCharacter=function(h){},d.prototype.visitSet=function(h){},d.prototype.visitGroup=function(h){},d.prototype.visitGroupBackReference=function(h){},d.prototype.visitQuantifier=function(h){},{RegExpParser:i,BaseRegExpVisitor:d,VERSION:"0.4.0"}})});function ju(i){var t=i.toString();if(Vy.hasOwnProperty(t))return Vy[t];var e=KJ.pattern(t);return Vy[t]=e,e}function uI(){Vy={}}var lI,Vy,KJ,Iy=Te(()=>{lI=j(Ry()),Vy={},KJ=new lI.RegExpParser});function pI(i,t){t===void 0&&(t=!1);try{var e=ju(i),r=oC(e.value,{},e.flags.ignoreCase);return r}catch(s){if(s.message===cI)t&&Mu(""+Wm+("	Unable to optimize: < "+i.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var a="";t&&(a=`
	This will disable the lexer's first char optimizations.
	See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Gm(Wm+`
`+("	Failed parsing: < "+i.toString()+` >
`)+("	Using the regexp-to-ast library version: "+Oy.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+a)}}return[]}function oC(i,t,e){switch(i.type){case"Disjunction":for(var r=0;r<i.value.length;r++)oC(i.value[r],t,e);break;case"Alternative":for(var a=i.value,r=0;r<a.length;r++){var s=a[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var o=s;switch(o.type){case"Character":Dy(o.value,t,e);break;case"Set":if(o.complement===!0)throw Error(cI);ee(o.value,function(c){if(typeof c=="number")Dy(c,t,e);else{var p=c;if(e===!0)for(var m=p.from;m<=p.to;m++)Dy(m,t,e);else{for(var m=p.from;m<=p.to&&m<Bu;m++)Dy(m,t,e);if(p.to>=Bu)for(var f=p.from>=Bu?p.from:Bu,d=p.to,h=Li(f),y=Li(d),b=h;b<=y;b++)t[b]=b}}});break;case"Group":oC(o.value,t,e);break;default:throw Error("Non Exhaustive Match")}var l=o.quantifier!==void 0&&o.quantifier.atLeast===0;if(o.type==="Group"&&lC(o)===!1||o.type!=="Group"&&l===!1)break}break;default:throw Error("non exhaustive match!")}return vt(t)}function Dy(i,t,e){var r=Li(i);t[r]=r,e===!0&&YJ(i,t)}function YJ(i,t){var e=String.fromCharCode(i),r=e.toUpperCase();if(r!==e){var a=Li(r.charCodeAt(0));t[a]=a}else{var s=e.toLowerCase();if(s!==e){var a=Li(s.charCodeAt(0));t[a]=a}}}function mI(i,t){return Ca(i.value,function(e){if(typeof e=="number")return qe(t,e);var r=e;return Ca(t,function(a){return r.from<=a&&a<=r.to})!==void 0})}function lC(i){return i.quantifier&&i.quantifier.atLeast===0?!0:i.value?or(i.value)?Sr(i.value,lC):lC(i.value):!1}function Py(i,t){if(t instanceof RegExp){var e=ju(t),r=new ZJ(i);return r.visit(e),r.found}else return Ca(t,function(a){return qe(i,a.charCodeAt(0))})!==void 0}var Oy,XJ,cI,Wm,ZJ,fI=Te(()=>{Oy=j(Ry());Pe();Iy();uC();XJ=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),cI="Complement Sets are not supported for first char optimization",Wm=`Unable to use "first char" lexer optimizations:
`;ZJ=function(i){XJ(t,i);function t(e){var r=i.call(this)||this;return r.targetCharCodes=e,r.found=!1,r}return t.prototype.visitChildren=function(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}i.prototype.visitChildren.call(this,e)}},t.prototype.visitCharacter=function(e){qe(this.targetCharCodes,e.value)&&(this.found=!0)},t.prototype.visitSet=function(e){e.complement?mI(e,this.targetCharCodes)===void 0&&(this.found=!0):mI(e,this.targetCharCodes)!==void 0&&(this.found=!0)},t}(Oy.BaseRegExpVisitor)});function hI(i,t){t=Vo(t,{useSticky:pC,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(v,C){return C()}});var e=t.tracer;e("initCharCodeToOptimizedIndexMap",function(){hQ()});var r;e("Reject Lexer.NA",function(){r=Bi(i,function(v){return v[Ui]===$t.NA})});var a=!1,s;e("Transform Patterns",function(){a=!1,s=Z(r,function(v){var C=v[Ui];if(ai(C)){var w=C.source;return w.length===1&&w!=="^"&&w!=="$"&&w!=="."?w:w.length===2&&w[0]==="\\"&&!qe(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],w[1])?w[1]:t.useSticky?gI(C):bI(C)}else{if(ii(C))return a=!0,{exec:C};if(ne(C,"exec"))return a=!0,C;if(typeof C=="string"){if(C.length===1)return C;var S=C.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),A=new RegExp(S);return t.useSticky?gI(A):bI(A)}else throw Error("non exhaustive match")}})});var o,l,u,c,p;e("misc mapping",function(){o=Z(r,function(v){return v.tokenTypeIdx}),l=Z(r,function(v){var C=v.GROUP;if(C!==$t.SKIPPED){if(zn(C))return C;if(Gt(C))return!1;throw Error("non exhaustive match")}}),u=Z(r,function(v){var C=v.LONGER_ALT;if(C){var w=iI(r,C);return w}}),c=Z(r,function(v){return v.PUSH_MODE}),p=Z(r,function(v){return ne(v,"POP_MODE")})});var m;e("Line Terminator Handling",function(){var v=wI(t.lineTerminatorCharacters);m=Z(r,function(C){return!1}),t.positionTracking!=="onlyOffset"&&(m=Z(r,function(C){if(ne(C,"LINE_BREAKS"))return C.LINE_BREAKS;if(AI(C,v)===!1)return Py(v,C.PATTERN)}))});var f,d,h,y;e("Misc Mapping #2",function(){f=Z(r,CI),d=Z(s,fQ),h=ct(r,function(v,C){var w=C.GROUP;return zn(w)&&w!==$t.SKIPPED&&(v[w]=[]),v},{}),y=Z(s,function(v,C){return{pattern:s[C],longerAlt:u[C],canLineTerminator:m[C],isCustom:f[C],short:d[C],group:l[C],push:c[C],pop:p[C],tokenTypeIdx:o[C],tokenType:r[C]}})});var b=!0,g=[];return t.safeMode||e("First Char Optimization",function(){g=ct(r,function(v,C,w){if(typeof C.PATTERN=="string"){var S=C.PATTERN.charCodeAt(0),A=Li(S);mC(v,A,y[w])}else if(or(C.START_CHARS_HINT)){var E;ee(C.START_CHARS_HINT,function(V){var O=typeof V=="string"?V.charCodeAt(0):V,k=Li(O);E!==k&&(E=k,mC(v,k,y[w]))})}else if(ai(C.PATTERN))if(C.PATTERN.unicode)b=!1,t.ensureOptimizations&&Gm(""+Wm+("	Unable to analyze < "+C.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var I=pI(C.PATTERN,t.ensureOptimizations);Se(I)&&(b=!1),ee(I,function(V){mC(v,V,y[w])})}else t.ensureOptimizations&&Gm(""+Wm+("	TokenType: <"+C.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),b=!1;return v},[])}),e("ArrayPacking",function(){g=aI(g)}),{emptyGroups:h,patternIdxToConfig:y,charCodeToPatternIdxToConfig:g,hasCustom:a,canBeOptimized:b}}function yI(i,t){var e=[],r=QJ(i);e=e.concat(r.errors);var a=eQ(r.valid),s=a.valid;return e=e.concat(a.errors),e=e.concat(JJ(s)),e=e.concat(lQ(s)),e=e.concat(uQ(s,t)),e=e.concat(cQ(s)),e}function JJ(i){var t=[],e=Hn(i,function(r){return ai(r[Ui])});return t=t.concat(rQ(e)),t=t.concat(aQ(e)),t=t.concat(sQ(e)),t=t.concat(oQ(e)),t=t.concat(nQ(e)),t}function QJ(i){var t=Hn(i,function(a){return!ne(a,Ui)}),e=Z(t,function(a){return{message:"Token Type: ->"+a.name+"<- missing static 'PATTERN' property",type:Tt.MISSING_PATTERN,tokenTypes:[a]}}),r=Ro(i,t);return{errors:e,valid:r}}function eQ(i){var t=Hn(i,function(a){var s=a[Ui];return!ai(s)&&!ii(s)&&!ne(s,"exec")&&!zn(s)}),e=Z(t,function(a){return{message:"Token Type: ->"+a.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Tt.INVALID_PATTERN,tokenTypes:[a]}}),r=Ro(i,t);return{errors:e,valid:r}}function rQ(i){var t=function(a){dI(s,a);function s(){var o=a!==null&&a.apply(this,arguments)||this;return o.found=!1,o}return s.prototype.visitEndAnchor=function(o){this.found=!0},s}(cC.BaseRegExpVisitor),e=Hn(i,function(a){var s=a[Ui];try{var o=ju(s),l=new t;return l.visit(o),l.found}catch(u){return tQ.test(s.source)}}),r=Z(e,function(a){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Tt.EOI_ANCHOR_FOUND,tokenTypes:[a]}});return r}function nQ(i){var t=Hn(i,function(r){var a=r[Ui];return a.test("")}),e=Z(t,function(r){return{message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:Tt.EMPTY_MATCH_PATTERN,tokenTypes:[r]}});return e}function aQ(i){var t=function(a){dI(s,a);function s(){var o=a!==null&&a.apply(this,arguments)||this;return o.found=!1,o}return s.prototype.visitStartAnchor=function(o){this.found=!0},s}(cC.BaseRegExpVisitor),e=Hn(i,function(a){var s=a[Ui];try{var o=ju(s),l=new t;return l.visit(o),l.found}catch(u){return iQ.test(s.source)}}),r=Z(e,function(a){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+a.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:Tt.SOI_ANCHOR_FOUND,tokenTypes:[a]}});return r}function sQ(i){var t=Hn(i,function(r){var a=r[Ui];return a instanceof RegExp&&(a.multiline||a.global)}),e=Z(t,function(r){return{message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Tt.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}});return e}function oQ(i){var t=[],e=Z(i,function(s){return ct(i,function(o,l){return s.PATTERN.source===l.PATTERN.source&&!qe(t,l)&&l.PATTERN!==$t.NA&&(t.push(l),o.push(l)),o},[])});e=Sa(e);var r=Hn(e,function(s){return s.length>1}),a=Z(r,function(s){var o=Z(s,function(u){return u.name}),l=Cr(s).PATTERN;return{message:"The same RegExp pattern ->"+l+"<-"+("has been used in all of the following Token Types: "+o.join(", ")+" <-"),type:Tt.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}});return a}function lQ(i){var t=Hn(i,function(r){if(!ne(r,"GROUP"))return!1;var a=r.GROUP;return a!==$t.SKIPPED&&a!==$t.NA&&!zn(a)}),e=Z(t,function(r){return{message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Tt.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}});return e}function uQ(i,t){var e=Hn(i,function(a){return a.PUSH_MODE!==void 0&&!qe(t,a.PUSH_MODE)}),r=Z(e,function(a){var s="Token Type: ->"+a.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+a.PUSH_MODE+"<-which does not exist";return{message:s,type:Tt.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[a]}});return r}function cQ(i){var t=[],e=ct(i,function(r,a,s){var o=a.PATTERN;return o===$t.NA||(zn(o)?r.push({str:o,idx:s,tokenType:a}):ai(o)&&mQ(o)&&r.push({str:o.source,idx:s,tokenType:a})),r},[]);return ee(i,function(r,a){ee(e,function(s){var o=s.str,l=s.idx,u=s.tokenType;if(a<l&&pQ(o,r.PATTERN)){var c="Token: ->"+u.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+r.name+"<-")+`in the lexer's definition.
See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:c,type:Tt.UNREACHABLE_PATTERN,tokenTypes:[r,u]})}})}),t}function pQ(i,t){if(ai(t)){var e=t.exec(i);return e!==null&&e.index===0}else{if(ii(t))return t(i,0,[],{});if(ne(t,"exec"))return t.exec(i,0,[],{});if(typeof t=="string")return t===i;throw Error("non exhaustive match")}}function mQ(i){var t=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return Ca(t,function(e){return i.source.indexOf(e)!==-1})===void 0}function bI(i){var t=i.ignoreCase?"i":"";return new RegExp("^(?:"+i.source+")",t)}function gI(i){var t=i.ignoreCase?"iy":"y";return new RegExp(""+i.source,t)}function vI(i,t,e){var r=[];return ne(i,Es)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Es+`> property in its definition
`,type:Tt.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),ne(i,_y)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+_y+`> property in its definition
`,type:Tt.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),ne(i,_y)&&ne(i,Es)&&!ne(i.modes,i.defaultMode)&&r.push({message:"A MultiMode Lexer cannot be initialized with a "+Es+": <"+i.defaultMode+`>which does not exist
`,type:Tt.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),ne(i,_y)&&ee(i.modes,function(a,s){ee(a,function(o,l){Gt(o)&&r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+s+"> at index: <"+l+`>
`),type:Tt.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),r}function TI(i,t,e){var r=[],a=!1,s=Sa(It(rI(i.modes,function(u){return u}))),o=Bi(s,function(u){return u[Ui]===$t.NA}),l=wI(e);return t&&ee(o,function(u){var c=AI(u,l);if(c!==!1){var p=dQ(u,c),m={message:p,type:c.issue,tokenType:u};r.push(m)}else ne(u,"LINE_BREAKS")?u.LINE_BREAKS===!0&&(a=!0):Py(l,u.PATTERN)&&(a=!0)}),t&&!a&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:Tt.NO_LINE_BREAKS_FLAGS}),r}function NI(i){var t={},e=Un(i);return ee(e,function(r){var a=i[r];if(or(a))t[r]=[];else throw Error("non exhaustive match")}),t}function CI(i){var t=i.PATTERN;if(ai(t))return!1;if(ii(t))return!0;if(ne(t,"exec"))return!0;if(zn(t))return!1;throw Error("non exhaustive match")}function fQ(i){return zn(i)&&i.length===1?i.charCodeAt(0):!1}function AI(i,t){if(ne(i,"LINE_BREAKS"))return!1;if(ai(i.PATTERN)){try{Py(t,i.PATTERN)}catch(e){return{issue:Tt.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}else{if(zn(i.PATTERN))return!1;if(CI(i))return{issue:Tt.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function dQ(i,t){if(t.issue===Tt.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+i.name+`> Token Type
`)+("	 Root cause: "+t.errMsg+`.
`)+"	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(t.issue===Tt.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+i.name+`> Token Type
`)+"	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}function wI(i){var t=Z(i,function(e){return zn(e)&&e.length>0?e.charCodeAt(0):e});return t}function mC(i,t,e){i[t]===void 0?i[t]=[e]:i[t].push(e)}function Li(i){return i<Bu?i:ky[i]}function hQ(){if(Se(ky)){ky=new Array(65536);for(var i=0;i<65536;i++)ky[i]=i>255?255+~~(i/255):i}}var cC,dI,Ui,Es,_y,pC,tQ,iQ,SI,Bu,ky,uC=Te(()=>{cC=j(Ry());$m();Pe();fI();Iy();dI=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ui="PATTERN",Es="defaultMode",_y="modes",pC=typeof new RegExp("(?:)").sticky=="boolean";tQ=/[^\\][\$]/;iQ=/[^\\[][\^]|^\^/;SI={test:function(i){for(var t=i.length,e=this.lastIndex;e<t;e++){var r=i.charCodeAt(e);if(r===10)return this.lastIndex=e+1,!0;if(r===13)return i.charCodeAt(e+1)===10?this.lastIndex=e+2:this.lastIndex=e+1,!0}return!1},lastIndex:0};Bu=256;ky=[]});function Io(i,t){var e=i.tokenTypeIdx;return e===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[e]===!0}function Lu(i,t){return i.tokenTypeIdx===t.tokenTypeIdx}function Aa(i){var t=yQ(i);bQ(t),vQ(t),gQ(t),ee(t,function(e){e.isParent=e.categoryMatches.length>0})}function yQ(i){for(var t=Ot(i),e=i,r=!0;r;){e=Sa(It(Z(e,function(s){return s.CATEGORIES})));var a=Ro(e,t);t=t.concat(a),Se(a)?r=!1:e=a}return t}function bQ(i){ee(i,function(t){fC(t)||(EI[xI]=t,t.tokenTypeIdx=xI++),VI(t)&&!or(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),VI(t)||(t.CATEGORIES=[]),TQ(t)||(t.categoryMatches=[]),NQ(t)||(t.categoryMatchesMap={})})}function gQ(i){ee(i,function(t){t.categoryMatches=[],ee(t.categoryMatchesMap,function(e,r){t.categoryMatches.push(EI[r].tokenTypeIdx)})})}function vQ(i){ee(i,function(t){RI([],t)})}function RI(i,t){ee(i,function(e){t.categoryMatchesMap[e.tokenTypeIdx]=!0}),ee(t.CATEGORIES,function(e){var r=i.concat(t);qe(r,e)||RI(r,e)})}function fC(i){return ne(i,"tokenTypeIdx")}function VI(i){return ne(i,"CATEGORIES")}function TQ(i){return ne(i,"categoryMatches")}function NQ(i){return ne(i,"categoryMatchesMap")}function II(i){return ne(i,"tokenTypeIdx")}var xI,EI,Uu=Te(()=>{Pe();xI=1,EI={}});var dC,hC=Te(()=>{dC={buildUnableToPopLexerModeMessage:function(i){return"Unable to pop Lexer Mode after encountering Token ->"+i.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(i,t,e,r,a){return"unexpected character: ->"+i.charAt(t)+"<- at offset: "+t+","+(" skipped "+e+" characters.")}}});var Tt,Km,$t,$m=Te(()=>{uC();Pe();Uu();hC();Iy();(function(i){i[i.MISSING_PATTERN=0]="MISSING_PATTERN",i[i.INVALID_PATTERN=1]="INVALID_PATTERN",i[i.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",i[i.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",i[i.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",i[i.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",i[i.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",i[i.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",i[i.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",i[i.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",i[i.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",i[i.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",i[i.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",i[i.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",i[i.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",i[i.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",i[i.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(Tt||(Tt={}));Km={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:dC,traceInitPerf:!1,skipValidations:!1};Object.freeze(Km);$t=function(){function i(t,e){var r=this;if(e===void 0&&(e=Km),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof e=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=iC(Km,e);var a=this.config.traceInitPerf;a===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof a=="number"&&(this.traceInitMaxIdent=a,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var s,o=!0;r.TRACE_INIT("Lexer Config handling",function(){if(r.config.lineTerminatorsPattern===Km.lineTerminatorsPattern)r.config.lineTerminatorsPattern=SI;else if(r.config.lineTerminatorCharacters===Km.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');r.trackStartLines=/full|onlyStart/i.test(r.config.positionTracking),r.trackEndLines=/full/i.test(r.config.positionTracking),or(t)?(s={modes:{}},s.modes[Es]=Ot(t),s[Es]=Es):(o=!1,s=xs(t))}),r.config.skipValidations===!1&&(r.TRACE_INIT("performRuntimeChecks",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat(vI(s,r.trackStartLines,r.config.lineTerminatorCharacters))}),r.TRACE_INIT("performWarningRuntimeChecks",function(){r.lexerDefinitionWarning=r.lexerDefinitionWarning.concat(TI(s,r.trackStartLines,r.config.lineTerminatorCharacters))})),s.modes=s.modes?s.modes:{},ee(s.modes,function(p,m){s.modes[m]=Bi(p,function(f){return Gt(f)})});var l=Un(s.modes);if(ee(s.modes,function(p,m){r.TRACE_INIT("Mode: <"+m+"> processing",function(){if(r.modes.push(m),r.config.skipValidations===!1&&r.TRACE_INIT("validatePatterns",function(){r.lexerDefinitionErrors=r.lexerDefinitionErrors.concat(yI(p,l))}),Se(r.lexerDefinitionErrors)){Aa(p);var f;r.TRACE_INIT("analyzeTokenTypes",function(){f=hI(p,{lineTerminatorCharacters:r.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:r.TRACE_INIT.bind(r)})}),r.patternIdxToConfig[m]=f.patternIdxToConfig,r.charCodeToPatternIdxToConfig[m]=f.charCodeToPatternIdxToConfig,r.emptyGroups=iC(r.emptyGroups,f.emptyGroups),r.hasCustom=f.hasCustom||r.hasCustom,r.canModeBeOptimized[m]=f.canBeOptimized}})}),r.defaultMode=s.defaultMode,!Se(r.lexerDefinitionErrors)&&!r.config.deferDefinitionErrorsHandling){var u=Z(r.lexerDefinitionErrors,function(p){return p.message}),c=u.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}ee(r.lexerDefinitionWarning,function(p){Mu(p.message)}),r.TRACE_INIT("Choosing sub-methods implementations",function(){if(pC?(r.chopInput=aC,r.match=r.matchWithTest):(r.updateLastIndex=Wt,r.match=r.matchWithExec),o&&(r.handleModes=Wt),r.trackStartLines===!1&&(r.computeNewColumn=aC),r.trackEndLines===!1&&(r.updateTokenEndLineColumnLocation=Wt),/full/i.test(r.config.positionTracking))r.createTokenInstance=r.createFullToken;else if(/onlyStart/i.test(r.config.positionTracking))r.createTokenInstance=r.createStartOnlyToken;else if(/onlyOffset/i.test(r.config.positionTracking))r.createTokenInstance=r.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+r.config.positionTracking+'"');r.hasCustom?(r.addToken=r.addTokenUsingPush,r.handlePayload=r.handlePayloadWithCustom):(r.addToken=r.addTokenUsingMemberAccess,r.handlePayload=r.handlePayloadNoCustom)}),r.TRACE_INIT("Failed Optimization Warnings",function(){var p=ct(r.canModeBeOptimized,function(m,f,d){return f===!1&&m.push(d),m},[]);if(e.ensureOptimizations&&!Se(p))throw Error("Lexer Modes: < "+p.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),r.TRACE_INIT("clearRegExpParserCache",function(){uI()}),r.TRACE_INIT("toFastProperties",function(){wy(r)})})}return i.prototype.tokenize=function(t,e){if(e===void 0&&(e=this.defaultMode),!Se(this.lexerDefinitionErrors)){var r=Z(this.lexerDefinitionErrors,function(o){return o.message}),a=r.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+a)}var s=this.tokenizeInternal(t,e);return s},i.prototype.tokenizeInternal=function(t,e){var r=this,a,s,o,l,u,c,p,m,f,d,h,y,b,g,v,C=t,w=C.length,S=0,A=0,E=this.hasCustom?0:Math.floor(t.length/10),I=new Array(E),V=[],O=this.trackStartLines?1:void 0,k=this.trackStartLines?1:void 0,M=NI(this.emptyGroups),L=this.trackStartLines,G=this.config.lineTerminatorsPattern,K=0,B=[],_=[],F=[],z=[];Object.freeze(z);var H=void 0;function ie(){return B}function fe(Br){var yp=Li(Br),Il=_[yp];return Il===void 0?z:Il}var we=function(Br){if(F.length===1&&Br.tokenType.PUSH_MODE===void 0){var yp=r.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Br);V.push({offset:Br.startOffset,line:Br.startLine!==void 0?Br.startLine:void 0,column:Br.startColumn!==void 0?Br.startColumn:void 0,length:Br.image.length,message:yp})}else{F.pop();var Il=Ny(F);B=r.patternIdxToConfig[Il],_=r.charCodeToPatternIdxToConfig[Il],K=B.length;var TU=r.canModeBeOptimized[Il]&&r.config.safeMode===!1;_&&TU?H=fe:H=ie}};function Ne(Br){F.push(Br),_=this.charCodeToPatternIdxToConfig[Br],B=this.patternIdxToConfig[Br],K=B.length,K=B.length;var yp=this.canModeBeOptimized[Br]&&this.config.safeMode===!1;_&&yp?H=fe:H=ie}Ne.call(this,e);for(var ve;S<w;){u=null;var Vn=C.charCodeAt(S),In=H(Vn),bn=In.length;for(a=0;a<bn;a++){ve=In[a];var jr=ve.pattern;c=null;var gi=ve.short;if(gi!==!1?Vn===gi&&(u=jr):ve.isCustom===!0?(v=jr.exec(C,S,I,M),v!==null?(u=v[0],v.payload!==void 0&&(c=v.payload)):u=null):(this.updateLastIndex(jr,S),u=this.match(jr,t,S)),u!==null){if(l=ve.longerAlt,l!==void 0){var El=B[l],fp=El.pattern;p=null,El.isCustom===!0?(v=fp.exec(C,S,I,M),v!==null?(o=v[0],v.payload!==void 0&&(p=v.payload)):o=null):(this.updateLastIndex(fp,S),o=this.match(fp,t,S)),o&&o.length>u.length&&(u=o,c=p,ve=El)}break}}if(u!==null){if(m=u.length,f=ve.group,f!==void 0&&(d=ve.tokenTypeIdx,h=this.createTokenInstance(u,S,d,ve.tokenType,O,k,m),this.handlePayload(h,c),f===!1?A=this.addToken(I,A,h):M[f].push(h)),t=this.chopInput(t,m),S=S+m,k=this.computeNewColumn(k,m),L===!0&&ve.canLineTerminator===!0){var Ya=0,Zs=void 0,Za=void 0;G.lastIndex=0;do Zs=G.test(u),Zs===!0&&(Za=G.lastIndex-1,Ya++);while(Zs===!0);Ya!==0&&(O=O+Ya,k=m-Za,this.updateTokenEndLineColumnLocation(h,f,Za,Ya,O,k,m))}this.handleModes(ve,we,Ne,h)}else{for(var Rl=S,dp=O,Vl=k,hp=!1;!hp&&S<w;)for(b=C.charCodeAt(S),t=this.chopInput(t,1),S++,s=0;s<K;s++){var R0=B[s],jr=R0.pattern,gi=R0.short;if(gi!==!1?C.charCodeAt(S)===gi&&(hp=!0):R0.isCustom===!0?hp=jr.exec(C,S,I,M)!==null:(this.updateLastIndex(jr,S),hp=jr.exec(t)!==null),hp===!0)break}y=S-Rl,g=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(C,Rl,y,dp,Vl),V.push({offset:Rl,line:dp,column:Vl,length:y,message:g})}}return this.hasCustom||(I.length=A),{tokens:I,groups:M,errors:V}},i.prototype.handleModes=function(t,e,r,a){if(t.pop===!0){var s=t.push;e(a),s!==void 0&&r.call(this,s)}else t.push!==void 0&&r.call(this,t.push)},i.prototype.chopInput=function(t,e){return t.substring(e)},i.prototype.updateLastIndex=function(t,e){t.lastIndex=e},i.prototype.updateTokenEndLineColumnLocation=function(t,e,r,a,s,o,l){var u,c;e!==void 0&&(u=r===l-1,c=u?-1:0,a===1&&u===!0||(t.endLine=s+c,t.endColumn=o-1+-c))},i.prototype.computeNewColumn=function(t,e){return t+e},i.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},i.prototype.createOffsetOnlyToken=function(t,e,r,a){return{image:t,startOffset:e,tokenTypeIdx:r,tokenType:a}},i.prototype.createStartOnlyToken=function(t,e,r,a,s,o){return{image:t,startOffset:e,startLine:s,startColumn:o,tokenTypeIdx:r,tokenType:a}},i.prototype.createFullToken=function(t,e,r,a,s,o,l){return{image:t,startOffset:e,endOffset:e+l-1,startLine:s,endLine:s,startColumn:o,endColumn:o+l-1,tokenTypeIdx:r,tokenType:a}},i.prototype.addToken=function(t,e,r){return 666},i.prototype.addTokenUsingPush=function(t,e,r){return t.push(r),e},i.prototype.addTokenUsingMemberAccess=function(t,e,r){return t[e]=r,e++,e},i.prototype.handlePayload=function(t,e){},i.prototype.handlePayloadNoCustom=function(t,e){},i.prototype.handlePayloadWithCustom=function(t,e){e!==null&&(t.payload=e)},i.prototype.match=function(t,e,r){return null},i.prototype.matchWithTest=function(t,e,r){var a=t.test(e);return a===!0?e.substring(r,t.lastIndex):null},i.prototype.matchWithExec=function(t,e){var r=t.exec(e);return r!==null?r[0]:r},i.prototype.TRACE_INIT=function(t,e){if(this.traceInitPerf===!0){this.traceInitIndent++;var r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+t+">");var a=xy(e),s=a.time,o=a.value,l=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(r+"<-- <"+t+"> time: "+s+"ms"),this.traceInitIndent--,o}else return e()},i.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",i.NA=/NOT_APPLICABLE/,i}()});function wa(i){return yC(i)?i.LABEL:i.name}function yC(i){return zn(i.LABEL)&&i.LABEL!==""}function Ae(i){return SQ(i)}function SQ(i){var t=i.pattern,e={};if(e.name=i.name,Gt(t)||(e.PATTERN=t),ne(i,CQ))throw`The parent property is no longer supported.
See: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.`;return ne(i,OI)&&(e.CATEGORIES=i[OI]),Aa([e]),ne(i,DI)&&(e.LABEL=i[DI]),ne(i,PI)&&(e.GROUP=i[PI]),ne(i,kI)&&(e.POP_MODE=i[kI]),ne(i,_I)&&(e.PUSH_MODE=i[_I]),ne(i,FI)&&(e.LONGER_ALT=i[FI]),ne(i,MI)&&(e.LINE_BREAKS=i[MI]),ne(i,jI)&&(e.START_CHARS_HINT=i[jI]),e}function Oo(i,t,e,r,a,s,o,l){return{image:t,startOffset:e,endOffset:r,startLine:a,endLine:s,startColumn:o,endColumn:l,tokenTypeIdx:i.tokenTypeIdx,tokenType:i}}function Me(i,t){return Io(i,t)}var CQ,OI,DI,PI,_I,kI,FI,MI,jI,si,Rs=Te(()=>{Pe();$m();Uu();CQ="parent",OI="categories",DI="label",PI="group",_I="push_mode",kI="pop_mode",FI="longer_alt",MI="line_breaks",jI="start_chars_hint";si=Ae({name:"EOF",pattern:$t.NA});Aa([si])});function bC(i){return Z(i,Xm)}function Xm(i){function t(a){return Z(a,Xm)}if(i instanceof Nt)return{type:"NonTerminal",name:i.nonTerminalName,idx:i.idx};if(i instanceof pt)return{type:"Flat",definition:t(i.definition)};if(i instanceof et)return{type:"Option",idx:i.idx,definition:t(i.definition)};if(i instanceof Dt)return{type:"RepetitionMandatory",name:i.name,idx:i.idx,definition:t(i.definition)};if(i instanceof Pt)return{type:"RepetitionMandatoryWithSeparator",name:i.name,idx:i.idx,separator:Xm(new ke({terminalType:i.separator})),definition:t(i.definition)};if(i instanceof Ct)return{type:"RepetitionWithSeparator",name:i.name,idx:i.idx,separator:Xm(new ke({terminalType:i.separator})),definition:t(i.definition)};if(i instanceof ze)return{type:"Repetition",name:i.name,idx:i.idx,definition:t(i.definition)};if(i instanceof St)return{type:"Alternation",name:i.name,idx:i.idx,definition:t(i.definition)};if(i instanceof ke){var e={type:"Terminal",name:i.terminalType.name,label:wa(i.terminalType),idx:i.idx},r=i.terminalType.PATTERN;return i.terminalType.PATTERN&&(e.pattern=ai(r)?r.source:r),e}else{if(i instanceof Gn)return{type:"Rule",name:i.name,orgText:i.orgText,definition:t(i.definition)};throw Error("non exhaustive match")}}var xa,oi,Nt,Gn,pt,et,Dt,Pt,ze,Ct,St,ke,kr=Te(()=>{Pe();Rs();xa=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),oi=function(){function i(t){this.definition=t}return i.prototype.accept=function(t){t.visit(this),ee(this.definition,function(e){e.accept(t)})},i}(),Nt=function(i){xa(t,i);function t(e){var r=i.call(this,[])||this;return r.idx=1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return Object.defineProperty(t.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.accept=function(e){e.visit(this)},t}(oi),Gn=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.orgText="",Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),pt=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.ignoreAmbiguities=!1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),et=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.idx=1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),Dt=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.idx=1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),Pt=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.idx=1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),ze=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.idx=1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),Ct=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.idx=1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),St=function(i){xa(t,i);function t(e){var r=i.call(this,e.definition)||this;return r.idx=1,r.ignoreAmbiguities=!1,r.hasPredicates=!1,Cn(r,Gr(e,function(a){return a!==void 0})),r}return t}(oi),ke=function(){function i(t){this.idx=1,Cn(this,Gr(t,function(e){return e!==void 0}))}return i.prototype.accept=function(t){t.visit(this)},i}()});function BI(i,t,e){var r=[new et({definition:[new ke({terminalType:i.separator})].concat(i.definition)})],a=r.concat(t,e);return a}var Do,Fy=Te(()=>{Pe();kr();Do=function(){function i(){}return i.prototype.walk=function(t,e){var r=this;e===void 0&&(e=[]),ee(t.definition,function(a,s){var o=qt(t.definition,s+1);if(a instanceof Nt)r.walkProdRef(a,o,e);else if(a instanceof ke)r.walkTerminal(a,o,e);else if(a instanceof pt)r.walkFlat(a,o,e);else if(a instanceof et)r.walkOption(a,o,e);else if(a instanceof Dt)r.walkAtLeastOne(a,o,e);else if(a instanceof Pt)r.walkAtLeastOneSep(a,o,e);else if(a instanceof Ct)r.walkManySep(a,o,e);else if(a instanceof ze)r.walkMany(a,o,e);else if(a instanceof St)r.walkOr(a,o,e);else throw Error("non exhaustive match")})},i.prototype.walkTerminal=function(t,e,r){},i.prototype.walkProdRef=function(t,e,r){},i.prototype.walkFlat=function(t,e,r){var a=e.concat(r);this.walk(t,a)},i.prototype.walkOption=function(t,e,r){var a=e.concat(r);this.walk(t,a)},i.prototype.walkAtLeastOne=function(t,e,r){var a=[new et({definition:t.definition})].concat(e,r);this.walk(t,a)},i.prototype.walkAtLeastOneSep=function(t,e,r){var a=BI(t,e,r);this.walk(t,a)},i.prototype.walkMany=function(t,e,r){var a=[new et({definition:t.definition})].concat(e,r);this.walk(t,a)},i.prototype.walkManySep=function(t,e,r){var a=BI(t,e,r);this.walk(t,a)},i.prototype.walkOr=function(t,e,r){var a=this,s=e.concat(r);ee(t.definition,function(o){var l=new pt({definition:[o]});a.walk(l,s)})},i}()});var Sn,Po=Te(()=>{kr();Sn=function(){function i(){}return i.prototype.visit=function(t){var e=t;switch(e.constructor){case Nt:return this.visitNonTerminal(e);case pt:return this.visitFlat(e);case et:return this.visitOption(e);case Dt:return this.visitRepetitionMandatory(e);case Pt:return this.visitRepetitionMandatoryWithSeparator(e);case Ct:return this.visitRepetitionWithSeparator(e);case ze:return this.visitRepetition(e);case St:return this.visitAlternation(e);case ke:return this.visitTerminal(e);case Gn:return this.visitRule(e);default:throw Error("non exhaustive match")}},i.prototype.visitNonTerminal=function(t){},i.prototype.visitFlat=function(t){},i.prototype.visitOption=function(t){},i.prototype.visitRepetition=function(t){},i.prototype.visitRepetitionMandatory=function(t){},i.prototype.visitRepetitionMandatoryWithSeparator=function(t){},i.prototype.visitRepetitionWithSeparator=function(t){},i.prototype.visitAlternation=function(t){},i.prototype.visitTerminal=function(t){},i.prototype.visitRule=function(t){},i}()});function LI(i){return i instanceof pt||i instanceof et||i instanceof ze||i instanceof Dt||i instanceof Pt||i instanceof Ct||i instanceof ke||i instanceof Gn}function zu(i,t){t===void 0&&(t=[]);var e=i instanceof et||i instanceof ze||i instanceof Ct;return e?!0:i instanceof St?Sy(i.definition,function(r){return zu(r,t)}):i instanceof Nt&&qe(t,i)?!1:i instanceof oi?(i instanceof Nt&&t.push(i),Sr(i.definition,function(r){return zu(r,t)})):!1}function UI(i){return i instanceof St}function sn(i){if(i instanceof Nt)return"SUBRULE";if(i instanceof et)return"OPTION";if(i instanceof St)return"OR";if(i instanceof Dt)return"AT_LEAST_ONE";if(i instanceof Pt)return"AT_LEAST_ONE_SEP";if(i instanceof Ct)return"MANY_SEP";if(i instanceof ze)return"MANY";if(i instanceof ke)return"CONSUME";throw Error("non exhaustive match")}function HI(i){My.reset(),i.accept(My);var t=My.dslMethods;return My.reset(),t}var AQ,zI,My,Hu=Te(()=>{Pe();kr();Po();AQ=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();zI=function(i){AQ(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.separator="-",e.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return t.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},t.prototype.visitTerminal=function(e){var r=e.terminalType.name+this.separator+"Terminal";ne(this.dslMethods,r)||(this.dslMethods[r]=[]),this.dslMethods[r].push(e)},t.prototype.visitNonTerminal=function(e){var r=e.nonTerminalName+this.separator+"Terminal";ne(this.dslMethods,r)||(this.dslMethods[r]=[]),this.dslMethods[r].push(e)},t.prototype.visitOption=function(e){this.dslMethods.option.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.dslMethods.repetitionWithSeparator.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.dslMethods.repetitionMandatory.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)},t.prototype.visitRepetition=function(e){this.dslMethods.repetition.push(e)},t.prototype.visitAlternation=function(e){this.dslMethods.alternation.push(e)},t}(Sn),My=new zI});function _o(i){if(i instanceof Nt)return _o(i.referencedRule);if(i instanceof ke)return EQ(i);if(LI(i))return wQ(i);if(UI(i))return xQ(i);throw Error("non exhaustive match")}function wQ(i){for(var t=[],e=i.definition,r=0,a=e.length>r,s,o=!0;a&&o;)s=e[r],o=zu(s),t=t.concat(_o(s)),r=r+1,a=e.length>r;return Hm(t)}function xQ(i){var t=Z(i.definition,function(e){return _o(e)});return Hm(It(t))}function EQ(i){return[i.terminalType]}var gC=Te(()=>{Pe();kr();Hu()});var jy,vC=Te(()=>{jy="_~IN~_"});function GI(i){var t={};return ee(i,function(e){var r=new VQ(e).startWalking();Cn(t,r)}),t}function IQ(i,t){return i.name+t+jy}var RQ,VQ,qI=Te(()=>{Fy();gC();Pe();vC();kr();RQ=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),VQ=function(i){RQ(t,i);function t(e){var r=i.call(this)||this;return r.topProd=e,r.follows={},r}return t.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},t.prototype.walkTerminal=function(e,r,a){},t.prototype.walkProdRef=function(e,r,a){var s=IQ(e.referencedRule,e.idx)+this.topProd.name,o=r.concat(a),l=new pt({definition:o}),u=_o(l);this.follows[s]=u},t}(Do)});function Fo(i,t,e){return e|t|i}function By(i,t,e,r){var a=r+1<<DQ;return Fo(i,t,e)|a}var WI,zi,OQ,Ea,ko,Vs,Is,Os,Ra,DQ,Gu=Te(()=>{WI=4,zi=8,OQ=8,Ea=1<<zi,ko=2<<zi,Vs=3<<zi,Is=4<<zi,Os=5<<zi,Ra=6<<zi;DQ=32-OQ});function TC(i,t){isNaN(i.startOffset)===!0?(i.startOffset=t.startOffset,i.endOffset=t.endOffset):i.endOffset<t.endOffset&&(i.endOffset=t.endOffset)}function NC(i,t){isNaN(i.startOffset)===!0?(i.startOffset=t.startOffset,i.startColumn=t.startColumn,i.startLine=t.startLine,i.endOffset=t.endOffset,i.endColumn=t.endColumn,i.endLine=t.endLine):i.endOffset<t.endOffset&&(i.endOffset=t.endOffset,i.endColumn=t.endColumn,i.endLine=t.endLine)}function $I(i,t,e){i.children[e]===void 0?i.children[e]=[t]:i.children[e].push(t)}function CC(i,t,e){i.children[t]===void 0?i.children[t]=[e]:i.children[t].push(e)}function KI(i,t){var e={allRuleNames:[]};return ee(i,function(r){var a=t[r.name];e.allRuleNames.push(r.name);var s=new Ly(a);r.accept(s),ee(s.result,function(o){var l=o.def,u=o.key,c=o.name;e.allRuleNames.push(r.name+c)})}),e}var PQ,Ly,Uy=Te(()=>{Pe();Gu();kr();Po();PQ=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Ly=function(i){PQ(t,i);function t(e){var r=i.call(this)||this;return r.result=[],r.ruleIdx=e,r}return t.prototype.collectNamedDSLMethod=function(e,r,a){if(!Gt(e.name)){var s=void 0;if(e instanceof et||e instanceof ze||e instanceof Dt||e instanceof St)s=new r({definition:e.definition,idx:e.idx});else if(e instanceof Pt||e instanceof Ct)s=new r({definition:e.definition,idx:e.idx,separator:e.separator});else throw Error("non exhaustive match");var o=[s],l=Fo(this.ruleIdx,a,e.idx);this.result.push({def:o,key:l,name:e.name,orgProd:e})}},t.prototype.visitOption=function(e){this.collectNamedDSLMethod(e,et,ko)},t.prototype.visitRepetition=function(e){this.collectNamedDSLMethod(e,ze,Vs)},t.prototype.visitRepetitionMandatory=function(e){this.collectNamedDSLMethod(e,Dt,Is)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.collectNamedDSLMethod(e,Pt,Ra)},t.prototype.visitRepetitionWithSeparator=function(e){this.collectNamedDSLMethod(e,Ct,Os)},t.prototype.visitAlternation=function(e){var r=this;this.collectNamedDSLMethod(e,St,Ea);var a=e.definition.length>1;ee(e.definition,function(s,o){if(!Gt(s.name)){var l=s.definition;a?l=[new et({definition:s.definition})]:l=s.definition;var u=By(r.ruleIdx,Ea,e.idx,o);r.result.push({def:l,key:u,name:s.name,orgProd:s})}})},t}(Sn)});function Hy(i,t,e){e===void 0&&(e=[]),e=Ot(e);var r=[],a=0;function s(c){return c.concat(qt(i,a+1))}function o(c){var p=Hy(s(c),t,e);return r.concat(p)}for(;e.length<t&&a<i.length;){var l=i[a];if(l instanceof pt)return o(l.definition);if(l instanceof Nt)return o(l.definition);if(l instanceof et)r=o(l.definition);else if(l instanceof Dt){var u=l.definition.concat([new ze({definition:l.definition})]);return o(u)}else if(l instanceof Pt){var u=[new pt({definition:l.definition}),new ze({definition:[new ke({terminalType:l.separator})].concat(l.definition)})];return o(u)}else if(l instanceof Ct){var u=l.definition.concat([new ze({definition:[new ke({terminalType:l.separator})].concat(l.definition)})]);r=o(u)}else if(l instanceof ze){var u=l.definition.concat([new ze({definition:l.definition})]);r=o(u)}else{if(l instanceof St)return ee(l.definition,function(c){r=o(c.definition)}),r;if(l instanceof ke)e.push(l.terminalType);else throw Error("non exhaustive match")}a++}return r.push({partialPath:e,suffixDef:qt(i,a)}),r}function Gy(i,t,e,r){var a="EXIT_NONE_TERMINAL",s=[a],o="EXIT_ALTERNATIVE",l=!1,u=t.length,c=u-r-1,p=[],m=[];for(m.push({idx:-1,def:i,ruleStack:[],occurrenceStack:[]});!Se(m);){var f=m.pop();if(f===o){l&&Ny(m).idx<=c&&m.pop();continue}var d=f.def,h=f.idx,y=f.ruleStack,b=f.occurrenceStack;if(!Se(d)){var g=d[0];if(g===a){var v={idx:h,def:qt(d),ruleStack:ws(y),occurrenceStack:ws(b)};m.push(v)}else if(g instanceof ke)if(h<u-1){var C=h+1,w=t[C];if(e(w,g.terminalType)){var v={idx:C,def:qt(d),ruleStack:y,occurrenceStack:b};m.push(v)}}else if(h===u-1)p.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:y,occurrenceStack:b}),l=!0;else throw Error("non exhaustive match");else if(g instanceof Nt){var S=Ot(y);S.push(g.nonTerminalName);var A=Ot(b);A.push(g.idx);var v={idx:h,def:g.definition.concat(s,qt(d)),ruleStack:S,occurrenceStack:A};m.push(v)}else if(g instanceof et){var E={idx:h,def:qt(d),ruleStack:y,occurrenceStack:b};m.push(E),m.push(o);var I={idx:h,def:g.definition.concat(qt(d)),ruleStack:y,occurrenceStack:b};m.push(I)}else if(g instanceof Dt){var V=new ze({definition:g.definition,idx:g.idx}),O=g.definition.concat([V],qt(d)),v={idx:h,def:O,ruleStack:y,occurrenceStack:b};m.push(v)}else if(g instanceof Pt){var k=new ke({terminalType:g.separator}),V=new ze({definition:[k].concat(g.definition),idx:g.idx}),O=g.definition.concat([V],qt(d)),v={idx:h,def:O,ruleStack:y,occurrenceStack:b};m.push(v)}else if(g instanceof Ct){var E={idx:h,def:qt(d),ruleStack:y,occurrenceStack:b};m.push(E),m.push(o);var k=new ke({terminalType:g.separator}),M=new ze({definition:[k].concat(g.definition),idx:g.idx}),O=g.definition.concat([M],qt(d)),I={idx:h,def:O,ruleStack:y,occurrenceStack:b};m.push(I)}else if(g instanceof ze){var E={idx:h,def:qt(d),ruleStack:y,occurrenceStack:b};m.push(E),m.push(o);var M=new ze({definition:g.definition,idx:g.idx}),O=g.definition.concat([M],qt(d)),I={idx:h,def:O,ruleStack:y,occurrenceStack:b};m.push(I)}else if(g instanceof St)for(var L=g.definition.length-1;L>=0;L--){var G=g.definition[L],K={idx:h,def:G.definition.concat(qt(d)),ruleStack:y,occurrenceStack:b};m.push(K),m.push(o)}else if(g instanceof pt)m.push({idx:h,def:g.definition.concat(qt(d)),ruleStack:y,occurrenceStack:b});else if(g instanceof Gn)m.push(kQ(g,h,y,b));else throw Error("non exhaustive match")}}return p}function kQ(i,t,e,r){var a=Ot(e);a.push(i.name);var s=Ot(r);return s.push(1),{idx:t,def:i.definition,ruleStack:a,occurrenceStack:s}}var Mo,_Q,XI,zy,YI,SC,ZI,AC,Ym=Te(()=>{Fy();Pe();gC();kr();Mo=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),_Q=function(i){Mo(t,i);function t(e,r){var a=i.call(this)||this;return a.topProd=e,a.path=r,a.possibleTokTypes=[],a.nextProductionName="",a.nextProductionOccurrence=0,a.found=!1,a.isAtEndOfPath=!1,a}return t.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=Ot(this.path.ruleStack).reverse(),this.occurrenceStack=Ot(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},t.prototype.walk=function(e,r){r===void 0&&(r=[]),this.found||i.prototype.walk.call(this,e,r)},t.prototype.walkProdRef=function(e,r,a){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){var s=r.concat(a);this.updateExpectedNext(),this.walk(e.referencedRule,s)}},t.prototype.updateExpectedNext=function(){Se(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},t}(Do),XI=function(i){Mo(t,i);function t(e,r){var a=i.call(this,e,r)||this;return a.path=r,a.nextTerminalName="",a.nextTerminalOccurrence=0,a.nextTerminalName=a.path.lastTok.name,a.nextTerminalOccurrence=a.path.lastTokOccurrence,a}return t.prototype.walkTerminal=function(e,r,a){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){var s=r.concat(a),o=new pt({definition:s});this.possibleTokTypes=_o(o),this.found=!0}},t}(_Q),zy=function(i){Mo(t,i);function t(e,r){var a=i.call(this)||this;return a.topRule=e,a.occurrence=r,a.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},a}return t.prototype.startWalking=function(){return this.walk(this.topRule),this.result},t}(Do),YI=function(i){Mo(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.walkMany=function(e,r,a){if(e.idx===this.occurrence){var s=Cr(r.concat(a));this.result.isEndOfRule=s===void 0,s instanceof ke&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else i.prototype.walkMany.call(this,e,r,a)},t}(zy),SC=function(i){Mo(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.walkManySep=function(e,r,a){if(e.idx===this.occurrence){var s=Cr(r.concat(a));this.result.isEndOfRule=s===void 0,s instanceof ke&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else i.prototype.walkManySep.call(this,e,r,a)},t}(zy),ZI=function(i){Mo(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.walkAtLeastOne=function(e,r,a){if(e.idx===this.occurrence){var s=Cr(r.concat(a));this.result.isEndOfRule=s===void 0,s instanceof ke&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else i.prototype.walkAtLeastOne.call(this,e,r,a)},t}(zy),AC=function(i){Mo(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t.prototype.walkAtLeastOneSep=function(e,r,a){if(e.idx===this.occurrence){var s=Cr(r.concat(a));this.result.isEndOfRule=s===void 0,s instanceof ke&&(this.result.token=s.terminalType,this.result.occurrence=s.idx)}else i.prototype.walkAtLeastOneSep.call(this,e,r,a)},t}(zy)});function QI(i){if(i instanceof et)return We.OPTION;if(i instanceof ze)return We.REPETITION;if(i instanceof Dt)return We.REPETITION_MANDATORY;if(i instanceof Pt)return We.REPETITION_MANDATORY_WITH_SEPARATOR;if(i instanceof Ct)return We.REPETITION_WITH_SEPARATOR;if(i instanceof St)return We.ALTERNATION;throw Error("non exhaustive match")}function eO(i,t,e,r,a,s){var o=Zm(i,t,e),l=lO(o)?Lu:Io;return s(o,r,l,a)}function tO(i,t,e,r,a,s){var o=Jm(i,t,a,e),l=lO(o)?Lu:Io;return s(o[0],l,r)}function rO(i,t,e,r){var a=i.length,s=Sr(i,function(u){return Sr(u,function(c){return c.length===1})});if(t)return function(u){for(var c=Z(u,function(C){return C.GATE}),p=0;p<a;p++){var m=i[p],f=m.length,d=c[p];if(d!==void 0&&d.call(this)===!1)continue;e:for(var h=0;h<f;h++){for(var y=m[h],b=y.length,g=0;g<b;g++){var v=this.LA(g+1);if(e(v,y[g])===!1)continue e}return p}}};if(s&&!r){var o=Z(i,function(u){return It(u)}),l=ct(o,function(u,c,p){return ee(c,function(m){ne(u,m.tokenTypeIdx)||(u[m.tokenTypeIdx]=p),ee(m.categoryMatches,function(f){ne(u,f)||(u[f]=p)})}),u},[]);return function(){var u=this.LA(1);return l[u.tokenTypeIdx]}}else return function(){for(var u=0;u<a;u++){var c=i[u],p=c.length;e:for(var m=0;m<p;m++){for(var f=c[m],d=f.length,h=0;h<d;h++){var y=this.LA(h+1);if(e(y,f[h])===!1)continue e}return u}}}}function nO(i,t,e){var r=Sr(i,function(c){return c.length===1}),a=i.length;if(r&&!e){var s=It(i);if(s.length===1&&Se(s[0].categoryMatches)){var o=s[0],l=o.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===l}}else{var u=ct(s,function(c,p,m){return c[p.tokenTypeIdx]=!0,ee(p.categoryMatches,function(f){c[f]=!0}),c},[]);return function(){var c=this.LA(1);return u[c.tokenTypeIdx]===!0}}}else return function(){e:for(var c=0;c<a;c++){for(var p=i[c],m=p.length,f=0;f<m;f++){var d=this.LA(f+1);if(t(d,p[f])===!1)continue e}return!0}return!1}}function aO(i){for(var t=new Array(i),e=0;e<i;e++)t[e]=[];return t}function wC(i){for(var t=[""],e=0;e<i.length;e++){for(var r=i[e],a=[],s=0;s<t.length;s++){var o=t[s];a.push(o+"_"+r.tokenTypeIdx);for(var l=0;l<r.categoryMatches.length;l++){var u="_"+r.categoryMatches[l];a.push(o+u)}}t=a}return t}function MQ(i,t,e){for(var r=0;r<i.length;r++)if(r!==e)for(var a=i[r],s=0;s<t.length;s++){var o=t[s];if(a[o]===!0)return!1}return!0}function sO(i,t){for(var e=Z(i,function(p){return Hy([p],1)}),r=aO(e.length),a=Z(e,function(p){var m={};return ee(p,function(f){var d=wC(f.partialPath);ee(d,function(h){m[h]=!0})}),m}),s=e,o=1;o<=t;o++){var l=s;s=aO(l.length);for(var u=function(p){for(var m=l[p],f=0;f<m.length;f++){var d=m[f].partialPath,h=m[f].suffixDef,y=wC(d),b=MQ(a,y,p);if(b||Se(h)||d.length===t){var g=r[p];if(qy(g,d)===!1){g.push(d);for(var v=0;v<y.length;v++){var C=y[v];a[p][C]=!0}}}else{var w=Hy(h,o+1,d);s[p]=s[p].concat(w),ee(w,function(S){var A=wC(S.partialPath);ee(A,function(E){a[p][E]=!0})})}}},c=0;c<l.length;c++)u(c)}return r}function Zm(i,t,e,r){var a=new iO(i,We.ALTERNATION,r);return t.accept(a),sO(a.result,e)}function Jm(i,t,e,r){var a=new iO(i,e);t.accept(a);var s=a.result,o=new FQ(t,i,e),l=o.startWalking(),u=new pt({definition:s}),c=new pt({definition:l});return sO([u,c],r)}function qy(i,t){e:for(var e=0;e<i.length;e++){var r=i[e];if(r.length===t.length){for(var a=0;a<r.length;a++){var s=t[a],o=r[a],l=s===o||o.categoryMatchesMap[s.tokenTypeIdx]!==void 0;if(l===!1)continue e}return!0}}return!1}function oO(i,t){return i.length<t.length&&Sr(i,function(e,r){var a=t[r];return e===a||a.categoryMatchesMap[e.tokenTypeIdx]})}function lO(i){return Sr(i,function(t){return Sr(t,function(e){return Sr(e,function(r){return Se(r.categoryMatches)})})})}var JI,We,FQ,iO,Qm=Te(()=>{Pe();Ym();Fy();Uu();kr();Po();JI=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(i){i[i.OPTION=0]="OPTION",i[i.REPETITION=1]="REPETITION",i[i.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",i[i.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",i[i.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",i[i.ALTERNATION=5]="ALTERNATION"})(We||(We={}));FQ=function(i){JI(t,i);function t(e,r,a){var s=i.call(this)||this;return s.topProd=e,s.targetOccurrence=r,s.targetProdType=a,s}return t.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},t.prototype.checkIsTarget=function(e,r,a,s){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=a.concat(s),!0):!1},t.prototype.walkOption=function(e,r,a){this.checkIsTarget(e,We.OPTION,r,a)||i.prototype.walkOption.call(this,e,r,a)},t.prototype.walkAtLeastOne=function(e,r,a){this.checkIsTarget(e,We.REPETITION_MANDATORY,r,a)||i.prototype.walkOption.call(this,e,r,a)},t.prototype.walkAtLeastOneSep=function(e,r,a){this.checkIsTarget(e,We.REPETITION_MANDATORY_WITH_SEPARATOR,r,a)||i.prototype.walkOption.call(this,e,r,a)},t.prototype.walkMany=function(e,r,a){this.checkIsTarget(e,We.REPETITION,r,a)||i.prototype.walkOption.call(this,e,r,a)},t.prototype.walkManySep=function(e,r,a){this.checkIsTarget(e,We.REPETITION_WITH_SEPARATOR,r,a)||i.prototype.walkOption.call(this,e,r,a)},t}(Do),iO=function(i){JI(t,i);function t(e,r,a){var s=i.call(this)||this;return s.targetOccurrence=e,s.targetProdType=r,s.targetRef=a,s.result=[],s}return t.prototype.checkIsTarget=function(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)},t.prototype.visitOption=function(e){this.checkIsTarget(e,We.OPTION)},t.prototype.visitRepetition=function(e){this.checkIsTarget(e,We.REPETITION)},t.prototype.visitRepetitionMandatory=function(e){this.checkIsTarget(e,We.REPETITION_MANDATORY)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.checkIsTarget(e,We.REPETITION_MANDATORY_WITH_SEPARATOR)},t.prototype.visitRepetitionWithSeparator=function(e){this.checkIsTarget(e,We.REPETITION_WITH_SEPARATOR)},t.prototype.visitAlternation=function(e){this.checkIsTarget(e,We.ALTERNATION)},t}(Sn)});function uO(i,t,e,r,a,s){var o=Z(i,function(v){return BQ(v,a)}),l=Z(i,function(v){return mO(v,v,a)}),u=[],c=[],p=[];Sr(l,Se)&&(u=Z(i,function(v){return WQ(v,a)}),c=Z(i,function(v){return $Q(v,t,r,a)}),p=YQ(i,t,a));var m=QQ(i,e,a),f=Z(e,function(v){return GQ(v,a)}),d=jQ(i,a),h=eee(i,a),y=Z(i,function(v){return XQ(v,a)}),b=Z(i,function(v){return zQ(v,a)}),g=Z(i,function(v){return qQ(v,i,s,a)});return It(o.concat(f,d,h,p,l,u,c,m,y,b,g))}function jQ(i,t){var e=[];return ee(i,function(r){var a=new Ly("");r.accept(a);var s=Z(a.result,function(o){return o.orgProd});e.push(Z(s,function(o){return HQ(r,o,t)}))}),It(e)}function BQ(i,t){var e=new UQ;i.accept(e);var r=e.allProductions,a=Ay(r,LQ),s=Gr(a,function(l){return l.length>1}),o=Z(vt(s),function(l){var u=Cr(l),c=t.buildDuplicateFoundError(i,l),p=sn(u),m={message:c,type:_t.DUPLICATE_PRODUCTIONS,ruleName:i.name,dslName:p,occurrence:u.idx},f=cO(u);return f&&(m.parameter=f),m});return o}function LQ(i){return sn(i)+"_#_"+i.idx+"_#_"+cO(i)}function cO(i){return i instanceof ke?i.terminalType.name:i instanceof Nt?i.nonTerminalName:""}function zQ(i,t){var e=[],r=i.name;return r.match(Ds)||e.push({message:t.buildInvalidRuleNameError({topLevelRule:i,expectedPattern:Ds}),type:_t.INVALID_RULE_NAME,ruleName:r}),e}function HQ(i,t,e){var r=[],a;return t.name.match(EC)||(a=e.buildInvalidNestedRuleNameError(i,t),r.push({message:a,type:_t.INVALID_NESTED_RULE_NAME,ruleName:i.name})),r}function GQ(i,t){var e=[],r=i.name;return r.match(Ds)||e.push({message:t.buildTokenNameError({tokenType:i,expectedPattern:Ds}),type:_t.INVALID_TOKEN_NAME}),e}function qQ(i,t,e,r){var a=[],s=ct(t,function(l,u){return u.name===i.name?l+1:l},0);if(s>1){var o=r.buildDuplicateRuleNameError({topLevelRule:i,grammarName:e});a.push({message:o,type:_t.DUPLICATE_RULE_NAME,ruleName:i.name})}return a}function pO(i,t,e){var r=[],a;return qe(t,i)||(a="Invalid rule override, rule: ->"+i+"<- cannot be overridden in the grammar: ->"+e+"<-as it is not defined in any of the super grammars ",r.push({message:a,type:_t.INVALID_RULE_OVERRIDE,ruleName:i})),r}function mO(i,t,e,r){r===void 0&&(r=[]);var a=[],s=Wy(t.definition);if(Se(s))return[];var o=i.name,l=qe(s,i);l&&a.push({message:e.buildLeftRecursionError({topLevelRule:i,leftRecursionPath:r}),type:_t.LEFT_RECURSION,ruleName:o});var u=Ro(s,r.concat([i])),c=Z(u,function(p){var m=Ot(r);return m.push(p),mO(i,p,e,m)});return a.concat(It(c))}function Wy(i){var t=[];if(Se(i))return t;var e=Cr(i);if(e instanceof Nt)t.push(e.referencedRule);else if(e instanceof pt||e instanceof et||e instanceof Dt||e instanceof Pt||e instanceof Ct||e instanceof ze)t=t.concat(Wy(e.definition));else if(e instanceof St)t=It(Z(e.definition,function(o){return Wy(o.definition)}));else if(!(e instanceof ke))throw Error("non exhaustive match");var r=zu(e),a=i.length>1;if(r&&a){var s=qt(i);return t.concat(Wy(s))}else return t}function WQ(i,t){var e=new RC;i.accept(e);var r=e.alternations,a=ct(r,function(s,o){var l=ws(o.definition),u=Z(l,function(c,p){var m=Gy([c],[],null,1);return Se(m)?{message:t.buildEmptyAlternationError({topLevelRule:i,alternation:o,emptyChoiceIdx:p}),type:_t.NONE_LAST_EMPTY_ALT,ruleName:i.name,occurrence:o.idx,alternative:p+1}:null});return s.concat(Sa(u))},[]);return a}function $Q(i,t,e,r){var a=new RC;i.accept(a);var s=a.alternations,o=e[i.name];o&&(s=Bi(s,function(u){return o[sn(u)+(u.idx===0?"":u.idx)]})),s=Bi(s,function(u){return u.ignoreAmbiguities===!0});var l=ct(s,function(u,c){var p=c.idx,m=c.maxLookahead||t,f=Zm(p,i,m,c),d=ZQ(f,c,i,r),h=JQ(f,c,i,r);return u.concat(d,h)},[]);return l}function XQ(i,t){var e=new RC;i.accept(e);var r=e.alternations,a=ct(r,function(s,o){return o.definition.length>255&&s.push({message:t.buildTooManyAlternativesError({topLevelRule:i,alternation:o}),type:_t.TOO_MANY_ALTS,ruleName:i.name,occurrence:o.idx}),s},[]);return a}function YQ(i,t,e){var r=[];return ee(i,function(a){var s=new KQ;a.accept(s);var o=s.allProductions;ee(o,function(l){var u=QI(l),c=l.maxLookahead||t,p=l.idx,m=Jm(p,a,u,c),f=m[0];if(Se(It(f))){var d=e.buildEmptyRepetitionError({topLevelRule:a,repetition:l});r.push({message:d,type:_t.NO_NON_EMPTY_LOOKAHEAD,ruleName:a.name})}})}),r}function ZQ(i,t,e,r){var a=[],s=ct(i,function(l,u,c){return t.definition[c].ignoreAmbiguities===!0||ee(u,function(p){var m=[c];ee(i,function(f,d){c!==d&&qy(f,p)&&t.definition[d].ignoreAmbiguities!==!0&&m.push(d)}),m.length>1&&!qy(a,p)&&(a.push(p),l.push({alts:m,path:p}))}),l},[]),o=Z(s,function(l){var u=Z(l.alts,function(p){return p+1}),c=r.buildAlternationAmbiguityError({topLevelRule:e,alternation:t,ambiguityIndices:u,prefixPath:l.path});return{message:c,type:_t.AMBIGUOUS_ALTS,ruleName:e.name,occurrence:t.idx,alternatives:[l.alts]}});return o}function JQ(i,t,e,r){var a=[],s=ct(i,function(o,l,u){var c=Z(l,function(p){return{idx:u,path:p}});return o.concat(c)},[]);return ee(s,function(o){var l=t.definition[o.idx];if(l.ignoreAmbiguities!==!0){var u=o.idx,c=o.path,p=nI(s,function(f){return t.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<u&&oO(f.path,c)}),m=Z(p,function(f){var d=[f.idx+1,u+1],h=t.idx===0?"":t.idx,y=r.buildAlternationPrefixAmbiguityError({topLevelRule:e,alternation:t,ambiguityIndices:d,prefixPath:f.path});return{message:y,type:_t.AMBIGUOUS_PREFIX_ALTS,ruleName:e.name,occurrence:h,alternatives:d}});a=a.concat(m)}}),a}function QQ(i,t,e){var r=[],a=Z(t,function(s){return s.name});return ee(i,function(s){var o=s.name;if(qe(a,o)){var l=e.buildNamespaceConflictError(s);r.push({message:l,type:_t.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),r}function eee(i,t){var e=[];return ee(i,function(r){var a=new Ly("");r.accept(a);var s=Ay(a.result,function(l){return l.name}),o=Gr(s,function(l){return l.length>1});ee(vt(o),function(l){var u=Z(l,function(p){return p.orgProd}),c=t.buildDuplicateNestedRuleNameError(r,u);e.push({message:c,type:_t.DUPLICATE_NESTED_NAME,ruleName:r.name})})}),e}var xC,UQ,Ds,EC,RC,KQ,ef=Te(()=>{Pe();Pe();An();Hu();Qm();Uy();Ym();kr();Po();xC=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();UQ=function(i){xC(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.allProductions=[],e}return t.prototype.visitNonTerminal=function(e){this.allProductions.push(e)},t.prototype.visitOption=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t.prototype.visitAlternation=function(e){this.allProductions.push(e)},t.prototype.visitTerminal=function(e){this.allProductions.push(e)},t}(Sn),Ds=/^[a-zA-Z_]\w*$/,EC=new RegExp(Ds.source.replace("^","^\\$"));RC=function(i){xC(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.alternations=[],e}return t.prototype.visitAlternation=function(e){this.alternations.push(e)},t}(Sn);KQ=function(i){xC(t,i);function t(){var e=i!==null&&i.apply(this,arguments)||this;return e.allProductions=[],e}return t.prototype.visitRepetitionWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatory=function(e){this.allProductions.push(e)},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){this.allProductions.push(e)},t.prototype.visitRepetition=function(e){this.allProductions.push(e)},t}(Sn)});var $y,VC,jo,tf=Te(()=>{Rs();Pe();Pe();kr();Hu();ef();$y={buildMismatchTokenMessage:function(i){var t=i.expected,e=i.actual,r=i.previous,a=i.ruleName,s=yC(t),o=s?"--> "+wa(t)+" <--":"token of type --> "+t.name+" <--",l="Expecting "+o+" but found --> '"+e.image+"' <--";return l},buildNotAllInputParsedMessage:function(i){var t=i.firstRedundant,e=i.ruleName;return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage:function(i){var t=i.expectedPathsPerAlt,e=i.actual,r=i.previous,a=i.customUserDescription,s=i.ruleName,o="Expecting: ",l=Cr(e).image,u=`
but found: '`+l+"'";if(a)return o+a+u;var c=ct(t,function(d,h){return d.concat(h)},[]),p=Z(c,function(d){return"["+Z(d,function(h){return wa(h)}).join(", ")+"]"}),m=Z(p,function(d,h){return"  "+(h+1)+". "+d}),f=`one of these possible Token sequences:
`+m.join(`
`);return o+f+u},buildEarlyExitMessage:function(i){var t=i.expectedIterationPaths,e=i.actual,r=i.customUserDescription,a=i.ruleName,s="Expecting: ",o=Cr(e).image,l=`
but found: '`+o+"'";if(r)return s+r+l;var u=Z(t,function(p){return"["+Z(p,function(m){return wa(m)}).join(",")+"]"}),c=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+u.join(" ,")+">");return s+c+l}};Object.freeze($y);VC={buildRuleNotFoundError:function(i,t){var e="Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+i.name+"<-";return e}},jo={buildDuplicateFoundError:function(i,t){function e(p){return p instanceof ke?p.terminalType.name:p instanceof Nt?p.nonTerminalName:""}var r=i.name,a=Cr(t),s=a.idx,o=sn(a),l=e(a),u=s>0,c="->"+o+(u?s:"")+"<- "+(l?"with argument: ->"+l+"<-":"")+`
                  appears more than once (`+t.length+" times) in the top level rule: ->"+r+`<-.                  
                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return c=c.replace(/[ \t]+/g," "),c=c.replace(/\s\s+/g,`
`),c},buildInvalidNestedRuleNameError:function(i,t){var e="Invalid nested rule name: ->"+t.name+"<- inside rule: ->"+i.name+`<-
`+("it must match the pattern: ->"+EC.toString()+`<-.
`)+"Note that this means a nested rule name must start with the '$'(dollar) sign.";return e},buildDuplicateNestedRuleNameError:function(i,t){var e=Cr(t).name,r="Duplicate nested rule name: ->"+e+"<- inside rule: ->"+i.name+`<-
A nested name must be unique in the scope of a top level grammar rule.`;return r},buildNamespaceConflictError:function(i){var t=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+i.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return t},buildAlternationPrefixAmbiguityError:function(i){var t=Z(i.prefixPath,function(a){return wa(a)}).join(", "),e=i.alternation.idx===0?"":i.alternation.idx,r="Ambiguous alternatives: <"+i.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+e+"> inside <"+i.topLevelRule.name+`> Rule,
`)+("<"+t+`> may appears as a prefix path in all these alternatives.
`)+`See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return r},buildAlternationAmbiguityError:function(i){var t=Z(i.prefixPath,function(a){return wa(a)}).join(", "),e=i.alternation.idx===0?"":i.alternation.idx,r="Ambiguous Alternatives Detected: <"+i.ambiguityIndices.join(" ,")+"> in <OR"+e+">"+(" inside <"+i.topLevelRule.name+`> Rule,
`)+("<"+t+`> may appears as a prefix path in all these alternatives.
`);return r=r+`See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError:function(i){var t=sn(i.repetition);i.repetition.idx!==0&&(t+=i.repetition.idx);var e="The repetition <"+t+"> within Rule <"+i.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return e},buildTokenNameError:function(i){var t=i.tokenType.name,e="Invalid Grammar Token name: ->"+t+"<- it must match the pattern: ->"+i.expectedPattern.toString()+"<-";return e},buildEmptyAlternationError:function(i){var t="Ambiguous empty alternative: <"+(i.emptyChoiceIdx+1)+">"+(" in <OR"+i.alternation.idx+"> inside <"+i.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return t},buildTooManyAlternativesError:function(i){var t=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+i.alternation.idx+"> inside <"+i.topLevelRule.name+`> Rule.
 has `+(i.alternation.definition.length+1)+" alternatives.");return t},buildLeftRecursionError:function(i){var t=i.topLevelRule.name,e=Z(i.leftRecursionPath,function(s){return s.name}),r=t+" --> "+e.concat([t]).join(" --> "),a=`Left Recursion found in grammar.
`+("rule: <"+t+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is: 
 `+r+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return a},buildInvalidRuleNameError:function(i){var t=i.topLevelRule.name,e=i.expectedPattern.toString(),r="Invalid grammar rule name: ->"+t+"<- it must match the pattern: ->"+e+"<-";return r},buildDuplicateRuleNameError:function(i){var t;i.topLevelRule instanceof Gn?t=i.topLevelRule.name:t=i.topLevelRule;var e="Duplicate definition, rule: ->"+t+"<- is already defined in the grammar: ->"+i.grammarName+"<-";return e}}});function fO(i,t){var e=new ree(i,t);return e.resolveRefs(),e.errors}var tee,ree,dO=Te(()=>{An();Pe();Po();tee=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();ree=function(i){tee(t,i);function t(e,r){var a=i.call(this)||this;return a.nameToTopRule=e,a.errMsgProvider=r,a.errors=[],a}return t.prototype.resolveRefs=function(){var e=this;ee(vt(this.nameToTopRule),function(r){e.currTopLevel=r,r.accept(e)})},t.prototype.visitNonTerminal=function(e){var r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{var a=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:a,type:_t.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}},t}(Sn)});function IC(i){i=Vo(i,{errMsgProvider:VC});var t={};return ee(i.rules,function(e){t[e.name]=e}),fO(t,i.errMsgProvider)}function OC(i){return i=Vo(i,{errMsgProvider:jo,ignoredIssues:{}}),uO(i.rules,i.maxLookahead,i.tokenTypes,i.ignoredIssues,i.errMsgProvider,i.grammarName)}var DC=Te(()=>{Pe();dO();ef();tf();Hu()});function Ps(i){return qe(vO,i.name)}function qu(i,t,e){this.name=hO,this.message=i,this.token=t,this.previousToken=e,this.resyncedTokens=[]}function Ky(i,t,e){this.name=yO,this.message=i,this.token=t,this.previousToken=e,this.resyncedTokens=[]}function Xy(i,t){this.name=gO,this.message=i,this.token=t,this.resyncedTokens=[]}function Yy(i,t,e){this.name=bO,this.message=i,this.token=t,this.previousToken=e,this.resyncedTokens=[]}var hO,yO,bO,gO,vO,Wu=Te(()=>{Pe();hO="MismatchedTokenException",yO="NoViableAltException",bO="EarlyExitException",gO="NotAllInputParsedException",vO=[hO,yO,bO,gO];Object.freeze(vO);qu.prototype=Error.prototype;Ky.prototype=Error.prototype;Xy.prototype=Error.prototype;Yy.prototype=Error.prototype});function TO(i){this.name=_C,this.message=i}function nee(i,t,e,r,a,s,o){var l=this.getKeyForAutomaticLookahead(r,a),u=this.firstAfterRepMap[l];if(u===void 0){var c=this.getCurrRuleFullName(),p=this.getGAstProductions()[c],m=new s(p,a);u=m.startWalking(),this.firstAfterRepMap[l]=u}var f=u.token,d=u.occurrence,h=u.isEndOfRule;this.RULE_STACK.length===1&&h&&f===void 0&&(f=si,d=1),this.shouldInRepetitionRecoveryBeTried(f,d,o)&&this.tryInRepetitionRecovery(i,t,e,f)}var PC,_C,NO,kC=Te(()=>{Rs();Pe();Wu();vC();An();PC={},_C="InRuleRecoveryException";TO.prototype=Error.prototype;NO=function(){function i(){}return i.prototype.initRecoverable=function(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=ne(t,"recoveryEnabled")?t.recoveryEnabled:tr.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=nee)},i.prototype.getTokenToInsert=function(t){var e=Oo(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e},i.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},i.prototype.tryInRepetitionRecovery=function(t,e,r,a){for(var s=this,o=this.findReSyncTokenType(),l=this.exportLexerState(),u=[],c=!1,p=this.LA(1),m=this.LA(1),f=function(){var d=s.LA(0),h=s.errorMessageProvider.buildMismatchTokenMessage({expected:a,actual:p,previous:d,ruleName:s.getCurrRuleFullName()}),y=new qu(h,p,s.LA(0));y.resyncedTokens=ws(u),s.SAVE_ERROR(y)};!c;)if(this.tokenMatcher(m,a)){f();return}else if(r.call(this)){f(),t.apply(this,e);return}else this.tokenMatcher(m,o)?c=!0:(m=this.SKIP_TOKEN(),this.addToResyncTokens(m,u));this.importLexerState(l)},i.prototype.shouldInRepetitionRecoveryBeTried=function(t,e,r){return!(r===!1||t===void 0||e===void 0||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e)))},i.prototype.getFollowsForInRuleRecovery=function(t,e){var r=this.getCurrentGrammarPath(t,e),a=this.getNextPossibleTokenTypes(r);return a},i.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e)){var r=this.getTokenToInsert(t);return r}if(this.canRecoverWithSingleTokenDeletion(t)){var a=this.SKIP_TOKEN();return this.consumeToken(),a}throw new TO("sad sad panda")},i.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},i.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var r=this;if(!this.canTokenTypeBeInsertedInRecovery(t)||Se(e))return!1;var a=this.LA(1),s=Ca(e,function(o){return r.tokenMatcher(a,o)})!==void 0;return s},i.prototype.canRecoverWithSingleTokenDeletion=function(t){var e=this.tokenMatcher(this.LA(2),t);return e},i.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(e);return qe(r,t)},i.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),r=2;;){var a=e.tokenType;if(qe(t,a))return a;e=this.LA(r),r++}},i.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return PC;var t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(r)}},i.prototype.buildFullFollowKeyStack=function(){var t=this,e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return Se(this.LAST_EXPLICIT_RULE_STACK)||(e=Z(this.LAST_EXPLICIT_RULE_STACK,function(a){return t.RULE_STACK[a]}),r=Z(this.LAST_EXPLICIT_RULE_STACK,function(a){return t.RULE_OCCURRENCE_STACK[a]})),Z(e,function(a,s){return s===0?PC:{ruleName:t.shortRuleNameToFullName(a),idxInCallingRule:r[s],inRule:t.shortRuleNameToFullName(e[s-1])}})},i.prototype.flattenFollowSet=function(){var t=this,e=Z(this.buildFullFollowKeyStack(),function(r){return t.getFollowSetFromFollowKey(r)});return It(e)},i.prototype.getFollowSetFromFollowKey=function(t){if(t===PC)return[si];var e=t.ruleName+t.idxInCallingRule+jy+t.inRule;return this.resyncFollows[e]},i.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,si)||e.push(t),e},i.prototype.reSyncTo=function(t){for(var e=[],r=this.LA(1);this.tokenMatcher(r,t)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,e);return ws(e)},i.prototype.attemptInRepetitionRecovery=function(t,e,r,a,s,o,l){},i.prototype.getCurrentGrammarPath=function(t,e){var r=this.getHumanReadableRuleStack(),a=Ot(this.RULE_OCCURRENCE_STACK),s={ruleStack:r,occurrenceStack:a,lastTok:t,lastTokOccurrence:e};return s},i.prototype.getHumanReadableRuleStack=function(){var t=this;return Se(this.LAST_EXPLICIT_RULE_STACK)?Z(this.RULE_STACK,function(e){return t.shortRuleNameToFullName(e)}):Z(this.LAST_EXPLICIT_RULE_STACK,function(e){return t.shortRuleNameToFullName(t.RULE_STACK[e])})},i}()});var CO,SO=Te(()=>{Qm();Pe();An();Gu();Hu();CO=function(){function i(){}return i.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=ne(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:tr.dynamicTokensEnabled,this.maxLookahead=ne(t,"maxLookahead")?t.maxLookahead:tr.maxLookahead,this.lookAheadFuncsCache=sC()?new Map:[],sC()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},i.prototype.preComputeLookaheadFunctions=function(t){var e=this;ee(t,function(r){e.TRACE_INIT(r.name+" Rule Lookahead",function(){var a=HI(r),s=a.alternation,o=a.repetition,l=a.option,u=a.repetitionMandatory,c=a.repetitionMandatoryWithSeparator,p=a.repetitionWithSeparator;ee(s,function(m){var f=m.idx===0?"":m.idx;e.TRACE_INIT(""+sn(m)+f,function(){var d=eO(m.idx,r,m.maxLookahead||e.maxLookahead,m.hasPredicates,e.dynamicTokensEnabled,e.lookAheadBuilderForAlternatives),h=Fo(e.fullRuleNameToShort[r.name],Ea,m.idx);e.setLaFuncCache(h,d)})}),ee(o,function(m){e.computeLookaheadFunc(r,m.idx,Vs,We.REPETITION,m.maxLookahead,sn(m))}),ee(l,function(m){e.computeLookaheadFunc(r,m.idx,ko,We.OPTION,m.maxLookahead,sn(m))}),ee(u,function(m){e.computeLookaheadFunc(r,m.idx,Is,We.REPETITION_MANDATORY,m.maxLookahead,sn(m))}),ee(c,function(m){e.computeLookaheadFunc(r,m.idx,Ra,We.REPETITION_MANDATORY_WITH_SEPARATOR,m.maxLookahead,sn(m))}),ee(p,function(m){e.computeLookaheadFunc(r,m.idx,Os,We.REPETITION_WITH_SEPARATOR,m.maxLookahead,sn(m))})})})},i.prototype.computeLookaheadFunc=function(t,e,r,a,s,o){var l=this;this.TRACE_INIT(""+o+(e===0?"":e),function(){var u=tO(e,t,s||l.maxLookahead,l.dynamicTokensEnabled,a,l.lookAheadBuilderForOptional),c=Fo(l.fullRuleNameToShort[t.name],r,e);l.setLaFuncCache(c,u)})},i.prototype.lookAheadBuilderForOptional=function(t,e,r){return nO(t,e,r)},i.prototype.lookAheadBuilderForAlternatives=function(t,e,r,a){return rO(t,e,r,a)},i.prototype.getKeyForAutomaticLookahead=function(t,e){var r=this.getLastExplicitRuleShortName();return Fo(r,t,e)},i.prototype.getLaFuncFromCache=function(t){},i.prototype.getLaFuncFromMap=function(t){return this.lookAheadFuncsCache.get(t)},i.prototype.getLaFuncFromObj=function(t){return this.lookAheadFuncsCache[t]},i.prototype.setLaFuncCache=function(t,e){},i.prototype.setLaFuncCacheUsingMap=function(t,e){this.lookAheadFuncsCache.set(t,e)},i.prototype.setLaFuncUsingObj=function(t,e){this.lookAheadFuncsCache[t]=e},i}()});function AO(i){return rf(i.constructor)}function rf(i){var t=i.name;if(t)return t;var e=i.toString().match(iee)[1];return e}function FC(i,t){var e=Object.getOwnPropertyDescriptor(i,wO);return Gt(e)||e.configurable?(Object.defineProperty(i,wO,{enumerable:!1,configurable:!0,writable:!1,value:t}),!0):!1}var iee,wO,MC=Te(()=>{Pe();iee=/^\s*function\s*(\S*)\s*\(/,wO="name"});function aee(i,t){for(var e=Un(i),r=e.length,a=0;a<r;a++)for(var s=e[a],o=i[s],l=o.length,u=0;u<l;u++){var c=o[u];c.tokenTypeIdx===void 0&&(c.fullName!==void 0?this[c.fullName](c.children,t):this[c.name](c.children,t))}}function xO(i,t){var e=function(){};FC(e,i+"BaseSemantics");var r={visit:function(a,s){if(or(a)&&(a=a[0]),!Gt(a))return a.fullName!==void 0?this[a.fullName](a.children,s):this[a.name](a.children,s)},validateVisitor:function(){var a=see(this,t);if(!Se(a)){var s=Z(a,function(o){return o.msg});throw Error("Errors Detected in CST Visitor <"+rf(this.constructor)+`>:
	`+(""+s.join(`

`).replace(/\n/g,`
	`)))}}};return e.prototype=r,e.prototype.constructor=e,e._RULE_NAMES=t,e}function EO(i,t,e){var r=function(){};FC(r,i+"BaseSemanticsWithDefaults");var a=Object.create(e.prototype);return ee(t,function(s){a[s]=aee}),r.prototype=a,r.prototype.constructor=r,r}function see(i,t){var e=oee(i,t),r=uee(i,t);return e.concat(r)}function oee(i,t){var e=Z(t,function(r){if(!ii(i[r]))return{msg:"Missing visitor method: <"+r+"> on "+rf(i.constructor)+" CST Visitor.",type:Zy.MISSING_METHOD,methodName:r}});return Sa(e)}function uee(i,t){var e=[];for(var r in i)Ds.test(r)&&ii(i[r])&&!qe(lee,r)&&!qe(t,r)&&e.push({msg:"Redundant visitor method: <"+r+"> on "+rf(i.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`+("For utility methods on visitor classes use methods names that do not match /"+Ds.source+"/."),type:Zy.REDUNDANT_METHOD,methodName:r});return e}var Zy,lee,RO=Te(()=>{Pe();MC();ef();(function(i){i[i.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",i[i.MISSING_METHOD=1]="MISSING_METHOD"})(Zy||(Zy={}));lee=["constructor","visit","validateVisitor"]});var VO,IO=Te(()=>{Uy();Pe();RO();Gu();An();VO=function(){function i(){}return i.prototype.initTreeBuilder=function(t){if(this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=ne(t,"outputCst")?t.outputCst:tr.outputCst,this.nodeLocationTracking=ne(t,"nodeLocationTracking")?t.nodeLocationTracking:tr.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Wt,this.cstFinallyStateUpdate=Wt,this.cstPostTerminal=Wt,this.cstPostNonTerminal=Wt,this.cstPostRule=Wt,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=NC,this.setNodeLocationFromNode=NC,this.cstPostRule=Wt,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Wt,this.setNodeLocationFromNode=Wt,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=TC,this.setNodeLocationFromNode=TC,this.cstPostRule=Wt,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Wt,this.setNodeLocationFromNode=Wt,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Wt,this.setNodeLocationFromNode=Wt,this.cstPostRule=Wt,this.setInitialNodeLocation=Wt;else throw Error('Invalid <nodeLocationTracking> config option: "'+t.nodeLocationTracking+'"')},i.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(t){t.location={startOffset:NaN,endOffset:NaN}},i.prototype.setInitialNodeLocationOnlyOffsetRegular=function(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},i.prototype.setInitialNodeLocationFullRecovery=function(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},i.prototype.setInitialNodeLocationFullRegular=function(t){var e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},i.prototype.cstNestedInvocationStateUpdate=function(t,e){var r={name:t,fullName:this.shortRuleNameToFull[this.getLastExplicitRuleShortName()]+t,children:{}};this.setInitialNodeLocation(r),this.CST_STACK.push(r)},i.prototype.cstInvocationStateUpdate=function(t,e){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);var r={name:t,children:{}};this.setInitialNodeLocation(r),this.CST_STACK.push(r)},i.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},i.prototype.cstNestedFinallyStateUpdate=function(){var t=this.CST_STACK.pop();this.cstPostRule(t)},i.prototype.cstPostRuleFull=function(t){var e=this.LA(0),r=t.location;r.startOffset<=e.startOffset?(r.endOffset=e.endOffset,r.endLine=e.endLine,r.endColumn=e.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)},i.prototype.cstPostRuleOnlyOffset=function(t){var e=this.LA(0),r=t.location;r.startOffset<=e.startOffset?r.endOffset=e.endOffset:r.startOffset=NaN},i.prototype.cstPostTerminal=function(t,e){var r=this.CST_STACK[this.CST_STACK.length-1];$I(r,e,t),this.setNodeLocationFromToken(r.location,e)},i.prototype.cstPostNonTerminal=function(t,e){if(this.isBackTracking()!==!0){var r=this.CST_STACK[this.CST_STACK.length-1];CC(r,e,t),this.setNodeLocationFromNode(r.location,t.location)}},i.prototype.getBaseCstVisitorConstructor=function(){if(Gt(this.baseCstVisitorConstructor)){var t=xO(this.className,this.allRuleNames);return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor},i.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if(Gt(this.baseCstVisitorWithDefaultsConstructor)){var t=EO(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},i.prototype.nestedRuleBeforeClause=function(t,e){var r;if(t.NAME!==void 0)return r=t.NAME,this.nestedRuleInvocationStateUpdate(r,e),r},i.prototype.nestedAltBeforeClause=function(t,e,r,a){var s=this.getLastExplicitRuleShortName(),o=By(s,r,e,a),l;if(t.NAME!==void 0)return l=t.NAME,this.nestedRuleInvocationStateUpdate(l,o),{shortName:o,nestedName:l}},i.prototype.nestedRuleFinallyClause=function(t,e){var r=this.CST_STACK,a=r[r.length-1];this.nestedRuleFinallyStateUpdate();var s=r[r.length-1];CC(s,e,a),this.setNodeLocationFromNode(s.location,a.location)},i.prototype.getLastExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[t]},i.prototype.getLastExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-1]},i.prototype.getPreviousExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[t]},i.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-2]},i.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[t]},i.prototype.getLastExplicitRuleOccurrenceIndexNoCst=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},i.prototype.nestedRuleInvocationStateUpdate=function(t,e){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(e),this.cstNestedInvocationStateUpdate(t,e)},i.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},i}()});var OO,DO=Te(()=>{An();OO=function(){function i(){}return i.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(i.prototype,"input",{get:function(){return this.tokVector},set:function(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!0,configurable:!0}),i.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):$u},i.prototype.LA=function(t){var e=this.currIdx+t;return e<0||this.tokVectorLength<=e?$u:this.tokVector[e]},i.prototype.consumeToken=function(){this.currIdx++},i.prototype.exportLexerState=function(){return this.currIdx},i.prototype.importLexerState=function(t){this.currIdx=t},i.prototype.resetLexerState=function(){this.currIdx=-1},i.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},i.prototype.getLexerPosition=function(){return this.exportLexerState()},i}()});var PO,_O=Te(()=>{Pe();Wu();An();tf();ef();kr();PO=function(){function i(){}return i.prototype.ACTION=function(t){return t.call(this)},i.prototype.consume=function(t,e,r){return this.consumeInternal(e,t,r)},i.prototype.subrule=function(t,e,r){return this.subruleInternal(e,t,r)},i.prototype.option=function(t,e){return this.optionInternal(e,t)},i.prototype.or=function(t,e){return this.orInternal(e,t)},i.prototype.many=function(t,e){return this.manyInternal(t,e)},i.prototype.atLeastOne=function(t,e){return this.atLeastOneInternal(t,e)},i.prototype.CONSUME=function(t,e){return this.consumeInternal(t,0,e)},i.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},i.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},i.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},i.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},i.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},i.prototype.CONSUME6=function(t,e){return this.consumeInternal(t,6,e)},i.prototype.CONSUME7=function(t,e){return this.consumeInternal(t,7,e)},i.prototype.CONSUME8=function(t,e){return this.consumeInternal(t,8,e)},i.prototype.CONSUME9=function(t,e){return this.consumeInternal(t,9,e)},i.prototype.SUBRULE=function(t,e){return this.subruleInternal(t,0,e)},i.prototype.SUBRULE1=function(t,e){return this.subruleInternal(t,1,e)},i.prototype.SUBRULE2=function(t,e){return this.subruleInternal(t,2,e)},i.prototype.SUBRULE3=function(t,e){return this.subruleInternal(t,3,e)},i.prototype.SUBRULE4=function(t,e){return this.subruleInternal(t,4,e)},i.prototype.SUBRULE5=function(t,e){return this.subruleInternal(t,5,e)},i.prototype.SUBRULE6=function(t,e){return this.subruleInternal(t,6,e)},i.prototype.SUBRULE7=function(t,e){return this.subruleInternal(t,7,e)},i.prototype.SUBRULE8=function(t,e){return this.subruleInternal(t,8,e)},i.prototype.SUBRULE9=function(t,e){return this.subruleInternal(t,9,e)},i.prototype.OPTION=function(t){return this.optionInternal(t,0)},i.prototype.OPTION1=function(t){return this.optionInternal(t,1)},i.prototype.OPTION2=function(t){return this.optionInternal(t,2)},i.prototype.OPTION3=function(t){return this.optionInternal(t,3)},i.prototype.OPTION4=function(t){return this.optionInternal(t,4)},i.prototype.OPTION5=function(t){return this.optionInternal(t,5)},i.prototype.OPTION6=function(t){return this.optionInternal(t,6)},i.prototype.OPTION7=function(t){return this.optionInternal(t,7)},i.prototype.OPTION8=function(t){return this.optionInternal(t,8)},i.prototype.OPTION9=function(t){return this.optionInternal(t,9)},i.prototype.OR=function(t){return this.orInternal(t,0)},i.prototype.OR1=function(t){return this.orInternal(t,1)},i.prototype.OR2=function(t){return this.orInternal(t,2)},i.prototype.OR3=function(t){return this.orInternal(t,3)},i.prototype.OR4=function(t){return this.orInternal(t,4)},i.prototype.OR5=function(t){return this.orInternal(t,5)},i.prototype.OR6=function(t){return this.orInternal(t,6)},i.prototype.OR7=function(t){return this.orInternal(t,7)},i.prototype.OR8=function(t){return this.orInternal(t,8)},i.prototype.OR9=function(t){return this.orInternal(t,9)},i.prototype.MANY=function(t){this.manyInternal(0,t)},i.prototype.MANY1=function(t){this.manyInternal(1,t)},i.prototype.MANY2=function(t){this.manyInternal(2,t)},i.prototype.MANY3=function(t){this.manyInternal(3,t)},i.prototype.MANY4=function(t){this.manyInternal(4,t)},i.prototype.MANY5=function(t){this.manyInternal(5,t)},i.prototype.MANY6=function(t){this.manyInternal(6,t)},i.prototype.MANY7=function(t){this.manyInternal(7,t)},i.prototype.MANY8=function(t){this.manyInternal(8,t)},i.prototype.MANY9=function(t){this.manyInternal(9,t)},i.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},i.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},i.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},i.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},i.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},i.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},i.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},i.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},i.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},i.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},i.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},i.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},i.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},i.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},i.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},i.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},i.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},i.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},i.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},i.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},i.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},i.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},i.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},i.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},i.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},i.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},i.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},i.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},i.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},i.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},i.prototype.RULE=function(t,e,r){if(r===void 0&&(r=Ku),qe(this.definedRulesNames,t)){var a=jo.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),s={message:a,type:_t.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(s)}this.definedRulesNames.push(t);var o=this.defineRule(t,e,r);return this[t]=o,o},i.prototype.OVERRIDE_RULE=function(t,e,r){r===void 0&&(r=Ku);var a=[];a=a.concat(pO(t,this.definedRulesNames,this.className)),this.definitionErrors.push.apply(this.definitionErrors,a);var s=this.defineRule(t,e,r);return this[t]=s,s},i.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var r=this.saveRecogState();try{return t.apply(this,e),!0}catch(a){if(Ps(a))return!1;throw a}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}},i.prototype.getGAstProductions=function(){return this.gastProductionsCache},i.prototype.getSerializedGastProductions=function(){return bC(vt(this.gastProductionsCache))},i}()});var kO,FO=Te(()=>{Pe();Gu();Wu();Qm();Ym();An();kC();Rs();Uu();MC();kO=function(){function i(){}return i.prototype.initRecognizerEngine=function(t,e){if(this.className=AO(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Lu,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},ne(e,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(or(t)){if(Se(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(or(t))this.tokensMap=ct(t,function(o,l){return o[l.name]=l,o},{});else if(ne(t,"modes")&&Sr(It(vt(t.modes)),II)){var r=It(vt(t.modes)),a=Hm(r);this.tokensMap=ct(a,function(o,l){return o[l.name]=l,o},{})}else if(Cy(t))this.tokensMap=xs(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=si;var s=Sr(vt(t),function(o){return Se(o.categoryMatches)});this.tokenMatcher=s?Lu:Io,Aa(vt(this.tokensMap))},i.prototype.defineRule=function(t,e,r){if(this.selfAnalysisDone)throw Error("Grammar rule <"+t+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var a=ne(r,"resyncEnabled")?r.resyncEnabled:Ku.resyncEnabled,s=ne(r,"recoveryValueFunc")?r.recoveryValueFunc:Ku.recoveryValueFunc,o=this.ruleShortNameIdx<<WI+zi;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=t,this.fullRuleNameToShort[t]=o;function l(p){try{if(this.outputCst===!0){e.apply(this,p);var m=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(m),m}else return e.apply(this,p)}catch(f){return this.invokeRuleCatch(f,a,s)}finally{this.ruleFinallyStateUpdate()}}var u;u=function(p,m){return p===void 0&&(p=0),this.ruleInvocationStateUpdate(o,t,p),l.call(this,m)};var c="ruleName";return u[c]=t,u.originalGrammarAction=e,u},i.prototype.invokeRuleCatch=function(t,e,r){var a=this.RULE_STACK.length===1,s=e&&!this.isBackTracking()&&this.recoveryEnabled;if(Ps(t)){var o=t;if(s){var l=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(l))if(o.resyncedTokens=this.reSyncTo(l),this.outputCst){var u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}else return r();else{if(this.outputCst){var u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,o.partialCstResult=u}throw o}}else{if(a)return this.moveToTerminatedState(),r();throw o}}else throw t},i.prototype.optionInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(ko,e),a=this.nestedRuleBeforeClause(t,r);try{return this.optionInternalLogic(t,e,r)}finally{a!==void 0&&this.nestedRuleFinallyClause(r,a)}},i.prototype.optionInternalNoCst=function(t,e){var r=this.getKeyForAutomaticLookahead(ko,e);return this.optionInternalLogic(t,e,r)},i.prototype.optionInternalLogic=function(t,e,r){var a=this,s=this.getLaFuncFromCache(r),o,l;if(t.DEF!==void 0){if(o=t.DEF,l=t.GATE,l!==void 0){var u=s;s=function(){return l.call(a)&&u.call(a)}}}else o=t;if(s.call(this)===!0)return o.call(this)},i.prototype.atLeastOneInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(Is,t),a=this.nestedRuleBeforeClause(e,r);try{return this.atLeastOneInternalLogic(t,e,r)}finally{a!==void 0&&this.nestedRuleFinallyClause(r,a)}},i.prototype.atLeastOneInternalNoCst=function(t,e){var r=this.getKeyForAutomaticLookahead(Is,t);this.atLeastOneInternalLogic(t,e,r)},i.prototype.atLeastOneInternalLogic=function(t,e,r){var a=this,s=this.getLaFuncFromCache(r),o,l;if(e.DEF!==void 0){if(o=e.DEF,l=e.GATE,l!==void 0){var u=s;s=function(){return l.call(a)&&u.call(a)}}}else o=e;if(s.call(this)===!0)for(var c=this.doSingleRepetition(o);s.call(this)===!0&&c===!0;)c=this.doSingleRepetition(o);else throw this.raiseEarlyExitException(t,We.REPETITION_MANDATORY,e.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],s,Is,t,ZI)},i.prototype.atLeastOneSepFirstInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(Ra,t),a=this.nestedRuleBeforeClause(e,r);try{this.atLeastOneSepFirstInternalLogic(t,e,r)}finally{a!==void 0&&this.nestedRuleFinallyClause(r,a)}},i.prototype.atLeastOneSepFirstInternalNoCst=function(t,e){var r=this.getKeyForAutomaticLookahead(Ra,t);this.atLeastOneSepFirstInternalLogic(t,e,r)},i.prototype.atLeastOneSepFirstInternalLogic=function(t,e,r){var a=this,s=e.DEF,o=e.SEP,l=this.getLaFuncFromCache(r);if(l.call(this)===!0){s.call(this);for(var u=function(){return a.tokenMatcher(a.LA(1),o)};this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,u,s,AC],u,Ra,t,AC)}else throw this.raiseEarlyExitException(t,We.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG)},i.prototype.manyInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(Vs,t),a=this.nestedRuleBeforeClause(e,r);try{return this.manyInternalLogic(t,e,r)}finally{a!==void 0&&this.nestedRuleFinallyClause(r,a)}},i.prototype.manyInternalNoCst=function(t,e){var r=this.getKeyForAutomaticLookahead(Vs,t);return this.manyInternalLogic(t,e,r)},i.prototype.manyInternalLogic=function(t,e,r){var a=this,s=this.getLaFuncFromCache(r),o,l;if(e.DEF!==void 0){if(o=e.DEF,l=e.GATE,l!==void 0){var u=s;s=function(){return l.call(a)&&u.call(a)}}}else o=e;for(var c=!0;s.call(this)===!0&&c===!0;)c=this.doSingleRepetition(o);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],s,Vs,t,YI,c)},i.prototype.manySepFirstInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(Os,t),a=this.nestedRuleBeforeClause(e,r);try{this.manySepFirstInternalLogic(t,e,r)}finally{a!==void 0&&this.nestedRuleFinallyClause(r,a)}},i.prototype.manySepFirstInternalNoCst=function(t,e){var r=this.getKeyForAutomaticLookahead(Os,t);this.manySepFirstInternalLogic(t,e,r)},i.prototype.manySepFirstInternalLogic=function(t,e,r){var a=this,s=e.DEF,o=e.SEP,l=this.getLaFuncFromCache(r);if(l.call(this)===!0){s.call(this);for(var u=function(){return a.tokenMatcher(a.LA(1),o)};this.tokenMatcher(this.LA(1),o)===!0;)this.CONSUME(o),s.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,u,s,SC],u,Os,t,SC)}},i.prototype.repetitionSepSecondInternal=function(t,e,r,a,s){for(;r();)this.CONSUME(e),a.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,r,a,s],r,Ra,t,s)},i.prototype.doSingleRepetition=function(t){var e=this.getLexerPosition();t.call(this);var r=this.getLexerPosition();return r>e},i.prototype.orInternalNoCst=function(t,e){var r=or(t)?t:t.DEF,a=this.getKeyForAutomaticLookahead(Ea,e),s=this.getLaFuncFromCache(a),o=s.call(this,r);if(o!==void 0){var l=r[o];return l.ALT.call(this)}this.raiseNoAltException(e,t.ERR_MSG)},i.prototype.orInternal=function(t,e){var r=this.getKeyForAutomaticLookahead(Ea,e),a=this.nestedRuleBeforeClause(t,r);try{var s=or(t)?t:t.DEF,o=this.getLaFuncFromCache(r),l=o.call(this,s);if(l!==void 0){var u=s[l],c=this.nestedAltBeforeClause(u,e,Ea,l);try{return u.ALT.call(this)}finally{c!==void 0&&this.nestedRuleFinallyClause(c.shortName,c.nestedName)}}this.raiseNoAltException(e,t.ERR_MSG)}finally{a!==void 0&&this.nestedRuleFinallyClause(r,a)}},i.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Xy(e,t))}},i.prototype.subruleInternal=function(t,e,r){var a;try{var s=r!==void 0?r.ARGS:void 0;return a=t.call(this,e,s),this.cstPostNonTerminal(a,r!==void 0&&r.LABEL!==void 0?r.LABEL:t.ruleName),a}catch(o){this.subruleInternalError(o,r,t.ruleName)}},i.prototype.subruleInternalError=function(t,e,r){throw Ps(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,e!==void 0&&e.LABEL!==void 0?e.LABEL:r),delete t.partialCstResult),t},i.prototype.consumeInternal=function(t,e,r){var a;try{var s=this.LA(1);this.tokenMatcher(s,t)===!0?(this.consumeToken(),a=s):this.consumeInternalError(t,s,r)}catch(o){a=this.consumeInternalRecovery(t,e,o)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:t.name,a),a},i.prototype.consumeInternalError=function(t,e,r){var a,s=this.LA(0);throw r!==void 0&&r.ERR_MSG?a=r.ERR_MSG:a=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new qu(a,e,s))},i.prototype.consumeInternalRecovery=function(t,e,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){var a=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,a)}catch(s){throw s.name===_C?r:s}}else throw r},i.prototype.saveRecogState=function(){var t=this.errors,e=Ot(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},i.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},i.prototype.ruleInvocationStateUpdate=function(t,e,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},i.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},i.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]},i.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull[t]},i.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),si)},i.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},i}()});var MO,jO=Te(()=>{Wu();Pe();Qm();An();MO=function(){function i(){}return i.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=Vo(t.errorMessageProvider,tr.errorMessageProvider)},i.prototype.SAVE_ERROR=function(t){if(Ps(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:Ot(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(i.prototype,"errors",{get:function(){return Ot(this._errors)},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),i.prototype.raiseEarlyExitException=function(t,e,r){for(var a=this.getCurrRuleFullName(),s=this.getGAstProductions()[a],o=Jm(t,s,e,this.maxLookahead),l=o[0],u=[],c=1;c<=this.maxLookahead;c++)u.push(this.LA(c));var p=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:l,actual:u,previous:this.LA(0),customUserDescription:r,ruleName:a});throw this.SAVE_ERROR(new Yy(p,this.LA(1),this.LA(0)))},i.prototype.raiseNoAltException=function(t,e){for(var r=this.getCurrRuleFullName(),a=this.getGAstProductions()[r],s=Zm(t,a,this.maxLookahead),o=[],l=1;l<=this.maxLookahead;l++)o.push(this.LA(l));var u=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:o,previous:u,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Ky(c,this.LA(1),u))},i}()});var BO,LO=Te(()=>{Ym();Pe();BO=function(){function i(){}return i.prototype.initContentAssist=function(){},i.prototype.computeContentAssist=function(t,e){var r=this.gastProductionsCache[t];if(Gt(r))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return Gy([r],e,this.tokenMatcher,this.maxLookahead)},i.prototype.getNextPossibleTokenTypes=function(t){var e=Cr(t.ruleStack),r=this.getGAstProductions(),a=r[e],s=new XI(a,t).startWalking();return s},i}()});function nf(i,t,e,r){r===void 0&&(r=!1),Qy(e);var a=qm(this.recordingProdStack),s=ii(t)?t:t.DEF,o=new i({definition:[],idx:e});return ne(t,"NAME")&&(o.name=t.NAME),r&&(o.separator=t.SEP),ne(t,"MAX_LOOKAHEAD")&&(o.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(o),s.call(this),a.definition.push(o),this.recordingProdStack.pop(),Jy}function pee(i,t){var e=this;Qy(t);var r=qm(this.recordingProdStack),a=or(i)===!1,s=a===!1?i:i.DEF,o=new St({definition:[],idx:t,ignoreAmbiguities:a&&i.IGNORE_AMBIGUITIES===!0});ne(i,"NAME")&&(o.name=i.NAME),ne(i,"MAX_LOOKAHEAD")&&(o.maxLookahead=i.MAX_LOOKAHEAD);var l=Sy(s,function(u){return ii(u.GATE)});return o.hasPredicates=l,r.definition.push(o),ee(s,function(u){var c=new pt({definition:[]});o.definition.push(c),ne(u,"NAME")&&(c.name=u.NAME),ne(u,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=u.IGNORE_AMBIGUITIES:ne(u,"GATE")&&(c.ignoreAmbiguities=!0),e.recordingProdStack.push(c),u.ALT.call(e),e.recordingProdStack.pop()}),Jy}function WO(i){return i===0?"":""+i}function Qy(i){if(i<0||i>zO){var t=new Error("Invalid DSL Method idx value: <"+i+`>
	`+("Idx value must be a none negative value smaller than "+(zO+1)));throw t.KNOWN_RECORDER_ERROR=!0,t}}var Jy,UO,zO,HO,GO,cee,qO,$O=Te(()=>{Pe();kr();$m();Uu();Rs();An();Gu();Jy={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Jy);UO=!0,zO=Math.pow(2,zi)-1,HO=Ae({name:"RECORDING_PHASE_TOKEN",pattern:$t.NA});Aa([HO]);GO=Oo(HO,`This IToken indicates the Parser is in Recording Phase
	See: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(GO);cee={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details`,children:{}},qO=function(){function i(){}return i.prototype.initGastRecorder=function(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1},i.prototype.enableRecording=function(){var t=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var e=function(a){var s=a>0?a:"";t["CONSUME"+s]=function(o,l){return this.consumeInternalRecord(o,a,l)},t["SUBRULE"+s]=function(o,l){return this.subruleInternalRecord(o,a,l)},t["OPTION"+s]=function(o){return this.optionInternalRecord(o,a)},t["OR"+s]=function(o){return this.orInternalRecord(o,a)},t["MANY"+s]=function(o){this.manyInternalRecord(a,o)},t["MANY_SEP"+s]=function(o){this.manySepFirstInternalRecord(a,o)},t["AT_LEAST_ONE"+s]=function(o){this.atLeastOneInternalRecord(a,o)},t["AT_LEAST_ONE_SEP"+s]=function(o){this.atLeastOneSepFirstInternalRecord(a,o)}},r=0;r<10;r++)e(r);t.consume=function(a,s,o){return this.consumeInternalRecord(s,a,o)},t.subrule=function(a,s,o){return this.subruleInternalRecord(s,a,o)},t.option=function(a,s){return this.optionInternalRecord(s,a)},t.or=function(a,s){return this.orInternalRecord(s,a)},t.many=function(a,s){this.manyInternalRecord(a,s)},t.atLeastOne=function(a,s){this.atLeastOneInternalRecord(a,s)},t.ACTION=t.ACTION_RECORD,t.BACKTRACK=t.BACKTRACK_RECORD,t.LA=t.LA_RECORD})},i.prototype.disableRecording=function(){var t=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var e=0;e<10;e++){var r=e>0?e:"";delete t["CONSUME"+r],delete t["SUBRULE"+r],delete t["OPTION"+r],delete t["OR"+r],delete t["MANY"+r],delete t["MANY_SEP"+r],delete t["AT_LEAST_ONE"+r],delete t["AT_LEAST_ONE_SEP"+r]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA})},i.prototype.ACTION_RECORD=function(t){},i.prototype.BACKTRACK_RECORD=function(t,e){return function(){return!0}},i.prototype.LA_RECORD=function(t){return $u},i.prototype.topLevelRuleRecord=function(t,e){try{var r=new Gn({definition:[],name:t});return r.name=t,this.recordingProdStack.push(r),e.call(this),this.recordingProdStack.pop(),r}catch(a){if(a.KNOWN_RECORDER_ERROR!==!0)try{a.message=a.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording`}catch(s){throw a}throw a}},i.prototype.optionInternalRecord=function(t,e){return nf.call(this,et,t,e)},i.prototype.atLeastOneInternalRecord=function(t,e){nf.call(this,Dt,e,t)},i.prototype.atLeastOneSepFirstInternalRecord=function(t,e){nf.call(this,Pt,e,t,UO)},i.prototype.manyInternalRecord=function(t,e){nf.call(this,ze,e,t)},i.prototype.manySepFirstInternalRecord=function(t,e){nf.call(this,Ct,e,t,UO)},i.prototype.orInternalRecord=function(t,e){return pee.call(this,t,e)},i.prototype.subruleInternalRecord=function(t,e,r){if(Qy(e),!t||ne(t,"ruleName")===!1){var a=new Error("<SUBRULE"+WO(e)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(t)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw a.KNOWN_RECORDER_ERROR=!0,a}var s=qm(this.recordingProdStack),o=t.ruleName,l=new Nt({idx:e,nonTerminalName:o,referencedRule:void 0});return s.definition.push(l),this.outputCst?cee:Jy},i.prototype.consumeInternalRecord=function(t,e,r){if(Qy(e),!fC(t)){var a=new Error("<CONSUME"+WO(e)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(t)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw a.KNOWN_RECORDER_ERROR=!0,a}var s=qm(this.recordingProdStack),o=new ke({idx:e,terminalType:t});return s.definition.push(o),GO},i}()});var KO,XO=Te(()=>{Pe();An();KO=function(){function i(){}return i.prototype.initPerformanceTracer=function(t){if(ne(t,"traceInitPerf")){var e=t.traceInitPerf,r=typeof e=="number";this.traceInitMaxIdent=r?e:1/0,this.traceInitPerf=r?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=tr.traceInitPerf;this.traceInitIndent=-1},i.prototype.TRACE_INIT=function(t,e){if(this.traceInitPerf===!0){this.traceInitIndent++;var r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(r+"--> <"+t+">");var a=xy(e),s=a.time,o=a.value,l=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(r+"<-- <"+t+"> time: "+s+"ms"),this.traceInitIndent--,o}else return e()},i}()});function jC(i){return i===void 0&&(i=void 0),function(){return i}}var YO,$u,tr,Ku,_t,eb,mee,BC,An=Te(()=>{Pe();qI();Rs();Uy();tf();DC();kC();SO();IO();DO();_O();FO();jO();LO();$O();XO();YO=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])},i(t,e)};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),$u=Oo(si,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze($u);tr=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:$y,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Ku=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});(function(i){i[i.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",i[i.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",i[i.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",i[i.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",i[i.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",i[i.LEFT_RECURSION=5]="LEFT_RECURSION",i[i.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",i[i.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",i[i.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",i[i.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",i[i.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",i[i.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",i[i.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",i[i.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",i[i.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"})(_t||(_t={}));eb=function(){function i(t,e){e===void 0&&(e=tr),this.ignoredIssues=tr.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;var r=this;r.initErrorHandler(e),r.initLexerAdapter(),r.initLooksAhead(e),r.initRecognizerEngine(t,e),r.initRecoverable(e),r.initTreeBuilder(e),r.initContentAssist(),r.initGastRecorder(e),r.initPerformanceTracer(e),ne(e,"ignoredIssues")&&e.ignoredIssues!==tr.ignoredIssues&&Mu(`The <ignoredIssues> IParserConfig property is soft-deprecated and will be removed in future versions.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.`),this.ignoredIssues=ne(e,"ignoredIssues")?e.ignoredIssues:tr.ignoredIssues,this.skipValidations=ne(e,"skipValidations")?e.skipValidations:tr.skipValidations}return i.performSelfAnalysis=function(t){t.performSelfAnalysis()},i.prototype.performSelfAnalysis=function(){var t=this;this.TRACE_INIT("performSelfAnalysis",function(){var e;t.selfAnalysisDone=!0;var r=t.className;t.TRACE_INIT("toFastProps",function(){wy(t)}),t.TRACE_INIT("Grammar Recording",function(){try{t.enableRecording(),ee(t.definedRulesNames,function(s){var o=t[s],l=o.originalGrammarAction,u=void 0;t.TRACE_INIT(s+" Rule",function(){u=t.topLevelRuleRecord(s,l)}),t.gastProductionsCache[s]=u})}finally{t.disableRecording()}});var a=[];if(t.TRACE_INIT("Grammar Resolving",function(){a=IC({rules:vt(t.gastProductionsCache)}),t.definitionErrors.push.apply(t.definitionErrors,a)}),t.TRACE_INIT("Grammar Validations",function(){if(Se(a)&&t.skipValidations===!1){var s=OC({rules:vt(t.gastProductionsCache),maxLookahead:t.maxLookahead,tokenTypes:vt(t.tokensMap),ignoredIssues:t.ignoredIssues,errMsgProvider:jo,grammarName:r});t.definitionErrors.push.apply(t.definitionErrors,s)}}),Se(t.definitionErrors)&&(t.recoveryEnabled&&t.TRACE_INIT("computeAllProdsFollows",function(){var s=GI(vt(t.gastProductionsCache));t.resyncFollows=s}),t.TRACE_INIT("ComputeLookaheadFunctions",function(){t.preComputeLookaheadFunctions(vt(t.gastProductionsCache))})),t.TRACE_INIT("expandAllNestedRuleNames",function(){var s=KI(vt(t.gastProductionsCache),t.fullRuleNameToShort);t.allRuleNames=s.allRuleNames}),!i.DEFER_DEFINITION_ERRORS_HANDLING&&!Se(t.definitionErrors))throw e=Z(t.definitionErrors,function(s){return s.message}),new Error(`Parser Definition Errors detected:
 `+e.join(`
-------------------------------
`))})},i.DEFER_DEFINITION_ERRORS_HANDLING=!1,i}();sI(eb,[NO,CO,VO,OO,kO,PO,MO,BO,qO,KO]);mee=function(i){YO(t,i);function t(e,r){r===void 0&&(r=tr);var a=this,s=xs(r);return s.outputCst=!0,a=i.call(this,e,s)||this,a}return t}(eb),BC=function(i){YO(t,i);function t(e,r){r===void 0&&(r=tr);var a=this,s=xs(r);return s.outputCst=!1,a=i.call(this,e,s)||this,a}return t}(eb)});var ZO=Te(()=>{nC()});var JO=Te(()=>{Pe();kr()});var QO=Te(()=>{JO()});var tb=Te(()=>{nC();An();$m();Rs();tf();Wu();hC();kr();kr();Po();DC();ZO();QO()});var I8=U((HIe,V8)=>{var Lee=Mt(),Uee=Math.floor;V8.exports=Number.isInteger||function(t){return!Lee(t)&&isFinite(t)&&Uee(t)===t}});var P8=U((qIe,D8)=>{var O8=ir();D8.exports=function(i){return i!==void 0&&(O8(i,"value")||O8(i,"writable"))}});var iD=U((Q8e,nD)=>{var xte=Su().PROPER,Ete=De(),tD=_N(),rD="\u200B\x85\u180E";nD.exports=function(i){return Ete(function(){return!!tD[i]()||rD[i]()!==rD||xte&&tD[i].name!==i})}});var sD=U((aD,C6)=>{(function(i){"use strict";for(var t=[null,0,{}],e=10,r=44032,a=4352,s=4449,o=4519,l=19,u=21,c=28,p=u*c,m=l*p,f=function(_,F){this.codepoint=_,this.feature=F},d={},h=[],y=0;y<=255;++y)h[y]=0;function b(_,F,z){var H=d[F];return H||(H=_(F,z),!!H.feature&&++h[F>>8&255]>e&&(d[F]=H)),H}function g(_,F,z){var H=F&65280,ie=f.udata[H]||{},fe=ie[F];return fe?new f(F,fe):new f(F,t)}function v(_,F,z){return z?_(F,z):new f(F,null)}function C(_,F,z){var H;if(F<a||a+l<=F&&F<r||r+m<F)return _(F,z);if(a<=F&&F<a+l){var ie={},fe=(F-a)*u;for(H=0;H<u;++H)ie[s+H]=r+c*(H+fe);return new f(F,[,,ie])}var we=F-r,Ne=we%c,ve=[];if(Ne!==0)ve[0]=[r+we-Ne,o+Ne];else for(ve[0]=[a+Math.floor(we/p),s+Math.floor(we%p/c)],ve[2]={},H=1;H<c;++H)ve[2][o+H]=F+H;return new f(F,ve)}function w(_,F,z){return F<60||13311<F&&F<42607?new f(F,t):_(F,z)}var S=[w,b,v,C,g];f.fromCharCode=S.reduceRight(function(_,F){return function(z,H){return F(_,z,H)}},null),f.isHighSurrogate=function(_){return _>=55296&&_<=56319},f.isLowSurrogate=function(_){return _>=56320&&_<=57343},f.prototype.prepFeature=function(){this.feature||(this.feature=f.fromCharCode(this.codepoint,!0).feature)},f.prototype.toString=function(){if(this.codepoint<65536)return String.fromCharCode(this.codepoint);var _=this.codepoint-65536;return String.fromCharCode(Math.floor(_/1024)+55296,_%1024+56320)},f.prototype.getDecomp=function(){return this.prepFeature(),this.feature[0]||null},f.prototype.isCompatibility=function(){return this.prepFeature(),!!this.feature[1]&&this.feature[1]&1<<8},f.prototype.isExclude=function(){return this.prepFeature(),!!this.feature[1]&&this.feature[1]&1<<9},f.prototype.getCanonicalClass=function(){return this.prepFeature(),this.feature[1]?this.feature[1]&255:0},f.prototype.getComposite=function(_){if(this.prepFeature(),!this.feature[2])return null;var F=this.feature[2][_.codepoint];return F?f.fromCharCode(F):null};var A=function(_){this.str=_,this.cursor=0};A.prototype.next=function(){if(!!this.str&&this.cursor<this.str.length){var _=this.str.charCodeAt(this.cursor++),F;return f.isHighSurrogate(_)&&this.cursor<this.str.length&&f.isLowSurrogate(F=this.str.charCodeAt(this.cursor))&&(_=(_-55296)*1024+(F-56320)+65536,++this.cursor),f.fromCharCode(_)}else return this.str=null,null};var E=function(_,F){this.it=_,this.canonical=F,this.resBuf=[]};E.prototype.next=function(){function _(z,H){var ie=H.getDecomp();if(!!ie&&!(z&&H.isCompatibility())){for(var fe=[],we=0;we<ie.length;++we){var Ne=_(z,f.fromCharCode(ie[we]));fe=fe.concat(Ne)}return fe}else return[H]}if(this.resBuf.length===0){var F=this.it.next();if(!F)return null;this.resBuf=_(this.canonical,F)}return this.resBuf.shift()};var I=function(_){this.it=_,this.resBuf=[]};I.prototype.next=function(){var _;if(this.resBuf.length===0)do{var F=this.it.next();if(!F)break;_=F.getCanonicalClass();var z=this.resBuf.length;if(_!==0)for(;z>0;--z){var H=this.resBuf[z-1],ie=H.getCanonicalClass();if(ie<=_)break}this.resBuf.splice(z,0,F)}while(_!==0);return this.resBuf.shift()};var V=function(_){this.it=_,this.procBuf=[],this.resBuf=[],this.lastClass=null};V.prototype.next=function(){for(;this.resBuf.length===0;){var _=this.it.next();if(!_){this.resBuf=this.procBuf,this.procBuf=[];break}if(this.procBuf.length===0)this.lastClass=_.getCanonicalClass(),this.procBuf.push(_);else{var F=this.procBuf[0],z=F.getComposite(_),H=_.getCanonicalClass();!!z&&(this.lastClass<H||this.lastClass===0)?this.procBuf[0]=z:(H===0&&(this.resBuf=this.procBuf,this.procBuf=[]),this.lastClass=H,this.procBuf.push(_))}}return this.resBuf.shift()};var O=function(_,F){switch(_){case"NFD":return new I(new E(new A(F),!0));case"NFKD":return new I(new E(new A(F),!1));case"NFC":return new V(new I(new E(new A(F),!0)));case"NFKC":return new V(new I(new E(new A(F),!1)))}throw _+" is invalid"},k=function(_,F){for(var z=O(_,F),H="",ie;ie=z.next();)H+=ie.toString();return H};function M(_){return k("NFD",_)}function L(_){return k("NFKD",_)}function G(_){return k("NFC",_)}function K(_){return k("NFKC",_)}f.udata={0:{60:[,,{824:8814}],61:[,,{824:8800}],62:[,,{824:8815}],65:[,,{768:192,769:193,770:194,771:195,772:256,774:258,775:550,776:196,777:7842,778:197,780:461,783:512,785:514,803:7840,805:7680,808:260}],66:[,,{775:7682,803:7684,817:7686}],67:[,,{769:262,770:264,775:266,780:268,807:199}],68:[,,{775:7690,780:270,803:7692,807:7696,813:7698,817:7694}],69:[,,{768:200,769:201,770:202,771:7868,772:274,774:276,775:278,776:203,777:7866,780:282,783:516,785:518,803:7864,807:552,808:280,813:7704,816:7706}],70:[,,{775:7710}],71:[,,{769:500,770:284,772:7712,774:286,775:288,780:486,807:290}],72:[,,{770:292,775:7714,776:7718,780:542,803:7716,807:7720,814:7722}],73:[,,{768:204,769:205,770:206,771:296,772:298,774:300,775:304,776:207,777:7880,780:463,783:520,785:522,803:7882,808:302,816:7724}],74:[,,{770:308}],75:[,,{769:7728,780:488,803:7730,807:310,817:7732}],76:[,,{769:313,780:317,803:7734,807:315,813:7740,817:7738}],77:[,,{769:7742,775:7744,803:7746}],78:[,,{768:504,769:323,771:209,775:7748,780:327,803:7750,807:325,813:7754,817:7752}],79:[,,{768:210,769:211,770:212,771:213,772:332,774:334,775:558,776:214,777:7886,779:336,780:465,783:524,785:526,795:416,803:7884,808:490}],80:[,,{769:7764,775:7766}],82:[,,{769:340,775:7768,780:344,783:528,785:530,803:7770,807:342,817:7774}],83:[,,{769:346,770:348,775:7776,780:352,803:7778,806:536,807:350}],84:[,,{775:7786,780:356,803:7788,806:538,807:354,813:7792,817:7790}],85:[,,{768:217,769:218,770:219,771:360,772:362,774:364,776:220,777:7910,778:366,779:368,780:467,783:532,785:534,795:431,803:7908,804:7794,808:370,813:7798,816:7796}],86:[,,{771:7804,803:7806}],87:[,,{768:7808,769:7810,770:372,775:7814,776:7812,803:7816}],88:[,,{775:7818,776:7820}],89:[,,{768:7922,769:221,770:374,771:7928,772:562,775:7822,776:376,777:7926,803:7924}],90:[,,{769:377,770:7824,775:379,780:381,803:7826,817:7828}],97:[,,{768:224,769:225,770:226,771:227,772:257,774:259,775:551,776:228,777:7843,778:229,780:462,783:513,785:515,803:7841,805:7681,808:261}],98:[,,{775:7683,803:7685,817:7687}],99:[,,{769:263,770:265,775:267,780:269,807:231}],100:[,,{775:7691,780:271,803:7693,807:7697,813:7699,817:7695}],101:[,,{768:232,769:233,770:234,771:7869,772:275,774:277,775:279,776:235,777:7867,780:283,783:517,785:519,803:7865,807:553,808:281,813:7705,816:7707}],102:[,,{775:7711}],103:[,,{769:501,770:285,772:7713,774:287,775:289,780:487,807:291}],104:[,,{770:293,775:7715,776:7719,780:543,803:7717,807:7721,814:7723,817:7830}],105:[,,{768:236,769:237,770:238,771:297,772:299,774:301,776:239,777:7881,780:464,783:521,785:523,803:7883,808:303,816:7725}],106:[,,{770:309,780:496}],107:[,,{769:7729,780:489,803:7731,807:311,817:7733}],108:[,,{769:314,780:318,803:7735,807:316,813:7741,817:7739}],109:[,,{769:7743,775:7745,803:7747}],110:[,,{768:505,769:324,771:241,775:7749,780:328,803:7751,807:326,813:7755,817:7753}],111:[,,{768:242,769:243,770:244,771:245,772:333,774:335,775:559,776:246,777:7887,779:337,780:466,783:525,785:527,795:417,803:7885,808:491}],112:[,,{769:7765,775:7767}],114:[,,{769:341,775:7769,780:345,783:529,785:531,803:7771,807:343,817:7775}],115:[,,{769:347,770:349,775:7777,780:353,803:7779,806:537,807:351}],116:[,,{775:7787,776:7831,780:357,803:7789,806:539,807:355,813:7793,817:7791}],117:[,,{768:249,769:250,770:251,771:361,772:363,774:365,776:252,777:7911,778:367,779:369,780:468,783:533,785:535,795:432,803:7909,804:7795,808:371,813:7799,816:7797}],118:[,,{771:7805,803:7807}],119:[,,{768:7809,769:7811,770:373,775:7815,776:7813,778:7832,803:7817}],120:[,,{775:7819,776:7821}],121:[,,{768:7923,769:253,770:375,771:7929,772:563,775:7823,776:255,777:7927,778:7833,803:7925}],122:[,,{769:378,770:7825,775:380,780:382,803:7827,817:7829}],160:[[32],256],168:[[32,776],256,{768:8173,769:901,834:8129}],170:[[97],256],175:[[32,772],256],178:[[50],256],179:[[51],256],180:[[32,769],256],181:[[956],256],184:[[32,807],256],185:[[49],256],186:[[111],256],188:[[49,8260,52],256],189:[[49,8260,50],256],190:[[51,8260,52],256],192:[[65,768]],193:[[65,769]],194:[[65,770],,{768:7846,769:7844,771:7850,777:7848}],195:[[65,771]],196:[[65,776],,{772:478}],197:[[65,778],,{769:506}],198:[,,{769:508,772:482}],199:[[67,807],,{769:7688}],200:[[69,768]],201:[[69,769]],202:[[69,770],,{768:7872,769:7870,771:7876,777:7874}],203:[[69,776]],204:[[73,768]],205:[[73,769]],206:[[73,770]],207:[[73,776],,{769:7726}],209:[[78,771]],210:[[79,768]],211:[[79,769]],212:[[79,770],,{768:7890,769:7888,771:7894,777:7892}],213:[[79,771],,{769:7756,772:556,776:7758}],214:[[79,776],,{772:554}],216:[,,{769:510}],217:[[85,768]],218:[[85,769]],219:[[85,770]],220:[[85,776],,{768:475,769:471,772:469,780:473}],221:[[89,769]],224:[[97,768]],225:[[97,769]],226:[[97,770],,{768:7847,769:7845,771:7851,777:7849}],227:[[97,771]],228:[[97,776],,{772:479}],229:[[97,778],,{769:507}],230:[,,{769:509,772:483}],231:[[99,807],,{769:7689}],232:[[101,768]],233:[[101,769]],234:[[101,770],,{768:7873,769:7871,771:7877,777:7875}],235:[[101,776]],236:[[105,768]],237:[[105,769]],238:[[105,770]],239:[[105,776],,{769:7727}],241:[[110,771]],242:[[111,768]],243:[[111,769]],244:[[111,770],,{768:7891,769:7889,771:7895,777:7893}],245:[[111,771],,{769:7757,772:557,776:7759}],246:[[111,776],,{772:555}],248:[,,{769:511}],249:[[117,768]],250:[[117,769]],251:[[117,770]],252:[[117,776],,{768:476,769:472,772:470,780:474}],253:[[121,769]],255:[[121,776]]},256:{256:[[65,772]],257:[[97,772]],258:[[65,774],,{768:7856,769:7854,771:7860,777:7858}],259:[[97,774],,{768:7857,769:7855,771:7861,777:7859}],260:[[65,808]],261:[[97,808]],262:[[67,769]],263:[[99,769]],264:[[67,770]],265:[[99,770]],266:[[67,775]],267:[[99,775]],268:[[67,780]],269:[[99,780]],270:[[68,780]],271:[[100,780]],274:[[69,772],,{768:7700,769:7702}],275:[[101,772],,{768:7701,769:7703}],276:[[69,774]],277:[[101,774]],278:[[69,775]],279:[[101,775]],280:[[69,808]],281:[[101,808]],282:[[69,780]],283:[[101,780]],284:[[71,770]],285:[[103,770]],286:[[71,774]],287:[[103,774]],288:[[71,775]],289:[[103,775]],290:[[71,807]],291:[[103,807]],292:[[72,770]],293:[[104,770]],296:[[73,771]],297:[[105,771]],298:[[73,772]],299:[[105,772]],300:[[73,774]],301:[[105,774]],302:[[73,808]],303:[[105,808]],304:[[73,775]],306:[[73,74],256],307:[[105,106],256],308:[[74,770]],309:[[106,770]],310:[[75,807]],311:[[107,807]],313:[[76,769]],314:[[108,769]],315:[[76,807]],316:[[108,807]],317:[[76,780]],318:[[108,780]],319:[[76,183],256],320:[[108,183],256],323:[[78,769]],324:[[110,769]],325:[[78,807]],326:[[110,807]],327:[[78,780]],328:[[110,780]],329:[[700,110],256],332:[[79,772],,{768:7760,769:7762}],333:[[111,772],,{768:7761,769:7763}],334:[[79,774]],335:[[111,774]],336:[[79,779]],337:[[111,779]],340:[[82,769]],341:[[114,769]],342:[[82,807]],343:[[114,807]],344:[[82,780]],345:[[114,780]],346:[[83,769],,{775:7780}],347:[[115,769],,{775:7781}],348:[[83,770]],349:[[115,770]],350:[[83,807]],351:[[115,807]],352:[[83,780],,{775:7782}],353:[[115,780],,{775:7783}],354:[[84,807]],355:[[116,807]],356:[[84,780]],357:[[116,780]],360:[[85,771],,{769:7800}],361:[[117,771],,{769:7801}],362:[[85,772],,{776:7802}],363:[[117,772],,{776:7803}],364:[[85,774]],365:[[117,774]],366:[[85,778]],367:[[117,778]],368:[[85,779]],369:[[117,779]],370:[[85,808]],371:[[117,808]],372:[[87,770]],373:[[119,770]],374:[[89,770]],375:[[121,770]],376:[[89,776]],377:[[90,769]],378:[[122,769]],379:[[90,775]],380:[[122,775]],381:[[90,780]],382:[[122,780]],383:[[115],256,{775:7835}],416:[[79,795],,{768:7900,769:7898,771:7904,777:7902,803:7906}],417:[[111,795],,{768:7901,769:7899,771:7905,777:7903,803:7907}],431:[[85,795],,{768:7914,769:7912,771:7918,777:7916,803:7920}],432:[[117,795],,{768:7915,769:7913,771:7919,777:7917,803:7921}],439:[,,{780:494}],452:[[68,381],256],453:[[68,382],256],454:[[100,382],256],455:[[76,74],256],456:[[76,106],256],457:[[108,106],256],458:[[78,74],256],459:[[78,106],256],460:[[110,106],256],461:[[65,780]],462:[[97,780]],463:[[73,780]],464:[[105,780]],465:[[79,780]],466:[[111,780]],467:[[85,780]],468:[[117,780]],469:[[220,772]],470:[[252,772]],471:[[220,769]],472:[[252,769]],473:[[220,780]],474:[[252,780]],475:[[220,768]],476:[[252,768]],478:[[196,772]],479:[[228,772]],480:[[550,772]],481:[[551,772]],482:[[198,772]],483:[[230,772]],486:[[71,780]],487:[[103,780]],488:[[75,780]],489:[[107,780]],490:[[79,808],,{772:492}],491:[[111,808],,{772:493}],492:[[490,772]],493:[[491,772]],494:[[439,780]],495:[[658,780]],496:[[106,780]],497:[[68,90],256],498:[[68,122],256],499:[[100,122],256],500:[[71,769]],501:[[103,769]],504:[[78,768]],505:[[110,768]],506:[[197,769]],507:[[229,769]],508:[[198,769]],509:[[230,769]],510:[[216,769]],511:[[248,769]],66045:[,220]},512:{512:[[65,783]],513:[[97,783]],514:[[65,785]],515:[[97,785]],516:[[69,783]],517:[[101,783]],518:[[69,785]],519:[[101,785]],520:[[73,783]],521:[[105,783]],522:[[73,785]],523:[[105,785]],524:[[79,783]],525:[[111,783]],526:[[79,785]],527:[[111,785]],528:[[82,783]],529:[[114,783]],530:[[82,785]],531:[[114,785]],532:[[85,783]],533:[[117,783]],534:[[85,785]],535:[[117,785]],536:[[83,806]],537:[[115,806]],538:[[84,806]],539:[[116,806]],542:[[72,780]],543:[[104,780]],550:[[65,775],,{772:480}],551:[[97,775],,{772:481}],552:[[69,807],,{774:7708}],553:[[101,807],,{774:7709}],554:[[214,772]],555:[[246,772]],556:[[213,772]],557:[[245,772]],558:[[79,775],,{772:560}],559:[[111,775],,{772:561}],560:[[558,772]],561:[[559,772]],562:[[89,772]],563:[[121,772]],658:[,,{780:495}],688:[[104],256],689:[[614],256],690:[[106],256],691:[[114],256],692:[[633],256],693:[[635],256],694:[[641],256],695:[[119],256],696:[[121],256],728:[[32,774],256],729:[[32,775],256],730:[[32,778],256],731:[[32,808],256],732:[[32,771],256],733:[[32,779],256],736:[[611],256],737:[[108],256],738:[[115],256],739:[[120],256],740:[[661],256],66272:[,220]},768:{768:[,230],769:[,230],770:[,230],771:[,230],772:[,230],773:[,230],774:[,230],775:[,230],776:[,230,{769:836}],777:[,230],778:[,230],779:[,230],780:[,230],781:[,230],782:[,230],783:[,230],784:[,230],785:[,230],786:[,230],787:[,230],788:[,230],789:[,232],790:[,220],791:[,220],792:[,220],793:[,220],794:[,232],795:[,216],796:[,220],797:[,220],798:[,220],799:[,220],800:[,220],801:[,202],802:[,202],803:[,220],804:[,220],805:[,220],806:[,220],807:[,202],808:[,202],809:[,220],810:[,220],811:[,220],812:[,220],813:[,220],814:[,220],815:[,220],816:[,220],817:[,220],818:[,220],819:[,220],820:[,1],821:[,1],822:[,1],823:[,1],824:[,1],825:[,220],826:[,220],827:[,220],828:[,220],829:[,230],830:[,230],831:[,230],832:[[768],230],833:[[769],230],834:[,230],835:[[787],230],836:[[776,769],230],837:[,240],838:[,230],839:[,220],840:[,220],841:[,220],842:[,230],843:[,230],844:[,230],845:[,220],846:[,220],848:[,230],849:[,230],850:[,230],851:[,220],852:[,220],853:[,220],854:[,220],855:[,230],856:[,232],857:[,220],858:[,220],859:[,230],860:[,233],861:[,234],862:[,234],863:[,233],864:[,234],865:[,234],866:[,233],867:[,230],868:[,230],869:[,230],870:[,230],871:[,230],872:[,230],873:[,230],874:[,230],875:[,230],876:[,230],877:[,230],878:[,230],879:[,230],884:[[697]],890:[[32,837],256],894:[[59]],900:[[32,769],256],901:[[168,769]],902:[[913,769]],903:[[183]],904:[[917,769]],905:[[919,769]],906:[[921,769]],908:[[927,769]],910:[[933,769]],911:[[937,769]],912:[[970,769]],913:[,,{768:8122,769:902,772:8121,774:8120,787:7944,788:7945,837:8124}],917:[,,{768:8136,769:904,787:7960,788:7961}],919:[,,{768:8138,769:905,787:7976,788:7977,837:8140}],921:[,,{768:8154,769:906,772:8153,774:8152,776:938,787:7992,788:7993}],927:[,,{768:8184,769:908,787:8008,788:8009}],929:[,,{788:8172}],933:[,,{768:8170,769:910,772:8169,774:8168,776:939,788:8025}],937:[,,{768:8186,769:911,787:8040,788:8041,837:8188}],938:[[921,776]],939:[[933,776]],940:[[945,769],,{837:8116}],941:[[949,769]],942:[[951,769],,{837:8132}],943:[[953,769]],944:[[971,769]],945:[,,{768:8048,769:940,772:8113,774:8112,787:7936,788:7937,834:8118,837:8115}],949:[,,{768:8050,769:941,787:7952,788:7953}],951:[,,{768:8052,769:942,787:7968,788:7969,834:8134,837:8131}],953:[,,{768:8054,769:943,772:8145,774:8144,776:970,787:7984,788:7985,834:8150}],959:[,,{768:8056,769:972,787:8e3,788:8001}],961:[,,{787:8164,788:8165}],965:[,,{768:8058,769:973,772:8161,774:8160,776:971,787:8016,788:8017,834:8166}],969:[,,{768:8060,769:974,787:8032,788:8033,834:8182,837:8179}],970:[[953,776],,{768:8146,769:912,834:8151}],971:[[965,776],,{768:8162,769:944,834:8167}],972:[[959,769]],973:[[965,769]],974:[[969,769],,{837:8180}],976:[[946],256],977:[[952],256],978:[[933],256,{769:979,776:980}],979:[[978,769]],980:[[978,776]],981:[[966],256],982:[[960],256],1008:[[954],256],1009:[[961],256],1010:[[962],256],1012:[[920],256],1013:[[949],256],1017:[[931],256],66422:[,230],66423:[,230],66424:[,230],66425:[,230],66426:[,230]},1024:{1024:[[1045,768]],1025:[[1045,776]],1027:[[1043,769]],1030:[,,{776:1031}],1031:[[1030,776]],1036:[[1050,769]],1037:[[1048,768]],1038:[[1059,774]],1040:[,,{774:1232,776:1234}],1043:[,,{769:1027}],1045:[,,{768:1024,774:1238,776:1025}],1046:[,,{774:1217,776:1244}],1047:[,,{776:1246}],1048:[,,{768:1037,772:1250,774:1049,776:1252}],1049:[[1048,774]],1050:[,,{769:1036}],1054:[,,{776:1254}],1059:[,,{772:1262,774:1038,776:1264,779:1266}],1063:[,,{776:1268}],1067:[,,{776:1272}],1069:[,,{776:1260}],1072:[,,{774:1233,776:1235}],1075:[,,{769:1107}],1077:[,,{768:1104,774:1239,776:1105}],1078:[,,{774:1218,776:1245}],1079:[,,{776:1247}],1080:[,,{768:1117,772:1251,774:1081,776:1253}],1081:[[1080,774]],1082:[,,{769:1116}],1086:[,,{776:1255}],1091:[,,{772:1263,774:1118,776:1265,779:1267}],1095:[,,{776:1269}],1099:[,,{776:1273}],1101:[,,{776:1261}],1104:[[1077,768]],1105:[[1077,776]],1107:[[1075,769]],1110:[,,{776:1111}],1111:[[1110,776]],1116:[[1082,769]],1117:[[1080,768]],1118:[[1091,774]],1140:[,,{783:1142}],1141:[,,{783:1143}],1142:[[1140,783]],1143:[[1141,783]],1155:[,230],1156:[,230],1157:[,230],1158:[,230],1159:[,230],1217:[[1046,774]],1218:[[1078,774]],1232:[[1040,774]],1233:[[1072,774]],1234:[[1040,776]],1235:[[1072,776]],1238:[[1045,774]],1239:[[1077,774]],1240:[,,{776:1242}],1241:[,,{776:1243}],1242:[[1240,776]],1243:[[1241,776]],1244:[[1046,776]],1245:[[1078,776]],1246:[[1047,776]],1247:[[1079,776]],1250:[[1048,772]],1251:[[1080,772]],1252:[[1048,776]],1253:[[1080,776]],1254:[[1054,776]],1255:[[1086,776]],1256:[,,{776:1258}],1257:[,,{776:1259}],1258:[[1256,776]],1259:[[1257,776]],1260:[[1069,776]],1261:[[1101,776]],1262:[[1059,772]],1263:[[1091,772]],1264:[[1059,776]],1265:[[1091,776]],1266:[[1059,779]],1267:[[1091,779]],1268:[[1063,776]],1269:[[1095,776]],1272:[[1067,776]],1273:[[1099,776]]},1280:{1415:[[1381,1410],256],1425:[,220],1426:[,230],1427:[,230],1428:[,230],1429:[,230],1430:[,220],1431:[,230],1432:[,230],1433:[,230],1434:[,222],1435:[,220],1436:[,230],1437:[,230],1438:[,230],1439:[,230],1440:[,230],1441:[,230],1442:[,220],1443:[,220],1444:[,220],1445:[,220],1446:[,220],1447:[,220],1448:[,230],1449:[,230],1450:[,220],1451:[,230],1452:[,230],1453:[,222],1454:[,228],1455:[,230],1456:[,10],1457:[,11],1458:[,12],1459:[,13],1460:[,14],1461:[,15],1462:[,16],1463:[,17],1464:[,18],1465:[,19],1466:[,19],1467:[,20],1468:[,21],1469:[,22],1471:[,23],1473:[,24],1474:[,25],1476:[,230],1477:[,220],1479:[,18]},1536:{1552:[,230],1553:[,230],1554:[,230],1555:[,230],1556:[,230],1557:[,230],1558:[,230],1559:[,230],1560:[,30],1561:[,31],1562:[,32],1570:[[1575,1619]],1571:[[1575,1620]],1572:[[1608,1620]],1573:[[1575,1621]],1574:[[1610,1620]],1575:[,,{1619:1570,1620:1571,1621:1573}],1608:[,,{1620:1572}],1610:[,,{1620:1574}],1611:[,27],1612:[,28],1613:[,29],1614:[,30],1615:[,31],1616:[,32],1617:[,33],1618:[,34],1619:[,230],1620:[,230],1621:[,220],1622:[,220],1623:[,230],1624:[,230],1625:[,230],1626:[,230],1627:[,230],1628:[,220],1629:[,230],1630:[,230],1631:[,220],1648:[,35],1653:[[1575,1652],256],1654:[[1608,1652],256],1655:[[1735,1652],256],1656:[[1610,1652],256],1728:[[1749,1620]],1729:[,,{1620:1730}],1730:[[1729,1620]],1746:[,,{1620:1747}],1747:[[1746,1620]],1749:[,,{1620:1728}],1750:[,230],1751:[,230],1752:[,230],1753:[,230],1754:[,230],1755:[,230],1756:[,230],1759:[,230],1760:[,230],1761:[,230],1762:[,230],1763:[,220],1764:[,230],1767:[,230],1768:[,230],1770:[,220],1771:[,230],1772:[,230],1773:[,220]},1792:{1809:[,36],1840:[,230],1841:[,220],1842:[,230],1843:[,230],1844:[,220],1845:[,230],1846:[,230],1847:[,220],1848:[,220],1849:[,220],1850:[,230],1851:[,220],1852:[,220],1853:[,230],1854:[,220],1855:[,230],1856:[,230],1857:[,230],1858:[,220],1859:[,230],1860:[,220],1861:[,230],1862:[,220],1863:[,230],1864:[,220],1865:[,230],1866:[,230],2027:[,230],2028:[,230],2029:[,230],2030:[,230],2031:[,230],2032:[,230],2033:[,230],2034:[,220],2035:[,230]},2048:{2070:[,230],2071:[,230],2072:[,230],2073:[,230],2075:[,230],2076:[,230],2077:[,230],2078:[,230],2079:[,230],2080:[,230],2081:[,230],2082:[,230],2083:[,230],2085:[,230],2086:[,230],2087:[,230],2089:[,230],2090:[,230],2091:[,230],2092:[,230],2093:[,230],2137:[,220],2138:[,220],2139:[,220],2276:[,230],2277:[,230],2278:[,220],2279:[,230],2280:[,230],2281:[,220],2282:[,230],2283:[,230],2284:[,230],2285:[,220],2286:[,220],2287:[,220],2288:[,27],2289:[,28],2290:[,29],2291:[,230],2292:[,230],2293:[,230],2294:[,220],2295:[,230],2296:[,230],2297:[,220],2298:[,220],2299:[,230],2300:[,230],2301:[,230],2302:[,230],2303:[,230]},2304:{2344:[,,{2364:2345}],2345:[[2344,2364]],2352:[,,{2364:2353}],2353:[[2352,2364]],2355:[,,{2364:2356}],2356:[[2355,2364]],2364:[,7],2381:[,9],2385:[,230],2386:[,220],2387:[,230],2388:[,230],2392:[[2325,2364],512],2393:[[2326,2364],512],2394:[[2327,2364],512],2395:[[2332,2364],512],2396:[[2337,2364],512],2397:[[2338,2364],512],2398:[[2347,2364],512],2399:[[2351,2364],512],2492:[,7],2503:[,,{2494:2507,2519:2508}],2507:[[2503,2494]],2508:[[2503,2519]],2509:[,9],2524:[[2465,2492],512],2525:[[2466,2492],512],2527:[[2479,2492],512]},2560:{2611:[[2610,2620],512],2614:[[2616,2620],512],2620:[,7],2637:[,9],2649:[[2582,2620],512],2650:[[2583,2620],512],2651:[[2588,2620],512],2654:[[2603,2620],512],2748:[,7],2765:[,9],68109:[,220],68111:[,230],68152:[,230],68153:[,1],68154:[,220],68159:[,9],68325:[,230],68326:[,220]},2816:{2876:[,7],2887:[,,{2878:2891,2902:2888,2903:2892}],2888:[[2887,2902]],2891:[[2887,2878]],2892:[[2887,2903]],2893:[,9],2908:[[2849,2876],512],2909:[[2850,2876],512],2962:[,,{3031:2964}],2964:[[2962,3031]],3014:[,,{3006:3018,3031:3020}],3015:[,,{3006:3019}],3018:[[3014,3006]],3019:[[3015,3006]],3020:[[3014,3031]],3021:[,9]},3072:{3142:[,,{3158:3144}],3144:[[3142,3158]],3149:[,9],3157:[,84],3158:[,91],3260:[,7],3263:[,,{3285:3264}],3264:[[3263,3285]],3270:[,,{3266:3274,3285:3271,3286:3272}],3271:[[3270,3285]],3272:[[3270,3286]],3274:[[3270,3266],,{3285:3275}],3275:[[3274,3285]],3277:[,9]},3328:{3398:[,,{3390:3402,3415:3404}],3399:[,,{3390:3403}],3402:[[3398,3390]],3403:[[3399,3390]],3404:[[3398,3415]],3405:[,9],3530:[,9],3545:[,,{3530:3546,3535:3548,3551:3550}],3546:[[3545,3530]],3548:[[3545,3535],,{3530:3549}],3549:[[3548,3530]],3550:[[3545,3551]]},3584:{3635:[[3661,3634],256],3640:[,103],3641:[,103],3642:[,9],3656:[,107],3657:[,107],3658:[,107],3659:[,107],3763:[[3789,3762],256],3768:[,118],3769:[,118],3784:[,122],3785:[,122],3786:[,122],3787:[,122],3804:[[3755,3737],256],3805:[[3755,3745],256]},3840:{3852:[[3851],256],3864:[,220],3865:[,220],3893:[,220],3895:[,220],3897:[,216],3907:[[3906,4023],512],3917:[[3916,4023],512],3922:[[3921,4023],512],3927:[[3926,4023],512],3932:[[3931,4023],512],3945:[[3904,4021],512],3953:[,129],3954:[,130],3955:[[3953,3954],512],3956:[,132],3957:[[3953,3956],512],3958:[[4018,3968],512],3959:[[4018,3969],256],3960:[[4019,3968],512],3961:[[4019,3969],256],3962:[,130],3963:[,130],3964:[,130],3965:[,130],3968:[,130],3969:[[3953,3968],512],3970:[,230],3971:[,230],3972:[,9],3974:[,230],3975:[,230],3987:[[3986,4023],512],3997:[[3996,4023],512],4002:[[4001,4023],512],4007:[[4006,4023],512],4012:[[4011,4023],512],4025:[[3984,4021],512],4038:[,220]},4096:{4133:[,,{4142:4134}],4134:[[4133,4142]],4151:[,7],4153:[,9],4154:[,9],4237:[,220],4348:[[4316],256],69702:[,9],69759:[,9],69785:[,,{69818:69786}],69786:[[69785,69818]],69787:[,,{69818:69788}],69788:[[69787,69818]],69797:[,,{69818:69803}],69803:[[69797,69818]],69817:[,9],69818:[,7]},4352:{69888:[,230],69889:[,230],69890:[,230],69934:[[69937,69927]],69935:[[69938,69927]],69937:[,,{69927:69934}],69938:[,,{69927:69935}],69939:[,9],69940:[,9],70003:[,7],70080:[,9]},4608:{70197:[,9],70198:[,7],70377:[,7],70378:[,9]},4864:{4957:[,230],4958:[,230],4959:[,230],70460:[,7],70471:[,,{70462:70475,70487:70476}],70475:[[70471,70462]],70476:[[70471,70487]],70477:[,9],70502:[,230],70503:[,230],70504:[,230],70505:[,230],70506:[,230],70507:[,230],70508:[,230],70512:[,230],70513:[,230],70514:[,230],70515:[,230],70516:[,230]},5120:{70841:[,,{70832:70844,70842:70843,70845:70846}],70843:[[70841,70842]],70844:[[70841,70832]],70846:[[70841,70845]],70850:[,9],70851:[,7]},5376:{71096:[,,{71087:71098}],71097:[,,{71087:71099}],71098:[[71096,71087]],71099:[[71097,71087]],71103:[,9],71104:[,7]},5632:{71231:[,9],71350:[,9],71351:[,7]},5888:{5908:[,9],5940:[,9],6098:[,9],6109:[,230]},6144:{6313:[,228]},6400:{6457:[,222],6458:[,230],6459:[,220]},6656:{6679:[,230],6680:[,220],6752:[,9],6773:[,230],6774:[,230],6775:[,230],6776:[,230],6777:[,230],6778:[,230],6779:[,230],6780:[,230],6783:[,220],6832:[,230],6833:[,230],6834:[,230],6835:[,230],6836:[,230],6837:[,220],6838:[,220],6839:[,220],6840:[,220],6841:[,220],6842:[,220],6843:[,230],6844:[,230],6845:[,220]},6912:{6917:[,,{6965:6918}],6918:[[6917,6965]],6919:[,,{6965:6920}],6920:[[6919,6965]],6921:[,,{6965:6922}],6922:[[6921,6965]],6923:[,,{6965:6924}],6924:[[6923,6965]],6925:[,,{6965:6926}],6926:[[6925,6965]],6929:[,,{6965:6930}],6930:[[6929,6965]],6964:[,7],6970:[,,{6965:6971}],6971:[[6970,6965]],6972:[,,{6965:6973}],6973:[[6972,6965]],6974:[,,{6965:6976}],6975:[,,{6965:6977}],6976:[[6974,6965]],6977:[[6975,6965]],6978:[,,{6965:6979}],6979:[[6978,6965]],6980:[,9],7019:[,230],7020:[,220],7021:[,230],7022:[,230],7023:[,230],7024:[,230],7025:[,230],7026:[,230],7027:[,230],7082:[,9],7083:[,9],7142:[,7],7154:[,9],7155:[,9]},7168:{7223:[,7],7376:[,230],7377:[,230],7378:[,230],7380:[,1],7381:[,220],7382:[,220],7383:[,220],7384:[,220],7385:[,220],7386:[,230],7387:[,230],7388:[,220],7389:[,220],7390:[,220],7391:[,220],7392:[,230],7394:[,1],7395:[,1],7396:[,1],7397:[,1],7398:[,1],7399:[,1],7400:[,1],7405:[,220],7412:[,230],7416:[,230],7417:[,230]},7424:{7468:[[65],256],7469:[[198],256],7470:[[66],256],7472:[[68],256],7473:[[69],256],7474:[[398],256],7475:[[71],256],7476:[[72],256],7477:[[73],256],7478:[[74],256],7479:[[75],256],7480:[[76],256],7481:[[77],256],7482:[[78],256],7484:[[79],256],7485:[[546],256],7486:[[80],256],7487:[[82],256],7488:[[84],256],7489:[[85],256],7490:[[87],256],7491:[[97],256],7492:[[592],256],7493:[[593],256],7494:[[7426],256],7495:[[98],256],7496:[[100],256],7497:[[101],256],7498:[[601],256],7499:[[603],256],7500:[[604],256],7501:[[103],256],7503:[[107],256],7504:[[109],256],7505:[[331],256],7506:[[111],256],7507:[[596],256],7508:[[7446],256],7509:[[7447],256],7510:[[112],256],7511:[[116],256],7512:[[117],256],7513:[[7453],256],7514:[[623],256],7515:[[118],256],7516:[[7461],256],7517:[[946],256],7518:[[947],256],7519:[[948],256],7520:[[966],256],7521:[[967],256],7522:[[105],256],7523:[[114],256],7524:[[117],256],7525:[[118],256],7526:[[946],256],7527:[[947],256],7528:[[961],256],7529:[[966],256],7530:[[967],256],7544:[[1085],256],7579:[[594],256],7580:[[99],256],7581:[[597],256],7582:[[240],256],7583:[[604],256],7584:[[102],256],7585:[[607],256],7586:[[609],256],7587:[[613],256],7588:[[616],256],7589:[[617],256],7590:[[618],256],7591:[[7547],256],7592:[[669],256],7593:[[621],256],7594:[[7557],256],7595:[[671],256],7596:[[625],256],7597:[[624],256],7598:[[626],256],7599:[[627],256],7600:[[628],256],7601:[[629],256],7602:[[632],256],7603:[[642],256],7604:[[643],256],7605:[[427],256],7606:[[649],256],7607:[[650],256],7608:[[7452],256],7609:[[651],256],7610:[[652],256],7611:[[122],256],7612:[[656],256],7613:[[657],256],7614:[[658],256],7615:[[952],256],7616:[,230],7617:[,230],7618:[,220],7619:[,230],7620:[,230],7621:[,230],7622:[,230],7623:[,230],7624:[,230],7625:[,230],7626:[,220],7627:[,230],7628:[,230],7629:[,234],7630:[,214],7631:[,220],7632:[,202],7633:[,230],7634:[,230],7635:[,230],7636:[,230],7637:[,230],7638:[,230],7639:[,230],7640:[,230],7641:[,230],7642:[,230],7643:[,230],7644:[,230],7645:[,230],7646:[,230],7647:[,230],7648:[,230],7649:[,230],7650:[,230],7651:[,230],7652:[,230],7653:[,230],7654:[,230],7655:[,230],7656:[,230],7657:[,230],7658:[,230],7659:[,230],7660:[,230],7661:[,230],7662:[,230],7663:[,230],7664:[,230],7665:[,230],7666:[,230],7667:[,230],7668:[,230],7669:[,230],7676:[,233],7677:[,220],7678:[,230],7679:[,220]},7680:{7680:[[65,805]],7681:[[97,805]],7682:[[66,775]],7683:[[98,775]],7684:[[66,803]],7685:[[98,803]],7686:[[66,817]],7687:[[98,817]],7688:[[199,769]],7689:[[231,769]],7690:[[68,775]],7691:[[100,775]],7692:[[68,803]],7693:[[100,803]],7694:[[68,817]],7695:[[100,817]],7696:[[68,807]],7697:[[100,807]],7698:[[68,813]],7699:[[100,813]],7700:[[274,768]],7701:[[275,768]],7702:[[274,769]],7703:[[275,769]],7704:[[69,813]],7705:[[101,813]],7706:[[69,816]],7707:[[101,816]],7708:[[552,774]],7709:[[553,774]],7710:[[70,775]],7711:[[102,775]],7712:[[71,772]],7713:[[103,772]],7714:[[72,775]],7715:[[104,775]],7716:[[72,803]],7717:[[104,803]],7718:[[72,776]],7719:[[104,776]],7720:[[72,807]],7721:[[104,807]],7722:[[72,814]],7723:[[104,814]],7724:[[73,816]],7725:[[105,816]],7726:[[207,769]],7727:[[239,769]],7728:[[75,769]],7729:[[107,769]],7730:[[75,803]],7731:[[107,803]],7732:[[75,817]],7733:[[107,817]],7734:[[76,803],,{772:7736}],7735:[[108,803],,{772:7737}],7736:[[7734,772]],7737:[[7735,772]],7738:[[76,817]],7739:[[108,817]],7740:[[76,813]],7741:[[108,813]],7742:[[77,769]],7743:[[109,769]],7744:[[77,775]],7745:[[109,775]],7746:[[77,803]],7747:[[109,803]],7748:[[78,775]],7749:[[110,775]],7750:[[78,803]],7751:[[110,803]],7752:[[78,817]],7753:[[110,817]],7754:[[78,813]],7755:[[110,813]],7756:[[213,769]],7757:[[245,769]],7758:[[213,776]],7759:[[245,776]],7760:[[332,768]],7761:[[333,768]],7762:[[332,769]],7763:[[333,769]],7764:[[80,769]],7765:[[112,769]],7766:[[80,775]],7767:[[112,775]],7768:[[82,775]],7769:[[114,775]],7770:[[82,803],,{772:7772}],7771:[[114,803],,{772:7773}],7772:[[7770,772]],7773:[[7771,772]],7774:[[82,817]],7775:[[114,817]],7776:[[83,775]],7777:[[115,775]],7778:[[83,803],,{775:7784}],7779:[[115,803],,{775:7785}],7780:[[346,775]],7781:[[347,775]],7782:[[352,775]],7783:[[353,775]],7784:[[7778,775]],7785:[[7779,775]],7786:[[84,775]],7787:[[116,775]],7788:[[84,803]],7789:[[116,803]],7790:[[84,817]],7791:[[116,817]],7792:[[84,813]],7793:[[116,813]],7794:[[85,804]],7795:[[117,804]],7796:[[85,816]],7797:[[117,816]],7798:[[85,813]],7799:[[117,813]],7800:[[360,769]],7801:[[361,769]],7802:[[362,776]],7803:[[363,776]],7804:[[86,771]],7805:[[118,771]],7806:[[86,803]],7807:[[118,803]],7808:[[87,768]],7809:[[119,768]],7810:[[87,769]],7811:[[119,769]],7812:[[87,776]],7813:[[119,776]],7814:[[87,775]],7815:[[119,775]],7816:[[87,803]],7817:[[119,803]],7818:[[88,775]],7819:[[120,775]],7820:[[88,776]],7821:[[120,776]],7822:[[89,775]],7823:[[121,775]],7824:[[90,770]],7825:[[122,770]],7826:[[90,803]],7827:[[122,803]],7828:[[90,817]],7829:[[122,817]],7830:[[104,817]],7831:[[116,776]],7832:[[119,778]],7833:[[121,778]],7834:[[97,702],256],7835:[[383,775]],7840:[[65,803],,{770:7852,774:7862}],7841:[[97,803],,{770:7853,774:7863}],7842:[[65,777]],7843:[[97,777]],7844:[[194,769]],7845:[[226,769]],7846:[[194,768]],7847:[[226,768]],7848:[[194,777]],7849:[[226,777]],7850:[[194,771]],7851:[[226,771]],7852:[[7840,770]],7853:[[7841,770]],7854:[[258,769]],7855:[[259,769]],7856:[[258,768]],7857:[[259,768]],7858:[[258,777]],7859:[[259,777]],7860:[[258,771]],7861:[[259,771]],7862:[[7840,774]],7863:[[7841,774]],7864:[[69,803],,{770:7878}],7865:[[101,803],,{770:7879}],7866:[[69,777]],7867:[[101,777]],7868:[[69,771]],7869:[[101,771]],7870:[[202,769]],7871:[[234,769]],7872:[[202,768]],7873:[[234,768]],7874:[[202,777]],7875:[[234,777]],7876:[[202,771]],7877:[[234,771]],7878:[[7864,770]],7879:[[7865,770]],7880:[[73,777]],7881:[[105,777]],7882:[[73,803]],7883:[[105,803]],7884:[[79,803],,{770:7896}],7885:[[111,803],,{770:7897}],7886:[[79,777]],7887:[[111,777]],7888:[[212,769]],7889:[[244,769]],7890:[[212,768]],7891:[[244,768]],7892:[[212,777]],7893:[[244,777]],7894:[[212,771]],7895:[[244,771]],7896:[[7884,770]],7897:[[7885,770]],7898:[[416,769]],7899:[[417,769]],7900:[[416,768]],7901:[[417,768]],7902:[[416,777]],7903:[[417,777]],7904:[[416,771]],7905:[[417,771]],7906:[[416,803]],7907:[[417,803]],7908:[[85,803]],7909:[[117,803]],7910:[[85,777]],7911:[[117,777]],7912:[[431,769]],7913:[[432,769]],7914:[[431,768]],7915:[[432,768]],7916:[[431,777]],7917:[[432,777]],7918:[[431,771]],7919:[[432,771]],7920:[[431,803]],7921:[[432,803]],7922:[[89,768]],7923:[[121,768]],7924:[[89,803]],7925:[[121,803]],7926:[[89,777]],7927:[[121,777]],7928:[[89,771]],7929:[[121,771]]},7936:{7936:[[945,787],,{768:7938,769:7940,834:7942,837:8064}],7937:[[945,788],,{768:7939,769:7941,834:7943,837:8065}],7938:[[7936,768],,{837:8066}],7939:[[7937,768],,{837:8067}],7940:[[7936,769],,{837:8068}],7941:[[7937,769],,{837:8069}],7942:[[7936,834],,{837:8070}],7943:[[7937,834],,{837:8071}],7944:[[913,787],,{768:7946,769:7948,834:7950,837:8072}],7945:[[913,788],,{768:7947,769:7949,834:7951,837:8073}],7946:[[7944,768],,{837:8074}],7947:[[7945,768],,{837:8075}],7948:[[7944,769],,{837:8076}],7949:[[7945,769],,{837:8077}],7950:[[7944,834],,{837:8078}],7951:[[7945,834],,{837:8079}],7952:[[949,787],,{768:7954,769:7956}],7953:[[949,788],,{768:7955,769:7957}],7954:[[7952,768]],7955:[[7953,768]],7956:[[7952,769]],7957:[[7953,769]],7960:[[917,787],,{768:7962,769:7964}],7961:[[917,788],,{768:7963,769:7965}],7962:[[7960,768]],7963:[[7961,768]],7964:[[7960,769]],7965:[[7961,769]],7968:[[951,787],,{768:7970,769:7972,834:7974,837:8080}],7969:[[951,788],,{768:7971,769:7973,834:7975,837:8081}],7970:[[7968,768],,{837:8082}],7971:[[7969,768],,{837:8083}],7972:[[7968,769],,{837:8084}],7973:[[7969,769],,{837:8085}],7974:[[7968,834],,{837:8086}],7975:[[7969,834],,{837:8087}],7976:[[919,787],,{768:7978,769:7980,834:7982,837:8088}],7977:[[919,788],,{768:7979,769:7981,834:7983,837:8089}],7978:[[7976,768],,{837:8090}],7979:[[7977,768],,{837:8091}],7980:[[7976,769],,{837:8092}],7981:[[7977,769],,{837:8093}],7982:[[7976,834],,{837:8094}],7983:[[7977,834],,{837:8095}],7984:[[953,787],,{768:7986,769:7988,834:7990}],7985:[[953,788],,{768:7987,769:7989,834:7991}],7986:[[7984,768]],7987:[[7985,768]],7988:[[7984,769]],7989:[[7985,769]],7990:[[7984,834]],7991:[[7985,834]],7992:[[921,787],,{768:7994,769:7996,834:7998}],7993:[[921,788],,{768:7995,769:7997,834:7999}],7994:[[7992,768]],7995:[[7993,768]],7996:[[7992,769]],7997:[[7993,769]],7998:[[7992,834]],7999:[[7993,834]],8e3:[[959,787],,{768:8002,769:8004}],8001:[[959,788],,{768:8003,769:8005}],8002:[[8e3,768]],8003:[[8001,768]],8004:[[8e3,769]],8005:[[8001,769]],8008:[[927,787],,{768:8010,769:8012}],8009:[[927,788],,{768:8011,769:8013}],8010:[[8008,768]],8011:[[8009,768]],8012:[[8008,769]],8013:[[8009,769]],8016:[[965,787],,{768:8018,769:8020,834:8022}],8017:[[965,788],,{768:8019,769:8021,834:8023}],8018:[[8016,768]],8019:[[8017,768]],8020:[[8016,769]],8021:[[8017,769]],8022:[[8016,834]],8023:[[8017,834]],8025:[[933,788],,{768:8027,769:8029,834:8031}],8027:[[8025,768]],8029:[[8025,769]],8031:[[8025,834]],8032:[[969,787],,{768:8034,769:8036,834:8038,837:8096}],8033:[[969,788],,{768:8035,769:8037,834:8039,837:8097}],8034:[[8032,768],,{837:8098}],8035:[[8033,768],,{837:8099}],8036:[[8032,769],,{837:8100}],8037:[[8033,769],,{837:8101}],8038:[[8032,834],,{837:8102}],8039:[[8033,834],,{837:8103}],8040:[[937,787],,{768:8042,769:8044,834:8046,837:8104}],8041:[[937,788],,{768:8043,769:8045,834:8047,837:8105}],8042:[[8040,768],,{837:8106}],8043:[[8041,768],,{837:8107}],8044:[[8040,769],,{837:8108}],8045:[[8041,769],,{837:8109}],8046:[[8040,834],,{837:8110}],8047:[[8041,834],,{837:8111}],8048:[[945,768],,{837:8114}],8049:[[940]],8050:[[949,768]],8051:[[941]],8052:[[951,768],,{837:8130}],8053:[[942]],8054:[[953,768]],8055:[[943]],8056:[[959,768]],8057:[[972]],8058:[[965,768]],8059:[[973]],8060:[[969,768],,{837:8178}],8061:[[974]],8064:[[7936,837]],8065:[[7937,837]],8066:[[7938,837]],8067:[[7939,837]],8068:[[7940,837]],8069:[[7941,837]],8070:[[7942,837]],8071:[[7943,837]],8072:[[7944,837]],8073:[[7945,837]],8074:[[7946,837]],8075:[[7947,837]],8076:[[7948,837]],8077:[[7949,837]],8078:[[7950,837]],8079:[[7951,837]],8080:[[7968,837]],8081:[[7969,837]],8082:[[7970,837]],8083:[[7971,837]],8084:[[7972,837]],8085:[[7973,837]],8086:[[7974,837]],8087:[[7975,837]],8088:[[7976,837]],8089:[[7977,837]],8090:[[7978,837]],8091:[[7979,837]],8092:[[7980,837]],8093:[[7981,837]],8094:[[7982,837]],8095:[[7983,837]],8096:[[8032,837]],8097:[[8033,837]],8098:[[8034,837]],8099:[[8035,837]],8100:[[8036,837]],8101:[[8037,837]],8102:[[8038,837]],8103:[[8039,837]],8104:[[8040,837]],8105:[[8041,837]],8106:[[8042,837]],8107:[[8043,837]],8108:[[8044,837]],8109:[[8045,837]],8110:[[8046,837]],8111:[[8047,837]],8112:[[945,774]],8113:[[945,772]],8114:[[8048,837]],8115:[[945,837]],8116:[[940,837]],8118:[[945,834],,{837:8119}],8119:[[8118,837]],8120:[[913,774]],8121:[[913,772]],8122:[[913,768]],8123:[[902]],8124:[[913,837]],8125:[[32,787],256],8126:[[953]],8127:[[32,787],256,{768:8141,769:8142,834:8143}],8128:[[32,834],256],8129:[[168,834]],8130:[[8052,837]],8131:[[951,837]],8132:[[942,837]],8134:[[951,834],,{837:8135}],8135:[[8134,837]],8136:[[917,768]],8137:[[904]],8138:[[919,768]],8139:[[905]],8140:[[919,837]],8141:[[8127,768]],8142:[[8127,769]],8143:[[8127,834]],8144:[[953,774]],8145:[[953,772]],8146:[[970,768]],8147:[[912]],8150:[[953,834]],8151:[[970,834]],8152:[[921,774]],8153:[[921,772]],8154:[[921,768]],8155:[[906]],8157:[[8190,768]],8158:[[8190,769]],8159:[[8190,834]],8160:[[965,774]],8161:[[965,772]],8162:[[971,768]],8163:[[944]],8164:[[961,787]],8165:[[961,788]],8166:[[965,834]],8167:[[971,834]],8168:[[933,774]],8169:[[933,772]],8170:[[933,768]],8171:[[910]],8172:[[929,788]],8173:[[168,768]],8174:[[901]],8175:[[96]],8178:[[8060,837]],8179:[[969,837]],8180:[[974,837]],8182:[[969,834],,{837:8183}],8183:[[8182,837]],8184:[[927,768]],8185:[[908]],8186:[[937,768]],8187:[[911]],8188:[[937,837]],8189:[[180]],8190:[[32,788],256,{768:8157,769:8158,834:8159}]},8192:{8192:[[8194]],8193:[[8195]],8194:[[32],256],8195:[[32],256],8196:[[32],256],8197:[[32],256],8198:[[32],256],8199:[[32],256],8200:[[32],256],8201:[[32],256],8202:[[32],256],8209:[[8208],256],8215:[[32,819],256],8228:[[46],256],8229:[[46,46],256],8230:[[46,46,46],256],8239:[[32],256],8243:[[8242,8242],256],8244:[[8242,8242,8242],256],8246:[[8245,8245],256],8247:[[8245,8245,8245],256],8252:[[33,33],256],8254:[[32,773],256],8263:[[63,63],256],8264:[[63,33],256],8265:[[33,63],256],8279:[[8242,8242,8242,8242],256],8287:[[32],256],8304:[[48],256],8305:[[105],256],8308:[[52],256],8309:[[53],256],8310:[[54],256],8311:[[55],256],8312:[[56],256],8313:[[57],256],8314:[[43],256],8315:[[8722],256],8316:[[61],256],8317:[[40],256],8318:[[41],256],8319:[[110],256],8320:[[48],256],8321:[[49],256],8322:[[50],256],8323:[[51],256],8324:[[52],256],8325:[[53],256],8326:[[54],256],8327:[[55],256],8328:[[56],256],8329:[[57],256],8330:[[43],256],8331:[[8722],256],8332:[[61],256],8333:[[40],256],8334:[[41],256],8336:[[97],256],8337:[[101],256],8338:[[111],256],8339:[[120],256],8340:[[601],256],8341:[[104],256],8342:[[107],256],8343:[[108],256],8344:[[109],256],8345:[[110],256],8346:[[112],256],8347:[[115],256],8348:[[116],256],8360:[[82,115],256],8400:[,230],8401:[,230],8402:[,1],8403:[,1],8404:[,230],8405:[,230],8406:[,230],8407:[,230],8408:[,1],8409:[,1],8410:[,1],8411:[,230],8412:[,230],8417:[,230],8421:[,1],8422:[,1],8423:[,230],8424:[,220],8425:[,230],8426:[,1],8427:[,1],8428:[,220],8429:[,220],8430:[,220],8431:[,220],8432:[,230]},8448:{8448:[[97,47,99],256],8449:[[97,47,115],256],8450:[[67],256],8451:[[176,67],256],8453:[[99,47,111],256],8454:[[99,47,117],256],8455:[[400],256],8457:[[176,70],256],8458:[[103],256],8459:[[72],256],8460:[[72],256],8461:[[72],256],8462:[[104],256],8463:[[295],256],8464:[[73],256],8465:[[73],256],8466:[[76],256],8467:[[108],256],8469:[[78],256],8470:[[78,111],256],8473:[[80],256],8474:[[81],256],8475:[[82],256],8476:[[82],256],8477:[[82],256],8480:[[83,77],256],8481:[[84,69,76],256],8482:[[84,77],256],8484:[[90],256],8486:[[937]],8488:[[90],256],8490:[[75]],8491:[[197]],8492:[[66],256],8493:[[67],256],8495:[[101],256],8496:[[69],256],8497:[[70],256],8499:[[77],256],8500:[[111],256],8501:[[1488],256],8502:[[1489],256],8503:[[1490],256],8504:[[1491],256],8505:[[105],256],8507:[[70,65,88],256],8508:[[960],256],8509:[[947],256],8510:[[915],256],8511:[[928],256],8512:[[8721],256],8517:[[68],256],8518:[[100],256],8519:[[101],256],8520:[[105],256],8521:[[106],256],8528:[[49,8260,55],256],8529:[[49,8260,57],256],8530:[[49,8260,49,48],256],8531:[[49,8260,51],256],8532:[[50,8260,51],256],8533:[[49,8260,53],256],8534:[[50,8260,53],256],8535:[[51,8260,53],256],8536:[[52,8260,53],256],8537:[[49,8260,54],256],8538:[[53,8260,54],256],8539:[[49,8260,56],256],8540:[[51,8260,56],256],8541:[[53,8260,56],256],8542:[[55,8260,56],256],8543:[[49,8260],256],8544:[[73],256],8545:[[73,73],256],8546:[[73,73,73],256],8547:[[73,86],256],8548:[[86],256],8549:[[86,73],256],8550:[[86,73,73],256],8551:[[86,73,73,73],256],8552:[[73,88],256],8553:[[88],256],8554:[[88,73],256],8555:[[88,73,73],256],8556:[[76],256],8557:[[67],256],8558:[[68],256],8559:[[77],256],8560:[[105],256],8561:[[105,105],256],8562:[[105,105,105],256],8563:[[105,118],256],8564:[[118],256],8565:[[118,105],256],8566:[[118,105,105],256],8567:[[118,105,105,105],256],8568:[[105,120],256],8569:[[120],256],8570:[[120,105],256],8571:[[120,105,105],256],8572:[[108],256],8573:[[99],256],8574:[[100],256],8575:[[109],256],8585:[[48,8260,51],256],8592:[,,{824:8602}],8594:[,,{824:8603}],8596:[,,{824:8622}],8602:[[8592,824]],8603:[[8594,824]],8622:[[8596,824]],8653:[[8656,824]],8654:[[8660,824]],8655:[[8658,824]],8656:[,,{824:8653}],8658:[,,{824:8655}],8660:[,,{824:8654}]},8704:{8707:[,,{824:8708}],8708:[[8707,824]],8712:[,,{824:8713}],8713:[[8712,824]],8715:[,,{824:8716}],8716:[[8715,824]],8739:[,,{824:8740}],8740:[[8739,824]],8741:[,,{824:8742}],8742:[[8741,824]],8748:[[8747,8747],256],8749:[[8747,8747,8747],256],8751:[[8750,8750],256],8752:[[8750,8750,8750],256],8764:[,,{824:8769}],8769:[[8764,824]],8771:[,,{824:8772}],8772:[[8771,824]],8773:[,,{824:8775}],8775:[[8773,824]],8776:[,,{824:8777}],8777:[[8776,824]],8781:[,,{824:8813}],8800:[[61,824]],8801:[,,{824:8802}],8802:[[8801,824]],8804:[,,{824:8816}],8805:[,,{824:8817}],8813:[[8781,824]],8814:[[60,824]],8815:[[62,824]],8816:[[8804,824]],8817:[[8805,824]],8818:[,,{824:8820}],8819:[,,{824:8821}],8820:[[8818,824]],8821:[[8819,824]],8822:[,,{824:8824}],8823:[,,{824:8825}],8824:[[8822,824]],8825:[[8823,824]],8826:[,,{824:8832}],8827:[,,{824:8833}],8828:[,,{824:8928}],8829:[,,{824:8929}],8832:[[8826,824]],8833:[[8827,824]],8834:[,,{824:8836}],8835:[,,{824:8837}],8836:[[8834,824]],8837:[[8835,824]],8838:[,,{824:8840}],8839:[,,{824:8841}],8840:[[8838,824]],8841:[[8839,824]],8849:[,,{824:8930}],8850:[,,{824:8931}],8866:[,,{824:8876}],8872:[,,{824:8877}],8873:[,,{824:8878}],8875:[,,{824:8879}],8876:[[8866,824]],8877:[[8872,824]],8878:[[8873,824]],8879:[[8875,824]],8882:[,,{824:8938}],8883:[,,{824:8939}],8884:[,,{824:8940}],8885:[,,{824:8941}],8928:[[8828,824]],8929:[[8829,824]],8930:[[8849,824]],8931:[[8850,824]],8938:[[8882,824]],8939:[[8883,824]],8940:[[8884,824]],8941:[[8885,824]]},8960:{9001:[[12296]],9002:[[12297]]},9216:{9312:[[49],256],9313:[[50],256],9314:[[51],256],9315:[[52],256],9316:[[53],256],9317:[[54],256],9318:[[55],256],9319:[[56],256],9320:[[57],256],9321:[[49,48],256],9322:[[49,49],256],9323:[[49,50],256],9324:[[49,51],256],9325:[[49,52],256],9326:[[49,53],256],9327:[[49,54],256],9328:[[49,55],256],9329:[[49,56],256],9330:[[49,57],256],9331:[[50,48],256],9332:[[40,49,41],256],9333:[[40,50,41],256],9334:[[40,51,41],256],9335:[[40,52,41],256],9336:[[40,53,41],256],9337:[[40,54,41],256],9338:[[40,55,41],256],9339:[[40,56,41],256],9340:[[40,57,41],256],9341:[[40,49,48,41],256],9342:[[40,49,49,41],256],9343:[[40,49,50,41],256],9344:[[40,49,51,41],256],9345:[[40,49,52,41],256],9346:[[40,49,53,41],256],9347:[[40,49,54,41],256],9348:[[40,49,55,41],256],9349:[[40,49,56,41],256],9350:[[40,49,57,41],256],9351:[[40,50,48,41],256],9352:[[49,46],256],9353:[[50,46],256],9354:[[51,46],256],9355:[[52,46],256],9356:[[53,46],256],9357:[[54,46],256],9358:[[55,46],256],9359:[[56,46],256],9360:[[57,46],256],9361:[[49,48,46],256],9362:[[49,49,46],256],9363:[[49,50,46],256],9364:[[49,51,46],256],9365:[[49,52,46],256],9366:[[49,53,46],256],9367:[[49,54,46],256],9368:[[49,55,46],256],9369:[[49,56,46],256],9370:[[49,57,46],256],9371:[[50,48,46],256],9372:[[40,97,41],256],9373:[[40,98,41],256],9374:[[40,99,41],256],9375:[[40,100,41],256],9376:[[40,101,41],256],9377:[[40,102,41],256],9378:[[40,103,41],256],9379:[[40,104,41],256],9380:[[40,105,41],256],9381:[[40,106,41],256],9382:[[40,107,41],256],9383:[[40,108,41],256],9384:[[40,109,41],256],9385:[[40,110,41],256],9386:[[40,111,41],256],9387:[[40,112,41],256],9388:[[40,113,41],256],9389:[[40,114,41],256],9390:[[40,115,41],256],9391:[[40,116,41],256],9392:[[40,117,41],256],9393:[[40,118,41],256],9394:[[40,119,41],256],9395:[[40,120,41],256],9396:[[40,121,41],256],9397:[[40,122,41],256],9398:[[65],256],9399:[[66],256],9400:[[67],256],9401:[[68],256],9402:[[69],256],9403:[[70],256],9404:[[71],256],9405:[[72],256],9406:[[73],256],9407:[[74],256],9408:[[75],256],9409:[[76],256],9410:[[77],256],9411:[[78],256],9412:[[79],256],9413:[[80],256],9414:[[81],256],9415:[[82],256],9416:[[83],256],9417:[[84],256],9418:[[85],256],9419:[[86],256],9420:[[87],256],9421:[[88],256],9422:[[89],256],9423:[[90],256],9424:[[97],256],9425:[[98],256],9426:[[99],256],9427:[[100],256],9428:[[101],256],9429:[[102],256],9430:[[103],256],9431:[[104],256],9432:[[105],256],9433:[[106],256],9434:[[107],256],9435:[[108],256],9436:[[109],256],9437:[[110],256],9438:[[111],256],9439:[[112],256],9440:[[113],256],9441:[[114],256],9442:[[115],256],9443:[[116],256],9444:[[117],256],9445:[[118],256],9446:[[119],256],9447:[[120],256],9448:[[121],256],9449:[[122],256],9450:[[48],256]},10752:{10764:[[8747,8747,8747,8747],256],10868:[[58,58,61],256],10869:[[61,61],256],10870:[[61,61,61],256],10972:[[10973,824],512]},11264:{11388:[[106],256],11389:[[86],256],11503:[,230],11504:[,230],11505:[,230]},11520:{11631:[[11617],256],11647:[,9],11744:[,230],11745:[,230],11746:[,230],11747:[,230],11748:[,230],11749:[,230],11750:[,230],11751:[,230],11752:[,230],11753:[,230],11754:[,230],11755:[,230],11756:[,230],11757:[,230],11758:[,230],11759:[,230],11760:[,230],11761:[,230],11762:[,230],11763:[,230],11764:[,230],11765:[,230],11766:[,230],11767:[,230],11768:[,230],11769:[,230],11770:[,230],11771:[,230],11772:[,230],11773:[,230],11774:[,230],11775:[,230]},11776:{11935:[[27597],256],12019:[[40863],256]},12032:{12032:[[19968],256],12033:[[20008],256],12034:[[20022],256],12035:[[20031],256],12036:[[20057],256],12037:[[20101],256],12038:[[20108],256],12039:[[20128],256],12040:[[20154],256],12041:[[20799],256],12042:[[20837],256],12043:[[20843],256],12044:[[20866],256],12045:[[20886],256],12046:[[20907],256],12047:[[20960],256],12048:[[20981],256],12049:[[20992],256],12050:[[21147],256],12051:[[21241],256],12052:[[21269],256],12053:[[21274],256],12054:[[21304],256],12055:[[21313],256],12056:[[21340],256],12057:[[21353],256],12058:[[21378],256],12059:[[21430],256],12060:[[21448],256],12061:[[21475],256],12062:[[22231],256],12063:[[22303],256],12064:[[22763],256],12065:[[22786],256],12066:[[22794],256],12067:[[22805],256],12068:[[22823],256],12069:[[22899],256],12070:[[23376],256],12071:[[23424],256],12072:[[23544],256],12073:[[23567],256],12074:[[23586],256],12075:[[23608],256],12076:[[23662],256],12077:[[23665],256],12078:[[24027],256],12079:[[24037],256],12080:[[24049],256],12081:[[24062],256],12082:[[24178],256],12083:[[24186],256],12084:[[24191],256],12085:[[24308],256],12086:[[24318],256],12087:[[24331],256],12088:[[24339],256],12089:[[24400],256],12090:[[24417],256],12091:[[24435],256],12092:[[24515],256],12093:[[25096],256],12094:[[25142],256],12095:[[25163],256],12096:[[25903],256],12097:[[25908],256],12098:[[25991],256],12099:[[26007],256],12100:[[26020],256],12101:[[26041],256],12102:[[26080],256],12103:[[26085],256],12104:[[26352],256],12105:[[26376],256],12106:[[26408],256],12107:[[27424],256],12108:[[27490],256],12109:[[27513],256],12110:[[27571],256],12111:[[27595],256],12112:[[27604],256],12113:[[27611],256],12114:[[27663],256],12115:[[27668],256],12116:[[27700],256],12117:[[28779],256],12118:[[29226],256],12119:[[29238],256],12120:[[29243],256],12121:[[29247],256],12122:[[29255],256],12123:[[29273],256],12124:[[29275],256],12125:[[29356],256],12126:[[29572],256],12127:[[29577],256],12128:[[29916],256],12129:[[29926],256],12130:[[29976],256],12131:[[29983],256],12132:[[29992],256],12133:[[3e4],256],12134:[[30091],256],12135:[[30098],256],12136:[[30326],256],12137:[[30333],256],12138:[[30382],256],12139:[[30399],256],12140:[[30446],256],12141:[[30683],256],12142:[[30690],256],12143:[[30707],256],12144:[[31034],256],12145:[[31160],256],12146:[[31166],256],12147:[[31348],256],12148:[[31435],256],12149:[[31481],256],12150:[[31859],256],12151:[[31992],256],12152:[[32566],256],12153:[[32593],256],12154:[[32650],256],12155:[[32701],256],12156:[[32769],256],12157:[[32780],256],12158:[[32786],256],12159:[[32819],256],12160:[[32895],256],12161:[[32905],256],12162:[[33251],256],12163:[[33258],256],12164:[[33267],256],12165:[[33276],256],12166:[[33292],256],12167:[[33307],256],12168:[[33311],256],12169:[[33390],256],12170:[[33394],256],12171:[[33400],256],12172:[[34381],256],12173:[[34411],256],12174:[[34880],256],12175:[[34892],256],12176:[[34915],256],12177:[[35198],256],12178:[[35211],256],12179:[[35282],256],12180:[[35328],256],12181:[[35895],256],12182:[[35910],256],12183:[[35925],256],12184:[[35960],256],12185:[[35997],256],12186:[[36196],256],12187:[[36208],256],12188:[[36275],256],12189:[[36523],256],12190:[[36554],256],12191:[[36763],256],12192:[[36784],256],12193:[[36789],256],12194:[[37009],256],12195:[[37193],256],12196:[[37318],256],12197:[[37324],256],12198:[[37329],256],12199:[[38263],256],12200:[[38272],256],12201:[[38428],256],12202:[[38582],256],12203:[[38585],256],12204:[[38632],256],12205:[[38737],256],12206:[[38750],256],12207:[[38754],256],12208:[[38761],256],12209:[[38859],256],12210:[[38893],256],12211:[[38899],256],12212:[[38913],256],12213:[[39080],256],12214:[[39131],256],12215:[[39135],256],12216:[[39318],256],12217:[[39321],256],12218:[[39340],256],12219:[[39592],256],12220:[[39640],256],12221:[[39647],256],12222:[[39717],256],12223:[[39727],256],12224:[[39730],256],12225:[[39740],256],12226:[[39770],256],12227:[[40165],256],12228:[[40565],256],12229:[[40575],256],12230:[[40613],256],12231:[[40635],256],12232:[[40643],256],12233:[[40653],256],12234:[[40657],256],12235:[[40697],256],12236:[[40701],256],12237:[[40718],256],12238:[[40723],256],12239:[[40736],256],12240:[[40763],256],12241:[[40778],256],12242:[[40786],256],12243:[[40845],256],12244:[[40860],256],12245:[[40864],256]},12288:{12288:[[32],256],12330:[,218],12331:[,228],12332:[,232],12333:[,222],12334:[,224],12335:[,224],12342:[[12306],256],12344:[[21313],256],12345:[[21316],256],12346:[[21317],256],12358:[,,{12441:12436}],12363:[,,{12441:12364}],12364:[[12363,12441]],12365:[,,{12441:12366}],12366:[[12365,12441]],12367:[,,{12441:12368}],12368:[[12367,12441]],12369:[,,{12441:12370}],12370:[[12369,12441]],12371:[,,{12441:12372}],12372:[[12371,12441]],12373:[,,{12441:12374}],12374:[[12373,12441]],12375:[,,{12441:12376}],12376:[[12375,12441]],12377:[,,{12441:12378}],12378:[[12377,12441]],12379:[,,{12441:12380}],12380:[[12379,12441]],12381:[,,{12441:12382}],12382:[[12381,12441]],12383:[,,{12441:12384}],12384:[[12383,12441]],12385:[,,{12441:12386}],12386:[[12385,12441]],12388:[,,{12441:12389}],12389:[[12388,12441]],12390:[,,{12441:12391}],12391:[[12390,12441]],12392:[,,{12441:12393}],12393:[[12392,12441]],12399:[,,{12441:12400,12442:12401}],12400:[[12399,12441]],12401:[[12399,12442]],12402:[,,{12441:12403,12442:12404}],12403:[[12402,12441]],12404:[[12402,12442]],12405:[,,{12441:12406,12442:12407}],12406:[[12405,12441]],12407:[[12405,12442]],12408:[,,{12441:12409,12442:12410}],12409:[[12408,12441]],12410:[[12408,12442]],12411:[,,{12441:12412,12442:12413}],12412:[[12411,12441]],12413:[[12411,12442]],12436:[[12358,12441]],12441:[,8],12442:[,8],12443:[[32,12441],256],12444:[[32,12442],256],12445:[,,{12441:12446}],12446:[[12445,12441]],12447:[[12424,12426],256],12454:[,,{12441:12532}],12459:[,,{12441:12460}],12460:[[12459,12441]],12461:[,,{12441:12462}],12462:[[12461,12441]],12463:[,,{12441:12464}],12464:[[12463,12441]],12465:[,,{12441:12466}],12466:[[12465,12441]],12467:[,,{12441:12468}],12468:[[12467,12441]],12469:[,,{12441:12470}],12470:[[12469,12441]],12471:[,,{12441:12472}],12472:[[12471,12441]],12473:[,,{12441:12474}],12474:[[12473,12441]],12475:[,,{12441:12476}],12476:[[12475,12441]],12477:[,,{12441:12478}],12478:[[12477,12441]],12479:[,,{12441:12480}],12480:[[12479,12441]],12481:[,,{12441:12482}],12482:[[12481,12441]],12484:[,,{12441:12485}],12485:[[12484,12441]],12486:[,,{12441:12487}],12487:[[12486,12441]],12488:[,,{12441:12489}],12489:[[12488,12441]],12495:[,,{12441:12496,12442:12497}],12496:[[12495,12441]],12497:[[12495,12442]],12498:[,,{12441:12499,12442:12500}],12499:[[12498,12441]],12500:[[12498,12442]],12501:[,,{12441:12502,12442:12503}],12502:[[12501,12441]],12503:[[12501,12442]],12504:[,,{12441:12505,12442:12506}],12505:[[12504,12441]],12506:[[12504,12442]],12507:[,,{12441:12508,12442:12509}],12508:[[12507,12441]],12509:[[12507,12442]],12527:[,,{12441:12535}],12528:[,,{12441:12536}],12529:[,,{12441:12537}],12530:[,,{12441:12538}],12532:[[12454,12441]],12535:[[12527,12441]],12536:[[12528,12441]],12537:[[12529,12441]],12538:[[12530,12441]],12541:[,,{12441:12542}],12542:[[12541,12441]],12543:[[12467,12488],256]},12544:{12593:[[4352],256],12594:[[4353],256],12595:[[4522],256],12596:[[4354],256],12597:[[4524],256],12598:[[4525],256],12599:[[4355],256],12600:[[4356],256],12601:[[4357],256],12602:[[4528],256],12603:[[4529],256],12604:[[4530],256],12605:[[4531],256],12606:[[4532],256],12607:[[4533],256],12608:[[4378],256],12609:[[4358],256],12610:[[4359],256],12611:[[4360],256],12612:[[4385],256],12613:[[4361],256],12614:[[4362],256],12615:[[4363],256],12616:[[4364],256],12617:[[4365],256],12618:[[4366],256],12619:[[4367],256],12620:[[4368],256],12621:[[4369],256],12622:[[4370],256],12623:[[4449],256],12624:[[4450],256],12625:[[4451],256],12626:[[4452],256],12627:[[4453],256],12628:[[4454],256],12629:[[4455],256],12630:[[4456],256],12631:[[4457],256],12632:[[4458],256],12633:[[4459],256],12634:[[4460],256],12635:[[4461],256],12636:[[4462],256],12637:[[4463],256],12638:[[4464],256],12639:[[4465],256],12640:[[4466],256],12641:[[4467],256],12642:[[4468],256],12643:[[4469],256],12644:[[4448],256],12645:[[4372],256],12646:[[4373],256],12647:[[4551],256],12648:[[4552],256],12649:[[4556],256],12650:[[4558],256],12651:[[4563],256],12652:[[4567],256],12653:[[4569],256],12654:[[4380],256],12655:[[4573],256],12656:[[4575],256],12657:[[4381],256],12658:[[4382],256],12659:[[4384],256],12660:[[4386],256],12661:[[4387],256],12662:[[4391],256],12663:[[4393],256],12664:[[4395],256],12665:[[4396],256],12666:[[4397],256],12667:[[4398],256],12668:[[4399],256],12669:[[4402],256],12670:[[4406],256],12671:[[4416],256],12672:[[4423],256],12673:[[4428],256],12674:[[4593],256],12675:[[4594],256],12676:[[4439],256],12677:[[4440],256],12678:[[4441],256],12679:[[4484],256],12680:[[4485],256],12681:[[4488],256],12682:[[4497],256],12683:[[4498],256],12684:[[4500],256],12685:[[4510],256],12686:[[4513],256],12690:[[19968],256],12691:[[20108],256],12692:[[19977],256],12693:[[22235],256],12694:[[19978],256],12695:[[20013],256],12696:[[19979],256],12697:[[30002],256],12698:[[20057],256],12699:[[19993],256],12700:[[19969],256],12701:[[22825],256],12702:[[22320],256],12703:[[20154],256]},12800:{12800:[[40,4352,41],256],12801:[[40,4354,41],256],12802:[[40,4355,41],256],12803:[[40,4357,41],256],12804:[[40,4358,41],256],12805:[[40,4359,41],256],12806:[[40,4361,41],256],12807:[[40,4363,41],256],12808:[[40,4364,41],256],12809:[[40,4366,41],256],12810:[[40,4367,41],256],12811:[[40,4368,41],256],12812:[[40,4369,41],256],12813:[[40,4370,41],256],12814:[[40,4352,4449,41],256],12815:[[40,4354,4449,41],256],12816:[[40,4355,4449,41],256],12817:[[40,4357,4449,41],256],12818:[[40,4358,4449,41],256],12819:[[40,4359,4449,41],256],12820:[[40,4361,4449,41],256],12821:[[40,4363,4449,41],256],12822:[[40,4364,4449,41],256],12823:[[40,4366,4449,41],256],12824:[[40,4367,4449,41],256],12825:[[40,4368,4449,41],256],12826:[[40,4369,4449,41],256],12827:[[40,4370,4449,41],256],12828:[[40,4364,4462,41],256],12829:[[40,4363,4457,4364,4453,4523,41],256],12830:[[40,4363,4457,4370,4462,41],256],12832:[[40,19968,41],256],12833:[[40,20108,41],256],12834:[[40,19977,41],256],12835:[[40,22235,41],256],12836:[[40,20116,41],256],12837:[[40,20845,41],256],12838:[[40,19971,41],256],12839:[[40,20843,41],256],12840:[[40,20061,41],256],12841:[[40,21313,41],256],12842:[[40,26376,41],256],12843:[[40,28779,41],256],12844:[[40,27700,41],256],12845:[[40,26408,41],256],12846:[[40,37329,41],256],12847:[[40,22303,41],256],12848:[[40,26085,41],256],12849:[[40,26666,41],256],12850:[[40,26377,41],256],12851:[[40,31038,41],256],12852:[[40,21517,41],256],12853:[[40,29305,41],256],12854:[[40,36001,41],256],12855:[[40,31069,41],256],12856:[[40,21172,41],256],12857:[[40,20195,41],256],12858:[[40,21628,41],256],12859:[[40,23398,41],256],12860:[[40,30435,41],256],12861:[[40,20225,41],256],12862:[[40,36039,41],256],12863:[[40,21332,41],256],12864:[[40,31085,41],256],12865:[[40,20241,41],256],12866:[[40,33258,41],256],12867:[[40,33267,41],256],12868:[[21839],256],12869:[[24188],256],12870:[[25991],256],12871:[[31631],256],12880:[[80,84,69],256],12881:[[50,49],256],12882:[[50,50],256],12883:[[50,51],256],12884:[[50,52],256],12885:[[50,53],256],12886:[[50,54],256],12887:[[50,55],256],12888:[[50,56],256],12889:[[50,57],256],12890:[[51,48],256],12891:[[51,49],256],12892:[[51,50],256],12893:[[51,51],256],12894:[[51,52],256],12895:[[51,53],256],12896:[[4352],256],12897:[[4354],256],12898:[[4355],256],12899:[[4357],256],12900:[[4358],256],12901:[[4359],256],12902:[[4361],256],12903:[[4363],256],12904:[[4364],256],12905:[[4366],256],12906:[[4367],256],12907:[[4368],256],12908:[[4369],256],12909:[[4370],256],12910:[[4352,4449],256],12911:[[4354,4449],256],12912:[[4355,4449],256],12913:[[4357,4449],256],12914:[[4358,4449],256],12915:[[4359,4449],256],12916:[[4361,4449],256],12917:[[4363,4449],256],12918:[[4364,4449],256],12919:[[4366,4449],256],12920:[[4367,4449],256],12921:[[4368,4449],256],12922:[[4369,4449],256],12923:[[4370,4449],256],12924:[[4366,4449,4535,4352,4457],256],12925:[[4364,4462,4363,4468],256],12926:[[4363,4462],256],12928:[[19968],256],12929:[[20108],256],12930:[[19977],256],12931:[[22235],256],12932:[[20116],256],12933:[[20845],256],12934:[[19971],256],12935:[[20843],256],12936:[[20061],256],12937:[[21313],256],12938:[[26376],256],12939:[[28779],256],12940:[[27700],256],12941:[[26408],256],12942:[[37329],256],12943:[[22303],256],12944:[[26085],256],12945:[[26666],256],12946:[[26377],256],12947:[[31038],256],12948:[[21517],256],12949:[[29305],256],12950:[[36001],256],12951:[[31069],256],12952:[[21172],256],12953:[[31192],256],12954:[[30007],256],12955:[[22899],256],12956:[[36969],256],12957:[[20778],256],12958:[[21360],256],12959:[[27880],256],12960:[[38917],256],12961:[[20241],256],12962:[[20889],256],12963:[[27491],256],12964:[[19978],256],12965:[[20013],256],12966:[[19979],256],12967:[[24038],256],12968:[[21491],256],12969:[[21307],256],12970:[[23447],256],12971:[[23398],256],12972:[[30435],256],12973:[[20225],256],12974:[[36039],256],12975:[[21332],256],12976:[[22812],256],12977:[[51,54],256],12978:[[51,55],256],12979:[[51,56],256],12980:[[51,57],256],12981:[[52,48],256],12982:[[52,49],256],12983:[[52,50],256],12984:[[52,51],256],12985:[[52,52],256],12986:[[52,53],256],12987:[[52,54],256],12988:[[52,55],256],12989:[[52,56],256],12990:[[52,57],256],12991:[[53,48],256],12992:[[49,26376],256],12993:[[50,26376],256],12994:[[51,26376],256],12995:[[52,26376],256],12996:[[53,26376],256],12997:[[54,26376],256],12998:[[55,26376],256],12999:[[56,26376],256],13e3:[[57,26376],256],13001:[[49,48,26376],256],13002:[[49,49,26376],256],13003:[[49,50,26376],256],13004:[[72,103],256],13005:[[101,114,103],256],13006:[[101,86],256],13007:[[76,84,68],256],13008:[[12450],256],13009:[[12452],256],13010:[[12454],256],13011:[[12456],256],13012:[[12458],256],13013:[[12459],256],13014:[[12461],256],13015:[[12463],256],13016:[[12465],256],13017:[[12467],256],13018:[[12469],256],13019:[[12471],256],13020:[[12473],256],13021:[[12475],256],13022:[[12477],256],13023:[[12479],256],13024:[[12481],256],13025:[[12484],256],13026:[[12486],256],13027:[[12488],256],13028:[[12490],256],13029:[[12491],256],13030:[[12492],256],13031:[[12493],256],13032:[[12494],256],13033:[[12495],256],13034:[[12498],256],13035:[[12501],256],13036:[[12504],256],13037:[[12507],256],13038:[[12510],256],13039:[[12511],256],13040:[[12512],256],13041:[[12513],256],13042:[[12514],256],13043:[[12516],256],13044:[[12518],256],13045:[[12520],256],13046:[[12521],256],13047:[[12522],256],13048:[[12523],256],13049:[[12524],256],13050:[[12525],256],13051:[[12527],256],13052:[[12528],256],13053:[[12529],256],13054:[[12530],256]},13056:{13056:[[12450,12497,12540,12488],256],13057:[[12450,12523,12501,12449],256],13058:[[12450,12531,12506,12450],256],13059:[[12450,12540,12523],256],13060:[[12452,12491,12531,12464],256],13061:[[12452,12531,12481],256],13062:[[12454,12457,12531],256],13063:[[12456,12473,12463,12540,12489],256],13064:[[12456,12540,12459,12540],256],13065:[[12458,12531,12473],256],13066:[[12458,12540,12512],256],13067:[[12459,12452,12522],256],13068:[[12459,12521,12483,12488],256],13069:[[12459,12525,12522,12540],256],13070:[[12460,12525,12531],256],13071:[[12460,12531,12510],256],13072:[[12462,12460],256],13073:[[12462,12491,12540],256],13074:[[12461,12517,12522,12540],256],13075:[[12462,12523,12480,12540],256],13076:[[12461,12525],256],13077:[[12461,12525,12464,12521,12512],256],13078:[[12461,12525,12513,12540,12488,12523],256],13079:[[12461,12525,12527,12483,12488],256],13080:[[12464,12521,12512],256],13081:[[12464,12521,12512,12488,12531],256],13082:[[12463,12523,12476,12452,12525],256],13083:[[12463,12525,12540,12493],256],13084:[[12465,12540,12473],256],13085:[[12467,12523,12490],256],13086:[[12467,12540,12509],256],13087:[[12469,12452,12463,12523],256],13088:[[12469,12531,12481,12540,12512],256],13089:[[12471,12522,12531,12464],256],13090:[[12475,12531,12481],256],13091:[[12475,12531,12488],256],13092:[[12480,12540,12473],256],13093:[[12487,12471],256],13094:[[12489,12523],256],13095:[[12488,12531],256],13096:[[12490,12494],256],13097:[[12494,12483,12488],256],13098:[[12495,12452,12484],256],13099:[[12497,12540,12475,12531,12488],256],13100:[[12497,12540,12484],256],13101:[[12496,12540,12524,12523],256],13102:[[12500,12450,12473,12488,12523],256],13103:[[12500,12463,12523],256],13104:[[12500,12467],256],13105:[[12499,12523],256],13106:[[12501,12449,12521,12483,12489],256],13107:[[12501,12451,12540,12488],256],13108:[[12502,12483,12471,12455,12523],256],13109:[[12501,12521,12531],256],13110:[[12504,12463,12479,12540,12523],256],13111:[[12506,12477],256],13112:[[12506,12491,12498],256],13113:[[12504,12523,12484],256],13114:[[12506,12531,12473],256],13115:[[12506,12540,12472],256],13116:[[12505,12540,12479],256],13117:[[12509,12452,12531,12488],256],13118:[[12508,12523,12488],256],13119:[[12507,12531],256],13120:[[12509,12531,12489],256],13121:[[12507,12540,12523],256],13122:[[12507,12540,12531],256],13123:[[12510,12452,12463,12525],256],13124:[[12510,12452,12523],256],13125:[[12510,12483,12495],256],13126:[[12510,12523,12463],256],13127:[[12510,12531,12471,12519,12531],256],13128:[[12511,12463,12525,12531],256],13129:[[12511,12522],256],13130:[[12511,12522,12496,12540,12523],256],13131:[[12513,12460],256],13132:[[12513,12460,12488,12531],256],13133:[[12513,12540,12488,12523],256],13134:[[12516,12540,12489],256],13135:[[12516,12540,12523],256],13136:[[12518,12450,12531],256],13137:[[12522,12483,12488,12523],256],13138:[[12522,12521],256],13139:[[12523,12500,12540],256],13140:[[12523,12540,12502,12523],256],13141:[[12524,12512],256],13142:[[12524,12531,12488,12466,12531],256],13143:[[12527,12483,12488],256],13144:[[48,28857],256],13145:[[49,28857],256],13146:[[50,28857],256],13147:[[51,28857],256],13148:[[52,28857],256],13149:[[53,28857],256],13150:[[54,28857],256],13151:[[55,28857],256],13152:[[56,28857],256],13153:[[57,28857],256],13154:[[49,48,28857],256],13155:[[49,49,28857],256],13156:[[49,50,28857],256],13157:[[49,51,28857],256],13158:[[49,52,28857],256],13159:[[49,53,28857],256],13160:[[49,54,28857],256],13161:[[49,55,28857],256],13162:[[49,56,28857],256],13163:[[49,57,28857],256],13164:[[50,48,28857],256],13165:[[50,49,28857],256],13166:[[50,50,28857],256],13167:[[50,51,28857],256],13168:[[50,52,28857],256],13169:[[104,80,97],256],13170:[[100,97],256],13171:[[65,85],256],13172:[[98,97,114],256],13173:[[111,86],256],13174:[[112,99],256],13175:[[100,109],256],13176:[[100,109,178],256],13177:[[100,109,179],256],13178:[[73,85],256],13179:[[24179,25104],256],13180:[[26157,21644],256],13181:[[22823,27491],256],13182:[[26126,27835],256],13183:[[26666,24335,20250,31038],256],13184:[[112,65],256],13185:[[110,65],256],13186:[[956,65],256],13187:[[109,65],256],13188:[[107,65],256],13189:[[75,66],256],13190:[[77,66],256],13191:[[71,66],256],13192:[[99,97,108],256],13193:[[107,99,97,108],256],13194:[[112,70],256],13195:[[110,70],256],13196:[[956,70],256],13197:[[956,103],256],13198:[[109,103],256],13199:[[107,103],256],13200:[[72,122],256],13201:[[107,72,122],256],13202:[[77,72,122],256],13203:[[71,72,122],256],13204:[[84,72,122],256],13205:[[956,8467],256],13206:[[109,8467],256],13207:[[100,8467],256],13208:[[107,8467],256],13209:[[102,109],256],13210:[[110,109],256],13211:[[956,109],256],13212:[[109,109],256],13213:[[99,109],256],13214:[[107,109],256],13215:[[109,109,178],256],13216:[[99,109,178],256],13217:[[109,178],256],13218:[[107,109,178],256],13219:[[109,109,179],256],13220:[[99,109,179],256],13221:[[109,179],256],13222:[[107,109,179],256],13223:[[109,8725,115],256],13224:[[109,8725,115,178],256],13225:[[80,97],256],13226:[[107,80,97],256],13227:[[77,80,97],256],13228:[[71,80,97],256],13229:[[114,97,100],256],13230:[[114,97,100,8725,115],256],13231:[[114,97,100,8725,115,178],256],13232:[[112,115],256],13233:[[110,115],256],13234:[[956,115],256],13235:[[109,115],256],13236:[[112,86],256],13237:[[110,86],256],13238:[[956,86],256],13239:[[109,86],256],13240:[[107,86],256],13241:[[77,86],256],13242:[[112,87],256],13243:[[110,87],256],13244:[[956,87],256],13245:[[109,87],256],13246:[[107,87],256],13247:[[77,87],256],13248:[[107,937],256],13249:[[77,937],256],13250:[[97,46,109,46],256],13251:[[66,113],256],13252:[[99,99],256],13253:[[99,100],256],13254:[[67,8725,107,103],256],13255:[[67,111,46],256],13256:[[100,66],256],13257:[[71,121],256],13258:[[104,97],256],13259:[[72,80],256],13260:[[105,110],256],13261:[[75,75],256],13262:[[75,77],256],13263:[[107,116],256],13264:[[108,109],256],13265:[[108,110],256],13266:[[108,111,103],256],13267:[[108,120],256],13268:[[109,98],256],13269:[[109,105,108],256],13270:[[109,111,108],256],13271:[[80,72],256],13272:[[112,46,109,46],256],13273:[[80,80,77],256],13274:[[80,82],256],13275:[[115,114],256],13276:[[83,118],256],13277:[[87,98],256],13278:[[86,8725,109],256],13279:[[65,8725,109],256],13280:[[49,26085],256],13281:[[50,26085],256],13282:[[51,26085],256],13283:[[52,26085],256],13284:[[53,26085],256],13285:[[54,26085],256],13286:[[55,26085],256],13287:[[56,26085],256],13288:[[57,26085],256],13289:[[49,48,26085],256],13290:[[49,49,26085],256],13291:[[49,50,26085],256],13292:[[49,51,26085],256],13293:[[49,52,26085],256],13294:[[49,53,26085],256],13295:[[49,54,26085],256],13296:[[49,55,26085],256],13297:[[49,56,26085],256],13298:[[49,57,26085],256],13299:[[50,48,26085],256],13300:[[50,49,26085],256],13301:[[50,50,26085],256],13302:[[50,51,26085],256],13303:[[50,52,26085],256],13304:[[50,53,26085],256],13305:[[50,54,26085],256],13306:[[50,55,26085],256],13307:[[50,56,26085],256],13308:[[50,57,26085],256],13309:[[51,48,26085],256],13310:[[51,49,26085],256],13311:[[103,97,108],256]},27136:{92912:[,1],92913:[,1],92914:[,1],92915:[,1],92916:[,1]},27392:{92976:[,230],92977:[,230],92978:[,230],92979:[,230],92980:[,230],92981:[,230],92982:[,230]},42496:{42607:[,230],42612:[,230],42613:[,230],42614:[,230],42615:[,230],42616:[,230],42617:[,230],42618:[,230],42619:[,230],42620:[,230],42621:[,230],42652:[[1098],256],42653:[[1100],256],42655:[,230],42736:[,230],42737:[,230]},42752:{42864:[[42863],256],43e3:[[294],256],43001:[[339],256]},43008:{43014:[,9],43204:[,9],43232:[,230],43233:[,230],43234:[,230],43235:[,230],43236:[,230],43237:[,230],43238:[,230],43239:[,230],43240:[,230],43241:[,230],43242:[,230],43243:[,230],43244:[,230],43245:[,230],43246:[,230],43247:[,230],43248:[,230],43249:[,230]},43264:{43307:[,220],43308:[,220],43309:[,220],43347:[,9],43443:[,7],43456:[,9]},43520:{43696:[,230],43698:[,230],43699:[,230],43700:[,220],43703:[,230],43704:[,230],43710:[,230],43711:[,230],43713:[,230],43766:[,9]},43776:{43868:[[42791],256],43869:[[43831],256],43870:[[619],256],43871:[[43858],256],44013:[,9]},48128:{113822:[,1]},53504:{119134:[[119127,119141],512],119135:[[119128,119141],512],119136:[[119135,119150],512],119137:[[119135,119151],512],119138:[[119135,119152],512],119139:[[119135,119153],512],119140:[[119135,119154],512],119141:[,216],119142:[,216],119143:[,1],119144:[,1],119145:[,1],119149:[,226],119150:[,216],119151:[,216],119152:[,216],119153:[,216],119154:[,216],119163:[,220],119164:[,220],119165:[,220],119166:[,220],119167:[,220],119168:[,220],119169:[,220],119170:[,220],119173:[,230],119174:[,230],119175:[,230],119176:[,230],119177:[,230],119178:[,220],119179:[,220],119210:[,230],119211:[,230],119212:[,230],119213:[,230],119227:[[119225,119141],512],119228:[[119226,119141],512],119229:[[119227,119150],512],119230:[[119228,119150],512],119231:[[119227,119151],512],119232:[[119228,119151],512]},53760:{119362:[,230],119363:[,230],119364:[,230]},54272:{119808:[[65],256],119809:[[66],256],119810:[[67],256],119811:[[68],256],119812:[[69],256],119813:[[70],256],119814:[[71],256],119815:[[72],256],119816:[[73],256],119817:[[74],256],119818:[[75],256],119819:[[76],256],119820:[[77],256],119821:[[78],256],119822:[[79],256],119823:[[80],256],119824:[[81],256],119825:[[82],256],119826:[[83],256],119827:[[84],256],119828:[[85],256],119829:[[86],256],119830:[[87],256],119831:[[88],256],119832:[[89],256],119833:[[90],256],119834:[[97],256],119835:[[98],256],119836:[[99],256],119837:[[100],256],119838:[[101],256],119839:[[102],256],119840:[[103],256],119841:[[104],256],119842:[[105],256],119843:[[106],256],119844:[[107],256],119845:[[108],256],119846:[[109],256],119847:[[110],256],119848:[[111],256],119849:[[112],256],119850:[[113],256],119851:[[114],256],119852:[[115],256],119853:[[116],256],119854:[[117],256],119855:[[118],256],119856:[[119],256],119857:[[120],256],119858:[[121],256],119859:[[122],256],119860:[[65],256],119861:[[66],256],119862:[[67],256],119863:[[68],256],119864:[[69],256],119865:[[70],256],119866:[[71],256],119867:[[72],256],119868:[[73],256],119869:[[74],256],119870:[[75],256],119871:[[76],256],119872:[[77],256],119873:[[78],256],119874:[[79],256],119875:[[80],256],119876:[[81],256],119877:[[82],256],119878:[[83],256],119879:[[84],256],119880:[[85],256],119881:[[86],256],119882:[[87],256],119883:[[88],256],119884:[[89],256],119885:[[90],256],119886:[[97],256],119887:[[98],256],119888:[[99],256],119889:[[100],256],119890:[[101],256],119891:[[102],256],119892:[[103],256],119894:[[105],256],119895:[[106],256],119896:[[107],256],119897:[[108],256],119898:[[109],256],119899:[[110],256],119900:[[111],256],119901:[[112],256],119902:[[113],256],119903:[[114],256],119904:[[115],256],119905:[[116],256],119906:[[117],256],119907:[[118],256],119908:[[119],256],119909:[[120],256],119910:[[121],256],119911:[[122],256],119912:[[65],256],119913:[[66],256],119914:[[67],256],119915:[[68],256],119916:[[69],256],119917:[[70],256],119918:[[71],256],119919:[[72],256],119920:[[73],256],119921:[[74],256],119922:[[75],256],119923:[[76],256],119924:[[77],256],119925:[[78],256],119926:[[79],256],119927:[[80],256],119928:[[81],256],119929:[[82],256],119930:[[83],256],119931:[[84],256],119932:[[85],256],119933:[[86],256],119934:[[87],256],119935:[[88],256],119936:[[89],256],119937:[[90],256],119938:[[97],256],119939:[[98],256],119940:[[99],256],119941:[[100],256],119942:[[101],256],119943:[[102],256],119944:[[103],256],119945:[[104],256],119946:[[105],256],119947:[[106],256],119948:[[107],256],119949:[[108],256],119950:[[109],256],119951:[[110],256],119952:[[111],256],119953:[[112],256],119954:[[113],256],119955:[[114],256],119956:[[115],256],119957:[[116],256],119958:[[117],256],119959:[[118],256],119960:[[119],256],119961:[[120],256],119962:[[121],256],119963:[[122],256],119964:[[65],256],119966:[[67],256],119967:[[68],256],119970:[[71],256],119973:[[74],256],119974:[[75],256],119977:[[78],256],119978:[[79],256],119979:[[80],256],119980:[[81],256],119982:[[83],256],119983:[[84],256],119984:[[85],256],119985:[[86],256],119986:[[87],256],119987:[[88],256],119988:[[89],256],119989:[[90],256],119990:[[97],256],119991:[[98],256],119992:[[99],256],119993:[[100],256],119995:[[102],256],119997:[[104],256],119998:[[105],256],119999:[[106],256],12e4:[[107],256],120001:[[108],256],120002:[[109],256],120003:[[110],256],120005:[[112],256],120006:[[113],256],120007:[[114],256],120008:[[115],256],120009:[[116],256],120010:[[117],256],120011:[[118],256],120012:[[119],256],120013:[[120],256],120014:[[121],256],120015:[[122],256],120016:[[65],256],120017:[[66],256],120018:[[67],256],120019:[[68],256],120020:[[69],256],120021:[[70],256],120022:[[71],256],120023:[[72],256],120024:[[73],256],120025:[[74],256],120026:[[75],256],120027:[[76],256],120028:[[77],256],120029:[[78],256],120030:[[79],256],120031:[[80],256],120032:[[81],256],120033:[[82],256],120034:[[83],256],120035:[[84],256],120036:[[85],256],120037:[[86],256],120038:[[87],256],120039:[[88],256],120040:[[89],256],120041:[[90],256],120042:[[97],256],120043:[[98],256],120044:[[99],256],120045:[[100],256],120046:[[101],256],120047:[[102],256],120048:[[103],256],120049:[[104],256],120050:[[105],256],120051:[[106],256],120052:[[107],256],120053:[[108],256],120054:[[109],256],120055:[[110],256],120056:[[111],256],120057:[[112],256],120058:[[113],256],120059:[[114],256],120060:[[115],256],120061:[[116],256],120062:[[117],256],120063:[[118],256]},54528:{120064:[[119],256],120065:[[120],256],120066:[[121],256],120067:[[122],256],120068:[[65],256],120069:[[66],256],120071:[[68],256],120072:[[69],256],120073:[[70],256],120074:[[71],256],120077:[[74],256],120078:[[75],256],120079:[[76],256],120080:[[77],256],120081:[[78],256],120082:[[79],256],120083:[[80],256],120084:[[81],256],120086:[[83],256],120087:[[84],256],120088:[[85],256],120089:[[86],256],120090:[[87],256],120091:[[88],256],120092:[[89],256],120094:[[97],256],120095:[[98],256],120096:[[99],256],120097:[[100],256],120098:[[101],256],120099:[[102],256],120100:[[103],256],120101:[[104],256],120102:[[105],256],120103:[[106],256],120104:[[107],256],120105:[[108],256],120106:[[109],256],120107:[[110],256],120108:[[111],256],120109:[[112],256],120110:[[113],256],120111:[[114],256],120112:[[115],256],120113:[[116],256],120114:[[117],256],120115:[[118],256],120116:[[119],256],120117:[[120],256],120118:[[121],256],120119:[[122],256],120120:[[65],256],120121:[[66],256],120123:[[68],256],120124:[[69],256],120125:[[70],256],120126:[[71],256],120128:[[73],256],120129:[[74],256],120130:[[75],256],120131:[[76],256],120132:[[77],256],120134:[[79],256],120138:[[83],256],120139:[[84],256],120140:[[85],256],120141:[[86],256],120142:[[87],256],120143:[[88],256],120144:[[89],256],120146:[[97],256],120147:[[98],256],120148:[[99],256],120149:[[100],256],120150:[[101],256],120151:[[102],256],120152:[[103],256],120153:[[104],256],120154:[[105],256],120155:[[106],256],120156:[[107],256],120157:[[108],256],120158:[[109],256],120159:[[110],256],120160:[[111],256],120161:[[112],256],120162:[[113],256],120163:[[114],256],120164:[[115],256],120165:[[116],256],120166:[[117],256],120167:[[118],256],120168:[[119],256],120169:[[120],256],120170:[[121],256],120171:[[122],256],120172:[[65],256],120173:[[66],256],120174:[[67],256],120175:[[68],256],120176:[[69],256],120177:[[70],256],120178:[[71],256],120179:[[72],256],120180:[[73],256],120181:[[74],256],120182:[[75],256],120183:[[76],256],120184:[[77],256],120185:[[78],256],120186:[[79],256],120187:[[80],256],120188:[[81],256],120189:[[82],256],120190:[[83],256],120191:[[84],256],120192:[[85],256],120193:[[86],256],120194:[[87],256],120195:[[88],256],120196:[[89],256],120197:[[90],256],120198:[[97],256],120199:[[98],256],120200:[[99],256],120201:[[100],256],120202:[[101],256],120203:[[102],256],120204:[[103],256],120205:[[104],256],120206:[[105],256],120207:[[106],256],120208:[[107],256],120209:[[108],256],120210:[[109],256],120211:[[110],256],120212:[[111],256],120213:[[112],256],120214:[[113],256],120215:[[114],256],120216:[[115],256],120217:[[116],256],120218:[[117],256],120219:[[118],256],120220:[[119],256],120221:[[120],256],120222:[[121],256],120223:[[122],256],120224:[[65],256],120225:[[66],256],120226:[[67],256],120227:[[68],256],120228:[[69],256],120229:[[70],256],120230:[[71],256],120231:[[72],256],120232:[[73],256],120233:[[74],256],120234:[[75],256],120235:[[76],256],120236:[[77],256],120237:[[78],256],120238:[[79],256],120239:[[80],256],120240:[[81],256],120241:[[82],256],120242:[[83],256],120243:[[84],256],120244:[[85],256],120245:[[86],256],120246:[[87],256],120247:[[88],256],120248:[[89],256],120249:[[90],256],120250:[[97],256],120251:[[98],256],120252:[[99],256],120253:[[100],256],120254:[[101],256],120255:[[102],256],120256:[[103],256],120257:[[104],256],120258:[[105],256],120259:[[106],256],120260:[[107],256],120261:[[108],256],120262:[[109],256],120263:[[110],256],120264:[[111],256],120265:[[112],256],120266:[[113],256],120267:[[114],256],120268:[[115],256],120269:[[116],256],120270:[[117],256],120271:[[118],256],120272:[[119],256],120273:[[120],256],120274:[[121],256],120275:[[122],256],120276:[[65],256],120277:[[66],256],120278:[[67],256],120279:[[68],256],120280:[[69],256],120281:[[70],256],120282:[[71],256],120283:[[72],256],120284:[[73],256],120285:[[74],256],120286:[[75],256],120287:[[76],256],120288:[[77],256],120289:[[78],256],120290:[[79],256],120291:[[80],256],120292:[[81],256],120293:[[82],256],120294:[[83],256],120295:[[84],256],120296:[[85],256],120297:[[86],256],120298:[[87],256],120299:[[88],256],120300:[[89],256],120301:[[90],256],120302:[[97],256],120303:[[98],256],120304:[[99],256],120305:[[100],256],120306:[[101],256],120307:[[102],256],120308:[[103],256],120309:[[104],256],120310:[[105],256],120311:[[106],256],120312:[[107],256],120313:[[108],256],120314:[[109],256],120315:[[110],256],120316:[[111],256],120317:[[112],256],120318:[[113],256],120319:[[114],256]},54784:{120320:[[115],256],120321:[[116],256],120322:[[117],256],120323:[[118],256],120324:[[119],256],120325:[[120],256],120326:[[121],256],120327:[[122],256],120328:[[65],256],120329:[[66],256],120330:[[67],256],120331:[[68],256],120332:[[69],256],120333:[[70],256],120334:[[71],256],120335:[[72],256],120336:[[73],256],120337:[[74],256],120338:[[75],256],120339:[[76],256],120340:[[77],256],120341:[[78],256],120342:[[79],256],120343:[[80],256],120344:[[81],256],120345:[[82],256],120346:[[83],256],120347:[[84],256],120348:[[85],256],120349:[[86],256],120350:[[87],256],120351:[[88],256],120352:[[89],256],120353:[[90],256],120354:[[97],256],120355:[[98],256],120356:[[99],256],120357:[[100],256],120358:[[101],256],120359:[[102],256],120360:[[103],256],120361:[[104],256],120362:[[105],256],120363:[[106],256],120364:[[107],256],120365:[[108],256],120366:[[109],256],120367:[[110],256],120368:[[111],256],120369:[[112],256],120370:[[113],256],120371:[[114],256],120372:[[115],256],120373:[[116],256],120374:[[117],256],120375:[[118],256],120376:[[119],256],120377:[[120],256],120378:[[121],256],120379:[[122],256],120380:[[65],256],120381:[[66],256],120382:[[67],256],120383:[[68],256],120384:[[69],256],120385:[[70],256],120386:[[71],256],120387:[[72],256],120388:[[73],256],120389:[[74],256],120390:[[75],256],120391:[[76],256],120392:[[77],256],120393:[[78],256],120394:[[79],256],120395:[[80],256],120396:[[81],256],120397:[[82],256],120398:[[83],256],120399:[[84],256],120400:[[85],256],120401:[[86],256],120402:[[87],256],120403:[[88],256],120404:[[89],256],120405:[[90],256],120406:[[97],256],120407:[[98],256],120408:[[99],256],120409:[[100],256],120410:[[101],256],120411:[[102],256],120412:[[103],256],120413:[[104],256],120414:[[105],256],120415:[[106],256],120416:[[107],256],120417:[[108],256],120418:[[109],256],120419:[[110],256],120420:[[111],256],120421:[[112],256],120422:[[113],256],120423:[[114],256],120424:[[115],256],120425:[[116],256],120426:[[117],256],120427:[[118],256],120428:[[119],256],120429:[[120],256],120430:[[121],256],120431:[[122],256],120432:[[65],256],120433:[[66],256],120434:[[67],256],120435:[[68],256],120436:[[69],256],120437:[[70],256],120438:[[71],256],120439:[[72],256],120440:[[73],256],120441:[[74],256],120442:[[75],256],120443:[[76],256],120444:[[77],256],120445:[[78],256],120446:[[79],256],120447:[[80],256],120448:[[81],256],120449:[[82],256],120450:[[83],256],120451:[[84],256],120452:[[85],256],120453:[[86],256],120454:[[87],256],120455:[[88],256],120456:[[89],256],120457:[[90],256],120458:[[97],256],120459:[[98],256],120460:[[99],256],120461:[[100],256],120462:[[101],256],120463:[[102],256],120464:[[103],256],120465:[[104],256],120466:[[105],256],120467:[[106],256],120468:[[107],256],120469:[[108],256],120470:[[109],256],120471:[[110],256],120472:[[111],256],120473:[[112],256],120474:[[113],256],120475:[[114],256],120476:[[115],256],120477:[[116],256],120478:[[117],256],120479:[[118],256],120480:[[119],256],120481:[[120],256],120482:[[121],256],120483:[[122],256],120484:[[305],256],120485:[[567],256],120488:[[913],256],120489:[[914],256],120490:[[915],256],120491:[[916],256],120492:[[917],256],120493:[[918],256],120494:[[919],256],120495:[[920],256],120496:[[921],256],120497:[[922],256],120498:[[923],256],120499:[[924],256],120500:[[925],256],120501:[[926],256],120502:[[927],256],120503:[[928],256],120504:[[929],256],120505:[[1012],256],120506:[[931],256],120507:[[932],256],120508:[[933],256],120509:[[934],256],120510:[[935],256],120511:[[936],256],120512:[[937],256],120513:[[8711],256],120514:[[945],256],120515:[[946],256],120516:[[947],256],120517:[[948],256],120518:[[949],256],120519:[[950],256],120520:[[951],256],120521:[[952],256],120522:[[953],256],120523:[[954],256],120524:[[955],256],120525:[[956],256],120526:[[957],256],120527:[[958],256],120528:[[959],256],120529:[[960],256],120530:[[961],256],120531:[[962],256],120532:[[963],256],120533:[[964],256],120534:[[965],256],120535:[[966],256],120536:[[967],256],120537:[[968],256],120538:[[969],256],120539:[[8706],256],120540:[[1013],256],120541:[[977],256],120542:[[1008],256],120543:[[981],256],120544:[[1009],256],120545:[[982],256],120546:[[913],256],120547:[[914],256],120548:[[915],256],120549:[[916],256],120550:[[917],256],120551:[[918],256],120552:[[919],256],120553:[[920],256],120554:[[921],256],120555:[[922],256],120556:[[923],256],120557:[[924],256],120558:[[925],256],120559:[[926],256],120560:[[927],256],120561:[[928],256],120562:[[929],256],120563:[[1012],256],120564:[[931],256],120565:[[932],256],120566:[[933],256],120567:[[934],256],120568:[[935],256],120569:[[936],256],120570:[[937],256],120571:[[8711],256],120572:[[945],256],120573:[[946],256],120574:[[947],256],120575:[[948],256]},55040:{120576:[[949],256],120577:[[950],256],120578:[[951],256],120579:[[952],256],120580:[[953],256],120581:[[954],256],120582:[[955],256],120583:[[956],256],120584:[[957],256],120585:[[958],256],120586:[[959],256],120587:[[960],256],120588:[[961],256],120589:[[962],256],120590:[[963],256],120591:[[964],256],120592:[[965],256],120593:[[966],256],120594:[[967],256],120595:[[968],256],120596:[[969],256],120597:[[8706],256],120598:[[1013],256],120599:[[977],256],120600:[[1008],256],120601:[[981],256],120602:[[1009],256],120603:[[982],256],120604:[[913],256],120605:[[914],256],120606:[[915],256],120607:[[916],256],120608:[[917],256],120609:[[918],256],120610:[[919],256],120611:[[920],256],120612:[[921],256],120613:[[922],256],120614:[[923],256],120615:[[924],256],120616:[[925],256],120617:[[926],256],120618:[[927],256],120619:[[928],256],120620:[[929],256],120621:[[1012],256],120622:[[931],256],120623:[[932],256],120624:[[933],256],120625:[[934],256],120626:[[935],256],120627:[[936],256],120628:[[937],256],120629:[[8711],256],120630:[[945],256],120631:[[946],256],120632:[[947],256],120633:[[948],256],120634:[[949],256],120635:[[950],256],120636:[[951],256],120637:[[952],256],120638:[[953],256],120639:[[954],256],120640:[[955],256],120641:[[956],256],120642:[[957],256],120643:[[958],256],120644:[[959],256],120645:[[960],256],120646:[[961],256],120647:[[962],256],120648:[[963],256],120649:[[964],256],120650:[[965],256],120651:[[966],256],120652:[[967],256],120653:[[968],256],120654:[[969],256],120655:[[8706],256],120656:[[1013],256],120657:[[977],256],120658:[[1008],256],120659:[[981],256],120660:[[1009],256],120661:[[982],256],120662:[[913],256],120663:[[914],256],120664:[[915],256],120665:[[916],256],120666:[[917],256],120667:[[918],256],120668:[[919],256],120669:[[920],256],120670:[[921],256],120671:[[922],256],120672:[[923],256],120673:[[924],256],120674:[[925],256],120675:[[926],256],120676:[[927],256],120677:[[928],256],120678:[[929],256],120679:[[1012],256],120680:[[931],256],120681:[[932],256],120682:[[933],256],120683:[[934],256],120684:[[935],256],120685:[[936],256],120686:[[937],256],120687:[[8711],256],120688:[[945],256],120689:[[946],256],120690:[[947],256],120691:[[948],256],120692:[[949],256],120693:[[950],256],120694:[[951],256],120695:[[952],256],120696:[[953],256],120697:[[954],256],120698:[[955],256],120699:[[956],256],120700:[[957],256],120701:[[958],256],120702:[[959],256],120703:[[960],256],120704:[[961],256],120705:[[962],256],120706:[[963],256],120707:[[964],256],120708:[[965],256],120709:[[966],256],120710:[[967],256],120711:[[968],256],120712:[[969],256],120713:[[8706],256],120714:[[1013],256],120715:[[977],256],120716:[[1008],256],120717:[[981],256],120718:[[1009],256],120719:[[982],256],120720:[[913],256],120721:[[914],256],120722:[[915],256],120723:[[916],256],120724:[[917],256],120725:[[918],256],120726:[[919],256],120727:[[920],256],120728:[[921],256],120729:[[922],256],120730:[[923],256],120731:[[924],256],120732:[[925],256],120733:[[926],256],120734:[[927],256],120735:[[928],256],120736:[[929],256],120737:[[1012],256],120738:[[931],256],120739:[[932],256],120740:[[933],256],120741:[[934],256],120742:[[935],256],120743:[[936],256],120744:[[937],256],120745:[[8711],256],120746:[[945],256],120747:[[946],256],120748:[[947],256],120749:[[948],256],120750:[[949],256],120751:[[950],256],120752:[[951],256],120753:[[952],256],120754:[[953],256],120755:[[954],256],120756:[[955],256],120757:[[956],256],120758:[[957],256],120759:[[958],256],120760:[[959],256],120761:[[960],256],120762:[[961],256],120763:[[962],256],120764:[[963],256],120765:[[964],256],120766:[[965],256],120767:[[966],256],120768:[[967],256],120769:[[968],256],120770:[[969],256],120771:[[8706],256],120772:[[1013],256],120773:[[977],256],120774:[[1008],256],120775:[[981],256],120776:[[1009],256],120777:[[982],256],120778:[[988],256],120779:[[989],256],120782:[[48],256],120783:[[49],256],120784:[[50],256],120785:[[51],256],120786:[[52],256],120787:[[53],256],120788:[[54],256],120789:[[55],256],120790:[[56],256],120791:[[57],256],120792:[[48],256],120793:[[49],256],120794:[[50],256],120795:[[51],256],120796:[[52],256],120797:[[53],256],120798:[[54],256],120799:[[55],256],120800:[[56],256],120801:[[57],256],120802:[[48],256],120803:[[49],256],120804:[[50],256],120805:[[51],256],120806:[[52],256],120807:[[53],256],120808:[[54],256],120809:[[55],256],120810:[[56],256],120811:[[57],256],120812:[[48],256],120813:[[49],256],120814:[[50],256],120815:[[51],256],120816:[[52],256],120817:[[53],256],120818:[[54],256],120819:[[55],256],120820:[[56],256],120821:[[57],256],120822:[[48],256],120823:[[49],256],120824:[[50],256],120825:[[51],256],120826:[[52],256],120827:[[53],256],120828:[[54],256],120829:[[55],256],120830:[[56],256],120831:[[57],256]},59392:{125136:[,220],125137:[,220],125138:[,220],125139:[,220],125140:[,220],125141:[,220],125142:[,220]},60928:{126464:[[1575],256],126465:[[1576],256],126466:[[1580],256],126467:[[1583],256],126469:[[1608],256],126470:[[1586],256],126471:[[1581],256],126472:[[1591],256],126473:[[1610],256],126474:[[1603],256],126475:[[1604],256],126476:[[1605],256],126477:[[1606],256],126478:[[1587],256],126479:[[1593],256],126480:[[1601],256],126481:[[1589],256],126482:[[1602],256],126483:[[1585],256],126484:[[1588],256],126485:[[1578],256],126486:[[1579],256],126487:[[1582],256],126488:[[1584],256],126489:[[1590],256],126490:[[1592],256],126491:[[1594],256],126492:[[1646],256],126493:[[1722],256],126494:[[1697],256],126495:[[1647],256],126497:[[1576],256],126498:[[1580],256],126500:[[1607],256],126503:[[1581],256],126505:[[1610],256],126506:[[1603],256],126507:[[1604],256],126508:[[1605],256],126509:[[1606],256],126510:[[1587],256],126511:[[1593],256],126512:[[1601],256],126513:[[1589],256],126514:[[1602],256],126516:[[1588],256],126517:[[1578],256],126518:[[1579],256],126519:[[1582],256],126521:[[1590],256],126523:[[1594],256],126530:[[1580],256],126535:[[1581],256],126537:[[1610],256],126539:[[1604],256],126541:[[1606],256],126542:[[1587],256],126543:[[1593],256],126545:[[1589],256],126546:[[1602],256],126548:[[1588],256],126551:[[1582],256],126553:[[1590],256],126555:[[1594],256],126557:[[1722],256],126559:[[1647],256],126561:[[1576],256],126562:[[1580],256],126564:[[1607],256],126567:[[1581],256],126568:[[1591],256],126569:[[1610],256],126570:[[1603],256],126572:[[1605],256],126573:[[1606],256],126574:[[1587],256],126575:[[1593],256],126576:[[1601],256],126577:[[1589],256],126578:[[1602],256],126580:[[1588],256],126581:[[1578],256],126582:[[1579],256],126583:[[1582],256],126585:[[1590],256],126586:[[1592],256],126587:[[1594],256],126588:[[1646],256],126590:[[1697],256],126592:[[1575],256],126593:[[1576],256],126594:[[1580],256],126595:[[1583],256],126596:[[1607],256],126597:[[1608],256],126598:[[1586],256],126599:[[1581],256],126600:[[1591],256],126601:[[1610],256],126603:[[1604],256],126604:[[1605],256],126605:[[1606],256],126606:[[1587],256],126607:[[1593],256],126608:[[1601],256],126609:[[1589],256],126610:[[1602],256],126611:[[1585],256],126612:[[1588],256],126613:[[1578],256],126614:[[1579],256],126615:[[1582],256],126616:[[1584],256],126617:[[1590],256],126618:[[1592],256],126619:[[1594],256],126625:[[1576],256],126626:[[1580],256],126627:[[1583],256],126629:[[1608],256],126630:[[1586],256],126631:[[1581],256],126632:[[1591],256],126633:[[1610],256],126635:[[1604],256],126636:[[1605],256],126637:[[1606],256],126638:[[1587],256],126639:[[1593],256],126640:[[1601],256],126641:[[1589],256],126642:[[1602],256],126643:[[1585],256],126644:[[1588],256],126645:[[1578],256],126646:[[1579],256],126647:[[1582],256],126648:[[1584],256],126649:[[1590],256],126650:[[1592],256],126651:[[1594],256]},61696:{127232:[[48,46],256],127233:[[48,44],256],127234:[[49,44],256],127235:[[50,44],256],127236:[[51,44],256],127237:[[52,44],256],127238:[[53,44],256],127239:[[54,44],256],127240:[[55,44],256],127241:[[56,44],256],127242:[[57,44],256],127248:[[40,65,41],256],127249:[[40,66,41],256],127250:[[40,67,41],256],127251:[[40,68,41],256],127252:[[40,69,41],256],127253:[[40,70,41],256],127254:[[40,71,41],256],127255:[[40,72,41],256],127256:[[40,73,41],256],127257:[[40,74,41],256],127258:[[40,75,41],256],127259:[[40,76,41],256],127260:[[40,77,41],256],127261:[[40,78,41],256],127262:[[40,79,41],256],127263:[[40,80,41],256],127264:[[40,81,41],256],127265:[[40,82,41],256],127266:[[40,83,41],256],127267:[[40,84,41],256],127268:[[40,85,41],256],127269:[[40,86,41],256],127270:[[40,87,41],256],127271:[[40,88,41],256],127272:[[40,89,41],256],127273:[[40,90,41],256],127274:[[12308,83,12309],256],127275:[[67],256],127276:[[82],256],127277:[[67,68],256],127278:[[87,90],256],127280:[[65],256],127281:[[66],256],127282:[[67],256],127283:[[68],256],127284:[[69],256],127285:[[70],256],127286:[[71],256],127287:[[72],256],127288:[[73],256],127289:[[74],256],127290:[[75],256],127291:[[76],256],127292:[[77],256],127293:[[78],256],127294:[[79],256],127295:[[80],256],127296:[[81],256],127297:[[82],256],127298:[[83],256],127299:[[84],256],127300:[[85],256],127301:[[86],256],127302:[[87],256],127303:[[88],256],127304:[[89],256],127305:[[90],256],127306:[[72,86],256],127307:[[77,86],256],127308:[[83,68],256],127309:[[83,83],256],127310:[[80,80,86],256],127311:[[87,67],256],127338:[[77,67],256],127339:[[77,68],256],127376:[[68,74],256]},61952:{127488:[[12411,12363],256],127489:[[12467,12467],256],127490:[[12469],256],127504:[[25163],256],127505:[[23383],256],127506:[[21452],256],127507:[[12487],256],127508:[[20108],256],127509:[[22810],256],127510:[[35299],256],127511:[[22825],256],127512:[[20132],256],127513:[[26144],256],127514:[[28961],256],127515:[[26009],256],127516:[[21069],256],127517:[[24460],256],127518:[[20877],256],127519:[[26032],256],127520:[[21021],256],127521:[[32066],256],127522:[[29983],256],127523:[[36009],256],127524:[[22768],256],127525:[[21561],256],127526:[[28436],256],127527:[[25237],256],127528:[[25429],256],127529:[[19968],256],127530:[[19977],256],127531:[[36938],256],127532:[[24038],256],127533:[[20013],256],127534:[[21491],256],127535:[[25351],256],127536:[[36208],256],127537:[[25171],256],127538:[[31105],256],127539:[[31354],256],127540:[[21512],256],127541:[[28288],256],127542:[[26377],256],127543:[[26376],256],127544:[[30003],256],127545:[[21106],256],127546:[[21942],256],127552:[[12308,26412,12309],256],127553:[[12308,19977,12309],256],127554:[[12308,20108,12309],256],127555:[[12308,23433,12309],256],127556:[[12308,28857,12309],256],127557:[[12308,25171,12309],256],127558:[[12308,30423,12309],256],127559:[[12308,21213,12309],256],127560:[[12308,25943,12309],256],127568:[[24471],256],127569:[[21487],256]},63488:{194560:[[20029]],194561:[[20024]],194562:[[20033]],194563:[[131362]],194564:[[20320]],194565:[[20398]],194566:[[20411]],194567:[[20482]],194568:[[20602]],194569:[[20633]],194570:[[20711]],194571:[[20687]],194572:[[13470]],194573:[[132666]],194574:[[20813]],194575:[[20820]],194576:[[20836]],194577:[[20855]],194578:[[132380]],194579:[[13497]],194580:[[20839]],194581:[[20877]],194582:[[132427]],194583:[[20887]],194584:[[20900]],194585:[[20172]],194586:[[20908]],194587:[[20917]],194588:[[168415]],194589:[[20981]],194590:[[20995]],194591:[[13535]],194592:[[21051]],194593:[[21062]],194594:[[21106]],194595:[[21111]],194596:[[13589]],194597:[[21191]],194598:[[21193]],194599:[[21220]],194600:[[21242]],194601:[[21253]],194602:[[21254]],194603:[[21271]],194604:[[21321]],194605:[[21329]],194606:[[21338]],194607:[[21363]],194608:[[21373]],194609:[[21375]],194610:[[21375]],194611:[[21375]],194612:[[133676]],194613:[[28784]],194614:[[21450]],194615:[[21471]],194616:[[133987]],194617:[[21483]],194618:[[21489]],194619:[[21510]],194620:[[21662]],194621:[[21560]],194622:[[21576]],194623:[[21608]],194624:[[21666]],194625:[[21750]],194626:[[21776]],194627:[[21843]],194628:[[21859]],194629:[[21892]],194630:[[21892]],194631:[[21913]],194632:[[21931]],194633:[[21939]],194634:[[21954]],194635:[[22294]],194636:[[22022]],194637:[[22295]],194638:[[22097]],194639:[[22132]],194640:[[20999]],194641:[[22766]],194642:[[22478]],194643:[[22516]],194644:[[22541]],194645:[[22411]],194646:[[22578]],194647:[[22577]],194648:[[22700]],194649:[[136420]],194650:[[22770]],194651:[[22775]],194652:[[22790]],194653:[[22810]],194654:[[22818]],194655:[[22882]],194656:[[136872]],194657:[[136938]],194658:[[23020]],194659:[[23067]],194660:[[23079]],194661:[[23e3]],194662:[[23142]],194663:[[14062]],194664:[[14076]],194665:[[23304]],194666:[[23358]],194667:[[23358]],194668:[[137672]],194669:[[23491]],194670:[[23512]],194671:[[23527]],194672:[[23539]],194673:[[138008]],194674:[[23551]],194675:[[23558]],194676:[[24403]],194677:[[23586]],194678:[[14209]],194679:[[23648]],194680:[[23662]],194681:[[23744]],194682:[[23693]],194683:[[138724]],194684:[[23875]],194685:[[138726]],194686:[[23918]],194687:[[23915]],194688:[[23932]],194689:[[24033]],194690:[[24034]],194691:[[14383]],194692:[[24061]],194693:[[24104]],194694:[[24125]],194695:[[24169]],194696:[[14434]],194697:[[139651]],194698:[[14460]],194699:[[24240]],194700:[[24243]],194701:[[24246]],194702:[[24266]],194703:[[172946]],194704:[[24318]],194705:[[140081]],194706:[[140081]],194707:[[33281]],194708:[[24354]],194709:[[24354]],194710:[[14535]],194711:[[144056]],194712:[[156122]],194713:[[24418]],194714:[[24427]],194715:[[14563]],194716:[[24474]],194717:[[24525]],194718:[[24535]],194719:[[24569]],194720:[[24705]],194721:[[14650]],194722:[[14620]],194723:[[24724]],194724:[[141012]],194725:[[24775]],194726:[[24904]],194727:[[24908]],194728:[[24910]],194729:[[24908]],194730:[[24954]],194731:[[24974]],194732:[[25010]],194733:[[24996]],194734:[[25007]],194735:[[25054]],194736:[[25074]],194737:[[25078]],194738:[[25104]],194739:[[25115]],194740:[[25181]],194741:[[25265]],194742:[[25300]],194743:[[25424]],194744:[[142092]],194745:[[25405]],194746:[[25340]],194747:[[25448]],194748:[[25475]],194749:[[25572]],194750:[[142321]],194751:[[25634]],194752:[[25541]],194753:[[25513]],194754:[[14894]],194755:[[25705]],194756:[[25726]],194757:[[25757]],194758:[[25719]],194759:[[14956]],194760:[[25935]],194761:[[25964]],194762:[[143370]],194763:[[26083]],194764:[[26360]],194765:[[26185]],194766:[[15129]],194767:[[26257]],194768:[[15112]],194769:[[15076]],194770:[[20882]],194771:[[20885]],194772:[[26368]],194773:[[26268]],194774:[[32941]],194775:[[17369]],194776:[[26391]],194777:[[26395]],194778:[[26401]],194779:[[26462]],194780:[[26451]],194781:[[144323]],194782:[[15177]],194783:[[26618]],194784:[[26501]],194785:[[26706]],194786:[[26757]],194787:[[144493]],194788:[[26766]],194789:[[26655]],194790:[[26900]],194791:[[15261]],194792:[[26946]],194793:[[27043]],194794:[[27114]],194795:[[27304]],194796:[[145059]],194797:[[27355]],194798:[[15384]],194799:[[27425]],194800:[[145575]],194801:[[27476]],194802:[[15438]],194803:[[27506]],194804:[[27551]],194805:[[27578]],194806:[[27579]],194807:[[146061]],194808:[[138507]],194809:[[146170]],194810:[[27726]],194811:[[146620]],194812:[[27839]],194813:[[27853]],194814:[[27751]],194815:[[27926]]},63744:{63744:[[35912]],63745:[[26356]],63746:[[36554]],63747:[[36040]],63748:[[28369]],63749:[[20018]],63750:[[21477]],63751:[[40860]],63752:[[40860]],63753:[[22865]],63754:[[37329]],63755:[[21895]],63756:[[22856]],63757:[[25078]],63758:[[30313]],63759:[[32645]],63760:[[34367]],63761:[[34746]],63762:[[35064]],63763:[[37007]],63764:[[27138]],63765:[[27931]],63766:[[28889]],63767:[[29662]],63768:[[33853]],63769:[[37226]],63770:[[39409]],63771:[[20098]],63772:[[21365]],63773:[[27396]],63774:[[29211]],63775:[[34349]],63776:[[40478]],63777:[[23888]],63778:[[28651]],63779:[[34253]],63780:[[35172]],63781:[[25289]],63782:[[33240]],63783:[[34847]],63784:[[24266]],63785:[[26391]],63786:[[28010]],63787:[[29436]],63788:[[37070]],63789:[[20358]],63790:[[20919]],63791:[[21214]],63792:[[25796]],63793:[[27347]],63794:[[29200]],63795:[[30439]],63796:[[32769]],63797:[[34310]],63798:[[34396]],63799:[[36335]],63800:[[38706]],63801:[[39791]],63802:[[40442]],63803:[[30860]],63804:[[31103]],63805:[[32160]],63806:[[33737]],63807:[[37636]],63808:[[40575]],63809:[[35542]],63810:[[22751]],63811:[[24324]],63812:[[31840]],63813:[[32894]],63814:[[29282]],63815:[[30922]],63816:[[36034]],63817:[[38647]],63818:[[22744]],63819:[[23650]],63820:[[27155]],63821:[[28122]],63822:[[28431]],63823:[[32047]],63824:[[32311]],63825:[[38475]],63826:[[21202]],63827:[[32907]],63828:[[20956]],63829:[[20940]],63830:[[31260]],63831:[[32190]],63832:[[33777]],63833:[[38517]],63834:[[35712]],63835:[[25295]],63836:[[27138]],63837:[[35582]],63838:[[20025]],63839:[[23527]],63840:[[24594]],63841:[[29575]],63842:[[30064]],63843:[[21271]],63844:[[30971]],63845:[[20415]],63846:[[24489]],63847:[[19981]],63848:[[27852]],63849:[[25976]],63850:[[32034]],63851:[[21443]],63852:[[22622]],63853:[[30465]],63854:[[33865]],63855:[[35498]],63856:[[27578]],63857:[[36784]],63858:[[27784]],63859:[[25342]],63860:[[33509]],63861:[[25504]],63862:[[30053]],63863:[[20142]],63864:[[20841]],63865:[[20937]],63866:[[26753]],63867:[[31975]],63868:[[33391]],63869:[[35538]],63870:[[37327]],63871:[[21237]],63872:[[21570]],63873:[[22899]],63874:[[24300]],63875:[[26053]],63876:[[28670]],63877:[[31018]],63878:[[38317]],63879:[[39530]],63880:[[40599]],63881:[[40654]],63882:[[21147]],63883:[[26310]],63884:[[27511]],63885:[[36706]],63886:[[24180]],63887:[[24976]],63888:[[25088]],63889:[[25754]],63890:[[28451]],63891:[[29001]],63892:[[29833]],63893:[[31178]],63894:[[32244]],63895:[[32879]],63896:[[36646]],63897:[[34030]],63898:[[36899]],63899:[[37706]],63900:[[21015]],63901:[[21155]],63902:[[21693]],63903:[[28872]],63904:[[35010]],63905:[[35498]],63906:[[24265]],63907:[[24565]],63908:[[25467]],63909:[[27566]],63910:[[31806]],63911:[[29557]],63912:[[20196]],63913:[[22265]],63914:[[23527]],63915:[[23994]],63916:[[24604]],63917:[[29618]],63918:[[29801]],63919:[[32666]],63920:[[32838]],63921:[[37428]],63922:[[38646]],63923:[[38728]],63924:[[38936]],63925:[[20363]],63926:[[31150]],63927:[[37300]],63928:[[38584]],63929:[[24801]],63930:[[20102]],63931:[[20698]],63932:[[23534]],63933:[[23615]],63934:[[26009]],63935:[[27138]],63936:[[29134]],63937:[[30274]],63938:[[34044]],63939:[[36988]],63940:[[40845]],63941:[[26248]],63942:[[38446]],63943:[[21129]],63944:[[26491]],63945:[[26611]],63946:[[27969]],63947:[[28316]],63948:[[29705]],63949:[[30041]],63950:[[30827]],63951:[[32016]],63952:[[39006]],63953:[[20845]],63954:[[25134]],63955:[[38520]],63956:[[20523]],63957:[[23833]],63958:[[28138]],63959:[[36650]],63960:[[24459]],63961:[[24900]],63962:[[26647]],63963:[[29575]],63964:[[38534]],63965:[[21033]],63966:[[21519]],63967:[[23653]],63968:[[26131]],63969:[[26446]],63970:[[26792]],63971:[[27877]],63972:[[29702]],63973:[[30178]],63974:[[32633]],63975:[[35023]],63976:[[35041]],63977:[[37324]],63978:[[38626]],63979:[[21311]],63980:[[28346]],63981:[[21533]],63982:[[29136]],63983:[[29848]],63984:[[34298]],63985:[[38563]],63986:[[40023]],63987:[[40607]],63988:[[26519]],63989:[[28107]],63990:[[33256]],63991:[[31435]],63992:[[31520]],63993:[[31890]],63994:[[29376]],63995:[[28825]],63996:[[35672]],63997:[[20160]],63998:[[33590]],63999:[[21050]],194816:[[27966]],194817:[[28023]],194818:[[27969]],194819:[[28009]],194820:[[28024]],194821:[[28037]],194822:[[146718]],194823:[[27956]],194824:[[28207]],194825:[[28270]],194826:[[15667]],194827:[[28363]],194828:[[28359]],194829:[[147153]],194830:[[28153]],194831:[[28526]],194832:[[147294]],194833:[[147342]],194834:[[28614]],194835:[[28729]],194836:[[28702]],194837:[[28699]],194838:[[15766]],194839:[[28746]],194840:[[28797]],194841:[[28791]],194842:[[28845]],194843:[[132389]],194844:[[28997]],194845:[[148067]],194846:[[29084]],194847:[[148395]],194848:[[29224]],194849:[[29237]],194850:[[29264]],194851:[[149e3]],194852:[[29312]],194853:[[29333]],194854:[[149301]],194855:[[149524]],194856:[[29562]],194857:[[29579]],194858:[[16044]],194859:[[29605]],194860:[[16056]],194861:[[16056]],194862:[[29767]],194863:[[29788]],194864:[[29809]],194865:[[29829]],194866:[[29898]],194867:[[16155]],194868:[[29988]],194869:[[150582]],194870:[[30014]],194871:[[150674]],194872:[[30064]],194873:[[139679]],194874:[[30224]],194875:[[151457]],194876:[[151480]],194877:[[151620]],194878:[[16380]],194879:[[16392]],194880:[[30452]],194881:[[151795]],194882:[[151794]],194883:[[151833]],194884:[[151859]],194885:[[30494]],194886:[[30495]],194887:[[30495]],194888:[[30538]],194889:[[16441]],194890:[[30603]],194891:[[16454]],194892:[[16534]],194893:[[152605]],194894:[[30798]],194895:[[30860]],194896:[[30924]],194897:[[16611]],194898:[[153126]],194899:[[31062]],194900:[[153242]],194901:[[153285]],194902:[[31119]],194903:[[31211]],194904:[[16687]],194905:[[31296]],194906:[[31306]],194907:[[31311]],194908:[[153980]],194909:[[154279]],194910:[[154279]],194911:[[31470]],194912:[[16898]],194913:[[154539]],194914:[[31686]],194915:[[31689]],194916:[[16935]],194917:[[154752]],194918:[[31954]],194919:[[17056]],194920:[[31976]],194921:[[31971]],194922:[[32e3]],194923:[[155526]],194924:[[32099]],194925:[[17153]],194926:[[32199]],194927:[[32258]],194928:[[32325]],194929:[[17204]],194930:[[156200]],194931:[[156231]],194932:[[17241]],194933:[[156377]],194934:[[32634]],194935:[[156478]],194936:[[32661]],194937:[[32762]],194938:[[32773]],194939:[[156890]],194940:[[156963]],194941:[[32864]],194942:[[157096]],194943:[[32880]],194944:[[144223]],194945:[[17365]],194946:[[32946]],194947:[[33027]],194948:[[17419]],194949:[[33086]],194950:[[23221]],194951:[[157607]],194952:[[157621]],194953:[[144275]],194954:[[144284]],194955:[[33281]],194956:[[33284]],194957:[[36766]],194958:[[17515]],194959:[[33425]],194960:[[33419]],194961:[[33437]],194962:[[21171]],194963:[[33457]],194964:[[33459]],194965:[[33469]],194966:[[33510]],194967:[[158524]],194968:[[33509]],194969:[[33565]],194970:[[33635]],194971:[[33709]],194972:[[33571]],194973:[[33725]],194974:[[33767]],194975:[[33879]],194976:[[33619]],194977:[[33738]],194978:[[33740]],194979:[[33756]],194980:[[158774]],194981:[[159083]],194982:[[158933]],194983:[[17707]],194984:[[34033]],194985:[[34035]],194986:[[34070]],194987:[[160714]],194988:[[34148]],194989:[[159532]],194990:[[17757]],194991:[[17761]],194992:[[159665]],194993:[[159954]],194994:[[17771]],194995:[[34384]],194996:[[34396]],194997:[[34407]],194998:[[34409]],194999:[[34473]],195e3:[[34440]],195001:[[34574]],195002:[[34530]],195003:[[34681]],195004:[[34600]],195005:[[34667]],195006:[[34694]],195007:[[17879]],195008:[[34785]],195009:[[34817]],195010:[[17913]],195011:[[34912]],195012:[[34915]],195013:[[161383]],195014:[[35031]],195015:[[35038]],195016:[[17973]],195017:[[35066]],195018:[[13499]],195019:[[161966]],195020:[[162150]],195021:[[18110]],195022:[[18119]],195023:[[35488]],195024:[[35565]],195025:[[35722]],195026:[[35925]],195027:[[162984]],195028:[[36011]],195029:[[36033]],195030:[[36123]],195031:[[36215]],195032:[[163631]],195033:[[133124]],195034:[[36299]],195035:[[36284]],195036:[[36336]],195037:[[133342]],195038:[[36564]],195039:[[36664]],195040:[[165330]],195041:[[165357]],195042:[[37012]],195043:[[37105]],195044:[[37137]],195045:[[165678]],195046:[[37147]],195047:[[37432]],195048:[[37591]],195049:[[37592]],195050:[[37500]],195051:[[37881]],195052:[[37909]],195053:[[166906]],195054:[[38283]],195055:[[18837]],195056:[[38327]],195057:[[167287]],195058:[[18918]],195059:[[38595]],195060:[[23986]],195061:[[38691]],195062:[[168261]],195063:[[168474]],195064:[[19054]],195065:[[19062]],195066:[[38880]],195067:[[168970]],195068:[[19122]],195069:[[169110]],195070:[[38923]],195071:[[38923]]},64e3:{64e3:[[20999]],64001:[[24230]],64002:[[25299]],64003:[[31958]],64004:[[23429]],64005:[[27934]],64006:[[26292]],64007:[[36667]],64008:[[34892]],64009:[[38477]],64010:[[35211]],64011:[[24275]],64012:[[20800]],64013:[[21952]],64016:[[22618]],64018:[[26228]],64021:[[20958]],64022:[[29482]],64023:[[30410]],64024:[[31036]],64025:[[31070]],64026:[[31077]],64027:[[31119]],64028:[[38742]],64029:[[31934]],64030:[[32701]],64032:[[34322]],64034:[[35576]],64037:[[36920]],64038:[[37117]],64042:[[39151]],64043:[[39164]],64044:[[39208]],64045:[[40372]],64046:[[37086]],64047:[[38583]],64048:[[20398]],64049:[[20711]],64050:[[20813]],64051:[[21193]],64052:[[21220]],64053:[[21329]],64054:[[21917]],64055:[[22022]],64056:[[22120]],64057:[[22592]],64058:[[22696]],64059:[[23652]],64060:[[23662]],64061:[[24724]],64062:[[24936]],64063:[[24974]],64064:[[25074]],64065:[[25935]],64066:[[26082]],64067:[[26257]],64068:[[26757]],64069:[[28023]],64070:[[28186]],64071:[[28450]],64072:[[29038]],64073:[[29227]],64074:[[29730]],64075:[[30865]],64076:[[31038]],64077:[[31049]],64078:[[31048]],64079:[[31056]],64080:[[31062]],64081:[[31069]],64082:[[31117]],64083:[[31118]],64084:[[31296]],64085:[[31361]],64086:[[31680]],64087:[[32244]],64088:[[32265]],64089:[[32321]],64090:[[32626]],64091:[[32773]],64092:[[33261]],64093:[[33401]],64094:[[33401]],64095:[[33879]],64096:[[35088]],64097:[[35222]],64098:[[35585]],64099:[[35641]],64100:[[36051]],64101:[[36104]],64102:[[36790]],64103:[[36920]],64104:[[38627]],64105:[[38911]],64106:[[38971]],64107:[[24693]],64108:[[148206]],64109:[[33304]],64112:[[20006]],64113:[[20917]],64114:[[20840]],64115:[[20352]],64116:[[20805]],64117:[[20864]],64118:[[21191]],64119:[[21242]],64120:[[21917]],64121:[[21845]],64122:[[21913]],64123:[[21986]],64124:[[22618]],64125:[[22707]],64126:[[22852]],64127:[[22868]],64128:[[23138]],64129:[[23336]],64130:[[24274]],64131:[[24281]],64132:[[24425]],64133:[[24493]],64134:[[24792]],64135:[[24910]],64136:[[24840]],64137:[[24974]],64138:[[24928]],64139:[[25074]],64140:[[25140]],64141:[[25540]],64142:[[25628]],64143:[[25682]],64144:[[25942]],64145:[[26228]],64146:[[26391]],64147:[[26395]],64148:[[26454]],64149:[[27513]],64150:[[27578]],64151:[[27969]],64152:[[28379]],64153:[[28363]],64154:[[28450]],64155:[[28702]],64156:[[29038]],64157:[[30631]],64158:[[29237]],64159:[[29359]],64160:[[29482]],64161:[[29809]],64162:[[29958]],64163:[[30011]],64164:[[30237]],64165:[[30239]],64166:[[30410]],64167:[[30427]],64168:[[30452]],64169:[[30538]],64170:[[30528]],64171:[[30924]],64172:[[31409]],64173:[[31680]],64174:[[31867]],64175:[[32091]],64176:[[32244]],64177:[[32574]],64178:[[32773]],64179:[[33618]],64180:[[33775]],64181:[[34681]],64182:[[35137]],64183:[[35206]],64184:[[35222]],64185:[[35519]],64186:[[35576]],64187:[[35531]],64188:[[35585]],64189:[[35582]],64190:[[35565]],64191:[[35641]],64192:[[35722]],64193:[[36104]],64194:[[36664]],64195:[[36978]],64196:[[37273]],64197:[[37494]],64198:[[38524]],64199:[[38627]],64200:[[38742]],64201:[[38875]],64202:[[38911]],64203:[[38923]],64204:[[38971]],64205:[[39698]],64206:[[40860]],64207:[[141386]],64208:[[141380]],64209:[[144341]],64210:[[15261]],64211:[[16408]],64212:[[16441]],64213:[[152137]],64214:[[154832]],64215:[[163539]],64216:[[40771]],64217:[[40846]],195072:[[38953]],195073:[[169398]],195074:[[39138]],195075:[[19251]],195076:[[39209]],195077:[[39335]],195078:[[39362]],195079:[[39422]],195080:[[19406]],195081:[[170800]],195082:[[39698]],195083:[[4e4]],195084:[[40189]],195085:[[19662]],195086:[[19693]],195087:[[40295]],195088:[[172238]],195089:[[19704]],195090:[[172293]],195091:[[172558]],195092:[[172689]],195093:[[40635]],195094:[[19798]],195095:[[40697]],195096:[[40702]],195097:[[40709]],195098:[[40719]],195099:[[40726]],195100:[[40763]],195101:[[173568]]},64256:{64256:[[102,102],256],64257:[[102,105],256],64258:[[102,108],256],64259:[[102,102,105],256],64260:[[102,102,108],256],64261:[[383,116],256],64262:[[115,116],256],64275:[[1396,1398],256],64276:[[1396,1381],256],64277:[[1396,1387],256],64278:[[1406,1398],256],64279:[[1396,1389],256],64285:[[1497,1460],512],64286:[,26],64287:[[1522,1463],512],64288:[[1506],256],64289:[[1488],256],64290:[[1491],256],64291:[[1492],256],64292:[[1499],256],64293:[[1500],256],64294:[[1501],256],64295:[[1512],256],64296:[[1514],256],64297:[[43],256],64298:[[1513,1473],512],64299:[[1513,1474],512],64300:[[64329,1473],512],64301:[[64329,1474],512],64302:[[1488,1463],512],64303:[[1488,1464],512],64304:[[1488,1468],512],64305:[[1489,1468],512],64306:[[1490,1468],512],64307:[[1491,1468],512],64308:[[1492,1468],512],64309:[[1493,1468],512],64310:[[1494,1468],512],64312:[[1496,1468],512],64313:[[1497,1468],512],64314:[[1498,1468],512],64315:[[1499,1468],512],64316:[[1500,1468],512],64318:[[1502,1468],512],64320:[[1504,1468],512],64321:[[1505,1468],512],64323:[[1507,1468],512],64324:[[1508,1468],512],64326:[[1510,1468],512],64327:[[1511,1468],512],64328:[[1512,1468],512],64329:[[1513,1468],512],64330:[[1514,1468],512],64331:[[1493,1465],512],64332:[[1489,1471],512],64333:[[1499,1471],512],64334:[[1508,1471],512],64335:[[1488,1500],256],64336:[[1649],256],64337:[[1649],256],64338:[[1659],256],64339:[[1659],256],64340:[[1659],256],64341:[[1659],256],64342:[[1662],256],64343:[[1662],256],64344:[[1662],256],64345:[[1662],256],64346:[[1664],256],64347:[[1664],256],64348:[[1664],256],64349:[[1664],256],64350:[[1658],256],64351:[[1658],256],64352:[[1658],256],64353:[[1658],256],64354:[[1663],256],64355:[[1663],256],64356:[[1663],256],64357:[[1663],256],64358:[[1657],256],64359:[[1657],256],64360:[[1657],256],64361:[[1657],256],64362:[[1700],256],64363:[[1700],256],64364:[[1700],256],64365:[[1700],256],64366:[[1702],256],64367:[[1702],256],64368:[[1702],256],64369:[[1702],256],64370:[[1668],256],64371:[[1668],256],64372:[[1668],256],64373:[[1668],256],64374:[[1667],256],64375:[[1667],256],64376:[[1667],256],64377:[[1667],256],64378:[[1670],256],64379:[[1670],256],64380:[[1670],256],64381:[[1670],256],64382:[[1671],256],64383:[[1671],256],64384:[[1671],256],64385:[[1671],256],64386:[[1677],256],64387:[[1677],256],64388:[[1676],256],64389:[[1676],256],64390:[[1678],256],64391:[[1678],256],64392:[[1672],256],64393:[[1672],256],64394:[[1688],256],64395:[[1688],256],64396:[[1681],256],64397:[[1681],256],64398:[[1705],256],64399:[[1705],256],64400:[[1705],256],64401:[[1705],256],64402:[[1711],256],64403:[[1711],256],64404:[[1711],256],64405:[[1711],256],64406:[[1715],256],64407:[[1715],256],64408:[[1715],256],64409:[[1715],256],64410:[[1713],256],64411:[[1713],256],64412:[[1713],256],64413:[[1713],256],64414:[[1722],256],64415:[[1722],256],64416:[[1723],256],64417:[[1723],256],64418:[[1723],256],64419:[[1723],256],64420:[[1728],256],64421:[[1728],256],64422:[[1729],256],64423:[[1729],256],64424:[[1729],256],64425:[[1729],256],64426:[[1726],256],64427:[[1726],256],64428:[[1726],256],64429:[[1726],256],64430:[[1746],256],64431:[[1746],256],64432:[[1747],256],64433:[[1747],256],64467:[[1709],256],64468:[[1709],256],64469:[[1709],256],64470:[[1709],256],64471:[[1735],256],64472:[[1735],256],64473:[[1734],256],64474:[[1734],256],64475:[[1736],256],64476:[[1736],256],64477:[[1655],256],64478:[[1739],256],64479:[[1739],256],64480:[[1733],256],64481:[[1733],256],64482:[[1737],256],64483:[[1737],256],64484:[[1744],256],64485:[[1744],256],64486:[[1744],256],64487:[[1744],256],64488:[[1609],256],64489:[[1609],256],64490:[[1574,1575],256],64491:[[1574,1575],256],64492:[[1574,1749],256],64493:[[1574,1749],256],64494:[[1574,1608],256],64495:[[1574,1608],256],64496:[[1574,1735],256],64497:[[1574,1735],256],64498:[[1574,1734],256],64499:[[1574,1734],256],64500:[[1574,1736],256],64501:[[1574,1736],256],64502:[[1574,1744],256],64503:[[1574,1744],256],64504:[[1574,1744],256],64505:[[1574,1609],256],64506:[[1574,1609],256],64507:[[1574,1609],256],64508:[[1740],256],64509:[[1740],256],64510:[[1740],256],64511:[[1740],256]},64512:{64512:[[1574,1580],256],64513:[[1574,1581],256],64514:[[1574,1605],256],64515:[[1574,1609],256],64516:[[1574,1610],256],64517:[[1576,1580],256],64518:[[1576,1581],256],64519:[[1576,1582],256],64520:[[1576,1605],256],64521:[[1576,1609],256],64522:[[1576,1610],256],64523:[[1578,1580],256],64524:[[1578,1581],256],64525:[[1578,1582],256],64526:[[1578,1605],256],64527:[[1578,1609],256],64528:[[1578,1610],256],64529:[[1579,1580],256],64530:[[1579,1605],256],64531:[[1579,1609],256],64532:[[1579,1610],256],64533:[[1580,1581],256],64534:[[1580,1605],256],64535:[[1581,1580],256],64536:[[1581,1605],256],64537:[[1582,1580],256],64538:[[1582,1581],256],64539:[[1582,1605],256],64540:[[1587,1580],256],64541:[[1587,1581],256],64542:[[1587,1582],256],64543:[[1587,1605],256],64544:[[1589,1581],256],64545:[[1589,1605],256],64546:[[1590,1580],256],64547:[[1590,1581],256],64548:[[1590,1582],256],64549:[[1590,1605],256],64550:[[1591,1581],256],64551:[[1591,1605],256],64552:[[1592,1605],256],64553:[[1593,1580],256],64554:[[1593,1605],256],64555:[[1594,1580],256],64556:[[1594,1605],256],64557:[[1601,1580],256],64558:[[1601,1581],256],64559:[[1601,1582],256],64560:[[1601,1605],256],64561:[[1601,1609],256],64562:[[1601,1610],256],64563:[[1602,1581],256],64564:[[1602,1605],256],64565:[[1602,1609],256],64566:[[1602,1610],256],64567:[[1603,1575],256],64568:[[1603,1580],256],64569:[[1603,1581],256],64570:[[1603,1582],256],64571:[[1603,1604],256],64572:[[1603,1605],256],64573:[[1603,1609],256],64574:[[1603,1610],256],64575:[[1604,1580],256],64576:[[1604,1581],256],64577:[[1604,1582],256],64578:[[1604,1605],256],64579:[[1604,1609],256],64580:[[1604,1610],256],64581:[[1605,1580],256],64582:[[1605,1581],256],64583:[[1605,1582],256],64584:[[1605,1605],256],64585:[[1605,1609],256],64586:[[1605,1610],256],64587:[[1606,1580],256],64588:[[1606,1581],256],64589:[[1606,1582],256],64590:[[1606,1605],256],64591:[[1606,1609],256],64592:[[1606,1610],256],64593:[[1607,1580],256],64594:[[1607,1605],256],64595:[[1607,1609],256],64596:[[1607,1610],256],64597:[[1610,1580],256],64598:[[1610,1581],256],64599:[[1610,1582],256],64600:[[1610,1605],256],64601:[[1610,1609],256],64602:[[1610,1610],256],64603:[[1584,1648],256],64604:[[1585,1648],256],64605:[[1609,1648],256],64606:[[32,1612,1617],256],64607:[[32,1613,1617],256],64608:[[32,1614,1617],256],64609:[[32,1615,1617],256],64610:[[32,1616,1617],256],64611:[[32,1617,1648],256],64612:[[1574,1585],256],64613:[[1574,1586],256],64614:[[1574,1605],256],64615:[[1574,1606],256],64616:[[1574,1609],256],64617:[[1574,1610],256],64618:[[1576,1585],256],64619:[[1576,1586],256],64620:[[1576,1605],256],64621:[[1576,1606],256],64622:[[1576,1609],256],64623:[[1576,1610],256],64624:[[1578,1585],256],64625:[[1578,1586],256],64626:[[1578,1605],256],64627:[[1578,1606],256],64628:[[1578,1609],256],64629:[[1578,1610],256],64630:[[1579,1585],256],64631:[[1579,1586],256],64632:[[1579,1605],256],64633:[[1579,1606],256],64634:[[1579,1609],256],64635:[[1579,1610],256],64636:[[1601,1609],256],64637:[[1601,1610],256],64638:[[1602,1609],256],64639:[[1602,1610],256],64640:[[1603,1575],256],64641:[[1603,1604],256],64642:[[1603,1605],256],64643:[[1603,1609],256],64644:[[1603,1610],256],64645:[[1604,1605],256],64646:[[1604,1609],256],64647:[[1604,1610],256],64648:[[1605,1575],256],64649:[[1605,1605],256],64650:[[1606,1585],256],64651:[[1606,1586],256],64652:[[1606,1605],256],64653:[[1606,1606],256],64654:[[1606,1609],256],64655:[[1606,1610],256],64656:[[1609,1648],256],64657:[[1610,1585],256],64658:[[1610,1586],256],64659:[[1610,1605],256],64660:[[1610,1606],256],64661:[[1610,1609],256],64662:[[1610,1610],256],64663:[[1574,1580],256],64664:[[1574,1581],256],64665:[[1574,1582],256],64666:[[1574,1605],256],64667:[[1574,1607],256],64668:[[1576,1580],256],64669:[[1576,1581],256],64670:[[1576,1582],256],64671:[[1576,1605],256],64672:[[1576,1607],256],64673:[[1578,1580],256],64674:[[1578,1581],256],64675:[[1578,1582],256],64676:[[1578,1605],256],64677:[[1578,1607],256],64678:[[1579,1605],256],64679:[[1580,1581],256],64680:[[1580,1605],256],64681:[[1581,1580],256],64682:[[1581,1605],256],64683:[[1582,1580],256],64684:[[1582,1605],256],64685:[[1587,1580],256],64686:[[1587,1581],256],64687:[[1587,1582],256],64688:[[1587,1605],256],64689:[[1589,1581],256],64690:[[1589,1582],256],64691:[[1589,1605],256],64692:[[1590,1580],256],64693:[[1590,1581],256],64694:[[1590,1582],256],64695:[[1590,1605],256],64696:[[1591,1581],256],64697:[[1592,1605],256],64698:[[1593,1580],256],64699:[[1593,1605],256],64700:[[1594,1580],256],64701:[[1594,1605],256],64702:[[1601,1580],256],64703:[[1601,1581],256],64704:[[1601,1582],256],64705:[[1601,1605],256],64706:[[1602,1581],256],64707:[[1602,1605],256],64708:[[1603,1580],256],64709:[[1603,1581],256],64710:[[1603,1582],256],64711:[[1603,1604],256],64712:[[1603,1605],256],64713:[[1604,1580],256],64714:[[1604,1581],256],64715:[[1604,1582],256],64716:[[1604,1605],256],64717:[[1604,1607],256],64718:[[1605,1580],256],64719:[[1605,1581],256],64720:[[1605,1582],256],64721:[[1605,1605],256],64722:[[1606,1580],256],64723:[[1606,1581],256],64724:[[1606,1582],256],64725:[[1606,1605],256],64726:[[1606,1607],256],64727:[[1607,1580],256],64728:[[1607,1605],256],64729:[[1607,1648],256],64730:[[1610,1580],256],64731:[[1610,1581],256],64732:[[1610,1582],256],64733:[[1610,1605],256],64734:[[1610,1607],256],64735:[[1574,1605],256],64736:[[1574,1607],256],64737:[[1576,1605],256],64738:[[1576,1607],256],64739:[[1578,1605],256],64740:[[1578,1607],256],64741:[[1579,1605],256],64742:[[1579,1607],256],64743:[[1587,1605],256],64744:[[1587,1607],256],64745:[[1588,1605],256],64746:[[1588,1607],256],64747:[[1603,1604],256],64748:[[1603,1605],256],64749:[[1604,1605],256],64750:[[1606,1605],256],64751:[[1606,1607],256],64752:[[1610,1605],256],64753:[[1610,1607],256],64754:[[1600,1614,1617],256],64755:[[1600,1615,1617],256],64756:[[1600,1616,1617],256],64757:[[1591,1609],256],64758:[[1591,1610],256],64759:[[1593,1609],256],64760:[[1593,1610],256],64761:[[1594,1609],256],64762:[[1594,1610],256],64763:[[1587,1609],256],64764:[[1587,1610],256],64765:[[1588,1609],256],64766:[[1588,1610],256],64767:[[1581,1609],256]},64768:{64768:[[1581,1610],256],64769:[[1580,1609],256],64770:[[1580,1610],256],64771:[[1582,1609],256],64772:[[1582,1610],256],64773:[[1589,1609],256],64774:[[1589,1610],256],64775:[[1590,1609],256],64776:[[1590,1610],256],64777:[[1588,1580],256],64778:[[1588,1581],256],64779:[[1588,1582],256],64780:[[1588,1605],256],64781:[[1588,1585],256],64782:[[1587,1585],256],64783:[[1589,1585],256],64784:[[1590,1585],256],64785:[[1591,1609],256],64786:[[1591,1610],256],64787:[[1593,1609],256],64788:[[1593,1610],256],64789:[[1594,1609],256],64790:[[1594,1610],256],64791:[[1587,1609],256],64792:[[1587,1610],256],64793:[[1588,1609],256],64794:[[1588,1610],256],64795:[[1581,1609],256],64796:[[1581,1610],256],64797:[[1580,1609],256],64798:[[1580,1610],256],64799:[[1582,1609],256],64800:[[1582,1610],256],64801:[[1589,1609],256],64802:[[1589,1610],256],64803:[[1590,1609],256],64804:[[1590,1610],256],64805:[[1588,1580],256],64806:[[1588,1581],256],64807:[[1588,1582],256],64808:[[1588,1605],256],64809:[[1588,1585],256],64810:[[1587,1585],256],64811:[[1589,1585],256],64812:[[1590,1585],256],64813:[[1588,1580],256],64814:[[1588,1581],256],64815:[[1588,1582],256],64816:[[1588,1605],256],64817:[[1587,1607],256],64818:[[1588,1607],256],64819:[[1591,1605],256],64820:[[1587,1580],256],64821:[[1587,1581],256],64822:[[1587,1582],256],64823:[[1588,1580],256],64824:[[1588,1581],256],64825:[[1588,1582],256],64826:[[1591,1605],256],64827:[[1592,1605],256],64828:[[1575,1611],256],64829:[[1575,1611],256],64848:[[1578,1580,1605],256],64849:[[1578,1581,1580],256],64850:[[1578,1581,1580],256],64851:[[1578,1581,1605],256],64852:[[1578,1582,1605],256],64853:[[1578,1605,1580],256],64854:[[1578,1605,1581],256],64855:[[1578,1605,1582],256],64856:[[1580,1605,1581],256],64857:[[1580,1605,1581],256],64858:[[1581,1605,1610],256],64859:[[1581,1605,1609],256],64860:[[1587,1581,1580],256],64861:[[1587,1580,1581],256],64862:[[1587,1580,1609],256],64863:[[1587,1605,1581],256],64864:[[1587,1605,1581],256],64865:[[1587,1605,1580],256],64866:[[1587,1605,1605],256],64867:[[1587,1605,1605],256],64868:[[1589,1581,1581],256],64869:[[1589,1581,1581],256],64870:[[1589,1605,1605],256],64871:[[1588,1581,1605],256],64872:[[1588,1581,1605],256],64873:[[1588,1580,1610],256],64874:[[1588,1605,1582],256],64875:[[1588,1605,1582],256],64876:[[1588,1605,1605],256],64877:[[1588,1605,1605],256],64878:[[1590,1581,1609],256],64879:[[1590,1582,1605],256],64880:[[1590,1582,1605],256],64881:[[1591,1605,1581],256],64882:[[1591,1605,1581],256],64883:[[1591,1605,1605],256],64884:[[1591,1605,1610],256],64885:[[1593,1580,1605],256],64886:[[1593,1605,1605],256],64887:[[1593,1605,1605],256],64888:[[1593,1605,1609],256],64889:[[1594,1605,1605],256],64890:[[1594,1605,1610],256],64891:[[1594,1605,1609],256],64892:[[1601,1582,1605],256],64893:[[1601,1582,1605],256],64894:[[1602,1605,1581],256],64895:[[1602,1605,1605],256],64896:[[1604,1581,1605],256],64897:[[1604,1581,1610],256],64898:[[1604,1581,1609],256],64899:[[1604,1580,1580],256],64900:[[1604,1580,1580],256],64901:[[1604,1582,1605],256],64902:[[1604,1582,1605],256],64903:[[1604,1605,1581],256],64904:[[1604,1605,1581],256],64905:[[1605,1581,1580],256],64906:[[1605,1581,1605],256],64907:[[1605,1581,1610],256],64908:[[1605,1580,1581],256],64909:[[1605,1580,1605],256],64910:[[1605,1582,1580],256],64911:[[1605,1582,1605],256],64914:[[1605,1580,1582],256],64915:[[1607,1605,1580],256],64916:[[1607,1605,1605],256],64917:[[1606,1581,1605],256],64918:[[1606,1581,1609],256],64919:[[1606,1580,1605],256],64920:[[1606,1580,1605],256],64921:[[1606,1580,1609],256],64922:[[1606,1605,1610],256],64923:[[1606,1605,1609],256],64924:[[1610,1605,1605],256],64925:[[1610,1605,1605],256],64926:[[1576,1582,1610],256],64927:[[1578,1580,1610],256],64928:[[1578,1580,1609],256],64929:[[1578,1582,1610],256],64930:[[1578,1582,1609],256],64931:[[1578,1605,1610],256],64932:[[1578,1605,1609],256],64933:[[1580,1605,1610],256],64934:[[1580,1581,1609],256],64935:[[1580,1605,1609],256],64936:[[1587,1582,1609],256],64937:[[1589,1581,1610],256],64938:[[1588,1581,1610],256],64939:[[1590,1581,1610],256],64940:[[1604,1580,1610],256],64941:[[1604,1605,1610],256],64942:[[1610,1581,1610],256],64943:[[1610,1580,1610],256],64944:[[1610,1605,1610],256],64945:[[1605,1605,1610],256],64946:[[1602,1605,1610],256],64947:[[1606,1581,1610],256],64948:[[1602,1605,1581],256],64949:[[1604,1581,1605],256],64950:[[1593,1605,1610],256],64951:[[1603,1605,1610],256],64952:[[1606,1580,1581],256],64953:[[1605,1582,1610],256],64954:[[1604,1580,1605],256],64955:[[1603,1605,1605],256],64956:[[1604,1580,1605],256],64957:[[1606,1580,1581],256],64958:[[1580,1581,1610],256],64959:[[1581,1580,1610],256],64960:[[1605,1580,1610],256],64961:[[1601,1605,1610],256],64962:[[1576,1581,1610],256],64963:[[1603,1605,1605],256],64964:[[1593,1580,1605],256],64965:[[1589,1605,1605],256],64966:[[1587,1582,1610],256],64967:[[1606,1580,1610],256],65008:[[1589,1604,1746],256],65009:[[1602,1604,1746],256],65010:[[1575,1604,1604,1607],256],65011:[[1575,1603,1576,1585],256],65012:[[1605,1581,1605,1583],256],65013:[[1589,1604,1593,1605],256],65014:[[1585,1587,1608,1604],256],65015:[[1593,1604,1610,1607],256],65016:[[1608,1587,1604,1605],256],65017:[[1589,1604,1609],256],65018:[[1589,1604,1609,32,1575,1604,1604,1607,32,1593,1604,1610,1607,32,1608,1587,1604,1605],256],65019:[[1580,1604,32,1580,1604,1575,1604,1607],256],65020:[[1585,1740,1575,1604],256]},65024:{65040:[[44],256],65041:[[12289],256],65042:[[12290],256],65043:[[58],256],65044:[[59],256],65045:[[33],256],65046:[[63],256],65047:[[12310],256],65048:[[12311],256],65049:[[8230],256],65056:[,230],65057:[,230],65058:[,230],65059:[,230],65060:[,230],65061:[,230],65062:[,230],65063:[,220],65064:[,220],65065:[,220],65066:[,220],65067:[,220],65068:[,220],65069:[,220],65072:[[8229],256],65073:[[8212],256],65074:[[8211],256],65075:[[95],256],65076:[[95],256],65077:[[40],256],65078:[[41],256],65079:[[123],256],65080:[[125],256],65081:[[12308],256],65082:[[12309],256],65083:[[12304],256],65084:[[12305],256],65085:[[12298],256],65086:[[12299],256],65087:[[12296],256],65088:[[12297],256],65089:[[12300],256],65090:[[12301],256],65091:[[12302],256],65092:[[12303],256],65095:[[91],256],65096:[[93],256],65097:[[8254],256],65098:[[8254],256],65099:[[8254],256],65100:[[8254],256],65101:[[95],256],65102:[[95],256],65103:[[95],256],65104:[[44],256],65105:[[12289],256],65106:[[46],256],65108:[[59],256],65109:[[58],256],65110:[[63],256],65111:[[33],256],65112:[[8212],256],65113:[[40],256],65114:[[41],256],65115:[[123],256],65116:[[125],256],65117:[[12308],256],65118:[[12309],256],65119:[[35],256],65120:[[38],256],65121:[[42],256],65122:[[43],256],65123:[[45],256],65124:[[60],256],65125:[[62],256],65126:[[61],256],65128:[[92],256],65129:[[36],256],65130:[[37],256],65131:[[64],256],65136:[[32,1611],256],65137:[[1600,1611],256],65138:[[32,1612],256],65140:[[32,1613],256],65142:[[32,1614],256],65143:[[1600,1614],256],65144:[[32,1615],256],65145:[[1600,1615],256],65146:[[32,1616],256],65147:[[1600,1616],256],65148:[[32,1617],256],65149:[[1600,1617],256],65150:[[32,1618],256],65151:[[1600,1618],256],65152:[[1569],256],65153:[[1570],256],65154:[[1570],256],65155:[[1571],256],65156:[[1571],256],65157:[[1572],256],65158:[[1572],256],65159:[[1573],256],65160:[[1573],256],65161:[[1574],256],65162:[[1574],256],65163:[[1574],256],65164:[[1574],256],65165:[[1575],256],65166:[[1575],256],65167:[[1576],256],65168:[[1576],256],65169:[[1576],256],65170:[[1576],256],65171:[[1577],256],65172:[[1577],256],65173:[[1578],256],65174:[[1578],256],65175:[[1578],256],65176:[[1578],256],65177:[[1579],256],65178:[[1579],256],65179:[[1579],256],65180:[[1579],256],65181:[[1580],256],65182:[[1580],256],65183:[[1580],256],65184:[[1580],256],65185:[[1581],256],65186:[[1581],256],65187:[[1581],256],65188:[[1581],256],65189:[[1582],256],65190:[[1582],256],65191:[[1582],256],65192:[[1582],256],65193:[[1583],256],65194:[[1583],256],65195:[[1584],256],65196:[[1584],256],65197:[[1585],256],65198:[[1585],256],65199:[[1586],256],65200:[[1586],256],65201:[[1587],256],65202:[[1587],256],65203:[[1587],256],65204:[[1587],256],65205:[[1588],256],65206:[[1588],256],65207:[[1588],256],65208:[[1588],256],65209:[[1589],256],65210:[[1589],256],65211:[[1589],256],65212:[[1589],256],65213:[[1590],256],65214:[[1590],256],65215:[[1590],256],65216:[[1590],256],65217:[[1591],256],65218:[[1591],256],65219:[[1591],256],65220:[[1591],256],65221:[[1592],256],65222:[[1592],256],65223:[[1592],256],65224:[[1592],256],65225:[[1593],256],65226:[[1593],256],65227:[[1593],256],65228:[[1593],256],65229:[[1594],256],65230:[[1594],256],65231:[[1594],256],65232:[[1594],256],65233:[[1601],256],65234:[[1601],256],65235:[[1601],256],65236:[[1601],256],65237:[[1602],256],65238:[[1602],256],65239:[[1602],256],65240:[[1602],256],65241:[[1603],256],65242:[[1603],256],65243:[[1603],256],65244:[[1603],256],65245:[[1604],256],65246:[[1604],256],65247:[[1604],256],65248:[[1604],256],65249:[[1605],256],65250:[[1605],256],65251:[[1605],256],65252:[[1605],256],65253:[[1606],256],65254:[[1606],256],65255:[[1606],256],65256:[[1606],256],65257:[[1607],256],65258:[[1607],256],65259:[[1607],256],65260:[[1607],256],65261:[[1608],256],65262:[[1608],256],65263:[[1609],256],65264:[[1609],256],65265:[[1610],256],65266:[[1610],256],65267:[[1610],256],65268:[[1610],256],65269:[[1604,1570],256],65270:[[1604,1570],256],65271:[[1604,1571],256],65272:[[1604,1571],256],65273:[[1604,1573],256],65274:[[1604,1573],256],65275:[[1604,1575],256],65276:[[1604,1575],256]},65280:{65281:[[33],256],65282:[[34],256],65283:[[35],256],65284:[[36],256],65285:[[37],256],65286:[[38],256],65287:[[39],256],65288:[[40],256],65289:[[41],256],65290:[[42],256],65291:[[43],256],65292:[[44],256],65293:[[45],256],65294:[[46],256],65295:[[47],256],65296:[[48],256],65297:[[49],256],65298:[[50],256],65299:[[51],256],65300:[[52],256],65301:[[53],256],65302:[[54],256],65303:[[55],256],65304:[[56],256],65305:[[57],256],65306:[[58],256],65307:[[59],256],65308:[[60],256],65309:[[61],256],65310:[[62],256],65311:[[63],256],65312:[[64],256],65313:[[65],256],65314:[[66],256],65315:[[67],256],65316:[[68],256],65317:[[69],256],65318:[[70],256],65319:[[71],256],65320:[[72],256],65321:[[73],256],65322:[[74],256],65323:[[75],256],65324:[[76],256],65325:[[77],256],65326:[[78],256],65327:[[79],256],65328:[[80],256],65329:[[81],256],65330:[[82],256],65331:[[83],256],65332:[[84],256],65333:[[85],256],65334:[[86],256],65335:[[87],256],65336:[[88],256],65337:[[89],256],65338:[[90],256],65339:[[91],256],65340:[[92],256],65341:[[93],256],65342:[[94],256],65343:[[95],256],65344:[[96],256],65345:[[97],256],65346:[[98],256],65347:[[99],256],65348:[[100],256],65349:[[101],256],65350:[[102],256],65351:[[103],256],65352:[[104],256],65353:[[105],256],65354:[[106],256],65355:[[107],256],65356:[[108],256],65357:[[109],256],65358:[[110],256],65359:[[111],256],65360:[[112],256],65361:[[113],256],65362:[[114],256],65363:[[115],256],65364:[[116],256],65365:[[117],256],65366:[[118],256],65367:[[119],256],65368:[[120],256],65369:[[121],256],65370:[[122],256],65371:[[123],256],65372:[[124],256],65373:[[125],256],65374:[[126],256],65375:[[10629],256],65376:[[10630],256],65377:[[12290],256],65378:[[12300],256],65379:[[12301],256],65380:[[12289],256],65381:[[12539],256],65382:[[12530],256],65383:[[12449],256],65384:[[12451],256],65385:[[12453],256],65386:[[12455],256],65387:[[12457],256],65388:[[12515],256],65389:[[12517],256],65390:[[12519],256],65391:[[12483],256],65392:[[12540],256],65393:[[12450],256],65394:[[12452],256],65395:[[12454],256],65396:[[12456],256],65397:[[12458],256],65398:[[12459],256],65399:[[12461],256],65400:[[12463],256],65401:[[12465],256],65402:[[12467],256],65403:[[12469],256],65404:[[12471],256],65405:[[12473],256],65406:[[12475],256],65407:[[12477],256],65408:[[12479],256],65409:[[12481],256],65410:[[12484],256],65411:[[12486],256],65412:[[12488],256],65413:[[12490],256],65414:[[12491],256],65415:[[12492],256],65416:[[12493],256],65417:[[12494],256],65418:[[12495],256],65419:[[12498],256],65420:[[12501],256],65421:[[12504],256],65422:[[12507],256],65423:[[12510],256],65424:[[12511],256],65425:[[12512],256],65426:[[12513],256],65427:[[12514],256],65428:[[12516],256],65429:[[12518],256],65430:[[12520],256],65431:[[12521],256],65432:[[12522],256],65433:[[12523],256],65434:[[12524],256],65435:[[12525],256],65436:[[12527],256],65437:[[12531],256],65438:[[12441],256],65439:[[12442],256],65440:[[12644],256],65441:[[12593],256],65442:[[12594],256],65443:[[12595],256],65444:[[12596],256],65445:[[12597],256],65446:[[12598],256],65447:[[12599],256],65448:[[12600],256],65449:[[12601],256],65450:[[12602],256],65451:[[12603],256],65452:[[12604],256],65453:[[12605],256],65454:[[12606],256],65455:[[12607],256],65456:[[12608],256],65457:[[12609],256],65458:[[12610],256],65459:[[12611],256],65460:[[12612],256],65461:[[12613],256],65462:[[12614],256],65463:[[12615],256],65464:[[12616],256],65465:[[12617],256],65466:[[12618],256],65467:[[12619],256],65468:[[12620],256],65469:[[12621],256],65470:[[12622],256],65474:[[12623],256],65475:[[12624],256],65476:[[12625],256],65477:[[12626],256],65478:[[12627],256],65479:[[12628],256],65482:[[12629],256],65483:[[12630],256],65484:[[12631],256],65485:[[12632],256],65486:[[12633],256],65487:[[12634],256],65490:[[12635],256],65491:[[12636],256],65492:[[12637],256],65493:[[12638],256],65494:[[12639],256],65495:[[12640],256],65498:[[12641],256],65499:[[12642],256],65500:[[12643],256],65504:[[162],256],65505:[[163],256],65506:[[172],256],65507:[[175],256],65508:[[166],256],65509:[[165],256],65510:[[8361],256],65512:[[9474],256],65513:[[8592],256],65514:[[8593],256],65515:[[8594],256],65516:[[8595],256],65517:[[9632],256],65518:[[9675],256]}};var B={nfc:G,nfd:M,nfkc:K,nfkd:L};typeof C6=="object"?C6.exports=B:typeof define=="function"&&define.amd?define("unorm",function(){return B}):i.unorm=B,B.shimApplied=!1,String.prototype.normalize||(Object.defineProperty(String.prototype,"normalize",{enumerable:!1,configurable:!0,writable:!0,value:function(){var F=""+this,z=arguments[0]===void 0?"NFC":arguments[0];if(this===null||this===void 0)throw new TypeError("Cannot call method on "+Object.prototype.toString.call(this));if(z==="NFC")return B.nfc(F);if(z==="NFD")return B.nfd(F);if(z==="NFKC")return B.nfkc(F);if(z==="NFKD")return B.nfkd(F);throw new RangeError("Invalid normalization form: "+z)}}),B.shimApplied=!0)})(aD)});var BD=U((CPe,jD)=>{"use strict";var Ere=Hr(),MD=Au(),Rre=ri();jD.exports=function(t){for(var e=Ere(this),r=Rre(e),a=arguments.length,s=MD(a>1?arguments[1]:void 0,r),o=a>2?arguments[2]:void 0,l=o===void 0?r:MD(o,r);l>s;)e[s++]=t;return e}});var s9=U((gke,a9)=>{var Sne=Math.floor,z6=function(i,t){var e=i.length,r=Sne(e/2);return e<8?Ane(i,t):wne(z6(i.slice(0,r),t),z6(i.slice(r),t),t)},Ane=function(i,t){for(var e=i.length,r=1,a,s;r<e;){for(s=r,a=i[r];s&&t(i[s-1],a)>0;)i[s]=i[--s];s!==r++&&(i[s]=a)}return i},wne=function(i,t,e){for(var r=i.length,a=t.length,s=0,o=0,l=[];s<r||o<a;)s<r&&o<a?l.push(e(i[s],t[o])<=0?i[s++]:t[o++]):l.push(s<r?i[s++]:t[o++]);return l};a9.exports=z6});var u9=U((vke,l9)=>{var xne=vu(),o9=xne.match(/firefox\/(\d+)/i);l9.exports=!!o9&&+o9[1]});var p9=U((Tke,c9)=>{var Ene=vu();c9.exports=/MSIE|Trident/.test(Ene)});var d9=U((Nke,f9)=>{var Rne=vu(),m9=Rne.match(/AppleWebKit\/(\d+)\./);f9.exports=!!m9&&+m9[1]});var $6=U((Wke,x9)=>{var Jne=Tr(),Qne=wu(),eie=ti(),tie=am().f,w9=function(i){return function(t){for(var e=eie(t),r=Qne(e),a=r.length,s=0,o=[],l;a>s;)l=r[s++],(!Jne||tie.call(e,l))&&o.push(i?[l,e[l]]:e[l]);return o}};x9.exports={entries:w9(!0),values:w9(!1)}});var rP=U((xje,tP)=>{"use strict";var Y9=Yh(),Pb=Im().getWeakData,Uie=Ut(),iS=Mt(),zie=$h(),Hie=Wh(),Z9=ys(),J9=ir(),Q9=ji(),Gie=Q9.set,qie=Q9.getterFor,Wie=Z9.find,$ie=Z9.findIndex,Kie=0,_b=function(i){return i.frozen||(i.frozen=new eP)},eP=function(){this.entries=[]},aS=function(i,t){return Wie(i.entries,function(e){return e[0]===t})};eP.prototype={get:function(i){var t=aS(this,i);if(t)return t[1]},has:function(i){return!!aS(this,i)},set:function(i,t){var e=aS(this,i);e?e[1]=t:this.entries.push([i,t])},delete:function(i){var t=$ie(this.entries,function(e){return e[0]===i});return~t&&this.entries.splice(t,1),!!~t}};tP.exports={getConstructor:function(i,t,e,r){var a=i(function(l,u){zie(l,a,t),Gie(l,{type:t,id:Kie++,frozen:void 0}),u!=null&&Hie(u,l[r],{that:l,AS_ENTRIES:e})}),s=qie(t),o=function(l,u,c){var p=s(l),m=Pb(Uie(u),!0);return m===!0?_b(p).set(u,c):m[p.id]=c,l};return Y9(a.prototype,{delete:function(l){var u=s(this);if(!iS(l))return!1;var c=Pb(l);return c===!0?_b(u).delete(l):c&&J9(c,u.id)&&delete c[u.id]},has:function(u){var c=s(this);if(!iS(u))return!1;var p=Pb(u);return p===!0?_b(c).has(u):p&&J9(p,c.id)}}),Y9(a.prototype,e?{get:function(u){var c=s(this);if(iS(u)){var p=Pb(u);return p===!0?_b(c).get(u):p?p[c.id]:void 0}},set:function(u,c){return o(this,u,c)}}:{add:function(u){return o(this,u,!0)}}),a}}});var oP=U((Eje,sP)=>{"use strict";var nP=at(),Xie=Yh(),Yie=Im(),Zie=Xh(),iP=rP(),kb=Mt(),Fb=ji().enforce,Jie=TT(),Qie=!nP.ActiveXObject&&"ActiveXObject"in nP,Mb=Object.isExtensible,Ef,aP=function(i){return function(){return i(this,arguments.length?arguments[0]:void 0)}},eae=sP.exports=Zie("WeakMap",aP,iP);Jie&&Qie&&(Ef=iP.getConstructor(aP,"WeakMap",!0),Yie.enable(),yc=eae.prototype,sS=yc.delete,Rf=yc.has,oS=yc.get,lS=yc.set,Xie(yc,{delete:function(i){if(kb(i)&&!Mb(i)){var t=Fb(this);return t.frozen||(t.frozen=new Ef),sS.call(this,i)||t.frozen.delete(i)}return sS.call(this,i)},has:function(t){if(kb(t)&&!Mb(t)){var e=Fb(this);return e.frozen||(e.frozen=new Ef),Rf.call(this,t)||e.frozen.has(t)}return Rf.call(this,t)},get:function(t){if(kb(t)&&!Mb(t)){var e=Fb(this);return e.frozen||(e.frozen=new Ef),Rf.call(this,t)?oS.call(this,t):e.frozen.get(t)}return oS.call(this,t)},set:function(t,e){if(kb(t)&&!Mb(t)){var r=Fb(this);r.frozen||(r.frozen=new Ef),Rf.call(this,t)?lS.call(this,t,e):r.frozen.set(t,e)}else lS.call(this,t,e);return this}}));var yc,sS,Rf,oS,lS});var Lb=U((SBe,SP)=>{"use strict";var Sae=fs(),Aae=Pr(),wae=Mn();SP.exports=function(t){var e=Aae(wae(this)),r="",a=Sae(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))a&1&&(r+=e);return r}});var UP=U((XBe,LP)=>{var Hae=So(),jP=Pr(),Gae=Lb(),qae=Mn(),Wae=Math.ceil,BP=function(i){return function(t,e,r){var a=jP(qae(t)),s=Hae(e),o=a.length,l=r===void 0?" ":jP(r),u,c;return s<=o||l==""?a:(u=s-o,c=Gae.call(l,Wae(u/l.length)),c.length>u&&(c=c.slice(0,u)),i?a+c:c+a)}};LP.exports={start:BP(!1),end:BP(!0)}});var HP=U((YBe,zP)=>{var $ae=vu();zP.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test($ae)});var Jk=U((zXe,WS)=>{function qS(){}qS.prototype={on:function(i,t,e){var r=this.e||(this.e={});return(r[i]||(r[i]=[])).push({fn:t,ctx:e}),this},once:function(i,t,e){var r=this;function a(){r.off(i,a),t.apply(e,arguments)}return a._=t,this.on(i,a,e)},emit:function(i){var t=[].slice.call(arguments,1),e=((this.e||(this.e={}))[i]||[]).slice(),r=0,a=e.length;for(r;r<a;r++)e[r].fn.apply(e[r].ctx,t);return this},off:function(i,t){var e=this.e||(this.e={}),r=e[i],a=[];if(r&&t)for(var s=0,o=r.length;s<o;s++)r[s].fn!==t&&r[s].fn._!==t&&a.push(r[s]);return a.length?e[i]=a:delete e[i],this}};WS.exports=qS;WS.exports.TinyEmitter=qS});var Zv=U((Fst,AM)=>{var Hf=Math.expm1,rhe=Math.exp;AM.exports=!Hf||Hf(10)>22025.465794806718||Hf(10)<22025.465794806718||Hf(-2e-17)!=-2e-17?function(t){return(t=+t)==0?t:t>-1e-6&&t<1e-6?t+t*t/2:rhe(t)-1}:Hf});var OM=U((Lst,IM)=>{var dhe=Math.log;IM.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:dhe(1+t)}});var Ow=U(l0=>{"use strict";Object.defineProperty(l0,"__esModule",{value:!0});l0.WORDS=void 0;var l2e=["ad","adipisicing","aliqua","aliquip","amet","anim","aute","cillum","commodo","consectetur","consequat","culpa","cupidatat","deserunt","do","dolor","dolore","duis","ea","eiusmod","elit","enim","esse","est","et","eu","ex","excepteur","exercitation","fugiat","id","in","incididunt","ipsum","irure","labore","laboris","laborum","Lorem","magna","minim","mollit","nisi","non","nostrud","nulla","occaecat","officia","pariatur","proident","qui","quis","reprehenderit","sint","sit","sunt","tempor","ullamco","ut","velit","veniam","voluptate"];l0.WORDS=l2e});var WL=U(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.FORMATS=Ks.FORMAT_PLAIN=Ks.FORMAT_HTML=void 0;var GL="html";Ks.FORMAT_HTML=GL;var qL="plain";Ks.FORMAT_PLAIN=qL;var u2e=[GL,qL];Ks.FORMATS=u2e});var $L=U(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0});u0.LINE_ENDINGS=void 0;var c2e={POSIX:`
`,WIN32:`\r
`};u0.LINE_ENDINGS=c2e});var KL=U(c0=>{"use strict";Object.defineProperty(c0,"__esModule",{value:!0});c0.default=void 0;var p2e=function(t){var e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},m2e=p2e;c0.default=m2e});var XL=U((p0,Dw)=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});p0.default=void 0;var f2e=function(){return typeof Dw!="undefined"&&!!Dw.exports},d2e=f2e;p0.default=d2e});var YL=U(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});m0.default=void 0;var h2e=function(){return typeof navigator!="undefined"&&navigator.product==="ReactNative"},y2e=h2e;m0.default=y2e});var ZL=U(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});f0.SUPPORTED_PLATFORMS=void 0;var b2e={DARWIN:"darwin",LINUX:"linux",WIN32:"win32"};f0.SUPPORTED_PLATFORMS=b2e});var JL=U(d0=>{"use strict";Object.defineProperty(d0,"__esModule",{value:!0});d0.default=void 0;var g2e=ZL(),v2e=function(){return typeof process!="undefined"&&process.platform===g2e.SUPPORTED_PLATFORMS.WIN32},T2e=v2e;d0.default=T2e});var QL=U(h0=>{"use strict";Object.defineProperty(h0,"__esModule",{value:!0});h0.default=void 0;var N2e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return Array.apply(null,Array(t)).map(function(e,r){return r})},C2e=N2e;h0.default=C2e});var eU=U(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});y0.default=void 0;var S2e=b0(),A2e=function(t,e){var r=(0,S2e.makeArrayOfLength)(t);return r.map(function(){return e()})},w2e=A2e;y0.default=w2e});var b0=U(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Object.defineProperty(Xs,"capitalize",{enumerable:!0,get:function(){return x2e.default}});Object.defineProperty(Xs,"isNode",{enumerable:!0,get:function(){return E2e.default}});Object.defineProperty(Xs,"isReactNative",{enumerable:!0,get:function(){return R2e.default}});Object.defineProperty(Xs,"isWindows",{enumerable:!0,get:function(){return V2e.default}});Object.defineProperty(Xs,"makeArrayOfLength",{enumerable:!0,get:function(){return I2e.default}});Object.defineProperty(Xs,"makeArrayOfStrings",{enumerable:!0,get:function(){return O2e.default}});var x2e=tp(KL()),E2e=tp(XL()),R2e=tp(YL()),V2e=tp(JL()),I2e=tp(QL()),O2e=tp(eU());function tp(i){return i&&i.__esModule?i:{default:i}}});var rU=U(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});v0.default=void 0;var D2e=Ow(),Pw=b0();function P2e(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function tU(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function _2e(i,t,e){return t&&tU(i.prototype,t),e&&tU(i,e),i}function g0(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var k2e=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.sentencesPerParagraph,r=e===void 0?{max:7,min:3}:e,a=t.wordsPerSentence,s=a===void 0?{max:15,min:5}:a,o=t.random,l=t.seed,u=t.words,c=u===void 0?D2e.WORDS:u;if(P2e(this,i),g0(this,"sentencesPerParagraph",void 0),g0(this,"wordsPerSentence",void 0),g0(this,"random",void 0),g0(this,"words",void 0),r.min>r.max)throw new Error("Minimum number of sentences per paragraph (".concat(r.min,") cannot exceed maximum (").concat(r.max,")."));if(s.min>s.max)throw new Error("Minimum number of words per sentence (".concat(s.min,") cannot exceed maximum (").concat(s.max,")."));this.sentencesPerParagraph=r,this.words=c,this.wordsPerSentence=s,this.random=o||Math.random}return _2e(i,[{key:"generateRandomInteger",value:function(e,r){return Math.floor(this.random()*(r-e+1)+e)}},{key:"generateRandomWords",value:function(e){var r=this,a=this.wordsPerSentence,s=a.min,o=a.max,l=e||this.generateRandomInteger(s,o);return(0,Pw.makeArrayOfLength)(l).reduce(function(u,c){return"".concat(r.pluckRandomWord()," ").concat(u)},"").trim()}},{key:"generateRandomSentence",value:function(e){return"".concat((0,Pw.capitalize)(this.generateRandomWords(e)),".")}},{key:"generateRandomParagraph",value:function(e){var r=this,a=this.sentencesPerParagraph,s=a.min,o=a.max,l=e||this.generateRandomInteger(s,o);return(0,Pw.makeArrayOfLength)(l).reduce(function(u,c){return"".concat(r.generateRandomSentence()," ").concat(u)},"").trim()}},{key:"pluckRandomWord",value:function(){var e=0,r=this.words.length-1,a=this.generateRandomInteger(e,r);return this.words[a]}}]),i}(),F2e=k2e;v0.default=F2e});var aU=U(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});C0.default=void 0;var T0=WL(),nU=$L(),M2e=j2e(rU()),N0=b0();function j2e(i){return i&&i.__esModule?i:{default:i}}function B2e(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function iU(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function L2e(i,t,e){return t&&iU(i.prototype,t),e&&iU(i,e),i}function _w(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var U2e=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T0.FORMAT_PLAIN,r=arguments.length>2?arguments[2]:void 0;if(B2e(this,i),_w(this,"generator",void 0),_w(this,"format",void 0),_w(this,"suffix",void 0),T0.FORMATS.indexOf(e.toLowerCase())===-1)throw new Error("".concat(e," is an invalid format. Please use ").concat(T0.FORMATS.join(" or "),"."));this.format=e.toLowerCase(),this.suffix=r,this.generator=new M2e.default(t)}return L2e(i,[{key:"getLineEnding",value:function(){return this.suffix?this.suffix:!(0,N0.isReactNative)()&&(0,N0.isNode)()&&(0,N0.isWindows)()?nU.LINE_ENDINGS.WIN32:nU.LINE_ENDINGS.POSIX}},{key:"formatString",value:function(e){return this.format===T0.FORMAT_HTML?"<p>".concat(e,"</p>"):e}},{key:"formatStrings",value:function(e){var r=this;return e.map(function(a){return r.formatString(a)})}},{key:"generateWords",value:function(e){return this.formatString(this.generator.generateRandomWords(e))}},{key:"generateSentences",value:function(e){return this.formatString(this.generator.generateRandomParagraph(e))}},{key:"generateParagraphs",value:function(e){var r=this.generator.generateRandomParagraph.bind(this.generator);return this.formatStrings((0,N0.makeArrayOfStrings)(e,r)).join(this.getLineEnding())}}]),i}(),z2e=U2e;C0.default=z2e});var oU=U(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});Object.defineProperty(fd,"LoremIpsum",{enumerable:!0,get:function(){return sU.default}});fd.loremIpsum=void 0;var H2e=Ow(),sU=G2e(aU());function G2e(i){return i&&i.__esModule?i:{default:i}}var q2e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.count,r=e===void 0?1:e,a=t.format,s=a===void 0?"plain":a,o=t.paragraphLowerBound,l=o===void 0?3:o,u=t.paragraphUpperBound,c=u===void 0?7:u,p=t.random,m=t.sentenceLowerBound,f=m===void 0?5:m,d=t.sentenceUpperBound,h=d===void 0?15:d,y=t.units,b=y===void 0?"sentences":y,g=t.words,v=g===void 0?H2e.WORDS:g,C=t.suffix,w=C===void 0?"":C,S={random:p,sentencesPerParagraph:{max:c,min:l},words:v,wordsPerSentence:{max:h,min:f}},A=new sU.default(S,s,w);switch(b){case"paragraphs":case"paragraph":return A.generateParagraphs(r);case"sentences":case"sentence":return A.generateSentences(r);case"words":case"word":return A.generateWords(r);default:return""}};fd.loremIpsum=q2e});var X0={};lt(X0,{Columns:()=>kd,Description:()=>jd,Else:()=>$0,RightHandSide:()=>Md,Title:()=>Fd,externalContent:()=>K0});var mx={get:function(i,t){if(t==="__isReadOnlyProxy")return!0;let e=i[t];return e!==null&&typeof e=="object"&&e.__isReadOnlyProxy!==!0?new Proxy(e,mx):e},set:function(i,t,e){throw Error("Property "+t+" is read-only")},deleteProperty:function(i,t){throw Error("Property "+t+" is read-only")}},Ge=mx;function V0(){return{get:function(i,t){let e=i[t];return e!==void 0&&(e.isArray&&(e.public||e.trackChanges)?e=new Proxy(e.value,fx({variable:t,nDimensions:e.nDimensions})):(e=e.value,e!==null&&typeof e=="object"&&e.__isReadOnlyProxy!==!0&&(e=new Proxy(e,Ge)))),e},set:function(i,t,e){throw Error("Property "+t+" is read-only")},deleteProperty:function(i,t){throw Error("Property "+t+" is read-only")}}}function fx({variable:i,nDimensions:t,indicesSoFar:e=[]}){return{variable:i,nDimensions:t,indicesSoFar:e,get:function(r,a){let s=r[a];return s!==null&&typeof s=="object"&&t>1&&(s=new Proxy(s,fx({variable:this.variable,nDimensions:this.nDimensions-1,indicesSoFar:[...this.indicesSoFar,a]}))),s},set:function(r,a,s){throw Error("Property "+a+" is read-only")},deleteProperty:function(r,a){throw Error("Property "+a+" is read-only")}}}function Er(i){return i.reduce((t,e)=>Array.isArray(e)?t.concat(Er(e)):t.concat(e),[])}function I0(i,t){return console.log(`levels: ${t}`),i.reduce((e,r)=>Array.isArray(r)&&t>1?e.concat(I0(r,t-1)):e.concat(r),[])}import k0 from"math-expressions";import On from"math-expressions";var Js=class{union(t){return this.complement().intersect(t.complement()).complement()}intersectWithOpenInterval(t){return this.intersect(t)}setMinus(t){return this.intersect(t.complement())}symmetricDifference(t){return this.setMinus(t).union(t.setMinus(this))}equals(t){return this.symmetricDifference(t).isEmpty()}toJSON(){return{objectType:"subset",data:Object.assign({},this),subsetType:this.constructor.subsetType}}static reviver(t,e){if(e&&e.objectType==="subset"&&e.subsetType!==void 0){if(e.subsetType==="emptySet")return new Oe;if(e.subsetType==="realLine")return new gn;if(e.subsetType==="singleton")return new en(e.data.element);if(e.subsetType==="union")return new tn(e.data.subsets);if(e.subsetType==="openInterval")return new xt(e.data.left,e.data.right)}return e}copy(){return this.constructor.reviver(null,this.toJSON())}},O0=class extends Js{union(t){return t}intersect(){return new O0}contains(){return!1}isEmpty(){return!0}complement(){return new gn}toString(){return"\u2205"}toMathExpression(){return On.fromAst("\u2205")}},Oe=O0;T(Oe,"subsetType","emptySet");var D0=class extends Js{union(){return new D0}intersect(t){return t}contains(){return!0}complement(){return new Oe}isEmpty(){return!1}toString(){return"\u211D"}toMathExpression(){return On.fromAst("R")}},gn=D0;T(gn,"subsetType","realLine");var P0=class extends Js{constructor(t){super();if(!Number.isFinite(t))return new Oe;this.element=t}union(t){return t.contains(this.element)?t:new tn([t,this])}intersect(t){return t.contains(this.element)?new P0(this.element):new Oe}isEmpty(){return!1}contains(t){return t===this.element}complement(){return new tn([new xt(-1/0,this.element),new xt(this.element,1/0)])}toString(){return`{${this.element}}`}toMathExpression(){return On.fromAst(["set",this.element])}},en=P0;T(en,"subsetType","singleton");var Td=class extends Js{intersect(t){return new Td(this.subsets.map(e=>t.intersect(e)))}toString(){return this.subsets.map(t=>t.toString()).join(" U ")}toMathExpression(){return On.fromAst(["union",...this.subsets.map(t=>t.toMathExpression().tree)])}constructor(t){super();let e=t.filter(r=>!r.isEmpty());if(e.length===0)return new Oe;e=e.reduce((r,a)=>a instanceof Td?r.concat(a.subsets):r.concat(a),[]),this.subsets=[];for(let r=0;r<e.length;r++){let a=e[r],s=!0;if(a instanceof gn)return new gn;if(a instanceof xt){let o=a.left,l=a.right;for(let u=r+1;u<e.length;u++){let c=e[u];if(c instanceof xt){if(o<c.right&&c.left<l){o=Math.min(o,c.left),l=Math.max(l,c.right),e.splice(u,1),u--,s=!1,r--;break}else if(o===c.right||l===c.left){let p=o===c.right?o:l,m=!1;for(let f=0;f<this.subsets.length;f++){let d=this.subsets[f];if(d instanceof en&&d.element===p){this.subsets.splice(f,1),m=!0;break}}if(!m)for(let f=r+1;f<e.length;f++){let d=e[f];if(d instanceof en&&d.element===p){e.splice(f,1),m=!0;break}}if(m){o=Math.min(o,c.left),l=Math.max(l,c.right),e.splice(u,1),u--,s=!1,r--;break}}}else c.element>o&&c.element<l&&(e.splice(u,1),u--)}if(a.left=o,a.right=l,a.left===-1/0&&a.right===1/0)return new gn}else{let o=a.element;for(let l=r+1;l<e.length;l++){let u=e[l];if(u instanceof xt){if(o>u.left&&o<u.right){e.splice(r,1),r--,s=!1;break}}else u.element===o&&(e.splice(l,1),l--)}}s&&this.subsets.push(a)}return this.subsets.length===1?this.subsets[0]:this}contains(t){return this.subsets.some(e=>e.contains(t))}isEmpty(){return this.subsets.every(t=>t.isEmpty())}complement(){return this.subsets.map(t=>t.complement()).reduce((t,e)=>t.intersect(e))}},tn=Td;T(tn,"subsetType","union");var Ol=class extends Js{constructor(t,e){super();return this.left=t,this.right=e,this.left<=this.right?this.left===-1/0&&this.right===1/0?new gn:this:new Oe}},_0=class extends Ol{constructor(t,e){super(t,e);return t===e?new Oe:this}intersect(t){return t.intersectWithOpenInterval(this)}intersectWithOpenInterval(t){return new _0(Math.max(this.left,t.left),Math.min(this.right,t.right))}complement(){return new tn([new Qs(-1/0,this.left),new eo(this.right,1/0)])}isEmpty(){return this.left>=this.right}contains(t){return t>this.left&&t<this.right}toString(){return`(${this.left.toString()},${this.right.toString()})`}toMathExpression(){return On.fromAst(["interval",["tuple",this.left,this.right],["tuple",!1,!1]])}},xt=_0;T(xt,"subsetType","openInterval");var vd=class extends Ol{constructor(t,e){super(t,e);if(!(t<=e))return new Oe;let r=[new xt(t,e)];return Number.isFinite(t)&&r.push(new en(t)),Number.isFinite(e)&&r.push(new en(e)),new tn(r)}},Qs=class extends Ol{constructor(t,e){super(t,e);if(!(t<e))return new Oe;let r=[new xt(t,e)];return Number.isFinite(e)&&r.push(new en(e)),new tn(r)}},eo=class extends Ol{constructor(t,e){super(t,e);if(!(t<e))return new Oe;let r=[new xt(t,e)];return Number.isFinite(t)&&r.push(new en(t)),new tn(r)}},RU={Subset:Js,EmptySet:Oe,RealLine:gn,Singleton:en,Union:tn,Interval:Ol,OpenInterval:xt,ClosedInterval:vd,OpenClosedInterval:Qs,ClosedOpenInterval:eo},bt=RU;function vi(i,t){if(!Array.isArray(i))return Number.isFinite(i)?new en(i):i==="R"?new gn:i==="varnothing"||i==="emptyset"||i==="\u2205"?new Oe:new Oe;let e=i[0];if(e==="interval"){let r=i[1],a=i[2],s=r[1];if(!Number.isFinite(s)&&(s=On.fromAst(s).evaluate_to_constant(),!(Number.isFinite(s)||s===1/0||s===-1/0)))return new Oe;let o=r[2];return!Number.isFinite(o)&&(o=On.fromAst(o).evaluate_to_constant(),!(Number.isFinite(o)||o===1/0||o===-1/0))?new Oe:a[1]?a[2]?new vd(s,o):new eo(s,o):a[2]?new Qs(s,o):new xt(s,o)}else if(e==="union"||e==="or"){let r=i.slice(1).map(a=>vi(a,t)).filter(a=>a);return r.length===0?new Oe:r.length===1?r[0]:new tn(r)}else if(e==="intersect"||e==="and"){let r=i.slice(1).map(a=>vi(a,t)).filter(a=>a);return r.length===0?new gn:r.reduce((a,s)=>a.intersect(s))}else if(e==="set"){let r=i.slice(1).map(a=>vi(a,t)).filter(a=>a);return r.length===0?new Oe:r.length===1?r[0]:new tn(r)}else if(["<","le",">","ge","=","ne"].includes(e)){let r=i[1],a=!1;if(!Number.isFinite(r)){if(rn(r,t))a=!0;else if(r=On.fromAst(r).evaluate_to_constant(),!(Number.isFinite(r)||r===1/0||r===-1/0))return new Oe}let s=i[2],o=!1;if(!Number.isFinite(s)){if(rn(s,t))o=!0;else if(s=On.fromAst(s).evaluate_to_constant(),!(Number.isFinite(s)||s===1/0||s===-1/0))return new Oe}return a?o?new Oe:e==="<"?new xt(-1/0,s):e==="le"?new Qs(-1/0,s):e===">"?new xt(s,1/0):e==="ge"?new eo(s,1/0):e==="="?Number.isFinite(s)?new en(s):new Oe:Number.isFinite(s)?new tn([new xt(-1/0,s),new xt(s,1/0)]):new gn:o?e==="<"?new xt(r,1/0):e==="le"?new eo(r,1/0):e===">"?new xt(-1/0,r):e==="ge"?new Qs(-1/0,r):e==="="?Number.isFinite(r)?new en(r):new Oe:Number.isFinite(r)?new tn([new xt(-1/0,r),new xt(r,1/0)]):new gn:new Oe}else if(["lts","gts"].includes(e)){let r=i[1].slice(1),a=i[2].slice(1);if(r.length!==3||!rn(r[1],t))return new Oe;e==="gts"&&(r.reverse(),a.reverse());let s=r[0];if(!Number.isFinite(s)&&(s=On.fromAst(s).evaluate_to_constant(),!(Number.isFinite(s)||s===1/0||s===-1/0)))return new Oe;let o=r[2];return!Number.isFinite(o)&&(o=On.fromAst(o).evaluate_to_constant(),!(Number.isFinite(o)||o===1/0||o===-1/0))?new Oe:a[0]?a[1]?new xt(s,o):new Qs(s,o):a[1]?new eo(s,o):new vd(s,o)}else if(e==="|"){let r=i[1];return vi(i[2],r)}else if(e==="^"&&(i[2]==="C"||i[2]==="c")){let r=vi(i[1],t);return r?r.complement():new Oe}else{if(e==="in")return rn(i[1],t)?vi(i[2],t):new Oe;if(e==="ni")return rn(i[2],t)?vi(i[1],t):new Oe;if(e==="notin"){if(rn(i[1],t)){let r=vi(i[2],t);if(r)return r.complement()}return new Oe}else if(e==="notni"){if(rn(i[2],t)){let r=vi(i[1],t);if(r)return r.complement()}return new Oe}else{let r=On.fromAst(i).evaluate_to_constant();return Number.isFinite(r)?new en(r):new Oe}}}function gp(i,t){return vi(i.to_intervals().tree,t.tree)}function xe(i,t,e){if(Object(i)!==i||i instanceof Function||t!==void 0&&i instanceof t)return i;if(i instanceof k0.class||i instanceof bt.Subset)return i.copy();if(e===void 0&&(e=new WeakMap),Array.isArray(i))return[...i.map(a=>xe(a,t,e))];if(i.constructor===Object&&Object.entries(i).length===0)return{};if(e.has(i))return e.get(i);try{var r=new i.constructor}catch(a){r=Object.create(Object.getPrototypeOf(i))}return i instanceof Map?Array.from(i,([a,s])=>r.set(xe(a,t,e),xe(s,t,e))):i instanceof Set&&Array.from(i,a=>r.add(xe(a,t,e))),e.set(i,r),Object.assign(r,...Object.keys(i).map(a=>({[a]:xe(i[a],t,e)})))}function rn(i,t,e){var r,a;function s(o,l){var u;if(Number.isNaN(o)&&Number.isNaN(l)||o===l)return!0;if(e!==void 0&&o instanceof e&&l instanceof e)return o.componentName===l.componentName;if(o instanceof k0.class&&l instanceof k0.class)return s(o.tree,l.tree);if(typeof o=="function"&&typeof l=="function"||o instanceof Date&&l instanceof Date||o instanceof RegExp&&l instanceof RegExp||o instanceof String&&l instanceof String||o instanceof Number&&l instanceof Number)return o.toString()===l.toString();if(!(o instanceof Object&&l instanceof Object)||o.isPrototypeOf(l)||l.isPrototypeOf(o)||o.constructor!==l.constructor||o.prototype!==l.prototype||r.indexOf(o)>-1||a.indexOf(l)>-1)return!1;for(u in l){if(l.hasOwnProperty(u)!==o.hasOwnProperty(u))return!1;if(typeof l[u]!=typeof o[u])return!1}for(u in o){if(l.hasOwnProperty(u)!==o.hasOwnProperty(u))return!1;if(typeof l[u]!=typeof o[u])return!1;switch(typeof o[u]){case"object":case"function":if(r.push(o),a.push(l),!s(o[u],l[u]))return!1;r.pop(),a.pop();break;default:if(o[u]!==l[u]&&!(Number.isNaN(o[u])&&Number.isNaN(l[u])))return!1;break}}return!0}return r=[],a=[],s(i,t)}var Q=class{constructor({componentName:t,ancestors:e,serializedComponent:r,definingChildren:a,serializedChildren:s,attributes:o,stateVariableDefinitions:l,componentInfoObjects:u,coreFunctions:c,flags:p,shadow:m,numerics:f,parentSharedParameters:d,sharedParameters:h}){this.numerics=f,this.parentSharedParameters=d,this.sharedParameters=h,this.componentName=t,this.ancestors=e,this.counters={},this.componentInfoObjects=u,this.coreFunctions=c,this.flags=p,m===!0&&(this.isShadow=!0),this.definingChildren=a,this.definingChildren===void 0&&(this.definingChildren=[]),this.serializedChildren=s,this.attributes=o,this.state={};for(let y in l)this.state[y]=Object.assign({},l[y]);this.stateValues=new Proxy(this.state,V0()),r.state&&(this.potentialEssentialState=new Proxy(r.state,Ge)),this.doenetAttributes={},r.doenetAttributes!==void 0&&Object.assign(this.doenetAttributes,r.doenetAttributes),r.variants!==void 0&&(this.variants=r.variants)}static get rendererType(){return this.componentType}get componentType(){return this.constructor.componentType}get rendererType(){return this.constructor.rendererType}get allPotentialRendererTypes(){let t=[];this.rendererType&&t.push(this.rendererType);for(let e in this.state){let r=this.state[e];if(r.public){let a=r.componentType;Array.isArray(a)||(a=[a]),r.wrappingComponents&&a.push(...Er(r.wrappingComponents).map(s=>typeof s=="object"?s.componentType:s));for(let s of a){let o=this.componentInfoObjects.allComponentClasses[s];if(o){let l=o.rendererType;l&&!t.includes(l)&&t.push(l)}}}}if(this.constructor.adapters)for(let e of this.constructor.adapters){let r;typeof e=="string"?r=e:r=e.componentType;let a=this.componentInfoObjects.allComponentClasses[r];if(a){let s=a.rendererType;s&&!t.includes(s)&&t.push(s)}}if(!this.rendererType)return t;for(let e in this.allChildren){let r=this.allChildren[e].component;for(let a of r.allPotentialRendererTypes)t.includes(a)||t.push(a)}return t}readOnlyProxyHandler=Ge;potentialRendererTypesFromSerializedComponents(t){let e=[];for(let r of t){let a=this.componentInfoObjects.allComponentClasses[r.componentType];if(a){let s=a.rendererType;s&&!e.includes(s)&&e.push(s);let o=a.returnStateVariableInfo({onlyPublic:!0,flags:this.flags}).stateVariableDescriptions;for(let l in o){let u=o[l],c=u.componentType;Array.isArray(c)||(c=[c]),u.wrappingComponents&&c.push(...Er(u.wrappingComponents).map(p=>typeof p=="object"?p.componentType:p));for(let p of c){let m=this.componentInfoObjects.allComponentClasses[p];if(m){let f=m.rendererType;f&&!e.includes(f)&&e.push(f)}}}if(a.adapters)for(let l of a.adapters){let u;typeof l=="string"?u=l:u=l.componentType;let c=this.componentInfoObjects.allComponentClasses[u];if(c){let p=c.rendererType;p&&!e.includes(p)&&e.push(p)}}}if(r.children){let s=this.potentialRendererTypesFromSerializedComponents(r.children);for(let o of s)e.includes(o)||e.push(o)}}return e}get childrenMatched(){return this.childrenMatchedWithPlaceholders&&!this.placeholderActiveChildrenIndices}static createAttributesObject({flags:t={}}={}){return{hide:{createComponentOfType:"boolean",createStateVariable:"hide",defaultValue:!1,public:!0},disabled:{createComponentOfType:"boolean",createStateVariable:"disabledPreliminary",defaultValue:null},modifyIndirectly:{createComponentOfType:"boolean",createStateVariable:"modifyIndirectly",defaultValue:!0,public:!0,propagateToProps:!0},fixed:{createComponentOfType:"boolean",createStateVariable:"fixedPreliminary",defaultValue:null},styleNumber:{createComponentOfType:"number",createStateVariable:"styleNumber",defaultValue:1,public:!0,propagateToDescendants:!0},isResponse:{createComponentOfType:"boolean",createStateVariable:"isResponse",defaultValue:!1,public:!0},newNamespace:{createPrimitiveOfType:"boolean"}}}static returnSugarInstructions(){return[]}static returnChildGroups(){return[]}static get childGroups(){return this.hasOwnProperty("childGroupsData")?this.childGroupsData:(this.childGroupsData=this.returnChildGroups(),this.childGroupsData)}static get childGroupOfComponentType(){return this.hasOwnProperty("childGroupOfComponentTypeData")?this.childGroupOfComponentTypeData:(this.childGroupOfComponentTypeData={},this.childGroupOfComponentTypeData)}static get childGroupIndsByName(){if(this.hasOwnProperty("childGroupIndsByNameData"))return Object.assign({},this.childGroupIndsByNameData);this.childGroupIndsByNameData={};for(let[t,e]of this.childGroups.entries()){if(e.group in this.childGroupIndsByNameData)throw Error(`Invalid childGroups for componentClass ${this.componentType}: ${e} is repeated`);this.childGroupIndsByNameData[e.group]=t}return Object.assign({},this.childGroupIndsByNameData)}returnMatchedChildIndices(t){let e=[];for(let r of t){let a=this.childMatchesByGroup[r];if(!a)throw Error(`child group ${r} is not defined for a component of type ${this.componentType}`);e.push(...a)}return e.sort((r,a)=>r-a)}static returnStateVariableDefinitions(){let t={};return t.hidden={public:!0,componentType:"boolean",forRenderer:!0,returnDependencies:()=>({hide:{dependencyType:"stateVariable",variableName:"hide",variablesOptional:!0},parentHidden:{dependencyType:"parentStateVariable",variableName:"hidden"},sourceCompositeHidden:{dependencyType:"sourceCompositeStateVariable",variableName:"hidden"},adapterSourceHidden:{dependencyType:"adapterSourceStateVariable",variableName:"hidden"}}),definition:({dependencyValues:e})=>({newValues:{hidden:e.parentHidden===!0||e.sourceCompositeHidden===!0||e.adapterSourceHidden===!0||e.hide===!0}})},t.disabled={public:!0,componentType:"boolean",forRenderer:!0,neverShadow:!0,returnDependencies:()=>({disabledPreliminary:{dependencyType:"stateVariable",variableName:"disabledPreliminary",variablesOptional:!0},disabledAttr:{dependencyType:"attributeComponent",attributeName:"disabled"},readOnly:{dependencyType:"flag",flagName:"readOnly"},parentDisabled:{dependencyType:"parentStateVariable",variableName:"disabled"},sourceCompositeDisabled:{dependencyType:"sourceCompositeStateVariable",variableName:"disabled"},adapterSourceDisabled:{dependencyType:"adapterSourceStateVariable",variableName:"disabled"}}),definition({dependencyValues:e,usedDefault:r}){if(e.readOnly)return{newValues:{disabled:!0}};if(e.disabledPreliminary!==null&&e.disabledAttr!==null)return{newValues:{disabled:e.disabledPreliminary}};let a=!1,s=!0;return e.parentDisabled!==null&&!r.parentDisabled&&(a=a||e.parentDisabled,s=!1),e.sourceCompositeDisabled!==null&&!r.sourceCompositeDisabled&&(a=a||e.sourceCompositeDisabled,s=!1),e.adapterSourceDisabled!==null&&!r.adapterSourceDisabled&&(a=a||e.adapterSourceDisabled,s=!1),s&&e.disabledPreliminary!==null&&!r.disabledPreliminary&&(s=!1,a=e.disabledPreliminary),s?{useEssentialOrDefaultValue:{disabled:{defaultValue:!1}}}:{newValues:{disabled:a}}}},t.fixed={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!1,neverShadow:!0,returnDependencies:()=>({fixedPreliminary:{dependencyType:"stateVariable",variableName:"fixedPreliminary",variablesOptional:!0},fixedAttr:{dependencyType:"attributeComponent",attributeName:"fixed"},parentFixed:{dependencyType:"parentStateVariable",variableName:"fixed"},sourceCompositeFixed:{dependencyType:"sourceCompositeStateVariable",variableName:"fixed"},adapterSourceFixed:{dependencyType:"adapterSourceStateVariable",variableName:"fixed"}}),definition({dependencyValues:e,usedDefault:r}){if(e.fixedPreliminary!==null&&e.fixedAttr!==null)return{newValues:{fixed:e.fixedPreliminary}};let a=!1,s=!0;return e.parentFixed!==null&&!r.parentFixed&&(a=a||e.parentFixed,s=!1),e.sourceCompositeFixed!==null&&!r.sourceCompositeFixed&&(a=a||e.sourceCompositeFixed,s=!1),e.adapterSourceFixed!==null&&!r.adapterSourceFixed&&(a=a||e.adapterSourceFixed,s=!1),s&&e.fixedPreliminary!==null&&!r.fixedPreliminary&&(s=!1,a=e.fixedPreliminary),s?{useEssentialOrDefaultValue:{fixed:{variablesToCheck:[]}}}:{newValues:{fixed:a}}}},t.isInactiveCompositeReplacement={defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{isInactiveCompositeReplacement:{variablesToCheck:["isInactiveCompositeReplacement"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:{variableName:"isInactiveCompositeReplacement",value:e.isInactiveCompositeReplacement}}]}}},t}static returnNormalizedStateVariableDefinitions({attributeNames:t,numerics:e}){let r=this.returnStateVariableDefinitions({attributeNames:t,numerics:e});if(!r)throw Error(`Error in state variable definitions of ${this.componentType}: returnStateVariableDefinitions did not return anything`);let a=function(l){for(let[u,c]of l.entries())typeof c=="object"&&(l[u]=c.variableName)},s=["returnDependencies","definition","inverseDefinition","stateVariablesDeterminingDependencies","stateVariablesDeterminingArraySizeDependencies","isArray","nDimensions","returnArraySizeDependencies","returnArraySize","returnArrayDependenciesByKey","arrayDefinitionByKey","inverseArrayDefinitionByKey","basedOnArrayKeyStateVariables","markStale","getPreviousDependencyValuesForMarkStale","determineDependenciesImmediately","createWorkspace","workspace"],o={};for(let l in r){let u=r[l];if(o[l]=u,u.createWorkspace&&(u.workspace={}),u.additionalStateVariablesDefined){for(let[c,p]of u.additionalStateVariablesDefined.entries()){let m={};for(let d of s)d in u&&(m[d]=u[d]);m.additionalStateVariablesDefined=[...u.additionalStateVariablesDefined],m.additionalStateVariablesDefined[c]=l,a(m.additionalStateVariablesDefined);let f=p;typeof p=="object"&&(f=p.variableName,p=Object.assign({},p),delete p.variableName,Object.assign(m,p)),o[f]=m}a(u.additionalStateVariablesDefined)}}return o}static returnStateVariableInfo({onlyPublic:t=!1,flags:e}){let r=this.createAttributesObject({flags:e}),a={},s={},o={};for(let u in r){let c=r[u].componentType;a[u]={componentType:c||u,public:!0}}let l=this.returnNormalizedStateVariableDefinitions({attributeNames:Object.keys(a)});for(let u in l){let c=l[u];if(c.isAlias){o[u]=c.targetVariableName;continue}if((!t||c.public)&&(a[u]={componentType:c.componentType,public:c.public,containsComponentNamesToCopy:c.containsComponentNamesToCopy},c.isArray&&(a[u].isArray=!0,a[u].nDimensions=c.nDimensions===void 0?1:c.nDimensions,a[u].wrappingComponents=c.returnWrappingComponents?c.returnWrappingComponents():[],c.entryPrefixes)))for(let p of c.entryPrefixes)s[p]={arrayVariableName:u,nDimensions:c.returnEntryDimensions?c.returnEntryDimensions(p):1,wrappingComponents:c.returnWrappingComponents?c.returnWrappingComponents(p):[]}}return{stateVariableDescriptions:a,arrayEntryPrefixes:s,aliases:o}}get parentName(){if(!(this.ancestors===void 0||this.ancestors.length===0))return this.ancestors[0].componentName}getAllChildrenDownstreamComponentNames(t=!1){let e=Object.keys(this.allChildren),r=Object.keys(this.downstreamDependencies);return t!==!0&&(r=r.filter(a=>this.downstreamDependencies[a].inactive!==!0)),[...e,...r]}get allDescendants(){let t=[];for(let e in this.allChildren){let r=this.allChildren[e].component;t=[...t,e,...r.allDescendants]}return t}static get stateVariablesShadowedForReference(){return[]}serialize(t={}){let e=!0;t.forLink&&(e=!0);let r={componentType:this.componentType},a=[];if(e){for(let o of this.definingChildren)a.push(o.serialize(t));if(this.serializedChildren!==void 0)for(let o of this.serializedChildren)a.push(this.copySerializedComponent({serializedComponent:o,parameters:t}));a.length>0&&(r.children=a)}let s=this.constructor.createAttributesObject({flags:this.flags});r.attributes={};for(let o in this.attributes){let l=this.attributes[o];l.component?(s[o].copyComponentOnReference||!t.forLink)&&(r.attributes[o]={component:l.component.serialize(t)}):r.attributes[o]=JSON.parse(JSON.stringify(l))}if(!t.forLink){let o={};for(let l in this.state){let u=this.state[l].value;(this.state[l].essential||this.state[l].alwaysShadow)&&(this.state[l].usedDefault||(o[l]=u))}Object.keys(o).length>0&&(r.state=o)}return r.originalName=this.componentName,r.originalDoenetAttributes=xe(this.doenetAttributes),r.doenetAttributes=xe(this.doenetAttributes),r.originalAttributes=xe(r.attributes),delete r.doenetAttributes.prescribedName,delete r.doenetAttributes.assignNames,r}copySerializedComponent({serializedComponent:t,parameters:e}){let r=[];if(t.children!==void 0)for(let s of t.children)r.push(this.copySerializedComponent({serializedComponent:s,parameters:e}));let a={componentType:t.componentType,originalName:t.componentName,originalNameFromSerializedComponent:!0,children:r,state:{},doenetAttributes:{}};return t.doenetAttributes!==void 0&&(a.originalDoenetAttributes=xe(t.doenetAttributes),a.doenetAttributes=xe(t.doenetAttributes),a.originalAttributes=xe(t.attributes),a.attributes=xe(t.attributes),delete a.doenetAttributes.prescribedName,delete a.doenetAttributes.assignNames),t.state!==void 0&&Object.assign(a.state,t.state),a}static get nAdapters(){return this.adapters.length}getAdapter(t){if(t>=this.constructor.adapters.length)return;let e=this.constructor.adapters[t],r,a,s;typeof e=="string"?r=e:(r=e.stateVariable,a=e.componentType,s=e.substituteForPrimaryStateVariable);let o=this.state[r];if(o===void 0||!o.public&&!a)throw Error("Invalid adapter "+r+" in "+this.componentType);return a===void 0&&(a=o.componentType),{componentType:a,downstreamDependencies:{[this.componentName]:[{dependencyType:"adapter",adapterVariable:r,adapterTargetIdentity:{componentName:this.componentName,componentType:this.componentType},substituteForPrimaryStateVariable:s}]}}}static getAdapterComponentType(t,e){if(t>=this.adapters.length)return;let r=this.adapters[t],a,s;if(typeof r=="string"?a=r:(a=r.stateVariable,s=r.componentType),s===void 0){let l=e[this.componentType].stateVariableDescriptions[a];if(!l)throw Error("Invalid adapter "+a+" in "+this.componentType);if(s=l.componentType,!s)throw Error(`Couldn't get adapter component type for ${a} of componentType ${this.componentType}`)}return s}};T(Q,"componentType","_base"),T(Q,"childGroupOfComponentTypeData"),T(Q,"childGroupIndsByNameData"),T(Q,"useChildrenForReference",!0),T(Q,"adapters",[]);var re=class extends Q{};T(re,"componentType","_inline");var mr=class extends re{static get stateVariablesShadowedForReference(){return["value"]}static returnChildGroups(){return[{group:"textLike",componentTypes:["string","text","_singleCharacterInline","_inlineRenderInlineChildren"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={public:!0,componentType:this.componentType,returnDependencies:()=>({textLikeChildren:{dependencyType:"child",childGroups:["textLike"],variableNames:["text"]}}),defaultValue:"",set:e=>e===null?"":String(e),definition:function({dependencyValues:e}){if(e.textLikeChildren.length===0)return{useEssentialOrDefaultValue:{value:{variablesToCheck:"value"}}};let r="";for(let a of e.textLikeChildren)r+=a.stateValues.text;return{newValues:{value:r}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r}){let a=r.textLikeChildren.length;return a>1?{success:!1}:a===1?{success:!0,instructions:[{setDependency:"textLikeChildren",desiredValue:e.value,childIndex:0,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"value",value:e.value===null?"":String(e.value)}]}}},t.text={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:({dependencyValues:e})=>({newValues:{text:e.value}}),inverseDefinition:({desiredStateVariableValues:e})=>({success:!0,instructions:[{setDependency:"value",desiredValue:e.text}]})},t}};T(mr,"componentType","text"),T(mr,"includeBlankStringChildren",!0),T(mr,"useChildrenForReference",!1);var Ti=class extends re{static returnChildGroups(){return[{group:"inlines",componentTypes:["_inline"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={public:!0,componentType:this.componentType,returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["inlines"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r="";for(let a of e.inlineChildren)typeof a.stateValues.text=="string"&&(r+=a.stateValues.text);return{newValues:{value:r}}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:({dependencyValues:e})=>({newValues:{text:e.value}})},t}};T(Ti,"componentType","_textOrInline"),T(Ti,"renderChildren",!0),T(Ti,"includeBlankStringChildren",!0);var Ee=class extends Q{constructor(t){super(t);this.replacementsWorkspace={}}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.replacements={returnDependencies:()=>({replacements:{dependencyType:"replacement"}}),definition:({dependencyValues:e})=>({newValues:{replacements:e.replacements}})},t.recursiveReplacements={returnDependencies:()=>({recursiveReplacements:{dependencyType:"replacement",recursive:!0}}),definition:({dependencyValues:e})=>({newValues:{recursiveReplacements:e.recursiveReplacements}})},t.fullRecursiveReplacements={returnDependencies:()=>({recursiveReplacements:{dependencyType:"replacement",recursive:!0,recurseNonStandardComposites:!0}}),definition:({dependencyValues:e})=>({newValues:{fullRecursiveReplacements:e.recursiveReplacements}})},t}static createSerializedReplacements(){return{replacements:[]}}static calculateReplacementChanges(){return[]}get allPotentialRendererTypes(){let t=super.allPotentialRendererTypes;for(let e in this.allChildren){let r=this.allChildren[e].component;for(let a of r.allPotentialRendererTypes)t.includes(a)||t.push(a)}if(this.replacements)for(let e of this.replacements)for(let r of e.allPotentialRendererTypes)t.includes(r)||t.push(r);return t}};T(Ee,"componentType","_composite"),T(Ee,"rendererType");import OU from"math-expressions";var bx=j(F0()),gx=j(M0()),VU=/\+/g,IU=/\//g;function Ni(i,t){let e=gx.default.stringify((0,bx.default)(t)).slice(0,10).replace(VU,"_").replace(IU,"-");return"__"+i+"_"+e}function Ci(i,t){let e=1,r=i+e;for(;t.includes(r);)e+=1,r=i+e;return t.push(r),r}function to(i){let t=i.lastIndexOf("/");if(t===-1)throw Error(`Encountered name ${i} that doesn't include a slash`);return i.slice(0,t+1)}function Ad(i){return null}function Ja({childrenToComponentFunction:i,mustStripOffOuterParentheses:t=!1}){return function({matchedChildren:e}){let r=0,a=[],s=[],o=!1,l=e.length;if(t){let c=e[0];if(c.componentType!=="string"||c.state.value.trimLeft()[0]!=="(")return{success:!1}}for(let[c,p]of e.entries()){if(p.componentType!=="string"){s.push(p);continue}let m=p.state.value.trim();if(c===0&&t&&m[0]==="("){let d=e[l-1];if(d.componentType==="string"){let h=d.state.value.trimRight();h[h.length-1]===")"&&(o=!0,m=m.substring(1))}}let f=0;for(let d=0;d<m.length;d++){let h=m[d];if(h==="("&&r++,h===")"){if(r===0){if(o&&c===l-1&&d===m.length-1){m=m.substring(0,m.length-1);break}return{success:!1}}r--}h===","&&r===0&&(d>f&&s.push({componentType:"string",state:{value:m.substring(f,d)}}),a.push(s),s=[],f=d+1)}m.length>f&&s.push({componentType:"string",state:{value:m.substring(f,m.length)}})}if(r!==0)return{success:!1};a.push(s);let u=a.map(i);return{success:!0,newChildren:u}}}function vx({childrenList:i}){let t=0,e=[],r=[];for(let a of i){if(a.componentType!=="string"){r.push(a);continue}let s=a.state.value.trim(),o=0;for(let l=0;l<s.length;l++){let u=s[l];if(u==="("&&t++,u===")"){if(t===0)return{success:!1};t--}if(u===","&&t===0){if(l>o){let c=s.substring(o,l).trim();r.push({componentType:"string",state:{value:c}})}e.push(r),r=[],o=l+1}}if(s.length>o){let l=s.substring(o,s.length).trim();r.push({componentType:"string",state:{value:l}})}}return t!==0?{success:!1}:(e.push(r),{success:!0,pieces:e})}function Si({componentList:i,removeParens:t=!1}){let e=0,r=[],a=[];for(let s of i){if(s.componentType!=="string"){e===0?r.push([s]):a.push(s);continue}let o=s.state.value.trim(),l=0;for(let u=0;u<o.length;u++){let c=o[u];if(c==="(")e===0&&t&&(l=u+1),e++;else if(c===")"){if(e===0)return{success:!1};if(e===1){if(u+1>l){let p=t?u:u+1,m=o.substring(l,p).trim();m.length>0&&a.push({componentType:"string",state:{value:m}})}r.push(a),a=[],l=u+1}e--}else if(e===0&&!c.match(/\s/))return{success:!1}}if(o.length>l){let u=o.substring(l,o.length).trim();a.push({componentType:"string",state:{value:u}})}}return e!==0?{success:!1}:(a.length>0&&r.push(a),{success:!0,pieces:r})}var Cx=j(j0()),Sx=j(B0());function Ax(i){let e=/<\/?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[\^'">\s]+))?)+\s*|\s*)\/?>/.exec(i);if(e===null)return!1;let r=e[0];r=r.toLowerCase();let a=e.index,s=r.split(" "),o=s[0].substring(1,s[0].length-1);s.length>1&&(o=s[0].substring(1,s[0].length)),o.substring(o.length-1,o.length)==="/"&&(o=o.substring(0,o.length-1));let l=e[1];l=l.trim();let u={},c=/\w+\s*=\s*["]/;for(e="not null";e!==null;)if(e=c.exec(l),e!==null){let m=l.substring(e.index+e[0].length-1,l.length),d=/"[^"\\]*(?:\\.[^"\\]*)*"/.exec(m),h=d[0].substring(1,d[0].length-1),b=e[0].split("=")[0].trim();if(b.substring(0,1)==="_")throw Error("The prop "+b+" is reserved for internal use only.");if(h=h.replace(/\\"/g,'"'),b in u)throw Error("Duplicate attribute "+b+" in tag "+o);u[b]=h,l=l.substring(0,e.index)+l.substring(e.index+e[0].length+d[0].length,l.length)}let p=/\w+\s*=\s*[']/;for(e="not null";e!==null;)if(e=p.exec(l),e!==null){let m=l.substring(e.index+e[0].length-1,l.length),d=/'[^'\\]*(?:\\.[^'\\]*)*'/.exec(m),h=d[0].substring(1,d[0].length-1),b=e[0].split("=")[0].trim();if(b.substring(0,1)==="_")throw Error("The prop "+b+" is reserved for internal use only.");if(h=h.replace(/\\'/g,"'"),b in u)throw Error("Duplicate attribute "+b+" in tag "+o);u[b]=h,l=l.substring(0,e.index)+l.substring(e.index+e[0].length+d[0].length,l.length)}if(/\S/.test(l)){let m=l.split(" ");for(let f of m)/\S/.test(f)&&(u[f]=!0)}return{tagString:r,tagType:o,tagIndex:a,tagProps:u}}function L0({contentIds:i,doenetMLs:t,callBack:e,componentInfoObjects:r,componentTypeLowerCaseMapping:a,flags:s,contentIdsToDoenetMLs:o}){let l=[],u={};for(let p of t){let m=U0(p);Ex(m,a),Ed(m,r,s),m=Ai(m,r,s),z0(m,r),Rd(m),Tp({serializedComponents:m,componentInfoObjects:r}),l.push(m);let f=wx({serializedComponents:m});for(let d in f.contentIdComponents)u[d]===void 0&&(u[d]=[]),u[d].push(...f.contentIdComponents[d])}let c=Object.keys(u);if(c.length>0){let p=function({fullSerializedComponents:f}){for(let[d,h]of c.entries()){let y=f[d];for(let b of u[h])b.children===void 0&&(b.children=[]),b.children.push({componentType:"externalContent",children:JSON.parse(JSON.stringify(y)),attributes:{newNamespace:{primitive:!0}},doenetAttributes:{createUniqueName:!0}})}e({contentIds:i,fullSerializedComponents:l,calledAsynchronously:!0})};o({contentIds:c,callBack:function({newDoenetMLs:f,newContentIds:d,success:h,message:y}){h||console.warn(y);for(let[g,v]of c.entries())if(d[g]&&d[g].substring(0,v.length)!==v)throw Error(`Requested contentId ${v} but got back ${d[g]}!`);let b=c.length;for(let g=0;g<b;g++){let v=d[g];if(v){let C=f[g],w=Sx.default.stringify((0,Cx.default)(C));if(v!==w)throw Error(`Incorrect DoenetML returned for contentId: ${v}`)}else console.warn(`Unable to retrieve content with contentId = ${c[g]}`),f[g]=""}L0({doenetMLs:f,contentIds:d,callBack:p,componentInfoObjects:r,componentTypeLowerCaseMapping:a,flags:s,contentIdsToDoenetMLs:o})}})}else e({contentIds:i,fullSerializedComponents:l,calledAsynchronously:!1})}function U0(i,t=!0){if(i===void 0)return[];if(t){let s=i.search("<!--");for(;s!==-1;){let o=i.search("-->");o===-1?o=i.length:o=o+3,i=i.substring(0,s)+i.substring(o,i.length),s=i.search("<!--")}}let e=[],r="",a="";for(;i.length>0;){let s=Ax(i);if(s===!1)return i.length>0&&e.push({componentType:"string",state:{value:i}}),e;if(s.tagString.substring(s.tagString.length-2,s.tagString.length-1)==="/")r=i.substring(0,s.tagIndex),a="",i=i.substring(s.tagIndex+s.tagString.length,i.length);else{let u=1,c=0,p=JSON.parse(JSON.stringify(s)),m=0,f="";for(;u>c;){if(m=Number(m)+Number(p.tagString.length)+Number(p.tagIndex),f=i.substring(m,i.length),p=Ax(f),p===!1)throw Error("No matching </"+s.tagType+"> end tag");p.tagType===s.tagType&&u++,p.tagType==="/"+s.tagType&&c++}r=i.substring(0,s.tagIndex);let d=Number(s.tagIndex)+Number(s.tagString.length),h=Number(m)+Number(p.tagIndex);a=i.substring(d,h),i=i.substring(Number(h)+Number(p.tagString.length),i.length)}/\S/.test(r)?e.push({componentType:"string",state:{value:r}}):r.length>0&&e.push({componentType:"string",state:{value:r}});let l=[];if(a.length>0&&(l=U0(a,!1)),e.push({componentType:s.tagType,children:l,props:s.tagProps}),!/\S/.test(i)){if(i.length>0&&e.push({componentType:"string",state:{value:i}}),t){let u,c;for(let[p,m]of e.entries())(m.componentType!=="string"||m.state.value.trim()!=="")&&(u===void 0&&(u=p),c=p);e=e.slice(u,c+1)}return e}}return e}function z0(i,t){for(let e of i){if(e.children){let r=t.allComponentClasses[e.componentType];r&&!r.includeBlankStringChildren&&(e.children=e.children.filter(a=>a.componentType!=="string"||a.state.value.trim()!=="")),z0(e.children,t)}for(let r in e.attributes){let a=e.attributes[r].component;a&&a.children&&z0([a],t)}}}function wx({serializedComponents:i}){let t={};for(let e of i)if(e.componentType==="copy"){if(e.attributes&&e.attributes.uri){let r=e.attributes.uri.primitive;if(r&&r.substring(0,7).toLowerCase()==="doenet:"){let a=r.match(/[:&]contentid=([^&]+)/i);if(a){let s=a[1];t[s]===void 0&&(t[s]=[]),t[s].push(e)}}}}else if(e.children!==void 0){let r=wx({serializedComponents:e.children});for(let a in r.contentIdComponents)t[a]===void 0&&(t[a]=[]),t[a].push(...r.contentIdComponents[a])}return{contentIdComponents:t}}function xx(i){if(i.length!==1||i[0].componentType!=="document"){let t=i.splice(0);i.push({componentType:"document",children:t})}}function Ex(i,t){for(let e of i){let r=t[e.componentType.toLowerCase()];if(r)e.componentType=r;else throw Error(`Invalid component type: ${e.componentType}`);e.children&&Ex(e.children,t)}}function Ed(i,t,e){for(let r of i){let a=t.allComponentClasses[r.componentType],s=a.createAttributesObject({flags:e}),o={};for(let c in s)o[c.toLowerCase()]=c;let l={},u=Object.assign({},r.props);if(r.props)for(let c in r.props){let p=o[c.toLowerCase()],m=s[p];if(m){if(p in l)throw Error(`Cannot repeat prop ${p}`);l[p]=ro({attrObj:m,value:r.props[c],originalComponentProps:u,componentInfoObjects:t,flags:e}),delete r.props[c]}else if(!["name","assignnames","tname"].includes(c.toLowerCase()))if(a.acceptAnyAttribute)l[c]=ro({value:r.props[c],originalComponentProps:u,componentInfoObjects:t,flags:e});else throw Error(`Invalid attribute for component of type ${r.componentType}: ${c}`)}for(let c in s){let p=s[c];p.createPrimitiveOfType&&"defaultPrimitiveValue"in p&&!(c in l)&&(l[c]=ro({attrObj:p,originalComponentProps:u,value:p.defaultPrimitiveValue.toString(),componentInfoObjects:t,flags:e}))}r.attributes=l,r.children!==void 0&&Ed(r.children,t,e)}}function ro({attrObj:i,value:t,originalComponentProps:e,componentInfoObjects:r,flags:a}){if(typeof t!="object"&&(t={rawString:t.toString()}),i&&i.createComponentOfType){let s,o=t.rawString.trim().toLowerCase();if(o==="true"&&i.valueForTrue!==void 0)s={componentType:i.createComponentOfType,state:{value:i.valueForTrue}};else if(o==="false"&&i.valueForFalse!==void 0)s={componentType:i.createComponentOfType,state:{value:i.valueForFalse}};else if(r.isInheritedComponentType({inheritedComponentType:i.createComponentOfType,baseComponentType:"boolean"})&&["true","false"].includes(o))s={componentType:i.createComponentOfType,state:{value:o==="true"}};else{let l=t.childrenForComponent;l?l=JSON.parse(JSON.stringify(l)):l=[{componentType:"string",state:{value:t.rawString}}],s={componentType:i.createComponentOfType,children:l}}if(i.attributesForCreatedComponent||i.copyComponentAttributesForCreatedComponent){if(i.attributesForCreatedComponent?s.props=i.attributesForCreatedComponent:s.props={},i.copyComponentAttributesForCreatedComponent)for(let l of i.copyComponentAttributesForCreatedComponent)e[l]&&(s.props[l]=JSON.parse(JSON.stringify(e[l])));Ed([s],r,a)}return{component:s}}else if(i&&i.createPrimitiveOfType){let s;return i.createPrimitiveOfType==="boolean"?s=t.rawString.trim().toLowerCase()==="true":i.createPrimitiveOfType==="number"?s=Number(t.rawString):i.createPrimitiveOfType==="integer"?s=Math.round(Number(t.rawString)):s=t.rawString,i.validationFunction&&(s=i.validationFunction(s)),{primitive:s}}else return t.childrenForComponent||(t.childrenForComponent=[{componentType:"string",state:{value:t.rawString}}]),t}function H0(i){let t=[];for(let e of i)if(e.preSugarInd!==void 0)t.push(e.preSugarInd);else if(e.doenetAttributes||(e.doenetAttributes={}),e.doenetAttributes.createdFromSugar=!0,e.children){let r=H0(e.children);t.push(...r)}return t}function Ai(i,t,e){for(let r of i)if(r.children&&(r.children=Ai(r.children,t,e)),r.attributes)for(let a in r.attributes){let s=r.attributes[a];if(s.component){let o=s.component;o.children&&(o.children=Ai(o.children,t,e))}else s.childrenForComponent&&(s.childrenForComponent=Ai(s.childrenForComponent,t,e))}return i=DU(i,t,e),i}function DU(i,t,e){for(let r=0;r<i.length;r++){let a=i[r];if(a.componentType==="string"){let s=0;for(;s<a.state.value.length;){let o=a.state.value,l=Vx(o.slice(s));if(!l.success)break;let u=l.firstIndMatched+s,c=l.matchLength,p=l.nDollarSigns,m;if(l.additionalAttributes){let y=`<copy tname="${l.targetName}" ${l.additionalAttributes} />`,b=U0(y);Ed(b,t,e),Ix(b),b=Ai(b,t),m=b}else{let y={tName:l.targetName,createdFromMacro:!0};l.additionalAttributes===void 0&&(y.isPlainMacro=!0),m=[{componentType:"copy",doenetAttributes:y}]}let f=1,d=o.substring(u+c);if(p===2){let y=o.slice(u+c).match(/^\s*\(/);if(!y){s=u+2;continue}let b=c+y[0].length,g=[],v=!1;o.length>u+b&&(v=!0,g.push({componentType:"string",state:{value:o.substring(u+b)}})),g.push(...i.slice(r+1));let C=_U({componentsFromMacro:m,remainingComponents:g,includeFirstInRemaining:v,componentInfoObjects:t});if(!C.success){s=u+2;continue}m=C.componentsFromMacro,f=C.lastComponentIndMatched+1,v||f++,d=""}let h=[];u>0&&h.push({componentType:"string",state:{value:o.substring(0,u)}}),h.push(...m),d.length>0&&h.push({componentType:"string",state:{value:d}}),i.splice(r,f,...h),u>0&&r++;break}}if(a.componentType==="award"&&a.children){let s=a.attributes.targetsAreResponses;if(s){let o=s.primitive.split(/\s+/).filter(l=>l);for(let l of o)Rx(a.children,l)}}}return i}function Rx(i,t){for(let e of i){let r=e.props;if(r||(r=e.doenetAttributes),r)for(let a in r)a.toLowerCase()==="tname"&&r[a]===t&&(e.attributes||(e.attributes={}),Object.keys(e.attributes).map(o=>o.toLowerCase()).includes("isresponse")||(e.attributes.isResponse=!0));e.children&&Rx(e.children,t)}}function Vx(i){let t=/(\$\$?)(([a-zA-Z_]\w*\b)|\(([a-zA-Z0-9_:.\/\-]+)\s*(\)|{))/,e=0,r;for(;;){if(r=i.substring(e).match(t),!r)return{success:!1};if(r.index===0||i[e+r.index-1]!=="$")break;e+=r.index+r[0].length}let a=r.index+e,s=r[0].length,o=r[1].length;if(r[3])return{success:!0,firstIndMatched:a,matchLength:s,targetName:r[3],nDollarSigns:o};let l=r[4];if(r[5]===")")return{success:!0,firstIndMatched:a,matchLength:s,targetName:l,nDollarSigns:o};let u=i.substring(a+s),c=PU(u);if(c.success)return{success:!0,firstIndMatched:a,matchLength:s+c.parenInd+1,targetName:l,nDollarSigns:o,additionalAttributes:u.substring(0,c.braceInd)};{let p=Vx(u);return p.success?{success:!0,firstIndMatched:a+s+p.firstIndMatched,matchLength:p.matchLength,targetName:p.targetName,nDollarSigns:p.nDollarSigns,additionalAttributes:p.additionalAttributes}:{success:!1}}}function PU(i){let t=0;for(let e=0;e<i.length;e++){let r=i[e];if(r==="}"){if(t===0){if(i.substring(e+1).trim()[0]===")"){let a=i.substring(e+1).indexOf(")")+e+1;return{success:!0,braceInd:e,parenInd:a}}return{success:!1}}t--}else r==="{"&&t++}return{success:!1}}function Ix(i){for(let t of i)t.doenetAttributes||(t.doenetAttributes={}),t.doenetAttributes.createdFromMacro=!0,t.children&&Ix(t.children)}function _U({componentsFromMacro:i,remainingComponents:t,includeFirstInRemaining:e,componentInfoObjects:r}){let a=kU(t);if(!a.success)return a;let s=a.componentInd;t=t.slice(0,s+1);let o=t[s],l="";a.charInd+1<o.state.value.length&&(l=o.state.value.substring(a.charInd+1)),a.charInd>0?o.state.value=o.state.value.substring(0,a.charInd):t=t.slice(0,s);let p=vx({childrenList:t}).pieces.map(d=>Ai(d,r)).map(d=>d.length===1&&d[0].componentType!=="string"?d[0]:{componentType:"math",doenetAttributes:{createdFromMacro:!0},children:d}),f=[{componentType:"evaluate",doenetAttributes:{createdFromMacro:!0},attributes:{function:{component:{componentType:"function",doenetAttributes:{createdFromMacro:!0},children:i}},input:{component:{componentType:"mathList",doenetAttributes:{createdFromMacro:!0},children:p}}}}];return l.length>0&&f.push({componentType:"string",state:{value:l}}),{success:!0,componentsFromMacro:f,lastComponentIndMatched:s}}function kU(i){let t=0;for(let[e,r]of i.entries())if(r.componentType==="string"){let a=r.state.value;for(let s=0;s<a.length;s++){let o=a[s];if(o==="(")t++;else if(o===")"){if(t===0)return{success:!0,componentInd:e,charInd:s};t--}}}return{success:!1}}function Rd(i){function t(e){return e.replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&dollar;/g,"$").replace(/&amp;/g,"&")}for(let e of i)if(e.componentType==="string")e.state.value=t(e.state.value);else if(e.children&&Rd(e.children),e.attributes)for(let r in e.attributes){let a=e.attributes[r];a.component?Rd([a.component]):a.primitive?typeof a.primitive=="string"&&(a.primitive=t(a.primitive)):(a.childrenForComponent&&Rd(a.childrenForComponent),a.rawString&&(a.rawString=t(a.rawString)))}}function Tp({serializedComponents:i,parentParametersFromSugar:t={},parentAttributes:e={},componentInfoObjects:r,parentUniqueId:a="",isAttributeComponent:s=!1}){for(let[o,l]of i.entries()){let u=l.componentType,c=r.allComponentClasses[u];if(!c)throw Error(`Unrecognized component type ${u}`);let p=a+"|"+u+o,m={};for(let f in l.attributes){let d=l.attributes[f];d.primitive!==void 0&&(m[f]=d.primitive)}if(m=new Proxy(m,Ge),l.children){let f={};if(!l.skipSugar)for(let[d,h]of c.returnSugarInstructions().entries()){if(l.children.length===0)break;let y=l.children.map(w=>w.componentType==="string"?"s":"n").join("");if(h.childrenRegex){let w=y.match(h.childrenRegex);if(!w||w[0].length!==l.children.length)continue}let b=xe(l.children),g=0;for(let w of b)w.componentType!=="string"&&(w.preSugarInd=g,g++);let v=!1;l.doenetAttributes&&l.doenetAttributes.createdFromMacro&&(v=!0);let C=h.replacementFunction({matchedChildren:b,parentParametersFromSugar:t,parentAttributes:e,componentAttributes:m,uniqueId:p+"|sugar"+d,componentInfoObjects:r,isAttributeComponent:s,createdFromMacro:v});if(C.success){let w=C.newChildren,S=C.newAttributes,A=[],E=[];if(w&&(A=H0(w)),S)for(let V in S){let O=S[V].component;O&&E.push(...H0(O.children))}let I=[...A,...E];if(I.length!==g||!I.sort((V,O)=>V-O).every((V,O)=>V===O))throw Error(`Invalid sugar for ${u} as didn't return set of original components`);if(A.length>0&&![...A].sort((O,k)=>O-k).every((O,k)=>O===A[k]))throw Error(`Invalid sugar for ${u} as didn't return original components in order`);C.parametersForChildrenSugar&&Object.assign(f,C.parametersForChildrenSugar),w?l.children=w:l.children=[],S&&(l.attributes||(l.attributes={}),Object.assign(l.attributes,S))}}Tp({serializedComponents:l.children,parentParametersFromSugar:f,parentAttributes:m,componentInfoObjects:r,parentUniqueId:p})}if(l.attributes)for(let f in l.attributes){let d=l.attributes[f];d.component&&Tp({serializedComponents:[d.component],parentAttributes:m,componentInfoObjects:r,parentUniqueId:p,isAttributeComponent:!0})}}}function Ox(i){let t=0,e=[];i=i.trim();let r=0;for(let s=0;s<i.length;s++){let o=i[s];if(o==="("){if(t===0){let l=i.substring(r,s).trim();l.length>0&&e.push(l),r=s}t++}else if(o===")"){if(t===0)return{success:!1};if(t===1){let l=i.substring(r+1,s).trim();if(l.length>0){let u=Ox(l);u.success===!0?e.push(u.pieces):e.push(l)}r=s+1}t--}else if(t===0&&o.match(/\s/)){let l=i.substring(r,s).trim();l.length>0&&e.push(l),r=s}}if(t!==0)return{success:!1};let a=i.substring(r,i.length).trim();return a.length>0&&e.push(a),{success:!0,pieces:e}}function no({serializedComponents:i,namespaceStack:t=[],componentInfoObjects:e,parentDoenetAttributes:r={},parentName:a,useOriginalNames:s=!1,doenetAttributesByFullTName:o,indOffset:l=0,createNameContext:u=""}){t.length===0&&t.push({namespace:"",componentCounts:{},namesUsed:{}});let c=t.length-1,p=t[c];for(let[m,f]of i.entries()){let d=f.componentType,h=e.allComponentClasses[d],y=f.doenetAttributes;y===void 0&&(y=f.doenetAttributes={});let b=f.attributes;b||(b=f.attributes={});let g=y.prescribedName,v=y.assignNames,C=y.tName,w=d==="string"||y.isAttributeChild||y.createdFromSugar||y.createdFromMacro||y.createUniqueName,S;(b.newNamespace&&b.newNamespace.primitive||s&&f.originalAttributes&&f.originalAttributes.newNamespace)&&(S=!0);let A=g!==void 0,E=f.props;if(E===void 0)E=f.props={};else for(let O in E){let k=O.toLowerCase();if(k==="name")if(g===void 0)g=E[O],delete E[O];else throw Error("Cannot define name twice for a component");else if(k==="assignnames")if(v===void 0){let M=Ox(E[O]);if(M.success)v=M.pieces;else throw Error("Invalid format for assignnames");delete E[O]}else throw Error("Cannot define assignNames twice for a component");else if(k==="tname")if(C===void 0)C=E[O],delete E[O];else throw Error("Cannot define tName twice for a component")}if(g){if(!A&&!y.createdFromSugar){if(!/[a-zA-Z]/.test(g.substring(0,1)))throw Error(`Invalid component name: ${g}.  Component name must begin with a letter`);if(!/^[a-zA-Z0-9_\-]+$/.test(g))throw Error(`Invalid component name: ${g}.  Component name can contain only letters, numbers, hyphens, and underscores`)}y.prescribedName=g}else if(w){let O=a+"|createUniqueName|";f.downstreamDependencies?O+=JSON.stringify(f.downstreamDependencies):O+=m+"|"+l+"|"+u,g=Ni(d.toLowerCase(),O)}if(!v&&s&&f.originalDoenetAttributes&&f.originalDoenetAttributes.assignNames&&(v=f.originalDoenetAttributes.assignNames),v){if(!h.assignNamesToReplacements)throw Error("Cannot assign names for component type "+f.componentType);if(y.assignNames=v,!y.createUniqueAssignNames){let k=Er(v);for(let M of k){if(!/[a-zA-Z]/.test(M.substring(0,1)))throw Error("All assigned names must begin with a letter");if(!/^[a-zA-Z0-9_\-]+$/.test(M))throw Error("Assigned names can contain only letters, numbers, hyphens, and underscores")}if(k.length!==new Set(k).size)throw Error("Duplicate assigned names")}}S&&(b.newNamespace={primitive:S});let I=p.componentCounts[d];I===void 0&&(I=0),y.isAttributeChild||y.createdFromSugar||y.createdFromMacro||(p.componentCounts[d]=++I);let V="";for(let O=0;O<=c;O++)V+=t[O].namespace+"/";if(!g){if(s&&f.originalName){let O=f.originalName.lastIndexOf("/");g=f.originalName.substring(O+1)}g||(g="_"+d.toLowerCase()+I)}if(V+=g,f.componentName=V,g){if(g in p.namesUsed)throw Error("Duplicate component name "+V);p.namesUsed[g]=!0}if(!S&&v)for(let O of Er(v)){if(O in p.namesUsed)throw Error(`Duplicate component name (from assignNames of ${V}): ${O}`);p.namesUsed[O]=!0}if(f.doenetAttributes.createUniqueAssignNames&&f.originalName){let O=f.doenetAttributes.assignNames;O||(O=f.doenetAttributes.originalAssignNames);let k=V+"|createUniqueName|assignNames|",M="",L;if(S)M=V+"/",L=f.originalName+"/";else{for(let B=0;B<=c;B++)M+=t[B].namespace+"/";let K=f.originalName.lastIndexOf("/");L=f.originalName.slice(0,K+1)}let G=Dx({originalAssignNames:O,longNameIdBase:k,namespace:M,oldNamespace:L,doenetAttributesByFullTName:o});v=f.doenetAttributes.assignNames=G}if(Px(f,o),C){if(!h.acceptTname)throw Error(`Component type ${d} does not accept a tname attribute`);y.tName=C,y.fullTName=G0({tName:C,oldFullTName:y.fullTName,namespaceStack:t,acceptDoubleUnderscore:y.createdFromSugar})}if(f.children)if(!S)no({serializedComponents:f.children,namespaceStack:t,componentInfoObjects:e,parentDoenetAttributes:y,parentName:V,useOriginalNames:s,doenetAttributesByFullTName:o});else{let O={};v&&Er(v).forEach(M=>O[M]=!0);let k={namespace:g,componentCounts:{},namesUsed:O};t.push(k),no({serializedComponents:f.children,namespaceStack:t,componentInfoObjects:e,parentDoenetAttributes:y,parentName:V,useOriginalNames:s,doenetAttributesByFullTName:o}),t.pop()}if(f.attributes)for(let O in f.attributes){let k=f.attributes[O];if(k.component){let M=k.component;M.doenetAttributes||(M.doenetAttributes={}),M.doenetAttributes.isAttributeChild=!0,no({serializedComponents:[M],namespaceStack:t,componentInfoObjects:e,parentDoenetAttributes:y,parentName:V,useOriginalNames:s,doenetAttributesByFullTName:o,createNameContext:O})}else k.childrenForComponent&&no({serializedComponents:k.childrenForComponent,namespaceStack:t,componentInfoObjects:e,parentDoenetAttributes:y,parentName:V,useOriginalNames:s,doenetAttributesByFullTName:o,createNameContext:O})}}return i}function Dx({originalAssignNames:i,longNameIdBase:t,namespace:e,oldNamespace:r,doenetAttributesByFullTName:a}){let s=[];for(let[o,l]of i.entries())if(Array.isArray(l)){let u=Dx({originalAssignNames:l,longNameIdBase:t+o+"_",namespace:e,oldNamespace:r,doenetAttributesByFullTName:a});s.push(u)}else{let u=t+o,c=Ni("fromAssignNames",u);s.push(c);let p={componentName:e+c,originalName:r+l};Px(p,a,!0)}return s}function G0({tName:i,oldFullTName:t,namespaceStack:e,acceptDoubleUnderscore:r}){if(!t&&/__/.test(i)&&!r)throw Error("Invalid reference target: "+i);let a=i,s;if(a.substring(0,1)==="/")s=a;else{let o=e.length-1;for(;a.substring(0,3)==="../";)a=a.substring(3),o--;o<0&&(o=0),s="";for(let l=0;l<=o;l++)s+=e[l].namespace+"/";s+=a}return s}function Vd(i,t){return t!==t?{objectType:"special-numeric",stringValue:"NaN"}:t===1/0?{objectType:"special-numeric",stringValue:"Infinity"}:t===-1/0?{objectType:"special-numeric",stringValue:"-Infinity"}:t}var FU=function(i,t){if(t&&t.objectType==="special-numeric"){if(t.stringValue==="NaN")return NaN;if(t.stringValue==="Infinity")return 1/0;if(t.stringValue==="-Infinity")return-1/0}return t};function Id(i,t){return OU.reviver(i,bt.Subset.reviver(i,FU(i,t)))}function Np({serializedComponents:i,componentInfoObjects:t}){let e=[];for(let r of i){if(r.componentType in t.componentTypesCreatingVariants){r.variants={isVariantComponent:!0},e.push(r);continue}if(!r.children)continue;if(r.children.some(o=>o.componentType==="variantControl")){r.variants={isVariantComponent:!0},e.push(r);continue}if(t.allComponentClasses[r.componentType].setUpVariantUnlessAttributePrimitive){let o=t.allComponentClasses[r.componentType].setUpVariantUnlessAttributePrimitive;if(!(r.attributes&&r.attributes[o]&&r.attributes[o].primitive)){r.variants={isVariantComponent:!0},e.push(r);continue}}let s=Np({serializedComponents:r.children,componentInfoObjects:t});s.length>0&&(r.variants={descendantVariantComponents:s},e.push(...s))}return e}function de({assignNames:i=[],serializedComponents:t,parentName:e,parentCreatesNewNamespace:r,componentInfoObjects:a,indOffset:s=0,originalNamesAreConsistent:o=!1}){let l=t.length;Od(t);let u={},c=null;if(o){if(l>0&&t[0].originalName){let f=t[0].originalName.lastIndexOf("/");c=t[0].originalName.substring(0,f)}if(c!==null)for(let f of t)Cp({namespace:c,components:[f],doenetAttributesByFullTName:u})}else for(let f=0;f<l;f++){let d=t[f];if(c=null,l>0&&d.originalName){let h=d.originalName.lastIndexOf("/");c=d.originalName.substring(0,h)}c!==null&&Cp({namespace:c,components:[d],doenetAttributesByFullTName:u})}let p=[],m=0;for(let f=0;f<l;f++){let d=f+s,h=t[f];if(h.componentType==="string"){m++,p.push(h);continue}let y=i[d-m];if(h.doenetAttributes||(h.doenetAttributes={}),!o&&(c=null,l>0&&h.originalName)){let b=h.originalName.lastIndexOf("/");c=h.originalName.substring(0,b)}if(a.allComponentClasses[h.componentType].assignNamesSkipOver)y=[y];else if(h.attributes&&h.attributes.assignNamesSkip){let b=h.attributes.assignNamesSkip.primitive;if(b>0)for(let g=0;g<b;g++)y=[y]}if(Array.isArray(y))if(a.allComponentClasses[h.componentType].assignNamesToReplacements){let b=e+"|assignName|"+d.toString();h.doenetAttributes.prescribedName=Ni(h.componentType.toLowerCase(),b);let g=e;if(!r){let v=e.lastIndexOf("/");g=e.substring(0,v)}g+="/"+h.doenetAttributes.prescribedName,h.componentName=g,h.doenetAttributes.assignNames=y,p.push(h);continue}else console.warn(`Cannot assign names recursively to ${h.componentType}`),y=null;if(!y)if(o&&h.originalName)y=h.originalName.slice(c.length+1);else{let b=e+"|assignName|"+d.toString();y=Ni(h.componentType.toLowerCase(),b)}h.doenetAttributes.prescribedName=y,o&&!h.doenetAttributes.assignNames&&h.originalDoenetAttributes&&h.originalDoenetAttributes.assignNames&&(h.doenetAttributes.assignNames=h.originalDoenetAttributes.assignNames),MU({parentName:e,ind:d,component:h,parentCreatesNewNamespace:r,componentInfoObjects:a,doenetAttributesByFullTName:u,originalNamesAreConsistent:o}),p.push(h)}return{serializedComponents:p}}function MU({parentName:i,component:t,ind:e,parentCreatesNewNamespace:r,componentInfoObjects:a,doenetAttributesByFullTName:s,originalNamesAreConsistent:o}){let l=i.split("/");r||l.pop();let u=l.map(p=>({namespace:p,componentCounts:{},namesUsed:{}}));i[0]!=="/"&&u.splice(0,0,{componentCounts:{},namesUsed:{},namespace:""}),t.doenetAttributes||(t.doenetAttributes={}),t.attributes||(t.attributes={});let c;t.attributes.newNamespace&&t.attributes.newNamespace.primitive||o?c=!0:(c=!1,t.children&&Dl(t.children));for(let p in t.attributes){let m=t.attributes[p];m.component?Dl([m.component]):m.childrenForComponent&&Dl(m.childrenForComponent)}no({serializedComponents:[t],namespaceStack:u,componentInfoObjects:a,parentName:i,useOriginalNames:c,doenetAttributesByFullTName:s,indOffset:e})}function Cp({namespace:i,components:t,doenetAttributesByFullTName:e}){let r=i.length;for(let a of t){if(a.doenetAttributes&&a.doenetAttributes.tName){let s=a.doenetAttributes.fullTName;s!==void 0&&(s.substring(0,r)!==i&&(a.doenetAttributes.tName=s),e[s]||(e[s]=[]),e[s].push(a.doenetAttributes))}if(a.children&&Cp({namespace:i,components:a.children,doenetAttributesByFullTName:e}),a.attributes)for(let s in a.attributes){let o=a.attributes[s];o.component?Cp({namespace:i,components:[o.component],doenetAttributesByFullTName:e}):o.childrenForComponent&&Cp({namespace:i,components:o.childrenForComponent,doenetAttributesByFullTName:e})}}}function Px(i,t,e=!1){if(i.originalName&&t&&i.componentName!==i.originalName){if(t[i.originalName])for(let r of t[i.originalName])r.tName=i.componentName,r.fullTName=i.componentName;if(e){let r=i.originalName+"/",a=r.length;for(let s in t)if(s.substring(0,a)===r){let o=s.substring(a);for(let l of t[s])l.tName=i.componentName+"/"+o,l.fullTName=i.componentName+"/"+o}}}}function Od(i){for(let t of i)if(t.componentName&&(t.originalName=t.componentName,delete t.componentName),t.children&&Od(t.children),t.attributes)for(let e in t.attributes){let r=t.attributes[e];r.component?Od([r.component]):r.childrenForComponent&&Od(r.childrenForComponent)}}function Dl(i){for(let t of i)if(t.doenetAttributes||(t.doenetAttributes={}),t.doenetAttributes.createUniqueName=!0,t.doenetAttributes.assignNames?(t.doenetAttributes.createUniqueAssignNames=!0,t.doenetAttributes.originalAssignNames=t.doenetAttributes.assignNames,delete t.doenetAttributes.assignNames):t.originalDoenetAttributes&&t.originalDoenetAttributes.assignNames&&(t.doenetAttributes.createUniqueAssignNames=!0,t.doenetAttributes.originalAssignNames=t.originalDoenetAttributes.assignNames),delete t.doenetAttributes.prescribedName,t.children&&Dl(t.children),t.attributes)for(let e in t.attributes){let r=t.attributes[e];r.component?Dl([r.component]):r.childrenForComponent&&Dl(r.childrenForComponent)}}function Qa(i){for(let t of i){if(t.doenetAttributes&&t.doenetAttributes.tName){let e=t.doenetAttributes.fullTName;e!==void 0&&(t.doenetAttributes.tName=e)}if(t.children&&Qa(t.children),t.attributes)for(let e in t.attributes){let r=t.attributes[e];r.component?Qa([r.component]):r.childrenForComponent&&Qa(r.childrenForComponent)}}}function Sp(i,t,e){e===void 0&&(e=t);let r=t.length;for(let a of i){if(a.doenetAttributes&&a.doenetAttributes.tName){let s=a.doenetAttributes.tName;if(s[0]==="/"){if(s.substring(0,r)!==t){let o=t+s.substring(1);a.doenetAttributes.tName=o,a.doenetAttributes.fullTName=o}}else if(s.substring(0,3)==="../"){let o=s,l=e;for(;o.substring(0,3)==="../";){o=o.substring(3);let u=l.substring(0,l.length-1).lastIndexOf("/");if(l=l.substring(0,u+1),l.substring(0,r)!==t){for(;o.substring(0,3)==="../";)o=o.substring(3);let c=t+o;a.doenetAttributes.tName=c,a.doenetAttributes.fullTName=c;break}}}}if(a.children){let s=e;a.attributes.newNamespace&&a.attributes.newNamespace.primitive&&(s=a.componentName),Sp(a.children,t,s)}if(a.attributes)for(let s in a.attributes){let o=a.attributes[s];o.component?Sp([o.component],t,e):o.childrenForComponent&&Sp(o.childrenForComponent,t,e)}}}function Rr({serializedComponents:i,componentName:t,addShadowDependencies:e=!0,uniqueIdentifiersUsed:r=[],identifierPrefix:a="",unlinkExternalCopies:s=!1,copiesByFullTName:o={},componentNamesFound:l=[],assignNamesFound:u=[],activeAliases:c=[],init:p=!0}){for(let m in i){let f=i[m],d;if(f.originalName){if(s){if(l.push(f.originalName),f.originalDoenetAttributes&&f.originalDoenetAttributes.assignNames){let h;if(f.attributes.newNamespace&&f.attributes.newNamespace.primitive)h=f.originalName;else{let y=f.originalName.lastIndexOf("/");h=f.originalName.substring(0,y)}for(let y of f.originalDoenetAttributes.assignNames)l.push(h+"/"+y),u.push(h+"/"+y)}f.attributes&&(f.attributes.alias&&c.push(f.attributes.alias.primitive),f.attributes.indexAlias&&c.push(f.attributes.indexAlias.primitive))}if(d=a+f.originalName+"|shadow",e&&!f.originalNameFromSerializedComponent){let h={[f.originalName]:[{dependencyType:"referenceShadow",compositeName:t}]};if(p&&(h[f.originalName][0].firstLevelReplacement=!0),f.state){let y=Object.keys(f.state);h[f.originalName].downstreamStateVariables=y,h[f.originalName].upstreamStateVariables=y}f.downstreamDependencies=h}}else d=a+f.componentType+"|shadowUnnamed";if(f.componentType==="copy"&&s){let h=f.doenetAttributes.fullTName;if(h)c.includes(f.doenetAttributes.tName)?f.doenetAttributes.fullTName=f.doenetAttributes.tName:(o[h]===void 0&&(o[h]=[]),o[h].push(f));else if(!f.attributes.uri)throw Error("we need to create a fullTName here, then.")}f.uniqueIdentifier=Ci(d,r)}for(let m in i){let f=i[m];Rr({serializedComponents:f.children,componentName:t,addShadowDependencies:e,uniqueIdentifiersUsed:r,identifierPrefix:a,unlinkExternalCopies:s,copiesByFullTName:o,componentNamesFound:l,assignNamesFound:u,activeAliases:[...c],init:!1});for(let d in f.attributes){let h=f.attributes[d];h.component&&(h.component=Rr({serializedComponents:[h.component],componentName:t,addShadowDependencies:e,uniqueIdentifiersUsed:r,identifierPrefix:a,unlinkExternalCopies:s,copiesByFullTName:o,componentNamesFound:l,assignNamesFound:u,activeAliases:[...c],init:!1})[0])}f.replacements&&Rr({serializedComponents:f.replacements,componentName:t,addShadowDependencies:e,uniqueIdentifiersUsed:r,identifierPrefix:a,unlinkExternalCopies:s,copiesByFullTName:o,componentNamesFound:l,assignNamesFound:u,activeAliases:[...c],init:!1})}if(p&&s){for(let m in o)if(!l.includes(m)){let f=!1;for(let d of u){let h=d+"/",y=h.length;if(m.substring(0,y)===h){f=!0;break}}if(!f)for(let d of o[m])d.attributes||(d.attributes={}),d.attributes.link={primitive:!1},d.doenetAttributes.tName=d.doenetAttributes.fullTName}}return i}function Ye({attributes:i,componentType:t,componentInfoObjects:e,compositeAttributesObj:r={},compositeCreatesNewNamespace:a,flags:s}){let o=e.allComponentClasses[t],l=o.createAttributesObject({flags:s}),u={};for(let p in l)u[p.toLowerCase()]=p;let c={};for(let p in i){if(p in r&&!r[p].leaveRaw)continue;let m=u[p.toLowerCase()],f=l[m];if(f){if(m in c)throw Error(`Cannot repeat prop ${m}`);if(c[m]=ro({attrObj:f,value:JSON.parse(JSON.stringify(i[p])),componentInfoObjects:e}),c[m].children&&(c[m].children=Ai(c[m].children,e),a)){for(let d of c[m].children)if(d.componentType==="copy"){let h=d.doenetAttributes.tName;/[a-zA-Z_]/.test(h[0])&&(d.doenetAttributes.tName="../"+h)}}}else o.acceptAnyAttribute&&(c[p]=JSON.parse(JSON.stringify(i[p])))}return c}var nt=class extends Ee{static keepChildrenSerialized({serializedComponent:t}){return t.children===void 0?[]:Object.keys(t.children)}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.rendered={createComponentOfType:"boolean",createStateVariable:"rendered",defaultValue:this.renderedDefault,public:!0},e.isResponse={leaveRaw:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.serializedChildren={returnDependencies:()=>({serializedChildren:{dependencyType:"serializedChildren",doNotProxy:!0}}),definition:function({dependencyValues:e}){return{newValues:{serializedChildren:e.serializedChildren}}}},t.newNamespace={returnDependencies:()=>({newNamespace:{dependencyType:"attributePrimitive",attributeName:"newNamespace"}}),definition({dependencyValues:e}){return{newValues:{newNamespace:e.newNamespace}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e,alwaysCreateReplacements:r}){if(t.stateValues.rendered||r){let a=xe(t.state.serializedChildren.value),s=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;for(let l of a){let u={};"isResponse"in t.attributes&&(u=Ye({attributes:{isResponse:t.attributes.isResponse},componentType:l.componentType,componentInfoObjects:e,compositeCreatesNewNamespace:s})),l.attributes||(l.attributes={}),Object.assign(l.attributes,u)}return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:s,componentInfoObjects:e,originalNamesAreConsistent:s||!t.doenetAttributes.assignNames}).serializedComponents}}else return{replacements:[]}}get allPotentialRendererTypes(){let t=super.allPotentialRendererTypes,e=this.potentialRendererTypesFromSerializedComponents(this.stateValues.serializedChildren);for(let r of e)t.includes(r)||t.push(r);return t}};T(nt,"componentType","template"),T(nt,"treatAsComponentForRecursiveReplacements",!0),T(nt,"includeBlankStringChildren",!0),T(nt,"renderedDefault",!1),T(nt,"assignNamesToReplacements",!0),T(nt,"originalNamesAreConsistent",!0);import Je from"math-expressions";import tt from"math-expressions";var Pl=["abs","exp","log","ln","log10","sign","sqrt","erf","acos","acosh","acot","acoth","acsc","acsch","asec","asech","asin","asinh","atan","atanh","cos","cosh","cot","coth","csc","csch","sec","sech","sin","sinh","tan","tanh","arcsin","arccos","arctan","arccsc","arcsec","arccot","cosec","arg","min","max","mean","median","floor","ceil","round","sum","prod","var","std","count","mod"],q0=["alpha","beta","gamma","Gamma","delta","Delta","epsilon","zeta","eta","theta","Theta","iota","kappa","lambda","Lambda","mu","nu","xi","Xi","pi","Pi","rho","sigma","Sigma","tau","Tau","upsilon","Upsilon","phi","Phi","chi","psi","Psi","omega","Omega","partial","varnothing","emptyset"],fr=new tt.converters.textToAstObj({appliedFunctionSymbols:Pl});function io({functionSymbols:i,appliedFunctionSymbols:t=Pl,splitSymbols:e=!0}){return r=>tt.fromAst(new tt.converters.textToAstObj({appliedFunctionSymbols:t,functionSymbols:i,splitSymbols:e}).convert(r))}var Dd=new tt.converters.latexToAstObj({appliedFunctionSymbols:Pl,allowedLatexSymbols:q0});function _x({functionSymbols:i,appliedFunctionSymbols:t=Pl,splitSymbols:e=!0}){return e?r=>tt.fromAst(new tt.converters.latexToAstObj({appliedFunctionSymbols:t,functionSymbols:i,allowedLatexSymbols:q0}).convert(BU(r))):r=>tt.fromAst(new tt.converters.latexToAstObj({appliedFunctionSymbols:t,functionSymbols:i,allowedLatexSymbols:q0}).convert(jU(r)))}function Lr({value:i,simplify:t,expand:e=!1,createVectors:r=!1,createIntervals:a=!1}){return r&&(i=i.tuples_to_vectors()),a&&(i=i.to_intervals()),e&&(i=i.expand()),t==="full"?i.simplify():t==="numbers"?i.evaluate_numbers():t==="numberspreserveorder"?i.evaluate_numbers({skip_ordering:!0}):i}function it(i){if(i!==void 0)return Number.isFinite(i)||i.evaluate_to_constant!==void 0&&(i=i.evaluate_to_constant(),Number.isFinite(i))?i:null}function Ze(i){return i==null?tt.fromAst("\uFF3F"):i instanceof tt.class?i:typeof i=="number"||typeof i=="string"?tt.fromAst(i):tt.fromAst("\uFF3F")}function vn(i,t){if(!Number.isInteger(i)||i<1)return[];let e=t.length;if(e===0){if(i===1)return[tt.fromAst("x")];if(i===2)return[tt.fromAst("x"),tt.fromAst("y")];if(i===3)return[tt.fromAst("x"),tt.fromAst("y"),tt.fromAst("z")];{let s=[];for(let o=1;o<=i;o++)s.push(tt.fromAst(fr.convert(`x_${o}`)));return s}}if(new Set(t.map(s=>s.toString())).size<e&&console.warn("Duplicate variables specified"),i<=e)return t.slice(0,i);let r=[...t.map(s=>s.toString())],a=[...t];for(let s=e+1;s<=i;s++){let o;s==1?i>3?o=["x_1"]:o=["x"]:s==2?i>3?o=["x_2","y_2"]:o=["y","x_2"]:s==3?i>3?o=["x_3","y_3","z_3"]:o=["z","x_3","z_3"]:o=["x","y","z","u","v","w","X","Y","Z"].map(u=>`${u}_${s}`);let l=!1;for(let u of o)if(!r.includes(u)){a.push(tt.fromAst(fr.convert(u))),r.push(u),l=!0;break}if(!l){let u=o[0];a.push(tt.fromAst(fr.convert(u))),r.push(u),console.warn("Variables added were not unique")}}return a}function kx({desiredVector:i,currentVector:t,workspace:e,workspaceKey:r}){if(i.tree[0]==="vector"&&t.tree[0]==="vector"){let a;e[r]?a=e[r].slice(0):a=t.tree.slice(0);for(let[s,o]of i.tree.entries())o!==void 0&&(a[s]=o);i=tt.fromAst(a),e[r]=a}return i}function Pd(i){let t=i.tree,e=!0;return typeof t=="string"?t==="\uFF3F"&&(e=!1):(!Array.isArray(t)||t[0]!=="_"||typeof t[1]!="string"||typeof t[2]!="string"&&typeof t[2]!="number")&&(e=!1),e}function _d({numberVariableName:i="number",mathVariableName:t="math",isPublic:e=!1}={}){let r={returnDependencies:()=>({number:{dependencyType:"stateVariable",variableName:i}}),definition:function({dependencyValues:a}){return{newValues:{[t]:tt.fromAst(a.number)}}},inverseDefinition:function({desiredStateVariableValues:a}){let s=a[t].evaluate_to_constant();return s===null&&(s=NaN),{success:!0,instructions:[{setDependency:"number",desiredValue:s}]}}};return e&&(r.public=!0,r.componentType="math"),r}function dr({value:i,dependencyValues:t,usedDefault:e}){let r;return e.displayDigits&&!e.displayDecimals?Number.isFinite(t.displayDecimals)?r=tt.round_numbers_to_decimals(i,t.displayDecimals):r=i:(t.displayDigits>=1?r=tt.round_numbers_to_precision(i,t.displayDigits):r=i,t.displaySmallAsZero>0&&(r=tt.evaluate_numbers(r,{skip_ordering:!0,set_small_zero:t.displaySmallAsZero}))),r}function W0(i){if(!Array.isArray(i))return i;let t=i[0],e=i.slice(1);return["tuple","vector","list","set"].includes(t)&&(e=e.reduce((r,a)=>Array.isArray(a)&&a[0]==="list"?[...r,...a.slice(1)]:[...r,a],[])),e=e.map(r=>W0(r)),[t,...e]}function jU(i){let t="",e=/\\var\s*{[^{}]*}/,r=i.match(e);for(;r;){let a=r.index,s=a+r[0].length;t+=Fx(i.substring(0,a)),t+=i.substring(a,s),i=i.substring(s),r=i.match(e)}return t+=Fx(i),t}function Fx(i){let t="",e=/([^a-zA-Z0-9]?)([a-zA-Z][a-zA-Z0-9]+)([^a-zA-Z0-9]?)/,r=i.match(e);for(;r;){let a=r.index,s=a+r[0].length-r[3].length;if(r[1]==="\\")t+=i.substring(0,s),i=i.substring(s);else{let o=a+r[1].length;t+=i.substring(0,o),t+=`\\var{${r[2]}}`,i=i.substring(s)}r=i.match(e)}return t+=i,t}function BU(i){let t="",e=/\\var\s*{[^{}]*}/,r=i.match(e);for(;r;){let a=r.index,s=a+r[0].length;t+=Mx(i.substring(0,a)),t+=i.substring(a,s),i=i.substring(s),r=i.match(e)}return t+=Mx(i),t}function Mx(i){let t="",e=/([^a-zA-Z0-9]?)([a-zA-Z][a-zA-Z0-9]*[0-9][a-zA-Z0-9]*)([^a-zA-Z0-9]?)/,r=i.match(e);for(;r;){let a=r.index,s=a+r[0].length-r[3].length;if(r[1]==="\\")t+=i.substring(0,s),i=i.substring(s);else{let o=a+r[1].length;t+=i.substring(0,o),t+=`\\var{${r[2]}}`,i=i.substring(s)}r=i.match(e)}return t+=i,t}var rt=class extends re{static get stateVariablesShadowedForReference(){return["unnormalizedValue","unordered"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.format={createComponentOfType:"text",createStateVariable:"format",defaultValue:"text",public:!0,toLowerCase:!0,validValues:["text","latex"]},e.simplify={createComponentOfType:"text",createStateVariable:"simplify",defaultValue:"none",public:!0,toLowerCase:!0,valueTransformations:{true:"full"},validValues:["none","full","numbers","numberspreserveorder"]},e.expand={createComponentOfType:"boolean",createStateVariable:"expand",defaultValue:!1,public:!0},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e.renderMode={createComponentOfType:"text",createStateVariable:"renderMode",defaultValue:"inline",public:!0,forRenderer:!0},e.unordered={createComponentOfType:"boolean"},e.createVectors={createComponentOfType:"boolean",createStateVariable:"createVectors",defaultValue:!1,public:!0},e.createIntervals={createComponentOfType:"boolean",createStateVariable:"createIntervals",defaultValue:!1,public:!0},e.functionSymbols={createComponentOfType:"textList",createStateVariable:"functionSymbols",defaultValue:["f","g"],public:!0},e.targetsAreFunctionSymbols={createComponentOfType:"textList",createStateVariable:"targetsAreFunctionSymbols",defaultValue:[]},e.splitSymbols={createComponentOfType:"boolean",createStateVariable:"splitSymbols",defaultValue:!0,public:!0},e.groupCompositeReplacements={createComponentOfType:"boolean",createStateVariable:"groupCompositeReplacements",defaultValue:!0},e}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"strings",componentTypes:["string"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.valueShadow={defaultValue:Je.fromAst("\uFF3F"),returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{valueShadow:{variablesToCheck:["value","valueShadow","unnormalizedValue"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"valueShadow",value:e.valueShadow}]}}},t.unordered={defaultValue:!1,public:!0,returnDependencies:()=>({unorderedAttr:{dependencyType:"attributeComponent",attributeName:"unordered",variableNames:["value"]},mathChildren:{dependencyType:"child",childGroups:["maths"],variableNames:["unordered"]}}),definition({dependencyValues:e}){return e.unorderedAttr===null?e.mathChildren.length>0?{newValues:{unordered:e.mathChildren.every(a=>a.stateValues.unordered)}}:{useEssentialOrDefaultValue:{unordered:{variablesToCheck:["unordered"]}}}:{newValues:{unordered:e.unorderedAttr.stateValues.value}}}},t.codePre={returnDependencies:()=>({stringChildren:{dependencyType:"child",childGroups:["strings"],variableNames:["value"]}}),definition:LU},t.mathChildrenFunctionSymbols={returnDependencies:()=>({targetsAreFunctionSymbols:{dependencyType:"stateVariable",variableName:"targetsAreFunctionSymbols"},mathChildren:{dependencyType:"child",childGroups:["maths"]}}),definition({dependencyValues:e}){let r=[];for(let[a,s]of e.mathChildren.entries())e.targetsAreFunctionSymbols.includes(s.compositeTname)&&r.push(a);return{newValues:{mathChildrenFunctionSymbols:r}}}},t.expressionWithCodes={returnDependencies:()=>({stringMathChildren:{dependencyType:"child",childGroups:["strings","maths"],variableNames:["value"]},format:{dependencyType:"stateVariable",variableName:"format"},codePre:{dependencyType:"stateVariable",variableName:"codePre"},createVectors:{dependencyType:"stateVariable",variableName:"createVectors"},createIntervals:{dependencyType:"stateVariable",variableName:"createIntervals"},functionSymbols:{dependencyType:"stateVariable",variableName:"functionSymbols"},mathChildrenFunctionSymbols:{dependencyType:"stateVariable",variableName:"mathChildrenFunctionSymbols"},splitSymbols:{dependencyType:"stateVariable",variableName:"splitSymbols"},groupCompositeReplacements:{dependencyType:"stateVariable",variableName:"groupCompositeReplacements"}}),definition:UU,inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"expressionWithCodes",value:e.expressionWithCodes}]}}},t.mathChildrenWithCanBeModified={returnDependencies:()=>({mathChildren:{dependencyType:"child",childGroups:["maths"],variableNames:["value","canBeModified"]}}),definition:({dependencyValues:e})=>({newValues:{mathChildrenWithCanBeModified:e.mathChildren}})},t.unnormalizedValue={returnDependencies:()=>({mathChildren:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},stringChildren:{dependencyType:"child",childGroups:["strings"],variableNames:["value"]},expressionWithCodes:{dependencyType:"stateVariable",variableName:"expressionWithCodes"},codePre:{dependencyType:"stateVariable",variableName:"codePre"},valueShadow:{dependencyType:"stateVariable",variableName:"valueShadow"}}),set:Ze,defaultValue:Je.fromAst("\uFF3F"),definition:zU,inverseDefinition:qU},t.value={public:!0,componentType:this.componentType,returnDependencies:()=>({unnormalizedValue:{dependencyType:"stateVariable",variableName:"unnormalizedValue"},simplify:{dependencyType:"stateVariable",variableName:"simplify"},expand:{dependencyType:"stateVariable",variableName:"expand"},createVectors:{dependencyType:"stateVariable",variableName:"createVectors"},createIntervals:{dependencyType:"stateVariable",variableName:"createIntervals"}}),definition:function({dependencyValues:e}){let r=e.unnormalizedValue,{simplify:a,expand:s,createVectors:o,createIntervals:l}=e;return r=Lr({value:r,simplify:a,expand:s,createVectors:o,createIntervals:l}),{newValues:{value:r}}},inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setDependency:"unnormalizedValue",desiredValue:e.value}]}}},t.number={public:!0,componentType:"number",returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){let r=e.value.evaluate_to_constant();return r===null&&(r=NaN),{newValues:{number:r}}},inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setDependency:"value",desiredValue:Je.fromAst(e.number)}]}}},t.isNumber={public:!0,componentType:"boolean",returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){return{newValues:{isNumber:Number.isFinite(e.value.tree)}}}},t.isNumeric={public:!0,componentType:"boolean",returnDependencies:()=>({number:{dependencyType:"stateVariable",variableName:"number"}}),definition:function({dependencyValues:e}){return{newValues:{isNumeric:Number.isFinite(e.number)}}}},t.valueForDisplay={returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"},simplify:{dependencyType:"stateVariable",variableName:"simplify"},expand:{dependencyType:"stateVariable",variableName:"expand"}}),definition:function({dependencyValues:e,usedDefault:r}){let a=dr({value:e.value,dependencyValues:e,usedDefault:r});return{newValues:{valueForDisplay:Lr({value:a,simplify:e.simplify,expand:e.expand})}}}},t.latex={public:!0,componentType:"text",returnDependencies:()=>({valueForDisplay:{dependencyType:"stateVariable",variableName:"valueForDisplay"}}),definition:function({dependencyValues:e}){return{newValues:{latex:e.valueForDisplay.toLatex()}}}},t.latexWithInputChildren={forRenderer:!0,returnDependencies:()=>({latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:e}){return{newValues:{latexWithInputChildren:[e.latex]}}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({valueForDisplay:{dependencyType:"stateVariable",variableName:"valueForDisplay"},value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){return{newValues:{text:e.valueForDisplay.toString()}}},inverseDefinition({desiredStateVariableValues:e,stateValues:r}){let a=io({functionSymbols:r.functionSymbols,splitSymbols:r.splitSymbols}),s;try{s=a(e.text)}catch(o){return{success:!1}}return{success:!0,instructions:[{setDependency:"value",desiredValue:s}]}}},t.codesAdjacentToStrings={returnDependencies:()=>({stringMathChildren:{dependencyType:"child",childGroups:["strings","maths"]},codePre:{dependencyType:"stateVariable",variableName:"codePre"},format:{dependencyType:"stateVariable",variableName:"format"}}),definition:HU},t.canBeModified={additionalStateVariablesDefined:["constantChildIndices","codeForExpression","inverseMaps","template","mathChildrenMapped"],returnDependencies:()=>({mathChildrenModifiable:{dependencyType:"child",childGroups:["maths"],variableNames:["canBeModified"]},expressionWithCodes:{dependencyType:"stateVariable",variableName:"expressionWithCodes"},modifyIndirectly:{dependencyType:"stateVariable",variableName:"modifyIndirectly"},fixed:{dependencyType:"stateVariable",variableName:"fixed"},codePre:{dependencyType:"stateVariable",variableName:"codePre"}}),definition:GU},t.mathChildrenByArrayComponent={returnDependencies:()=>({codePre:{dependencyType:"stateVariable",variableName:"codePre"},mathChildren:{dependencyType:"child",childGroups:["maths"]},expressionWithCodes:{dependencyType:"stateVariable",variableName:"expressionWithCodes"}}),definition:function({dependencyValues:e}){if(e.expressionWithCodes===null)return{newValues:{mathChildrenByArrayComponent:null}};let r=e.expressionWithCodes.tree,a=e.mathChildren.length;if(a===0||!Array.isArray(r)||!["tuple","vector"].includes(r[0]))return{newValues:{mathChildrenByArrayComponent:null}};let s={},o=0,l=e.codePre+o;for(let u=1;u<r.length;u++){let c=r[u],p=s[u]=[];if(Array.isArray(c)){let m=Er(c);for(;l in m;)p.push(o),o++,l=e.codePre+o}else c===l&&(p.push(o),o++,l=e.codePre+o);if(o>=a)break}return{newValues:{mathChildrenByArrayComponent:s}}}},t.nDimensions={public:!0,componentType:"integer",returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition({dependencyValues:e}){let r=1,a=e.value.tree;return Array.isArray(a)&&["vector","tuple","list"].includes(a[0])&&(r=a.length-1),{newValues:{nDimensions:r}}}},t.xs={public:!0,componentType:"math",isArray:!0,entryPrefixes:["x"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey(){return{globalDependencies:{value:{dependencyType:"stateVariable",variableName:"value"}}}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r,arraySize:a}){let s=e.value.tree,o=Array.isArray(s)&&["vector","tuple","list"].includes(s[0]),l={};if(o)for(let u=0;u<a[0];u++)l[u]=Je.fromAst(s[u+1]);else l[0]=e.value;return{newValues:{xs:l}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,stateValues:r,workspace:a,arraySize:s}){a.desiredXs||(a.desiredXs=[]);for(let u=0;u<s[0];u++)e.xs[u]!==void 0?a.desiredXs[u]=Ze(e.xs[u]):a.desiredXs[u]===void 0&&(a.desiredXs[u]=r.xs[u]);let o;if(s[0]>1){let u=r.value.tree[0];o=Je.fromAst([u,...a.desiredXs.map(c=>c.tree)])}else o=a.desiredXs[0];return{success:!0,instructions:[{setDependency:"value",desiredValue:o}]}}},t.x={isAlias:!0,targetVariableName:"x1"},t.y={isAlias:!0,targetVariableName:"x2"},t.z={isAlias:!0,targetVariableName:"x3"},t}};T(rt,"componentType","math"),T(rt,"primaryStateVariableForDefinition","unnormalizedValue"),T(rt,"useChildrenForReference",!1),T(rt,"descendantCompositesMustHaveAReplacement",!0),T(rt,"descendantCompositesDefaultReplacementType","math"),T(rt,"adapters",["number","text",{componentType:"subsetOfReals",stateVariable:"value",substituteForPrimaryStateVariable:"subsetValue"}]);function LU({dependencyValues:i}){let t="math",e=!1;do{e=!1;for(let r of i.stringChildren)if(r.componentType==="string"&&r.stateValues.value.includes(t)===!0){e=!0,t+="m";break}}while(e);return{newValues:{codePre:t}}}function UU({dependencyValues:i,changes:t}){if(!("stringMathChildren"in t&&t.stringMathChildren.componentIdentitiesChanged||"format"in t||"createIntervals"in t||"createVectors"in t||"splitSymbols"in t))return{noChanges:["expressionWithCodes"]};if(i.stringMathChildren.length===0)return{newValues:{expressionWithCodes:null}};let e="",r=0,a,s="",o=0,l;for(let p of i.stringMathChildren){if(o>0&&p.compositeInd!==a){if(o>1){let m=e.trimEnd(),f=!1;if(m.length===0)f=!0;else{let d=m[m.length-1];if(!["{","[","(","|",","].includes(d))f=!0;else if(p.componentType!=="string")f=!0;else{let h=p.stateValues.value.trimStart();if(h.length===0)f=!0;else{let y=h[0];i.format==="latex"&&y==="\\"&&h.length>1&&(y=h[1]),["}","]",")","|",","].includes(y)||(f=!0)}}}f&&(s="("+s+")")}e+=s,s="",o=0}if(p.componentType==="string")e+=s+" "+p.stateValues.value+" ",s="",o=0,p.compositeInd!==void 0&&(l=p.compositeInd);else{let m=i.codePre+r;r++;let f;i.format==="latex"?f="\\var{"+m+"}":f=" "+m+" ",i.groupCompositeReplacements&&p.compositeInd!==void 0&&p.compositeInd!==l?(p.compositeInd===a&&(s+=","),s+=f,o++):(e+=f,s="",o=0)}a=p.compositeInd}o>0&&(o>1&&(s="("+s+")"),e+=s);let u=null,c=[...i.functionSymbols];if(c.push(...i.mathChildrenFunctionSymbols.map(p=>i.codePre+p)),e==="")u=Je.fromAst("\uFF3F");else{if(i.format==="text"){let p=io({functionSymbols:c,splitSymbols:i.splitSymbols});try{u=p(e)}catch(m){u=Je.fromAst("\uFF3F"),console.log("Invalid value for a math of text format: "+e)}}else if(i.format==="latex"){let p=_x({functionSymbols:c,splitSymbols:i.splitSymbols});try{u=p(e)}catch(m){u=Je.fromAst("\uFF3F"),console.log("Invalid value for a math of latex format: "+e)}}i.createVectors&&(u=u.tuples_to_vectors()),i.createIntervals&&(u=u.to_intervals())}return{newValues:{expressionWithCodes:u},makeEssential:{expressionWithCodes:!0}}}function zU({dependencyValues:i}={}){if(i.expressionWithCodes===null)return{newValues:{unnormalizedValue:i.valueShadow},makeEssential:{unnormalizedValue:!0}};let t={};for(let[r,a]of i.mathChildren.entries())t[i.codePre+r]=a.stateValues.value;let e=i.expressionWithCodes;return i.mathChildren.length>0&&(e=e.substitute(t)),e=Je.fromAst(W0(e.tree)),{newValues:{unnormalizedValue:e},makeEssential:{unnormalizedValue:!0}}}function HU({dependencyValues:i}){let t=[],e;for(let[r,a]of i.stringMathChildren.entries())if(a.componentType==="string"){let s=i.stringMathChildren[r+1];if(s!==void 0&&s.componentType==="string")continue;let o={};if(e!==void 0&&(i.format==="latex"?o.prevCode="\\var{"+i.codePre+e+"}":o.prevCode=i.codePre+e),s!==void 0){let l=0;e!==void 0&&(l=e+1),i.format==="latex"?o.nextCode="\\var{"+i.codePre+l+"}":o.nextCode=i.codePre+l}t.push(o)}else e===void 0?e=0:e++;return{newValues:{codesAdjacentToStrings:t}}}function GU({dependencyValues:i}){if(!i.modifyIndirectly||i.fixed)return{newValues:{canBeModified:!1,constantChildIndices:null,codeForExpression:null,inverseMaps:null,template:null,mathChildrenMapped:null}};if(i.mathChildrenModifiable.length===0)return{newValues:{canBeModified:!0,constantChildIndices:null,codeForExpression:null,inverseMaps:null,template:null,mathChildrenMapped:null}};let t=[],e=[],r=[],a={};for(let[u,c]of i.mathChildrenModifiable.entries()){let p=i.codePre+u;c.stateValues.canBeModified===!0?(t.push(u),e.push(p)):(r.push(p),a[p]=u)}let s=i.codePre+"expr",o=Je.utils.unflattenLeft(i.expressionWithCodes.tree),l=jx(o,e,s,r);if(l.foundLinear){let u={},c=l.template,p=new Set;for(let m in l.mappings){u[m]=l.mappings[m];let f=u[m].mathChildSub;if(f){let d=t[e.indexOf(f)];u[m].mathChildInd=d,p.add(Number(d))}}return p.has=p.has.bind(p),{newValues:{canBeModified:!0,constantChildIndices:a,codeForExpression:s,inverseMaps:u,template:c,mathChildrenMapped:p}}}return{newValues:{canBeModified:!1,constantChildIndices:null,codeForExpression:null,inverseMaps:null,template:null,mathChildrenMapped:null}}}function jx(i,t,e,r=[],a=[]){let s=Je.variables(i);if(s.every(u=>!t.includes(u))&&s.every(u=>!r.includes(u))){let u={},c="x"+a.join("_");return u[c]={result:Je.fromAst(e).simplify(),components:a},{foundLinear:!0,mappings:u,template:c}}if(!Array.isArray(i))return es(i,t,e,a);let o=i[0],l=i.slice(1);if(o==="tuple"||o==="vector"||o==="list"){let u={mappings:{},template:[o]},c=0;for(let p=0;p<l.length;p++){let m=[...a,p],f=jx(l[p],t,e,r,m);f.foundLinear?(c++,u.mappings=Object.assign(u.mappings,f.mappings),u.template.push(f.template)):u.template.push("x"+m.join("_"))}return c===0?{foundLinear:!1}:(u.foundLinear=!0,u)}else return es(i,t,e,a)}function es(i,t,e,r=[]){if(typeof i=="string"&&t.includes(i)){let o={},l="x"+r.join("_");return o[l]={result:Je.fromAst(e).simplify(),components:r,mathChildSub:i},{foundLinear:!0,mappings:o,template:l}}if(!Array.isArray(i))return{foundLinear:!1};let a=i[0],s=i.slice(1);return a==="-"?(e=["-",e],es(s[0],t,e,r)):a==="+"?Je.variables(s[0]).every(o=>!t.includes(o))?(e=["+",e,["-",s[0]]],es(s[1],t,e,r)):Je.variables(s[1]).every(o=>!t.includes(o))?(e=["+",e,["-",s[1]]],es(s[0],t,e,r)):{foundLinear:!1}:a==="*"?Je.variables(s[0]).every(o=>!t.includes(o))?(e=["/",e,s[0]],es(s[1],t,e,r)):Je.variables(s[1]).every(o=>!t.includes(o))?(e=["/",e,s[1]],es(s[0],t,e,r)):{foundLinear:!1}:a==="/"?Je.variables(s[1]).every(o=>!t.includes(o))?(e=["*",e,s[1]],es(s[0],t,e,r)):{foundLinear:!1}:{foundLinear:!1}}function qU({desiredStateVariableValues:i,dependencyValues:t,stateValues:e,workspace:r,overrideFixed:a}){if(!e.canBeModified&&!a)return{success:!1};let s=Ze(i.unnormalizedValue),o=e.value,l;if(s.tree[0]==="tuple"||s.tree[0]==="vector")if(o&&(o.tree[0]==="tuple"||o.tree[0]==="vector")){let d;r.desiredExpressionAst?d=r.desiredExpressionAst.slice(0,s.tree.length):d=o.tree.slice(0,s.tree.length);let h=[],y=!1;for(let[b,g]of s.tree.entries())g===void 0?(y=!0,h.push(b)):d[b]=g;s=Je.fromAst(d),r.desiredExpressionAst=d,y&&(l=h)}else{let d=[],h=!1;for(let y of s.tree.slice(1))y===void 0?(d.push("\uFF3F"),h=!0):d.push(y);h&&(s=Je.fromAst([s.tree[0],...d]))}let u=t.mathChildren,c=t.stringChildren;if(u.length===0){let d=[];for(let h=0;h<c.length;h++)d.push({deferSettingDependency:"stringChildren",inverseDefinition:Bx,childIndex:h,variableIndex:0,dependencyValues:{mathChildren:t.mathChildren,stringChildren:t.stringChildren}});return d.push({setStateVariable:"unnormalizedValue",value:s}),c.length===0&&d.push({setDependency:"valueShadow",desiredValue:s}),{success:!0,instructions:d}}if(u.length===1&&c.length===0)return{success:!0,instructions:[{setDependency:"mathChildren",desiredValue:s,childIndex:0,variableIndex:0}]};let p=WU({expression:s,stateValues:e});if(!p)return{success:!1};let m=[],f=[];if(l&&e.mathChildrenByArrayComponent)for(let d of l)e.mathChildrenByArrayComponent[d]&&f.push(...e.mathChildrenByArrayComponent[d]);for(let[d,h]of u.entries())if(e.mathChildrenMapped.has(d)&&e.mathChildrenWithCanBeModified[d].stateValues.canBeModified){if(!f.includes(d)){let y=p[d],b={},g=!1;for(let v in e.constantChildIndices){let C=e.constantChildIndices[v];b[v]=u[C].stateValues.value,g=!0}g&&(y=y.substitute(b)),y=y.simplify(),m.push({setDependency:"mathChildren",desiredValue:y,childIndex:d,variableIndex:0})}delete p[d]}if(c.length>0){let d=e.expressionWithCodes;for(let h in p){let y=e.inverseMaps[h];if(y.mathChildInd!==void 0)continue;let b=y.components;d=d.substitute_component(b,p[h])}m.push({setDependency:"expressionWithCodes",desiredValue:d});for(let h=0;h<c.length;h++)m.push({deferSettingDependency:"stringChildren",inverseDefinition:Bx,childIndex:h,variableIndex:0,dependencyValues:{mathChildren:t.mathChildren,stringChildren:t.stringChildren}})}return{success:!0,instructions:m}}function Bx({dependencyValues:i,stateValues:t}){let e=i.mathChildren,r=i.stringChildren;if(e.length===0){let s;t.format==="latex"?s=t.value.toLatex():s=t.value.toString();let o=[{setDependency:"stringChildren",desiredValue:s,childIndex:0,variableIndex:0}];for(let l=1;l<r.length;l++)o.push({setDependency:"stringChildren",desiredValue:"",childIndex:l,variableIndex:0});return{success:!0,instructions:o}}let a=[];if(r.length>0){let s;t.format==="latex"?s=t.expressionWithCodes.toLatex():s=t.expressionWithCodes.toString();for(let[o,l]of t.codesAdjacentToStrings.entries()){let u=s;Object.keys(l).length===0?a.push({setDependency:"stringChildren",desiredValue:"",childIndex:o,variableIndex:0}):(l.prevCode&&(u=u.split(l.prevCode)[1]),l.nextCode&&(u=u.split(l.nextCode)[0]),a.push({setDependency:"stringChildren",desiredValue:u,childIndex:o,variableIndex:0}))}}return{success:!0,instructions:a}}function WU({expression:i,stateValues:t}){let e=Je.utils.match(i.tree,t.template);if(!e&&(e=Je.utils.match(i.tuples_to_vectors().tree,Je.fromAst(t.template).tuples_to_vectors().tree),!e&&(e=Je.utils.match(i.to_intervals().tree,Je.fromAst(t.template).to_intervals().tree),!e&&(e=Je.utils.match(i.tuples_to_vectors().to_intervals().tree,Je.fromAst(t.template).tuples_to_vectors().to_intervals().tree),!e))))return!1;let r={};for(let a in e){let s={};s[t.codeForExpression]=e[a];let o=t.inverseMaps[a];if(o!==void 0){let l=a;o.mathChildInd!==void 0&&(l=o.mathChildInd),r[l]=o.result.substitute(s),r[l]=Lr({value:r[l],simplify:t.simplify,expand:t.expand,createvectors:t.createvectors,createintervals:t.createintervals})}}return r}var kd=class extends mr{};T(kd,"componentType","columns"),T(kd,"rendererType","text");var Fd=class extends Ti{};T(Fd,"componentType","title"),T(Fd,"rendererType","textOrInline");var Md=class extends rt{};T(Md,"componentType","rightHandSide"),T(Md,"rendererType","math");var jd=class extends Ti{};T(jd,"componentType","description"),T(jd,"rendererType");var $0=class extends nt{};T($0,"componentType","else");var K0=class extends nt{};T(K0,"componentType","externalContent");var J0={};lt(J0,{M:()=>wi,Me:()=>Y0,Men:()=>Z0});import $U from"math-expressions";var wi=class extends re{static returnChildGroups(){return[{group:"stringsTextsAndMaths",componentTypes:["string","text","math","mathList","m","mathInput"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.latex={public:!0,componentType:"text",defaultValue:"",returnDependencies:()=>({stringTextMathChildren:{dependencyType:"child",childGroups:["stringsTextsAndMaths"],variableNames:["latex","text"],variablesOptional:!0}}),definition:function({dependencyValues:e,componentInfoObjects:r}){if(e.stringTextMathChildren.length===0)return{useEssentialOrDefaultValue:{latex:{variablesToCheck:"latex"}}};let a="";for(let s of e.stringTextMathChildren)s.stateValues.latex?a+=s.stateValues.latex:s.stateValues.text&&(a+=s.stateValues.text);return{newValues:{latex:a}}}},t.latexWithInputChildren={forRenderer:!0,returnDependencies:()=>({stringTextMathChildren:{dependencyType:"child",childGroups:["stringsTextsAndMaths"],variableNames:["latex","text"],variablesOptional:!0},latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){if(e.stringTextMathChildren.length===0)return{newValues:{latexWithInputChildren:[e.latex]}};let a=[],s="",o=0;for(let l of e.stringTextMathChildren)r.isInheritedComponentType({inheritedComponentType:l.componentType,baseComponentType:"mathInput"})?(s.length>0&&(a.push(s),s=""),a.push(o),o++):l.stateValues.latex?s+=l.stateValues.latex:l.stateValues.text&&(s+=l.stateValues.text);return s.length>0&&a.push(s),{newValues:{latexWithInputChildren:a}}}},t.renderMode={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{renderMode:"inline"}})},t.text={returnDependencies:()=>({latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:e}){let r;try{r=$U.fromAst(Dd.convert(e.latex))}catch(a){return{newValues:{text:e.latex}}}return{newValues:{text:r.toString()}}}},t}};T(wi,"componentType","m"),T(wi,"rendererType","math"),T(wi,"includeBlankStringChildren",!0),T(wi,"primaryStateVariableForDefinition","latex");var Y0=class extends wi{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.renderMode.definition=()=>({newValues:{renderMode:"display"}}),t}};T(Y0,"componentType","me");var Z0=class extends wi{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.renderMode.definition=()=>({newValues:{renderMode:"numbered"}}),t.equationTag={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({equationCounter:{dependencyType:"counter",counterName:"equation"}}),definition({dependencyValues:e}){return{newValues:{equationTag:String(e.equationCounter)}}}},t}};T(Z0,"componentType","men");var t2={};lt(t2,{Md:()=>ao,Mdn:()=>Q0,Mrow:()=>e2});import KU from"math-expressions";var ao=class extends re{static get stateVariablesShadowedForReference(){return["latex"]}static returnChildGroups(){return[{group:"mrows",componentTypes:["mrow"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mrowChildNames={forRenderer:!0,returnDependencies:()=>({mrowChildren:{dependencyType:"child",childGroups:["mrows"]}}),definition:({dependencyValues:e})=>({newValues:{mrowChildNames:e.mrowChildren.map(r=>r.componentName)}})},t.latex={public:!0,componentType:"text",defaultValue:"",returnDependencies:()=>({mrowChildren:{dependencyType:"child",childGroups:["mrows"],variableNames:["latex","hide","equationTag","numbered"]}}),definition:function({dependencyValues:e}){if(e.mrowChildren.length>0){let r="";for(let a of e.mrowChildren)a.stateValues.hide||(r.length>0&&(r+="\\\\"),a.stateValues.numbered?r+=`\\tag{${a.stateValues.equationTag}}`:r+="\\notag ",r+=a.stateValues.latex);return{newValues:{latex:r}}}else return{useEssentialOrDefaultValue:{latex:{variablesToCheck:"latex"}}}}},t.latexWithInputChildren={forRenderer:!0,returnDependencies:()=>({mrowChildren:{dependencyType:"child",childGroups:["mrows"],variableNames:["latexWithInputChildren","hide","equationTag","numbered"]},latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:e}){if(e.mrowChildren.length>0){let r=[],a=0,s="";for(let o of e.mrowChildren)if(!o.stateValues.hide){s.length>0&&(s+="\\\\"),o.stateValues.numbered?s+=`\\tag{${o.stateValues.equationTag}}`:s+="\\notag ";for(let l of o.stateValues.latexWithInputChildren)typeof l=="number"?(s.length>0&&(r.push(s),s=""),r.push(a),a++):s+=l}return s.length>0&&r.push(s),{newValues:{latexWithInputChildren:r}}}else return{newValues:{latexWithInputChildren:[e.latex]}}}},t.text={returnDependencies:()=>({latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:e}){let r;try{r=e.latex.replaceAll("\\notag","").replaceAll("\\amp","").split("\\\\").map(a=>KU.fromAst(Dd.convert(a)).toString()).join(`\\\\
`)}catch(a){return{newValues:{text:e.latex}}}return{neswValues:{text:r}}}},t.renderMode={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{renderMode:"align"}})},t.numbered={returnDependencies:()=>({}),definition:()=>({newValues:{numbered:!1}})},t}};T(ao,"componentType","md"),T(ao,"rendererType","math"),T(ao,"primaryStateVariableForDefinition","latex"),T(ao,"useChildrenForReference",!1);var Q0=class extends ao{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numbered={returnDependencies:()=>({}),definition:()=>({newValues:{numbered:!0}})},t}};T(Q0,"componentType","mdn");var e2=class extends wi{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.number={createComponentOfType:"boolean"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.renderMode.definition=()=>({newValues:{renderMode:"display"}}),t.numbered={forRenderer:!0,returnDependencies:()=>({parentNumbered:{dependencyType:"parentStateVariable",variableName:"numbered"},numberAttr:{dependencyType:"attributeComponent",attributeName:"number",variableNames:["value"]}}),definition({dependencyValues:e}){let r;return e.numberAttr!==null?r=e.numberAttr.stateValues.value:r=e.parentNumbered,{newValues:{numbered:r}}}},t.equationTag={public:!0,componentType:"text",forRenderer:!0,stateVariablesDeterminingDependencies:["numbered"],returnDependencies({stateValues:e}){return e.numbered?{equationCounter:{dependencyType:"counter",counterName:"equation"}}:{}},definition({dependencyValues:e}){return e.equationCounter!==void 0?{newValues:{equationTag:String(e.equationCounter)}}:{newValues:{equationTag:null}}}},t}};T(e2,"componentType","mrow");var o2={};lt(o2,{And:()=>i2,Not:()=>n2,Or:()=>a2,Xor:()=>s2});import Ft from"math-expressions";import Ur from"math-expressions";function r2(i,t,{min_elements_match:e=3,match_partial:r=!1}={}){if(!Lx(i))return!1;if(Lx(t))if(r){let a=_l(i.tree,t.tree,r);if(a===!1)return 0;let s=_l(t.tree,i.tree,r);return s===!1?0:a===!0?s===!0?1:s:s===!0?a:Math.min(a,s)}else return _l(i.tree,t.tree,r)&&_l(t.tree,i.tree,r);else{let a=i.tree.slice(1);if(a.length>1)return!1;let s=Ur.fromAst(a[0][1]).evaluate_to_constant(),o=Ur.fromAst(["apply","abs",a[0][2]]).evaluate_to_constant();if(!Number.isFinite(s)||!Number.isFinite(o))return!1;let l=a[0][3],u=a[0][4];if(l!==-1/0||u!==1/0||t.tree[0]!=="list")return!1;let c=t.tree.slice(1),p=0;if(c[0][0]==="ldots")p++,c=c.slice(1);else if(!r)return!1;if(c[c.length-1][0]==="ldots")p++,c=c.slice(0,c.length-1);else if(!r)return!1;let m=c.length;if(m===0||!r&&m<e)return!1;c=c.map(y=>Ur.fromAst(y).evaluate_to_constant()).map(y=>Number.isFinite(y)?y:NaN);let f=Ur.math.mod(c[0]-s,o);if(!(Ur.math.min(f,o-f)<1e-10*o))return!1;let d=1;for(let y=1;y<m;y++)if(Math.abs(c[y]-c[y-1]-o)<1e-10*o)d++;else{if(!r)return!1;break}if(d===m&&p===2&&m>=e)return!0;let h=d/Math.max(m,e);return h*=(9+p/2)/10,h;return!1}}function Lx(i){var t=i.tree;if(!Array.isArray(t)||t[0]!=="periodic_set")return!1;var e=t.slice(1);for(var r of e)if(!Array.isArray(r)||r[0]!=="tuple"||r.length!==5)return!1;return!0}function _l(i,t,e){if(i[0]==="periodic_set")if(e){let m=0;for(let d of i.slice(1)){let h=_l(d,t,e);h===!0?m++:h!==!1&&(m+=h)}let f=i.length-1;return m===f?!0:m===0?!1:m/f}else return i.slice(1).every(m=>_l(m,t));var r=i[1],a=i[2],s=i[3],o=i[4];if(s!==-1/0||o!==1/0)return!1;r=Ur.fromAst(["/",r,a]).evaluate_to_constant();var l=t.slice(1),u=[];for(let m=0;m<l.length;m++){let f=l[m][3],d=l[m][4];if(f!==-1/0||d!==1/0)return!1;let h=Ur.fromAst(["/",l[m][1],a]).evaluate_to_constant(),y=Ur.fromAst(["apply","abs",["/",l[m][2],a]]).evaluate_to_constant();if(typeof y!="number")return!1;let b=Ur.math.fraction(y),g=b.n;if(g>1e3)return!1;let v=b.d;u.push([g,v,h,y])}for(u.sort();u[0][0]===1;){let f=u[0][2],d=u[0][3],h=Ur.fromAst(["+",f,["-",r]]).evaluate_to_constant();if(Number.isFinite(h)&&Number.isFinite(d)&&(h=Ur.math.mod(h,d),Ur.math.min(h,d-h)<1e-10*d))return!0;if(u.splice(0,1),u.length===0)return!1}var c=[...new Set(u.map(m=>m[0]))];let p=0;for(let m of c){let f=u.map(function(h,y){let b=m/h[0];if(Number.isInteger(b))return[h[0],b,y]}).filter(h=>h),d=[];for(let h of f){let y=h[0],b=h[1],g=h[2],v=u[g][2],C=u[g][3];for(let w=0;w<y;w++){let S=Ur.fromAst(["+",v,["-",["+",r,w]]]).evaluate_to_constant();if(Number.isFinite(S)&&Number.isFinite(C)&&(S=Ur.math.mod(S,C),Ur.math.min(S,C-S)<1e-10*C)){for(let E=0;E<b;E++)d[w+E*y]=!0;let A=!0;for(let E=0;E<m;E++)if(!d[E]){A=!1;break}if(A)return!0;break}}}if(e){let h=0;for(let y=0;y<m;y++)d[y]&&h++;h/=m,h>p&&(p=h)}}return e&&p>0?p:!1}function Vr({object1:i,object2:t,isUnordered:e=!1,partialMatches:r=!1,matchByExactPositions:a=!1,symbolicEquality:s=!1,simplify:o="none",expand:l=!1,allowedErrorInNumbers:u=0,includeErrorInNumberExponents:c=!1,allowedErrorIsAbsolute:p=!1,nSignErrorsMatched:m=0,nPeriodicSetMatchesRequired:f=3}){let d=!1;if(i instanceof Ft.class){if(d=!0,!(t instanceof Ft.class))if(typeof t=="number"||typeof t=="string")t=Ft.fromAst(t);else return{fraction_equal:0}}else if(t instanceof Ft.class)if(d=!0,typeof i=="number"||typeof i=="string")i=Ft.fromAst(i);else return{fraction_equal:0};let h=function(S){return S instanceof Ft.class||(S=Ft.fromAst(S)),S=S.normalize_function_names().normalize_applied_functions(),o==="none"?u>0&&(S=S.constants_to_floats()):o==="numberspreserveorder"?S=S.evaluate_numbers({max_digits:1/0,skip_ordering:!0}):o==="number"?S=S.evaluate_numbers({max_digits:1/0}):S=S.evaluate_numbers({max_digits:1/0,evaluate_functions:!0}),Lr({value:S,simplify:o,expand:l})},y;if(d?s?y=function(S,A){let E=h(S),I=h(A);if(m>0){I=JSON.parse(JSON.stringify(I),Ft.reviver);let V=function(k,M){return k.variables().includes("\uFF3F")||M.variables().includes("\uFF3F")?!1:(k=h(k),k.equalsViaSyntax(M,{allowed_error_in_numbers:u,include_error_in_number_exponents:c,allowed_error_is_absolute:p}))};return{fraction_equal:Ft.equalSpecifiedSignErrors(I,E,{equalityFunction:V,n_sign_errors:m})?1:0}}else return E.variables().includes("\uFF3F")||I.variables().includes("\uFF3F")?{fraction_equal:0}:{fraction_equal:E.equalsViaSyntax(I,{allowed_error_in_numbers:u,include_error_in_number_exponents:c,allowed_error_is_absolute:p})?1:0}}:y=function(S,A){let E=S,I=A;if(S instanceof Ft.class||(E=Ft.fromAst(S)),A instanceof Ft.class||(I=Ft.fromAst(A)),m>0){I=JSON.parse(JSON.stringify(I),Ft.reviver);let V=function(k,M){return k.equals(M,{allowed_error_in_numbers:u,include_error_in_number_exponents:c,allowed_error_is_absolute:p})};return{fraction_equal:Ft.equalSpecifiedSignErrors(I,E,{equalityFunction:V,n_sign_errors:m})?1:0}}else return{fraction_equal:E.equals(I,{allowed_error_in_numbers:u,include_error_in_number_exponents:c,allowed_error_is_absolute:p})?1:0}}:y=(S,A)=>({fraction_equal:rn(S,A)?1:0}),d){let S=i.tree[0],A=t.tree[0];if(S==="periodic_set"||A==="periodic_set"){let E=i,I=t;S!=="periodic_set"&&(E=t,I=i);let V=r2(E,I,{match_partial:r,min_elements_match:f});return V===!0?{fraction_equal:1}:V===!1?{fraction_equal:0}:{fraction_equal:V}}else if(S==="list")i=i.tree.slice(1),A==="list"?t=t.tree.slice(1):t=[t.tree];else if(A==="list")t=t.tree.slice(1),i=[i.tree];else if(S==="vector"){if(i=i.tree.slice(1),A==="interval"||A==="matrix"||A==="array"||A==="set")return{fraction_equal:0};A==="tuple"||A==="vector"?t=t.tree.slice(1):t=[t.tree]}else if(A==="vector"){if(t=t.tree.slice(1),S==="interval"||S==="matrix"||S==="array"||S==="set")return{fraction_equal:0};S==="tuple"?i=i.tree.slice(1):i=[i.tree]}else if(S==="interval"){a=!0;let E=i.tree[2],I=E[1],V=E[2];if(i=i.tree[1].slice(1),A==="matrix"||A==="set")return{fraction_equal:0};if(A==="tuple"){let O=t.tree.slice(1);if(O.length===2&&I===!1&&V===!1)t=O;else return{fraction_equal:0}}else if(A==="array"){let O=t.tree.slice(1);if(O.length===2&&I===!0&&V===!0)t=O;else return{fraction_equal:0}}else if(A==="interval"){let O=t.tree[2];if(O[1]!==I||O[2]!==V)return{fraction_equal:0};t=t.tree[1].slice(1)}else return{fraction_equal:0}}else if(A==="interval"){a=!0;let E=t.tree[2],I=E[1],V=E[2];if(t=t.tree[1].slice(1),S==="matrix"||S==="set")return{fraction_equal:0};if(S==="tuple"){let O=i.tree.slice(1);if(O.length===2&&I===!1&&V===!1)i=O;else return{fraction_equal:0}}else if(S==="array"){let O=i.tree.slice(1);if(O.length===2&&I===!0&&V===!0)i=O;else return{fraction_equal:0}}else return{fraction_equal:0}}else if(S==="matrix")if(A==="matrix")i=i.tree.slice(1),t=t.tree.slice(1);else return{fraction_equal:0};else{if(A==="matrix")return{fraction_equal:0};if(S==="set"){let E=[];for(let I of i.tree.slice(1))E.some(V=>y(V,I).fraction_equal===1)||E.push(I);if(i=E,e=!0,A==="tuple"||A==="array")return{fraction_equal:0};if(A==="set"){E=[];for(let I of t.tree.slice(1))E.some(V=>y(V,I).fraction_equal===1)||E.push(I);t=E}else t=[t.tree]}else if(A==="set"){let E=[];for(let I of t.tree.slice(1))E.some(V=>y(V,I).fraction_equal===1)||E.push(I);if(t=E,e=!0,S==="tuple"||S==="array")return{fraction_equal:0};i=[i.tree]}else if(S==="tuple"){if(i=i.tree.slice(1),A==="array")return{fraction_equal:0};A==="tuple"?t=t.tree.slice(1):t=[t.tree]}else if(A==="tuple"){if(t=t.tree.slice(1),S==="array")return{fraction_equal:0};i=[i.tree]}else if(S==="array")i=i.tree.slice(1),A==="array"?t=t.tree.slice(1):t=[t.tree];else if(A==="array")t=t.tree.slice(1),i=[i.tree];else return y(i.tree,t.tree)}}else if(Array.isArray(i))Array.isArray(t)||(typeof t=="string"&&i.every(S=>typeof S=="string"&&!S.includes(","))?t=t.split(",").map(S=>S.trim()):t=[t]);else if(Array.isArray(t))typeof i=="string"&&t.every(S=>typeof S=="string"&&!S.includes(","))?i=i.split(",").map(S=>S.trim()):i=[i];else return y(i,t);let b=i.length,g=t.length,v={fraction_equal:0};if(a&&(e=!1),!e){let S=0,A=Math.min(b,g);for(let V=0;V<A;V++)S+=Vr({object1:Ft.fromAst(i[V]),object2:Ft.fromAst(t[V]),isUnordered:!1,partialMatches:!1,matchByExactPositions:!1,symbolicEquality:s,simplify:o,expand:l,allowedErrorInNumbers:u,allowedErrorIsAbsolute:p,nSignErrorsMatched:m,nPeriodicSetMatchesRequired:f}).fraction_equal;if(b===g&&b===S)return v.fraction_equal=1,v;if(!r)return v;if(a)return v.fraction_equal=S/Math.max(b,g),v;let E=Array.from(Array(b+1),V=>Array(g+1).fill(0));for(let V=0;V<b;V++)for(let O=0;O<g;O++){let k=Vr({object1:Ft.fromAst(i[V]),object2:Ft.fromAst(t[O]),isUnordered:!1,partialMatches:!1,matchByExactPositions:!1,symbolicEquality:s,simplify:o,expand:l,allowedErrorInNumbers:u,allowedErrorIsAbsolute:p,nSignErrorsMatched:m,nPeriodicSetMatchesRequired:f});E[V+1][O+1]=Math.max(E[V][O]+k.fraction_equal,E[V+1][O],E[V][O+1])}let I=E[b][g];return v.fraction_equal=I/Math.max(b,g),v}let C=new Set,w=0;for(let S of i){let A=-1,E=0;for(let[I,V]of t.entries()){if(C.has(I))continue;let O=Vr({object1:Ft.fromAst(S),object2:Ft.fromAst(V),isUnordered:!1,partialMatches:!1,matchByExactPositions:!1,symbolicEquality:s,simplify:o,expand:l,allowedErrorInNumbers:u,allowedErrorIsAbsolute:p,nSignErrorsMatched:m,nPeriodicSetMatchesRequired:f});O.fraction_equal>E&&(E=O.fraction_equal,A=I)}A!==-1&&(w+=E,C.add(A))}return b===g&&b===w&&(v.fraction_equal=1),r&&(v.fraction_equal=w/Math.max(b,g)),v}import so from"math-expressions";var XU=[...Pl,"isnumber","isinteger"],YU=io({splitSymbols:!1,appliedFunctionSymbols:XU});function Ap({dependencyValues:i,componentInfoObjects:t}){let e="comp",r=!0;for(;r;){r=!1;for(let c of i.stringChildren)if(c.stateValues.value.includes(e)){r=!0,e+="p";break}}let a="",s=0,o=[],l=0;for(let c of i.allChildren)if(c.componentType==="string")a+=" "+i.stringChildren[l].stateValues.value+" ",l++;else{let p=e+s;a+=" "+p+" ",t.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"math"})||t.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"mathList"})||t.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"number"})||t.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"numberList"})||o.push(p),s+=1}let u=null;try{u=YU(a)}catch(c){}return u&&(u=so.fromAst(wp({logicTree:u.tree,nonMathCodes:o}))),{newValues:{codePre:e,parsedExpression:u}}}function xi({logicTree:i,canOverrideUnorderedCompare:t=!1,dependencyValues:e,valueOnInvalid:r=0}){let a=g=>xi({logicTree:g,canOverrideUnorderedCompare:t,dependencyValues:e,valueOnInvalid:r});if(!Array.isArray(i)){if(typeof i=="string"){let g=e.booleanChildrenByCode[i];if(g)return e.matchPartial&&g.stateValues.fractionSatisfied!==void 0?g.stateValues.fractionSatisfied:g.stateValues.value?1:0;{let v=e.mathChildrenByCode[i];if(v){let C=v.stateValues.value.simplify().evaluate_to_constant();return Number.isFinite(C)&&C!==0?1:0}else{let C=e.numberChildrenByCode[i];if(C){let w=C.stateValues.value;return Number.isFinite(w)&&w!==0?1:0}else{if(i.toLowerCase()==="true")return 1;if(i.toLowerCase()==="false")return 0}}}}else if(typeof i=="number")return i===0?0:1;return console.warn("Invalid format for boolean condition"),r}let s=i[0],o=i.slice(1);if(s==="not")return o.length!==1?(console.warn("Invalid format for boolean condition"),r):a(o[0])===0?1:0;if(s==="and")return e.matchPartial?o.reduce((g,v)=>g+a(v),0)/o.length:o.every(g=>a(g)===1)?1:0;if(s==="or")return e.matchPartial?o.reduce((g,v)=>Math.max(a(v),g),0):o.some(g=>a(g)===1)?1:0;let l=!1,u=!1,c=!1;o.forEach(function(g){typeof g=="string"&&(g in e.mathChildrenByCode||g in e.mathListChildrenByCode||g in e.numberChildrenByCode||g in e.numberListChildrenByCode?l=!0:g in e.textChildrenByCode||g in e.textListChildrenByCode?u=!0:(g in e.booleanChildrenByCode||g in e.booleanListChildrenByCode)&&(c=!0))});let p=function(g){if(typeof g=="string"){let v=e.mathChildrenByCode[g];if(v!==void 0)return v.stateValues.value.tree;if(v=e.mathListChildrenByCode[g],v!==void 0)if(v.stateValues.maths.length===1)v.stateValues.maths[0].tree;else return["list",...v.stateValues.maths.map(C=>C.tree)];return v=e.numberChildrenByCode[g],v!==void 0?v.stateValues.value:(v=e.numberListChildrenByCode[g],v!==void 0?v.stateValues.numbers.length===1?v.stateValues.numbers[0]:["list",...v.stateValues.numbers]:g)}return Array.isArray(g)?[g[0],...g.slice(1).map(p)]:g};if(s==="apply"&&["isnumber","isinteger"].includes(o[0])){if(u||c)return 0;let v=so.fromAst(p(o[1])).simplify().evaluate_to_constant();if(!Number.isFinite(v))return 0;if(o[0]==="isnumber")return 1;{let C=Math.round(v);return Math.abs(C-v)<=1e-15*Math.abs(v)?1:0}}if(!["=","ne","<",">","le","ge","lts","gts","in","notin"].includes(s)){if(u||c)return console.warn("Invalid format for boolean condition"),r;let v=so.fromAst(p(i)).simplify().evaluate_to_constant();return Number.isFinite(v)&&v!==0?1:0}if(c){if(l||u)return console.warn("Invalid format for boolean condition"),r;let g=!1,v=!1;if(o=o.map(function(w){if(typeof w=="string"){let S=e.booleanChildrenByCode[w];return S!==void 0?S.stateValues.value:(S=e.booleanListChildrenByCode[w],S!==void 0?(S.stateValues.unordered&&(v=!0),S.stateValues.booleans):(w=w.toLowerCase().trim(),w==="true"||w==="t"?!0:w==="false"||w==="f"?!1:(console.warn("Invalid format for boolean condition"),g=!0,r)))}return console.warn("Invalid format for boolean condition"),g=!0,r}),g)return r;let C=e.unorderedCompare;if(t&&v&&(C=!0),s==="="){let w=o[0];if(e.matchPartial){let S=o.slice(1).map(E=>Vr({object1:w,object2:E,isUnordered:C,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions}));return S.reduce((E,I)=>E+I.fraction_equal,0)/S.length}else return o.slice(1).every(S=>Vr({object1:w,object2:S,isUnordered:C,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions}).fraction_equal===1)?1:0}else return s==="ne"?o.length!==2?(console.warn("Invalid format for boolean condition"),r):Vr({object1:o[0],object2:o[1],isUnordered:C,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions}).fraction_equal===0?1:0:(console.warn("Invalid format for boolean condition"),r)}else if(u){if(l)return console.warn("Invalid format for boolean condition"),r;let g=!1,v=!1,C=function(S,A=!1){if(typeof S=="string"){let E=e.textChildrenByCode[S];return E!==void 0?E.stateValues.value.trim():(E=e.textListChildrenByCode[S],E!==void 0?(E.stateValues.unordered&&(v=!0),E.stateValues.texts.map(I=>I.trim())):S.trim())}return typeof S=="number"?S.toString():A&&Array.isArray(S)&&S[0]==="*"?S.slice(1).map(C).join(" "):(console.warn("Invalid format for boolean condition"),g=!0,"")};if(o=o.map(S=>C(S,!0)),g)return r;let w=e.unorderedCompare;if(t&&v&&(w=!0),s==="="){let S=o[0];if(e.matchPartial){let A=o.slice(1).map(I=>Vr({object1:S,object2:I,isUnordered:w,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions}));return A.reduce((I,V)=>I+V.fraction_equal,0)/A.length}else return o.slice(1).every(A=>Vr({object1:S,object2:A,isUnordered:w,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions}).fraction_equal===1)?1:0}else return s==="ne"?o.length!==2?(console.warn("Invalid format for boolean condition"),0):Vr({object1:o[0],object2:o[1],isUnordered:w,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions}).fraction_equal===0?1:0:(console.warn("Invalid format for boolean condition"),r)}let m;(s==="lts"||s==="gts")&&(m=o[1].slice(1),o=o[0].slice(1));let f=!1,d=function(g){if(typeof g=="string"){let v=e.mathChildrenByCode[g];return v!==void 0?(v.stateValues.unordered&&(f=!0),v.stateValues.value.tree):(v=e.mathListChildrenByCode[g],v!==void 0?(v.stateValues.unordered&&(f=!0),v.stateValues.maths.length===1?v.stateValues.maths[0].tree:["list",...v.stateValues.maths.map(C=>C.tree)]):(v=e.numberChildrenByCode[g],v!==void 0?v.stateValues.value:(v=e.numberListChildrenByCode[g],v!==void 0?(v.stateValues.unordered&&(f=!0),v.stateValues.numbers.length===1?v.stateValues.numbers[0]:["list",...v.stateValues.numbers]):g)))}return Array.isArray(g)?[g[0],...g.slice(1).map(d)]:g},h=o.map(function(g){return so.fromAst(d(g))}),y=e.unorderedCompare;if(t&&f&&(y=!0),s==="="){let g=h[0];if(Number.isNaN(g.tree))return h.slice(1).every(v=>Number.isNaN(v.tree))?1:0;if(e.matchPartial){let v=h.slice(1).map(w=>Vr({object1:g,object2:w,isUnordered:y,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions,symbolicEquality:e.symbolicEquality,simplify:e.simplifyOnCompare,expand:e.expandOnCompare,allowedErrorInNumbers:e.allowedErrorInNumbers,includeErrorInNumberExponents:e.includeErrorInNumberExponents,allowedErrorIsAbsolute:e.allowedErrorIsAbsolute,nSignErrorsMatched:e.nSignErrorsMatched,nPeriodicSetMatchesRequired:e.nPeriodicSetMatchesRequired}));return v.reduce((w,S)=>w+S.fraction_equal,0)/v.length}else return h.slice(1).every(v=>Vr({object1:g,object2:v,isUnordered:y,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions,symbolicEquality:e.symbolicEquality,simplify:e.simplifyOnCompare,expand:e.expandOnCompare,allowedErrorInNumbers:e.allowedErrorInNumbers,includeErrorInNumberExponents:e.includeErrorInNumberExponents,allowedErrorIsAbsolute:e.allowedErrorIsAbsolute,nSignErrorsMatched:e.nSignErrorsMatched,nPeriodicSetMatchesRequired:e.nPeriodicSetMatchesRequired}).fraction_equal===1)?1:0}if(s==="ne")return Vr({object1:h[0],object2:h[1],isUnordered:y,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions,symbolicEquality:e.symbolicEquality,simplify:e.simplifyOnCompare,expand:e.expandOnCompare,allowedErrorInNumbers:e.allowedErrorInNumbers,includeErrorInNumberExponents:e.includeErrorInNumberExponents,allowedErrorIsAbsolute:e.allowedErrorIsAbsolute,nSignErrorsMatched:e.nSignErrorsMatched,nPeriodicSetMatchesRequired:e.nPeriodicSetMatchesRequired}).fraction_equal===0?1:0;if(s==="in"||s==="notin"){let g=h[0],C=h[1].tree;if(!(Array.isArray(C)&&C[0]==="set"))return console.warn("Invalid format for boolean condition"),r;if(e.matchPartial){let S=C.slice(1).map(A=>Vr({object1:g,object2:so.fromAst(A),isUnordered:y,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions,symbolicEquality:e.symbolicEquality,simplify:e.simplifyOnCompare,expand:e.expandOnCompare,allowedErrorInNumbers:e.allowedErrorInNumbers,includeErrorInNumberExponents:e.includeErrorInNumberExponents,allowedErrorIsAbsolute:e.allowedErrorIsAbsolute,nSignErrorsMatched:e.nSignErrorsMatched,nPeriodicSetMatchesRequired:e.nPeriodicSetMatchesRequired})).reduce((A,E)=>Math.max(A,E.fraction_equal),0);return s==="in"?S:1-S}else{let w=C.slice(1).some(S=>Vr({object1:g,object2:so.fromAst(S),isUnordered:y,partialMatches:e.matchPartial,matchByExactPositions:e.matchByExactPositions,symbolicEquality:e.symbolicEquality,simplify:e.simplifyOnCompare,expand:e.expandOnCompare,allowedErrorInNumbers:e.allowedErrorInNumbers,includeErrorInNumberExponents:e.includeErrorInNumberExponents,allowedErrorIsAbsolute:e.allowedErrorIsAbsolute,nSignErrorsMatched:e.nSignErrorsMatched,nPeriodicSetMatchesRequired:e.nPeriodicSetMatchesRequired}).fraction_equal===1);return s==="in"?w?1:0:w?0:1}}let b=h.map(g=>g.simplify().evaluate_to_constant());if(b.some(g=>g===null||Number.isNaN(g)))return 0;if(s==="<")return b[0]<b[1]?1:0;if(s===">")return b[0]>b[1]?1:0;if(s==="le")return b[0]<=b[1]?1:0;if(s==="ge")return b[0]>=b[1]?1:0;for(let g=0;g<m.length;g++)if(s==="lts"){if(m[g]===!0){if(!(b[g]<b[g+1]))return 0}else if(!(b[g]<=b[g+1]))return 0}else if(m[g]===!0){if(!(b[g]>b[g+1]))return 0}else if(!(b[g]>=b[g+1]))return 0;return 1}function wp({logicTree:i,nonMathCodes:t,foundNonMath:e=!1,init:r=!0}){if(!Array.isArray(i))return typeof i=="string"&&!e&&!r?so.fromAst(fr.convert(i)).tree:i;let a=i[0],s=i.slice(1);return["and","not","or"].includes(a)?a==="apply"?[a,s[0],...s.slice(1).map(o=>wp({logicTree:o,nonMathCodes:t,foundNonMath:e,init:r}))]:[a,...s.map(o=>wp({logicTree:o,nonMathCodes:t,foundNonMath:e,init:r}))]:(s.some(o=>t.includes(o))&&(e=!0),a==="apply"?[a,s[0],...s.slice(1).map(o=>wp({logicTree:o,nonMathCodes:t,foundNonMath:e,init:!1}))]:[a,...s.map(o=>wp({logicTree:o,nonMathCodes:t,foundNonMath:e,init:!1}))])}var hr=class extends re{static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.symbolicEquality={createComponentOfType:"boolean",createStateVariable:"symbolicEquality",defaultValue:!1,public:!0,ignorePropagationFromAncestors:!0},e.expandOnCompare={createComponentOfType:"boolean",createStateVariable:"expandOnCompare",defaultValue:!1,public:!0,ignorePropagationFromAncestors:!0},e.simplifyOnCompare={createComponentOfType:"text",createStateVariable:"simplifyOnCompare",defaultValue:"none",toLowerCase:!0,valueTransformations:{"":"full",true:"full"},validValues:["none","full","numbers","numbersepreserveorder"],public:!0,ignorePropagationFromAncestors:!0},e.unorderedCompare={createComponentOfType:"boolean",createStateVariable:"unorderedCompare",defaultValue:!1,public:!0,ignorePropagationFromAncestors:!0},e.matchByExactPositions={createComponentOfType:"boolean",createStateVariable:"matchByExactPositions",defaultValue:!1,public:!0,ignorePropagationFromAncestors:!0},e.allowedErrorInNumbers={createComponentOfType:"number",createStateVariable:"allowedErrorInNumbers",defaultValue:0,public:!0,ignorePropagationFromAncestors:!0},e.includeErrorInNumberExponents={createComponentOfType:"boolean",createStateVariable:"includeErrorInNumberExponents",defaultValue:!1,public:!0,ignorePropagationFromAncestors:!0},e.allowedErrorIsAbsolute={createComponentOfType:"boolean",createStateVariable:"allowedErrorIsAbsolute",defaultValue:!1,public:!0,ignorePropagationFromAncestors:!0},e.nSignErrorsMatched={createComponentOfType:"number",createStateVariable:"nSignErrorsMatched",defaultValue:0,public:!0,ignorePropagationFromAncestors:!0},e.nPeriodicSetMatchesRequired={createComponentOfType:"integer",createStateVariable:"nPeriodicSetMatchesRequired",defaultValue:3,public:!0,ignorePropagationFromAncestors:!0},e}static returnChildGroups(){return[{group:"strings",componentTypes:["string"]},{group:"mathsNumbersTextsBooleans",componentTypes:["math","mathList","number","numberList","text","textList","boolean","booleanList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.parsedExpression={additionalStateVariablesDefined:["codePre"],returnDependencies:()=>({allChildren:{dependencyType:"child",childGroups:["strings","mathsNumbersTextsBooleans"]},stringChildren:{dependencyType:"child",childGroups:["strings"],variableNames:["value"]}}),definition:Ap},t.mathChildrenByCode={additionalStateVariablesDefined:["mathListChildrenByCode","numberChildrenByCode","numberListChildrenByCode","textChildrenByCode","textListChildrenByCode","booleanChildrenByCode","booleanListChildrenByCode"],returnDependencies:()=>({allChildren:{dependencyType:"child",childGroups:["strings","mathsNumbersTextsBooleans"],variableNames:["value","texts","maths","numbers","booleans","fractionSatisfied","unordered"],variablesOptional:!0},codePre:{dependencyType:"stateVariable",variableName:"codePre"}}),definition({dependencyValues:e,componentInfoObjects:r}){let a={},s={},o={},l={},u={},c={},p={},m={},f=0,d=e.codePre;for(let h of e.allChildren)if(h.componentType!=="string"){let y=d+f;r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"math"})?a[y]=h:r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"mathList"})?s[y]=h:r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"number"})?o[y]=h:r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"numberList"})?l[y]=h:r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"text"})?u[y]=h:r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"textList"})?c[y]=h:r.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"boolean"})?p[y]=h:m[y]=h,f+=1}return{newValues:{mathChildrenByCode:a,mathListChildrenByCode:s,numberChildrenByCode:o,numberListChildrenByCode:l,textChildrenByCode:u,textListChildrenByCode:c,booleanChildrenByCode:p,booleanListChildrenByCode:m}}}},t.value={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!1,set:Boolean,returnDependencies:()=>({symbolicEquality:{dependencyType:"stateVariable",variableName:"symbolicEquality"},expandOnCompare:{dependencyType:"stateVariable",variableName:"expandOnCompare"},simplifyOnCompare:{dependencyType:"stateVariable",variableName:"simplifyOnCompare"},unorderedCompare:{dependencyType:"stateVariable",variableName:"unorderedCompare"},matchByExactPositions:{dependencyType:"stateVariable",variableName:"matchByExactPositions"},allowedErrorInNumbers:{dependencyType:"stateVariable",variableName:"allowedErrorInNumbers"},includeErrorInNumberExponents:{dependencyType:"stateVariable",variableName:"includeErrorInNumberExponents"},allowedErrorIsAbsolute:{dependencyType:"stateVariable",variableName:"allowedErrorIsAbsolute"},nSignErrorsMatched:{dependencyType:"stateVariable",variableName:"nSignErrorsMatched"},nPeriodicSetMatchesRequired:{dependencyType:"stateVariable",variableName:"nPeriodicSetMatchesRequired"},parsedExpression:{dependencyType:"stateVariable",variableName:"parsedExpression"},allChildren:{dependencyType:"child",childGroups:["strings","mathsNumbersTextsBooleans"],variableNames:["value"],variablesOptional:!0},booleanChildrenByCode:{dependencyType:"stateVariable",variableName:"booleanChildrenByCode"},booleanListChildrenByCode:{dependencyType:"stateVariable",variableName:"booleanListChildrenByCode"},textChildrenByCode:{dependencyType:"stateVariable",variableName:"textChildrenByCode"},textListChildrenByCode:{dependencyType:"stateVariable",variableName:"textListChildrenByCode"},mathChildrenByCode:{dependencyType:"stateVariable",variableName:"mathChildrenByCode"},mathListChildrenByCode:{dependencyType:"stateVariable",variableName:"mathListChildrenByCode"},numberChildrenByCode:{dependencyType:"stateVariable",variableName:"numberChildrenByCode"},numberListChildrenByCode:{dependencyType:"stateVariable",variableName:"numberListChildrenByCode"}}),definition({dependencyValues:e,usedDefault:r}){if(e.allChildren.length===0)return{useEssentialOrDefaultValue:{value:{variablesToCheck:["value"]}}};if(e.parsedExpression===null)return{newValues:{value:!1}};let a=r.unorderedCompare;return{newValues:{value:xi({logicTree:e.parsedExpression.tree,canOverrideUnorderedCompare:a,dependencyValues:e})===1}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r,componentInfoObjects:a}){if(r.allChildren.length===0)return{success:!0,instructions:[{setStateVariable:"value",value:Boolean(e.value)}]};if(r.allChildren.length===1){let s=r.allChildren[0];if(s.componentType==="string")return{success:!0,instructions:[{setDependency:"allChildren",desiredValue:e.value,childIndex:0,variableIndex:0}]};if(a.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"boolean"}))return{success:!0,instructions:[{setDependency:"allChildren",desiredValue:e.value,childIndex:0,variableIndex:0}]}}return{success:!1}}},t.text={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){return{newValues:{text:e.value?"true":"false"}}},inverseDefinition({desiredStateVariableValues:e}){let r=String(e.text).toLowerCase(),a;return r==="true"?a=!0:r==="false"&&(a=!1),a!==void 0?{success:!0,instructions:[{setDependency:"value",desiredValue:a}]}:{success:!1}}},t}};T(hr,"componentType","boolean"),T(hr,"useChildrenForReference",!1),T(hr,"descendantCompositesMustHaveAReplacement",!0),T(hr,"descendantCompositesDefaultReplacementType","math"),T(hr,"adapters",["text"]);var Zn=class extends hr{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=r.reduce(function(s,o){return o.componentType==="string"?[...s,...o.state.value.split(/\s+/).filter(l=>l).map(l=>({componentType:"boolean",children:[{componentType:"string",state:{value:l}}]}))]:[...s,o]},[]);return{success:!0,newChildren:a}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"booleans",componentTypes:["boolean"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();delete t.parsedExpression,delete t.mathChildrenByCode;let e=this;return t.value={public:!0,componentType:"boolean",forRenderer:!0,returnDependencies:()=>({booleanChildren:{dependencyType:"child",childGroups:["booleans"],variableNames:["value"]}}),definition:function({dependencyValues:r}){return{newValues:{value:e.applyBooleanOperator(r.booleanChildren.map(a=>a.stateValues.value))}}}},t}};T(Zn,"componentType","_booleanOperator"),T(Zn,"rendererType","boolean"),T(Zn,"descendantCompositesMustHaveAReplacement",!1);function yr({stateVariableDefinitions:i,oldName:t,newName:e}){let r=i[e]=i[t];if(delete i[t],r.additionalStateVariablesDefined){let u=r.additionalStateVariablesDefined.indexOf(t);u!==-1&&(r.additionalStateVariablesDefined[u]=e)}let a=r.definition,s=["newValues","useEssentialOrDefaultValue","makeEssential"],o=["noChanges","alwaysShadow"];r.definition=function(u){let c=a(u);for(let p of s)c[p]&&t in c[p]&&(c[p][e]=c[p][t],delete c[p][t]);for(let p of o)if(c[p]){let m=c[p].indexOf(t);m!==-1&&(c[p][m]=e)}return c};let l=r.inverseDefinition;l&&(r.inverseDefinition=function(u){let c=u.desiredStateVariableValues;c[t]=c[e],delete c[e];let p=l(u);if(p.success)for(let m of p.instructions)m.setStateVariable===t&&(m.setStateVariable=e);return p})}var kl=class extends hr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions(),e=this;return yr({stateVariableDefinitions:t,oldName:"value",newName:"valuePreOperator"}),t.value={public:!0,componentType:"boolean",forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"valuePreOperator"}}),definition:function({dependencyValues:r}){return{newValues:{value:e.applyBooleanOperator(r.value)}}}},t}};T(kl,"componentType","_booleanOperatorOneInput"),T(kl,"rendererType","boolean");var n2=class extends kl{static applyBooleanOperator(t){return!t}};T(n2,"componentType","not");var i2=class extends Zn{static applyBooleanOperator(t){return t.every(e=>e)}};T(i2,"componentType","and");var a2=class extends Zn{static applyBooleanOperator(t){return t.some(e=>e)}};T(a2,"componentType","or");var s2=class extends Zn{static applyBooleanOperator(t){return t.reduce((r,a)=>r+a,0)===1}};T(s2,"componentType","xor");var p2={};lt(p2,{IsBetween:()=>c2,IsInteger:()=>l2,IsNumber:()=>u2});var Ei=class extends hr{static returnSugarInstructions(){let t=[],e=function({matchedChildren:r}){return r.every(a=>a.componentType==="string"||a.doenetAttributes&&a.doenetAttributes.createdFromMacro)?r.length===1&&r[0].componentType!=="string"?{success:!1}:{success:!0,newChildren:[{componentType:"math",children:r}]}:{success:!1}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();delete t.parsedExpression,delete t.mathChildrenByCode,t.booleanOperator={returnDependencies:()=>({}),definition:()=>({newValues:{booleanOperator:r=>!1}})};let e=this;return t.value={public:!0,componentType:"boolean",forRenderer:!0,returnDependencies:()=>({mathChildren:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},booleanOperator:{dependencyType:"stateVariable",variableName:"booleanOperator"}}),definition:function({dependencyValues:r}){return{newValues:{value:r.booleanOperator(r.mathChildren.map(a=>a.stateValues.value))}}}},t}};T(Ei,"componentType","_booleanOperatorOfMath"),T(Ei,"rendererType","boolean");var l2=class extends Ei{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.booleanOperator.definition=()=>({newValues:{booleanOperator:function(e){if(console.log("values",e),e.length===0)return!1;if(e.length!==1)return console.warn("IsInteger requires exactly one math child"),null;let r=e[0].evaluate_to_constant();if(!Number.isFinite(r))return!1;let a=Math.round(r);return Math.abs(a-r)<=1e-15*Math.abs(r)}}}),t}};T(l2,"componentType","isInteger");var u2=class extends Ei{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.booleanOperator.definition=()=>({newValues:{booleanOperator:function(e){if(e.length===0)return!1;if(e.length!==1)return console.warn("IsNumber requires exactly one math child"),null;let r=e[0].evaluate_to_constant();return Number.isFinite(r)}}}),t}};T(u2,"componentType","isNumber");var c2=class extends Ei{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.limits={createComponentOfType:"numberList",createStateVariable:"limits",defaultValue:[],public:!0},e.strict={createComponentOfType:"boolean",createStateVariable:"strict",defaultValue:!1,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.booleanOperator={returnDependencies:()=>({limits:{dependencyType:"stateVariable",variableName:"limits"},strict:{dependencyType:"stateVariable",variableName:"strict"}}),definition({dependencyValues:e}){let r,a,s=e.limits[0],o=e.limits[1];if(s<o)a=s,r=o;else if(o<s)a=o,r=s;else return{newValues:{booleanOperator:()=>!1}};let l=e.strict;return{newValues:{booleanOperator:function(u){if(u.length===0)return!1;if(u.length!==1)return console.warn("IsBetween requires exactly one math child"),null;let c=u[0].evaluate_to_constant();return l?c>a&&c<r:c>=a&&c<=r}}}}},t}};T(c2,"componentType","isBetween");var O2={};lt(O2,{Abs:()=>T2,Ceil:()=>g2,ClampNumber:()=>d2,ConvertSetToList:()=>b2,Count:()=>A2,ExtractMath:()=>V2,Floor:()=>v2,Gcd:()=>R2,Max:()=>x2,Mean:()=>C2,Min:()=>w2,Mod:()=>E2,Product:()=>f2,Round:()=>y2,Sign:()=>N2,StandardDeviation:()=>S2,Sum:()=>m2,Variance:()=>Bd,WrapNumberPeriodic:()=>h2});import Fl from"math-expressions";var Ir=class extends rt{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.forceSymbolic={createComponentOfType:"boolean",createStateVariable:"forceSymbolic",defaultValue:!1,public:!0},e.forceNumeric={createComponentOfType:"boolean",createStateVariable:"forceNumeric",defaultValue:!1,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=r.reduce(function(s,o){return o.componentType==="string"?[...s,...o.state.value.split(/\s+/).filter(l=>l).map(l=>({componentType:Number.isFinite(Number(l))?"number":"math",children:[{componentType:"string",state:{value:l}}]}))]:[...s,o]},[]);return{success:!0,newChildren:a}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"numbers",componentTypes:["number"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.isNumericOperator={returnDependencies:()=>({forceNumeric:{dependencyType:"stateVariable",variableName:"forceNumeric"},forceSymbolic:{dependencyType:"stateVariable",variableName:"forceSymbolic"},mathChildren:{dependencyType:"child",childGroups:["maths"],variableNames:["isNumber"],variablesOptional:!0}}),definition({dependencyValues:e}){let r;return e.forceNumeric?r=!0:e.forceSymbolic?r=!1:e.mathChildren.length===0?r=!0:r=e.mathChildren.every(a=>a.stateValues.isNumber),{newValues:{isNumericOperator:r}}}},delete t.codePre,delete t.expressionWithCodes,delete t.mathChildrenFunctionSymbols,delete t.codesAdjacentToStrings,delete t.mathChildrenByArrayComponent,t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:e=>Fl.fromAst("\uFF3F")}})},t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:e=>Fl.fromAst("\uFF3F")}})},t.inverseMathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseMathOperator:null}})},t.inverseNumericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseNumericOperator:null}})},t.unnormalizedValue={returnDependencies:()=>({mathNumberChildren:{dependencyType:"child",childGroups:["maths","numbers"],variableNames:["value"]},isNumericOperator:{dependencyType:"stateVariable",variableName:"isNumericOperator"},mathOperator:{dependencyType:"stateVariable",variableName:"mathOperator"},numericOperator:{dependencyType:"stateVariable",variableName:"numericOperator"},inverseMathOperator:{dependencyType:"stateVariable",variableName:"inverseMathOperator"},inverseNumericOperator:{dependencyType:"stateVariable",variableName:"inverseNumericOperator"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){if(e.mathNumberChildren.length===0)return{newValues:{unnormalizedValue:Fl.fromAst("\uFF3F")}};if(e.isNumericOperator){let a=[];for(let s of e.mathNumberChildren)if(r.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"number"}))a.push(s.stateValues.value);else{let o=s.stateValues.value.evaluate_to_constant();Number.isFinite(o)||(o=NaN),a.push(o)}return{newValues:{unnormalizedValue:Fl.fromAst(e.numericOperator(a))}}}else{let a=[];for(let s of e.mathNumberChildren)r.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"number"})?a.push(Fl.fromAst(s.stateValues.value)):a.push(s.stateValues.value);return{newValues:{unnormalizedValue:e.mathOperator(a)}}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r}){if(r.mathNumberChildren.length===0)return{success:!1};if(r.isNumericOperator)if(r.inverseNumericOperator){let a=[];for(let o of r.mathNumberChildren)if(componentInfoObjects.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"number"}))a.push(o.stateValues.value);else{let l=o.stateValues.value.evaluate_to_constant();Number.isFinite(l)||(l=NaN),a.push(l)}let s=r.inverseNumericOperator({desiredValue:e.unnormalizedValue.evaluate_to_constant(),inputs:a});return s.success?{success:!0,instructions:[{setDependency:"mathNumberChildren",desiredValue:s.inputValue,childIndex:s.inputNumber,variableIndex:0}]}:{success:!1}}else return{success:!1};else if(r.inverseMathOperator){let a=[];for(let o of r.mathNumberChildren)componentInfoObjects.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"number"})?a.push(Fl.fromAst(o.stateValues.value)):a.push(o.stateValues.value);let s=r.inverseMathOperator({desiredValue:e.unnormalizedValue,inputs:a});return s.success?{success:!0,instructions:[{setDependency:"mathNumberChildren",desiredValue:s.inputValue,childIndex:s.inputNumber,variableIndex:0}]}:{success:!1}}else return{success:!1}}},t.canBeModified={returnDependencies:()=>({modifyIndirectly:{dependencyType:"stateVariable",variableName:"modifyIndirectly"},fixed:{dependencyType:"stateVariable",variableName:"fixed"},mathNumberChildren:{dependencyType:"child",childGroups:["maths","numbers"]},isNumericOperator:{dependencyType:"stateVariable",variableName:"isNumericOperator"},inverseMathOperator:{dependencyType:"stateVariable",variableName:"mathOperator"},inverseNumericOperator:{dependencyType:"stateVariable",variableName:"inverseNumericOperator"}}),definition:function({dependencyValues:e}){return{newValues:{canBeModified:e.modifyIndirectly&&!e.fixed&&e.mathNumberChildren.length===1&&(e.isNumericOperator?e.inverseNumericOperator:e.inverseMathOperator)}}}},t}};T(Ir,"componentType","_mathOperator"),T(Ir,"rendererType","math");var Or=class extends rt{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:e=>me.fromAst("\uFF3F")}})},t.inverseMathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseMathOperator:null}})},yr({stateVariableDefinitions:t,oldName:"unnormalizedValue",newName:"unnormalizedValuePreOperator"}),t.unnormalizedValue={returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"unnormalizedValuePreOperator"},mathOperator:{dependencyType:"stateVariable",variableName:"mathOperator"},inverseMathOperator:{dependencyType:"stateVariable",variableName:"inverseMathOperator"}}),definition:function({dependencyValues:e}){return{newValues:{unnormalizedValue:e.mathOperator(e.value)}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r,componentName:a}){if(r.inverseMathOperator){let s=r.inverseMathOperator(e.unnormalizedValue);return{success:!0,instructions:[{setDependency:"value",desiredValue:s}]}}else return{success:!1}}},yr({stateVariableDefinitions:t,oldName:"canBeModified",newName:"canBeModifiedPreOperator"}),t.canBeModified={returnDependencies:()=>({canBeModifiedPreOperator:{dependencyType:"stateVariable",variableName:"canBeModifiedPreOperator"},inverseMathOperator:{dependencyType:"stateVariable",variableName:"mathOperator"}}),definition:function({dependencyValues:e}){let r=e.canBeModifiedPreOperator;return e.inverseMathOperator||(r=!1),{newValues:{canBeModified:r}}}},t}};T(Or,"componentType","_mathOperatorOneInput"),T(Or,"rendererType","math");import pe from"math-expressions";var m2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.reduce((r,a)=>r+a)}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return e.reduce((r,a)=>r.add(a))}}})},t}};T(m2,"componentType","sum");var f2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.reduce((r,a)=>r*a)}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return e.reduce((r,a)=>r.multiply(a))}}})},t}};T(f2,"componentType","product");var d2=class extends Or{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.lowerValue={createComponentOfType:"number",createStateVariable:"lowerValue",defaultValue:0,public:!0},e.upperValue={createComponentOfType:"number",createStateVariable:"upperValue",defaultValue:1,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.isNumericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{isNumericOperator:!0}})},t.mathOperator={returnDependencies:()=>({lowerValue:{dependencyType:"stateVariable",variableName:"lowerValue"},upperValue:{dependencyType:"stateVariable",variableName:"upperValue"}}),definition:({dependencyValues:e})=>({newValues:{mathOperator:function(r){return Ux({value:r,lowerValue:e.lowerValue,upperValue:e.upperValue})}}})},t.inverseMathOperator={returnDependencies:()=>({lowerValue:{dependencyType:"stateVariable",variableName:"lowerValue"},upperValue:{dependencyType:"stateVariable",variableName:"upperValue"}}),definition:({dependencyValues:e})=>({newValues:{inverseMathOperator:function(r){return Ux({value:r,lowerValue:e.lowerValue,upperValue:e.upperValue})}}})},t}};T(d2,"componentType","clampNumber");function Ux({value:i,lowerValue:t,upperValue:e}){let r=i;return r instanceof pe.class&&(r=r.evaluate_to_constant()),Number.isFinite(r)?pe.fromAst(Math.max(t,Math.min(e,r))):pe.fromAst(NaN)}var h2=class extends Or{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.lowerValue={createComponentOfType:"number",createStateVariable:"lowerValue",defaultValue:0,public:!0},e.upperValue={createComponentOfType:"number",createStateVariable:"upperValue",defaultValue:1,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.isNumericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{isNumericOperator:!0}})},t.mathOperator={returnDependencies:()=>({lowerValue:{dependencyType:"stateVariable",variableName:"lowerValue"},upperValue:{dependencyType:"stateVariable",variableName:"upperValue"}}),definition:({dependencyValues:e})=>({newValues:{mathOperator:function(r){return zx({value:r,lowerValue:e.lowerValue,upperValue:e.upperValue})}}})},t.inverseMathOperator={returnDependencies:()=>({lowerValue:{dependencyType:"stateVariable",variableName:"lowerValue"},upperValue:{dependencyType:"stateVariable",variableName:"upperValue"}}),definition:({dependencyValues:e})=>({newValues:{inverseMathOperator:function(r){return zx({value:r,lowerValue:e.lowerValue,upperValue:e.upperValue})}}})},t}};T(h2,"componentType","wrapNumberPeriodic");function zx({value:i,lowerValue:t,upperValue:e}){let r=i;return r instanceof pe.class&&(r=r.evaluate_to_constant()),Number.isFinite(r)?t===e?pe.fromAst(t):(t>e&&([e,t]=[t,e]),pe.fromAst(t+pe.math.mod(r-t,e-t))):pe.fromAst(NaN)}var y2=class extends Or{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.numberDecimals={createComponentOfType:"number",createStateVariable:"numberDecimals",defaultValue:0,public:!0},e.numberDigits={createComponentOfType:"number",createStateVariable:"numberDigits",defaultValue:null,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({numberDecimals:{dependencyType:"stateVariable",variableName:"numberDecimals"},numberDigits:{dependencyType:"stateVariable",variableName:"numberDigits"}}),definition:({dependencyValues:e})=>({newValues:{mathOperator:function(r){let a=r.evaluate_numbers({max_digits:1/0,evaluate_functions:!0});return e.numberDigits!==null?a.round_numbers_to_precision(e.numberDigits):a.round_numbers_to_decimals(e.numberDecimals)}}})},t.inverseMathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseMathOperator:e=>e}})},t}};T(y2,"componentType","round");var b2=class extends Or{static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.unordered,e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.unordered={returnDependencies:()=>({}),definition:()=>({newValues:{unordered:!0},makeEssential:{unordered:!0}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){if(e!==void 0&&Array.isArray(e.tree)&&e.tree[0]==="set"){let r=[];for(let a of e.tree.slice(1))r.some(s=>e.context.equalsViaSyntax(e.context.fromAst(s),e.context.fromAst(a)))||r.push(a);return e.context.fromAst(["list",...r])}return e}}})},t}};T(b2,"componentType","convertSetToList");var g2=class extends Or{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){let r=e.evaluate_to_constant();if(!Number.isFinite(r))return pe.fromAst(["apply","ceil",e.tree]);let a=Math.round(r);return Math.abs((a-r)/r)<1e-15?pe.fromAst(a):pe.fromAst(Math.ceil(r))}}})},t.inverseMathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseMathOperator:e=>e}})},t}};T(g2,"componentType","ceil");var v2=class extends Or{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){let r=e.evaluate_to_constant();if(!Number.isFinite(r))return pe.fromAst(["apply","floor",e.tree]);let a=Math.round(r);return Math.abs((a-r)/r)<1e-15?pe.fromAst(a):pe.fromAst(Math.floor(r))}}})},t.inverseMathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseMathOperator:e=>e}})},t}};T(v2,"componentType","floor");var T2=class extends Or{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){let r=e.evaluate_to_constant();return Number.isFinite(r)?pe.fromAst(Math.abs(r)):pe.fromAst(["apply","abs",e.tree])}}})},t.inverseMathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{inverseMathOperator:function(e){let r=e,a=e.evaluate_to_constant();return Number.isFinite(a)?a<0&&(r=pe.fromAst(0)):Array.isArray(e.tree)&&e.tree[0]==="apply"&&e.tree[1]==="abs"&&(r=pe.fromAst(e.tree[2])),r}}})},t}};T(T2,"componentType","abs");var N2=class extends Or{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){let r=e.evaluate_to_constant();return Number.isFinite(r)?pe.fromAst(Math.sign(r)):pe.fromAst(["apply","sign",e.tree])}}})},t}};T(N2,"componentType","sign");var C2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){let r=e.reduce((a,s)=>a+s);return r/=e.length,r}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return e.reduce((r,a)=>r.add(a)).divide(e.length)}}})},t}};T(C2,"componentType","mean");var Bd=class extends Ir{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.population={createComponentOfType:"boolean",createStateVariable:"population",defaultValue:!1,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({population:{dependencyType:"stateVariable",variableName:"population"}}),definition:({dependencyValues:e})=>({newValues:{numericOperator:function(r){return Hx(r,e.population)}}})},t.mathOperator={returnDependencies:()=>({population:{dependencyType:"stateVariable",variableName:"population"}}),definition:({dependencyValues:e})=>({newValues:{mathOperator:function(r){return Gx(r,e.population)}}})},t}};T(Bd,"componentType","variance");function Hx(i,t){let e=0,r=0;for(let s of i)e+=s,r+=s*s;let a=i.length;return r-=e**2/a,t?r/=a:r/=a-1,r}function Gx(i,t){let e=i.length,r=i.reduce((s,o)=>s.add(o)),a=i.slice(1).reduce((s,o)=>s.add(o.pow(2)),i[0].pow(2)).subtract(r.pow(2).divide(e));return t?a=a.divide(e):a=a.divide(e-1),a}var S2=class extends Bd{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator.definition=({dependencyValues:e})=>({newValues:{numericOperator:function(r){return Math.sqrt(Hx(r,e.population))}}}),t.mathOperator.definition=({dependencyValues:e})=>({newValues:{mathOperator:function(r){return pe.fromAst(["apply","sqrt",Gx(r,e.population).tree])}}}),t}};T(S2,"componentType","standardDeviation");var A2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.isNumericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{isNumericOperator:!0}})},t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.length}}})},t}};T(A2,"componentType","count");var w2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.reduce((r,a)=>Math.min(r,a),1/0)}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return pe.fromAst(["apply","min",["tuple",...e.map(r=>r.tree)]])}}})},t}};T(w2,"componentType","min");var x2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.reduce((r,a)=>Math.max(r,a),-1/0)}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return pe.fromAst(["apply","max",["tuple",...e.map(r=>r.tree)]])}}})},t}};T(x2,"componentType","max");var E2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.length!==2?NaN:pe.math.mod(e[0],e[1])}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return e.length!==2?pe.fromAst("\uFF3F"):pe.fromAst(["apply","mod",["tuple",...e.map(r=>r.tree)]])}}})},t}};T(E2,"componentType","mod");var R2=class extends Ir{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numericOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericOperator:function(e){return e.every(Number.isInteger)?I2(...e):NaN}}})},t.mathOperator={returnDependencies:()=>({}),definition:()=>({newValues:{mathOperator:function(e){return pe.fromAst(["apply","gcd",["tuple",...e.map(r=>r.tree)]])}}})},t}};T(R2,"componentType","gcd");var V2=class extends Or{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.type={createComponentOfType:"text",createStateVariable:"type",defaultValue:null,toLowerCase:!0,validValues:["operand","function","functionargument","numberofoperands"]},e.operandNumber={createComponentOfType:"number",createStateVariable:"operandNumber",defaultValue:null,public:!0},e.argumentNumber={createComponentOfType:"number",createStateVariable:"argumentNumber",defaultValue:null,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.mathOperator={returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},operandNumber:{dependencyType:"stateVariable",variableName:"operandNumber"},argumentNumber:{dependencyType:"stateVariable",variableName:"argumentNumber"}}),definition({dependencyValues:e}){return e.type==="operand"?e.operandNumber===null?(console.warn("Must specify a operandNumber when extracting a math operand"),{newValues:{mathOperator:r=>pe.fromAst("\uFF3F")}}):{newValues:{mathOperator:function(r){let a=r.tree;if(!Array.isArray(a))return e.operandNumber===1?r:pe.fromAst("\uFF3F");if(a[0]==="apply")return e.operandNumber===1?r:pe.fromAst("\uFF3F");let o=a[e.operandNumber];return o===void 0?pe.fromAst("\uFF3F"):pe.fromAst(o)}}}:e.type==="function"?{newValues:{mathOperator:function(r){let a=r.tree;return Array.isArray(a)?a[0]!=="apply"?pe.fromAst("\uFF3F"):pe.fromAst(a[1]):pe.fromAst("\uFF3F")}}}:e.type==="functionargument"?{newValues:{mathOperator:function(r){let a=r.tree;if(!Array.isArray(a))return pe.fromAst("\uFF3F");if(a[0]!=="apply")return pe.fromAst("\uFF3F");let o=a[2];if(e.argumentNumber===null)return pe.fromAst(o);if(e.argumentNumber===1)return Array.isArray(o)&&o[0]==="tuple"?pe.fromAst(o[1]):pe.fromAst(o);if(Array.isArray(o)&&o[0]==="tuple"){let l=o[e.argumentNumber];return l===void 0?pe.fromAst("\uFF3F"):pe.fromAst(l)}else return pe.fromAst("\uFF3F")}}}:e.type==="numberofoperands"?{newValues:{mathOperator:function(r){let a=r.tree;return Array.isArray(a)?a[0]==="apply"?pe.fromAst(1):pe.fromAst(a.length-1):pe.fromAst(1)}}}:{newValues:{mathOperator:r=>pe.fromAst("_")}}}},t}};T(V2,"componentType","extractMath");function I2(i,t,...e){return!t&&e.length>0?I2(i,...e):t?I2(t,i%t,...e):i}var k2={};lt(k2,{ClampFunction:()=>D2,Derivative:()=>_2,WrapFunctionPeriodic:()=>P2});import Dn from"math-expressions";function Ml(){return[{styleNumber:1,lineColor:"blue",lineWidth:4,lineStyle:"solid",markerColor:"blue",markerStyle:"circle",markerSize:3},{styleNumber:2,lineColor:"green",lineWidth:2,lineStyle:"solid",markerColor:"green",markerStyle:"square",markerSize:4},{styleNumber:3,lineColor:"red",lineWidth:3,lineStyle:"solid",markerColor:"red",markerStyle:"triangle",markerSize:5},{styleNumber:4,lineColor:"purple",lineWidth:2,lineStyle:"solid",markerColor:"purple",markerStyle:"diamond",markerSize:4},{styleNumber:5,lineColor:"black",lineWidth:1,lineStyle:"solid",markerColor:"black",markerStyle:"circle",markerSize:2},{styleNumber:6,lineColor:"lightgray",lineWidth:1,lineStyle:"dotted",markerColor:"lightgray",markerStyle:"circle",markerSize:2}]}var Ri=class extends re{static get stateVariablesShadowedForReference(){return["variables","numericalfs","symbolicfs","symbolic","domain","nInputs","nOutputs","symbolic","isInterpolatedFunction","formula","prescribedPoints","prescribedMinima","prescribedMaxima","prescribedExtrema","displayDigits","displayDecimals","displaySmallAsZero","nPrescribedPoints"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.simplify={createComponentOfType:"text",createStateVariable:"simplifySpecified",defaultValue:"none",toLowerCase:!0,valueTransformations:{true:"full"},validValues:["none","full","numbers","numberspreserveorder"]},e.expand={createComponentOfType:"boolean",createStateVariable:"expandSpecified",defaultValue:!1,public:!0},e.xscale={createComponentOfType:"number",createStateVariable:"xscale",defaultValue:1,public:!0,propagateToDescendants:!0},e.yscale={createComponentOfType:"number",createStateVariable:"yscale",defaultValue:1,public:!0,propagateToDescendants:!0},e.nInputs={createComponentOfType:"integer"},e.nOutputs={createComponentOfType:"integer"},e.domain={createComponentOfType:"_pointListComponent"},e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:"",public:!0,forRenderer:!0},e.showLabel={createComponentOfType:"boolean",createStateVariable:"showLabel",defaultValue:!0,public:!0,forRenderer:!0},e.labelPosition={createComponentOfType:"text",createStateVariable:"labelPosition",defaultValue:"upperright",public:!0,forRenderer:!0,toLowerCase:!0,validValues:["upperright","upperleft","lowerright","lowerleft","top","bottom","left","right"]},e.layer={createComponentOfType:"number",createStateVariable:"layer",defaultValue:0,public:!0,forRenderer:!0},e.minima={createComponentOfType:"extrema"},e.maxima={createComponentOfType:"extrema"},e.extrema={createComponentOfType:"extrema"},e.through={createComponentOfType:"_pointListComponent"},e.throughSlopes={createComponentOfType:"mathList"},e.variables={createComponentOfType:"variables"},e.symbolic={createComponentOfType:"boolean"},e.displayDigits={createComponentOfType:"integer"},e.displayDecimals={createComponentOfType:"integer"},e.displaySmallAsZero={createComponentOfType:"number",valueForTrue:1e-14,valueForFalse:0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){return r.every(a=>a.componentType==="string"||a.doenetAttributes&&a.doenetAttributes.createdFromMacro)?r.length===1&&r[0].componentType!=="string"?{success:!1}:{success:!0,newChildren:[{componentType:"math",children:r}]}:{success:!1}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"functions",componentTypes:["function"]}]}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions();return e.selectedStyle={forRenderer:!0,returnDependencies:()=>({styleNumber:{dependencyType:"stateVariable",variableName:"styleNumber"},ancestorWithStyle:{dependencyType:"ancestor",variableNames:["styleDefinitions"]}}),definition:function({dependencyValues:r}){let a=r.ancestorWithStyle.stateValues.styleDefinitions;a||(a=Ml());let s;for(let o of a)r.styleNumber===o.styleNumber&&(s===void 0?s=o:s=Object.assign(Object.assign({},o),s));return s===void 0&&(s=a[0]),{newValues:{selectedStyle:s}}}},e.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:r}){let a="";return r.selectedStyle.lineWidth>=4?a+="thick ":r.selectedStyle.lineWidth<=1&&(a+="thin "),r.selectedStyle.lineStyle==="dashed"?a+="dashed ":r.selectedStyle.lineStyle==="dotted"&&(a+="dotted "),a+=r.selectedStyle.lineColor,{newValues:{styleDescription:a}}}},e.displayDigits={public:!0,componentType:"integer",defaultValue:10,returnDependencies:()=>({displayDecimalsAttr:{dependencyType:"attributeComponent",attributeName:"displayDigits",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["displayDigits"]}}),definition({dependencyValues:r,usedDefault:a}){return r.displayDecimalsAttr!==null?{newValues:{displayDigits:r.displayDecimalsAttr.stateValues.value}}:r.functionChild.length>0&&!a.functionChild[0]?{newValues:{displayDigits:r.functionChild[0].stateValues.displayDigits}}:{useEssentialOrDefaultValue:{displayDigits:{variablesToCheck:["displayDigits"]}}}}},e.displayDecimals={public:!0,componentType:"integer",defaultValue:10,returnDependencies:()=>({displayDecimalsAttr:{dependencyType:"attributeComponent",attributeName:"displayDecimals",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["displayDecimals"]}}),definition({dependencyValues:r,usedDefault:a}){return r.displayDecimalsAttr!==null?{newValues:{displayDecimals:r.displayDecimalsAttr.stateValues.value}}:r.functionChild.length>0&&!a.functionChild[0]?{newValues:{displayDecimals:r.functionChild[0].stateValues.displayDecimals}}:{useEssentialOrDefaultValue:{displayDecimals:{variablesToCheck:["displayDecimals"]}}}}},e.displaySmallAsZero={public:!0,componentType:"number",defaultValue:0,returnDependencies:()=>({displayDecimalsAttr:{dependencyType:"attributeComponent",attributeName:"displaySmallAsZero",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["displaySmallAsZero"]}}),definition({dependencyValues:r,usedDefault:a}){return r.displayDecimalsAttr!==null?{newValues:{displaySmallAsZero:r.displayDecimalsAttr.stateValues.value}}:r.functionChild.length>0&&!a.functionChild[0]?{newValues:{displaySmallAsZero:r.functionChild[0].stateValues.displaySmallAsZero}}:{useEssentialOrDefaultValue:{displaySmallAsZero:{variablesToCheck:["displaySmallAsZero"]}}}}},e.isInterpolatedFunction={returnDependencies:()=>({through:{dependencyType:"attributeComponent",attributeName:"through"},minima:{dependencyType:"attributeComponent",attributeName:"minima"},maxima:{dependencyType:"attributeComponent",attributeName:"maxima"},extrema:{dependencyType:"attributeComponent",attributeName:"extrema"}}),definition({dependencyValues:r}){return{newValues:{isInterpolatedFunction:r.through||r.minima||r.maxima||r.extrema}}}},e.nInputs={defaultValue:1,public:!0,componentType:"integer",returnDependencies:()=>({nInputsAttr:{dependencyType:"attributeComponent",attributeName:"nInputs",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["nInputs"]},variablesAttr:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["nComponents"]},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"}}),definition({dependencyValues:r}){if(r.isInterpolatedFunction)return{newValues:{nInputs:1}};if(r.nInputsAttr!==null){let a=r.nInputsAttr.stateValues.value;return a>=0||(a=1),{newValues:{nInputs:a}}}else return r.variablesAttr!==null?{newValues:{nInputs:Math.max(1,r.variablesAttr.stateValues.nComponents)}}:r.functionChild.length>0?{newValues:{nInputs:r.functionChild[0].stateValues.nInputs}}:{useEssentialOrDefaultValue:{nInputs:{variablesToCheck:["nInputs"]}}}}},e.nOutputs={defaultValue:1,public:!0,componentType:"integer",returnDependencies:()=>({nOutputsAttr:{dependencyType:"attributeComponent",attributeName:"nOutputs",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["nOutputs"]},mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]}}),definition({dependencyValues:r}){if(r.functionChild.length>0)return{newValues:{nOutputs:r.functionChild[0].stateValues.nOutputs}};if(r.nOutputsAttr!==null){let a=r.nOutputsAttr.stateValues.value;return a>=0||(a=1),{newValues:{nOutputs:a}}}else if(r.mathChild.length>0){let a=r.mathChild[0].stateValues.value,s=Array.isArray(a.tree)&&["tuple","vector"].includes(a.tree[0]),o=1;return s&&(o=a.tree.length-1),{newValues:{nOutputs:o}}}else return{useEssentialOrDefaultValue:{nOutputs:{variablesToCheck:["nOutputs"]}}}}},e.domain={defaultValue:null,returnDependencies:()=>({domainAttr:{dependencyType:"attributeComponent",attributeName:"domain",variableNames:["points"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["domain"]}}),definition({dependencyValues:r}){return r.domainAttr!==null?{newValues:{domain:r.domainAttr.stateValues.points}}:r.functionChild.length>0?{newValues:{domain:r.functionChild[0].stateValues.domain}}:{useEssentialOrDefaultValue:{domain:{variablesToCheck:["domain"]}}}}},e.simplify={public:!0,componentType:"text",returnDependencies:()=>({simplifySpecified:{dependencyType:"stateVariable",variableName:"simplifySpecified"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["simplify"]}}),definition({dependencyValues:r,usedDefault:a}){return a.simplifySpecified&&r.functionChild.length>0?{newValues:{simplify:r.functionChild[0].stateValues.simplify}}:{newValues:{simplify:r.simplifySpecified}}},inverseDefinition({desiredStateVariableValues:r,dependencyValues:a,usedDefault:s}){return s.simplifySpecified&&a.functionChild.length>0?{success:!0,instructions:[{setDependency:"functionChild",desiredValue:r.simplify,childIndex:0,variableIndex:0}]}:{success:!0,instructions:[{setDependency:"simplifySpecified",desiredValue:r.simplify}]}}},e.expand={public:!0,componentType:"text",returnDependencies:()=>({expandSpecified:{dependencyType:"stateVariable",variableName:"expandSpecified"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["expand"]}}),definition({dependencyValues:r,usedDefault:a}){return a.expandSpecified&&r.functionChild.length>0?{newValues:{expand:r.functionChild[0].stateValues.expand}}:{newValues:{expand:r.expandSpecified}}},inverseDefinition({desiredStateVariableValues:r,dependencyValues:a,usedDefault:s}){return s.expandSpecified&&a.functionChild.length>0?{success:!0,instructions:[{setDependency:"functionChild",desiredValue:r.expand,childIndex:0,variableIndex:0}]}:{success:!0,instructions:[{setDependency:"expandSpecified",desiredValue:r.expand}]}}},e.numericalfShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{numericalfShadow:{variablesToCheck:["numericalfShadow"]}}})},e.symbolicfShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{symbolicfShadow:{variablesToCheck:["symbolicfShadow"]}}})},e.symbolic={public:!0,componentType:"boolean",defaultValue:!1,returnDependencies:()=>({symbolicAttr:{dependencyType:"attributeComponent",attributeName:"symbolic",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["symbolic"]},numericalfShadow:{dependencyType:"stateVariable",variableName:"numericalfShadow"},symbolicfShadow:{dependencyType:"stateVariable",variableName:"symbolicfShadow"}}),definition({dependencyValues:r}){return r.symbolicAttr!==null?{newValues:{symbolic:r.symbolicAttr.stateValues.value}}:r.functionChild.length>0?{newValues:{symbolic:r.functionChild[0].stateValues.symbolic}}:r.numericalfShadow?{newValues:{symbolic:!1}}:r.symbolicfShadow?{newValues:{symbolic:!0}}:{useEssentialOrDefaultValue:{symbolic:{variablesToCheck:["symbolic"]}}}}},e.variables={isArray:!0,public:!0,componentType:"variable",entryPrefixes:["variable"],returnArraySizeDependencies:()=>({nInputs:{dependencyType:"stateVariable",variableName:"nInputs"}}),returnArraySize({dependencyValues:r}){return[r.nInputs]},returnArrayDependenciesByKey({arrayKeys:r}){let a={variablesAttr:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["variables"]},parentVariableForChild:{dependencyType:"parentStateVariable",variableName:"variableForChild"},functionChild:{dependencyType:"child",childGroups:["functions"]}},s={};for(let o of r)s[o]={functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["variable"+(Number(o)+1)]}};return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey({globalDependencyValues:r,dependencyValuesByKey:a,arraySize:s,arrayKeys:o,usedDefault:l}){if(r.variablesAttr!==null){let u=r.variablesAttr.stateValues.variables;return{newValues:{variables:vn(s[0],u)}}}else if(r.functionChild.length>0){let u={};for(let c of o)u[c]=a[c].functionChild[0].stateValues["variable"+(Number(c)+1)];return{newValues:{variables:u}}}else return r.parentVariableForChild&&!l.parentVariableForChild?{newValues:{variables:Array(s[0]).fill(r.parentVariableForChild)}}:{newValues:{variables:vn(s[0],[])}}}},e.variable={isAlias:!0,targetVariableName:"variable1"},e.formula={public:!0,componentType:"math",defaultValue:Dn.fromAst(0),returnDependencies:()=>({mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["formula"]},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"}}),definition:function({dependencyValues:r,usedDefault:a}){return r.isInterpolatedFunction?{newValues:{formula:Dn.fromAst("\uFF3F")}}:r.mathChild.length>0?{newValues:{formula:r.mathChild[0].stateValues.value}}:r.functionChild.length>0&&!a.functionChild[0].formula?{newValues:{formula:r.functionChild[0].stateValues.formula}}:{useEssentialOrDefaultValue:{formula:{variablesToCheck:["formula"]}}}}},e.nPrescribedPoints={returnDependencies:()=>({through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nPoints"]}}),definition({dependencyValues:r}){let a=0;return r.through!==null&&(a=r.through.stateValues.nPoints),{newValues:{nPrescribedPoints:a}}}},e.prescribedPoints={isArray:!0,entryPrefixes:["prescribedPoint"],returnArraySizeDependencies:()=>({nPrescribedPoints:{dependencyType:"stateVariable",variableName:"nPrescribedPoints"}}),returnArraySize({dependencyValues:r}){return[r.nPrescribedPoints]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r){let o=Number(s)+1;a[s]={through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["point"+o]},throughSlopes:{dependencyType:"attributeComponent",attributeName:"throughSlopes",variableNames:["math"+o]}}}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].through;if(l!==null){let u=Number(o)+1,c=l.stateValues["point"+u],p=null,m=r[o].throughSlopes;m!==null&&(p=m.stateValues["math"+u],p===void 0&&(p=null)),s[o]={x:c[0],y:c[1],slope:p}}}return{newValues:{prescribedPoints:s}}}},e.prescribedMinima={returnDependencies:()=>({minima:{dependencyType:"attributeComponent",attributeName:"minima",variableNames:["extrema"]}}),definition({dependencyValues:r}){let a=[];return r.minima!==null&&(a=r.minima.stateValues.extrema.map(s=>({x:s[0],y:s[1]}))),{newValues:{prescribedMinima:a}}}},e.prescribedMaxima={returnDependencies:()=>({maxima:{dependencyType:"attributeComponent",attributeName:"maxima",variableNames:["extrema"]}}),definition({dependencyValues:r}){let a=[];return r.maxima!==null&&(a=r.maxima.stateValues.extrema.map(s=>({x:s[0],y:s[1]}))),{newValues:{prescribedMaxima:a}}}},e.prescribedExtrema={returnDependencies:()=>({extrema:{dependencyType:"attributeComponent",attributeName:"extrema",variableNames:["extrema"]}}),definition({dependencyValues:r}){let a=[];return r.extrema!==null&&(a=r.extrema.stateValues.extrema.map(s=>({x:s[0],y:s[1]}))),{newValues:{prescribedExtrema:a}}}},e.interpolationPoints={returnDependencies:()=>({xscale:{dependencyType:"stateVariable",variableName:"xscale"},yscale:{dependencyType:"stateVariable",variableName:"yscale"},prescribedPoints:{dependencyType:"stateVariable",variableName:"prescribedPoints"},prescribedMinima:{dependencyType:"stateVariable",variableName:"prescribedMinima"},prescribedMaxima:{dependencyType:"stateVariable",variableName:"prescribedMaxima"},prescribedExtrema:{dependencyType:"stateVariable",variableName:"prescribedExtrema"}}),definition:({dependencyValues:r})=>ZU({dependencyValues:r,numerics:t})},e.xs={additionalStateVariablesDefined:["coeffs"],returnDependencies:()=>({interpolationPoints:{dependencyType:"stateVariable",variableName:"interpolationPoints"}}),definition:JU},e.symbolicfs={isArray:!0,entryPrefixes:["symbolicf"],stateVariablesDeterminingDependencies:["isInterpolatedFunction"],returnArraySizeDependencies:()=>({nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"}}),returnArraySize({dependencyValues:r}){return[r.nOutputs]},returnArrayDependenciesByKey({stateValues:r}){return r.isInterpolatedFunction?{globalDependencies:{xs:{dependencyType:"stateVariable",variableName:"xs"},coeffs:{dependencyType:"stateVariable",variableName:"coeffs"},interpolationPoints:{dependencyType:"stateVariable",variableName:"interpolationPoints"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},domain:{dependencyType:"stateVariable",variableName:"domain"}}}:{globalDependencies:{formula:{dependencyType:"stateVariable",variableName:"formula"},variables:{dependencyType:"stateVariable",variableName:"variables"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["symbolicfs"]},simplify:{dependencyType:"stateVariable",variableName:"simplify"},expand:{dependencyType:"stateVariable",variableName:"expand"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},symbolicfShadow:{dependencyType:"stateVariable",variableName:"symbolicfShadow"},numericalfShadow:{dependencyType:"stateVariable",variableName:"numericalfShadow"},domain:{dependencyType:"stateVariable",variableName:"domain"}}}},arrayDefinitionByKey:function({globalDependencyValues:r,usedDefault:a,arrayKeys:s}){if(r.isInterpolatedFunction){let o={};for(let l of s)if(l==="0"){let u=qx(r);o[l]=function(c){Dn.fromAst(u(c.evaluate_to_constant()))}}else o[l]=u=>Dn.fromAst("\uFF3F");return{newValues:{symbolicfs:o}}}else if(!a.formula&&(r.formula.tree!=="\uFF3F"||r.functionChild.length===0)){let o={};for(let l of s)o[l]=xp(r,l);return{newValues:{symbolicfs:o}}}else if(r.functionChild.length>0){let o={};for(let l of s)o[l]=r.functionChild[0].stateValues.symbolicfs[l];return{newValues:{symbolicfs:o}}}else if(r.symbolicfShadow){let o={};for(let l of s)l==="0"?o[l]=r.symbolicfShadow:o[l]=u=>Dn.fromAst("\uFF3F");return{newValues:{symbolicfs:o}}}else if(r.numericalfShadow){let o={};for(let l of s)l==="0"?o[l]=function(u){let c=u.evaluate_to_constant();return c===null?NaN:Dn.fromAst(r.numericalfShadow(c))}:o[l]=u=>Dn.fromAst("\uFF3F");return{newValues:{symbolicfs:o}}}else{let o={};for(let l of s)o[l]=xp(r,l);return{newValues:{symbolicfs:o}}}}},e.symbolicf={isAlias:!0,targetVariableName:"symbolicf1"},e.numericalfs={isArray:!0,entryPrefixes:["numericalf"],stateVariablesDeterminingDependencies:["isInterpolatedFunction"],returnArraySizeDependencies:()=>({nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"}}),returnArraySize({dependencyValues:r}){return[r.nOutputs]},returnArrayDependenciesByKey({stateValues:r}){return r.isInterpolatedFunction?{globalDependencies:{xs:{dependencyType:"stateVariable",variableName:"xs"},coeffs:{dependencyType:"stateVariable",variableName:"coeffs"},interpolationPoints:{dependencyType:"stateVariable",variableName:"interpolationPoints"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},domain:{dependencyType:"stateVariable",variableName:"domain"}}}:{globalDependencies:{formula:{dependencyType:"stateVariable",variableName:"formula"},variables:{dependencyType:"stateVariable",variableName:"variables"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["numericalfs"]},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},symbolicfShadow:{dependencyType:"stateVariable",variableName:"symbolicfShadow"},numericalfShadow:{dependencyType:"stateVariable",variableName:"numericalfShadow"},domain:{dependencyType:"stateVariable",variableName:"domain"}}}},arrayDefinitionByKey:function({globalDependencyValues:r,usedDefault:a,arrayKeys:s}){if(r.isInterpolatedFunction){let o={};for(let l of s)l==="0"?o[l]=qx(r):o[l]=u=>Dn.fromAst("\uFF3F");return{newValues:{numericalfs:o}}}else if(!a.formula&&(r.formula.tree!=="\uFF3F"||r.functionChild.length===0)){let o={};for(let l of s)o[l]=Ep(r,l);return{newValues:{numericalfs:o}}}else if(r.functionChild.length>0){let o={};for(let l of s)o[l]=r.functionChild[0].stateValues.numericalfs[l];return{newValues:{numericalfs:o}}}else if(r.numericalfShadow){let o={};for(let l of s)l==="0"?o[l]=r.numericalfShadow:o[l]=()=>NaN;return{newValues:{numericalfs:o}}}else if(r.symbolicfShadow){let o={};for(let l of s)l==="0"?o[l]=function(u){let c=dependencyValues.symbolicfShadow(Dn.fromAst(u)).evaluate_to_constant();return c===null&&(c=NaN),c}:o[l]=()=>NaN;return{newValues:{numericalfs:o}}}else{let o={};for(let l of s)o[l]=Ep(r,l);return{newValues:{numericalfs:o}}}}},e.numericalf={returnDependencies:()=>({numericalf1:{dependencyType:"stateVariable",variableName:"numericalf1"}}),definition({dependencyValues:r}){return{newValues:{numericalf:r.numericalf1}}}},e.fs={isArray:!0,entryPrefixes:["f"],returnArraySizeDependencies:()=>({nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"}}),returnArraySize({dependencyValues:r}){return[r.nOutputs]},returnArrayDependenciesByKey({arrayKeys:r}){let a={symbolic:{dependencyType:"stateVariable",variableName:"symbolic"}},s={};for(let o of r){let l=Number(o)+1;s[o]={symbolicf:{dependencyType:"stateVariable",variableName:"symbolicf"+l},numericalf:{dependencyType:"stateVariable",variableName:"numericalf"+l}}}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey({globalDependencyValues:r,dependencyValuesByKey:a,arrayKeys:s}){let o={};if(r.symbolic)for(let l of s)o[l]=a[l].symbolicf;else for(let l of s)o[l]=a[l].numericalf;return{newValues:{fs:o}}}},e.f={isAlias:!0,targetVariableName:"f1"},e.latex={public:!0,componentType:"text",returnDependencies:()=>({formula:{dependencyType:"stateVariable",variableName:"formula"}}),definition:function({dependencyValues:r}){return{newValues:{latex:r.formula.toLatex()}}}},e.latexWithInputChildren={forRenderer:!0,returnDependencies:()=>({latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:r}){return{newValues:{latexWithInputChildren:[r.latex]}}}},e.allMinima={stateVariablesDeterminingDependencies:["isInterpolatedFunction"],returnDependencies({stateValues:r}){return r.isInterpolatedFunction?{xs:{dependencyType:"stateVariable",variableName:"xs"},coeffs:{dependencyType:"stateVariable",variableName:"coeffs"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},domain:{dependencyType:"stateVariable",variableName:"domain"}}:{numericalf:{dependencyType:"stateVariable",variableName:"numericalf"},xscale:{dependencyType:"stateVariable",variableName:"xscale"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["allMinima"]},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"},domain:{dependencyType:"stateVariable",variableName:"domain"}}},definition:function({dependencyValues:r,componentName:a}){if(r.isInterpolatedFunction){let s=r.xs,o=r.coeffs,l=t.eps,u=[];if(s===null)return{newValues:{allMinima:u}};let c=!1,p=-1/0,m=1/0;if(r.domain!==null){let h=r.domain[0];if(h!==void 0)try{p=h[0].evaluate_to_constant(),Number.isFinite(p)||(p=-1/0),m=h[1].evaluate_to_constant(),Number.isFinite(m)||(m=1/0)}catch(y){}}let f=o[0],d=s[1]-s[0];if(f[3]===0){if(f[2]>0){let h=-f[1]/(2*f[2]);h+s[0]>=p&&h+s[0]<=m&&(h<=d-l?u.push([h+s[0],((f[3]*h+f[2])*h+f[1])*h+f[0]]):Math.abs(h-d)<l&&(c=!0))}}else{let h=4*f[2]*f[2]-12*f[3]*f[1];if(h>0){let y=Math.sqrt(h),b=(-2*f[2]+y)/(6*f[3]);b+s[0]>=p&&b+s[0]<=m&&(b<=d-l?u.push([b+s[0],((f[3]*b+f[2])*b+f[1])*b+f[0]]):Math.abs(b-d)<l&&(c=!0))}}for(let h=1;h<s.length-2;h++)if(f=o[h],d=s[h+1]-s[h],f[3]===0)if(f[2]>0){let y=-f[1]/(2*f[2]);if(y+s[h]>=p)if(y+s[h]<=m)Math.abs(y)<l?c&&u.push([y+s[h],((f[3]*y+f[2])*y+f[1])*y+f[0]]):y>=l&&y<=d-l&&u.push([y+s[h],((f[3]*y+f[2])*y+f[1])*y+f[0]]),c=Math.abs(y-d)<l;else break}else c=!1;else{let y=4*f[2]*f[2]-12*f[3]*f[1];if(y>0){let b=Math.sqrt(y),g=(-2*f[2]+b)/(6*f[3]);if(g+s[h]>=p)if(g+s[h]<=m)Math.abs(g)<l?c&&u.push([g+s[h],((f[3]*g+f[2])*g+f[1])*g+f[0]]):g>=l&&g<=d-l&&u.push([g+s[h],((f[3]*g+f[2])*g+f[1])*g+f[0]]),c=Math.abs(g-d)<l;else break}else c=!1}if(f=o[s.length-2],f[3]===0){if(f[2]>0){let h=-f[1]/(2*f[2]);h+s[s.length-2]>=p&&h+s[s.length-2]<=m&&(Math.abs(h)<l?c&&u.push([h+s[s.length-2],((f[3]*h+f[2])*h+f[1])*h+f[0]]):h>=l&&u.push([h+s[s.length-2],((f[3]*h+f[2])*h+f[1])*h+f[0]]))}}else{let h=4*f[2]*f[2]-12*f[3]*f[1];if(h>0){let y=Math.sqrt(h),b=(-2*f[2]+y)/(6*f[3]);b+s[s.length-2]>=p&&b+s[s.length-2]<=m&&(b>=l?u.push([b+s[s.length-2],((f[3]*b+f[2])*b+f[1])*b+f[0]]):Math.abs(b)<l&&c&&u.push([b+s[s.length-2],((f[3]*b+f[2])*b+f[1])*b+f[0]]))}}return{newValues:{allMinima:u}}}else{if(r.functionChild&&r.functionChild.length>0)return{newValues:{allMinima:r.functionChild[0].stateValues.allMinima}};if(!(r.nInputs===1&&r.nOutputs===1))return{newValues:{allMinima:[]}};let s=r.numericalf,o=-100*r.xscale,l=100*r.xscale;if(r.domain!==null){let d=r.domain[0];if(d!==void 0)try{o=d[0].evaluate_to_constant(),Number.isFinite(o)||(o=-100*r.xscale),l=d[1].evaluate_to_constant(),Number.isFinite(l)||(l=100*r.xscale)}catch(h){}}let u=1e3,c=(l-o)/u,p=[],m=!1,f=s(o);for(let d=0;d<u;d++){let h=o+d*c,y=o+(d+1)*c,b=f;if(f=s(y),Number.isNaN(b)||Number.isNaN(f))continue;let g=t.fminbr(s,[h,y]);if(g.success!==!0)continue;let v=g.x,C=g.fx;b<C?(m&&Number.isFinite(b)&&p.push([h,b]),m=!1):f<C?m=!0:(m=!1,C<f&&C<b&&C<s(v+g.tol)&&C<s(v-g.tol)&&Number.isFinite(C)&&p.push([v,C]))}return{newValues:{allMinima:p}}}}},e.numberMinima={public:!0,componentType:"number",returnDependencies:()=>({allMinima:{dependencyType:"stateVariable",variableName:"allMinima"}}),definition({dependencyValues:r}){return{newValues:{numberMinima:r.allMinima.length},checkForActualChange:{numberMinima:!0}}}},e.minima={stateVariablesDeterminingDependencies:["isInterpolatedFunction"],public:!0,componentType:"number",isArray:!0,nDimensions:2,entryPrefixes:["minimum","minimumLocations","minimumLocation","minimumValues","minimumValue"],returnWrappingComponents(r){return r==="minimum"||r===void 0?[["point",{componentType:"mathList",isAttribute:"xs"}]]:[]},getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if(["minimum","minimumLocation","minimumValue"].includes(r)){let o=Number(a)-1;return Number.isInteger(o)&&o>=0?!s||o<s[0]?r==="minimum"?[o+",0",o+",1"]:r==="minimumLocation"?[o+",0"]:[o+",1"]:[]:[]}else return r==="minimumLocations"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",0"):r==="minimumValues"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",1"):[]},arrayVarNameFromArrayKey(r){let[a,s]=r.split(",");return s==="0"?"minimumLocation"+(Number(a)+1):"minimumValue"+(Number(a)+1)},returnArraySizeDependencies:()=>({numberMinima:{dependencyType:"stateVariable",variableName:"numberMinima"}}),returnArraySize({dependencyValues:r}){return[r.numberMinima,2]},returnArrayDependenciesByKey(){return{globalDependencies:{allMinima:{dependencyType:"stateVariable",variableName:"allMinima"}}}},arrayDefinitionByKey({globalDependencyValues:r}){let a={};for(let s=0;s<r.__array_size[0];s++)for(let o=0;o<2;o++){let l=`${s},${o}`;a[l]=r.allMinima[s][o]}return{newValues:{minima:a}}}},e.allMaxima={stateVariablesDeterminingDependencies:["isInterpolatedFunction"],returnDependencies({stateValues:r}){return r.isInterpolatedFunction?{xs:{dependencyType:"stateVariable",variableName:"xs"},coeffs:{dependencyType:"stateVariable",variableName:"coeffs"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},domain:{dependencyType:"stateVariable",variableName:"domain"}}:{numericalf:{dependencyType:"stateVariable",variableName:"numericalf"},xscale:{dependencyType:"stateVariable",variableName:"xscale"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["allMaxima"]},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"},domain:{dependencyType:"stateVariable",variableName:"domain"}}},definition:function({dependencyValues:r}){if(r.isInterpolatedFunction){let a=r.xs,s=r.coeffs,o=t.eps,l=[];if(a===null)return{newValues:{allMaxima:l}};let u=!1,c=-1/0,p=1/0;if(r.domain!==null){let d=r.domain[0];if(d!==void 0)try{c=d[0].evaluate_to_constant(),Number.isFinite(c)||(c=-1/0),p=d[1].evaluate_to_constant(),Number.isFinite(p)||(p=1/0)}catch(h){}}let m=s[0],f=a[1]-a[0];if(m[3]===0){if(m[2]<0){let d=-m[1]/(2*m[2]);d+a[0]>=c&&d+a[0]<=p&&(d<=f-o?l.push([d+a[0],((m[3]*d+m[2])*d+m[1])*d+m[0]]):Math.abs(d-f)<o&&(u=!0))}}else{let d=4*m[2]*m[2]-12*m[3]*m[1];if(d>0){let h=Math.sqrt(d),y=(-2*m[2]-h)/(6*m[3]);y+a[0]>=c&&y+a[0]<=p&&(y<=f-o?l.push([y+a[0],((m[3]*y+m[2])*y+m[1])*y+m[0]]):Math.abs(y-f)<o&&(u=!0))}}for(let d=1;d<a.length-2;d++)if(m=s[d],f=a[d+1]-a[d],m[3]===0)if(m[2]<0){let h=-m[1]/(2*m[2]);if(h+a[d]>=c)if(h+a[d]<=p)Math.abs(h)<o?u&&l.push([h+a[d],((m[3]*h+m[2])*h+m[1])*h+m[0]]):h>=o&&h<=f-o&&l.push([h+a[d],((m[3]*h+m[2])*h+m[1])*h+m[0]]),u=Math.abs(h-f)<o;else break}else u=!1;else{let h=4*m[2]*m[2]-12*m[3]*m[1];if(h>0){let y=Math.sqrt(h),b=(-2*m[2]-y)/(6*m[3]);if(b+a[d]>=c)if(b+a[d]<=p)Math.abs(b)<o?u&&l.push([b+a[d],((m[3]*b+m[2])*b+m[1])*b+m[0]]):b>=o&&b<=f-o&&l.push([b+a[d],((m[3]*b+m[2])*b+m[1])*b+m[0]]),u=Math.abs(b-f)<o;else break}else u=!1}if(m=s[a.length-2],m[3]===0){if(m[2]<0){let d=-m[1]/(2*m[2]);d+a[a.length-2]>=c&&d+a[a.length-2]<=p&&(Math.abs(d)<o?u&&l.push([d+a[a.length-2],((m[3]*d+m[2])*d+m[1])*d+m[0]]):d>=o&&l.push([d+a[a.length-2],((m[3]*d+m[2])*d+m[1])*d+m[0]]))}}else{let d=4*m[2]*m[2]-12*m[3]*m[1];if(d>0){let h=Math.sqrt(d),y=(-2*m[2]-h)/(6*m[3]);y+a[a.length-2]>=c&&y+a[a.length-2]<=p&&(y>=o?l.push([y+a[a.length-2],((m[3]*y+m[2])*y+m[1])*y+m[0]]):Math.abs(y)<o&&u&&l.push([y+a[a.length-2],((m[3]*y+m[2])*y+m[1])*y+m[0]]))}}return{newValues:{allMaxima:l}}}else{if(r.functionChild&&r.functionChild.length>0)return{newValues:{allMaxima:r.functionChild[0].stateValues.allMaxima}};if(!(r.nInputs===1&&r.nOutputs===1))return{newValues:{allMaxima:[]}};let a=f=>-r.numericalf(f),s=-100*r.xscale,o=100*r.xscale;if(r.domain!==null){let f=r.domain[0];if(f!==void 0)try{s=f[0].evaluate_to_constant(),Number.isFinite(s)||(s=-100*r.xscale),o=f[1].evaluate_to_constant(),Number.isFinite(o)||(o=100*r.xscale)}catch(d){}}let l=1e3,u=(o-s)/l,c=[],p=!1,m=a(s);for(let f=0;f<l;f++){let d=s+f*u,h=s+(f+1)*u,y=m;if(m=a(h),Number.isNaN(y)||Number.isNaN(m))continue;let b=t.fminbr(a,[d,h]);if(b.success!==!0)continue;let g=b.x,v=b.fx;y<v?(p&&Number.isFinite(y)&&c.push([d,-y]),p=!1):m<v?p=!0:(p=!1,v<m&&v<y&&v<a(g+b.tol)&&v<a(g-b.tol)&&Number.isFinite(v)&&c.push([g,-v]))}return{newValues:{allMaxima:c}}}}},e.numberMaxima={public:!0,componentType:"number",returnDependencies:()=>({allMaxima:{dependencyType:"stateVariable",variableName:"allMaxima"}}),definition({dependencyValues:r}){return{newValues:{numberMaxima:r.allMaxima.length},checkForActualChange:{numberMaxima:!0}}}},e.maxima={stateVariablesDeterminingDependencies:["isInterpolatedFunction"],public:!0,componentType:"number",isArray:!0,nDimensions:2,entryPrefixes:["maximum","maximumLocations","maximumLocation","maximumValues","maximumValue"],returnWrappingComponents(r){return r==="maximum"||r===void 0?[["point",{componentType:"mathList",isAttribute:"xs"}]]:[]},getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if(["maximum","maximumLocation","maximumValue"].includes(r)){let o=Number(a)-1;return Number.isInteger(o)&&o>=0?!s||o<s[0]?r==="maximum"?[o+",0",o+",1"]:r==="maximumLocation"?[o+",0"]:[o+",1"]:[]:[]}else return r==="maximumLocations"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",0"):r==="maximumValues"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",1"):[]},arrayVarNameFromArrayKey(r){let[a,s]=r.split(",");return s==="0"?"maximumLocation"+(Number(a)+1):"maximumValue"+(Number(a)+1)},returnArraySizeDependencies:()=>({numberMaxima:{dependencyType:"stateVariable",variableName:"numberMaxima"}}),returnArraySize({dependencyValues:r}){return[r.numberMaxima,2]},returnArrayDependenciesByKey(){return{globalDependencies:{allMaxima:{dependencyType:"stateVariable",variableName:"allMaxima"}}}},arrayDefinitionByKey({globalDependencyValues:r}){let a={};for(let s=0;s<r.__array_size[0];s++)for(let o=0;o<2;o++){let l=`${s},${o}`;a[l]=r.allMaxima[s][o]}return{newValues:{maxima:a}}}},e.numberExtrema={public:!0,componentType:"number",returnDependencies:()=>({numberMinima:{dependencyType:"stateVariable",variableName:"numberMinima"},numberMaxima:{dependencyType:"stateVariable",variableName:"numberMaxima"}}),definition:function({dependencyValues:r}){return{newValues:{numberExtrema:r.numberMinima+r.numberMaxima},checkForActualChange:{numberExtrema:!0}}}},e.allExtrema={returnDependencies:()=>({allMinima:{dependencyType:"stateVariable",variableName:"allMinima"},allMaxima:{dependencyType:"stateVariable",variableName:"allMaxima"}}),definition({dependencyValues:r}){return{newValues:{allExtrema:[...r.allMinima,...r.allMaxima].sort((s,o)=>s[0]-o[0])}}}},e.extrema={public:!0,componentType:"number",isArray:!0,nDimensions:2,entryPrefixes:["extremum","extremumLocations","extremumLocation","extremumValues","extremumValue"],returnWrappingComponents(r){return r==="extremum"||r===void 0?[["point",{componentType:"mathList",isAttribute:"xs"}]]:[]},getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if(["extremum","extremumLocation","extremumValue"].includes(r)){let o=Number(a)-1;return Number.isInteger(o)&&o>=0?!s||o<s[0]?r==="extremum"?[o+",0",o+",1"]:r==="extremumLocation"?[o+",0"]:[o+",1"]:[]:[]}else return r==="extremumLocations"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",0"):r==="extremumValues"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",1"):[]},arrayVarNameFromArrayKey(r){let[a,s]=r.split(",");return s==="0"?"extremumLocation"+(Number(a)+1):"extremumValue"+(Number(a)+1)},returnArraySizeDependencies:()=>({numberExtrema:{dependencyType:"stateVariable",variableName:"numberExtrema"}}),returnArraySize({dependencyValues:r}){return[r.numberExtrema,2]},returnArrayDependenciesByKey(){return{globalDependencies:{allExtrema:{dependencyType:"stateVariable",variableName:"allExtrema"}}}},arrayDefinitionByKey({globalDependencyValues:r}){let a={};for(let s=0;s<r.__array_size[0];s++)for(let o=0;o<2;o++){let l=`${s},${o}`;a[l]=r.allExtrema[s][o]}return{newValues:{extrema:a}}}},e.returnNumericalDerivatives={stateVariablesDeterminingDependencies:["isInterpolatedFunction"],returnDependencies({stateValues:r}){return r.isInterpolatedFunction?{xs:{dependencyType:"stateVariable",variableName:"xs"},coeffs:{dependencyType:"stateVariable",variableName:"coeffs"},interpolationPoints:{dependencyType:"stateVariable",variableName:"interpolationPoints"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},variables:{dependencyType:"stateVariable",variableName:"variables"}}:{functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["returnNumericalDerivatives","variables"]},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},variables:{dependencyType:"stateVariable",variableName:"variables"}}},definition:function({dependencyValues:r}){if(r.isInterpolatedFunction)return{newValues:{returnNumericalDerivatives:QU(r)}};if(r.functionChild.length>0&&r.functionChild[0].stateValues.returnNumericalDerivatives){let a=r.variables.map(u=>u.subscripts_to_strings().tree),s=r.functionChild[0].stateValues.variables,o=s.map(u=>u.subscripts_to_strings().tree),l={};for(let[u,c]of a.entries())o[u]&&o[u]!==c&&(l[c]=s[u]);return Object.keys(l).length===0?{newValues:{returnNumericalDerivatives:r.functionChild[0].stateValues.returnNumericalDerivatives}}:{newValues:{returnNumericalDerivatives:function(c){let p=[];for(let m of c){let f=l[m.subscripts_to_strings().tree];f?p.push(f):p.push(Dn.fromAst("\uFF3F"))}return r.functionChild[0].stateValues.returnNumericalDerivatives(p)}}}}else return{newValues:{returnNumericalDerivatives:null}}}},e}};T(Ri,"componentType","function"),T(Ri,"rendererType","math"),T(Ri,"primaryStateVariableForDefinition","numericalfShadow"),T(Ri,"adapters",[{stateVariable:"numericalf",componentType:"curve"},{stateVariable:"formula",componentType:"math"}]);function xp(i,t){let e=i.formula;if(Array.isArray(e.tree)&&["tuple","vector"].includes(e.tree[0]))try{e=e.get_component(Number(t))}catch(u){return c=>Dn.fromAst("\uFF3F")}else if(t!=="0")return u=>Dn.fromAst("\uFF3F");let a=i.simplify,s=i.expand,o=e.subscripts_to_strings();if(i.nInputs===1){let u=i.variables[0].subscripts_to_strings().tree;return c=>Lr({value:o.substitute({[u]:c}).strings_to_subscripts(),simplify:a,expand:s})}let l=[];for(let u=0;u<i.nInputs;u++)l.push(i.variables[u].subscripts_to_strings().tree);return function(...u){let c={};for(let p=0;p<i.nInputs;p++)c[l[p]]=u[p];return Lr({value:o.substitute(c).strings_to_subscripts(),simplify:a,expand:s})}}function Ep(i,t){let e=i.formula;if(Array.isArray(e.tree)&&["tuple","vector"].includes(e.tree[0]))try{e=e.get_component(Number(t))}catch(o){return()=>NaN}else if(t!=="0")return()=>NaN;let a;try{a=e.subscripts_to_strings().f()}catch(o){return()=>NaN}if(i.nInputs===1){let o=i.variables[0].subscripts_to_strings().tree,l=-1/0,u=1/0;if(i.domain!==null){let c=i.domain[0];if(c!==void 0)try{l=c[0].evaluate_to_constant(),Number.isFinite(l)||(l=-1/0),u=c[1].evaluate_to_constant(),Number.isFinite(u)||(u=1/0)}catch(p){}}return function(c){if(c<l||c>u)return NaN;try{return a({[o]:c})}catch(p){return NaN}}}let s=[];for(let o=0;o<i.nInputs;o++)s.push(i.variables[o].subscripts_to_strings().tree);return function(...o){let l={};for(let u=0;u<i.nInputs;u++)l[s[u]]=o[u];try{return a(l)}catch(u){return NaN}}}function ZU({dependencyValues:i,numerics:t}){let e=[],r=[],a={maximum:i.prescribedMaxima,minimum:i.prescribedMinima,extremum:i.prescribedExtrema,point:i.prescribedPoints};for(let S in a)for(let A of a[S]){let E=null,I=null,V=null;if(A.x!==null&&(E=A.x.evaluate_to_constant(),!Number.isFinite(E))){console.warn(`Ignoring non-numerical ${S}`);continue}if(A.y!==null&&(I=A.y.evaluate_to_constant(),!Number.isFinite(I))){console.warn(`Ignoring non-numerical ${S}`);continue}if(A.slope!==null&&A.slope!==void 0&&(V=A.slope.evaluate_to_constant(),Number.isFinite(V)||(console.warn("Ignoring non-numerical slope"),V=null)),E===null){if(I===null){console.warn(`Ignoring empty ${S}`);continue}r.push({type:S,y:I,slope:V})}else e.push({type:S,x:E,y:I,slope:V})}e.sort((S,A)=>S.x-A.x),r.sort((S,A)=>S.y-A.y);let s=-1/0,o=t.eps;for(let S=0;S<e.length;S++){let A=e[S];if(A.x<=s+o)return console.warn("Two points with locations too close together.  Can't define function"),{newValues:{interpolationPoints:null}};s=A.x}let l=i.xscale,u=i.yscale;s=void 0;let c,p,m=[],f=e[0];for(let S=0;S<e.length;S++){let A=f;f=e[S+1];let E=b({p:A,pNext:f,typePrev:p,xPrev:s,yPrev:c});p=E.type,s=E.x,c=E.y}let d=!1;for(e.length===0&&(d=!0);r.length>0;){let S;p===void 0?S=w({allowedTypes:["maximum","minimum","extremum"],comparison:"atLeast",value:-1/0}):p==="maximum"?S=w({allowedTypes:["minimum","extremum"],comparison:"atMost",value:c-u}):p==="minimum"?S=w({allowedTypes:["maximum","extremum"],comparison:"atLeast",value:c+u}):p==="point"&&(S=w({allowedTypes:["maximum","extremum"],comparison:"atLeast",value:c+u}),S.success!==!0&&(S=w({allowedTypes:["minimum","extremum"],comparison:"atMost",value:c-u})));let A;S.success===!0?(A=S.point,r.splice(S.ind,1),d?(A.x=0,d=!1):A.x=s+l):(A=r.pop(),d?(A.x=0,d=!1):A.x=s+2*l);let E=b({p:A,typePrev:p,xPrev:s,yPrev:c});p=E.type,s=E.x,c=E.y}if(m.length===0&&m.push({type:"point",x:0,y:0,slope:0}),d=m[0],d.type==="maximum"){let S={type:"point",x:d.x-l,y:d.y-u,slope:2*u/l};m.splice(0,0,S)}else if(d.type==="minimum"){let S={type:"point",x:d.x-l,y:d.y+u,slope:-2*u/l};m.splice(0,0,S)}else if(d.type==="point")if(m.length===1)d.slope===null&&(d.slope=0);else{let S=m[1],A=(S.y-d.y)/(S.x-d.x);if(S.type==="maximum"||S.type==="minimum")d.slope===null&&(d.slope=2*A);else{m.length===2?d.slope===null&&(d.slope=A):(S.slope===null&&(S.slope=y({point:S,prevPoint:d,nextPoint:m[2]})),d.slope===null&&(d.slope=2*(d.y-S.y)/(d.x-S.x)-S.slope));let E={x:d.x-l,y:d.y-l*d.slope,slope:d.slope};m.splice(0,0,E)}}let h=m[m.length-1];if(h.type==="maximum"){let S={type:"point",x:h.x+l,y:h.y-u,slope:-2*u/l};m.push(S)}else if(h.type==="minimum"){let S={type:"point",x:h.x+l,y:h.y+u,slope:2*u/l};m.push(S)}else if(h.type==="point")if(m.length===1){let S={type:"point",x:h.x+l,y:h.y+d.slope*l,slope:d.slope};m.push(S)}else{let S=m[m.length-2],A=(S.y-h.y)/(S.x-h.x);if(S.type==="maximum"||S.type==="minimum")h.slope===null&&(h.slope=2*A);else{m.length===2?h.slope===null&&(h.slope=A):(S.slope===null&&(S.slope=y({point:S,prevPoint:m[m.length-3],nextPoint:h})),h.slope===null&&(h.slope=2*(S.y-h.y)/(S.x-h.x)-S.slope));let E={x:h.x+l,y:h.y+l*h.slope,slope:h.slope};m.push(E)}}for(let S=1;S<m.length-1;S++){let A=m[S];A.slope===null&&(A.slope=y({point:A,prevPoint:m[S-1],nextPoint:m[S+1]}))}return{newValues:{interpolationPoints:m}};function y({point:S,prevPoint:A,nextPoint:E}){let I=S.x-A.x,V=E.x-S.x,O=S.y-A.y,k=E.y-S.y,M=O/I,L=k/V,G=(M*V+L*I)/(I+V);return(Math.sign(M)+Math.sign(L))*Math.min(Math.abs(M),Math.abs(L),.5*Math.abs(G))}function b({p:S,pNext:A,typePrev:E,xPrev:I,yPrev:V}){let O;if(A!==void 0&&(O=A.y),S.type==="maximum")return g({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A});if(S.type==="minimum")return v({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A});if(S.type==="extremum"){let k;if(E===void 0){if(A===void 0)return g({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A});k=A.type}if(E==="maximum"||k==="maximum")return S.y!==null&&S.y>V-u?g({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A}):k!==void 0&&S.y!==null&&S.y>A.y-u?g({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A}):v({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A});if(E==="minimum"||k==="minimum")return S.y!==null&&S.y<V+u?v({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A}):k!==void 0&&S.y!==null&&S.y>A.y+u?v({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A}):g({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A});if(E==="point"||k==="point"){let M="maximum";return(S.y===null&&A!==void 0&&A.type===maximum||S.y!==null&&S.y<=V-u||k!==void 0&&S.y!==null&&S.y>=A.y-u)&&(M="minimum"),M==="minimum"?v({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A}):g({x:S.x,y:S.y,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A})}}else if(S.type==="point")return C({x:S.x,y:S.y,slope:S.slope,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:A})}function g({x:S,y:A,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:k}){if(E===void 0)A===null&&(O===void 0?A=0:k.type==="maximum"?A=O:A=O+u);else if(E==="maximum"){A===null&&(O===void 0?A=V:k.type==="maximum"?A=Math.max(V,O):A=Math.max(V,O+u));let L=Math.min(V,A)-u,G=(S+I)/2,K,B,_=null,F=w({allowedTypes:["minimum","extremum"],comparison:"atMost",value:L});F.success===!0?(B="minimum",K=F.point.y,r.splice(F.ind,1),_=0):(B="point",K=L),m.push({type:B,x:G,y:K,slope:_})}else if(E==="minimum"){if(A===null)O===void 0?A=V+u:k.type==="maximum"?A=Math.max(V+u,O):A=Math.max(V,O)+u;else if(A<V+u){let L=[(2*I+S)/3,(I+2*S)/3],G=[V+u,A-u],K=["atLeast","atMost"],B=[["maximum","extremum"],["minimum","extremum"]];for(let _=0;_<2;_++){let F=L[_],z,H,ie=null,fe=w({allowedTypes:B[_],comparison:K[_],value:G[_]});fe.success===!0?(H=B[_][0],z=fe.point.y,r.splice(fe.ind,1),ie=0):(H="point",z=G[_],ie=null),m.push({type:H,x:F,y:z,slope:ie})}}}else if(E==="point"){if(A===null)O===void 0?A=V+u:k.type==="maximum"?A=Math.max(V+u,O):A=Math.max(V,O)+u;else if(A<V+u){let L=(S+I)/2,G,K,B=null,_=w({allowedTypes:["minimum","extremum"],comparison:"atMost",value:A-u});_.success===!0?(K="minimum",G=_.point.y,r.splice(_.ind,1),B=0):(K="point",G=A-u),m.push({type:K,x:L,y:G,slope:B})}}let M={type:"maximum",x:S,y:A,slope:0};return m.push(M),M}function v({x:S,y:A,typePrev:E,xPrev:I,yPrev:V,yNext:O,pNext:k}){if(E===void 0)A===null&&(O===void 0?A=0:k.type==="minimum"?A=O:A=O-u);else if(E==="maximum"){if(A===null)O===void 0?A=V-u:k.type==="minimum"?A=Math.min(V-u,O):A=Math.min(V,O)-u;else if(A>V-u){let L=[(2*I+S)/3,(I+2*S)/3],G=[V-u,A+u],K=["atMost","atLeast"],B=[["minimum","extremum"],["maximum","extremum"]];for(let _=0;_<2;_++){let F=L[_],z,H,ie=null,fe=w({allowedTypes:B[_],comparison:K[_],value:G[_]});fe.success===!0?(H=B[_][0],z=fe.point.y,r.splice(fe.ind,1),ie=0):(H="point",z=G[_],ie=null),m.push({type:H,x:F,y:z,slope:ie})}}}else if(E==="minimum"){A===null&&(O===void 0?A=V:k.type==="minimum"?A=Math.min(V,O):A=Math.min(V,O-u));let L=Math.max(V,A)+u,G=(S+I)/2,K,B,_=null,F=w({allowedTypes:["maximum","extremum"],comparison:"atLeast",value:L});F.success===!0?(B="maximum",K=F.point.y,r.splice(F.ind,1),_=0):(B="point",K=L),m.push({type:B,x:G,y:K,slope:_})}else if(E==="point"){if(A===null)O===void 0?A=V-u:k.type==="minimum"?A=Math.min(V-u,O):A=Math.min(V,O)-u;else if(A>V-u){let L=(S+I)/2,G,K,B=null,_=w({allowedTypes:["maximum","extremum"],comparison:"atLeast",value:A+u});_.success===!0?(K="maximum",G=_.point.y,r.splice(_.ind,1),B=0):(K="point",G=A+u),m.push({type:K,x:L,y:G,slope:B})}}let M={type:"minimum",x:S,y:A,slope:0};return m.push(M),M}function C({x:S,y:A,slope:E,typePrev:I,xPrev:V,yPrev:O,yNext:k,pNext:M}){if(I==="maximum"){if(A>O-u){let G=Math.min(O,A)-u,K=(S+V)/2,B,_,F=null,z=w({allowedTypes:["minimum","extremum"],comparison:"atMost",value:G});z.success===!0?(_="minimum",B=z.point.y,r.splice(z.ind,1),F=0):(_="point",B=O-u),m.push({type:_,x:K,y:B,slope:F})}}else if(I==="minimum"&&A<O+u){let G=Math.max(O,A)+u,K=(S+V)/2,B,_,F=null,z=w({allowedTypes:["maximum","extremum"],comparison:"atLeast",value:G});z.success===!0?(_="maximum",B=z.point.y,r.splice(z.ind,1),F=0):(_="point",B=O+u),m.push({type:_,x:K,y:B,slope:F})}let L={type:"point",x:S,y:A,slope:E};return m.push(L),L}function w({allowedTypes:S,comparison:A,value:E}){let I=[];if(A==="atMost")I=Object.keys(r).reverse();else if(A==="atLeast")I=Object.keys(r);else return{success:!1};for(let V of S)for(let O of I){let k=r[O];if(k.type===V){if(A==="atMost"){if(k.y<=E)return{success:!0,ind:O,point:k}}else if(k.y>=E)return{success:!0,ind:O,point:k}}}return{success:!1}}}function JU({dependencyValues:i}){let t=function(l,u,c,p,m){return[l,c,(-3*l/m+3*u/m-2*c-p)/m,(2*l/m-2*u/m+c+p)/(m*m)]},e=i.interpolationPoints;if(e===null)return{newValues:{xs:null,coeffs:null}};let r=[],a=[],s,o=e[0];a.push(o.x);for(let l=1;l<e.length;l++){s=o,o=e[l];let u=t(s.y,o.y,s.slope,o.slope,o.x-s.x);Math.abs(u[3])<1e-14*Math.max(Math.abs(u[0]),Math.abs(u[1]),Math.abs(u[2]))&&(u[3]=0,Math.abs(u[2])<1e-14*Math.max(Math.abs(u[0]),Math.abs(u[1]))&&(u[2]=0)),r.push(u),a.push(o.x)}return{newValues:{xs:a,coeffs:r}}}function qx(i){let t=i.xs,e=i.coeffs,r=[];if(i.interpolationPoints&&(r=i.interpolationPoints.map(u=>u.y)),t===null)return u=>NaN;let a=-1/0,s=1/0;if(i.domain!==null){let u=i.domain[0];if(u!==void 0)try{a=u[0].evaluate_to_constant(),Number.isFinite(a)||(a=-1/0),s=u[1].evaluate_to_constant(),Number.isFinite(s)||(s=1/0)}catch(c){}}let o=t[0],l=t[t.length-1];return function(u){if(isNaN(u)||u<a||u>s)return NaN;if(u<=o){u-=o;let h=e[0];return((h[3]*u+h[2])*u+h[1])*u+h[0]}if(u>=l){let h=t.length-2;u-=t[h];let y=e[h];return((y[3]*u+y[2])*u+y[1])*u+y[0]}for(var c=0,p,m=t.length-1;c<=m;){p=Math.floor(.5*(c+m));let h=t[p];if(h<u)c=p+1;else if(h>u)m=p-1;else return r[p]}let f=Math.max(0,m);u-=t[f];let d=e[f];return((d[3]*u+d[2])*u+d[1])*u+d[0]}}function QU(i){let t=i.xs,e=i.coeffs,r=i.variables[0].subscripts_to_strings().tree,a=t[0],s=t[t.length-1];return function(o){let l=o.map(c=>c.subscripts_to_strings().tree),u=l.length;return u>3||!l.every(c=>c===r)||l.includes("\uFF3F")?c=>0:u===0||t===null?c=>NaN:function(c){if(isNaN(c))return NaN;if(c<=a){c-=a;let y=e[0];return u===1?(3*y[3]*c+2*y[2])*c+y[1]:u===2?6*y[3]*c+2*y[2]:6*y[3]}if(c>=s){let y=t.length-2;c-=t[y];let b=e[y];return u===1?(3*b[3]*c+2*b[2])*c+b[1]:u===2?6*b[3]*c+2*b[2]:6*b[3]}for(var p=0,m,f=t.length-1;p<=f;){m=Math.floor(.5*(p+f));let y=t[m];if(y<c)p=m+1;else if(y>c)f=m-1;else return u===1?e[m][1]:u===2?2*e[m][2]:6*e[m][3]}let d=Math.max(0,f);c-=t[d];let h=e[d];return u===1?(3*h[3]*c+2*h[2])*c+h[1]:u===2?6*h[3]*c+2*h[2]:6*h[3]}}}import Rp from"math-expressions";var ta=class extends Ri{static returnSugarInstructions(){let t=[],e=function({matchedChildren:r}){return r.every(a=>a.componentType==="string"||a.doenetAttributes&&a.doenetAttributes.createdFromMacro)?r.length===1&&r[0].componentType!=="string"?{success:!1}:{success:!0,newChildren:[{componentType:"math",children:r}]}:{success:!1}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"functions",componentTypes:["function"]}]}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t});return e.isInterpolatedFunction={returnDependencies:()=>({}),definition:()=>({newValues:{isInterpolatedFunction:!1}})},delete e.nPrescribedPoints,delete e.prescribedPoints,delete e.prescribedMinima,delete e.prescribedMaxima,delete e.prescribedExtrema,delete e.interpolationPoints,delete e.xs,e.operatorBasedOnFormulaIfAvailable={returnDependencies:()=>({}),definition:()=>({newValues:{operatorBasedOnFormulaIfAvailable:!1}})},e.formula.returnDependencies=()=>({}),e.formula.definition=()=>({newValues:{formula:Rp.fromAst("\uFF3F")}}),e.operatorComposesWithOriginal={returnDependencies:()=>({}),definition:()=>({newValues:{operatorComposesWithOriginal:!0}})},e.symbolicFunctionOperator={returnDependencies:()=>({}),definition:()=>({newValues:{symbolicFunctionOperator:r=>Rp.fromAst("\uFF3F")}})},e.numericalFunctionOperator={returnDependencies:()=>({}),definition:()=>({newValues:{numericalFunctionOperator:r=>NaN}})},e.formulaOperator={returnDependencies:()=>({}),definition:()=>({newValues:{formulaOperator:r=>Rp.fromAst("\uFF3F")}})},e.returnNumericalDerivatives={returnDependencies:()=>({}),definition:()=>({newValues:{returnNumericalDerivatives:null}})},e.formula={public:!0,componentType:"math",additionalStateVariablesDefined:["operatorBasedOnFormula"],returnDependencies:()=>({operatorBasedOnFormulaIfAvailable:{dependencyType:"stateVariable",variableName:"operatorBasedOnFormulaIfAvailable"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["formula"]},mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},formulaOperator:{dependencyType:"stateVariable",variableName:"formulaOperator"}}),definition:function({dependencyValues:r}){if(!r.operatorBasedOnFormulaIfAvailable||(r.functionChild.length===0||r.functionChild[0].stateValues.formula.tree==="\uFF3F")&&(r.mathChild.length===0||r.mathChild[0].stateValues.value.tree==="\uFF3F"))return{newValues:{formula:Rp.fromAst("\uFF3F"),operatorBasedOnFormula:!1}};let a;return r.functionChild.length===0?a=r.mathChild[0].stateValues.value:a=r.functionChild[0].stateValues.formula,{newValues:{formula:r.formulaOperator(a),operatorBasedOnFormula:!0}}}},e.symbolicfs={isArray:!0,entryPrefixes:["symbolicf"],returnArraySizeDependencies:()=>({nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"}}),returnArraySize({dependencyValues:r}){return[r.nOutputs]},returnArrayDependenciesByKey:()=>({globalDependencies:{operatorBasedOnFormula:{dependencyType:"stateVariable",variableName:"operatorBasedOnFormula"},formula:{dependencyType:"stateVariable",variableName:"formula"},variables:{dependencyType:"stateVariable",variableName:"variables"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},simplify:{dependencyType:"stateVariable",variableName:"simplify"},expand:{dependencyType:"stateVariable",variableName:"expand"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["symbolicfs"]},mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},symbolicFunctionOperator:{dependencyType:"stateVariable",variableName:"symbolicFunctionOperator"},operatorComposesWithOriginal:{dependencyType:"stateVariable",variableName:"operatorComposesWithOriginal"},domain:{dependencyType:"stateVariable",variableName:"domain"}}}),arrayDefinitionByKey:function({globalDependencyValues:r,usedDefault:a,arrayKeys:s,arraySize:o}){if(r.operatorBasedOnFormula){let l={};for(let u of s)return l[u]=xp(r,u),{newValues:{symbolicfs:l}}}else if(r.operatorComposesWithOriginal)if(r.functionChild.length===0)if(r.mathChild.length===0){let l={};for(let u of s)l[u]=c=>Rp.fromAst("\uFF3F");return{newValues:{symbolicfs:l}}}else{let l=Object.assign({},r);l.formula=r.mathChild[0].stateValues.value;let u=[];for(let p=0;p<o[0];p++)u.push(xp(l,p));let c={};for(let p of s)c[p]=(...m)=>r.symbolicFunctionOperator(...u.map(f=>f(...m)));return{newValues:{symbolicfs:c}}}else{let l=[];for(let c=0;c<o[0];c++)l.push(r.functionChild[0].stateValues.symbolicfs[c]);let u={};for(let c of s)u[c]=(...p)=>r.symbolicFunctionOperator(...l.map(m=>m(...p)));return{newValues:{symbolicfs:u}}}else{let l={};for(let u of s)l[u]=(...c)=>r.symbolicFunctionOperator(...c);return{newValues:{symbolicfs:l}}}}},e.numericalfs={isArray:!0,entryPrefixes:["numericalf"],returnArraySizeDependencies:()=>({nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"}}),returnArraySize({dependencyValues:r}){return[r.nOutputs]},returnArrayDependenciesByKey:()=>({globalDependencies:{operatorBasedOnFormula:{dependencyType:"stateVariable",variableName:"operatorBasedOnFormula"},formula:{dependencyType:"stateVariable",variableName:"formula"},variables:{dependencyType:"stateVariable",variableName:"variables"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["numericalfs"]},mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},numericalFunctionOperator:{dependencyType:"stateVariable",variableName:"numericalFunctionOperator"},operatorComposesWithOriginal:{dependencyType:"stateVariable",variableName:"operatorComposesWithOriginal"},domain:{dependencyType:"stateVariable",variableName:"domain"}}}),arrayDefinitionByKey:function({globalDependencyValues:r,usedDefault:a,arrayKeys:s,arraySize:o}){if(r.operatorBasedOnFormula){let l={};for(let u of s)return l[u]=Ep(r,u),{newValues:{numericalfs:l}}}else if(r.operatorComposesWithOriginal)if(r.functionChild.length===0)if(r.mathChild.length===0){let l={};for(let u of s)l[u]=c=>NaN;return{newValues:{numericalfs:l}}}else{let l=Object.assign({},r);l.formula=r.mathChild[0].stateValues.value;let u=[];for(let p=0;p<o[0];p++)u.push(Ep(l,p));let c={};for(let p of s)c[p]=(...m)=>r.numericalFunctionOperator(...u.map(f=>f(...m)));return{newValues:{numericalfs:c}}}else{let l=[];for(let c=0;c<o[0];c++)l.push(r.functionChild[0].stateValues.numericalfs[c]);let u={};for(let c of s)u[c]=(...p)=>r.numericalFunctionOperator(...l.map(m=>m(...p)));return{newValues:{numericalfs:u}}}else{let l={};for(let u of s)l[u]=(...c)=>r.numericalFunctionOperator(...c);return{newValues:{numericalfs:l}}}}},e.allMinima.returnDependencies=()=>({numericalf:{dependencyType:"stateVariable",variableName:"numericalf"},xscale:{dependencyType:"stateVariable",variableName:"xscale"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"},domain:{dependencyType:"stateVariable",variableName:"domain"}}),e.allMaxima.returnDependencies=()=>({numericalf:{dependencyType:"stateVariable",variableName:"numericalf"},xscale:{dependencyType:"stateVariable",variableName:"xscale"},nInputs:{dependencyType:"stateVariable",variableName:"nInputs"},nOutputs:{dependencyType:"stateVariable",variableName:"nOutputs"},domain:{dependencyType:"stateVariable",variableName:"domain"}}),e}};T(ta,"componentType","_functionOperator");import Ld from"math-expressions";var D2=class extends ta{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.lowerValue={createComponentOfType:"number",createStateVariable:"lowerValue",defaultValue:0,public:!0},e.upperValue={createComponentOfType:"number",createStateVariable:"upperValue",defaultValue:1,public:!0},e}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t});return e.numericalFunctionOperator={returnDependencies:()=>({lowerValue:{dependencyType:"stateVariable",variableName:"lowerValue"},upperValue:{dependencyType:"stateVariable",variableName:"upperValue"}}),definition:function({dependencyValues:r}){return{newValues:{numericalFunctionOperator:function(a){return Number.isFinite(a)?Math.max(r.lowerValue,Math.min(r.upperValue,a)):NaN}}}}},e.symbolicFunctionOperator={returnDependencies:()=>({numericalFunctionOperator:{dependencyType:"stateVariable",variableName:"numericalFunctionOperator"}}),definition({dependencyValues:r}){return{newValues:{symbolicFunctionOperator:a=>Ld.fromAst(r.numericalFunctionOperator(a.evaluate_to_constant()))}}}},e}};T(D2,"componentType","clampFunction");var P2=class extends ta{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.lowerValue={createComponentOfType:"number",createStateVariable:"lowerValue",defaultValue:0,public:!0},e.upperValue={createComponentOfType:"number",createStateVariable:"upperValue",defaultValue:1,public:!0},e}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t});return e.numericalFunctionOperator={returnDependencies:()=>({lowerValue:{dependencyType:"stateVariable",variableName:"lowerValue"},upperValue:{dependencyType:"stateVariable",variableName:"upperValue"}}),definition:function({dependencyValues:r}){return{newValues:{numericalFunctionOperator:function(a){if(!Number.isFinite(a))return NaN;let s=r.lowerValue,o=r.upperValue;return s===o?s:(s>o&&([o,s]=[s,o]),s+Ld.math.mod(a-s,o-s))}}}}},e.symbolicFunctionOperator={returnDependencies:()=>({numericalFunctionOperator:{dependencyType:"stateVariable",variableName:"numericalFunctionOperator"}}),definition({dependencyValues:r}){return{newValues:{symbolicFunctionOperator:a=>Ld.fromAst(r.numericalFunctionOperator(a.evaluate_to_constant()))}}}},e}};T(P2,"componentType","wrapFunctionPeriodic");var _2=class extends ta{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.derivVariables={createComponentOfType:"variables"},e}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t});return e.operatorBasedOnFormulaIfAvailable={returnDependencies:()=>({}),definition:()=>({newValues:{operatorBasedOnFormulaIfAvailable:!0}})},e.operatorComposesWithOriginal={returnDependencies:()=>({}),definition:()=>({newValues:{operatorComposesWithOriginal:!1}})},e.haveFunctionChild={returnDependencies:()=>({functionChild:{dependencyType:"child",childGroups:["functions"]}}),definition({dependencyValues:r}){return{newValues:{haveFunctionChild:r.functionChild.length>0}}}},e.nInputs={defaultValue:1,public:!0,componentType:"integer",stateVariablesDeterminingDependencies:["haveFunctionChild"],returnDependencies({stateValues:r}){let a={nInputsAttr:{dependencyType:"attributeComponent",attributeName:"nInputs",variableNames:["value"]},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["nInputs"]},variablesAttr:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["nComponents"]}};return r.haveFunctionChild||(a.derivVariablesAttr={dependencyType:"attributeComponent",attributeName:"derivVariables",variableNames:["variables"]}),a},definition({dependencyValues:r}){if(r.nInputsAttr!==null){let a=r.nInputsAttr.stateValues.value;return a>=0||(a=1),{newValues:{nInputs:a}}}else return r.variablesAttr!==null?{newValues:{nInputs:Math.max(1,r.variablesAttr.stateValues.nComponents)}}:r.functionChild.length>0?{newValues:{nInputs:r.functionChild[0].stateValues.nInputs}}:r.derivVariablesAttr!==null?{newValues:{nInputs:[...new Set(r.derivVariablesAttr.stateValues.variables.map(s=>s.subscripts_to_strings().tree))].length}}:{useEssentialOrDefaultValue:{nInputs:{variablesToCheck:["nInputs"]}}}}},e.variables={isArray:!0,public:!0,componentType:"variable",entryPrefixes:["variable"],returnArraySizeDependencies:()=>({nInputs:{dependencyType:"stateVariable",variableName:"nInputs"}}),returnArraySize({dependencyValues:r}){return[r.nInputs]},stateVariablesDeterminingDependencies:["haveFunctionChild"],returnArrayDependenciesByKey({arrayKeys:r,stateValues:a}){let s={variablesAttr:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["variables"]},parentVariableForChild:{dependencyType:"parentStateVariable",variableName:"variableForChild"},isInterpolatedFunction:{dependencyType:"stateVariable",variableName:"isInterpolatedFunction"},haveFunctionChild:{dependencyType:"stateVariable",variableName:"haveFunctionChild"}},o={};if(a.haveFunctionChild)for(let l of r)o[l]={functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["variable"+(Number(l)+1)]}};else s.derivVariablesAttr={dependencyType:"attributeComponent",attributeName:"derivVariables",variableNames:["variables"]};return{globalDependencies:s,dependenciesByKey:o}},arrayDefinitionByKey({globalDependencyValues:r,dependencyValuesByKey:a,arraySize:s,arrayKeys:o,usedDefault:l}){if(r.variablesAttr!==null){let u=r.variablesAttr.stateValues.variables;return{newValues:{variables:vn(s[0],u)}}}else if(r.haveFunctionChild){let u={};for(let c of o)u[c]=a[c].functionChild[0].stateValues["variable"+(Number(c)+1)];return{newValues:{variables:u}}}else if(r.derivVariablesAttr!==null){let u=[],c=[];for(let p of r.derivVariablesAttr.stateValues.variables){let m=p.subscripts_to_strings().tree;c.includes(m)||(u.push(p),c.push(m))}return{newValues:{variables:vn(s[0],u)}}}else return r.parentVariableForChild&&!l.parentVariableForChild?{newValues:{variables:Array(s[0]).fill(r.parentVariableForChild)}}:{newValues:{variables:vn(s[0],[])}}}},e.nDerivatives={public:!0,componentType:"integer",returnDependencies(){return{derivVariablesAttr:{dependencyType:"attributeComponent",attributeName:"derivVariables",variableNames:["nComponents"]}}},definition({dependencyValues:r}){return r.derivVariablesAttr!==null?{newValues:{nDerivatives:r.derivVariablesAttr.stateValues.nComponents}}:{newValues:{nDerivatives:1}}}},e.derivVariables={isArray:!0,public:!0,componentType:"variable",entryPrefixes:["derivVariable"],returnArraySizeDependencies:()=>({nDerivatives:{dependencyType:"stateVariable",variableName:"nDerivatives"}}),returnArraySize({dependencyValues:r}){return[r.nDerivatives]},returnArrayDependenciesByKey(){return{globalDependencies:{derivVariablesAttr:{dependencyType:"attributeComponent",attributeName:"derivVariables",variableNames:["variables"]},variable1:{dependencyType:"stateVariable",variableName:"variable1"}}}},arrayDefinitionByKey({globalDependencyValues:r}){return r.derivVariablesAttr!==null?{newValues:{derivVariables:r.derivVariablesAttr.stateValues.variables}}:{newValues:{derivVariables:{0:r.variable1}}}}},e.formulaOperator={returnDependencies:()=>({derivVariables:{dependencyType:"stateVariable",variableName:"derivVariables"}}),definition({dependencyValues:r}){return{newValues:{formulaOperator:function(a){let s=a.subscripts_to_strings();for(let o of r.derivVariables)s=s.derivative(o.subscripts_to_strings().tree);return s.strings_to_subscripts()}}}}},e.numericalFunctionOperator={returnDependencies:()=>({functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["returnNumericalDerivatives"],variablesOptional:!0},derivVariables:{dependencyType:"stateVariable",variableName:"derivVariables"}}),additionalStateVariablesDefined:["returnNumericalDerivatives"],definition:function({dependencyValues:r}){return r.functionChild.length===0||!r.functionChild[0].stateValues.returnNumericalDerivatives?{newValues:{numericalFunctionOperator:o=>NaN,returnNumericalDerivatives:null}}:{newValues:{numericalFunctionOperator:r.functionChild[0].stateValues.returnNumericalDerivatives(r.derivVariables),returnNumericalDerivatives:function(o){let l=[...r.derivVariables,...o];return r.functionChild[0].stateValues.returnNumericalDerivatives(l)}}}}},e.symbolicFunctionOperator={returnDependencies:()=>({numericalFunctionOperator:{dependencyType:"stateVariable",variableName:"numericalFunctionOperator"}}),definition({dependencyValues:r}){return{newValues:{symbolicFunctionOperator:a=>Ld.fromAst(r.numericalFunctionOperator(a.evaluate_to_constant()))}}}},e}};T(_2,"componentType","derivative");var M2={};lt(M2,{ExtractMathOperator:()=>F2});var jl=class extends mr{static returnChildGroups(){return[{group:"maths",componentTypes:["math"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions(),e=this;return t.value={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({mathChildren:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]}}),definition:function({dependencyValues:r}){return{newValues:{value:e.applyTextOperator(r.mathChildren.map(a=>a.stateValues.value))}}}},t}};T(jl,"componentType","_textOperatorOfMath"),T(jl,"rendererType","text");var F2=class extends jl{static applyTextOperator(t){return t.length===0?"":t.length!==1?(console.warn("MathOperator requires exactly one math child"),""):Array.isArray(t[0].tree)?t[0].tree[0]:""}};T(F2,"componentType","extractMathOperator");var j2={};lt(j2,{Extrema:()=>Vp,Extremum:()=>Ud});var Ud=class extends Q{static get stateVariablesShadowedForReference(){return["location","value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.location={createComponentOfType:"math"},e.value={createComponentOfType:"math"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let o=Ja({childrenToComponentFunction:l=>({componentType:"math",children:l}),mustStripOffOuterParentheses:!0})({matchedChildren:r});if(!o.success&&r.length===1)return{success:!0,newAttributes:{value:{component:{componentType:"math",children:r}}}};if(o.success){if(o.newChildren.length===1)return{success:!0,newAttributes:{value:{component:o.newChildren[0]}}};if(o.newChildren.length===2){let l=o.newChildren[0],u=o.newChildren[1],c={location:{component:l},value:{component:u}};return(l.children.length===0||l.children.length===1&&l.children[0].componentType==="string"&&l.children[0].state.value.trim()==="")&&delete c.location,(u.children.length===0||u.children.length===1&&u.children[0].componentType==="string"&&u.children[0].state.value.trim()==="")&&delete c.value,{success:!0,newAttributes:c}}else return{success:!1}}return o};return t.push({childrenRegex:/s+(.*s)?/,replacementFunction:e}),t}static returnChildGroups(){return[{group:"points",componentTypes:["point"]}]}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t}),r=this;return e.value={public:!0,componentType:"math",defaultValue:null,additionalStateVariablesDefined:[{variableName:"location",public:!0,componentType:"math",defaultValue:null}],returnDependencies:()=>({extremumChild:{dependencyType:"child",childGroups:["points"],variableNames:["nDimensions","xs"]},location:{dependencyType:"attributeComponent",attributeName:"location",variableNames:["value"]},value:{dependencyType:"attributeComponent",attributeName:"value",variableNames:["value"]}}),definition:function({dependencyValues:a}){let s,o;if(a.extremumChild.length>0){let f=a.extremumChild[0];f.stateValues.nDimensions!==2?(console.log("Cannot determine "+r.componentType+" from a point that isn't 2D"),s=null,o=null):(s=f.stateValues.xs[0],o=f.stateValues.xs[1])}else a.location!==null&&(s=a.location.stateValues.value),a.value!==null&&(o=a.value.stateValues.value);let l={},u={},c=!1,p=!1;s===void 0?(u.location={variablesToCheck:["location"]},p=!0):(l.location=s,c=!0),o===void 0?(u.value={variablesToCheck:["value"]},p=!0):(l.value=o,c=!0);let m={};return c&&(m.newValues=l),p&&(m.useEssentialOrDefaultValue=u),m}},e}};T(Ud,"componentType","extremum"),T(Ud,"rendererType");var Vp=class extends Q{static get componentTypeCapitalized(){return this.componentType.charAt(0).toUpperCase()+this.componentType.slice(1)}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=this,r=function({matchedChildren:a}){let s=Si({componentList:a});return s.success!==!0?{success:!1}:{success:!0,newChildren:s.pieces.map(function(o){return o.length>1||o[0].componentType==="string"?{componentType:e.componentTypeSingular,children:o}:o[0]})}};return t.push({replacementFunction:r}),t}static returnChildGroups(){return[{group:"extrema",componentTypes:[this.componentTypeSingular]},{group:"points",componentTypes:["point"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions(),e=this;return t["n"+e.componentTypeCapitalized]={additionalStateVariablesDefined:["childIdentities"],returnDependencies:()=>({children:{dependencyType:"child",childGroups:["extrema","points"]}}),definition:function({dependencyValues:r}){return{newValues:{["n"+e.componentTypeCapitalized]:r.children.length,childIdentities:r.children}}}},t[e.componentType]={isArray:!0,nDimensions:2,entryPrefixes:[e.componentTypeSingular,e.componentTypeSingular+"Locations",e.componentTypeSingular+"Location",e.componentTypeSingular+"Values",e.componentTypeSingular+"Value"],stateVariablesDeterminingDependencies:["childIdentities"],getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if([e.componentTypeSingular,e.componentTypeSingular+"Location",e.componentTypeSingular+"Value"].includes(r)){let o=Number(a)-1;return Number.isInteger(o)&&o>=0?!s||o<s[0]?r===e.componentTypeSingular?[o+",0",o+",1"]:r===e.componentTypeSingular+"Location"?[o+",0"]:[o+",1"]:[]:[]}else return r===e.componentTypeSingular+"Locations"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",0"):r===e.componentTypeSingular+"Values"?!s||a!==""?[]:Array.from(Array(s[0]),(o,l)=>l+",1"):[]},arrayVarNameFromArrayKey(r){let[a,s]=r.split(",");return s==="0"?e.componentTypeSingular+"Location"+(Number(a)+1):e.componentTypeSingular+"Value"+(Number(a)+1)},returnArraySizeDependencies:()=>({nChildren:{dependencyType:"stateVariable",variableName:"n"+e.componentTypeCapitalized}}),returnArraySize({dependencyValues:r}){return[r.nChildren,2]},returnArrayDependenciesByKey({arrayKeys:r,stateValues:a}){let s={};for(let o of r){let[l,u]=o.split(","),c;a.childIdentities[l].componentType===e.componentTypeSingular?c=Number(u)===0?"location":"value":c="x"+(Number(u)+1),s[o]={child:{dependencyType:"child",childGroups:["extrema","points"],variableNames:[c],childIndices:[l]}}}return{dependenciesByKey:s}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].child[0];if(l){let u=o.split(",")[1],c=Number(u)===0?"location":"value";c in l.stateValues?s[o]=l.stateValues[c]:s[o]=l.stateValues["x"+(Number(u)+1)]}}return{newValues:{[e.componentType]:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:r,dependencyNamesByKey:a}){let s=[];for(let o in r[e.componentType])s.push({setDependency:a[o].extremumChild,desiredValue:r[e.componentType][o],childIndex:0,variableIndex:0});return{success:!0,instructions:s}}},t}};T(Vp,"componentType","extrema"),T(Vp,"rendererType"),T(Vp,"componentTypeSingular","extremum");var z2={};lt(z2,{Alert:()=>L2,Attr:()=>Hd,C:()=>U2,Em:()=>B2,Q:()=>Ip,SQ:()=>Op,Tag:()=>Bl,Tage:()=>Ll,Term:()=>zd});var Qt=class extends re{static returnChildGroups(){return[{group:"inlines",componentTypes:["_inline"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions(),e=this;return t.text={public:!0,componentType:"text",returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["inlines"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:r}){let a="";for(let s of r.inlineChildren)typeof s.stateValues.text=="string"?a+=s.stateValues.text:a+=" ";return a=e.beginTextDelimiter+a+e.endTextDelimiter,{newValues:{text:a}}}},t}};T(Qt,"componentType","_inlineRenderInlineChildren"),T(Qt,"renderChildren",!0),T(Qt,"includeBlankStringChildren",!0),T(Qt,"beginTextDelimiter",""),T(Qt,"endTextDelimiter","");var B2=class extends Qt{};T(B2,"componentType","em");var L2=class extends Qt{};T(L2,"componentType","alert");var Ip=class extends Qt{};T(Ip,"componentType","q"),T(Ip,"beginTextDelimiter",'"'),T(Ip,"endTextDelimiter",'"');var Op=class extends Qt{};T(Op,"componentType","sq"),T(Op,"beginTextDelimiter","'"),T(Op,"endTextDelimiter","'");var zd=class extends Qt{};T(zd,"componentType","term"),T(zd,"rendererType","alert");var U2=class extends Qt{};T(U2,"componentType","c");var Bl=class extends Qt{};T(Bl,"componentType","tag"),T(Bl,"rendererType","tag"),T(Bl,"beginTextDelimiter","<"),T(Bl,"endTextDelimiter",">");var Ll=class extends Qt{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.selfClosed={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{selfClosed:!0}})},t}};T(Ll,"componentType","tage"),T(Ll,"rendererType","tag"),T(Ll,"beginTextDelimiter","<"),T(Ll,"endTextDelimiter","/>");var Hd=class extends Qt{};T(Hd,"componentType","attr"),T(Hd,"rendererType","c");var H2={};lt(H2,{Ellipsis:()=>$d,Mdash:()=>qd,NBSP:()=>Wd,Ndash:()=>Gd});var Jn=class extends re{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.text={public:!0,componentType:"text",returnDependencies:()=>({}),definition:()=>({newValues:{text:this.unicodeCharacter}})},t}};T(Jn,"componentType","_singleCharacterInline"),T(Jn,"unicodeCharacter","");var Gd=class extends Jn{};T(Gd,"componentType","ndash"),T(Gd,"unicodeCharacter","\u2013");var qd=class extends Jn{};T(qd,"componentType","mdash"),T(qd,"unicodeCharacter","\u2014");var Wd=class extends Jn{};T(Wd,"componentType","nbsp"),T(Wd,"unicodeCharacter","\xA0");var $d=class extends Jn{};T($d,"componentType","ellipsis"),T($d,"unicodeCharacter","\u2026");var K2={};lt(K2,{Aside:()=>eh,Example:()=>rh,Exercise:()=>th,Paragraphs:()=>Qd,Problem:()=>Hl,Section:()=>$2,StandinForFutureLayoutTag:()=>nh,Subsection:()=>Zd,Subsubsection:()=>Jd});var ue=class extends Q{};T(ue,"componentType","_block");import G2 from"math-expressions";function Dp({numberOfIndices:i,numberOfOptions:t,maxNumber:e=1/0,withReplacement:r=!0}){if(i===1){let l=[...Array(t).keys()];return l=[...l.slice(1),0].slice(0,e),l=l.map(u=>[u]),l}let a=Dp({numberOfIndices:i-1,numberOfOptions:t,maxNumber:e,withReplacement:r}),s=[],o=0;for(let l of a)for(let u=1;u<=t;u++){let c=[u%t,...l.map(p=>(u+p)%t)];if(!(!r&&new Set(c).size<i)&&(s.push(c),o++,o>=e))return s}return s}function Ul({numberOfOptionsByIndex:i,maxNumber:t=1/0}){let e=i.length;if(e===0)return[];let r=[];for(let h=0;h<e;h++){let y=[];for(let b=0;b<h;b++)y.push(G2.math.gcd(i[h],i[b]));r.push(y)}let a=r.reduce((h,y)=>[...y,...h],[]).reduce((h,y)=>Math.max(h,y),1);if(a===1){let h=i.reduce((b,g)=>b*g);h=Math.min(h,t);let y=[];for(let b=0;b<h;b++){let g=i.map(v=>b%v);y.push(g)}return y}if(e===2){let h=a,y=G2.math.lcm(...i),b=[],g=0;for(let v=0;v<h;v++)for(let C=0;C<y;C++){let w=[C%i[0],(C+v)%i[1]];if(b.push(w),g++,g>=t)return b}return b}let s=[];for(let h=0;h<e;h++){let y=[];for(let b=0;b<h;b++)r[h][b]>1?y.push(G2.math.lcm(i[h],i[b])):y.push(null);s.push(y)}let o=s.reduce((h,y)=>[...y,...h],[]).filter(h=>h!==null).reduce((h,y)=>Math.min(h,y),1/0),l;for(let h=0;h<e;h++){for(let y=0;y<h;y++)if(s[h][y]===o){l=[y,h];break}if(l)break}let u=i[l[0]],c=i[l[1]],p=[u,c],m=i;m[l[0]]=u*c,m.splice(l[1],1);let f=Ul({numberOfOptionsByIndex:m,maxNumber:t}),d=Ul({numberOfOptionsByIndex:p,maxNumber:t});for(let h of f){let y=d[h[l[0]]];h.splice(l[0],1,y[0]),h.splice(l[1],0,y[1])}return f}function zl({variantIndex:i,serializedComponent:t,allComponentClasses:e}){if(t.variants===void 0)return{success:!1};let r=t.variants.descendantVariantComponents;if(r===void 0)return{success:!1};let a=r.map(l=>l.variants.numberOfVariants),s=Ul({numberOfOptionsByIndex:a,maxNumber:i+1})[i],o=[];for(let[l,u]of r.entries()){let p=e[u.componentType].getUniqueVariant({serializedComponent:u,variantIndex:s[l],allComponentClasses:e});if(p.success)o.push(p.desiredVariant);else return{succss:!1}}return{success:!0,desiredVariants:o}}import br from"math-expressions";function Kd(){return["specifiedFrom","specifiedTo","specifiedLength","specifiedStep","specifiedExclude"]}function Xd(){return{type:{createPrimitiveOfType:"string",createStateVariable:"type",defaultPrimitiveValue:"number",toLowerCase:!0,validValues:["number","math","letters"]},from:{createComponentOfType:"_componentWithSelectableType"},to:{createComponentOfType:"_componentWithSelectableType"},step:{createComponentOfType:"math"},length:{createComponentOfType:"number"},exclude:{createComponentOfType:"_componentListWithSelectableType"}}}function Yd(){let i={};return i.specifiedFrom={returnDependencies:()=>({fromAttr:{dependencyType:"attributeComponent",attributeName:"from",variableNames:["value"]}}),defaultValue:null,definition:function({dependencyValues:t}){return t.fromAttr===null?{useEssentialOrDefaultValue:{specifiedFrom:{variablesToCheck:["from","specifiedFrom"]}}}:t.fromAttr.stateValues.value===null?{newValues:{specifiedFrom:NaN}}:{newValues:{specifiedFrom:t.fromAttr.stateValues.value}}}},i.specifiedTo={returnDependencies:()=>({toAttr:{dependencyType:"attributeComponent",attributeName:"to",variableNames:["value"]}}),defaultValue:null,definition:function({dependencyValues:t}){return t.toAttr===null?{useEssentialOrDefaultValue:{specifiedTo:{variablesToCheck:["to","specifiedTo"]}}}:t.toAttr.stateValues.value===null?{newValues:{specifiedTo:NaN}}:{newValues:{specifiedTo:t.toAttr.stateValues.value}}}},i.specifiedLength={returnDependencies:()=>({lengthAttr:{dependencyType:"attributeComponent",attributeName:"length",variableNames:["value"]}}),defaultValue:null,definition:function({dependencyValues:t}){return t.lengthAttr===null?{useEssentialOrDefaultValue:{specifiedLength:{variablesToCheck:["length","specifiedLength"]}}}:t.lengthAttr.stateValues.value===null?{newValues:{specifiedLength:NaN}}:{newValues:{specifiedLength:t.lengthAttr.stateValues.value}}}},i.specifiedStep={returnDependencies:()=>({stepAttr:{dependencyType:"attributeComponent",attributeName:"step",variableNames:["value"]},type:{dependencyType:"stateVariable",variableName:"type"}}),defaultValue:null,definition:function({dependencyValues:t}){if(t.stepAttr===null)return{useEssentialOrDefaultValue:{specifiedStep:{variablesToCheck:["step","specifiedStep"]}}};let e=t.stepAttr.stateValues.value;return e===null?{newValues:{specifiedStep:NaN}}:{newValues:{specifiedStep:e}}}},i.specifiedExclude={returnDependencies:()=>({excludeAttr:{dependencyType:"attributeComponent",attributeName:"exclude",variableNames:["values"]}}),defaultValue:[],definition:function({dependencyValues:t}){return t.excludeAttr===null?{useEssentialOrDefaultValue:{specifiedExclude:{variablesToCheck:["exclude"]}}}:{newValues:{specifiedExclude:t.excludeAttr.stateValues.values}}}},i.lowercase={returnDependencies:()=>({specifiedTo:{dependencyType:"stateVariable",variableName:"specifiedTo"},specifiedFrom:{dependencyType:"stateVariable",variableName:"specifiedFrom"}}),definition:function({dependencyValues:t}){let e=/^[A-Z]*$/,r=!0;return t.specifiedFrom!==null?e.test(t.specifiedFrom)&&(r=!1):t.specifiedTo!==null&&e.test(t.specifiedTo)&&(r=!1),{newValues:{lowercase:r}}}},i.validSequence={returnDependencies:()=>({specifiedLength:{dependencyType:"stateVariable",variableName:"specifiedLength"},specifiedStep:{dependencyType:"stateVariable",variableName:"specifiedStep"},specifiedFrom:{dependencyType:"stateVariable",variableName:"specifiedFrom"},specifiedTo:{dependencyType:"stateVariable",variableName:"specifiedTo"},type:{dependencyType:"stateVariable",variableName:"type"},lowercase:{dependencyType:"stateVariable",variableName:"lowercase"}}),definition:function({dependencyValues:t}){let e=!0;if(t.specifiedLength!==null&&(!Number.isInteger(t.specifiedLength)||t.specifiedLength<0)&&(console.warn("Invalid length of sequence.  Must be a non-negative integer."),e=!1),t.specifiedStep!==null&&t.type!=="math"){let r=it(t.specifiedStep);Number.isFinite(r)||(console.warn("Invalid step of sequence.  Must be a number for sequence of type "+t.type+"."),e=!1)}if(t.specifiedFrom!==null)if(t.type==="number"){let r=it(t.specifiedFrom);Number.isFinite(r)||(console.warn("Invalid from of number sequence.  Must be a number"),e=!1)}else Number.isNaN(t.specifiedFrom)&&(console.warn("Invalid from of sequence"),e=!1);if(t.specifiedTo!==null)if(t.type==="number"){let r=it(t.specifiedTo);Number.isFinite(r)||(console.warn("Invalid to of number sequence.  Must be a number"),e=!1)}else Number.isNaN(t.specifiedTo)&&(console.warn("Invalid to of sequence"),e=!1);return{newValues:{validSequence:e}}}},i.from={additionalStateVariablesDefined:["step","length","exclude"],returnDependencies:()=>({specifiedFrom:{dependencyType:"stateVariable",variableName:"specifiedFrom"},specifiedTo:{dependencyType:"stateVariable",variableName:"specifiedTo"},specifiedLength:{dependencyType:"stateVariable",variableName:"specifiedLength"},specifiedStep:{dependencyType:"stateVariable",variableName:"specifiedStep"},type:{dependencyType:"stateVariable",variableName:"type"},specifiedExclude:{dependencyType:"stateVariable",variableName:"specifiedExclude"},validSequence:{dependencyType:"stateVariable",variableName:"validSequence"}}),definition:function({dependencyValues:t}){let e=t.specifiedFrom,r=t.specifiedTo,a=t.specifiedStep,s=t.specifiedLength,o=[...t.specifiedExclude],l=t.type;if(t.type==="math")r!==null&&(r instanceof br.class||(r=br.fromAst(r))),e!==null&&(e instanceof br.class||(e=br.fromAst(e))),a!==null&&(a instanceof br.class||(a=br.fromAst(a)));else if(a!==null&&a instanceof br.class&&(a=a.evaluate_to_constant()),t.type==="letters"){e!==null&&typeof e=="string"&&(e=ts(e)),r!==null&&typeof r=="string"&&(r=ts(r));for(let[u,c]of o.entries())typeof c=="string"&&(o[u]=ts(c))}else if(t.type==="number"){r!==null&&(r instanceof br.class?r=r.evaluate_to_constant():r=Number(r)),e!==null&&(e instanceof br.class?e=e.evaluate_to_constant():e=Number(e));for(let[u,c]of o.entries())c instanceof br.class?o[u]=c.evaluate_to_constant():o[u]=Number(c)}if(t.validSequence){let u=q2({from:e,to:r,step:a,length:s,type:l});return u.exclude=o,{newValues:u}}return(!Number.isInteger(s)||s<0)&&(s=0),{newValues:{from:e,step:a,length:s,exclude:o}}}},i}function q2({from:i,to:t,step:e,length:r,type:a}){if(i===null)t===null?(a==="math"?i=br.fromAst(1):i=1,e===null&&(a==="math"?e=br.fromAst(1):e=1),r===null&&(r=10)):(e===null&&(a==="math"?e=br.fromAst(1):e=1),r===null&&(a==="math"?r=Math.floor((t.subtract(1).divide(e).evaluate_to_constant()+1)*(1+1e-14)):r=Math.floor(((t-1)/e+1)*(1+1e-14))),a==="math"?i=t.subtract(e.multiply(r-1)).simplify():(i=t-e*(r-1),a==="letters"&&i<1&&(r=Math.floor(((t-1)/e+1)*(1+1e-14)),i=t-e*(r-1))));else if(t===null)e===null&&(a==="math"?e=br.fromAst(1):e=1),r===null&&(r=10);else if(e===null)r===null?a==="math"?(e=br.fromAst(1),r=Math.floor(t.subtract(i).add(1).evaluate_to_constant()*(1+1e-14))):(e=1,r=Math.floor((t-i+1)*(1+1e-14))):a==="math"?e=t.subtract(i).divide(r-1):(e=(t-i)/(r-1),a==="letters"&&(e=Math.floor(e)));else if(r===null)a==="math"?r=Math.floor(t.subtract(i).divide(e).add(1).evaluate_to_constant()*(1+1e-14)):r=Math.floor(((t-i)/e+1)*(1+1e-14));else throw Error("Can't define from, to, step, and length for sequence");return(!Number.isInteger(r)||r<0)&&(console.warn("Invalid length of sequence.  Must be a non-negative integer."),r=0),{from:i,step:e,length:r}}function Pp({from:i,step:t,length:e,exclude:r,type:a,lowercase:s,maxNum:o}){let l=[],u=0;for(let c=0;c<e;c++){let p=i;if(c>0&&(a==="math"?p=p.add(t.multiply(br.fromAst(c))).expand().simplify():p+=t*c),a==="math"){if(r.some(m=>m&&m.equals(p)))continue}else if(a==="number"){if(r.some(m=>Math.abs(m-p)<=1e-14*Math.max(Math.abs(m),Math.abs(p))))continue}else if(r.includes(p))continue;if(a==="letters"&&(p=Pn(p,s)),l.push(p),u++,u===o)break}return l}function W2({index:i,from:t,step:e,length:r,exclude:a,type:s,lowercase:o}){if(a.length>0){let u=Pp({from:t,step:e,length:r,exclude:a,type:s,lowercase:o,maxNum:i+1});return u.length===i+1?u[i]:null}if(!(i>=0&&(r===void 0||i<r)))return null;let l=t;return i>0&&(s==="math"?l=l.add(e.multiply(br.fromAst(i))).expand().simplify():l+=e*i),s==="letters"&&(l=Pn(l,o)),l}function ts(i){i=i.toUpperCase();let t=0,e=i.length,r=e;for(;(r-=1)>-1;){let a=i.charCodeAt(r)-64;if(a<1||a>26){console.warn("Cannot convert "+i+" to a number");return}t+=a*Math.pow(26,e-1-r)}return t}function Pn(i,t){i--;let e=65;t&&(e=97);let r="";for(;;){let a=i%26;if(r=String.fromCharCode(e+a)+r,i<26)break;i=Math.floor(i/26)-1}return r}var gr=class extends ue{static get stateVariablesShadowedForReference(){return["title"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.aggregateScores={createComponentOfType:"boolean",createStateVariable:"aggregateScores",defaultValue:!1,public:!0},e.weight={createComponentOfType:"number",createStateVariable:"weight",defaultValue:1,public:!0},e.sectionWideCheckWork={createComponentOfType:"boolean",createStateVariable:"sectionWideCheckWork",defaultValue:!1,public:!0},e.boxed={createComponentOfType:"boolean",createStateVariable:"boxed",defaultValue:!1,public:!0,forRenderer:!0},e.feedbackDefinitions={createComponentOfType:"feedbackDefinitions",createStateVariable:"feedbackDefinitions",propagateToDescendants:!0,mergeArrays:!0,public:!0},e.styleDefinitions={createComponentOfType:"styleDefinitions",createStateVariable:"styleDefinitions",propagateToDescendants:!0,mergeArrays:!0,public:!0},e}static returnChildGroups(){return[{group:"variantControls",componentTypes:["variantControl"]},{group:"titles",componentTypes:["title"]},{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=this,e=super.returnStateVariableDefinitions();return e.enumeration={forRenderer:!0,returnDependencies:()=>({countAmongSiblings:{dependencyType:"countAmongSiblingsOfSameType"},sectionAncestor:{dependencyType:"ancestor",componentType:"_sectioningComponent",variableNames:["enumeration"]}}),definition({dependencyValues:r}){let a=[];return r.sectionAncestor&&a.push(...r.sectionAncestor.stateValues.enumeration),a.push(r.countAmongSiblings),{newValues:{enumeration:a}}}},e.sectionName={returnDependencies:()=>({}),definition:()=>({newValues:{sectionName:"Section"}})},e.titleChildName={forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["titles"]}}),definition({dependencyValues:r}){let a=null;return r.titleChild.length>0&&(a=r.titleChild[0].componentName),{newValues:{titleChildName:a}}}},e.title={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["titles"],variableNames:["text"]},sectionName:{dependencyType:"stateVariable",variableName:"sectionName"},enumeration:{dependencyType:"stateVariable",variableName:"enumeration"}}),definition({dependencyValues:r}){if(r.titleChild.length===0){let a=t.defaultTitle;return a||(a=r.sectionName+" "+r.enumeration.join(".")),{newValues:{title:a}}}else return{newValues:{title:r.titleChild[0].stateValues.text}}}},e.containerTag={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{containerTag:"section"}})},e.level={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{level:1}})},e.viewedSolution={defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{viewedSolution:{variablesToCheck:["viewedSolution"]}}}),inverseDefinition({desiredStateVariableValues:r}){return{success:!0,instructions:[{setStateVariable:"viewedSolution",value:r.viewedSolution}]}}},e.scoredDescendants={returnDependencies:()=>({scoredDescendants:{dependencyType:"descendant",componentTypes:["_sectioningComponent","answer"],variableNames:["scoredDescendants","aggregateScores","weight"],recurseToMatchedChildren:!1,variablesOptional:!0}}),definition({dependencyValues:r}){let a=[];for(let s of r.scoredDescendants)s.stateValues.aggregateScores||s.stateValues.scoredDescendants===void 0?s.stateValues.weight!==0&&a.push(s):a.push(...s.stateValues.scoredDescendants);return{newValues:{scoredDescendants:a}}}},e.answerDescendants={returnDependencies:()=>({answerDescendants:{dependencyType:"descendant",componentTypes:["answer"],variableNames:["justSubmitted"],recurseToMatchedChildren:!1}}),definition({dependencyValues:r}){return{newValues:{answerDescendants:r.answerDescendants}}}},e.justSubmitted={forRenderer:!0,returnDependencies:()=>({answerDescendants:{dependencyType:"stateVariable",variableName:"answerDescendants"}}),definition({dependencyValues:r}){return{newValues:{justSubmitted:r.answerDescendants.every(a=>a.stateValues.justSubmitted)}}}},e.showCorrectness={forRenderer:!0,returnDependencies:()=>({showCorrectnessFlag:{dependencyType:"flag",flagName:"showCorrectness"}}),definition({dependencyValues:r}){return{newValues:{showCorrectness:r.showCorrectnessFlag!==!1}}}},e.displayDigitsForCreditAchieved={returnDependencies:()=>({}),definition:()=>({newValues:{displayDigitsForCreditAchieved:3}})},e.sectionPlaceholder={defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{sectionPlaceholder:{variablesToCheck:["sectionPlaceholder"]}}})},e.creditAchieved={public:!0,componentType:"number",forRenderer:!0,defaultValue:0,stateVariablesPrescribingAdditionalAttributes:{displayDigits:"displayDigitsForCreditAchieved"},additionalStateVariablesDefined:[{variableName:"percentCreditAchieved",public:!0,componentType:"number",defaultValue:0,stateVariablesPrescribingAdditionalAttributes:{displayDigits:"displayDigitsForCreditAchieved"}}],stateVariablesDeterminingDependencies:["aggregateScores","scoredDescendants"],returnDependencies({stateValues:r}){let a={aggregateScores:{dependencyType:"stateVariable",variableName:"aggregateScores"}};if(r.aggregateScores){a.scoredDescendants={dependencyType:"stateVariable",variableName:"scoredDescendants"},a.sectionPlaceholder={dependencyType:"stateVariable",variableName:"sectionPlaceholder"};for(let[s,o]of r.scoredDescendants.entries())a["creditAchieved"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"creditAchieved"}}return a},definition({dependencyValues:r}){if(!r.aggregateScores)return{newValues:{creditAchieved:0,percentCreditAchieved:0}};if(r.sectionPlaceholder)return{useEssentialOrDefaultValue:{creditAchieved:{variablesToCheck:["creditAchieved"]},percentCreditAchieved:{variablesToCheck:["percentCreditAchieved"]}}};let a=0,s=0;for(let[u,c]of r.scoredDescendants.entries()){let p=c.stateValues.weight;a+=r["creditAchieved"+u]*p,s+=p}let o;s>0?o=a/s:o=1;let l=o*100;return{newValues:{creditAchieved:o,percentCreditAchieved:l}}},inverseDefinition({desiredStateVariableValues:r,dependencyValues:a}){if(!a.sectionPlaceholder)return{success:!1};let s=[];for(let o in r)!["creditAchieved","percentCreditAchieved"].includes(o)||s.push({setStateVariable:o,value:r[o]});return{success:!0,instructions:s}}},e.creditAchievedIfSubmit={defaultValue:0,stateVariablesDeterminingDependencies:["aggregateScores","scoredDescendants"],returnDependencies({stateValues:r}){let a={aggregateScores:{dependencyType:"stateVariable",variableName:"aggregateScores"}};if(r.aggregateScores){a.scoredDescendants={dependencyType:"stateVariable",variableName:"scoredDescendants"};for(let[s,o]of r.scoredDescendants.entries())a["creditAchievedIfSubmit"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"creditAchievedIfSubmit"}}return a},definition({dependencyValues:r}){if(!r.aggregateScores)return{newValues:{creditAchievedIfSubmit:0}};let a=0,s=0;for(let[l,u]of r.scoredDescendants.entries()){let c=u.stateValues.weight;a+=r["creditAchievedIfSubmit"+l]*c,s+=c}return{newValues:{creditAchievedIfSubmit:a/s}}}},e.suppressAutomaticVariants={returnDependencies:()=>({}),definition:()=>({newValues:{suppressAutomaticVariants:!0}})},e.generatedVariantInfo={additionalStateVariablesDefined:["isVariantComponent"],returnDependencies:({sharedParameters:r,componentInfoObjects:a})=>({variantIndex:{dependencyType:"value",value:r.variantIndex},variantName:{dependencyType:"value",value:r.variantName},variantControlChild:{dependencyType:"child",childGroups:["variantControls"],variableNames:["selectedVariantIndex","selectedVariantName"]},variantDescendants:{dependencyType:"descendant",componentTypes:Object.keys(a.componentTypeWithPotentialVariants),variableNames:["isVariantComponent","generatedVariantInfo"],recurseToMatchedChildren:!1,variablesOptional:!0,includeNonActiveChildren:!0,ignoreReplacementsOfMatchedComposites:!0},variants:{dependencyType:"variants"},suppressAutomaticVariants:{dependencyType:"stateVariable",variableName:"suppressAutomaticVariants"},sectionPlaceholder:{dependencyType:"stateVariable",variableName:"sectionPlaceholder"}}),definition({dependencyValues:r,componentName:a}){let s={};if(r.variantControlChild.length===0){if(r.suppressAutomaticVariants)return{newValues:{generatedVariantInfo:null,isVariantComponent:!1}};s.index=r.variantIndex,s.name=r.variantName}else s.index=r.variantControlChild[0].stateValues.selectedVariantIndex,s.name=r.variantControlChild[0].stateValues.selectedVariantName;let o=Boolean(r.variants&&r.variants.desiredVariant&&r.variants.desiredVariant.subvariants);if(s.meta={createdBy:a,subvariantsSpecified:o},r.sectionPlaceholder)o&&(s.subvariants=r.variants.desiredVariant.subvariants);else{let l=s.subvariants=[];for(let u of r.variantDescendants)u.stateValues.isVariantComponent?l.push(u.stateValues.generatedVariantInfo):u.stateValues.generatedVariantInfo&&l.push(...u.stateValues.generatedVariantInfo.subvariants)}return{newValues:{generatedVariantInfo:s,isVariantComponent:!0}}}},e.collapsible={componentType:"boolean",forRenderer:!0,returnDependencies:()=>({}),definition(){return{newValues:{collapsible:!1}}}},e.open={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!0,returnDependencies:()=>({}),definition(){return{useEssentialOrDefaultValue:{open:{variablesToCheck:["open"]}}}},inverseDefinition({desiredStateVariableValues:r}){return{success:!0,instructions:[{setStateVariable:"open",value:r.open}]}}},e.createSubmitAllButton={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"suppressAnswerSubmitButtons",forRenderer:!0}],returnDependencies:()=>({sectionWideCheckWork:{dependencyType:"stateVariable",variableName:"sectionWideCheckWork"},aggregateScores:{dependencyType:"stateVariable",variableName:"aggregateScores"},sectionAncestor:{dependencyType:"ancestor",componentType:"_sectioningComponent",variableNames:["suppressAnswerSubmitButtons"]},documentAncestor:{dependencyType:"ancestor",componentType:"document",variableNames:["suppressAnswerSubmitButtons"]}}),definition({dependencyValues:r,componentName:a}){let s=!1,o=!1;return r.documentAncestor.stateValues.suppressAnswerSubmitButtons||r.sectionAncestor&&r.sectionAncestor.stateValues.suppressAnswerSubmitButtons?o=!0:r.sectionWideCheckWork&&(r.aggregateScores?(s=!0,o=!0):console.warn(`Cannot create submit all button for ${a} because it doesn't aggegrate scores`)),{newValues:{createSubmitAllButton:s,suppressAnswerSubmitButtons:o}}}},e}actions={submitAllAnswers:this.submitAllAnswers.bind(this),revealSection:this.revealSection.bind(this),closeSection:this.closeSection.bind(this)};async submitAllAnswers(){this.coreFunctions.requestRecordEvent({verb:"submitted",object:{componentName:this.componentName,componentType:this.componentType},result:{creditAchieved:this.stateValues.creditAchievedIfSubmit}});for(let t of this.stateValues.answerDescendants)t.stateValues.justSubmitted||await this.coreFunctions.performAction({componentName:t.componentName,actionName:"submitAnswer"})}revealSection(){return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"open",value:!0}],event:{verb:"viewed",object:{componentName:this.componentName,componentType:this.componentType}}})}closeSection(){return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"open",value:!1}],event:{verb:"closed",object:{componentName:this.componentName,componentType:this.componentType}}})}static setUpVariant({serializedComponent:t,sharedParameters:e,definingChildrenSoFar:r,descendantVariantComponents:a,allComponentClasses:s}){let o;for(let c of r)if(c!==void 0&&c.componentType==="variantControl"){o=c;break}if(o===void 0){let c=100;e.allPossibleVariants=[...Array(c).keys()].map(f=>Wx(f+1));let p,m;if(t.variants&&(m=t.variants.desiredVariant),m!==void 0){if(m.index!==void 0){let f=Number(m.index);if(!Number.isFinite(f))console.warn("Variant index "+m.index+" must be a number"),p=1;else{Number.isInteger(f)||(console.warn("Variant index "+m.index+" must be an integer"),f=Math.round(f));let d=(f-1)%c;d<0&&(d+=c),p=d+1}}else if(m.name!==void 0){if(typeof m.name=="string"){let f=e.allPossibleVariants.indexOf(m.name.toLowerCase());f!==-1&&(p=f+1)}p===void 0&&(console.warn("Variant name "+m.name+" is not valid"),p=1)}}if(p===void 0)if(e.selectRng){let f=e.selectRng();p=Math.floor(f*c)+1}else p=1;e.variantSeed=p.toString(),e.variantIndex=p,e.variantName=Wx(p),e.selectRng=new e.rngClass(e.variantSeed)}else e.variantSeed=o.state.selectedSeed.value,e.variantName=o.state.selectedVariantName.value,e.variantIndex=o.state.selectedVariantIndex.value,e.selectRng=o.state.selectRng.value,e.allPossibleVariants=o.state.variantNames.value;let l=Math.floor(e.selectRng()*1e6).toString();e.rng=new e.rngClass(l);let u;if(t.variants&&(u=t.variants.desiredVariant),u===void 0&&(u={}),u.subvariants&&a)for(let c in u.subvariants){let p=u.subvariants[c],m=a[c];if(m===void 0)break;m.variants.desiredVariant=p}}static determineNumberOfUniqueVariants({serializedComponent:t}){if(t.children===void 0)return{success:!0};let e,r;for(let[o,l]of t.children.entries())if(l.componentType==="variantControl"||l.createdComponent&&components[l.componentName].componentType==="variantControl"){e=o,r=l;break}if(e===void 0)return{success:!0};let a=100;if(r.attributes&&r.attributes.nVariants!==void 0){let o=r.attributes.nVariants,l=!1;if(o.state!==void 0&&o.state.value!==void 0&&(a=Math.round(Number(o.state.value)),l=!0),o.children!==void 0&&o.children.length===1&&o.children[0].componentType==="string"&&(a=Math.round(Number(o.children[0].state.value)),l=!0),!l)return{success:!1}}t.variants===void 0&&(t.variants={});let s;if(t.variants.uniqueVariants){let o=1,l=[];t.variants.descendantVariantComponents!==void 0&&(l=t.variants.descendantVariantComponents.map(u=>u.variants.numberOfVariants),o=l.reduce((u,c)=>u*c,1),s={numberOfVariantsByDescendant:l}),a=Math.min(o,a)}return{success:!0,numberOfVariants:a,uniqueVariantData:s}}static getUniqueVariant({serializedComponent:t,variantIndex:e,allComponentClasses:r}){if(t.variants===void 0)return{succes:!1};let a=t.variants.numberOfVariants;if(a===void 0)return{success:!1};if(!Number.isInteger(e)||e<0||e>=a)return{success:!1};let s={index:e};if(t.variants.uniqueVariants){let o=zl({variantIndex:e,serializedComponent:t,allComponentClasses:r});o.success?s.subvariants=o.desiredVariants:console.log("Failed to get unique variant for "+t.componentType)}return{success:!0,desiredVariant:s}}};T(gr,"componentType","_sectioningComponent"),T(gr,"renderChildren",!0),T(gr,"setUpVariantIfVariantControlChild",!0),T(gr,"includeBlankStringChildren",!0);function Wx(i){return Pn(i,!0)}var $2=class extends gr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.level.definition=()=>({newValues:{level:1}}),t}};T($2,"componentType","section");var Zd=class extends gr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.level.definition=()=>({newValues:{level:2}}),t}};T(Zd,"componentType","subsection"),T(Zd,"rendererType","section");var Jd=class extends gr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.level.definition=()=>({newValues:{level:3}}),t}};T(Jd,"componentType","subsubsection"),T(Jd,"rendererType","section");var Qd=class extends gr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.level.definition=()=>({newValues:{level:4}}),t}};T(Qd,"componentType","paragraphs"),T(Qd,"rendererType","section");var eh=class extends gr{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.collapsible={createComponentOfType:"boolean",createStateVariable:"collapsible",defaultValue:!0,public:!0,forRenderer:!0},e.startOpen={createComponentOfType:"boolean",createStateVariable:"startOpen",defaultValue:!1},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return delete t.collapsible,t.open.returnDependencies=()=>({startOpen:{dependencyType:"stateVariable",variableName:"startOpen"}}),t.open.definition=({dependencyValues:e})=>({useEssentialOrDefaultValue:{open:{defaultValue:e.startOpen,variablesToCheck:["open"]}}}),t.level.definition=()=>({newValues:{level:3}}),t.containerTag.definition=()=>({newValues:{containerTag:"aside"}}),t}};T(eh,"componentType","aside"),T(eh,"rendererType","section");var Hl=class extends gr{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.aggregateScores.defaultValue=!0,e.suppressAutomaticVariants={createPrimitiveOfType:"boolean",createStateVariable:"suppressAutomaticVariants",defaultValue:!1},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return delete t.suppressAutomaticVariants,t.sectionName.definition=()=>({newValues:{sectionName:"Problem"}}),t.level.definition=()=>({newValues:{level:3}}),t}};T(Hl,"componentType","problem"),T(Hl,"rendererType","section"),T(Hl,"setUpVariantUnlessAttributePrimitive","suppressAutomaticVariants");var th=class extends Hl{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.sectionName.definition=()=>({newValues:{sectionName:"Exercise"}}),t}};T(th,"componentType","exercise"),T(th,"rendererType","section");var rh=class extends gr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.sectionName.definition=()=>({newValues:{sectionName:"Example"}}),t.level.definition=()=>({newValues:{level:3}}),t}};T(rh,"componentType","example"),T(rh,"rendererType","section");var nh=class extends gr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.level.definition=()=>({newValues:{level:3}}),t.containerTag.definition=()=>({newValues:{containerTag:"aside"}}),t}};T(nh,"componentType","standinForFutureLayoutTag"),T(nh,"rendererType","section");var X2={};lt(X2,{Li:()=>ql,Ol:()=>Gl,Ul:()=>ih});var Gl=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:void 0,public:!0,forRenderer:!0},e}static returnChildGroups(){return[{group:"lis",componentTypes:["li"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numbered={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{numbered:!0}})},t}};T(Gl,"componentType","ol"),T(Gl,"rendererType","list"),T(Gl,"renderChildren",!0);var ih=class extends Gl{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numbered={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{numbered:!1}})},t}};T(ih,"componentType","ul"),T(ih,"rendererType","list");var ql=class extends Q{static returnChildGroups(){return[{group:"inlinesBlocks",componentTypes:["_inline","_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.item={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{item:!0}})},t}};T(ql,"componentType","li"),T(ql,"rendererType","list"),T(ql,"renderChildren",!0),T(ql,"includeBlankStringChildren",!0);var Z2={};lt(Z2,{CobwebPolyline:()=>$l,ODESystem:()=>Wl});import ah from"math-expressions";var Wl=class extends re{static get stateVariablesShadowedForReference(){return["variables","validVariable","validIndependentVariable","initialConditions"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.independentVariable={createComponentOfType:"variable",createStateVariable:"independentVariable",defaultValue:ah.fromAst("t"),public:!0},e.initialIndependentVariableValue={createComponentOfType:"math",createStateVariable:"initialIndependentVariableValue",defaultValue:ah.fromAst(0),public:!0},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:14,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e.renderMode={createComponentOfType:"text",createStateVariable:"renderMode",defaultValue:"align",public:!0,forRenderer:!0},e.chunkSize={createComponentOfType:"number",createStateVariable:"chunkSize",defaultValue:10,public:!0},e.tolerance={createComponentOfType:"number",createStateVariable:"tolerance",defaultValue:1e-6,public:!0},e.maxIterations={createComponentOfType:"number",createStateVariable:"maxIterations",defaultValue:1e3,public:!0},e.hideInitialCondition={createComponentOfType:"boolean",createStateVariable:"hideInitialCondition",defaultValue:!1,public:!0},e.initialConditions={createComponentOfType:"mathList"},e.variables={createComponentOfType:"variables"},e.number={createComponentOfType:"boolean",createStateVariable:"number",defaultValue:!1,public:!0},e}static returnChildGroups(){return[{group:"rightHandSides",componentTypes:["rightHandSide"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.validIndependentVariable={returnDependencies:()=>({independentVarAttr:{dependencyType:"attributeComponent",attributeName:"independentVariable",variableNames:["validVariable"]}}),definition({dependencyValues:e}){let r=!0;return e.independentVarAttr&&(r=e.independentVarAttr.stateValues.validVariable),{newValues:{validIndependentVariable:r}}}},t.nDimensions={returnDependencies:()=>({rhsChildren:{dependencyType:"child",childGroups:["rightHandSides"],skipComponentNames:!0}}),definition:function({dependencyValues:e}){return{newValues:{nDimensions:e.rhsChildren.length},checkForActualChange:{nDimensions:!0}}}},t.variables={additionalStateVariablesDefined:[{variableName:"validVariables",isArray:!0,entryPrefixes:["validVar"]}],isArray:!0,public:!0,componentType:"variable",entryPrefixes:["var"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey(){return{globalDependencies:{nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},variables:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["variables","validVariables"]},independentVariable:{dependencyType:"stateVariable",variableName:"independentVariable"}}}},arrayDefinitionByKey({globalDependencyValues:e}){let r=[],a=[],s=e.nDimensions;e.variables!==null&&(r=e.variables.stateValues.variables,a=[...e.variables.stateValues.validVariables].slice(0,s));let o=vn(s,r);return o.some(l=>l.equals(e.independentVariable))&&console.warn("Variables of odesystem must be different than independent variable."),a.length<s&&a.push(...Array(s-a.length).fill(!0)),{newValues:{variables:o,validVariables:a}}}},t.rhss={isArray:!0,public:!0,componentType:"math",entryPrefixes:["rhs","righthandside"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={rhsChild:{dependencyType:"child",childGroups:["rightHandSides"],variableNames:["value"],childIndices:[a]}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e[s].rhsChild[0].stateValues.value;return{newValues:{rhss:a}}}},t.rhs={isAlias:!0,targetVariableName:"rhs1"},t.righthandside={isAlias:!0,targetVariableName:"rhs1"},t.righthandsides={isAlias:!0,targetVariableName:"rhss"},t.initialConditions={isArray:!0,public:!0,componentType:"math",entryPrefixes:["initialCondition"],defaultEntryValue:ah.fromAst(0),returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={initialConditionAttr:{dependencyType:"attributeComponent",attributeName:"initialConditions",variableNames:[`math${Number(a)+1}`]}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let l of r){let u=!1;if(e[l].initialConditionAttr){let c=e[l].initialConditionAttr.stateValues[`math${Number(l)+1}`];c!==void 0&&(u=!0,a[l]=c)}u||(s[l]={})}let o={};return Object.keys(a).length>0&&(o.newValues={initialConditions:a}),Object.keys(s).length>0&&(o.useEssentialOrDefaultValue={initialConditions:s}),o}},t.initialCondition={isAlias:!0,targetVariableName:"initialCondition1"},t.equationTag={public:!0,componentType:"text",forRenderer:!0,stateVariablesDeterminingDependencies:["number"],returnDependencies({stateValues:e}){return e.number?{equationCounter:{dependencyType:"counter",counterName:"equation"}}:{}},definition({dependencyValues:e}){return e.equationCounter!==void 0?{newValues:{equationTag:String(e.equationCounter)}}:{newValues:{equationTag:null}}}},t.latex={public:!0,componentType:"text",forRenderer:!0,returnDependencies(){return{nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},variables:{dependencyType:"stateVariable",variableName:"variables"},initialConditions:{dependencyType:"stateVariable",variableName:"initialConditions"},hideInitialCondition:{dependencyType:"stateVariable",variableName:"hideInitialCondition"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"},independentVariable:{dependencyType:"stateVariable",variableName:"independentVariable"},initialIndependentVariableValue:{dependencyType:"stateVariable",variableName:"initialIndependentVariableValue"},rhss:{dependencyType:"stateVariable",variableName:"rhss"},number:{dependencyType:"stateVariable",variableName:"number"},equationTag:{dependencyType:"stateVariable",variableName:"equationTag"}}},definition({dependencyValues:e,usedDefault:r}){let a=[],s=e.independentVariable.toLatex();for(let l=0;l<e.nDimensions;l++){let u=e.variables[l].toLatex(),c=dr({value:e.rhss[l],dependencyValues:e,usedDefault:r}),p=`\\frac{d${u}}{d${s}} &=  ${c.toLatex()}`;e.number&&l===0?p+=`\\tag{${e.equationTag}}`:p+="\\notag",a.push(p)}if(!e.hideInitialCondition){let l=e.initialIndependentVariableValue;for(let u=0;u<e.nDimensions;u++){let c=e.variables[u].toLatex(),p=dr({value:e.initialConditions[u],dependencyValues:e,usedDefault:r});a.push(`${c}(${l}) &= ${p.toLatex()}\\notag`)}}return{newValues:{latex:a.join("\\\\")}}}},t.latexWithInputChildren={forRenderer:!0,returnDependencies:()=>({latex:{dependencyType:"stateVariable",variableName:"latex"}}),definition:function({dependencyValues:e}){return{newValues:{latexWithInputChildren:[e.latex]}}}},t.numericalRHSf={returnDependencies:()=>({validIndependentVariable:{dependencyType:"stateVariable",variableName:"validIndependentVariable"},independentVariable:{dependencyType:"stateVariable",variableName:"independentVariable"},validVariables:{dependencyType:"stateVariable",variableName:"validVariables"},variables:{dependencyType:"stateVariable",variableName:"variables"},rhss:{dependencyType:"stateVariable",variableName:"rhss"}}),definition({dependencyValues:e}){let r=!0;e.validIndependentVariable||(console.warn("Can't define ODE RHS functions with invalid independent variable."),r=!1),e.validVariables.every(l=>l)||(console.warn("Can't define ODE RHS functions with an invalid variable."),r=!1);let a=e.independentVariable.subscripts_to_strings().tree,s=e.variables.map(l=>l.subscripts_to_strings().tree);s.includes(a)&&(console.warn("Can't define ODE RHS functions when independent variable is a dependent variable"),r=!1),[...new Set(s)].length!==s.length&&(console.warn("Can't define ODE RHS functions with duplicate dependent variable names"),r=!1);let o;try{o=e.rhss.map(l=>l.subscripts_to_strings().f())}catch(l){console.warn("Cannot define ODE RHS function.  Error creating mathjs function"),r=!1}return r?{newValues:{numericalRHSf:function(l,u){let c={[a]:l};Array.isArray(u)?u.forEach((p,m)=>c[s[m]]=p):c[s[0]]=u;try{return o.map(p=>p(c))}catch(p){return NaN}}}}:{newValues:{numericalRHSf:l=>NaN}}}},t.haveNumericalInitialConditions={additionalStateVariablesDefined:["t0","x0s"],returnDependencies:()=>({initialIndependentVariableValue:{dependencyType:"stateVariable",variableName:"initialIndependentVariableValue"},initialConditions:{dependencyType:"stateVariable",variableName:"initialConditions"}}),definition({dependencyValues:e}){let r=e.initialIndependentVariableValue.evaluate_to_constant(),a=e.initialConditions.map(o=>o.evaluate_to_constant()),s=Number.isFinite(r)&&a.every(o=>Number.isFinite(o));return{newValues:{t0:r,x0s:a,haveNumericalInitialConditions:s}}}},t.numericalSolutions={isArray:!0,entryPrefixes:["numericalSolution"],public:!0,componentType:"function",createWorkspace:!0,returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey(){return{globalDependencies:{nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},validIndependentVariable:{dependencyType:"stateVariable",variableName:"validIndependentVariable"},independentVariable:{dependencyType:"stateVariable",variableName:"independentVariable"},validVariables:{dependencyType:"stateVariable",variableName:"validVariables"},variables:{dependencyType:"stateVariable",variableName:"variables"},chunkSize:{dependencyType:"stateVariable",variableName:"chunkSize"},tolerance:{dependencyType:"stateVariable",variableName:"tolerance"},maxIterations:{dependencyType:"stateVariable",variableName:"maxIterations"},haveNumericalInitialConditions:{dependencyType:"stateVariable",variableName:"haveNumericalInitialConditions"},t0:{dependencyType:"stateVariable",variableName:"t0"},x0s:{dependencyType:"stateVariable",variableName:"x0s"},numericalRHSf:{dependencyType:"stateVariable",variableName:"numericalRHSf"}}}},arrayDefinitionByKey({globalDependencyValues:e,workspace:r,componentName:a}){let s={};if(r.calculatedNumericSolutions=[],r.endingNumericalValues=[],r.maxPossibleTime=void 0,!e.haveNumericalInitialConditions){for(let f=0;f<e.nDimensions;f++)s[f]=d=>NaN;return{newValues:{numericalSolutions:s}}}let o=e.t0,l=e.x0s,u=e.chunkSize,c=e.tolerance,p=e.numericalRHSf,m=e.maxIterations;for(let f=0;f<e.nDimensions;f++)s[f]=function(h){if(!Number.isFinite(h))return NaN;if(h===o)return l[f];let y=r.calculatedNumericSolutions.length,b=Math.ceil((h-o)/u)-1;if(b<0)return NaN;if(r.maxPossibleTime===void 0&&b>=y)for(let v=y;v<=b;v++){let C=r.endingNumericalValues[v-1];C===void 0&&(C=l);let w=o+v*u,S=ah.math.dopri(w,w+u,C,p,c,m);r.endingNumericalValues.push(S.y[S.y.length-1]),r.calculatedNumericSolutions.push(S.at.bind(S));let A=S.x[S.x.length-1];if(A<(w+u)*(1-1e-6)){r.maxPossibleTime=A;let E="For chunksize "+u+" and tolerance "+c+", odesystem";a!==void 0&&(E+=" ("+a+")"),E+=" hit maxiterations ("+m+") at t = "+r.maxPossibleTime+". Will not calculate solution beyond that time. Decrease chunksize, increase maxiterations, or increase tolerance to calculate further.";break}}return h>r.maxPossibleTime?NaN:r.calculatedNumericSolutions[b](h)[f]};return{newValues:{numericalSolutions:s}}}},t.numericalSolution={isAlias:!0,targetVariableName:"numericalSolution1"},t}};T(Wl,"componentType","odesystem"),T(Wl,"rendererType","math");var Qe=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:"",public:!0,forRenderer:!0},e.showLabel={createComponentOfType:"boolean",createStateVariable:"showLabel",defaultValue:!0,public:!0,forRenderer:!0},e.layer={createComponentOfType:"number",createStateVariable:"layer",defaultValue:0,public:!0,forRenderer:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.selectedStyle={forRenderer:!0,willNeverBeEssential:!0,returnDependencies:()=>({styleNumber:{dependencyType:"stateVariable",variableName:"styleNumber"},ancestorWithStyle:{dependencyType:"ancestor",variableNames:["styleDefinitions"]}}),definition:function({dependencyValues:e}){let r=e.ancestorWithStyle.stateValues.styleDefinitions;r||(r=Ml());let a;for(let s of r)e.styleNumber===s.styleNumber&&(a===void 0?a=s:a=Object.assign(Object.assign({},s),a));return a===void 0&&(a=r[0]),{newValues:{selectedStyle:a}}}},t}};T(Qe,"componentType","_graphical");import Y2 from"math-expressions";var Vi=class extends Qe{actions={movePolyline:this.movePolyline.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizePolylinePosition:this.finalizePolylinePosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["vertices","nVertices"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.vertices={createComponentOfType:"_pointListComponent"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r="";return e.selectedStyle.lineWidth>=4?r+="thick ":e.selectedStyle.lineWidth<=1&&(r+="thin "),e.selectedStyle.lineStyle==="dashed"?r+="dashed ":e.selectedStyle.lineStyle==="dotted"&&(r+="dotted "),r+=e.selectedStyle.lineColor,{newValues:{styleDescription:r}}}},t.nVertices={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({vertices:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["nPoints"]}}),definition:function({dependencyValues:e}){return e.vertices!==null?{newValues:{nVertices:e.vertices.stateValues.nPoints}}:{newValues:{nVertices:0}}}},t.nDimensions={public:!0,componentType:"number",returnDependencies(){return{vertices:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["nDimensions"]}}},definition:function({dependencyValues:e}){return e.vertices!==null?{newValues:{nDimensions:e.vertices.stateValues.nDimensions},checkForActualChange:{nDimensions:!0}}:{newValues:{nDimensions:2}}}},t.vertices={public:!0,componentType:"math",isArray:!0,nDimensions:2,entryPrefixes:["vertexX","vertex"],returnWrappingComponents(e){return e==="vertexX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="vertexX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},getAllArrayKeys(e,r=!0,a){function s(o){if(o.length===1)return Array.from(Array(o[0]),(l,u)=>String(u));{let l=o[0],u=s(o.slice(1)),c=[];for(let p=0;p<l;p++)r?c.push(...u.map(m=>p+","+m)):c.push(u.map(m=>p+","+m));return c}}if(a){if(a.length===0||!e)return[];{let o=[...e];return o[0]=a[0],s(o)}}else return!e||e.length===0?[]:s(e)},returnArraySizeDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nVertices,e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let[s,o]=a.split(","),l=Number(s)+1+"_"+(Number(o)+1);r[a]={vertices:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["pointX"+l]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let[o,l]=s.split(","),u=Number(o)+1+"_"+(Number(l)+1),c=e[s].vertices;c!==null&&c.stateValues["pointX"+u]?a[s]=c.stateValues["pointX"+u]:a[s]=Y2.fromAst("\uFF3F")}return{newValues:{vertices:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,initialChange:s,stateValues:o}){if(s&&!o.draggable)return{success:!1};let l=[];for(let u in e.vertices){let[c,p]=u.split(","),m=Number(c)+1+"_"+(Number(p)+1);if(r[u].vertices!==null&&r[u].vertices.stateValues["pointX"+m])l.push({setDependency:a[u].vertices,desiredValue:e.vertices[u],variableIndex:0});else return{success:!1}}return{success:!0,instructions:l}}},t.numericalVertices={isArray:!0,entryPrefixes:["numericalVertex"],forRenderer:!0,returnArraySizeDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"}}),returnArraySize({dependencyValues:e}){return[e.nVertices]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={vertex:{dependencyType:"stateVariable",variableName:"vertex"+(Number(a)+1)}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].vertex.map(l=>l.evaluate_to_constant());o.every(l=>Number.isFinite(l))||(o=Array(o.length).fill(NaN)),a[s]=o}return{newValues:{numericalVertices:a}}}},t.graphXmin={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"graphXmax",forRenderer:!0},{variableName:"graphYmin",forRenderer:!0},{variableName:"graphYmax",forRenderer:!0}],returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]}}),definition({dependencyValues:e}){return e.graphAncestor?{newValues:{graphXmin:e.graphAncestor.stateValues.xmin,graphXmax:e.graphAncestor.stateValues.xmax,graphYmin:e.graphAncestor.stateValues.ymin,graphYmax:e.graphAncestor.stateValues.ymax}}:{newValues:{graphXmin:null,graphXmax:null,graphYmin:null,graphYmax:null}}}},t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalVertices:{dependencyType:"stateVariable",variableName:"numericalVertices"},nVertices:{dependencyType:"stateVariable",variableName:"nVertices"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:e}){let r=e.nDimensions,a=e.nVertices,s=e.numericalVertices,o=1,l=1;e.graphXmin!==null&&e.graphXmax!==null&&e.graphYmin!==null&&e.graphYmax!==null&&(o=e.graphXmax-e.graphXmin,l=e.graphYmax-e.graphYmin);let u=[],c,p,m=s[0][0],f=s[0][1];for(let d=1;d<a;d++)if(c=m,p=f,m=s[d][0],f=s[d][1],!(Number.isFinite(c)&&Number.isFinite(p)&&Number.isFinite(m)&&Number.isFinite(f)))u.push(null);else{let h=(m-c)/o,y=(f-p)/l,b=h*h+y*y;b===0?u.push(null):u.push([h,y,b])}return{newValues:{nearestPoint:function(d){if(r!==2||a===0)return{};let h=1/0,y={},b=d.x1.evaluate_to_constant(),g=d.x2.evaluate_to_constant(),v,C,w=s[0][0],S=s[0][1];for(let A=1;A<a;A++){v=w,C=S,w=s[A][0],S=s[A][1];let E=u[A-1];if(E===null)continue;let[I,V,O]=E,k=((b-v)/o*I+(g-C)/l*V)/O,M;k<=0?M={x1:v,x2:C}:k>=1?M={x1:w,x2:S}:M={x1:v+k*I*o,x2:C+k*V*l};let L=Math.pow((b-M.x1)/o,2)+Math.pow((g-M.x2)/l,2);L<h&&(h=L,y=M)}return d.x3!==void 0&&Object.keys(y).length>0&&(y.x3=0),y}}}}},t}movePolyline({pointCoords:t,transient:e,sourceInformation:r}){let a={};for(let s in t)a[s+",0"]=Y2.fromAst(t[s][0]),a[s+",1"]=Y2.fromAst(t[s][1]);return e?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"vertices",value:a,sourceInformation:r}],transient:e}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"vertices",value:a,sourceInformation:r}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{pointCoordinates:t}}})}finalizePolylinePosition(){return this.actions.movePolyline({pointCoords:this.stateValues.numericalVertices,transient:!1})}};T(Vi,"componentType","polyline"),T(Vi,"useChildrenForReference",!1);import ra from"math-expressions";var $l=class extends Vi{static get stateVariablesShadowedForReference(){return["initialPoint","f"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.attractThreshold={createComponentOfType:"number",createStateVariable:"attractThreshold",defaultValue:.5,public:!0},e.nPoints={createComponentOfType:"number",createStateVariable:"nPoints",defaultValue:1,public:!0,clamp:[0,1/0],forRenderer:!0},e.variable={createComponentOfType:"variable",createStateVariable:"variable",defaultValue:ra.fromAst("x"),public:!0,forRenderer:!0},e.nIterationsRequired={createComponentOfType:"number",createStateVariable:"nIterationsRequired",defaultValue:0,public:!0},e.initialPoint={createComponentOfType:"point"},e.function={createComponentOfType:"function"},e.lockToSolution={createComponentOfType:"boolean",createStateVariable:"lockToSolution",defaultValue:!1},e.defaultPoint={createComponentOfType:"point"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nDimensions.returnDependencies=()=>({}),t.nDimensions.definition=()=>({newValues:{nDimensions:2}}),t.initialPoint={isArray:!0,public:!0,componentType:"math",entryPrefixes:["initialPointX"],defaultEntryValue:ra.fromAst(0),returnWrappingComponents(e){return e==="initialPointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},returnArraySizeDependencies:()=>({}),returnArraySize:()=>[2],returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1;r[a]={initialPointAttr:{dependencyType:"attributeComponent",attributeName:"initialPoint",variableNames:["x"+s]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let l of r){let u=Number(l)+1;e[l].initialPointAttr?a[l]=e[l].initialPointAttr.stateValues["x"+u]:s[l]={}}let o={};return Object.keys(a).length>0&&(o.newValues={initialPoint:a}),Object.keys(s).length>0&&(o.useEssentialOrDefaultValue={initialPoint:s}),o},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a}){let s=[];for(let o in e.initialPoint)r[o].initialPointAttr&&r[o].initialPointAttr.stateValues["x"+(Number(o)+1)]?s.push({setDependency:a[o].initialPointAttr,desiredValue:e.initialPoint[o],variableIndex:0}):s.push({setStateVariable:"initialPoint",value:{[o]:e.initialPoint[o]}});return{success:!0,instructions:s}}},t.f={forRenderer:!0,returnDependencies:()=>({functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["numericalf"]}}),definition({dependencyValues:e}){return e.functionAttr?{newValues:{f:e.functionAttr.stateValues.numericalf}}:{newValues:{f:null}}}},t.nVertices={isAlias:!0,targetVariableName:"nPoints"},t.nOriginalVertices={providePreviousValuesInDefinition:!0,returnDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"}}),definition({dependencyValues:e,previousValues:r}){let a=e.nVertices;return r.nOriginalVertices>a&&(a=r.nOriginalVertices),{newValues:{nOriginalVertices:a}}}},t.originalVertices={isArray:!0,nDimensions:2,entryPrefixes:["originalVertexX","originalVertex"],getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="originalVertexX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},returnArraySizeDependencies:()=>({nOriginalVertices:{dependencyType:"stateVariable",variableName:"nOriginalVertices"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nOriginalVertices-1,e.nDimensions]},returnArrayDependenciesByKey:()=>({globalDependencies:{graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]},defaultPoint:{dependencyType:"attributeComponent",attributeName:"defaultPoint",variableNames:["xs"]}}}),arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={};for(let s of r){let o=s.split(",").map(Number),l=o.map(u=>u+1).join("_");a[s]={variablesToCheck:["originalVertex"+l],get defaultValue(){if(e.defaultPoint){let u=e.defaultPoint.stateValues.xs;if(u.length===2&&o[1]<2)return u[o[1]]}if(e.graphAncestor){if(o[1]===0){let u=e.graphAncestor.stateValues.xmin,c=e.graphAncestor.stateValues.xmax;return ra.fromAst((u+c)/2)}else if(o[1]===1){let u=e.graphAncestor.stateValues.ymin,c=e.graphAncestor.stateValues.ymax;return ra.fromAst((u+c)/2)}}return ra.fromAst(0)}}}return{useEssentialOrDefaultValue:{originalVertices:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e}){let r=[];for(let a in e.originalVertices)r.push({setStateVariable:"originalVertices",value:{[a]:e.originalVertices[a]}});return{success:!0,instructions:r}}},t.vertices.additionalStateVariablesDefined=[{variableName:"prelimCorrectVertices",entryPrefixes:["prelimCorrectVertexX","prelimCorrectVertex"],getArrayKeysFromVarName:function({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="prelimCorrectVertexX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}}}],t.vertices.basedOnArrayKeyStateVariables=!0,t.vertices.returnArrayDependenciesByKey=function({arrayKeys:e}){let r={f:{dependencyType:"stateVariable",variableName:"f"},attractThreshold:{dependencyType:"stateVariable",variableName:"attractThreshold"},lockToSolution:{dependencyType:"stateVariable",variableName:"lockToSolution"}},a={};for(let s of e){let[o,l]=s.split(",");o==="0"?a[s]={initialPoint:{dependencyType:"stateVariable",variableName:"initialPointX"+(Number(l)+1)}}:a[s]={originalVertexX1:{dependencyType:"stateVariable",variableName:"originalVertexX"+o+"_1"},originalVertexX2:{dependencyType:"stateVariable",variableName:"originalVertexX"+o+"_2"},previousVertexX1:{dependencyType:"stateVariable",variableName:"vertexX"+o+"_1"},previousVertexX2:{dependencyType:"stateVariable",variableName:"vertexX"+o+"_2"}}}return{globalDependencies:r,dependenciesByKey:a}},t.vertices.arrayDefinitionByKey=function({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={},o={};for(let l of a){let[u,c]=l.split(",");if(u==="0")s[l]=r[l].initialPoint,o[l]=null;else{let p,m;try{p=[r[l].originalVertexX1.evaluate_to_constant(),r[l].originalVertexX2.evaluate_to_constant()],m=[r[l].previousVertexX1.evaluate_to_constant(),r[l].previousVertexX2.evaluate_to_constant()]}catch(h){s[u+",0"]=ra.fromAst(0),s[u+",1"]=ra.fromAst(0),o[u+",0"]=!1;continue}let f;if(Number(u)%2==1){let h=e.f(m[0]);f=[m[0],h]}else f=[m[1],m[1]];Math.pow(p[0]-f[0],2)+Math.pow(p[1]-f[1],2)<e.attractThreshold*e.attractThreshold||e.lockToSolution?(s[u+",0"]=ra.fromAst(f[0]),s[u+",1"]=ra.fromAst(f[1]),o[u+",0"]=!0):(s[u+",0"]=r[l].originalVertexX1,s[u+",1"]=r[l].originalVertexX2,o[u+",0"]=!1),o[u+",1"]=null}}return{newValues:{vertices:s,prelimCorrectVertices:o}}},t.vertices.inverseArrayDefinitionByKey=function({desiredStateVariableValues:e,dependencyNamesByKey:r,initialChange:a,stateValues:s}){if(a&&!s.draggable)return{success:!1};let o=[];for(let l in e.vertices){let[u,c]=l.split(",");u==="0"?o.push({setDependency:r[l].initialPoint,desiredValue:e.vertices[l]}):o.push({setDependency:r[l]["originalVertexX"+(Number(c)+1)],desiredValue:e.vertices[l]})}return{success:!0,instructions:o}},t.correctVertices={isArray:!0,public:!0,componentType:"boolean",entryPrefixes:["correctVertex"],returnArraySizeDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"}}),returnArraySize({dependencyValues:e}){return[e.nVertices-1]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={prelimCorrectVertex:{dependencyType:"stateVariable",variableName:"prelimCorrectVertexX"+(Number(a)+2)+"_1"}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e[s].prelimCorrectVertex;return{newValues:{correctVertices:a}}}},t.fractionCorrectVertices={public:!0,componentType:"number",additionalStateVariablesDefined:[{variableName:"nGradedVertices",public:!0,componentType:"number"},{variableName:"nCorrectVertices",public:!0,componentType:"number"}],returnDependencies:()=>({correctVertices:{dependencyType:"stateVariable",variableName:"correctVertices"}}),definition({dependencyValues:e}){let r=e.correctVertices.length,a,s;return r===0?(a=0,s=0):(s=e.correctVertices.reduce((o,l)=>o+l,0),a=s/r),{newValues:{fractionCorrectVertices:a,nGradedVertices:r,nCorrectVertices:s}}}},t.fractionCorrectVerticesAdjusted={public:!0,componentType:"number",additionalStateVariablesDefined:[{variableName:"nGradedVerticesAdjusted",public:!0,componentType:"number"}],returnDependencies:()=>({nCorrectVertices:{dependencyType:"stateVariable",variableName:"nCorrectVertices"},nGradedVertices:{dependencyType:"stateVariable",variableName:"nGradedVertices"},nIterationsRequired:{dependencyType:"stateVariable",variableName:"nIterationsRequired"}}),definition({dependencyValues:e}){let r=0;e.nIterationsRequired>0&&(r=2*e.nIterationsRequired-1);let a=Math.max(e.nGradedVertices,r),s;return a===0?s=0:s=e.nCorrectVertices/a,{newValues:{fractionCorrectVerticesAdjusted:s,nGradedVerticesAdjusted:a}}}},t.nIterateValues={public:!0,componentType:"number",returnDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"}}),definition:({dependencyValues:e})=>({newValues:{nIterateValues:Math.ceil((e.nVertices+1)/2)}})},t.iterateValues={isArray:!0,public:!0,componentType:"math",entryPrefixes:["iterateValue"],returnArraySizeDependencies:()=>({nIterateValues:{dependencyType:"stateVariable",variableName:"nIterateValues"}}),returnArraySize({dependencyValues:e}){return[e.nIterateValues]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)a==="0"?r[a]={iterateValue:{dependencyType:"stateVariable",variableName:"vertexX1_1"}}:r[a]={iterateValue:{dependencyType:"stateVariable",variableName:"vertexX"+2*Number(a)+"_2"}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e[s].iterateValue;return{newValues:{iterateValues:a}}}},t}};T($l,"componentType","cobwebPolyline"),T($l,"rendererType","cobwebPolyline");var Q2={};lt(Q2,{FeedbackDefinition:()=>J2,FeedbackDefinitions:()=>sh});var J2=class extends Q{static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.code={createComponentOfType:"text"},e.text={createComponentOfType:"text"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={returnDependencies:()=>({codeAttr:{dependencyType:"attributeComponent",attributeName:"code",variableNames:["value"]},textAttr:{dependencyType:"attributeComponent",attributeName:"text",variableNames:["value"]}}),definition({dependencyValues:e}){let r={};return e.codeAttr!==null?r.feedbackCode=e.codeAttr.stateValues.value.toLowerCase():r.feedbackCode="",e.textAttr!==null&&(r.feedbackText=e.textAttr.stateValues.value),{newValues:{value:r}}}},t}};T(J2,"componentType","feedbackDefinition");var sh=class extends Q{static returnChildGroups(){return[{group:"feedbackDefinition",componentTypes:["feedbackDefinition"]},{group:"feedbackDefinitions",componentTypes:["feedbackDefinitions"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nDefinitions={returnDependencies:()=>({feedbackDefinitionChildren:{dependencyType:"child",childGroups:["feedbackDefinition"]},feedbackDefinitionsChild:{dependencyType:"child",childGroups:["feedbackDefinitions"],variableNames:["nDefinitions"]}}),definition({dependencyValues:e}){let r;return e.feedbackDefinitionsChild.length>0?r=e.feedbackDefinitionsChild[0].stateValues.nDefinitions:r=e.feedbackDefinitionChildren.length,{newValues:{nDefinitions:r}}}},t.value={isArray:!0,entryPrefixes:["feedbackDefinition"],returnArraySizeDependencies:()=>({nDefinitions:{dependencyType:"stateVariable",variableName:"nDefinitions"}}),returnArraySize({dependencyValues:e}){return[e.nDefinitions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={feedbackDefinitionChild:{dependencyType:"child",childGroups:["feedbackDefinition"],variableNames:["value"],childIndices:[a]},feedbackDefinitionsChild:{dependencyType:"child",childGroups:["feedbackDefinitions"],variableNames:["feedbackDefinition"+(Number(a)+1)]}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].feedbackDefinitionChild;if(o.length>0)a[s]=o[0].stateValues.value;else{let l=e[s].feedbackDefinitionsChild;l.length>0&&(a[s]=l[0].stateValues["feedbackDefinition"+(Number(s)+1)])}}return{newValues:{value:a}}}},t}};T(sh,"componentType","feedbackDefinitions"),T(sh,"rendererType");var eT={};lt(eT,{StyleDefinition:()=>lh,StyleDefinitions:()=>uh});var oh={lineColor:{componentType:"text"},lineWidth:{componentType:"number"},lineStyle:{componentType:"text"},markerColor:{componentType:"text"},markerStyle:{componentType:"text"},markerSize:{componentType:"number"}},lh=class extends Q{static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);e.styleNumber={createPrimitiveOfType:"number"};for(let r in oh)e[r]={createComponentOfType:oh[r].componentType};return e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={returnDependencies:function(){let e={styleNumber:{dependencyType:"attributePrimitive",attributeName:"styleNumber"}};for(let r in oh)e[r]={dependencyType:"attributeComponent",attributeName:r,variableNames:["value"]};return e},definition:function({dependencyValues:e}){let r={styleNumber:e.styleNumber};for(let a in oh)e[a]!==null&&(r[a]=e[a].stateValues.value);return{newValues:{value:r}}}},t}};T(lh,"componentType","styleDefinition"),T(lh,"rendererType");var uh=class extends Q{static returnChildGroups(){return[{group:"styleDefinition",componentTypes:["styleDefinition"]},{group:"styleDefinitions",componentTypes:["styleDefinitions"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nDefinitions={returnDependencies:()=>({styleDefinitionChildren:{dependencyType:"child",childGroups:["styleDefinition"]},styleDefinitionsChild:{dependencyType:"child",childGroups:["styleDefinitions"],variableNames:["nDefinitions"]}}),definition({dependencyValues:e}){let r;return e.styleDefinitionsChild.length>0?r=e.styleDefinitionsChild[0].stateValues.nDefinitions:r=e.styleDefinitionChildren.length,{newValues:{nDefinitions:r}}}},t.value={isArray:!0,entryPrefixes:["styleDefinition"],returnArraySizeDependencies:()=>({nDefinitions:{dependencyType:"stateVariable",variableName:"nDefinitions"}}),returnArraySize({dependencyValues:e}){return[e.nDefinitions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={styleDefinitionChild:{dependencyType:"child",childGroups:["styleDefinition"],variableNames:["value"],childIndices:[a]},styleDefinitionsChild:{dependencyType:"child",childGroups:["styleDefinitions"],variableNames:["styleDefinition"+(Number(a)+1)]}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].styleDefinitionChild;if(o.length>0)a[s]=o[0].stateValues.value;else{let l=e[s].styleDefinitionsChild;l.length>0&&(a[s]=l[0].stateValues["styleDefinition"+(Number(s)+1)])}}return{newValues:{value:a}}}},t}};T(uh,"componentType","styleDefinitions"),T(uh,"rendererType");var nT={};lt(nT,{ComponentListOfListsWithSelectableType:()=>rT,ComponentListWithSelectableType:()=>_p,ComponentWithSelectableType:()=>rs});import tT from"math-expressions";function _n({componentType:i,forceComponentType:t=!1}){return function({matchedChildren:e,componentInfoObjects:r}){let a=[],s=[];function o(){let l=!1;if(t){if(s.length===1){let u=s[0],c=u.componentType;c==="copy"&&u.attributes&&u.attributes.componentType&&(!u.attributes.nComponents||u.attributes.nComponents.primitive===1)&&(c=u.attributes.componentType.primitive),r.isInheritedComponentType({inheritedComponentType:c,baseComponentType:i})&&(a.push(u),l=!0)}}else s.length===1&&s[0].componentType!=="string"&&(a.push(s[0]),l=!0);!l&&s.length>0&&a.push({componentType:i,children:s}),s=[]}for(let l of e)if(l.componentType!=="string")s.push(l);else{let u=l.state.value.split(/\s+/),c=u[0];c===""?o():s.push({componentType:"string",state:{value:c}});for(let p of u.slice(1))o(),p!==""&&s.push({componentType:"string",state:{value:p}})}return o(),{success:!0,newChildren:a}}}function Ii({componentType:i}){return function({matchedChildren:t}){let e=t.reduce(function(r,a){return a.componentType==="string"?[...r,...a.state.value.split(/\s+/).filter(s=>s).map(s=>({componentType:i,children:[{componentType:"string",state:{value:s}}]}))]:[...r,a]},[]);return{success:!0,newChildren:e}}}var rs=class extends Q{static get stateVariablesShadowedForReference(){return["value","type"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.type={createPrimitiveOfType:"string"},e}static returnSugarInstructions(){let t=[];function e({matchedChildren:r,componentAttributes:a,parentAttributes:s}){let o=a.type;o||(o=s.type),o?["number","letters","math","text","boolean"].includes(o)||(console.warn(`Invalid type ${o}, setting type to number`),o="number"):o="number";let l=o==="letters"?"text":o;return l!=="text"&&(r=r.filter(u=>u.componentType!=="string"||u.state.value.trim()!=="")),{success:!0,newChildren:[{componentType:l,children:r}]}}return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.type={returnDependencies:()=>({type:{dependencyType:"doenetAttribute",attributeName:"type"},parentType:{dependencyType:"parentStateVariable",variableName:"type"}}),definition:function({dependencyValues:e,componentName:r}){let a=e.type;return a||(a=e.parentType),a?["number","letters","math","text","boolean"].includes(a)||(console.warn(`Invalid type ${a}, setting type to number`),a="number"):a="number",{newValues:{type:a}}}},t.value={public:!0,hasVariableComponentType:!0,returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},atMostOneChild:{dependencyType:"child",childGroups:["anything"],variableNames:["value"]}}),definition({dependencyValues:e}){let r;return e.atMostOneChild.length>0?r=e.atMostOneChild[0].stateValues.value:e.type==="text"||e.type==="letters"?r="":e.type==="boolean"?r=!1:e.type==="number"?r=NaN:r=tT.fromAst("\uFF3F"),{newValues:{value:r},setComponentType:{value:e.type}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.atMostOneChild.length>0?{success:!0,instructions:[{setDependency:"atMostOneChild",desiredValue:e.value,childIndex:0,variableIndex:0}]}:{success:!1}}},t}};T(rs,"componentType","_componentWithSelectableType"),T(rs,"rendererType"),T(rs,"includeBlankStringChildren",!0),T(rs,"useChildrenForReference",!1);var _p=class extends rs{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.type={createPrimitiveOfType:"string"},e}static returnSugarInstructions(){let t=[];return t.push({replacementFunction:function({matchedChildren:e,componentAttributes:r,parentAttributes:a,isAttributeComponent:s=!1,createdFromMacro:o=!1,componentInfoObjects:l}){let u=r.type;u||(u=a.type),u?["number","letters","math","text","boolean"].includes(u)||(console.warn(`Invalid type ${u}, setting type to number`),u="number"):u="number";let c=u==="letters"?"text":u;return s&&!o?_n({componentType:c})({matchedChildren:e}):Ii({componentType:c})({matchedChildren:e})}}),t}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return delete t.value,t.nValues={additionalStateVariablesDefined:["childForValue"],returnDependencies:()=>({anythingForSelectedType:{dependencyType:"child",childGroups:["anything"],variableNames:["nValues"],variablesOptional:!0}}),definition({dependencyValues:e}){let r=0,a=[];for(let[s,o]of e.anythingForSelectedType.entries()){let l=Number.isInteger(o.stateValues.nValues)?o.stateValues.nValues:1;r+=l;for(let u=0;u<l;u++)a.push({child:s,valueIndex:u})}return{newValues:{nValues:r,childForValue:a}}}},t.values={public:!0,isArray:!0,entryPrefixes:["value"],stateVariablesDeterminingDependencies:["childForValue"],hasVariableComponentType:!0,returnArraySizeDependencies:()=>({nValues:{dependencyType:"stateVariable",variableName:"nValues"}}),returnArraySize({dependencyValues:e}){return[e.nValues]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={type:{dependencyType:"stateVariable",variableName:"type"}},s={};for(let o of e){let l=r.childForValue[o];s[o]={anythingForSelectedType:{dependencyType:"child",childGroups:["anything"],variableNames:["value","values"],childIndices:[l.child],variablesOptional:!0},valueIndex:{dependencyType:"value",value:l.valueIndex}}}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,componentName:s}){let o={};for(let l of a)if(r[l].anythingForSelectedType&&r[l].anythingForSelectedType.length===1){let u=r[l].anythingForSelectedType[0],c;u.stateValues.values?c=u.stateValues.values[r[l].valueIndex]:c=u.stateValues.value,o[l]=$x(c,e.type)}return{newValues:{values:o},setComponentType:{values:e.type}}}},t}};T(_p,"componentType","_componentListWithSelectableType"),T(_p,"includeBlankStringChildren",!0),T(_p,"removeBlankStringChildrenPostSugar",!0);var rT=class extends rs{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.type={createPrimitiveOfType:"string"},e}static returnSugarInstructions(){let t=[],e=function({matchedChildren:r,componentAttributes:a,parentAttributes:s}){let o=Si({componentList:r,removeParens:!0});if(o.success!==!0)return{success:!1};let l=a.type;return l||(l=s.type),l?["number","letters","math","text","boolean"].includes(l)||(console.warn(`Invalid type ${l}, setting type to number`),l="number"):l="number",{success:!0,newChildren:o.pieces.map(u=>({componentType:"_componentListWithSelectableType",attributes:{type:{primitive:l}},children:u}))}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"lists",componentTypes:["_componentListWithSelectableType"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return delete t.value,t.nLists={returnDependencies:()=>({listChildren:{dependencyType:"child",childGroups:["lists"]}}),definition({dependencyValues:e}){return{newValues:{nLists:e.listChildren.length}}}},t.lists={isArray:!0,entryPrefixes:["list"],returnArraySizeDependencies:()=>({nLists:{dependencyType:"stateVariable",variableName:"nLists"}}),returnArraySize({dependencyValues:e}){return[e.nLists]},returnArrayDependenciesByKey({arrayKeys:e}){let r={type:{dependencyType:"stateVariable",variableName:"type"}},a={};for(let s of e)a[s]={listChildren:{dependencyType:"child",childGroups:["lists"],variableNames:["values","type"],childIndices:[s]}};return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a)if(r[o].listChildren&&r[o].listChildren.length===1){let l=r[o].listChildren[0];l.stateValues.type===e.type?s[o]=l.stateValues.values:s[o]=l.stateValues.values.map(u=>$x(u,e.type))}return{newValues:{lists:s}}}},t}};T(rT,"componentType","_componentListOfListsWithSelectableType");function $x(i,t){if(Array.isArray(i)&&(i=i[0]),t==="number"){if(i instanceof tT.class){let e=i.evaluate_to_constant();return Number.isFinite(e)||(e=NaN),e}return Number(i)}else if(t==="math"){if(typeof i=="string")try{return tT.fromAst(fr.convert(i))}catch(e){}return Ze(i)}else return t==="boolean"?Boolean(i):String(i)}var iT={};lt(iT,{SbsGroup:()=>kp,SideBySide:()=>ch,Stack:()=>Fp});import ez from"math-expressions";var ch=class extends ue{static get stateVariablesShadowedForReference(){return["widths","margins","valigns"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize"},e.widths={createComponentOfType:"_componentSizeList"},e.margins={createComponentOfType:"_componentSizeList"},e.valign={createComponentOfType:"text"},e.valigns={createComponentOfType:"textList"},e}static returnChildGroups(){return[{group:"blocks",componentTypes:["_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nPanels={forRenderer:!0,returnDependencies:()=>({blockChildren:{dependencyType:"child",childGroups:["blocks"],skipComponentNames:!0}}),definition({dependencyValues:e}){return{newValues:{nPanels:e.blockChildren.length},checkForActualChange:{nPanels:!0}}}},t.essentialWidths={isArray:!0,entryPrefixes:["essentialWidth"],defaultEntryValue:void 0,returnArraySizeDependencies:()=>({nPanels:{dependencyType:"stateVariable",variableName:"nPanels"}}),returnArraySize({dependencyValues:e}){return[e.nPanels]},returnArrayDependenciesByKey:()=>({}),arrayDefinitionByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={};return{useEssentialOrDefaultValue:{essentialWidths:r}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e}){let r={};for(let a in e.essentialWidths)r[a]=e.essentialWidths[a];return{success:!0,instructions:[{setStateVariable:"essentialWidths",value:r}]}}},t.allWidthsSpecified={additionalStateVariablesDefined:[{variableName:"widthsAbsolute"}],returnDependencies(){return{nPanels:{dependencyType:"stateVariable",variableName:"nPanels"},widthAttr:{dependencyType:"attributeComponent",attributeName:"width",variableNames:["componentSize"]},widthsAttr:{dependencyType:"attributeComponent",attributeName:"widths",variableNames:["nComponents","componentSizes"]},parentWidths:{dependencyType:"parentStateVariable",parentComponentType:"sbsGroup",variableName:"specifiedWidths"},parentWidthsAbsolute:{dependencyType:"parentStateVariable",parentComponentType:"sbsGroup",variableName:"widthsAbsolute"},essentialWidth:{dependencyType:"stateVariable",variableName:"essentialWidths"}}},definition({dependencyValues:e}){let r=[],a,s,o=!1;e.widthsAttr!==null?s=e.widthsAttr.stateValues.nComponents:e.widthAttr!==null?(s=e.nPanels,o=!0):s=0;for(let l=0;l<e.nPanels;l++){let u;if(l<s?o?e.widthAttr.stateValues.componentSize?(r[l]=e.widthAttr.stateValues.componentSize.size,u=Boolean(e.widthAttr.stateValues.componentSize.isAbsolute)):r[l]=void 0:e.widthsAttr.stateValues.componentSizes[l]?(r[l]=e.widthsAttr.stateValues.componentSizes[l].size,u=Boolean(e.widthsAttr.stateValues.componentSizes[l].isAbsolute)):r[l]=void 0:e.parentWidths?(e.essentialWidth[l]===void 0?r[l]=e.parentWidths[l]:r[l]=e.essentialWidth[l],u=e.parentWidthsAbsolute):r[l]=e.essentialWidth[l],a===void 0)a=u;else if(u!==void 0&&a!==u)throw Error("SideBySide is not implemented for absolute measurements")}return r=r.map(l=>Number.isFinite(l)?l:void 0),{newValues:{allWidthsSpecified:r,widthsAbsolute:a}}}},t.essentialMargins={isArray:!0,entryPrefixes:["essentialMargin"],defaultEntryValue:void 0,returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey:()=>({}),arrayDefinitionByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={};return{useEssentialOrDefaultValue:{essentialMargins:r}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e}){let r={};for(let a in e.essentialMargins)r[a]=e.essentialMargins[a];return{success:!0,instructions:[{setStateVariable:"essentialMargins",value:r}]}}},t.allMarginsSpecified={additionalStateVariablesDefined:[{variableName:"marginsAbsolute"}],returnDependencies(){return{nPanels:{dependencyType:"stateVariable",variableName:"nPanels"},marginsAttr:{dependencyType:"attributeComponent",attributeName:"margins",variableNames:["nComponents","componentSizes"]},parentMargins:{dependencyType:"parentStateVariable",parentComponentType:"sbsGroup",variableName:"specifiedMargins"},parentMarginsAbsolute:{dependencyType:"parentStateVariable",parentComponentType:"sbsGroup",variableName:"marginsAbsolute"},essentialMargins:{dependencyType:"stateVariable",variableName:"essentialMargins"}}},definition({dependencyValues:e}){let r=[],a;if(e.marginsAttr===null)if(e.parentMargins){a=e.parentMarginsAbsolute;for(let s=0;s<2;s++)e.essentialMargins[s]===void 0?r[s]=e.parentMargins[s]:r[s]=e.essentialMargins[s]}else for(let s=0;s<2;s++)r[s]=e.essentialMargins[s];else if(e.marginsAttr.stateValues.nComponents===0)for(let s=0;s<2;s++)r[s]=e.essentialMargins[s];else if(e.marginsAttr.stateValues.nComponents===1){let s;e.marginsAttr.stateValues.componentSizes[0]&&(s=e.marginsAttr.stateValues.componentSizes[0].size,Number.isFinite(s)||(s=void 0),a=Boolean(e.marginsAttr.stateValues.componentSizes[0].isAbsolute)),r=[s,s]}else{e.marginsAttr.stateValues.componentSizes[0]?a=Boolean(e.marginsAttr.stateValues.componentSizes[0].isAbsolute):a=!1;let s;if(e.marginsAttr.stateValues.componentSizes[1]?s=Boolean(e.marginsAttr.stateValues.componentSizes[1].isAbsolute):s=!1,s!==a)throw Error("SideBySide is not implemented for absolute measurements");r=e.marginsAttr.stateValues.componentSizes.slice(0,2).map(o=>o&&Number.isFinite(o.size)?o.size:void 0)}return{newValues:{allMarginsSpecified:r,marginsAbsolute:a}}}},t.absoluteMeasurements={public:!0,componentType:"boolean",forRenderer:!0,returnDependencies:()=>({widthsAbsolute:{dependencyType:"stateVariable",variableName:"widthsAbsolute"},marginsAbsolute:{dependencyType:"stateVariable",variableName:"marginsAbsolute"}}),definition({dependencyValues:e}){let r;if(e.widthsAbsolute===void 0)e.marginsAbsolute===void 0?r=!1:r=e.marginsAbsolute;else if(e.marginsAbsolute===void 0)r=e.widthsAbsolute;else{if(e.widthsAbsolute!==e.marginsAbsolute)throw Error("SideBySide is not implemented for absolute measurements");r=e.widthsAbsolute}if(r===!0)throw Error("SideBySide is not implemented for absolute measurements");return{newValues:{absoluteMeasurements:r}}}},t.allWidths={additionalStateVariablesDefined:["allMargins",{variableName:"gapWidth",public:!0,componentType:"number",forRenderer:!0}],returnDependencies:()=>({nPanels:{dependencyType:"stateVariable",variableName:"nPanels"},allWidthsSpecified:{dependencyType:"stateVariable",variableName:"allWidthsSpecified"},allMarginsSpecified:{dependencyType:"stateVariable",variableName:"allMarginsSpecified"},absoluteMeasurements:{dependencyType:"stateVariable",variableName:"absoluteMeasurements"}}),definition({dependencyValues:e}){let r=0,a=[...e.allWidthsSpecified],s=[...e.allMarginsSpecified],o=0,l=0;for(let p=0;p<e.nPanels;p++){let m=a[p];m===void 0?l++:o+=m}let u=0,c=0;for(let p=0;p<2;p++){let m=s[p];m===void 0?c++:u+=m}if(u*=e.nPanels,!e.absoluteMeasurements)if(o+u>=100){let p=100/(o+u);for(let m=0;m<e.nPanels;m++)a[m]===void 0?a[m]=0:a[m]*=p;for(let m=0;m<2;m++)s[m]===void 0?s[m]=0:s[m]*=p}else if(l>0){let p=(100-(o+u))/l;for(let m=0;m<e.nPanels;m++)a[m]===void 0&&(a[m]=p);for(let m=0;m<2;m++)s[m]===void 0&&(s[m]=0)}else if(c>0){let p=(100-(o+u))/(c*e.nPanels);for(let m=0;m<2;m++)s[m]===void 0&&(s[m]=p)}else e.nPanels>1?r=(100-(o+u))/(e.nPanels-1):e.nPanels===1?s[1]=100-(s[0]+a[0]):console.warn("Invalid sideBySide, as it must have at least one block child");return{newValues:{allWidths:a,allMargins:s,gapWidth:r}}}},t.widths={public:!0,isArray:!0,componentType:"number",entryPrefixes:["width"],forRenderer:!0,returnArraySizeDependencies:()=>({nPanels:{dependencyType:"stateVariable",variableName:"nPanels"}}),returnArraySize({dependencyValues:e}){return[e.nPanels]},returnArrayDependenciesByKey({arrayKeys:e}){let r={allWidths:{dependencyType:"stateVariable",variableName:"allWidths"},widthsAttr:{dependencyType:"attributeComponent",attributeName:"widths",variableNames:["nComponents"]},widthAttr:{dependencyType:"attributeComponent",attributeName:"width",variableNames:["componentSize"]},absoluteMeasurements:{dependencyType:"stateVariable",variableName:"absoluteMeasurements"}},a={};for(let s of e){let o=Number(s)+1;a[s]={widthsAttr:{dependencyType:"attributeComponent",attributeName:"widths",variableNames:[`componentSize${o}`]},essentialWidth:{dependencyType:"stateVariable",variableName:`essentialWidth${o}`}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e.allWidths[s];return{newValues:{widths:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,dependencyValuesByKey:a,globalDependencyValues:s,arraySize:o}){let l,u=!1;s.widthsAttr!==null?l=s.widthsAttr.stateValues.nComponents:s.widthAttr!==null?(l=o[0],u=!0):l=0;let c=[];for(let p in e.widths)Number(p)<l?u?c.push({setDependency:"widthAttr",desiredValue:{size:e.widths[p],isAbsolute:s.absoluteMeasurements},variableIndex:0}):c.push({setDependency:r[p].widthsAttr,desiredValue:{size:e.widths[p],isAbsolute:s.absoluteMeasurements},variableIndex:0}):c.push({setDependency:r[p].essentialWidth,desiredValue:e.widths[p]});return{success:!0,instructions:c}}},t.margins={public:!0,isArray:!0,componentType:"number",entryPrefixes:["margin"],forRenderer:!0,returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey({arrayKeys:e}){let r={allMargins:{dependencyType:"stateVariable",variableName:"allMargins"},marginsAttr:{dependencyType:"attributeComponent",attributeName:"margins",variableNames:["componentSize1","componentSize2","nComponents"]},absoluteMeasurements:{dependencyType:"stateVariable",variableName:"absoluteMeasurements"}},a={};for(let s of e){let o=Number(s)+1;a[s]={essentialMargin:{dependencyType:"stateVariable",variableName:`essentialMargin${o}`}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e.allMargins[s];return{newValues:{margins:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyNamesByKey:a}){let s=[];if(r.marginsAttr===null)for(let o in e.margins)s.push({setDependency:a[o].essentialMargin,desiredValue:e.margins[o]});else if(!(r.marginsAttr.stateValues.componentSize1&&Number.isFinite(r.marginsAttr.stateValues.componentSize1.size)))"0"in e.margins?s.push({setDependency:"marginsAttr",desiredValue:{size:e.margins[0],isAbsolute:r.absoluteMeasurements},variableIndex:0}):s.push({setDependency:"marginsAttr",desiredValue:{size:e.margins[1],isAbsolute:r.absoluteMeasurements},variableIndex:0}),"1"in e.margins&&r.marginsAttr.stateValues.nComponents>1&&s.push({setDependency:"marginsAttr",desiredValue:{size:e.margins[1],isAbsolute:r.absoluteMeasurements},variableIndex:1});else{let o=r.marginsAttr.stateValues.nComponents===1;for(let l in e.margins)if(o)s.push({setDependency:"marginsAttr",desiredValue:{size:e.margins[l],isAbsolute:r.absoluteMeasurements},variableIndex:0});else{let u=Number(l)+1;s.push({setDependency:"marginsAttr",desiredValue:{size:e.margins[l],isAbsolute:r.absoluteMeasurements},variableIndex:l})}}return{success:!0,instructions:s}}},t.essentialValigns={isArray:!0,entryPrefixes:["essentialValign"],defaultEntryValue:void 0,returnArraySizeDependencies:()=>({nPanels:{dependencyType:"stateVariable",variableName:"nPanels"}}),returnArraySize({dependencyValues:e}){return[e.nPanels]},returnArrayDependenciesByKey:()=>({}),arrayDefinitionByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={};return{useEssentialOrDefaultValue:{essentialValigns:r}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e}){let r={};for(let a in e.essentialValigns)r[a]=e.essentialValigns[a];return{success:!0,instructions:[{setStateVariable:"essentialValigns",value:r}]}}},t.valigns={public:!0,isArray:!0,componentType:"text",entryPrefixes:["valign"],forRenderer:!0,returnArraySizeDependencies:()=>({nPanels:{dependencyType:"stateVariable",variableName:"nPanels"}}),returnArraySize({dependencyValues:e}){return[e.nPanels]},returnArrayDependenciesByKey({arrayKeys:e}){let r={valignAttr:{dependencyType:"attributeComponent",attributeName:"valign",variableNames:["value"]},valignsAttr:{dependencyType:"attributeComponent",attributeName:"valigns",variableNames:["nComponents"]}},a={};for(let s of e){let o=Number(s)+1;a[s]={valignsAttr:{dependencyType:"attributeComponent",attributeName:"valigns",variableNames:[`text${o}`]},parentValign:{dependencyType:"parentStateVariable",parentComponentType:"sbsGroup",variableName:`valign${o}`},parentValignAbsolute:{dependencyType:"parentStateVariable",parentComponentType:"sbsGroup",variableName:`valignAbsolute${o}`},essentialValign:{dependencyType:"stateVariable",variableName:`essentialValign${o}`}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,arraySize:s}){let o={},l,u=!1;e.valignsAttr!==null?l=e.valignsAttr.stateValues.nComponents:e.valignAttr!==null?(l=s[0],u=!0):l=0;for(let c of a){let p=Number(c);if(p<l){if(u)o[c]=e.valignAttr.stateValues.value.toLowerCase();else{let m=p+1;o[c]=r[c].valignsAttr.stateValues[`text${m}`].toLowerCase()}["top","middle","bottom"].includes(o[c])||(o[c]="top")}else r[c].parentValign?r[c].essentialValign===void 0?o[c]=r[c].parentValign:o[c]=r[c].essentialValign:r[c].essentialValign===void 0?o[c]="top":o[c]=r[c].essentialValign}return{newValues:{valigns:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,globalDependencyValues:a,arraySize:s}){let o,l=!1;a.valignsAttr!==null?o=a.valignsAttr.stateValues.nComponents:a.valignAttr!==null?(o=s[0],l=!0):o=0;let u=[];for(let c in e.valigns){let p=e.valigns[c].toLowerCase();if(!["top","middle","bottom"].includes(p))continue;Number(c)<o?l?u.push({setDependency:"valignAttr",desiredValue:p,variableIndex:0}):u.push({setDependency:r[c].valignsAttr,desiredValue:p,variableIndex:0}):u.push({setDependency:r[c].essentialValign,desiredValue:p})}return{success:!0,instructions:u}}},t}};T(ch,"componentType","sideBySide"),T(ch,"renderChildren",!0);var kp=class extends ue{static get stateVariablesShadowedForReference(){return["widths","margins","valigns"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize"},e.widths={createComponentOfType:"_componentSizeList"},e.margins={createComponentOfType:"_componentSizeList"},e.valign={createComponentOfType:"text"},e.valigns={createComponentOfType:"textList"},e}static returnChildGroups(){return[{group:"sideBySides",componentTypes:["sideBySide"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.maxNPanelsPerRow={returnDependencies:()=>({sideBySideChildren:{dependencyType:"child",childGroups:["sideBySides"],variableNames:["nPanels"]}}),definition({dependencyValues:e}){return{newValues:{maxNPanelsPerRow:ez.math.max(e.sideBySideChildren.map(r=>r.stateValues.nPanels))},checkForActualChange:{maxNPanelsPerRow:!0}}}},t.specifiedWidths={additionalStateVariablesDefined:[{variableName:"widthsAbsoluteArray",isArray:!0,defaultEntryValue:!1}],isArray:!0,entryPrefixes:["specifiedWidth"],defaultEntryValue:void 0,returnArraySizeDependencies:()=>({maxNPanelsPerRow:{dependencyType:"stateVariable",variableName:"maxNPanelsPerRow"}}),returnArraySize({dependencyValues:e}){return[e.maxNPanelsPerRow]},returnArrayDependenciesByKey({arrayKeys:e}){let r={widthAttr:{dependencyType:"attributeComponent",attributeName:"width",variableNames:["componentSize"]},widthsAttr:{dependencyType:"attributeComponent",attributeName:"widths",variableNames:["nComponents"]}},a={};for(let s of e){let o=Number(s)+1;a[s]={widthsAttr:{dependencyType:"attributeComponent",attributeName:"widths",variableNames:[`componentSize${o}`]}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,arraySize:s}){let o={},l={},u={},c,p=!1;e.widthsAttr!==null?c=e.widthsAttr.stateValues.nComponents:e.widthAttr!==null?(c=s[0],p=!0):c=0;for(let f of a){let d=Number(f);if(d<c)if(p)e.widthAttr.stateValues.componentSize&&(o[f]=e.widthAttr.stateValues.componentSize.size,l[f]=e.widthAttr.stateValues.componentSize.isAbsolute);else{let h=d+1,y=r[f].widthsAttr.stateValues[`componentSize${h}`];y&&(o[f]=y.size,l[f]=y.isAbsolute)}else u[f]={},l[f]=void 0}let m={newValues:{widthsAbsoluteArray:l}};return Object.keys(o).length>0&&(m.newValues.specifiedWidths=o),Object.keys(u).length>0&&(m.useEssentialOrDefaultValue={specifiedWidths:u}),m},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,globalDependencyValues:a,stateValues:s,arraySize:o}){let l,u=!1;a.widthsAttr!==null?l=a.widthsAttr.stateValues.nComponents:a.widthAttr!==null?(l=o[0],u=!0):l=0;let c=[];for(let p in e.specifiedWidths)Number(p)<l?u?c.push({setDependency:"widthAttr",desiredValue:{size:e.specifiedWidths[p],isAbsolute:s.widthsAbsolute},variableIndex:0}):c.push({setDependency:r[p].widthsAttr,desiredValue:{size:e.specifiedWidths[p],isAbsolute:s.widthsAbsolute},variableIndex:0}):c.push({setStateVariable:"specifiedWidths",value:{[p]:e.specifiedWidths[p]}});return{success:!0,instructions:c}}},t.widthsAbsolute={returnDependencies:()=>({widthsAbsoluteArray:{dependencyType:"stateVariable",variableName:"widthsAbsoluteArray"}}),definition({dependencyValues:e}){let r;for(let a in e.widthsAbsoluteArray){let s=e.widthsAbsoluteArray[a];if(s!==void 0){if(s=Boolean(s),r===void 0)r=s;else if(r!==s)throw Error("SbsGroup is not implemented for absolute measurements")}}return{newValues:{widthsAbsolute:r}}}},t.specifiedMargins={additionalStateVariablesDefined:[{variableName:"marginsAbsoluteArray",isArray:!0,entryPrefixes:["marginAbsolute"],defaultEntryValue:!1}],isArray:!0,entryPrefixes:["specifiedMargin"],defaultEntryValue:void 0,returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey(){return{globalDependencies:{marginsAttr:{dependencyType:"attributeComponent",attributeName:"margins",variableNames:["componentSize1","componentSize2","nComponents"]}}}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={},s={},o={};if(e.marginsAttr===null||e.marginsAttr.stateValues.nComponents===0)for(let u of r)o[u]={},s[u]=void 0;else if(e.marginsAttr.stateValues.nComponents===1){let u,c;e.marginsAttr.stateValues.componentSize1&&(u=e.marginsAttr.stateValues.componentSize1.size,Number.isFinite(u)||(u=void 0),c=Boolean(e.marginsAttr.stateValues.componentSize1.isAbsolute));for(let p of r)a[p]=u,s[p]=c}else for(let u of r)if(e.marginsAttr.stateValues[`componentSize${Number(u)+1}`]){let c=e.marginsAttr.stateValues[`componentSize${Number(u)+1}`].size;Number.isFinite(c)||(c=void 0);let p=Boolean(e.marginsAttr.stateValues[`componentSize${Number(u)+1}`].isAbsolute);a[u]=c,s[u]=p}let l={newValues:{marginsAbsoluteArray:s}};return Object.keys(a).length>0&&(l.newValues.specifiedMargins=a),Object.keys(o).length>0&&(l.useEssentialOrDefaultValue={specifiedMargins:o}),l},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,stateValues:a}){let s=[];if(r.marginsAttr===null)for(let o in e.specifiedMargins)s.push({setStateVariable:"specifiedMargins",value:{[o]:e.specifiedMargins[o]}});else if(!(r.marginsAttr.stateValues.componentSize1&&Number.isFinite(r.marginsAttr.stateValues.componentSize1.size)))"0"in e.specifiedMargins?s.push({setDependency:"marginsAttr",desiredValue:{size:e.specifiedMargins[0],isAbsolute:a.marginsAbsolute},variableIndex:0}):s.push({setDependency:"marginsAttr",desiredValue:{size:e.specifiedMargins[1],isAbsolute:a.marginsAbsolute},variableIndex:0}),"1"in e.specifiedMargins&&r.marginsAttr.stateValues.nComponents>1&&s.push({setDependency:"marginsAttr",desiredValue:{size:e.specifiedMargins[1],isAbsolute:a.marginsAbsolute},variableIndex:1});else{let o=r.marginsAttr.stateValues.nComponents===1;for(let l in e.specifiedMargins)o?s.push({setDependency:"marginsAttr",desiredValue:{size:e.specifiedMargins[l],isAbsolute:a.marginsAbsolute},variableIndex:0}):s.push({setDependency:"marginsAttr",desiredValue:{size:e.specifiedMargins[l],isAbsolute:a.marginsAbsolute},variableIndex:l})}return{success:!0,instructions:s}}},t.marginsAbsolute={returnDependencies:()=>({marginsAbsoluteArray:{dependencyType:"stateVariable",variableName:"marginsAbsoluteArray"}}),definition({dependencyValues:e}){let r;for(let a in e.marginsAbsoluteArray){let s=e.marginsAbsoluteArray[a];if(s!==void 0){if(s=Boolean(s),r===void 0)r=s;else if(r!==s)throw Error("SbsGroup is not implemented for absolute measurements")}}return{newValues:{marginsAbsolute:r}}}},t.absoluteMeasurements={public:!0,componentType:"boolean",returnDependencies:()=>({widthsAbsolute:{dependencyType:"stateVariable",variableName:"widthsAbsolute"},marginsAbsolute:{dependencyType:"stateVariable",variableName:"marginsAbsolute"}}),definition({dependencyValues:e}){let r;if(e.widthsAbsolute===void 0)e.marginsAbsolute===void 0?r=!1:r=e.marginsAbsolute;else if(e.marginsAbsolute===void 0)r=e.widthsAbsolute;else{if(e.widthsAbsolute!==e.marginsAbsolute)throw Error("SbsGroup is not implemented for absolute measurements");r=e.widthsAbsolute}if(r===!0)throw Error("SbsGroup is not implemented for absolute measurements");return{newValues:{absoluteMeasurements:r}}}},t.allWidths={additionalStateVariablesDefined:["allMargins",{variableName:"gapWidth",public:!0,componentType:"number"}],returnDependencies:()=>({maxNPanelsPerRow:{dependencyType:"stateVariable",variableName:"maxNPanelsPerRow"},specifiedWidths:{dependencyType:"stateVariable",variableName:"specifiedWidths"},specifiedMargins:{dependencyType:"stateVariable",variableName:"specifiedMargins"},absoluteMeasurements:{dependencyType:"stateVariable",variableName:"absoluteMeasurements"}}),definition({dependencyValues:e}){let r=0,a=[...e.specifiedWidths],s=[...e.specifiedMargins],o=0,l=0;for(let p=0;p<e.maxNPanelsPerRow;p++){let m=a[p];m===void 0?l++:o+=m}let u=0,c=0;for(let p=0;p<2;p++){let m=s[p];m===void 0?c++:u+=m}if(u*=e.maxNPanelsPerRow,!e.absoluteMeasurements)if(o+u>=100){let p=100/(o+u);for(let m=0;m<e.maxNPanelsPerRow;m++)a[m]===void 0?a[m]=0:a[m]*=p;for(let m=0;m<2;m++)s[m]===void 0?s[m]=0:s[m]*=p}else if(l>0){let p=(100-(o+u))/l;for(let m=0;m<e.maxNPanelsPerRow;m++)a[m]===void 0&&(a[m]=p);for(let m=0;m<2;m++)s[m]===void 0&&(s[m]=0)}else if(c>0){let p=(100-(o+u))/(c*e.maxNPanelsPerRow);for(let m=0;m<2;m++)s[m]===void 0&&(s[m]=p)}else e.maxNPanelsPerRow>1?r=(100-(o+u))/(e.maxNPanelsPerRow-1):e.maxNPanelsPerRow===1?s[1]=100-(s[0]+a[0]):console.warn("Invalid sideBySide, as it must have at least one block child");return{newValues:{allWidths:a,allMargins:s,gapWidth:r}}}},t.widths={public:!0,isArray:!0,componentType:"number",entryPrefixes:["width"],returnArraySizeDependencies:()=>({maxNPanelsPerRow:{dependencyType:"stateVariable",variableName:"maxNPanelsPerRow"}}),returnArraySize({dependencyValues:e}){return[e.maxNPanelsPerRow]},returnArrayDependenciesByKey({arrayKeys:e}){let r={allWidths:{dependencyType:"stateVariable",variableName:"allWidths"}},a={};for(let s of e){let o=Number(s)+1;a[s]={specifiedWidth:{dependencyType:"stateVariable",variableName:`specifiedWidth${o}`}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e.allWidths[s];return{newValues:{widths:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r}){let a=[];for(let s in e.widths)a.push({setDependency:r[s].specifiedWidth,desiredValue:e.widths[s],variableIndex:0});return{success:!0,instructions:a}}},t.margins={public:!0,isArray:!0,componentType:"number",entryPrefixes:["margin"],returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey({arrayKeys:e}){let r={allMargins:{dependencyType:"stateVariable",variableName:"allMargins"}},a={};for(let s of e){let o=Number(s)+1;a[s]={specifiedMargin:{dependencyType:"stateVariable",variableName:`specifiedMargin${o}`}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e.allMargins[s];return{newValues:{margins:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r}){let a=[];for(let s in e.margins)a.push({setDependency:r[s].specifiedMargin,desiredValue:e.margins[s],variableIndex:0});return{success:!0,instructions:a}}},t.valigns={public:!0,isArray:!0,componentType:"text",entryPrefixes:["valign"],defaultEntryValue:"top",returnArraySizeDependencies:()=>({maxNPanelsPerRow:{dependencyType:"stateVariable",variableName:"maxNPanelsPerRow"}}),returnArraySize({dependencyValues:e}){return[e.maxNPanelsPerRow]},returnArrayDependenciesByKey({arrayKeys:e}){let r={valignAttr:{dependencyType:"attributeComponent",attributeName:"valign",variableNames:["value"]},valignsAttr:{dependencyType:"attributeComponent",attributeName:"valigns",variableNames:["nComponents"]}},a={};for(let s of e){let o=Number(s)+1;a[s]={valignsAttr:{dependencyType:"attributeComponent",attributeName:"valigns",variableNames:[`text${o}`]}}}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,arraySize:s}){let o={},l={},u,c=!1;e.valignsAttr!==null?u=e.valignsAttr.stateValues.nComponents:e.valignAttr!==null?(u=s[0],c=!0):u=0;for(let m of a){let f=Number(m);if(f<u){if(c)o[m]=e.valignAttr.stateValues.value.toLowerCase();else{let d=f+1;o[m]=r[m].valignsAttr.stateValues[`text${d}`].toLowerCase()}["top","middle","bottom"].includes(o[m])||(o[m]="top")}else l[m]={}}let p={};return Object.keys(o).length>0&&(p.newValues={valigns:o}),Object.keys(l).length>0&&(p.useEssentialOrDefaultValue={valigns:l}),p},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,globalDependencyValues:a,arraySize:s}){let o,l=!1;a.valignsAttr!==null?o=a.valignsAttr.stateValues.nComponents:a.valignAttr!==null?(o=s[0],l=!0):o=0;let u=[];for(let c in e.valigns){let p=e.valigns[c].toLowerCase();if(!["top","middle","bottom"].includes(p))continue;Number(c)<o?l?u.push({setDependency:"valignAttr",desiredValue:p,variableIndex:0}):u.push({setDependency:r[c].valignsAttr,desiredValue:p,variableIndex:0}):u.push({setStateVariable:"valigns",value:{[c]:p}})}return{success:!0,instructions:u}}},t}};T(kp,"componentType","sbsGroup"),T(kp,"rendererType","container"),T(kp,"renderChildren",!0);var Fp=class extends ue{static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}};T(Fp,"componentType","stack"),T(Fp,"rendererType","container"),T(Fp,"renderChildren",!0);var aT={};lt(aT,{H:()=>ph,Idx:()=>mh});var ph=class extends mr{};T(ph,"componentType","h"),T(ph,"rendererType","text");var mh=class extends Q{static returnChildGroups(){return[{group:"hs",componentTypes:["h"]},{group:"stringsTexts",componentTypes:["string","text"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.terms={returnDependencies:()=>({stringTextChildren:{dependencyType:"child",childGroups:["stringsTexts"],variableNames:["value"]},hChildren:{dependencyType:"child",childGroups:["hs"],variableNames:["value"]}}),definition({dependencyValues:e}){let r;if(e.hChildren.length>0)r=e.hChildren.map(a=>a.stateValues.value);else{let a="";for(let s of e.stringTextChildren)a+=s.stateValues.value;r=[a]}return{newValues:{terms:r}}}},t}};T(mh,"componentType","idx"),T(mh,"rendererType");var sT={};lt(sT,{Div:()=>Mp,Span:()=>jp});var Mp=class extends ue{static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}};T(Mp,"componentType","div"),T(Mp,"rendererType","container"),T(Mp,"renderChildren",!0);var jp=class extends re{static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}};T(jp,"componentType","span"),T(jp,"rendererType","container"),T(jp,"renderChildren",!0);var oT={};lt(oT,{Pre:()=>Bp});var Bp=class extends ue{static returnChildGroups(){return[{group:"inlines",componentTypes:["_inline"]}]}};T(Bp,"componentType","pre"),T(Bp,"renderChildren",!0),T(Bp,"includeBlankStringChildren",!0);var lT={};lt(lT,{Paginator:()=>Lp,PaginatorControls:()=>fh,PaginatorPage:()=>Up,PaginatorPageSet:()=>Kl});var Lp=class extends nt{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.preserveScores={createPrimitiveOfType:"boolean",createStateVariable:"preserveScores",defaultValue:!0},e.initialPage={createComponentOfType:"integer",createStateVariable:"initialPage",defaultValue:1},e.submitAllOnPageChange={createComponentOfType:"boolean",createStateVariable:"submitAllOnPageChange",defaultValue:!1},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nPages={public:!0,componentType:"integer",returnDependencies:()=>({serializedChildren:{dependencyType:"serializedChildren",doNotProxy:!0}}),definition({dependencyValues:e,componentInfoObjects:r}){let a=function(s){let o=0;for(let l of s)if(r.isInheritedComponentType({inheritedComponentType:l.componentType,baseComponentType:"_sectioningComponent"})||l.componentType==="copy"&&l.attributes&&l.attributes.componentType&&r.isInheritedComponentType({inheritedComponentType:l.attributes.componentType.primitive,baseComponentType:"_sectioningComponent"}))o++;else if(r.isInheritedComponentType({inheritedComponentType:l.componentType,baseComponentType:"select"})){let u=1/0;if(l.children)for(let c of l.children)c.componentType==="option"&&c.children&&(u=Math.min(u,a(c.children)));if(Number.isFinite(u)){let c=1;if(l.attributes&&l.attributes.numberToSelect){let p=l.attributes.numberToSelect.component;if(p.children){for(let m of p.children)if(m.componentType==="string"){let f=Number(m.state.value);if(Number.isFinite(f)){c=Math.round(f);break}}}}o+=u*c}}return o};return{newValues:{nPages:a(e.serializedChildren)}}}},t.currentPage={public:!0,componentType:"integer",returnDependencies:()=>({initialPage:{dependencyType:"stateVariable",variableName:"initialPage"},nPages:{dependencyType:"stateVariable",variableName:"nPages"}}),definition:({dependencyValues:e})=>({useEssentialOrDefaultValue:{currentPage:{variablesToCheck:["currentPage"],get defaultValue(){let r=e.initialPage;return Number.isInteger(r)?Math.max(1,Math.min(e.nPages,r)):1}}}}),inverseDefinition({desiredStateVariableValues:e,stateValues:r,sourceInformation:a={}}){if(!a.fromSetPage)return{success:!1};let s=Number(e.currentPage);return Number.isInteger(s)?(s=Math.max(1,Math.min(r.nPages,s)),{success:!0,instructions:[{setStateVariable:"currentPage",value:s}]}):{success:!1}}},t.pageSetDescendants={returnDependencies:()=>({pageSetDescendants:{dependencyType:"descendant",componentTypes:["paginatorPageSet"],useReplacementsForComposites:!0,includeNonActiveChildren:!0}}),definition({dependencyValues:e}){return{newValues:{pageSetDescendants:e.pageSetDescendants}}}},t.sectionsByPageSet={stateVariablesDeterminingDependencies:["pageSetDescendants"],returnDependencies({stateValues:e}){let r={nPages:{dependencyType:"stateVariable",variableName:"nPages"}};for(let[a,s]of e.pageSetDescendants.entries())r[a]={dependencyType:"replacement",compositeName:s.componentName,variableNames:["creditAchieved","percentCreditAchieved"],recursive:!0,recurseNonStandardComposites:!0};return r},definition({dependencyValues:e}){let r=[];for(let a=0;a<e.nPages;a++)r.push(e[a]);return{newValues:{sectionsByPageSet:r}}}},t.documentName={returnDependencies:()=>({documentAncestor:{dependencyType:"ancestor",componentType:"document"}}),definition({dependencyValues:e}){return e.documentAncestor?{newValues:{documentName:e.documentAncestor.componentName}}:{newValues:{documentName:null}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){let r=super.createSerializedReplacements({component:t,componentInfoObjects:e}).replacements,a=function(o){let l=[];for(let u of o)if(e.isInheritedComponentType({inheritedComponentType:u.componentType,baseComponentType:"_sectioningComponent"})||u.componentType==="copy"&&u.attributes&&u.attributes.componentType&&e.isInheritedComponentType({inheritedComponentType:u.attributes.componentType.primitive,baseComponentType:"_sectioningComponent"}))t.stateValues.preserveScores&&(u.state||(u.state={}),u.state.aggregateScores=!0),l.push({componentType:"paginatorPageSet",children:[u]});else if(e.isInheritedComponentType({inheritedComponentType:u.componentType,baseComponentType:"select"})){if(u.children)for(let c of u.children)c.componentType==="option"&&c.children&&(c.children=a(c.children));l.push(u)}return l};return{replacements:a(r)}}async setPage({number:t}){this.stateValues.submitAllOnPageChange&&!this.flags.readOnly&&await this.coreFunctions.performAction({componentName:this.stateValues.documentName,actionName:"submitAllAnswers"});let e=this.stateValues.currentPage;if(!Number.isInteger(t))return;let r=Math.max(1,Math.min(this.stateValues.nPages,t)),a=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"currentPage",value:r,sourceInformation:{fromSetPage:!0}}],s=!1;if(this.stateValues.preserveScores){let o=this.stateValues.sectionsByPageSet[e-1];if(o.length===2){let l=o[0],u=l.stateValues.creditAchieved,c=l.stateValues.percentCreditAchieved,p=o[1].componentName;a.push({updateType:"updateValue",componentName:p,stateVariable:"creditAchieved",value:u}),a.push({updateType:"updateValue",componentName:p,stateVariable:"percentCreditAchieved",value:c})}else s=!0}await this.coreFunctions.performUpdate({updateInstructions:a,event:{verb:"selected",object:{componentName:this.componentName,componentType:this.componentType},result:{response:r,responseText:r.toString()}}}),s&&await this.setPlaceholderCredit({number:e})}setPlaceholderCredit({number:t}){if(!Number.isInteger(t))return;let e=Math.max(1,Math.min(this.stateValues.nPages,t)),r=[];if(this.stateValues.preserveScores){let a=this.stateValues.sectionsByPageSet[e-1];if(a.length===2){let s=a[0],o=s.stateValues.creditAchieved,l=s.stateValues.percentCreditAchieved,u=a[1].componentName;r.push({updateType:"updateValue",componentName:u,stateVariable:"creditAchieved",value:o}),r.push({updateType:"updateValue",componentName:u,stateVariable:"percentCreditAchieved",value:l})}}return this.coreFunctions.performUpdate({updateInstructions:r})}actions={setPage:this.setPage.bind(new Proxy(this,this.readOnlyProxyHandler)),setPlaceholderCredit:this.setPlaceholderCredit.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(Lp,"componentType","paginator"),T(Lp,"renderedDefault",!0),T(Lp,"includeBlankStringChildren",!1);var Kl=class extends nt{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.preserveScores={public:!0,componentType:"integer",returnDependencies:()=>({paginatorPreserveScores:{dependencyType:"sourceCompositeStateVariable",compositeComponentType:"paginator",variableName:"preserveScores"}}),definition({dependencyValues:e}){return{newValues:{preserveScores:e.paginatorPreserveScores}}}},t.pageNumber={public:!0,componentType:"integer",returnDependencies:()=>({paginatorPageSetDescendants:{dependencyType:"sourceCompositeStateVariable",compositeComponentType:"paginator",variableName:"pageSetDescendants"}}),definition({dependencyValues:e,componentName:r}){let a=null;if(e.paginatorPageSetDescendants){let s=e.paginatorPageSetDescendants.map(o=>o.componentName).indexOf(r);s!==-1&&(a=s+1)}return{newValues:{pageNumber:a}}}},t.renderPage={public:!0,componentType:"boolean",returnDependencies:()=>({pageNumber:{dependencyType:"stateVariable",variableName:"pageNumber"},paginatorCurrentPage:{dependencyType:"sourceCompositeStateVariable",compositeComponentType:"paginator",variableName:"currentPage"}}),definition({dependencyValues:e}){let r=!1;return e.paginatorCurrentPage&&(r=e.paginatorCurrentPage===e.pageNumber),{newValues:{renderPage:r}}}},t.pageDescendants={returnDependencies:()=>({pageDescendants:{dependencyType:"descendant",componentTypes:["paginatorPage"],useReplacementsForComposites:!0,includeNonActiveChildren:!0}}),definition({dependencyValues:e}){return{newValues:{pageDescendants:e.pageDescendants}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({renderPage:{dependencyType:"stateVariable",variableName:"renderPage"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e,workspace:r}){r.renderPage=t.stateValues.renderPage;let a=super.createSerializedReplacements({component:t,componentInfoObjects:e});if(!a.replacements.length===1)return{replacements:[]};let s=a.replacements[0],o=[{componentType:"paginatorPage",children:[s]}],l=s;if(s.componentType==="copy"&&s.children&&s.children.length==1&&s.children[0].componentType==="externalContent"){let f=s.children[0];f.children&&f.children.length===1&&e.isInheritedComponentType({inheritedComponentType:f.children[0].componentType,baseComponentType:"_sectioningComponent"})&&(l=f.children[0])}let u={};l.attributes&&(u=l.attributes);let c;l.variants&&(c=l.variants);let p=[];for(let f of l.children)if(e.isInheritedComponentType({inheritedComponentType:f.componentType,baseComponentType:"variantControl"})){p=[JSON.parse(JSON.stringify(f))];let d=p[0];d.doenetAttributes||(d.doenetAttributes={}),d.doenetAttributes.createUniqueName=!0;break}let m=s.componentType;return m==="copy"&&(m=s.attributes.componentType.primitive),o.push({componentType:"paginatorPage",children:[{componentType:m,attributes:u,variants:c,state:{hide:!0,aggregateScores:t.stateValues.preserveScores,sectionPlaceholder:!0},children:p}],state:{sectionPlaceholder:!0}}),{replacements:o}}};T(Kl,"componentType","paginatorPageSet"),T(Kl,"renderedDefault",!0),T(Kl,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved"),T(Kl,"assignNamesSkipOver",!0);var Up=class extends nt{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.rendered={createComponentOfType:"boolean"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.pageNumber={public:!0,componentType:"integer",returnDependencies:()=>({pageNumber:{dependencyType:"sourceCompositeStateVariable",compositeComponentType:"paginatorPageSet",variableName:"pageNumber"}}),definition({dependencyValues:e}){return{newValues:{pageNumber:e.pageNumber}}}},t.sectionPlaceholder={defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{sectionPlaceholder:{variablesToCheck:["sectionPlaceholder"]}}})},t.rendered={public:!0,componentType:"boolean",defaultValue:this.renderedDefault,returnDependencies:()=>({pageNumber:{dependencyType:"stateVariable",variableName:"pageNumber"},sectionPlaceholder:{dependencyType:"stateVariable",variableName:"sectionPlaceholder"},paginatorPageSetRenderPage:{dependencyType:"sourceCompositeStateVariable",compositeComponentType:"paginatorPageSet",variableName:"renderPage"}}),definition({dependencyValues:e}){if(e.paginatorPageSetRenderPage===null)return{useEssentialOrDefaultValue:{rendered:{variablesToCheck:["rendered"]}}};{let r=e.paginatorPageSetRenderPage;return e.sectionPlaceholder&&(r=!r),{newValues:{rendered:r}}}}},t.mirrorPage={returnDependencies:()=>({paginatorPageSetPages:{dependencyType:"sourceCompositeStateVariable",compositeComponentType:"paginatorPageSet",variableName:"pageDescendants"}}),definition({dependencyValues:e,componentName:r}){let a;for(let s of e.paginatorPageSetPages)if(s.componentName!==r){a=s;break}return{newValues:{mirrorPage:a}}}},t.mirrorPageReplacements={stateVariablesDeterminingDependencies:["mirrorPage"],returnDependencies:({stateValues:e})=>({mirrorPageReplacements:{dependencyType:"replacement",compositeName:e.mirrorPage.componentName}}),definition({dependencyValues:e}){return{newValues:{mirrorPageReplacements:e.mirrorPageReplacements}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({rendered:{dependencyType:"stateVariable",variableName:"rendered"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e,workspace:r}){return r.rendered=t.stateValues.rendered,super.createSerializedReplacements({component:t,componentInfoObjects:e})}static calculateReplacementChanges({component:t,components:e,workspace:r,componentInfoObjects:a}){let s=[];if(t.stateValues.rendered){if(!r.rendered)if(r.rendered=!0,t.replacementsToWithhold>0){let o={changeType:"changeReplacementsToWithhold",replacementsToWithhold:0};s.push(o)}else{let o=this.createSerializedReplacements({component:t,componentInfoObjects:a,workspace:r}).replacements,l=o[0],u=l;if(l.componentType==="copy"&&l.children&&l.children.length==1&&l.children[0].componentType==="externalContent"){let f=l.children[0];f.children&&f.children.length===1&&a.isInheritedComponentType({inheritedComponentType:f.children[0].componentType,baseComponentType:"_sectioningComponent"})&&(u=f.children[0])}u.variants||(u.variants={});let c=e[t.stateValues.mirrorPageReplacements[0].componentName],p=c;if(c.componentType==="copy"&&c.replacements&&c.replacements.length==1&&c.replacements[0].componentType==="externalContent"){let f=c.replacements[0];f.replacements&&f.replacements.length===1&&a.isInheritedComponentType({inheritedComponentType:f.replacements[0].componentType,baseComponentType:"_sectioningComponent"})&&(p=f.replacements[0])}p.variants&&p.variants.desiredVariant?u.variants.desiredVariant=Object.assign({},p.variants.desiredVariant):u.variants.desiredVariant={},u.variants.desiredVariant.index=p.sharedParameters.variantIndex;let m={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,serializedReplacements:o,replacementsToWithhold:0};s.push(m)}}else if(r.rendered){r.rendered=!1;let o={changeType:"changeReplacementsToWithhold",replacementsToWithhold:t.replacements.length};s.push(o)}return s}};T(Up,"componentType","paginatorPage"),T(Up,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved"),T(Up,"assignNamesSkipOver",!0);var fh=class extends ue{constructor(t){super(t);this.externalActions={},Object.defineProperty(this.externalActions,"setPage",{enumerable:!0,get:function(){if(this.stateValues.paginatorFullTname)return{componentName:this.stateValues.paginatorFullTname,actionName:"setPage"}}.bind(this)})}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.previousLabel={createComponentOfType:"text",createStateVariable:"previousLabel",defaultValue:"Previous",forRenderer:!0,public:!0},e.nextLabel={createComponentOfType:"text",createStateVariable:"nextLabel",defaultValue:"Next",forRenderer:!0,public:!0},e.pageLabel={createComponentOfType:"text",createStateVariable:"pageLabel",defaultValue:"Page",forRenderer:!0,public:!0},e.paginatorTname={createPrimitiveOfType:"string"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.paginatorTname={returnDependencies:()=>({paginatorTname:{dependencyType:"attributePrimitive",attributeName:"paginatorTname"}}),definition({dependencyValues:e}){return{newValues:{paginatorTname:e.paginatorTname}}}},t.paginatorFullTname={stateVariablesDeterminingDependencies:["paginatorTname"],returnDependencies({stateValues:e}){return e.paginatorTname?{paginatorFullTname:{dependencyType:"expandTargetName",tName:e.paginatorTname}}:{}},definition({dependencyValues:e}){return{newValues:{paginatorFullTname:e.paginatorFullTname}}}},t.currentPage={forRenderer:!0,stateVariablesDeterminingDependencies:["paginatorFullTname"],returnDependencies({stateValues:e}){return e.paginatorFullTname?{paginatorPage:{dependencyType:"stateVariable",componentName:e.paginatorFullTname,variableName:"currentPage"}}:{}},definition({dependencyValues:e}){return"paginatorPage"in e?{newValues:{currentPage:e.paginatorPage}}:{newValues:{currentPage:1}}}},t.nPages={forRenderer:!0,stateVariablesDeterminingDependencies:["paginatorFullTname"],returnDependencies({stateValues:e}){return e.paginatorFullTname?{paginatorNPages:{dependencyType:"stateVariable",componentName:e.paginatorFullTname,variableName:"nPages"}}:{}},definition({dependencyValues:e}){return"paginatorNPages"in e?{newValues:{nPages:e.paginatorNPages}}:{newValues:{nPages:1}}}},t.disabled={public:!0,componentType:"boolean",forRenderer:!0,neverShadow:!0,returnDependencies:()=>({disabledPreliminary:{dependencyType:"stateVariable",variableName:"disabledPreliminary",variablesOptional:!0},disabledAttr:{dependencyType:"attributeComponent",attributeName:"disabled"},sourceCompositeDisabled:{dependencyType:"sourceCompositeStateVariable",variableName:"disabled"},adapterSourceDisabled:{dependencyType:"adapterSourceStateVariable",variableName:"disabled"}}),definition({dependencyValues:e,usedDefault:r}){if(e.disabledPreliminary!==null&&e.disabledAttr!==null)return{newValues:{disabled:e.disabledPreliminary}};let a=!1,s=!0;return e.sourceCompositeDisabled!==null&&!r.sourceCompositeDisabled&&(a=a||e.sourceCompositeDisabled,s=!1),e.adapterSourceDisabled!==null&&!r.adapterSourceDisabled&&(a=a||e.adapterSourceDisabled,s=!1),s&&e.disabledPreliminary!==null&&!r.disabledPreliminary&&(s=!1,a=e.disabledPreliminary),s?{useEssentialOrDefaultValue:{disabled:{defaultValue:!1}}}:{newValues:{disabled:a}}}},t}};T(fh,"componentType","paginatorControls"),T(fh,"renderChildren",!0);var Oi=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.hide,delete e.disabled,delete e.modifyIndirectly,delete e.fixed,delete e.styleNumber,delete e.isResponse,e.documentWideCheckWork={createComponentOfType:"boolean",createStateVariable:"documentWideCheckWork",defaultValue:!1,public:!0},e.feedbackDefinitions={createComponentOfType:"feedbackDefinitions",createStateVariable:"feedbackDefinitions",get defaultValue(){return tz()},propagateToDescendants:!0,mergeArrayWithDefault:!0,public:!0},e.styleDefinitions={createComponentOfType:"styleDefinitions",createStateVariable:"styleDefinitions",get defaultValue(){return Ml()},propagateToDescendants:!0,mergeArrayWithDefault:!0,public:!0},e}static returnChildGroups(){return[{group:"variantControl",componentTypes:["variantControl"]},{group:"title",componentTypes:["title"]},{group:"description",componentTypes:["description"]},{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.titleChildName={forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["title"]}}),definition({dependencyValues:e}){let r=null;return e.titleChild.length>0&&(r=e.titleChild[0].componentName),{newValues:{titleChildName:r}}}},t.title={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["title"],variableNames:["text"]}}),definition({dependencyValues:e}){return e.titleChild.length===0?{newValues:{title:""}}:{newValues:{title:e.titleChild[0].stateValues.text}}}},t.description={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({descriptionChild:{dependencyType:"child",childGroups:["description"],variableNames:["text"]}}),definition({dependencyValues:e}){return e.descriptionChild.length===0?{newValues:{description:""}}:{newValues:{description:e.descriptionChild[0].stateValues.text}}}},t.level={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{level:0}})},t.viewedSolution={defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{viewedSolution:{variablesToCheck:["viewedSolution"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"viewedSolution",value:e.viewedSolution}]}}},t.scoredDescendants={returnDependencies:()=>({scoredDescendants:{dependencyType:"descendant",componentTypes:["_sectioningComponent","answer"],variableNames:["scoredDescendants","aggregateScores","weight"],recurseToMatchedChildren:!1,variablesOptional:!0}}),definition({dependencyValues:e}){let r=[];for(let a of e.scoredDescendants)a.stateValues.aggregateScores||a.stateValues.scoredDescendants===void 0?a.stateValues.weight!==0&&r.push(a):r.push(...a.stateValues.scoredDescendants);return{newValues:{scoredDescendants:r}}}},t.nScoredDescendants={returnDependencies:()=>({scoredDescendants:{dependencyType:"stateVariable",variableName:"scoredDescendants"}}),definition({dependencyValues:e}){return{newValues:{nScoredDescendants:e.scoredDescendants.length}}}},t.itemCreditAchieved={isArray:!0,returnArraySizeDependencies:()=>({nScoredDescendants:{dependencyType:"stateVariable",variableName:"nScoredDescendants"}}),returnArraySize({dependencyValues:e}){return[e.nScoredDescendants]},stateVariablesDeterminingDependencies:["scoredDescendants"],returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={};for(let s of e){let o=r.scoredDescendants[s];o&&(a[s]={creditAchieved:{dependencyType:"stateVariable",componentName:o.componentName,variableName:"creditAchieved"}})}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e[s].creditAchieved;return{newValues:{itemCreditAchieved:a}}}},t.itemNumberByAnswerName={stateVariablesDeterminingDependencies:["scoredDescendants"],returnDependencies({stateValues:e}){let r={scoredDescendants:{dependencyType:"stateVariable",variableName:"scoredDescendants"}};for(let a in e.scoredDescendants){let s=e.scoredDescendants[a];r[`descendantsOf${a}`]={dependencyType:"descendant",ancestorName:s.componentName,componentTypes:["answer"],recurseToMatchedChildren:!1}}return r},definition({dependencyValues:e,componentInfoObjects:r}){let a={};for(let[s,o]of e.scoredDescendants.entries()){let l=s+1;for(let u of e[`descendantsOf${s}`])a[u.componentName]=l;r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"answer"})&&(a[o.componentName]=l)}return{newValues:{itemNumberByAnswerName:a}}}},t.itemVariantInfo={isArray:!0,returnArraySizeDependencies:()=>({nScoredDescendants:{dependencyType:"stateVariable",variableName:"nScoredDescendants"}}),returnArraySize({dependencyValues:e}){return[e.nScoredDescendants]},stateVariablesDeterminingDependencies:["scoredDescendants"],returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={};for(let s of e){let o=r.scoredDescendants[s];o&&(a[s]={generatedVariantInfo:{dependencyType:"stateVariable",componentName:o.componentName,variableName:"generatedVariantInfo",variablesOptional:!0}})}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e[s].generatedVariantInfo;return{newValues:{itemVariantInfo:a}}}},t.answerDescendants={returnDependencies:()=>({answerDescendants:{dependencyType:"descendant",componentTypes:["answer"],variableNames:["justSubmitted"],recurseToMatchedChildren:!1}}),definition({dependencyValues:e}){return{newValues:{answerDescendants:e.answerDescendants}}}},t.justSubmitted={forRenderer:!0,returnDependencies:()=>({answerDescendants:{dependencyType:"stateVariable",variableName:"answerDescendants"}}),definition({dependencyValues:e}){return{newValues:{justSubmitted:e.answerDescendants.every(r=>r.stateValues.justSubmitted)}}}},t.showCorrectness={forRenderer:!0,returnDependencies:()=>({showCorrectnessFlag:{dependencyType:"flag",flagName:"showCorrectness"}}),definition({dependencyValues:e}){return{newValues:{showCorrectness:e.showCorrectnessFlag!==!1}}}},t.displayDigitsForCreditAchieved={returnDependencies:()=>({}),definition:()=>({newValues:{displayDigitsForCreditAchieved:3}})},t.creditAchieved={public:!0,componentType:"number",forRenderer:!0,defaultValue:0,stateVariablesPrescribingAdditionalAttributes:{displayDigits:"displayDigitsForCreditAchieved"},additionalStateVariablesDefined:[{variableName:"percentCreditAchieved",public:!0,componentType:"number",stateVariablesPrescribingAdditionalAttributes:{displayDigits:"displayDigitsForCreditAchieved"}}],returnDependencies:()=>({scoredDescendants:{dependencyType:"stateVariable",variableName:"scoredDescendants"},itemCreditAchieved:{dependencyType:"stateVariable",variableName:"itemCreditAchieved"}}),definition({dependencyValues:e}){let r=0,a=0;for(let[l,u]of e.scoredDescendants.entries()){let c=u.stateValues.weight;r+=e.itemCreditAchieved[l]*c,a+=c}let s;a>0?s=r/a:s=1;let o=s*100;return{newValues:{creditAchieved:s,percentCreditAchieved:o}}}},t.creditAchievedIfSubmit={defaultValue:0,stateVariablesDeterminingDependencies:["scoredDescendants"],returnDependencies({stateValues:e}){let r={scoredDescendants:{dependencyType:"stateVariable",variableName:"scoredDescendants"}};for(let[a,s]of e.scoredDescendants.entries())r["creditAchievedIfSubmit"+a]={dependencyType:"stateVariable",componentName:s.componentName,variableName:"creditAchievedIfSubmit"};return r},definition({dependencyValues:e}){let r=0,a=0;for(let[o,l]of e.scoredDescendants.entries()){let u=l.stateValues.weight;r+=e["creditAchievedIfSubmit"+o]*u,a+=u}return{newValues:{creditAchievedIfSubmit:r/a}}}},t.generatedVariantInfo={providePreviousValuesInDefinition:!0,returnDependencies:({sharedParameters:e,componentInfoObjects:r})=>({variantIndex:{dependencyType:"value",value:e.variantIndex},variantName:{dependencyType:"value",value:e.variantName},variantDescendants:{dependencyType:"descendant",componentTypes:Object.keys(r.componentTypeWithPotentialVariants),variableNames:["isVariantComponent","generatedVariantInfo"],recurseToMatchedChildren:!1,variablesOptional:!0,includeNonActiveChildren:!0,ignoreReplacementsOfMatchedComposites:!0},variants:{dependencyType:"variants"}}),definition({dependencyValues:e,componentName:r,previousValues:a}){let s=Boolean(e.variants.desiredVariant&&e.variants.desiredVariant.subvariants),o={index:e.variantIndex,name:e.variantName,meta:{createdBy:r,subvariantsSpecified:s}},l=o.subvariants=[];for(let u of e.variantDescendants)u.stateValues.isVariantComponent?l.push(u.stateValues.generatedVariantInfo):u.stateValues.generatedVariantInfo&&l.push(...u.stateValues.generatedVariantInfo.subvariants);for(let[u,c]of l.entries())if(!c.subvariants&&a.generatedVariantInfo){let p=a.generatedVariantInfo.subvariants;p[u].subvariants&&(l[u]=Object.assign({},l[u]),l[u].subvariants=p[u].subvariants)}return{newValues:{generatedVariantInfo:o}}}},t.createSubmitAllButton={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"suppressAnswerSubmitButtons",forRenderer:!0}],returnDependencies:()=>({documentWideCheckWork:{dependencyType:"stateVariable",variableName:"documentWideCheckWork"}}),definition({dependencyValues:e,componentName:r}){let a=!1,s=!1;return e.documentWideCheckWork&&(a=!0,s=!0),{newValues:{createSubmitAllButton:a,suppressAnswerSubmitButtons:s}}}},t}actions={submitAllAnswers:this.submitAllAnswers.bind(this)};async submitAllAnswers(){this.coreFunctions.requestRecordEvent({verb:"submitted",object:{componentName:this.componentName,componentType:this.componentType}});for(let t of this.stateValues.answerDescendants)t.stateValues.justSubmitted||await this.coreFunctions.performAction({componentName:t.componentName,actionName:"submitAnswer"})}static setUpVariant({serializedComponent:t,sharedParameters:e,definingChildrenSoFar:r,descendantVariantComponents:a,allComponentClasses:s}){let o;for(let c of r)if(c!==void 0&&c.componentType==="variantControl"){o=c;break}if(o===void 0){let c=100;e.allPossibleVariants=[...Array(c).keys()].map(f=>Kx(f+1));let p,m=t.variants.desiredVariant;if(m!==void 0){if(m.index!==void 0){let f=Number(m.index);if(!Number.isFinite(f))console.warn("Variant index "+m.index+" must be a number"),p=1;else{Number.isInteger(f)||(console.warn("Variant index "+m.index+" must be an integer"),f=Math.round(f));let d=(f-1)%c;d<0&&(d+=c),p=d+1}}else if(m.name!==void 0){if(typeof m.name=="string"){let f=e.allPossibleVariants.indexOf(m.name.toLowerCase());f!==-1&&(p=f+1)}p===void 0&&(console.warn("Variant name "+m.name+" is not valid"),p=1)}}p===void 0&&(p=1),e.variantSeed=p.toString(),e.variantIndex=p,e.variantName=Kx(p),e.selectRng=new e.rngClass(e.variantSeed)}else e.variantSeed=o.state.selectedSeed.value,e.variantName=o.state.selectedVariantName.value,e.variantIndex=o.state.selectedVariantIndex.value,e.selectRng=o.state.selectRng.value,e.allPossibleVariants=o.state.variantNames.value;let l=Math.floor(e.selectRng()*1e6).toString();e.rng=new e.rngClass(l);let u=t.variants.desiredVariant;if(u===void 0&&(u={}),u.subvariants&&a)for(let c in u.subvariants){let p=u.subvariants[c],m=a[c];if(m===void 0)break;m.variants.desiredVariant=p}}static determineNumberOfUniqueVariants({serializedComponent:t}){if(t.children===void 0)return{success:!0,numberOfVariants:1};let e,r;for(let[u,c]of t.children.entries())if(c.componentType==="variantControl"||c.createdComponent&&components[c.componentName].componentType==="variantControl"){e=u,r=c;break}let a=100;if(e!==void 0&&r.attributes&&r.attributes.nVariants!==void 0){let u=r.attributes.nVariants,c=!1;if(u.state!==void 0&&u.state.value!==void 0&&(a=Math.round(Number(u.state.value)),c=!0),u.children!==void 0&&u.children.length===1&&u.children[0].componentType==="string"&&(a=Math.round(Number(u.children[0].state.value)),c=!0),!c)return{success:!1}}let s,o=1,l=[];return t.variants.descendantVariantComponents!==void 0&&(l=t.variants.descendantVariantComponents.map(u=>u.variants.numberOfVariants),o=l.reduce((u,c)=>u*c,1),s={numberOfVariantsByDescendant:l}),a=Math.min(o,a),{success:!0,numberOfVariants:a,uniqueVariantData:s}}static getUniqueVariant({serializedComponent:t,variantIndex:e,allComponentClasses:r}){if(t.variants===void 0)return{succes:!1};let a=t.variants.numberOfVariants;if(a===void 0)return{success:!1};if(!Number.isInteger(e)||e<0||e>=a)return{success:!1};let s=zl({variantIndex:e,serializedComponent:t,allComponentClasses:r});return s.success?{success:!0,desiredVariant:{subvariants:s.desiredVariants}}:(console.log("Failed to get unique variant for document."),{success:!1})}};T(Oi,"componentType","document"),T(Oi,"rendererType","section"),T(Oi,"renderChildren",!0),T(Oi,"createsVariants",!0),T(Oi,"alwaysSetUpVariant",!0),T(Oi,"includeBlankStringChildren",!0);function Kx(i){return Pn(i,!0)}function tz(){return[{feedbackCode:"numericalerror",feedbackText:"Credit reduced because numbers in your answer weren't quite right.  Did you round too much?"},{feedbackCode:"goodjob",feedbackText:"Good job!"},{feedbackCode:"onesignerror",feedbackText:"Credit reduced because it appears that you made a sign error."},{feedbackCode:"twosignerrors",feedbackText:"Credit reduced because it appears that you made two sign errors."}]}var Xl=class extends re{static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(){return{hide:{createComponentOfType:"boolean",createStateVariable:"hide",defaultValue:!1,public:!0}}}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={returnDependencies:()=>({}),defaultValue:"",forRenderer:!0,set:String,definition:()=>({useEssentialOrDefaultValue:{value:{variablesToCheck:"value"}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"value",value:String(e.value)}]}}},t.text={returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition({dependencyValues:e}){return{newValues:{text:e.value}}},inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setDependency:"value",desiredValue:e.text}]}}},t}};T(Xl,"componentType","string"),T(Xl,"useChildrenForReference",!1);var Di=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.unordered={createComponentOfType:"boolean",createStateVariable:"unordered",defaultValue:!1,public:!0},e.maximumNumber={createComponentOfType:"number",createStateVariable:"maximumNumber",defaultValue:null,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=_n({componentType:"text"}),r=Ii({componentType:"text"});return t.push({replacementFunction:function({matchedChildren:a,isAttributeComponent:s=!1,createdFromMacro:o=!1}){return s&&!o?e({matchedChildren:a}):r({matchedChildren:a})}}),t}static returnChildGroups(){return[{group:"texts",componentTypes:["text"]},{group:"textLists",componentTypes:["textList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.overrideChildHide={returnDependencies:()=>({}),definition:()=>({newValues:{overrideChildHide:!0}})},t.textsShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{textsShadow:{variablesToCheck:["textsShadow"]}}})},t.nComponents={public:!0,componentType:"number",additionalStateVariablesDefined:["childIndexByArrayKey"],returnDependencies(){return{maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},textListChildren:{dependencyType:"child",childGroups:["textLists"],variableNames:["nComponents"]},textAndTextListChildren:{dependencyType:"child",childGroups:["texts","textLists"],skipComponentNames:!0},textsShadow:{dependencyType:"stateVariable",variableName:"textsShadow"}}},definition:function({dependencyValues:e,componentInfoObjects:r}){let a=0,s=[];if(e.textAndTextListChildren.length>0){let l=0;for(let[u,c]of e.textAndTextListChildren.entries())if(r.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"textList"})){let p=e.textListChildren[l];l++;for(let m=0;m<p.stateValues.nComponents;m++)s[a+m]=[u,m];a+=p.stateValues.nComponents}else s[a]=[u,0],a+=1}else e.textsShadow!==null&&(a=e.textsShadow.length);let o=e.maximumNumber;return o!==null&&a>o&&(a=o,s=s.slice(0,o)),{newValues:{nComponents:a,childIndexByArrayKey:s},checkForActualChange:{nComponents:!0}}}},t.texts={public:!0,componentType:"text",isArray:!0,entryPrefixes:["text"],stateVariablesDeterminingDependencies:["childIndexByArrayKey"],returnArraySizeDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"}}),returnArraySize({dependencyValues:e}){return[e.nComponents]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={},s={childIndexByArrayKey:{dependencyType:"stateVariable",variableName:"childIndexByArrayKey"},textsShadow:{dependencyType:"stateVariable",variableName:"textsShadow"}};for(let o of e){let l=[],u="1";r.childIndexByArrayKey[o]&&(l=[r.childIndexByArrayKey[o][0]],u=r.childIndexByArrayKey[o][1]+1),a[o]={textAndTextListChildren:{dependencyType:"child",childGroups:["texts","textLists"],variableNames:["value","text"+u],variablesOptional:!0,childIndices:l}}}return{globalDependencies:s,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].textAndTextListChildren[0];if(l)if(l.stateValues.value!==void 0)s[o]=l.stateValues.value;else{let u=e.childIndexByArrayKey[o][1]+1;s[o]=l.stateValues["text"+u]}else e.textsShadow!==null&&(s[o]=e.textsShadow[o])}return{newValues:{texts:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[];for(let u in e.texts){if(!a[u])continue;let c=a[u].textAndTextListChildren[0];c&&(c.stateValues.value!==void 0?l.push({setDependency:s[u].textAndTextListChildren,desiredValue:e.texts[u],childIndex:0,variableIndex:0}):l.push({setDependency:s[u].textAndTextListChildren,desiredValue:e.texts[u],childIndex:0,variableIndex:1}))}return{success:!0,instructions:l}}},t.nValues={isAlias:!0,targetVariableName:"nComponents"},t.values={isAlias:!0,targetVariableName:"texts"},t.text={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({texts:{dependencyType:"stateVariable",variableName:"texts"}}),definition:({dependencyValues:e})=>({newValues:{text:e.texts.join(", ")}})},t.componentNamesInList={returnDependencies:()=>({textAndTextListChildren:{dependencyType:"child",childGroups:["texts","textLists"],variableNames:["componentNamesInList"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=[];for(let o of e.textAndTextListChildren)r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"textList"})?a.push(...o.stateValues.componentNamesInList):a.push(o.componentName);let s=e.maximumNumber;return s!==null&&a.length>s&&(s=Math.max(0,Math.floor(s)),a=a.slice(0,s)),{newValues:{componentNamesInList:a}}}},t.nComponentsToDisplayByChild={additionalStateVariablesDefined:[{variableName:"nChildrenToDisplay",forRenderer:!0}],returnDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"},textListChildren:{dependencyType:"child",childGroups:["textLists"],variableNames:["nComponents"]},textAndTextListChildren:{dependencyType:"child",childGroups:["texts","textLists"],skipComponentNames:!0},parentNComponentsToDisplayByChild:{dependencyType:"parentStateVariable",parentComponentType:"textList",variableName:"nComponentsToDisplayByChild"}}),definition:function({dependencyValues:e,componentInfoObjects:r,componentName:a}){let s=e.nComponents;e.parentNComponentsToDisplayByChild!==null&&(s=e.parentNComponentsToDisplayByChild[a]);let o={},l=0,u=0,c=0;for(let p of e.textAndTextListChildren){let m=Math.max(0,s-l);if(m>0&&u++,r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"textList"})){let f=e.textListChildren[c];c++;let d=Math.min(m,f.stateValues.nComponents);o[f.componentName]=d,l+=d}else l+=1}return{newValues:{nComponentsToDisplayByChild:o,nChildrenToDisplay:u}}}},t}};T(Di,"componentType","textList"),T(Di,"renderChildren",!0),T(Di,"includeBlankStringChildren",!0),T(Di,"removeBlankStringChildrenPostSugar",!0),T(Di,"stateVariableForAttributeValue","texts"),T(Di,"primaryStateVariableForDefinition","textsShadow");var Yl=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.unordered={default:!1},e.maximumNumber={default:null},e}static returnChildLogic(t){let e=super.returnChildLogic(t),r=e.newLeaf({name:"atLeastZeroTexts",componentType:"text",comparison:"atLeast",number:0}),a=e.newLeaf({name:"atLeastZeroTextLists",componentType:"textList",comparison:"atLeast",number:0}),s=function({dependencyValues:u}){let c=u.stringChildren[0],p=c.stateValues.value.split(",").map(m=>({componentType:"text",state:{value:m.trim()}}));return{success:!0,newChildren:p,toDelete:[c.componentName]}},o=e.newLeaf({name:"exactlyOneString",componentType:"string",number:1,isSugar:!0,returnSugarDependencies:()=>({stringChildren:{dependencyType:"child",childLogicName:"exactlyOneString",variableNames:["value"]}}),logicToWaitOnSugar:["atLeastZeroTexts"],replacementFunction:s}),l=e.newOperator({name:"textAndTextLists",operator:"and",propositions:[r,a]});return e.newOperator({name:"TextsXorSugar",operator:"xor",propositions:[o,l],setAsBase:!0}),e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.texts={public:!0,componentType:"text",isArray:!0,entryPrefixes:["text"],returnDependencies:()=>({textAndTextListChildren:{dependencyType:"child",childLogicName:"textAndTextLists",variableNames:["value","texts"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},childrenToRender:{dependencyType:"stateVariable",variableName:"childrenToRender"}}),definition:function({dependencyValues:e}){let r=[],a=e.textAndTextListChildren.map(s=>s.componentName);for(let s of e.childrenToRender){let o=a.indexOf(s),l=e.textAndTextListChildren[o];l.stateValues.texts?r.push(...l.stateValues.texts):r.push(l.stateValues.value)}return{newValues:{texts:r}}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({texts:{dependencyType:"stateVariable",variableName:"texts"}}),definition:({dependencyValues:e})=>({newValues:{text:e.texts.join(", ")}})},t.nComponents={public:!0,componentType:"number",returnDependencies:()=>({texts:{dependencyType:"stateVariable",variableName:"texts"}}),definition:function({dependencyValues:e}){return{newValues:{nComponents:e.texts.length}}}},t.childrenToRender={returnDependencies:({sharedParameters:e})=>({textAndTextListChildren:{dependencyType:"child",childLogicName:"textAndTextLists",variableNames:["childrenToRender"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},selectRng:{dependencyType:"value",value:e.selectRng,doNotProxy:!0}}),definition:function({dependencyValues:e}){let r=[];for(let o of e.textAndTextListChildren)o.stateValues.childrenToRender?r.push(...o.stateValues.childrenToRender):r.push(o.componentName);let a=e.maximumNumber;a!==null&&r.length>a&&(a=Math.max(0,Math.floor(a)),r=r.slice(0,a)),console.log("randomizing children");for(let o=r.length-1;o>0;o--){let l=e.selectRng(),u=Math.floor(l*(o+1));[r[o],r[u]]=[r[u],r[o]]}let s=Math.ceil(e.selectRng()*r.length);return console.log(`numChildren: ${s}`),r=r.slice(0,s),{newValues:{childrenToRender:r}}}},t}initializeRenderer(){this.renderer===void 0&&(this.renderer=new this.availableRenderers.aslist({key:this.componentName}))}};T(Yl,"componentType","randomizedTextList"),T(Yl,"stateVariableForAttributeValue","texts");import"math-expressions";var kn=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.simplify={propagateToDescendants:!0,createComponentOfType:"text",createStateVariable:"simplify",defaultValue:"none",public:!0,toLowerCase:!0,valueTransformations:{true:"full"},validValues:["none","full","numbers","numberspreserveorder"]},e.unordered={createComponentOfType:"boolean",createStateVariable:"unordered",defaultValue:!1,public:!0},e.maximumNumber={createComponentOfType:"number",createStateVariable:"maximumNumber",defaultValue:null,public:!0},e.mergeMathLists={createComponentOfType:"boolean",createStateVariable:"mergeMathListsPreliminary",defaultValue:!1},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=_n({componentType:"math"}),r=Ii({componentType:"math"});return t.push({replacementFunction:function({matchedChildren:a,isAttributeComponent:s=!1,createdFromMacro:o=!1}){return s&&!o?e({matchedChildren:a}):r({matchedChildren:a})}}),t}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"mathLists",componentTypes:["mathList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.overrideChildHide={returnDependencies:()=>({}),definition:()=>({newValues:{overrideChildHide:!0}})},t.mathsShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{mathsShadow:{variablesToCheck:["mathsShadow"]}}})},t.mergeMathLists={public:!0,componentType:"boolean",returnDependencies:()=>({mergeMathListsPreliminary:{dependencyType:"stateVariable",variableName:"mergeMathListsPreliminary"},mathListChildren:{dependencyType:"child",childGroups:["mathLists"],skipComponentNames:!0},mathChildren:{dependencyType:"child",childGroups:["maths"],skipComponentNames:!0}}),definition({dependencyValues:e}){return{newValues:{mergeMathLists:e.mergeMathListsPreliminary||e.mathListChildren.length===0&&e.mathChildren.length===1}}}},t.nComponents={public:!0,componentType:"number",stateVariablesDeterminingDependencies:["mergeMathLists"],additionalStateVariablesDefined:["childIndexByArrayKey"],returnDependencies({stateValues:e}){let r={maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},mergeMathLists:{dependencyType:"stateVariable",variableName:"mergeMathLists"},mathsShadow:{dependencyType:"stateVariable",variableName:"mathsShadow"}};return e.mergeMathLists?r.mathAndMathListChildren={dependencyType:"child",childGroups:["maths","mathLists"],variableNames:["value","nComponents"],variablesOptional:!0}:(r.mathListChildren={dependencyType:"child",childGroups:["mathLists"],variableNames:["nComponents"]},r.mathAndMathListChildren={dependencyType:"child",childGroups:["maths","mathLists"],skipComponentNames:!0}),r},definition:function({dependencyValues:e,componentInfoObjects:r}){let a=0,s=[];if(e.mathAndMathListChildren.length>0)if(e.mergeMathLists)for(let[l,u]of e.mathAndMathListChildren.entries())if(r.isInheritedComponentType({inheritedComponentType:u.componentType,baseComponentType:"mathList"})){for(let c=0;c<u.stateValues.nComponents;c++)s[a+c]=[l,c];a+=u.stateValues.nComponents}else{let c=u.stateValues.value;if(c&&Array.isArray(c.tree)&&c.tree[0]==="list"){let p=c.tree.length-1;for(let m=0;m<p;m++)s[m+a]=[l,m];a+=p}else s[a]=[l,0],a+=1}else{let l=0;for(let[u,c]of e.mathAndMathListChildren.entries())if(r.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"mathList"})){let p=e.mathListChildren[l];l++;for(let m=0;m<p.stateValues.nComponents;m++)s[a+m]=[u,m];a+=p.stateValues.nComponents}else s[a]=[u,0],a+=1}else e.mathsShadow!==null&&(a=e.mathsShadow.length);let o=e.maximumNumber;return o!==null&&a>o&&(a=o,s=s.slice(0,o)),{newValues:{nComponents:a,childIndexByArrayKey:s},checkForActualChange:{nComponents:!0}}}},t.maths={public:!0,componentType:"math",isArray:!0,entryPrefixes:["math"],stateVariablesDeterminingDependencies:["mergeMathLists","childIndexByArrayKey"],returnArraySizeDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"}}),returnArraySize({dependencyValues:e}){return[e.nComponents]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={},s={mergeMathLists:{dependencyType:"stateVariable",variableName:"mergeMathLists"},childIndexByArrayKey:{dependencyType:"stateVariable",variableName:"childIndexByArrayKey"},mathsShadow:{dependencyType:"stateVariable",variableName:"mathsShadow"}};for(let o of e){let l=[],u="1";r.childIndexByArrayKey[o]&&(l=[r.childIndexByArrayKey[o][0]],u=r.childIndexByArrayKey[o][1]+1),a[o]={mathAndMathListChildren:{dependencyType:"child",childGroups:["maths","mathLists"],variableNames:["value","math"+u],variablesOptional:!0,childIndices:l}}}return{globalDependencies:s,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].mathAndMathListChildren[0];if(l)if(l.stateValues.value!==void 0){let u=l.stateValues.value;if(e.mergeMathLists&&Array.isArray(u.tree)&&u.tree[0]==="list"){let c=e.childIndexByArrayKey[o][1];s[o]=u.get_component(c)}else s[o]=u}else{let u=e.childIndexByArrayKey[o][1]+1;s[o]=l.stateValues["math"+u]}else e.mathsShadow!==null&&(s[o]=e.mathsShadow[o])}return{newValues:{maths:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){if(r.mergeMathLists)return console.log("Have not implemented inverse definition for math list with mergeMathLists=true"),{success:!1};let l=[];for(let u in e.maths){if(!a[u])continue;let c=a[u].mathAndMathListChildren[0];c&&(c.stateValues.value!==void 0?l.push({setDependency:s[u].mathAndMathListChildren,desiredValue:e.maths[u],childIndex:0,variableIndex:0}):l.push({setDependency:s[u].mathAndMathListChildren,desiredValue:e.maths[u],childIndex:0,variableIndex:1}))}return{success:!0,instructions:l}}},t.nValues={isAlias:!0,targetVariableName:"nComponents"},t.values={isAlias:!0,targetVariableName:"maths"},t.latex={additionalStateVariablesDefined:["latexs"],public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({mathAndMathListChildren:{dependencyType:"child",childGroups:["maths","mathLists"],variableNames:["valueForDisplay","latex","latexs"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},mergeMathLists:{dependencyType:"stateVariable",variableName:"mergeMathLists"},mathsShadow:{dependencyType:"stateVariable",variableName:"mathsShadow"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"}}),definition:function({dependencyValues:e,usedDefault:r}){let a=[];if(e.mathAndMathListChildren.length>0)for(let l of e.mathAndMathListChildren)if(l.stateValues.valueForDisplay){let u=l.stateValues.valueForDisplay;if(e.mergeMathLists&&Array.isArray(u.tree)&&u.tree[0]==="list")for(let c=0;c<u.tree.length-1;c++)a.push(u.get_component(c).toLatex());else a.push(l.stateValues.latex)}else a.push(...l.stateValues.latexs);else e.mathsShadow!==null&&(a=e.mathsShadow.map(l=>dr({value:l,dependencyValues:e,usedDefault:r}).toLatex()));let s=e.maximumNumber;return s!==null&&a.length>s&&(s=Math.max(0,Math.floor(s)),a=a.slice(0,s)),{newValues:{latex:a.join(", "),latexs:a}}}},t.text={public:!0,componentType:"text",additionalStateVariablesDefined:["texts"],returnDependencies:()=>({mathAndMathListChildren:{dependencyType:"child",childGroups:["maths","mathLists"],variableNames:["valueForDisplay","text","texts"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},mergeMathLists:{dependencyType:"stateVariable",variableName:"mergeMathLists"},mathsShadow:{dependencyType:"stateVariable",variableName:"mathsShadow"}}),definition:function({dependencyValues:e}){let r=[];if(e.mathAndMathListChildren.length>0)for(let o of e.mathAndMathListChildren)if(o.stateValues.valueForDisplay){let l=o.stateValues.valueForDisplay;if(e.mergeMathLists&&Array.isArray(l.tree)&&l.tree[0]==="list")for(let u=0;u<l.tree.length-1;u++)r.push(l.get_component(u).toString());else r.push(o.stateValues.text)}else r.push(...o.stateValues.texts);else e.mathsShadow!==null&&(r=e.mathsShadow.map(o=>o.toString()));let a=e.maximumNumber;return a!==null&&r.length>a&&(a=Math.max(0,Math.floor(a)),r=r.slice(0,a)),{newValues:{text:r.join(", "),texts:r}}}},t.componentNamesInList={returnDependencies:()=>({mathAndMathListChildren:{dependencyType:"child",childGroups:["maths","mathLists"],variableNames:["componentNamesInList"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=[];for(let o of e.mathAndMathListChildren)r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"mathList"})?a.push(...o.stateValues.componentNamesInList):a.push(o.componentName);let s=e.maximumNumber;return s!==null&&a.length>s&&(s=Math.max(0,Math.floor(s)),a=a.slice(0,s)),{newValues:{componentNamesInList:a}}}},t.nComponentsToDisplayByChild={additionalStateVariablesDefined:[{variableName:"nChildrenToDisplay",forRenderer:!0}],returnDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"},mathListChildren:{dependencyType:"child",childGroups:["mathLists"],variableNames:["nComponents"]},mathAndMathListChildren:{dependencyType:"child",childGroups:["maths","mathLists"],skipComponentNames:!0},parentNComponentsToDisplayByChild:{dependencyType:"parentStateVariable",parentComponentType:"mathList",variableName:"nComponentsToDisplayByChild"}}),definition:function({dependencyValues:e,componentInfoObjects:r,componentName:a}){let s=e.nComponents;e.parentNComponentsToDisplayByChild!==null&&(s=e.parentNComponentsToDisplayByChild[a]);let o={},l=0,u=0,c=0;for(let p of e.mathAndMathListChildren){let m=Math.max(0,s-l);if(m>0&&u++,r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"mathList"})){let f=e.mathListChildren[c];c++;let d=Math.min(m,f.stateValues.nComponents);o[f.componentName]=d,l+=d}else l+=1}return{newValues:{nComponentsToDisplayByChild:o,nChildrenToDisplay:u}}}},t}};T(kn,"componentType","mathList"),T(kn,"renderChildren",!0),T(kn,"includeBlankStringChildren",!0),T(kn,"removeBlankStringChildrenPostSugar",!0),T(kn,"stateVariableForAttributeValue","maths"),T(kn,"primaryStateVariableForDefinition","mathsShadow");var Pi=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.unordered={createComponentOfType:"boolean",createStateVariable:"unordered",defaultValue:!1,public:!0},e.maximumNumber={createComponentOfType:"number",createStateVariable:"maximumNumber",defaultValue:null,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=_n({componentType:"number"}),r=Ii({componentType:"number"});return t.push({replacementFunction:function({matchedChildren:a,isAttributeComponent:s=!1,createdFromMacro:o=!1}){return s&&!o?e({matchedChildren:a}):r({matchedChildren:a})}}),t}static returnChildGroups(){return[{group:"numbers",componentTypes:["number"]},{group:"numberLists",componentTypes:["numberList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.overrideChildHide={returnDependencies:()=>({}),definition:()=>({newValues:{overrideChildHide:!0}})},t.nComponents={public:!0,componentType:"number",additionalStateVariablesDefined:["childIndexByArrayKey"],returnDependencies:()=>({maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},numberListChildren:{dependencyType:"child",childGroups:["numberLists"],variableNames:["nComponents"]},numberAndNumberListChildren:{dependencyType:"child",childGroups:["numbers","numberLists"],skipComponentNames:!0}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=0,s=[],o=0;for(let[u,c]of e.numberAndNumberListChildren.entries())if(r.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"numberList"})){let p=e.numberListChildren[o];o++;for(let m=0;m<p.stateValues.nComponents;m++)s[a+m]=[u,m];a+=p.stateValues.nComponents}else s[a]=[u,0],a+=1;let l=e.maximumNumber;return l!==null&&a>l&&(a=l,s=s.slice(0,l)),{newValues:{nComponents:a,childIndexByArrayKey:s},checkForActualChange:{nComponents:!0}}}},t.numbers={public:!0,componentType:"number",isArray:!0,entryPrefixes:["number"],stateVariablesDeterminingDependencies:["childIndexByArrayKey"],returnArraySizeDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"}}),returnArraySize({dependencyValues:e}){return[e.nComponents]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={},s={childIndexByArrayKey:{dependencyType:"stateVariable",variableName:"childIndexByArrayKey"}};for(let o of e){let l=[],u="1";r.childIndexByArrayKey[o]&&(l=[r.childIndexByArrayKey[o][0]],u=r.childIndexByArrayKey[o][1]+1),a[o]={numberAndNumberListChildren:{dependencyType:"child",childGroups:["numbers","numberLists"],variableNames:["value","number"+u],variablesOptional:!0,childIndices:l}}}return{globalDependencies:s,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].numberAndNumberListChildren[0];if(l)if(l.stateValues.value!==void 0)s[o]=l.stateValues.value;else{let u=e.childIndexByArrayKey[o][1]+1;s[o]=l.stateValues["number"+u]}}return{newValues:{numbers:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[];for(let u in e.numbers){if(!a[u])continue;let c=a[u].numberAndNumberListChildren[0];c&&(c.stateValues.value!==void 0?l.push({setDependency:s[u].numberAndNumberListChildren,desiredValue:e.numbers[u],childIndex:0,variableIndex:0}):l.push({setDependency:s[u].numberAndNumberListChildren,desiredValue:e.numbers[u],childIndex:0,variableIndex:1}))}return{success:!0,instructions:l}}},t.nValues={isAlias:!0,targetVariableName:"nComponents"},t.values={isAlias:!0,targetVariableName:"numbers"},t.text={public:!0,componentType:"text",additionalStateVariablesDefined:["texts"],returnDependencies:()=>({numberAndNumberListChildren:{dependencyType:"child",childGroups:["numbers","numberLists"],variableNames:["valueForDisplay","text","texts"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"}}),definition:function({dependencyValues:e}){let r=[];for(let o of e.numberAndNumberListChildren)o.stateValues.valueForDisplay!==void 0?r.push(o.stateValues.text):r.push(...o.stateValues.texts);let a=e.maximumNumber;return a!==null&&r.length>a&&(a=Math.max(0,Math.floor(a)),r=r.slice(0,a)),{newValues:{text:r.join(", "),texts:r}}}},t.componentNamesInList={returnDependencies:()=>({numberAndNumberListChildren:{dependencyType:"child",childGroups:["numbers","numberLists"],variableNames:["componentNamesInList"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=[];for(let o of e.numberAndNumberListChildren)r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"numberList"})?a.push(...o.stateValues.componentNamesInList):a.push(o.componentName);let s=e.maximumNumber;return s!==null&&a.length>s&&(s=Math.max(0,Math.floor(s)),a=a.slice(0,s)),{newValues:{componentNamesInList:a}}}},t.nComponentsToDisplayByChild={additionalStateVariablesDefined:[{variableName:"nChildrenToDisplay",forRenderer:!0}],returnDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"},numberListChildren:{dependencyType:"child",childGroups:["numberLists"],variableNames:["nComponents"]},numberAndNumberListChildren:{dependencyType:"child",childGroups:["numbers","numberLists"],skipComponentNames:!0},parentNComponentsToDisplayByChild:{dependencyType:"parentStateVariable",parentComponentType:"numberList",variableName:"nComponentsToDisplayByChild"}}),definition:function({dependencyValues:e,componentInfoObjects:r,componentName:a}){let s=e.nComponents;e.parentNComponentsToDisplayByChild!==null&&(s=e.parentNComponentsToDisplayByChild[a]);let o={},l=0,u=0,c=0;for(let p of e.numberAndNumberListChildren){let m=Math.max(0,s-l);if(m>0&&u++,r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"numberList"})){let f=e.numberListChildren[c];c++;let d=Math.min(m,f.stateValues.nComponents);o[f.componentName]=d,l+=d}else l+=1}return{newValues:{nComponentsToDisplayByChild:o,nChildrenToDisplay:u}}}},t}};T(Pi,"componentType","numberList"),T(Pi,"rendererType","asList"),T(Pi,"renderChildren",!0),T(Pi,"includeBlankStringChildren",!0),T(Pi,"removeBlankStringChildrenPostSugar",!0),T(Pi,"stateVariableForAttributeValue","numbers");var oo=class extends ue{static returnChildGroups(){return[{group:"inlines",componentTypes:["_inline"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.text={public:!0,componentType:"text",returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["inlines"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r="";for(let a of e.inlineChildren)typeof a.stateValues.text=="string"?r+=a.stateValues.text:r+=" ";return{newValues:{text:r}}}},t}};T(oo,"componentType","p"),T(oo,"renderChildren",!0),T(oo,"includeBlankStringChildren",!0);var _i=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.unordered={createComponentOfType:"boolean",createStateVariable:"unordered",defaultValue:!1,public:!0},e.maximumNumber={createComponentOfType:"number",createStateVariable:"maximumNumber",defaultValue:void 0,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=_n({componentType:"boolean"}),r=Ii({componentType:"boolean"});return t.push({replacementFunction:function({matchedChildren:a,isAttributeComponent:s=!1,createdFromMacro:o=!1}){return s&&!o?e({matchedChildren:a}):r({matchedChildren:a})}}),t}static returnChildGroups(){return[{group:"booleans",componentTypes:["boolean"]},{group:"booleanLists",componentTypes:["booleanList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.overrideChildHide={returnDependencies:()=>({}),definition:()=>({newValues:{overrideChildHide:!0}})},t.nComponents={public:!0,componentType:"number",additionalStateVariablesDefined:["childIndexByArrayKey"],returnDependencies(){return{maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"},booleanListChildren:{dependencyType:"child",childGroups:["booleanLists"],variableNames:["nComponents"]},booleanAndBooleanListChildren:{dependencyType:"child",childGroups:["booleans","booleanLists"],skipComponentNames:!0}}},definition:function({dependencyValues:e,componentInfoObjects:r}){let a=0,s=[],o=0;for(let[u,c]of e.booleanAndBooleanListChildren.entries())if(r.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"booleanList"})){let p=e.booleanListChildren[o];o++;for(let m=0;m<p.stateValues.nComponents;m++)s[a+m]=[u,m];a+=p.stateValues.nComponents}else s[a]=[u,0],a+=1;let l=e.maximumNumber;return l!==null&&a>l&&(a=l,s=s.slice(0,l)),{newValues:{nComponents:a,childIndexByArrayKey:s},checkForActualChange:{nComponents:!0}}}},t.booleans={public:!0,componentType:"boolean",isArray:!0,entryPrefixes:["boolean"],stateVariablesDeterminingDependencies:["childIndexByArrayKey"],returnArraySizeDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"}}),returnArraySize({dependencyValues:e}){return[e.nComponents]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={},s={childIndexByArrayKey:{dependencyType:"stateVariable",variableName:"childIndexByArrayKey"}};for(let o of e){let l=[],u="1";r.childIndexByArrayKey[o]&&(l=[r.childIndexByArrayKey[o][0]],u=r.childIndexByArrayKey[o][1]+1),a[o]={booleanAndBooleanListChildren:{dependencyType:"child",childGroups:["booleans","booleanLists"],variableNames:["value","boolean"+u],variablesOptional:!0,childIndices:l}}}return{globalDependencies:s,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].booleanAndBooleanListChildren[0];if(l)if(l.stateValues.value!==void 0)s[o]=l.stateValues.value;else{let u=e.childIndexByArrayKey[o][1]+1;s[o]=l.stateValues["boolean"+u]}}return{newValues:{booleans:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[];for(let u in e.booleans){if(!a[u])continue;let c=a[u].booleanAndBooleanListChildren[0];c&&(c.stateValues.value!==void 0?l.push({setDependency:s[u].booleanAndBooleanListChildren,desiredValue:e.booleans[u],childIndex:0,variableIndex:0}):l.push({setDependency:s[u].booleanAndBooleanListChildren,desiredValue:e.booleans[u],childIndex:0,variableIndex:1}))}return{success:!0,instructions:l}}},t.nValues={isAlias:!0,targetVariableName:"nComponents"},t.values={isAlias:!0,targetVariableName:"booleans"},t.componentNamesInList={returnDependencies:()=>({booleanAndBooleanListChildren:{dependencyType:"child",childGroups:["booleans","booleanLists"],variableNames:["componentNamesInList"],variablesOptional:!0},maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=[];for(let o of e.booleanAndBooleanListChildren)r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"booleanList"})?a.push(...o.stateValues.componentNamesInList):a.push(o.componentName);let s=e.maximumNumber;return s!==null&&a.length>s&&(s=Math.max(0,Math.floor(s)),a=a.slice(0,s)),{newValues:{componentNamesInList:a}}}},t.nComponentsToDisplayByChild={additionalStateVariablesDefined:[{variableName:"nChildrenToDisplay",forRenderer:!0}],returnDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"},booleanListChildren:{dependencyType:"child",childGroups:["booleanLists"],variableNames:["nComponents"]},booleanAndBooleanListChildren:{dependencyType:"child",childGroups:["booleans","booleanLists"],skipComponentNames:!0},parentNComponentsToDisplayByChild:{dependencyType:"parentStateVariable",parentComponentType:"booleanList",variableName:"nComponentsToDisplayByChild"}}),definition:function({dependencyValues:e,componentInfoObjects:r,componentName:a}){let s=e.nComponents;e.parentNComponentsToDisplayByChild!==null&&(s=e.parentNComponentsToDisplayByChild[a]);let o={},l=0,u=0,c=0;for(let p of e.booleanAndBooleanListChildren){let m=Math.max(0,s-l);if(m>0&&u++,r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"booleanList"})){let f=e.booleanListChildren[c];c++;let d=Math.min(m,f.stateValues.nComponents);o[f.componentName]=d,l+=d}else l+=1}return{newValues:{nComponentsToDisplayByChild:o,nChildrenToDisplay:u}}}},t}};T(_i,"componentType","booleanList"),T(_i,"rendererType","asList"),T(_i,"renderChildren",!0),T(_i,"includeBlankStringChildren",!0),T(_i,"removeBlankStringChildrenPostSugar",!0),T(_i,"stateVariableForAttributeValue","booleans");var na=class extends Ee{static get stateVariablesShadowedForReference(){return["targetComponent","propName"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.disabled,delete e.modifyIndirectly,delete e.fixed,delete e.styleNumber,delete e.isResponse,e.assignNamesSkip={createPrimitiveOfType:"number"},e.prop={createPrimitiveOfType:"string"},e.obtainPropFromComposite={createPrimitiveOfType:"boolean"},e.componentType={createPrimitiveOfType:"string"},e.nComponents={createPrimitiveOfType:"number"},e.componentIndex={createComponentOfType:"number",createStateVariable:"componentIndex",defaultValue:null,public:!0},e.propIndex={createComponentOfType:"number",createStateVariable:"propIndex",defaultValue:null,public:!0},e.uri={createPrimitiveOfType:"string",createStateVariable:"uri",defaultValue:null,public:!0},e.targetAttributesToIgnore={createComponentOfType:"textList",createStateVariable:"targetAttributesToIgnore",defaultValue:["hide"],public:!0},e.link={createPrimitiveOfType:"boolean"},e.removeEmptyArrayEntries={createPrimitiveOfType:"boolean",createStateVariable:"removeEmptyArrayEntries",defaultValue:!1},e}static returnChildGroups(){return[{group:"externalContents",componentTypes:["externalContent"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.tName={returnDependencies:()=>({tName:{dependencyType:"doenetAttribute",attributeName:"tName"}}),definition:({dependencyValues:e})=>({newValues:{tName:e.tName}})},t.targetSourcesName={additionalStateVariablesDefined:["sourcesChildNumber"],stateVariablesDeterminingDependencies:["tName"],determineDependenciesImmediately:!0,returnDependencies:function({stateValues:e,sharedParameters:r}){let a=r.sourceNameMappings;if(!a)return{};let s=a[e.tName];return s?{targetSourcesName:{dependencyType:"value",value:s.name},sourcesChildNumber:{dependencyType:"value",value:s.childNumber}}:{}},definition:function({dependencyValues:e}){let r=e.targetSourcesName,a=e.sourcesChildNumber;return r||(r=null,a=null),{newValues:{targetSourcesName:r,sourcesChildNumber:a},makeEssential:{targetSourcesName:!0,sourcesChildNumber:!0}}}},t.targetSources={stateVariablesDeterminingDependencies:["targetSourcesName"],determineDependenciesImmediately:!0,returnDependencies({stateValues:e}){return e.targetSourcesName?{targetSourcesComponent:{dependencyType:"componentIdentity",componentName:e.targetSourcesName}}:{}},definition:function({dependencyValues:e}){let r=e.targetSourcesComponent;return r||(r=null),{newValues:{targetSources:r}}}},t.sourceIndex={stateVariablesDeterminingDependencies:["tName"],determineDependenciesImmediately:!0,returnDependencies:function({stateValues:e,sharedParameters:r}){let a=r.sourceIndexMappings;if(!a)return{};let s=a[e.tName];return s===void 0?{}:{sourceIndex:{dependencyType:"value",value:s}}},definition:function({dependencyValues:e}){let r=e.sourceIndex;return r===void 0&&(r=null),{newValues:{sourceIndex:r},makeEssential:{sourceIndex:!0}}}},t.targetComponent={stateVariablesDeterminingDependencies:["targetSources","sourceIndex"],determineDependenciesImmediately:!0,returnDependencies({stateValues:e}){return e.sourceIndex!==null?{}:e.targetSources!==null?{targetSourcesChildren:{dependencyType:"stateVariable",componentName:e.targetSources.componentName,variableName:"childIdentities"},sourcesChildNumber:{dependencyType:"stateVariable",variableName:"sourcesChildNumber"}}:{targetComponent:{dependencyType:"targetComponent"}}},definition:function({dependencyValues:e}){let r=null;return e.targetSourcesChildren?(r=e.targetSourcesChildren[e.sourcesChildNumber],r||(r=null)):e.targetComponent&&(r=e.targetComponent),{newValues:{targetComponent:r}}}},t.targetInactive={stateVariablesDeterminingDependencies:["targetComponent"],returnDependencies({stateValues:e}){return e.targetComponent?{targetIsInactiveCompositeReplacement:{dependencyType:"stateVariable",componentName:e.targetComponent.componentName,variableName:"isInactiveCompositeReplacement"}}:{}},definition:function({dependencyValues:e}){return{newValues:{targetInactive:Boolean(e.targetIsInactiveCompositeReplacement)}}}},t.contentId={additionalStateVariablesDefined:["doenetId"],returnDependencies:()=>({uri:{dependencyType:"stateVariable",variableName:"uri"}}),definition:function({dependencyValues:e}){if(!e.uri||e.uri.substring(0,7).toLowerCase()!=="doenet:")return{newValues:{contentId:null,doenetId:null}};let r=null,a=null,s=e.uri.match(/[:&]contentid=([^&]+)/i);return s&&(r=s[1]),s=e.uri.match(/[:&]doenetid=([^&]+)/i),s&&(a=s[1]),{newValues:{contentId:r,doenetId:a}}}},t.serializedComponentsForContentId={returnDependencies:()=>({contentId:{dependencyType:"stateVariable",variableName:"contentId"},externalContentChild:{dependencyType:"child",childGroups:["externalContents"],variableNames:["serializedChildren","newNamespace"]}}),definition:function({dependencyValues:e}){if(!e.contentId)return{newValues:{serializedComponentsForContentId:null}};let r=e.externalContentChild[0];if(!r)return{newValues:{serializedComponentsForContentId:null}};let a=r.stateValues.serializedChildren,s={componentType:"externalContent",state:{rendered:!0},children:a,originalName:r.componentName};return r.stateValues.newNamespace&&(s.attributes={newNamespace:{primitive:!0}}),{newValues:{serializedComponentsForContentId:s}}}},t.propName={returnDependencies:()=>({propName:{dependencyType:"attributePrimitive",attributeName:"prop"}}),definition:function({dependencyValues:e}){return{newValues:{propName:e.propName}}}},t.obtainPropFromComposite={returnDependencies:()=>({obtainPropFromComposite:{dependencyType:"attributePrimitive",attributeName:"obtainPropFromComposite"}}),definition:function({dependencyValues:e}){return{newValues:{obtainPropFromComposite:e.obtainPropFromComposite}}}},t.isPlainMacro={returnDependencies:()=>({isPlainMacro:{dependencyType:"doenetAttribute",attributeName:"isPlainMacro"}}),definition:function({dependencyValues:e}){return{newValues:{isPlainMacro:e.isPlainMacro}}}},t.linkAttrForDetermineDeps={returnDependencies:()=>({linkAttr:{dependencyType:"attributePrimitive",attributeName:"link"}}),definition({dependencyValues:e}){let r;return e.linkAttr===null?r=!0:r=e.linkAttr,{newValues:{linkAttrForDetermineDeps:r}}}},t.replacementSourceIdentities={stateVariablesDeterminingDependencies:["targetComponent","componentIndex","propName","obtainPropFromComposite","linkAttrForDetermineDeps"],additionalStateVariablesDefined:["addLevelToAssignNames"],returnDependencies:function({stateValues:e,componentInfoObjects:r}){let a={},s=!1,o=!1;return e.targetComponent!==null&&(r.isCompositeComponent({componentType:e.targetComponent.componentType,includeNonStandard:!1})&&!(e.propName&&e.obtainPropFromComposite)&&(e.linkAttrForDetermineDeps?(o=!0,a.targets={dependencyType:"replacement",compositeName:e.targetComponent.componentName,recursive:!0,componentIndex:e.componentIndex}):s=!0),!o&&(e.componentIndex===null||e.componentIndex===1)&&(a.targets={dependencyType:"stateVariable",variableName:"targetComponent"})),a.addLevelToAssignNames={dependencyType:"value",value:s},a},definition({dependencyValues:e}){let r=null;return e.targets&&(r=e.targets,Array.isArray(r)||(r=[r])),{newValues:{replacementSourceIdentities:r,addLevelToAssignNames:e.addLevelToAssignNames}}}},t.effectivePropNameBySource={stateVariablesDeterminingDependencies:["replacementSourceIdentities","propName","isPlainMacro"],returnDependencies:function({stateValues:e,componentInfoObjects:r}){let a={replacementSourceIdentities:{dependencyType:"stateVariable",variableName:"replacementSourceIdentities"}};if(e.replacementSourceIdentities!==null)for(let[s,o]of e.replacementSourceIdentities.entries()){let l=e.propName;e.isPlainMacro&&(l=r.allComponentClasses[o.componentType].variableForPlainMacro),l&&(a["propName"+s]={dependencyType:"value",value:l})}return a},definition({dependencyValues:e}){let r=null;if(e.replacementSourceIdentities!==null){r=[];for(let a in e.replacementSourceIdentities)e["propName"+a]&&(r[a]=e["propName"+a])}return{newValues:{effectivePropNameBySource:r}}}},t.replacementSources={stateVariablesDeterminingDependencies:["replacementSourceIdentities","propName","propIndex","isPlainMacro","effectivePropNameBySource"],returnDependencies:function({stateValues:e}){let r={replacementSourceIdentities:{dependencyType:"stateVariable",variableName:"replacementSourceIdentities"}};if(!e.propName&&e.propIndex!==null)throw Error("You cannot specify a propIndex without specifying a prop.");if(e.replacementSourceIdentities!==null)for(let[a,s]of e.replacementSourceIdentities.entries()){let o=e.effectivePropNameBySource[a],l;o?l={dependencyType:"stateVariable",componentName:s.componentName,variableName:o,returnAsComponentObject:!0,variablesOptional:!0,propIndex:e.propIndex,caseInsensitiveVariableMatch:!0,publicStateVariablesOnly:!0,useMappedVariableNames:!0}:l={dependencyType:"componentIdentity",componentName:s.componentName},r["target"+a]=l}return r},definition({dependencyValues:e}){let r=null;if(e.replacementSourceIdentities!==null){r=[];for(let a in e.replacementSourceIdentities)e["target"+a]&&r.push(e["target"+a])}return{newValues:{replacementSources:r}}}},t.nComponentsSpecified={returnDependencies:()=>({nComponentsAttr:{dependencyType:"attributePrimitive",attributeName:"nComponents"},typeAttr:{dependencyType:"attributePrimitive",attributeName:"componentType"}}),definition({dependencyValues:e,componentInfoObjects:r}){let a;if(e.typeAttr){if(!(e.typeAttr in r.allComponentClasses))throw Error(`Invalid componentType ${e.typeAttr} of copy.`);e.nComponentsAttr!==null?a=e.nComponentsAttr:a=1}else{if(e.nComponentsAttr!==null)throw Error("You must specify a componentType when specifying nComponents for a copy.");a=null}return{newValues:{nComponentsSpecified:a}}}},t.link={returnDependencies:()=>({linkAttr:{dependencyType:"attributePrimitive",attributeName:"link"},serializedComponentsForContentId:{dependencyType:"stateVariable",variableName:"serializedComponentsForContentId"},replacementSourceIdentities:{dependencyType:"stateVariable",variableName:"replacementSourceIdentities"}}),definition({dependencyValues:e,componentInfoObjects:r}){let a;return e.linkAttr===null?e.serializedComponentsForContentId||e.replacementSourceIdentities&&e.replacementSourceIdentities.some(s=>r.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"module"}))?a=!1:a=!0:a=e.linkAttr,{newValues:{link:a}}}},t.readyToExpandWhenResolved={stateVariablesDeterminingDependencies:["targetComponent","propName","obtainPropFromComposite","link"],returnDependencies({stateValues:e,componentInfoObjects:r}){let a={targetComponent:{dependencyType:"stateVariable",variableName:"targetComponent"},needsReplacementsUpdatedWhenStale:{dependencyType:"stateVariable",variableName:"needsReplacementsUpdatedWhenStale"},serializedComponentsForContentId:{dependencyType:"stateVariable",variableName:"serializedComponentsForContentId"},link:{dependencyType:"stateVariable",variableName:"link"}};return e.targetComponent&&r.isCompositeComponent({componentType:e.targetComponent.componentType,includeNonStandard:!1})&&!(e.propName&&e.obtainPropFromComposite)&&(a.targetReadyToExpandWhenResolved={dependencyType:"stateVariable",componentName:e.targetComponent.componentName,variableName:"readyToExpandWhenResolved"}),e.link===!1&&(a.replacementSources={dependencyType:"stateVariable",variableName:"replacementSources"}),a},definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t.needsReplacementsUpdatedWhenStale={stateVariablesDeterminingDependencies:["targetComponent","replacementSourceIdentities","effectivePropNameBySource","propName","obtainPropFromComposite","link","removeEmptyArrayEntries"],returnDependencies:function({stateValues:e,componentInfoObjects:r}){if(e.link===!1)return{};let a={targetComponent:{dependencyType:"stateVariable",variableName:"targetComponent"},targetInactive:{dependencyType:"stateVariable",variableName:"targetInactive"},replacementSourceIdentities:{dependencyType:"stateVariable",variableName:"replacementSourceIdentities"}};if(e.effectivePropNameBySource!==null){for(let[s,o]of e.effectivePropNameBySource.entries())if(o){let l=e.replacementSourceIdentities[s];a["sourceArraySize"+s]={dependencyType:"stateVariableArraySize",componentName:l.componentName,variableName:o,variablesOptional:!0,caseInsensitiveVariableMatch:!0},a["sourceComponentType"+s]={dependencyType:"stateVariableComponentType",componentName:l.componentName,variableName:o,variablesOptional:!0,caseInsensitiveVariableMatch:!0}}}return e.targetComponent!==null&&r.isCompositeComponent({componentType:e.targetComponent.componentType,includeNonStandard:!1})&&!(e.propName&&e.obtainPropFromComposite)&&(a.allReplacementIdentities={dependencyType:"replacement",compositeName:e.targetComponent.componentName,recursive:!0,variableNames:["isInactiveCompositeReplacement"]}),e.removeEmptyArrayEntries&&(a.replacementSources={dependencyType:"stateVariable",variableName:"replacementSources"}),a},markStale(){return{updateReplacements:!0}},definition:()=>({newValues:{needsReplacementsUpdatedWhenStale:!0}})},t.effectiveAssignNames={returnDependencies:()=>({assignNames:{dependencyType:"doenetAttribute",attributeName:"assignNames"},addLevelToAssignNames:{dependencyType:"stateVariable",variableName:"addLevelToAssignNames"}}),definition({dependencyValues:e}){let r=e.assignNames;return r&&e.addLevelToAssignNames&&(r=[r]),{newValues:{effectiveAssignNames:r}}}},t}static createSerializedReplacements({component:t,components:e,workspace:r,componentInfoObjects:a,flags:s,resolveItem:o,publicCaseInsensitiveAliasSubstitutions:l}){r.numReplacementsBySource=[],r.numNonStringReplacementsBySource=[],r.propVariablesCopiedBySource=[],r.sourceNames=[],r.uniqueIdentifiersUsedBySource={};let u=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,c=this.createAttributesObject({flags:s});if(t.stateValues.serializedComponentsForContentId){let g=[xe(t.stateValues.serializedComponentsForContentId)];Sp(g,g[0].originalName+"/");for(let w of g[0].children){w.attributes||(w.attributes={});let S=Ye({attributes:t.attributes,componentType:w.componentType,componentInfoObjects:a,compositeAttributesObj:c,compositeCreatesNewNamespace:u});for(let A in S){let E=S[A];E.component?Qa([E.component]):E.childrenForComponent&&Qa(E.childrenForComponent)}Object.assign(w.attributes,S)}return g=de({assignNames:t.stateValues.effectiveAssignNames,serializedComponents:g,parentName:t.componentName,parentCreatesNewNamespace:u,componentInfoObjects:a}).serializedComponents,{replacements:this.verifyReplacementsMatchSpecifiedType({component:t,replacements:g,workspace:r,componentInfoObjects:a,compositeAttributesObj:c}).replacements}}if(t.stateValues.sourceIndex!==null){let g=Ye({attributes:t.attributes,componentType:"number",componentInfoObjects:a,compositeAttributesObj:c,compositeCreatesNewNamespace:u}),v=[{componentType:"number",attributes:g,state:{value:t.stateValues.sourceIndex,fixed:!0}}],C=de({assignNames:t.stateValues.effectiveAssignNames,serializedComponents:v,parentName:t.componentName,parentCreatesNewNamespace:u,componentInfoObjects:a});return{replacements:this.verifyReplacementsMatchSpecifiedType({component:t,replacements:C.serializedComponents,workspace:r,componentInfoObjects:a,compositeAttributesObj:c}).replacements}}if(!t.stateValues.targetComponent||!t.stateValues.replacementSourceIdentities)return{replacements:this.verifyReplacementsMatchSpecifiedType({component:t,replacements:[],workspace:r,componentInfoObjects:a,compositeAttributesObj:c}).replacements};let p=o({componentName:t.componentName,type:"determineDependencies",stateVariable:"replacementSources",dependency:"__determine_dependencies",expandComposites:!1});if(!p.success)throw Error(`Couldn't resolve determineDependencies of replacementSources of ${t.componentName}`);for(let g in t.stateValues.replacementSourceIdentities)if(t.stateValues.effectivePropNameBySource[g]&&(p=o({componentName:t.componentName,type:"recalculateDownstreamComponents",stateVariable:"replacementSources",dependency:"target"+g,expandComposites:!1}),!p.success))throw Error(`Couldn't resolve recalculateDownstreamComponents for target${g} of replacementSources of ${t.componentName}`);let m=[],f=[],d=[],h=0,y=0;for(let g in t.stateValues.replacementSourceIdentities){let v=r.uniqueIdentifiersUsedBySource[g]=[],C;if(t.attributes.componentType&&t.attributes.componentType.primitive){let A=t.stateValues.nComponentsSpecified,E=t.stateValues.replacementSourceIdentities.length;C=Math.floor(A/E);let I=A%E;g<I&&C++}let w=this.createReplacementForSource({component:t,sourceNum:g,components:e,numReplacementsSoFar:h,numNonStringReplacementsSoFar:y,uniqueIdentifiersUsed:v,compositeAttributesObj:c,componentInfoObjects:a,nComponentsForSource:C,publicCaseInsensitiveAliasSubstitutions:l});r.propVariablesCopiedBySource[g]=w.propVariablesCopiedByReplacement;let S=w.serializedReplacements;f[g]=S.length,d[g]=S.filter(A=>A.componentType!=="string").length,h+=f[g],y+=d[g],m.push(...S)}return r.numReplacementsBySource=f,r.numNonStringReplacementsBySource=d,r.sourceNames=t.stateValues.replacementSourceIdentities.map(g=>g.componentName),{replacements:this.verifyReplacementsMatchSpecifiedType({component:t,replacements:m,workspace:r,componentInfoObjects:a,compositeAttributesObj:c}).replacements}}static verifyReplacementsMatchSpecifiedType({component:t,replacements:e,replacementChanges:r,workspace:a,componentInfoObjects:s,compositeAttributesObj:o}){if(!(t.attributes.componentType&&t.attributes.componentType.primitive)&&!t.sharedParameters.compositesMustHaveAReplacement)return{replacements:e,replacementChanges:r};let l=t.replacementsToWithhold,u;if(!r)u=e.map(m=>m.componentType),u.length===1&&u[0]==="externalContent"&&(u=e[0].children.map(m=>m.componentType));else{u=t.replacements.map(m=>m.componentType);for(let m of r)if(m.changeType==="add"){if(m.replacementsToWithhold!==void 0&&(l=m.replacementsToWithhold),!m.changeTopLevelReplacements)continue;if(m.serializedReplacements){let f=m.numberReplacementsToReplace;f>0||(f=0);let d=m.firstReplacementInd,h=m.serializedReplacements.map(y=>y.componentType);u.splice(d,f,...h)}}else if(m.changeType==="delete"){if(m.replacementsToWithhold!==void 0&&(l=m.replacementsToWithhold),m.changeTopLevelReplacements){let f=m.firstReplacementInd,d=m.numberReplacementsToDelete;u.splice(f,d)}}else m.changeType==="changeReplacementsToWithhold"&&m.replacementsToWithhold!==void 0&&(l=m.replacementsToWithhold)}if(l>0&&(u=u.slice(0,u.length-l)),!(t.attributes.componentType&&t.attributes.componentType.primitive)&&t.sharedParameters.compositesMustHaveAReplacement&&u.length>0)return{replacements:e,replacementChanges:r};let c=t.attributes.componentType;c&&(c=t.attributes.componentType.primitive);let p=t.stateValues.nComponentsSpecified;if(!c){if(c=t.sharedParameters.compositesDefaultReplacementType,!c)throw Error("A component class specified descendantCompositesMustHaveAReplacement but didn't specify descendantCompositesDefaultReplacementType");p=1}if(u.length!==p||!u.every(m=>m===c)){a.numReplacementsBySource=[],a.numNonStringReplacementsBySource=[],a.propVariablesCopiedBySource=[],a.sourceNames=[],a.uniqueIdentifiersUsedBySource={};let m=a.uniqueIdentifiersUsedBySource[0]=[],f=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;e=[];for(let h=0;h<p;h++){let y=Ye({attributes:t.attributes,componentType:c,componentInfoObjects:s,compositeAttributesObj:o,compositeCreatesNewNamespace:f}),b=c+"|empty"+h,g=Ci(b,m);e.push({componentType:c,attributes:y,uniqueIdentifier:g})}if(e=de({assignNames:t.stateValues.effectiveAssignNames,serializedComponents:e,parentName:t.componentName,parentCreatesNewNamespace:f,componentInfoObjects:s}).serializedComponents,a.numReplacementsBySource.push(e.length),a.numNonStringReplacementsBySource.push(e.filter(h=>h.componentType!=="string").length),r){r=[],t.replacementsToWithhold>0&&r.push({changeType:"changeReplacementsToWithhold",replacementsToWithhold:0});let h=0;t.replacements&&(h=t.replacements.length),r.push({changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:h,serializedReplacements:e})}}return{replacements:e,replacementChanges:r}}static createReplacementForSource({component:t,sourceNum:e,components:r,numReplacementsSoFar:a,numNonStringReplacementsSoFar:s,uniqueIdentifiersUsed:o,compositeAttributesObj:l,componentInfoObjects:u,nComponentsForSource:c,publicCaseInsensitiveAliasSubstitutions:p}){let m=t.stateValues.replacementSourceIdentities[e],f=r[m.componentName];if(f.stateValues.isInactiveCompositeReplacement)return{serializedReplacements:[]};(t.stateValues.link===!1||t.stateValues.removeEmptyArrayEntries)&&(m=t.stateValues.replacementSources[e]);let d=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;if(t.stateValues.effectivePropNameBySource[e]){let b=zp({component:t,components:r,replacementSource:m,propName:t.stateValues.effectivePropNameBySource[e],numReplacementsSoFar:a,numNonStringReplacementsSoFar:s,uniqueIdentifiersUsed:o,compositeAttributesObj:l,componentInfoObjects:u,nComponentsForSource:c,publicCaseInsensitiveAliasSubstitutions:p});return{serializedReplacements:de({assignNames:t.stateValues.effectiveAssignNames,serializedComponents:b.serializedReplacements,parentName:t.componentName,parentCreatesNewNamespace:d,indOffset:s,componentInfoObjects:u}).serializedComponents,propVariablesCopiedByReplacement:b.propVariablesCopiedByReplacement}}let h=[f.serialize({forLink:t.stateValues.link})];h=Rr({serializedComponents:h,componentName:t.componentName,uniqueIdentifiersUsed:o,addShadowDependencies:t.stateValues.link!==!1,unlinkExternalCopies:t.stateValues.link===!1});for(let b of h){b.attributes||(b.attributes={});let g=Ye({attributes:t.attributes,componentType:b.componentType,componentInfoObjects:u,compositeAttributesObj:l,compositeCreatesNewNamespace:d});Object.assign(b.attributes,g)}return{serializedReplacements:de({assignNames:t.stateValues.effectiveAssignNames,serializedComponents:h,parentName:t.componentName,parentCreatesNewNamespace:d,indOffset:s,componentInfoObjects:u}).serializedComponents}}static calculateReplacementChanges({component:t,componentChanges:e,components:r,workspace:a,componentInfoObjects:s,flags:o,resolveItem:l,publicCaseInsensitiveAliasSubstitutions:u}){if(t.stateValues.serializedComponentsForContentId)return[];if(t.stateValues.sourceIndex!==null)return[];let c=this.createAttributesObject({flags:o});if(!t.stateValues.targetComponent||!t.stateValues.replacementSourceIdentities){if(t.stateValues.targetSources)return[];{let S=[];if(t.replacements.length>0){let I={changeType:"delete",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToDelete:t.replacements.length};S.push(I)}let A=a.sourceNames.length===0;a.sourceNames=[],a.numReplacementsBySource=[],a.numNonStringReplacementsBySource=[],a.propVariablesCopiedBySource=[];let E=this.verifyReplacementsMatchSpecifiedType({component:t,replacementChanges:S,workspace:a,componentInfoObjects:s,compositeAttributesObj:c});return A?[]:E.replacementChanges}}if(t.stateValues.targetInactive){let S=[],A=t.replacements.length;if(A>0){if(t.replacementsToWithhold!==A){let I={changeType:"changeReplacementsToWithhold",replacementsToWithhold:A};S.push(I)}S=this.verifyReplacementsMatchSpecifiedType({component:t,replacementChanges:S,workspace:a,componentInfoObjects:s,compositeAttributesObj:c}).replacementChanges}return S}let p=l({componentName:t.componentName,type:"determineDependencies",stateVariable:"replacementSources",dependency:"__determine_dependencies",expandComposites:!1});if(!p.success)throw Error(`Couldn't resolve determineDependencies of replacementSources of ${t.componentName}`);for(let S in t.stateValues.replacementSourceIdentities)if(t.stateValues.effectivePropNameBySource[S]&&(p=l({componentName:t.componentName,type:"recalculateDownstreamComponents",stateVariable:"replacementSources",dependency:"target"+S,expandComposites:!1}),!p.success))throw Error(`Couldn't resolve recalculateDownstreamComponents for target${S} of replacementSources of ${t.componentName}`);let m=[];if(t.replacementsToWithhold>0){let S={changeType:"changeReplacementsToWithhold",replacementsToWithhold:0};m.push(S)}let f=0,d=0,h=[],y=[],b=[],g=Math.max(t.stateValues.replacementSourceIdentities.length,a.numReplacementsBySource.length),v=!1;for(let S=0;S<g;S++){let A;if(t.attributes.componentType&&t.attributes.componentType.primitive){let _=t.stateValues.nComponentsSpecified,F=t.stateValues.replacementSourceIdentities.length;A=Math.floor(_/F);let z=_%F;S<z&&A++}let E=t.stateValues.replacementSourceIdentities[S];if(E===void 0){if(a.numReplacementsBySource[S]>0){if(!v){let _=a.numReplacementsBySource.slice(S).reduce((F,z)=>F+z,0);if(_>0){let F={changeType:"delete",changeTopLevelReplacements:!0,firstReplacementInd:f,numberReplacementsToDelete:_};m.push(F)}v=!0,a.numReplacementsBySource.slice(S).forEach((F,z)=>a.numReplacementsBySource[z]=0),a.numNonStringReplacementsBySource.slice(S).forEach((F,z)=>a.numNonStringReplacementsBySource[z]=0)}a.uniqueIdentifiersUsedBySource[S]=[]}h[S]=0,y[S]=0,b.push([]);continue}let I=a.sourceNames[S],V=I===void 0||E.componentName!==I||v;if(!V)for(let _=0;_<a.numReplacementsBySource[S];_++){let F=t.replacements[f+_];if(F){if(!t.stateValues.effectivePropNameBySource[S]&&F.shadows&&F.shadows.componentName!==t.stateValues.replacementSourceIdentities[S].componentName){V=!0;break}}else{V=!0;break}}if(V){let _=0;S in a.numReplacementsBySource&&(_=a.numReplacementsBySource[S]);let F=_;v&&(F=0);let z=a.uniqueIdentifiersUsedBySource[S]=[],H=this.recreateReplacements({component:t,sourceNum:S,numReplacementsSoFar:f,numNonStringReplacementsSoFar:d,numReplacementsToDelete:F,components:r,uniqueIdentifiersUsed:z,compositeAttributesObj:c,componentInfoObjects:s,nComponentsForSource:A,publicCaseInsensitiveAliasSubstitutions:u});f+=H.numReplacements,d+=H.numNonStringReplacements,h[S]=H.numReplacements,y[S]=H.numNonStringReplacements,b[S]=H.propVariablesCopiedByReplacement;let ie=H.replacementInstruction;if(!v&&H.numReplacements!==_){let fe=a.numReplacementsBySource.slice(S).reduce((we,Ne)=>we+Ne,0);ie.numberReplacementsToReplace=fe,v=!0,a.numReplacementsBySource.slice(S).forEach((we,Ne)=>a.numReplacementsBySource[Ne]=0),a.numNonStringReplacementsBySource.slice(S).forEach((we,Ne)=>a.numNonStringReplacementsBySource[Ne]=0)}m.push(ie);continue}if(!t.stateValues.effectivePropNameBySource[S]){if(r[E.componentName].stateValues.isInactiveCompositeReplacement){if(a.numReplacementsBySource[S]===0){f+=a.numReplacementsBySource[S],d+=a.numNonStringReplacementsBySource[S],h[S]=a.numReplacementsBySource[S],y[S]=a.numNonStringReplacementsBySource[S];continue}}else if(a.numReplacementsBySource[S]>0){f+=a.numReplacementsBySource[S],d+=a.numNonStringReplacementsBySource[S],h[S]=a.numReplacementsBySource[S],y[S]=a.numNonStringReplacementsBySource[S];continue}}let O=a.uniqueIdentifiersUsedBySource[S]=[],k=this.createReplacementForSource({component:t,sourceNum:S,components:r,numReplacementsSoFar:f,numNonStringReplacementsSoFar:d,uniqueIdentifiersUsed:O,compositeAttributesObj:c,componentInfoObjects:s,nComponentsForSource:A,publicCaseInsensitiveAliasSubstitutions:u}),M=k.propVariablesCopiedByReplacement,L=k.serializedReplacements,G=L.length,K=a.numReplacementsBySource[S];if(G!==K){let _=a.numReplacementsBySource.slice(S).reduce((z,H)=>z+H,0),F={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:f,numberReplacementsToReplace:_,serializedReplacements:L,assignNamesOffset:d};m.push(F),v=!0,a.numReplacementsBySource.slice(S).forEach((z,H)=>a.numReplacementsBySource[H]=0),a.numNonStringReplacementsBySource.slice(S).forEach((z,H)=>a.numNonStringReplacementsBySource[H]=0)}else{let _=0;for(let F=0;F<G;F++){if(M[F].length!==a.propVariablesCopiedBySource[S][F].length||a.propVariablesCopiedBySource[S][F].some((z,H)=>z!==M[F][H])||t.replacements[f+F].componentType!==L[F].componentType){let z={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:f+F,numberReplacementsToReplace:1,serializedReplacements:[L[F]],assignNamesOffset:d+_};m.push(z)}L[F].componentType!=="string"&&_++}}let B=L.filter(_=>_.componentType!=="string").length;f+=G,d+=B,h[S]=G,y[S]=B,b[S]=M}let C=a.sourceNames.length===0;a.numReplacementsBySource=h,a.numNonStringReplacementsBySource=y,a.sourceNames=t.stateValues.replacementSourceIdentities.map(S=>S.componentName),a.propVariablesCopiedBySource=b;let w=this.verifyReplacementsMatchSpecifiedType({component:t,replacementChanges:m,workspace:a,componentInfoObjects:s,compositeAttributesObj:c});return C&&a.sourceNames.length===0?[]:w.replacementChanges}static recreateReplacements({component:t,sourceNum:e,numReplacementsSoFar:r,numNonStringReplacementsSoFar:a,numReplacementsToDelete:s,uniqueIdentifiersUsed:o,components:l,compositeAttributesObj:u,componentInfoObjects:c,nComponentsForSource:p,publicCaseInsensitiveAliasSubstitutions:m}){let f=this.createReplacementForSource({component:t,sourceNum:e,numReplacementsSoFar:r,numNonStringReplacementsSoFar:a,components:l,uniqueIdentifiersUsed:o,compositeAttributesObj:u,componentInfoObjects:c,nComponentsForSource:p,publicCaseInsensitiveAliasSubstitutions:m}),d=f.propVariablesCopiedByReplacement,h=f.serializedReplacements,y={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:r,numberReplacementsToReplace:s,serializedReplacements:h,assignNamesOffset:a};return{numReplacements:h.length,numNonStringReplacements:h.filter(b=>b.componentType!=="string").length,propVariablesCopiedByReplacement:d,replacementInstruction:y}}};T(na,"componentType","copy"),T(na,"assignNamesToReplacements",!0),T(na,"acceptTname",!0),T(na,"acceptAnyAttribute",!0),T(na,"stateVariableToEvaluateAfterReplacements","needsReplacementsUpdatedWhenStale");function zp({component:i,components:t,replacementSource:e,propName:r,uniqueIdentifiersUsed:a,compositeAttributesObj:s,componentInfoObjects:o,nComponentsForSource:l,publicCaseInsensitiveAliasSubstitutions:u}){let c=[],p=[],m=i.attributes.newNamespace&&i.attributes.newNamespace.primitive,f=-1,d=t[e.componentName],h=u({stateVariables:[r],componentClass:d.constructor})[0];if(h===void 0||h.slice(0,12)==="__not_public")return console.warn(`Could not find prop ${r} on a component of type ${e.componentType}`),{serializedReplacements:[],propVariablesCopiedByReplacement:[]};let y=d.state[h];if(y.isArray||y.isArrayEntry){let b,g;if(y.isArray?(b=y,g=y.getAllArrayKeys(y.arraySize,!1)):(b=d.state[y.arrayStateVariable],g=y.unflattenedArrayKeys),b.hasVariableComponentType&&(i.stateValues.replacementSources,!b.componentType))return{serializedReplacements:[],propVariablesCopiedByReplacement:[]};let v=y.wrappingComponents,C=v.length,w=l;if(y.isArray)w=y.arraySize.slice(0,y.arraySize.length-C).reduce((S,A)=>S*A,1);else if(y.arrayKeys.length===0)w=0;else if(C===0)w=y.arrayKeys.length;else if(C>=y.nDimensions)w=1;else if(C===y.nDimensions-1)w=g.length;else{let S=y.nDimensions-C-1;w=I0(g,S).length}if(C===0){let S=Er(g);for(let A=0;A<w;A++){let E=S[A];if(i.stateValues.removeEmptyArrayEntries){if(!E)continue;let O=b.keyToIndex(E);Array.isArray(O)||(O=[O]);let k=b.value;for(let M of O)k=k[M];if(k==null)continue}f++;let I=p[f]=[],V=b.componentType;if(Array.isArray(V)&&(V[b.keyToIndex(E)]?V=V[b.keyToIndex(E)]:V=V[0]),E){let O=b.arrayVarNameFromArrayKey(E);I.push(O);let k=e.componentName+"|shadow|"+O,M=Ci(k,a),L=Ye({attributes:i.attributes,componentType:V,componentInfoObjects:o,compositeAttributesObj:s,compositeCreatesNewNamespace:m});if(i.stateValues.link!==!1)c.push({componentType:V,attributes:L,downstreamDependencies:{[e.componentName]:[{dependencyType:"referenceShadow",compositeName:i.componentName,propVariable:O}]},uniqueIdentifier:M});else{let G="value",K=o.allComponentClasses[V];K.primaryStateVariableForDefinition&&(G=K.primaryStateVariableForDefinition);let B=b.keyToIndex(E);Array.isArray(B)||(B=[B]);let _=b.value;for(let z of B)_=_[z];let F={componentType:V,attributes:L,state:{[G]:_},uniqueIdentifier:M};if(b.stateVariablesPrescribingAdditionalAttributes){let z={};for(let ie in b.stateVariablesPrescribingAdditionalAttributes){let fe=b.stateVariablesPrescribingAdditionalAttributes[ie];z[ie]=d.stateValues[fe]}let H=Ye({attributes:z,componentType:V,componentInfoObjects:o});Object.assign(F.attributes,H)}c.push(F)}}else{let O=V+"|empty",k=Ci(O,a);c.push({componentType:V,uniqueIdentifier:k})}}}else{let S=function(I,V){let O=[],k=[];if(V>1)for(let L of I){let G=S(L,V-1);O.push(...G.pieces),k.push(...G.propVariablesCopiedByPiece)}else for(let L of I){let G=b.arrayVarNameFromArrayKey(L),K=[G],B=e.componentName+"|shadow|"+G,_=Ci(B,a),F=b.componentType;if(Array.isArray(F)&&(F=F[b.keyToIndex(L)]),i.stateValues.link!==!1)O.push({componentType:F,downstreamDependencies:{[e.componentName]:[{dependencyType:"referenceShadow",compositeName:i.componentName,propVariable:G}]},uniqueIdentifier:_});else{let z="value",H=o.allComponentClasses[F];H.primaryStateVariableForDefinition&&(z=H.primaryStateVariableForDefinition);let ie=b.keyToIndex(L);Array.isArray(ie)||(ie=[ie]);let fe=b.value;for(let Ne of ie)fe=fe[Ne];let we={componentType:F,state:{[z]:fe},uniqueIdentifier:_};if(b.stateVariablesPrescribingAdditionalAttributes){let Ne={};for(let Vn in b.stateVariablesPrescribingAdditionalAttributes){let In=b.stateVariablesPrescribingAdditionalAttributes[Vn];Ne[Vn]=d.stateValues[In]}let ve=Ye({attributes:Ne,componentType:F,componentInfoObjects:o});we.attributes}O.push(we)}k.push(K)}let M=v[V-1];if(O.length>0&&M&&M.length>0){for(let L=M.length-1;L>=0;L--){let G=typeof M[L]=="object"?M[L].componentType:M[L],K=G+"|wrapper",B=Ci(K,a),_=[],F={};for(let z of O)if(z.isAttribute){let H=z.isAttribute;delete z.isAttribute,F[H]={component:z}}else _.push(z);O=[{componentType:G,children:_,attributes:F,uniqueIdentifier:B,skipSugar:!0}],typeof M[L]=="object"&&(M[L].doenetAttributes&&(O[0].doenetAttributes=Object.assign({},M[L].doenetAttributes)),M[L].isAttribute&&(O[0].isAttribute=M[L].isAttribute))}k=[Er(k)]}return{pieces:O,propVariablesCopiedByPiece:k}},A=S(g,y.nDimensions),E=A.pieces;p=A.propVariablesCopiedByPiece;for(let I of E){I.attributes||(I.attributes={});let V=Ye({attributes:i.attributes,componentType:I.componentType,componentInfoObjects:o,compositeAttributesObj:s,compositeCreatesNewNamespace:m});Object.assign(I.attributes,V),i.stateValues.link!==!1&&(I.downstreamDependencies={[e.componentName]:[{dependencyType:"referenceShadow",compositeName:i.componentName,propVariable:h,ignorePrimaryStateVariable:!0}]})}if(f+=E.length,c.push(...E),E.length<w)for(let I=E.length;I<w;I++){f++,p[f]=[];let V,O=v[0],k;O&&O.length>0?typeof O[0]=="object"?(V=O[0].componentType,k=Object.assign({},O[0].doenetAttributes)):V=O[0]:(V=b.componentType,Array.isArray(V)&&(y.isArrayEntry?V=V[b.keyToIndex(y.arrayKeys[I])]:V=V[I]));let M=V+"|empty",L=Ci(M,a),G={componentType:V,uniqueIdentifier:L};k&&(G.doenetAttributes=k),c.push(G)}else if(E>w)throw Error(`Something went wrong when creating replacements for ${i.componentName} as we ended up with too many replacements`)}}else{if(y.hasVariableComponentType&&y.value,!y.componentType)return{serializedReplacements:[],propVariablesCopiedByReplacement:[]};f++,(p[f]=[]).push(h);let g=d.componentName+"|shadow|"+h,v=Ci(g,a),C=Ye({attributes:i.attributes,componentType:y.componentType,componentInfoObjects:o,compositeAttributesObj:s,compositeCreatesNewNamespace:m});if(i.stateValues.link!==!1)c.push({componentType:y.componentType,attributes:C,downstreamDependencies:{[d.componentName]:[{dependencyType:"referenceShadow",compositeName:i.componentName,propVariable:h}]},uniqueIdentifier:v});else{let w="value",S=o.allComponentClasses[y.componentType];S.primaryStateVariableForDefinition&&(w=S.primaryStateVariableForDefinition);let A=d.state[h];if(!A)console.warn(`Could not find variable ${h} in target ${e.componentName}.`);else{let E={componentType:y.componentType,attributes:C,state:{[w]:d.stateValues[h]},uniqueIdentifier:v};if(A.stateVariablesPrescribingAdditionalAttributes){let I={};for(let O in A.stateVariablesPrescribingAdditionalAttributes){let k=A.stateVariablesPrescribingAdditionalAttributes[O];I[O]=d.stateValues[k]}let V=Ye({attributes:I,componentType:y.componentType,componentInfoObjects:o});Object.assign(E.attributes,V)}c.push(E)}}}return{serializedReplacements:c,propVariablesCopiedByReplacement:p}}var ns=class extends Ee{static get stateVariablesShadowedForReference(){return["propName"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.disabled,delete e.modifyIndirectly,delete e.fixed,delete e.styleNumber,delete e.isResponse,e.assignNamesSkip={createPrimitiveOfType:"number"},e.prop={createPrimitiveOfType:"string"},e.componentType={createPrimitiveOfType:"string"},e.nComponents={createPrimitiveOfType:"number"},e.componentIndex={createComponentOfType:"number",createStateVariable:"componentIndex",defaultValue:null,public:!0},e.propIndex={createComponentOfType:"number",createStateVariable:"propIndex",defaultValue:null,public:!0},e}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.propName={returnDependencies:()=>({propName:{dependencyType:"attributePrimitive",attributeName:"prop"}}),definition:function({dependencyValues:e}){return{newValues:{propName:e.propName}}}},t.sourceComponents={stateVariablesDeterminingDependencies:["propName","componentIndex","propIndex"],returnDependencies:({stateValues:e})=>({children:{dependencyType:"child",childGroups:["anything"],variableNames:[e.propName],variablesOptional:!0,componentIndex:e.componentIndex,propIndex:e.propIndex,publicCaseInsensitiveVariableMatch:!0,useMappedVariableNames:!0}}),definition:({dependencyValues:e})=>({newValues:{sourceComponents:e.children}})},t.readyToExpandWhenResolved={returnDependencies:()=>({replacementClasses:{dependencyType:"stateVariable",variableName:"sourceComponents"},needsReplacementsUpdatedWhenStale:{dependencyType:"stateVariable",variableName:"needsReplacementsUpdatedWhenStale"}}),definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t.needsReplacementsUpdatedWhenStale={returnDependencies(){return{sourceComponents:{dependencyType:"stateVariable",variableName:"sourceComponents"}}},markStale:()=>({updateReplacements:!0}),definition:()=>({newValues:{needsReplacementsUpdatedWhenStale:!0}})},t}static createSerializedReplacements({component:t,components:e,workspace:r,componentInfoObjects:a,flags:s,publicCaseInsensitiveAliasSubstitutions:o}){let l=[],u=[],c=0;r.propVariablesCopiedBySource=[],r.uniqueIdentifiersUsedBySource={};let p=this.createAttributesObject({flags:s});for(let m=0;m<t.stateValues.sourceComponents.length;m++)if(t.stateValues.sourceComponents[m]!==void 0){let f=r.uniqueIdentifiersUsedBySource[m]=[],d=this.createReplacementForSource({component:t,sourceNum:m,components:e,numReplacementsSoFar:c,uniqueIdentifiersUsed:f,componentInfoObjects:a,compositeAttributesObj:p,publicCaseInsensitiveAliasSubstitutions:o});r.propVariablesCopiedBySource[m]=d.propVariablesCopiedByReplacement;let h=d.serializedReplacements;u[m]=h.length,c+=h.length,l.push(...h)}else u[m]=0;return r.numReplacementsBySource=u,r.sourceNames=t.stateValues.sourceComponents.map(m=>m.componentName),{replacements:l}}static createReplacementForSource({component:t,components:e,sourceNum:r,numReplacementsSoFar:a,uniqueIdentifiersUsed:s,componentInfoObjects:o,compositeAttributesObj:l,publicCaseInsensitiveAliasSubstitutions:u}){let c=zp({component:t,components:e,replacementSource:t.stateValues.sourceComponents[r],propName:t.stateValues.propName,uniqueIdentifiersUsed:s,compositeAttributesObj:l,componentInfoObjects:o,publicCaseInsensitiveAliasSubstitutions:u}),p=c.serializedReplacements,m=c.propVariablesCopiedByReplacement,f=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;return p=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:p,parentName:t.componentName,indOffset:a,parentCreatesNewNamespace:f,componentInfoObjects:o}).serializedComponents,{serializedReplacements:p,propVariablesCopiedByReplacement:m}}static calculateReplacementChanges({component:t,components:e,workspace:r,componentInfoObjects:a,flags:s,publicCaseInsensitiveAliasSubstitutions:o}){let l=[],u=0,c=[],p=[],m=this.createAttributesObject({flags:s}),f=Math.max(t.stateValues.sourceComponents.length,r.numReplacementsBySource.length),d=!1;for(let h=0;h<f;h++){let y=t.stateValues.sourceComponents[h];if(y===void 0){if(r.numReplacementsBySource[h]>0){if(!d){let I=r.numReplacementsBySource.slice(h).reduce((V,O)=>V+O,0);if(I>0){let V={changeType:"delete",changeTopLevelReplacements:!0,firstReplacementInd:u,numberReplacementsToDelete:I};l.push(V)}d=!0,r.numReplacementsBySource.slice(h).forEach((V,O)=>r.numReplacementsBySource[O]=0)}r.uniqueIdentifiersUsedBySource[h]=[]}c[h]=0,p.push([]);continue}let b=r.sourceNames[h],g=b===void 0||y.componentName!==b||d;if(!g){for(let I=0;I<r.numReplacementsBySource[h];I++)if(!t.replacements[u+I]){g=!0;break}}if(g){let I=0;b!==void 0&&(I=r.numReplacementsBySource[h]);let V=I;d&&(V=0);let O=r.uniqueIdentifiersUsedBySource[h]=[],k=this.recreateReplacements({component:t,sourceNum:h,numReplacementsSoFar:u,numReplacementsToDelete:V,components:e,uniqueIdentifiersUsed:O,componentInfoObjects:a,compositeAttributesObj:m,publicCaseInsensitiveAliasSubstitutions:o});u+=k.numReplacements,c[h]=k.numReplacements,p[h]=k.propVariablesCopiedByReplacement;let M=k.replacementInstruction;if(!d&&k.numReplacements!==I){let L=r.numReplacementsBySource.slice(h).reduce((G,K)=>G+K,0);M.numberReplacementsToReplace=L,d=!0,r.numReplacementsBySource.slice(h).forEach((G,K)=>r.numReplacementsBySource[K]=0)}l.push(M);continue}let v=r.uniqueIdentifiersUsedBySource[h]=[],C=this.createReplacementForSource({component:t,sourceNum:h,components:e,numReplacementsSoFar:u,uniqueIdentifiersUsed:v,componentInfoObjects:a,compositeAttributesObj:m,publicCaseInsensitiveAliasSubstitutions:o}),w=C.propVariablesCopiedByReplacement,S=C.serializedReplacements,A=S.length,E=r.numReplacementsBySource[h];if(A!==E){let I=r.numReplacementsBySource.slice(h).reduce((O,k)=>O+k,0),V={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:u,numberReplacementsToReplace:I,serializedReplacements:S,assignNamesOffset:u};l.push(V),d=!0,r.numReplacementsBySource.slice(h).forEach((O,k)=>r.numReplacementsBySource[k]=0)}else for(let I=0;I<A;I++)if(w[I].length!==r.propVariablesCopiedBySource[h][I].length||r.propVariablesCopiedBySource[h][I].some((V,O)=>V!==w[I][O])){let V={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:u+I,numberReplacementsToReplace:1,serializedReplacements:[S[I]],assignNamesOffset:u+I};l.push(V)}u+=A,c[h]=A,p[h]=w}return r.numReplacementsBySource=c,r.sourceNames=t.stateValues.sourceComponents.map(h=>h.componentName),r.propVariablesCopiedBySource=p,l}static recreateReplacements({component:t,sourceNum:e,numReplacementsSoFar:r,numReplacementsToDelete:a,uniqueIdentifiersUsed:s,components:o,componentInfoObjects:l,compositeAttributesObj:u,publicCaseInsensitiveAliasSubstitutions:c}){let p=this.createReplacementForSource({component:t,sourceNum:e,numReplacementsSoFar:r,components:o,uniqueIdentifiersUsed:s,componentInfoObjects:l,compositeAttributesObj:u,publicCaseInsensitiveAliasSubstitutions:c}),m=p.propVariablesCopiedByReplacement,f=p.serializedReplacements,d={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:r,numberReplacementsToReplace:a,serializedReplacements:f,assignNamesOffset:r};return{numReplacements:f.length,propVariablesCopiedByReplacement:m,replacementInstruction:d}}};T(ns,"componentType","extract"),T(ns,"assignNamesToReplacements",!0),T(ns,"acceptAnyAttribute",!0),T(ns,"stateVariableToEvaluateAfterReplacements","needsReplacementsUpdatedWhenStale");var ia=class extends Ee{static get stateVariablesShadowedForReference(){return["targetComponent","propName","componentTypesToCollect"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.disabled,delete e.modifyIndirectly,delete e.fixed,delete e.styleNumber,delete e.isResponse,e.assignNamesSkip={createPrimitiveOfType:"number"},e.prop={createPrimitiveOfType:"string"},e.maximumNumber={createComponentOfType:"number",createStateVariable:"maximumNumber",defaultValue:null,public:!0},e.componentIndex={createComponentOfType:"number",createStateVariable:"componentIndex",defaultValue:null,public:!0},e.propIndex={createComponentOfType:"number",createStateVariable:"propIndex",defaultValue:null,public:!0},e.targetAttributesToIgnore={createComponentOfType:"textList",createStateVariable:"targetAttributesToIgnore",defaultValue:[],public:!0},e.componentTypes={createComponentOfType:"textList"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.targetComponent={returnDependencies:()=>({targetComponent:{dependencyType:"targetComponent"}}),definition:function({dependencyValues:e}){return{newValues:{targetComponent:e.targetComponent}}}},t.targetInactive={stateVariablesDeterminingDependencies:["targetComponent"],returnDependencies({stateValues:e}){return e.targetComponent?{targetIsInactiveCompositeReplacement:{dependencyType:"stateVariable",componentName:e.targetComponent.componentName,variableName:"isInactiveCompositeReplacement"}}:{}},definition:function({dependencyValues:e}){return{newValues:{targetInactive:Boolean(e.targetIsInactiveCompositeReplacement)}}}},t.targetName={returnDependencies:()=>({targetComponent:{dependencyType:"stateVariable",variableName:"targetComponent"}}),definition:function({dependencyValues:e}){return e.targetComponent===null?(console.warn("No copy target"),{newValues:{targetName:""}}):{newValues:{targetName:e.targetComponent.componentName}}}},t.propName={returnDependencies:()=>({propName:{dependencyType:"attributePrimitive",attributeName:"prop"}}),definition:function({dependencyValues:e}){return{newValues:{propName:e.propName}}}},t.componentTypesToCollect={additionalStateVariablesDefined:["componentClassesToCollect"],returnDependencies:()=>({componentTypesAttr:{dependencyType:"attributeComponent",attributeName:"componentTypes",variableNames:["texts"]}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=[],s=[];if(e.componentTypesAttr!==null)for(let o of e.componentTypesAttr.stateValues.texts){let l=r.componentTypeLowerCaseMapping[o.toLowerCase()],u=r.allComponentClasses[l];if(u)a.push(l),s.push(u);else{let c="Cannot collect component type "+o+". Component type not found.";console.warn(c)}}return{newValues:{componentTypesToCollect:a,componentClassesToCollect:s}}}},t.collectedComponents={stateVariablesDeterminingDependencies:["componentTypesToCollect","targetName","propName","componentIndex","propIndex"],returnDependencies:function({stateValues:e}){if(!e.targetName)return{};let r={dependencyType:"descendant",ancestorName:e.targetName,componentTypes:e.componentTypesToCollect,useReplacementsForComposites:!0,includeNonActiveChildren:!0,recurseToMatchedChildren:!1,componentIndex:e.componentIndex};return e.propName&&(r.variableNames=[e.propName],r.variablesOptional=!0,r.componentIndex=e.componentIndex,r.propIndex=e.propIndex,r.publicCaseInsensitiveVariableMatch=!0,r.useMappedVariableNames=!0),{descendants:r,maximumNumber:{dependencyType:"stateVariable",variableName:"maximumNumber"}}},definition:function({dependencyValues:e}){let r=e.descendants;if(r||(r=[]),e.maximumNumber!==null&&r.length>e.maximumNumber){let a=Math.max(0,Math.floor(e.maximumNumber));r=r.slice(0,a)}return{newValues:{collectedComponents:r}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({collectedComponents:{dependencyType:"stateVariable",variableName:"collectedComponents"},needsReplacementsUpdatedWhenStale:{dependencyType:"stateVariable",variableName:"needsReplacementsUpdatedWhenStale"}}),definition:()=>({newValues:{readyToExpandWhenResolved:!0}})},t.needsReplacementsUpdatedWhenStale={returnDependencies(){return{collectedComponents:{dependencyType:"stateVariable",variableName:"collectedComponents"}}},markStale(){return{updateReplacements:!0}},definition(){return{newValues:{needsReplacementsUpdatedWhenStale:!0}}}},t}static createSerializedReplacements({component:t,components:e,workspace:r,componentInfoObjects:a,nComponentsForSource:s,publicCaseInsensitiveAliasSubstitutions:o}){if(!t.stateValues.targetComponent)return{replacements:[]};let l=[],u=[],c=0,p=[];r.propVariablesCopiedByCollected=[],r.uniqueIdentifiersUsedByCollected={};let m=this.createAttributesObject({});for(let f=0;f<t.stateValues.collectedComponents.length;f++)if(t.stateValues.collectedComponents[f]){let d=r.uniqueIdentifiersUsedByCollected[f]=[],h=this.createReplacementForCollected({component:t,collectedNum:f,components:e,numReplacementsSoFar:c,uniqueIdentifiersUsed:d,componentInfoObjects:a,compositeAttributesObj:m,nComponentsForSource:s,publicCaseInsensitiveAliasSubstitutions:o});r.propVariablesCopiedByCollected[f]=h.propVariablesCopiedByReplacement;let y=h.serializedReplacements;u[f]=y.length,c+=y.length,l.push(...y),p[f]=y.map(b=>b.componentName)}else u[f]=0,p[f]=[],r.propVariablesCopiedByCollected[f]=[];return r.numReplacementsByCollected=u,r.collectedNames=t.stateValues.collectedComponents.map(f=>f.componentName),r.replacementNamesByCollected=p,{replacements:l}}static createReplacementForCollected({component:t,components:e,collectedNum:r,numReplacementsSoFar:a,uniqueIdentifiersUsed:s,componentInfoObjects:o,compositeAttributesObj:l,nComponentsForSource:u,publicCaseInsensitiveAliasSubstitutions:c}){let p=t.stateValues.collectedComponents[r],m=p.componentName,f=e[m],d=[],h=[];if(!f)return{serializedReplacements:d,propVariablesCopiedByReplacement:h};let y=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;if(t.stateValues.propName){let g=zp({component:t,components:e,replacementSource:p,propName:t.stateValues.propName,uniqueIdentifiersUsed:s,compositeAttributesObj:l,componentInfoObjects:o,nComponentsForSource:u,publicCaseInsensitiveAliasSubstitutions:c});d=g.serializedReplacements,h=g.propVariablesCopiedByReplacement}else{let g=[f.serialize({forLink:!0})];d=Rr({serializedComponents:g,componentName:t.componentName,uniqueIdentifiersUsed:s,identifierPrefix:r+"|"});for(let v of d){v.attributes||(v.attributes={});let C=Ye({attributes:t.attributes,componentType:v.componentType,componentInfoObjects:o,compositeAttributesObj:l,compositeCreatesNewNamespace:y});Object.assign(v.attributes,C)}}return d=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:d,parentName:t.componentName,indOffset:a,parentCreatesNewNamespace:y,componentInfoObjects:o}).serializedComponents,{serializedReplacements:d,propVariablesCopiedByReplacement:h}}static calculateReplacementChanges({component:t,componentChanges:e,components:r,workspace:a,componentInfoObjects:s,nComponentsForSource:o,publicCaseInsensitiveAliasSubstitutions:l}){let u=0;for(let g=0;g<a.numReplacementsByCollected.length;g++){let v=[];for(let[C,w]of a.replacementNamesByCollected[g].entries())!t.replacements[u]||t.replacements[u].componentName!==w?v.push(C):u++;for(let C of v.reverse())a.replacementNamesByCollected[g].splice(C,1),a.propVariablesCopiedByCollected[g].splice(C,1);a.numReplacementsByCollected[g]-=v.length}let c=[],p=0,m=[],f=[],d=[],h=Math.max(t.stateValues.collectedComponents.length,a.numReplacementsByCollected.length),y=!1,b=this.createAttributesObject({});for(let g=0;g<h;g++){let v=t.stateValues.collectedComponents[g];if(v===void 0){if(a.numReplacementsByCollected[g]>0){if(!y){let O=a.numReplacementsByCollected.slice(g).reduce((k,M)=>k+M,0);if(O>0){let k={changeType:"delete",changeTopLevelReplacements:!0,firstReplacementInd:p,numberReplacementsToDelete:O};c.push(k)}y=!0,a.numReplacementsByCollected.slice(g).forEach((k,M)=>a.numReplacementsByCollected[M]=0)}a.uniqueIdentifiersUsedByCollected[g]=[]}m[g]=0,f.push([]),d.push([]);continue}let C=a.collectedNames[g];if(C===void 0||v.componentName!==C||y){let O=0;C!==void 0&&(O=a.numReplacementsByCollected[g]);let k=O;y&&(k=0);let M=a.uniqueIdentifiersUsedByCollected[g]=[],L=this.recreateReplacements({component:t,collectedNum:g,numReplacementsSoFar:p,numReplacementsToDelete:k,components:r,uniqueIdentifiersUsed:M,componentInfoObjects:s,compositeAttributesObj:b,nComponentsForSource:o,publicCaseInsensitiveAliasSubstitutions:l});p+=L.numReplacements,m[g]=L.numReplacements,f[g]=L.propVariablesCopiedByReplacement;let G=L.replacementInstruction;if(d[g]=G.serializedReplacements.map(K=>K.componentName),!y&&L.numReplacements!==O){let K=a.numReplacementsByCollected.slice(g).reduce((B,_)=>B+_,0);G.numberReplacementsToReplace=K,y=!0,a.numReplacementsByCollected.slice(g).forEach((B,_)=>a.numReplacementsByCollected[_]=0)}c.push(G);continue}if(!t.stateValues.propName){p+=a.numReplacementsByCollected[g],m[g]=a.numReplacementsByCollected[g],d[g]=a.replacementNamesByCollected[g],f[g]=[];continue}let w=a.uniqueIdentifiersUsedByCollected[g]=[],S=this.createReplacementForCollected({component:t,collectedNum:g,components:r,numReplacementsSoFar:p,uniqueIdentifiersUsed:w,componentInfoObjects:s,compositeAttributesObj:b,nComponentsForSource:o,publicCaseInsensitiveAliasSubstitutions:l}),A=S.propVariablesCopiedByReplacement,E=S.serializedReplacements,I=E.length,V=a.numReplacementsByCollected[g];if(I!==V){let O=a.numReplacementsByCollected.slice(g).reduce((M,L)=>M+L,0),k={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:p,numberReplacementsToReplace:O,serializedReplacements:E,assignNamesOffset:p};c.push(k),y=!0,a.numReplacementsByCollected.slice(g).forEach((M,L)=>a.numReplacementsByCollected[L]=0)}else for(let O=0;O<I;O++)if(A[O].length!==a.propVariablesCopiedByCollected[g][O].length||a.propVariablesCopiedByCollected[g][O].some((k,M)=>k!==A[O][M])){let k={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:p+O,numberReplacementsToReplace:1,serializedReplacements:[E[O]],assignNamesOffset:p+O};c.push(k)}p+=I,m[g]=I,f[g]=A,d[g]=E.map(O=>O.componentName)}return a.numReplacementsByCollected=m,a.collectedNames=t.stateValues.collectedComponents.map(g=>g.componentName),a.propVariablesCopiedByCollected=f,a.replacementNamesByCollected=d,c}static recreateReplacements({component:t,collectedNum:e,numReplacementsSoFar:r,numReplacementsToDelete:a,uniqueIdentifiersUsed:s,components:o,componentInfoObjects:l,compositeAttributesObj:u,nComponentsForSource:c,publicCaseInsensitiveAliasSubstitutions:p}){let m=this.createReplacementForCollected({component:t,collectedNum:e,components:o,numReplacementsSoFar:r,uniqueIdentifiersUsed:s,componentInfoObjects:l,compositeAttributesObj:u,nComponentsForSource:c,publicCaseInsensitiveAliasSubstitutions:p}),f=m.propVariablesCopiedByReplacement,d=m.serializedReplacements,h={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:r,numberReplacementsToReplace:a,serializedReplacements:d,assignNamesOffset:r};return{numReplacements:d.length,propVariablesCopiedByReplacement:f,replacementInstruction:h}}};T(ia,"componentType","collect"),T(ia,"assignNamesToReplacements",!0),T(ia,"acceptTname",!0),T(ia,"acceptAnyAttribute",!0),T(ia,"stateVariableToEvaluateAfterReplacements","needsReplacementsUpdatedWhenStale");var lo=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.textType={createComponentOfType:"text",createStateVariable:"textType",defaultValue:"type-global",public:!0},e.uri={createPrimitiveOfType:"string",createStateVariable:"uri",defaultValue:null,public:!0,forRenderer:!0},e.createButton={createComponentOfType:"boolean",createStateVariable:"createButton",defaultValue:!1,forRenderer:!0},e}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.targetComponent={returnDependencies:()=>({targetComponent:{dependencyType:"targetComponent"}}),definition:function({dependencyValues:e}){return{newValues:{targetComponent:e.targetComponent}}}},t.targetInactive={stateVariablesDeterminingDependencies:["targetComponent"],returnDependencies({stateValues:e}){return e.targetComponent?{targetIsInactiveCompositeReplacement:{dependencyType:"stateVariable",componentName:e.targetComponent.componentName,variableName:"isInactiveCompositeReplacement"}}:{}},definition:function({dependencyValues:e}){return{newValues:{targetInactive:Boolean(e.targetIsInactiveCompositeReplacement)}}}},t.targetName={forRenderer:!0,returnDependencies:()=>({targetComponent:{dependencyType:"stateVariable",variableName:"targetComponent"},uri:{dependencyType:"stateVariable",variableName:"uri"},targetInactive:{dependencyType:"stateVariable",variableName:"targetInactive"}}),definition:function({dependencyValues:e}){return e.targetComponent===null||e.targetInactive?{newValues:{targetName:""}}:e.uri!==null?(console.warn("Haven't implemented ref with uri and tname, ignoring tname."),{newValues:{targetName:""}}):{newValues:{targetName:e.targetComponent.componentName}}}},t.contentId={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"doenetId",forRenderer:!0}],returnDependencies:()=>({uri:{dependencyType:"stateVariable",variableName:"uri"}}),definition:function({dependencyValues:e}){if(!e.uri||e.uri.substring(0,7).toLowerCase()!=="doenet:")return{newValues:{contentId:null,doenetId:null}};let r=null,a=null,s=e.uri.match(/[:&]contentid=([^&]+)/i);return s&&(r=s[1]),s=e.uri.match(/[:&]doenetid=([^&]+)/i),s&&(a=s[1]),{newValues:{contentId:r,doenetId:a}}}},t.linkText={public:!0,componentType:"text",forRenderer:!0,stateVariablesDeterminingDependencies:["targetName"],returnDependencies({stateValues:e}){let r={inlineChildren:{dependencyType:"child",childGroups:["anything"],variableNames:["text"],variablesOptional:!0},uri:{dependencyType:"stateVariable",variableName:"uri"},targetInactive:{dependencyType:"stateVariable",variableName:"targetInactive"}};return e.targetName&&(r.equationTag={dependencyType:"stateVariable",componentName:e.targetName,variableName:"equationTag",variablesOptional:!0},r.title={dependencyType:"stateVariable",componentName:e.targetName,variableName:"title",variablesOptional:!0}),r},definition:function({dependencyValues:e}){let r="";if(e.inlineChildren.length===0)e.uri!==null?r=e.uri:e.targetInactive||(e.title!==null?r=e.title:e.equationTag!==null&&(r="("+e.equationTag+")"));else for(let a of e.inlineChildren)typeof a.stateValues.text=="string"&&(r+=a.stateValues.text);return r||(r="???"),{newValues:{linkText:r}}}},t}};T(lo,"componentType","ref"),T(lo,"renderChildren",!0),T(lo,"acceptTname",!0);import is from"math-expressions";var Qn=class extends Qe{static get stateVariablesShadowedForReference(){return["xs","nDimensions"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.x={createComponentOfType:"math"},e.y={createComponentOfType:"math"},e.z={createComponentOfType:"math"},e.xs={createComponentOfType:"mathList"},e.coords={createComponentOfType:"coords"},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.labelPosition={createComponentOfType:"text",createStateVariable:"labelPosition",defaultValue:"upperright",public:!0,forRenderer:!0,toLowerCase:!0,validValues:["upperright","upperleft","lowerright","lowerleft"]},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let s=Ja({childrenToComponentFunction:m=>({componentType:"math",children:m}),mustStripOffOuterParentheses:!0}),o=r.map(m=>m.componentType),l=o.indexOf("string"),u=o.lastIndexOf("string");if(l===-1){let m=r.filter(f=>f.doenetAttributes&&f.doenetAttributes.createdFromMacro);if(m.length===1){let f=m[0],d=r.indexOf(f),h=[...r.slice(0,d),...r.slice(d+1)];return{success:!0,newAttributes:{coords:{component:{componentType:"math",children:m}}},newChildren:h}}else return{success:!1}}let c=[...r.slice(0,l),...r.slice(u+1)];r=r.slice(l,u+1);let p=s({matchedChildren:r});return!p.success&&r.length===1?{success:!0,newAttributes:{x:{component:{componentType:"math",children:r}}},newChildren:c}:p.success?{success:!0,newAttributes:{xs:{component:{componentType:"mathList",children:p.newChildren,skipSugar:!0}}},newChildren:c}:{success:!1}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"points",componentTypes:["point"]},{group:"constraints",componentTypes:["constraints"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){return{newValues:{styleDescription:e.selectedStyle.markerColor}}}},t.styleDescriptionWithNoun={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r=e.selectedStyle.markerColor;return e.selectedStyle.markerStyle==="circle"?r+=" point":r+=` ${e.selectedStyle.markerStyle}`,{newValues:{styleDescriptionWithNoun:r}}}},t.coordsShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{coordsShadow:{variablesToCheck:["coords","coordsShadow"]}}}),inverseDefinition:function({desiredStateVariableValues:e,stateValues:r,workspace:a}){let s=kx({desiredVector:e.coordsShadow,currentVector:r.coordsShadow,workspace:a,workspaceKey:"desiredCoords"});return{success:!0,instructions:[{setStateVariable:"coordsShadow",value:s}]}}},t.nDimensions={public:!0,componentType:"number",returnDependencies:()=>({coordsShadow:{dependencyType:"stateVariable",variableName:"coordsShadow"},coords:{dependencyType:"attributeComponent",attributeName:"coords",variableNames:["value"]},x:{dependencyType:"attributeComponent",attributeName:"x"},y:{dependencyType:"attributeComponent",attributeName:"y"},z:{dependencyType:"attributeComponent",attributeName:"z"},xs:{dependencyType:"attributeComponent",attributeName:"xs",variableNames:["nComponents"]},pointChild:{dependencyType:"child",childGroups:["points"],variableNames:["nDimensions"]}}),definition:function({dependencyValues:e}){let r=!1,a,s;if(e.coords!==null?(r=!0,a=e.coords.stateValues.value):e.coordsShadow&&(r=!0,a=e.coordsShadow),r){let o=a.tree;return Array.isArray(o)&&["tuple","vector"].includes(o[0])?s=o.length-1:s=1,{newValues:{nDimensions:s},checkForActualChange:{nDimensions:!0}}}else{if(e.xs!==null)return{newValues:{nDimensions:e.xs.stateValues.nComponents}};if(e.pointChild.length>0)return{newValues:{nDimensions:e.pointChild[0].stateValues.nDimensions}};e.z!==null?s=3:e.y!==null?s=2:e.x!==null?s=1:s=0}return{newValues:{nDimensions:s},checkForActualChange:{nDimensions:!0}}}},t.arrayVariableForConstraints={returnDependencies:()=>({}),definition:()=>({newValues:{arrayVariableForConstraints:"unconstrainedXs"}})},t.arrayEntryPrefixForConstraints={returnDependencies:()=>({}),definition:()=>({newValues:{arrayEntryPrefixForConstraints:"unconstrainedX"}})},t.nDimensionsForConstraints={isAlias:!0,targetVariableName:"nDimensions"},t.unconstrainedXs={isArray:!0,entryPrefixes:["unconstrainedX"],defaultEntryValue:is.fromAst(0),returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={coordsShadow:{dependencyType:"stateVariable",variableName:"coordsShadow"},coords:{dependencyType:"attributeComponent",attributeName:"coords",variableNames:["value"]}},a={};for(let s of e){let o=Number(s)+1;a[s]={xs:{dependencyType:"attributeComponent",attributeName:"xs",variableNames:["math"+o]},pointChild:{dependencyType:"child",childGroups:["points"],variableNames:["x"+o]}},s==="0"?a[s].component={dependencyType:"attributeComponent",attributeName:"x",variableNames:["value"]}:s==="1"?a[s].component={dependencyType:"attributeComponent",attributeName:"y",variableNames:["value"]}:s==="2"&&(a[s].component={dependencyType:"attributeComponent",attributeName:"z",variableNames:["value"]})}return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={},o={},l=!1,u;if(e.coords!==null?(l=!0,u=e.coords.stateValues.value):e.coordsShadow&&(l=!0,u=e.coordsShadow),l){let p=u.tree;if(Array.isArray(p)&&["tuple","vector"].includes(p[0]))for(let m of a){let f=Number(m);(f>=0||f<p.length-1)&&(u.tree[f+1]===void 0?s[m]=is.fromAst("\uFF3F"):s[m]=u.get_component(f).simplify())}else a.includes("0")&&(s[0]=u.simplify())}else for(let p of a){let m=Number(p)+1,f=r[p].xs;if(f!==null)s[p]=f.stateValues["math"+m].simplify();else{let d=r[p].pointChild;if(d.length>0)s[p]=d[0].stateValues["x"+m];else{let h=r[p].component;h!==null?s[p]=h.stateValues.value.simplify():o[p]={variablesToCheck:[{variableName:"xs",arrayIndex:p},{variableName:"coords",mathComponentIndex:p}]}}}}let c={};return Object.keys(s).length>0&&(c.newValues={unconstrainedXs:s}),Object.keys(o).length>0&&(c.useEssentialOrDefaultValue={unconstrainedXs:o}),c},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[],u=!1,c;if(r.coords!==null?(u=!0,c="coords"):r.coordsShadow!==null&&(u=!0,c="coordsShadow"),u){let p;if(o[0]===1)p=Ze(e.unconstrainedXs[0]);else{let f=Array(o[0]+1);f[0]="vector";for(let d in e.unconstrainedXs){let h=e.unconstrainedXs[d];f[Number(d)+1]=h instanceof is.class?h.tree:h}p=is.fromAst(f)}let m={setDependency:c,desiredValue:p};return c==="coords"&&(m.childIndex=0,m.variableIndex=0),l.push(m),{success:!0,instructions:l}}else{for(let p of Object.keys(e.unconstrainedXs).reverse()){if(!a[p])continue;a[p].xs!==null?l.push({setDependency:s[p].xs,desiredValue:Ze(e.unconstrainedXs[p]),childIndex:0,variableIndex:0}):a[p].pointChild.length>0?l.push({setDependency:s[p].pointChild,desiredValue:Ze(e.unconstrainedXs[p]),childIndex:0,variableIndex:0}):a[p].component!==null?l.push({setDependency:s[p].component,desiredValue:e.unconstrainedXs[p],childIndex:0,variableIndex:0}):l.push({setStateVariable:"unconstrainedXs",value:{[p]:Ze(e.unconstrainedXs[p])}})}return{success:!0,instructions:l}}}},t.xs={public:!0,componentType:"math",isArray:!0,entryPrefixes:["x"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1,o={};o.unconstrainedX={dependencyType:"stateVariable",variableName:`unconstrainedX${s}`},o.constraintsChild={dependencyType:"child",childGroups:["constraints"],variableNames:[`constraintResult${s}`]},r[a]=o}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)if(e[s].constraintsChild.length>0){let o=Number(s)+1;a[s]=Ze(e[s].constraintsChild[0].stateValues["constraintResult"+o])}else a[s]=Ze(e[s].unconstrainedX);return r.length>0?{newValues:{xs:a}}:{}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,initialChange:s,stateValues:o}){if(s&&!o.draggable)return{success:!1};let l=[];for(let u of Object.keys(e.xs).reverse())!r[u]||(r[u].constraintsChild.length>0?l.push({setDependency:a[u].constraintsChild,desiredValue:e.xs[u],childIndex:0,variableIndex:0}):l.push({setDependency:a[u].unconstrainedX,desiredValue:e.xs[u]}));return{success:!0,instructions:l}}},t.x={isAlias:!0,targetVariableName:"x1"},t.y={isAlias:!0,targetVariableName:"x2"},t.z={isAlias:!0,targetVariableName:"x3"},t.coords={public:!0,componentType:"coords",returnDependencies:()=>({xs:{dependencyType:"stateVariable",variableName:"xs"}}),definition:function({dependencyValues:e}){let r=[];for(let a of e.xs)a?r.push(a.tree):r.push("\uFF3F");return r.length>1?r=["vector",...r]:r.length===1?r=r[0]:r="\uFF3F",{newValues:{coords:is.fromAst(r)}}},inverseDefinition:function({desiredStateVariableValues:e,stateValues:r,initialChange:a}){if(a&&!r.draggable)return{success:!1};let s=[],o={},l=e.coords.tree;if(!(Array.isArray(l)&&["tuple","vector"].includes(l[0])))o[0]=e.coords;else for(let u=0;u<l.length-1;u++){let c=e.coords.get_component(u);c.tree!==void 0&&(o[u]=c)}return s.push({setDependency:"xs",desiredValue:o}),{success:!0,instructions:s}}},t.coordsForDisplay={forRenderer:!0,returnDependencies:()=>({coords:{dependencyType:"stateVariable",variableName:"coords"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"}}),definition:function({dependencyValues:e,usedDefault:r}){return{newValues:{coordsForDisplay:dr({value:e.coords,dependencyValues:e,usedDefault:r})}}}},t.value={isAlias:!0,targetVariableName:"coords"},t.constraintUsed={public:!0,componentType:"boolean",returnDependencies:()=>({constraintsChild:{dependencyType:"child",childGroups:["constraints"],variableNames:["constraintUsed"]}}),definition:function({dependencyValues:e}){return e.constraintsChild.length===0?{newValues:{constraintUsed:!1}}:{newValues:{constraintUsed:e.constraintsChild[0].stateValues.constraintUsed}}}},t.numericalXs={public:!0,componentType:"number",isArray:!0,entryPrefixes:["numericalX"],forRenderer:!0,returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1;r[a]={x:{dependencyType:"stateVariable",variableName:`x${s}`}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].x;o?(o=e[s].x.evaluate_to_constant(),Number.isFinite(o)?a[s]=o:a[s]=NaN):a[s]=NaN}return{newValues:{numericalXs:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,initialChange:a,stateValues:s}){if(a&&!s.draggable)return{success:!1};let o=[];for(let l in e.numericalXs)!dependencyValuesByKey[l]||o.push({setDependency:r[l].xs,desiredValue:e.numericalXs[l]});return{success:!0,instructions:o}}},t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalXs:{dependencyType:"stateVariable",variableName:"numericalXs"}}),definition:({dependencyValues:e})=>({newValues:{nearestPoint:function(){let r={};for(let a=1;a<=e.nDimensions;a++){let s=e.numericalXs[a-1];if(!Number.isFinite(s))return{};r["x"+a]=s}return r}}})},t}movePoint({x:t,y:e,z:r,transient:a}){let s={};return t!==void 0&&(s[0]=is.fromAst(t)),e!==void 0&&(s[1]=is.fromAst(e)),r!==void 0&&(s[2]=is.fromAst(r)),a?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"xs",value:s}],transient:a}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"xs",value:s}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{x:t,y:e,z:r}}})}finalizePointPosition(){return this.actions.movePoint({x:this.stateValues.numericalXs[0],y:this.stateValues.numericalXs[1],z:this.stateValues.numericalXs[2],transient:!1})}actions={movePoint:this.movePoint.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizePointPosition:this.finalizePointPosition.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(Qn,"componentType","point"),T(Qn,"useChildrenForReference",!1),T(Qn,"primaryStateVariableForDefinition","coordsShadow"),T(Qn,"stateVariableForAttributeValue","coords"),T(Qn,"adapters",["coords"]);var Zl=class extends rt{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.createVectors={createComponentOfType:"boolean",createStateVariable:"createVectors",defaultValue:!0,public:!0},e}};T(Zl,"componentType","coords"),T(Zl,"rendererType","math");import Ce from"math-expressions";var aa=class extends Qe{actions={moveLine:this.moveLine.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizeLinePosition:this.finalizeLinePosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["points","variables","nDimensions","nPointsPrescribed","basedOnSlope","equation","equationIdentity","coeff0","coeffvar1","coeffvar2"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.equation={createComponentOfType:"math"},e.through={createComponentOfType:"_pointListComponent"},e.slope={createComponentOfType:"number"},e.variables={createComponentOfType:"variables"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){return r.every(a=>a.componentType==="string"||a.doenetAttributes&&a.doenetAttributes.createdFromMacro)?{success:!0,newAttributes:{equation:{component:{componentType:"math",children:r}}}}:{success:!1}};return t.push({replacementFunction:e}),t}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r="";return e.selectedStyle.lineWidth>=4?r+="thick ":e.selectedStyle.lineWidth<=1&&(r+="thin "),e.selectedStyle.lineStyle==="dashed"?r+="dashed ":e.selectedStyle.lineStyle==="dotted"&&(r+="dotted "),r+=e.selectedStyle.lineColor,{newValues:{styleDescription:r}}}},t.nDimensions={public:!0,componentType:"number",stateVariablesDeterminingDependencies:["equationIdentity"],returnDependencies:function({stateValues:e}){return e.equationIdentity===null?{through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nDimensions"]}}:{equation:{dependencyType:"attributeComponent",attributeName:"equation"}}},definition:function({dependencyValues:e,changes:r}){return e.equation?r.equation&&r.equation.componentIdentitiesChanged?{newValues:{nDimensions:2},checkForActualChange:{nDimensions:!0}}:{noChanges:["nDimensions"]}:e.through?{newValues:{nDimensions:e.through.stateValues.nDimensions},checkForActualChange:{nDimensions:!0}}:{newValues:{nDimensions:2}}}},t.nPointsPrescribed={returnDependencies:()=>({throughAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nPoints"]}}),definition:function({dependencyValues:e}){return e.throughAttr===null?{newValues:{nPointsPrescribed:0}}:{newValues:{nPointsPrescribed:e.throughAttr.stateValues.nPoints}}}},t.basedOnSlope={returnDependencies:()=>({slopeAttr:{dependencyType:"attributeComponent",attributeName:"slope"},nPointsPrescribed:{dependencyType:"stateVariable",variableName:"nPointsPrescribed"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),definition({dependencyValues:e}){return{newValues:{basedOnSlope:e.nPointsPrescribed<2&&e.slopeAttr!==null&&e.nDimensions===2}}}},t.dForSlope={defaultValue:1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{dForSlope:{variablesToCheck:["dForSlope"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"dForSlope",value:e.dForSlope}]}}},t.essentialPoint1x={defaultValue:0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{essentialPoint1x:{variablesToCheck:["essentialPoint1x"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"essentialPoint1x",value:e.essentialPoint1x}]}}},t.essentialPoint1y={defaultValue:0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{essentialPoint1y:{variablesToCheck:["essentialPoint1y"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"essentialPoint1y",value:e.essentialPoint1y}]}}},t.variables={isArray:!0,public:!0,componentType:"variable",entryPrefixes:["var"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey(){return{globalDependencies:{variables:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["variables"]}}}},arrayDefinitionByKey({globalDependencyValues:e,arraySize:r}){let a=[];return e.variables!==null&&(a=e.variables.stateValues.variables),{newValues:{variables:vn(r[0],a)}}}},t.equationIdentity={returnDependencies:()=>({equation:{dependencyType:"attributeComponent",attributeName:"equation"}}),definition:function({dependencyValues:e}){return e.equation!==null?{newValues:{equationIdentity:e.equation}}:{newValues:{equationIdentity:null}}}},t.points={public:!0,componentType:"math",isArray:!0,nDimensions:2,entryPrefixes:["pointX","point"],returnWrappingComponents(e){return e==="pointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="pointX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},stateVariablesDeterminingDependencies:["equationIdentity","nPointsPrescribed","basedOnSlope"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[2,e.nDimensions]},returnArrayDependenciesByKey({stateValues:e,arrayKeys:r}){if(e.equationIdentity===null){let a={};for(let o of r){let[l,u]=o.split(","),c=Number(l)+1+"_"+(Number(u)+1);a[o]={through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["pointX"+c]}},l==="1"&&(e.nPointsPrescribed===1&&(a[o].point1={dependencyType:"attributeComponent",attributeName:"through",variableNames:["point1"]}),e.basedOnSlope&&(a[o].dForSlope={dependencyType:"stateVariable",variableName:"dForSlope"},a[o].slopeAttr={dependencyType:"attributeComponent",attributeName:"slope",variableNames:["value"]})),e.nPointsPrescribed===0&&e.basedOnSlope&&(u==="0"?a[o].essentialPoint1coord={dependencyType:"stateVariable",variableName:"essentialPoint1x"}:a[o].essentialPoint1coord={dependencyType:"stateVariable",variableName:"essentialPoint1y"})}return{dependenciesByKey:a,globalDependencies:{nPointsPrescribed:{dependencyType:"stateVariable",variableName:"nPointsPrescribed"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},basedOnSlope:{dependencyType:"stateVariable",variableName:"basedOnSlope"}}}}else return{globalDependencies:{coeff0:{dependencyType:"stateVariable",variableName:"coeff0"},coeffvar1:{dependencyType:"stateVariable",variableName:"coeffvar1"},coeffvar2:{dependencyType:"stateVariable",variableName:"coeffvar2"},variables:{dependencyType:"stateVariable",variableName:"variables"},lastPointsFromInverting:{dependencyType:"stateVariable",variableName:"lastPointsFromInverting"}}}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,arraySize:s,componentName:o}){if("coeff0"in e){let l=nz(e);if(l.success)return{newValues:{points:l.points}};{let u={};for(let c=0;c<s[0];c++)for(let p=0;p<s[1];p++)u[c+","+p]=Ce.fromAst("\uFF3F");return{newValues:{points:u}}}}else{let l={},u={};for(let p of a){let[m,f]=p.split(","),d=Number(m)+1+"_"+(Number(f)+1);if(r[p].through!==null&&r[p].through.stateValues["pointX"+d])l[p]=r[p].through.stateValues["pointX"+d];else if(e.basedOnSlope){let h;if(e.nPointsPrescribed===1?h=r[p].point1.stateValues.point1[f].tree:h=r[p].essentialPoint1coord,m==="0")l[p]=Ce.fromAst(h);else{let y=r[p].slopeAttr.stateValues.value;if(y===1/0||y===-1/0)f==="0"?l[p]=Ce.fromAst(h):l[p]=Ce.fromAst(["+",h,r[p].dForSlope*Math.sign(y)]);else if(Number.isFinite(y)){let b=Math.atan(y);f==="0"?l[p]=Ce.fromAst(["+",h,r[p].dForSlope*Math.cos(b)]):l[p]=Ce.fromAst(["+",h,r[p].dForSlope*Math.sin(b)])}else l[p]=Ce.fromAst("\uFF3F")}}else p==="0,0"?u[p]={defaultValue:Ce.fromAst(1)}:e.nPointsPrescribed===1&&p==="1,0"?u[p]={get defaultValue(){return r[p].point1.stateValues.point1[0].tree===0&&r[p].point1.stateValues.point1[1].tree===0?Ce.fromAst(1):Ce.fromAst(0)}}:u[p]={defaultValue:Ce.fromAst(0)}}let c={};return Object.keys(l).length>0&&(c.newValues={points:l}),Object.keys(u).length>0&&(c.useEssentialOrDefaultValue={points:u}),c}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,initialChange:o,stateValues:l,workspace:u}){if(o&&!l.draggable)return{success:!1};if("coeff0"in r){u.desiredPoints||(u.desiredPoints={}),Object.assign(u.desiredPoints,e.points);let c,p,m,f;if(u.desiredPoints["0,0"]?c=u.desiredPoints["0,0"]:c=l.points[0][0],u.desiredPoints["0,1"]?p=u.desiredPoints["0,1"]:p=l.points[0][1],u.desiredPoints["1,0"]?m=u.desiredPoints["1,0"]:m=l.points[1][0],u.desiredPoints["1,1"]?f=u.desiredPoints["1,1"]:f=l.points[1][1],typeof c.tree=="number"&&typeof p.tree=="number"&&typeof m.tree=="number"&&typeof f.tree=="number"){let b=[c.tree,p.tree],g=[m.tree,f.tree],v=b[1]-g[1],C=g[0]-b[0],w=b[0]*g[1]-b[1]*g[0],S=Math.abs(v*l.coeffvar2-l.coeffvar1*C),A=[];return S<Math.abs(v*l.coeffvar2)*1e-12?(v!==0?w*=l.coeffvar1/v:w*=l.coeffvar2/C,A.push({setDependency:"coeff0",desiredValue:w,additionalDependencyValues:{coeffvar1:l.coeffvar1,coeffvar2:l.coeffvar2}})):A.push({setDependency:"coeff0",desiredValue:w,additionalDependencyValues:{coeffvar1:v,coeffvar2:C}}),A.push({setDependency:"lastPointsFromInverting",desiredValue:[b,g]}),{success:!0,instructions:A}}let d=p.subtract(f).simplify(),h=m.subtract(c).simplify(),y=c.multiply(f).subtract(p.multiply(m)).simplify();return{success:!0,instructions:[{setDependency:"coeff0",desiredValue:y,additionalDependencyValues:{coeffvar1:d,coeffvar2:h}}]}}else{let c=[];for(let p of Object.keys(e.points).reverse()){let[m,f]=p.split(","),d=Number(m)+1+"_"+(Number(f)+1);if(a[p].through!==null&&a[p].through.stateValues["pointX"+d])c.push({setDependency:s[p].through,desiredValue:e.points[p],variableIndex:0});else if(r.basedOnSlope){let h=e.points[p];if(h instanceof Ce.class&&(h=h.evaluate_to_constant(),h===null&&(h=NaN)),m==="0")c.push({setDependency:s[p].essentialPoint1coord,desiredValue:h,variableIndex:0});else{u.desiredPoint1||(u.desiredPoint1=[]),u.desiredPoint1[f]=h;let y=f==="0"?"1":"0";if(u.desiredPoint1[y]===void 0){let b=l.points[1][y].evaluate_to_constant();b===null&&(b=NaN),u.desiredPoint1[y]=b}if(u.desiredPoint1.every(Number.isFinite)){let b,g;if(r.nPointsPrescribed===1?(b=a[p].point1.stateValues.point1[0].evaluate_to_constant(),g=a[p].point1.stateValues.point1[1].evaluate_to_constant()):(b=l.essentialPoint1x,g=l.essentialPoint1y),Number.isFinite(b)&&Number.isFinite(g)){let v=u.desiredPoint1[0]-b,C=u.desiredPoint1[1]-g,w=Math.sqrt(v*v+C*C);v!==0&&(w*=Math.sign(v)),c.push({setDependency:s[p].dForSlope,desiredValue:w}),c.push({setDependency:s[p].slopeAttr,desiredValue:C/v,variableIndex:0})}}}}else c.push({setStateVariable:"points",value:{[p]:Ze(e.points[p])}})}return{success:!0,instructions:c}}}},t.equation={public:!0,componentType:"math",forRenderer:!0,stateVariablesDeterminingDependencies:["equationIdentity"],additionalStateVariablesDefined:[{variableName:"coeff0",public:!0,componentType:"math"},{variableName:"coeffvar1",public:!0,componentType:"math"},{variableName:"coeffvar2",public:!0,componentType:"math"}],returnDependencies:function({stateValues:e}){let r={variables:{dependencyType:"stateVariable",variableName:"variables"}};return e.equationIdentity===null?(r.points={dependencyType:"stateVariable",variableName:"points"},r.nDimensions={dependencyType:"stateVariable",variableName:"nDimensions"}):r.equation={dependencyType:"attributeComponent",attributeName:"equation",variableNames:["value"]},r},definition:function({dependencyValues:e}){let r=e.variables,a=Ce.fromAst("\uFF3F");if(e.equation){let y=e.equation.stateValues.value,b=rz({equation:y,variables:r});if(!b.success)return{newValues:{equation:y,coeff0:a,coeffvar1:a,coeffvar2:a}};let{coeff0:g,coeffvar1:v,coeffvar2:C}=b;return{newValues:{equation:y,coeff0:g,coeffvar1:v,coeffvar2:C}}}let s=e.nDimensions;if(Number.isNaN(s))return console.warn("Line through points of undetermined dimensions"),{newValues:{equation:a,coeff0:a,coeffvar1:a,coeffvar2:a}};if(s<2)return console.warn("Line must be through points of at least two dimensions"),{newValues:{equation:a,coeff0:a,coeffvar1:a,coeffvar2:a}};let o=e.points[0][0],l=e.points[0][1],u=e.points[1][0],c=e.points[1][1],p=[...r.map(y=>y.toString())];for(let y=0;y<s;y++)if(o.variables().indexOf(p[y])!==-1||l.variables().indexOf(p[y])!==-1||u.variables().indexOf(p[y])!==-1||c.variables().indexOf(p[y])!==-1)return console.warn("Points through line depend on variables: "+p.join(", ")),{newValues:{equation:a,coeff0:a,coeffvar1:a,coeffvar2:a}};if(s!==2)return{newValues:{equation:a,coeff0:a,coeffvar1:a,coeffvar2:a}};if(o.equals(u)&&l.equals(c)){let y=Ce.fromAst(0);return{newValues:{equation:a,coeff0:y,coeffvar1:y,coeffvar2:y}}}let m=l.subtract(c).simplify(),f=u.subtract(o).simplify(),d=o.multiply(c).subtract(l.multiply(u)).simplify();return{newValues:{equation:Ce.fromAst(["=",["+",["*","a","x"],["*","b","y"],"c"],0]).substitute({a:m,b:f,c:d,x:r[0],y:r[1]}).simplify(),coeff0:d,coeffvar1:m,coeffvar2:f}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r}){if(r.points)return console.log("Haven't implemented inverse definition of equation of line based on points"),{success:!1};if(e.equation)return{success:!0,instructions:[{setDependency:"equation",desiredValue:e.equation,variableIndex:0}]};if(!("coeff0"in e&&"coeffvar1"in e&&"coeffvar2"in e))return console.log("Haven't implemented inverting coeffs if not specifying all of them"),{success:!1};let a=Ce.fromAst(["=",0,["+",["*","a","x"],["*","b","y"],"c"]]).substitute({a:e.coeffvar1,b:e.coeffvar2,c:e.coeff0,x:r.variables[0],y:r.variables[1]}).simplify();return{success:!0,instructions:[{setDependency:"equation",desiredValue:a,variableIndex:0}]}}},t.numericalPoints={isArray:!0,entryPrefixes:["numericalPoint"],forRenderer:!0,returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return Number.isNaN(e.nDimensions)?[0]:[2]},returnArrayDependenciesByKey({arrayKeys:e}){let r={nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}},a={};for(let s of e)a[s]={point:{dependencyType:"stateVariable",variableName:"point"+(Number(s)+1)}};return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,componentName:s}){if(Number.isNaN(e.nDimensions))return{};let o={};for(let l of a){let u=r[l].point;Array.isArray(u)||(u=[u]);let c=[];for(let p=0;p<e.nDimensions;p++){let m=u[p].evaluate_to_constant();Number.isFinite(m)||(m=NaN),c.push(m)}o[l]=c}return{newValues:{numericalPoints:o}}}},t.numericalCoeff0={additionalStateVariablesDefined:["numericalCoeffvar1","numericalCoeffvar2"],returnDependencies:()=>({coeff0:{dependencyType:"stateVariable",variableName:"coeff0"},coeffvar1:{dependencyType:"stateVariable",variableName:"coeffvar1"},coeffvar2:{dependencyType:"stateVariable",variableName:"coeffvar2"}}),definition:function({dependencyValues:e}){let r=e.coeff0.evaluate_to_constant();Number.isFinite(r)||(r=NaN);let a=e.coeffvar1.evaluate_to_constant();Number.isFinite(a)||(a=NaN);let s=e.coeffvar2.evaluate_to_constant();return Number.isFinite(s)||(s=NaN),{newValues:{numericalCoeff0:r,numericalCoeffvar1:a,numericalCoeffvar2:s}}}},t.slope={public:!0,componentType:"math",returnDependencies:()=>({coeffvar1:{dependencyType:"stateVariable",variableName:"coeffvar1"},coeffvar2:{dependencyType:"stateVariable",variableName:"coeffvar2"}}),definition:function({dependencyValues:e}){return{newValues:{slope:Ce.fromAst(["-",["/","a","b"]]).substitute({a:e.coeffvar1,b:e.coeffvar2}).simplify()}}}},t.xintercept={public:!0,componentType:"math",returnDependencies:()=>({coeff0:{dependencyType:"stateVariable",variableName:"coeff0"},coeffvar1:{dependencyType:"stateVariable",variableName:"coeffvar1"}}),definition:({dependencyValues:e})=>({newValues:{xintercept:Ce.fromAst(["-",["/","a","b"]]).substitute({a:e.coeff0,b:e.coeffvar1}).simplify()}})},t.yintercept={public:!0,componentType:"math",returnDependencies:()=>({coeff0:{dependencyType:"stateVariable",variableName:"coeff0"},coeffvar2:{dependencyType:"stateVariable",variableName:"coeffvar2"}}),definition:({dependencyValues:e})=>({newValues:{yintercept:Ce.fromAst(["-",["/","a","b"]]).substitute({a:e.coeff0,b:e.coeffvar2}).simplify()}})},t.lastPointsFromInverting={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{lastPointsFromInverting:{variableToCheck:"lastPointsFromInverting"}}}),inverseDefinition:({desiredStateVariableValues:e})=>({success:!0,instructions:[{setStateVariable:"lastPointsFromInverting",value:e.lastPointsFromInverting}]})},t.graphXmin={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"graphXmax",forRenderer:!0},{variableName:"graphYmin",forRenderer:!0},{variableName:"graphYmax",forRenderer:!0}],returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]}}),definition({dependencyValues:e}){return e.graphAncestor?{newValues:{graphXmin:e.graphAncestor.stateValues.xmin,graphXmax:e.graphAncestor.stateValues.xmax,graphYmin:e.graphAncestor.stateValues.ymin,graphYmax:e.graphAncestor.stateValues.ymax}}:{newValues:{graphXmin:null,graphXmax:null,graphYmin:null,graphYmax:null}}}},t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalCoeff0:{dependencyType:"stateVariable",variableName:"numericalCoeff0"},numericalCoeffvar1:{dependencyType:"stateVariable",variableName:"numericalCoeffvar1"},numericalCoeffvar2:{dependencyType:"stateVariable",variableName:"numericalCoeffvar2"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:e}){let r=1,a=1;e.graphXmin!==null&&e.graphXmax!==null&&e.graphYmin!==null&&e.graphYmax!==null&&(r=e.graphXmax-e.graphXmin,a=e.graphYmax-e.graphYmin);let s=e.numericalCoeffvar1*r,o=e.numericalCoeffvar2*a,l=e.numericalCoeff0,u=Number.isFinite(s)&&Number.isFinite(o)&&Number.isFinite(l),c=s*s+o*o,p=e.nDimensions!==2||!u||c===0;return{newValues:{nearestPoint:function(m){if(p)return{};let f=m.x1.evaluate_to_constant(),d=m.x2.evaluate_to_constant();if(!(Number.isFinite(f)&&Number.isFinite(d)))return{};let h=f/r,y=d/a,b={};return b.x1=(o*(o*h-s*y)-s*l)*r/c,b.x2=(s*(-o*h+s*y)-o*l)*a/c,m.x3!==void 0&&(b.x3=0),b}}}}},t}moveLine({point1coords:t,point2coords:e,transient:r}){let a={"0,0":Ce.fromAst(t[0]),"0,1":Ce.fromAst(t[1])};return this.stateValues.basedOnSlope||(a["1,0"]=Ce.fromAst(e[0]),a["1,1"]=Ce.fromAst(e[1])),r?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"points",value:a}],transient:!0}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"points",value:a}],event:{verb:"interacted",object:{componentId:this.componentName},result:{point1:t,point2:e}}})}finalizeLinePosition(){return this.actions.moveLine({point1coords:this.stateValues.numericalPoints[0],point2coords:this.stateValues.numericalPoints[1],transient:!1})}};T(aa,"componentType","line"),T(aa,"useChildrenForReference",!1),T(aa,"adapters",["equation"]);function rz({equation:i,variables:t}){let e=t[0],r=t[1],a=e.toString(),s=r.toString();i=i.expand().simplify();let o=Ce.fromAst(["+",i.tree[2],["-",i.tree[1]]]).expand().simplify(),l=[];Array.isArray(o.tree)&&o.tree[0]==="+"?l=o.tree.slice(1):l=[o.tree];let u=Ce.fromAst(0),c=Ce.fromAst(0),p=Ce.fromAst(0);for(let f of l){let d=m(f);if(!d.success)return{success:!1};u=u.add(d.coeffvar1),c=c.add(d.coeffvar2),p=p.add(d.coeff0)}return u=u.simplify(),c=c.simplify(),p=p.simplify(),{success:!0,coeff0:p,coeffvar1:u,coeffvar2:c};function m(f){let d=0,h=0,y=0;if(typeof f=="string")f===a?d=1:f===s?h=1:y=f;else if(typeof f=="number")y=f;else if(Array.isArray(f)){let b=f[0],g=f.slice(1);if(b==="-"){let v=m(g[0]);if(!v.success)return{success:!1};d=["-",v.coeffvar1.tree],h=["-",v.coeffvar2.tree],y=["-",v.coeff0.tree]}else{if(b==="+")return console.warn("Invalid format for equation of line in variables "+e+" and "+r),{success:!1};if(b==="*"){let v=-1,C=-1;for(let w=0;w<g.length;w++)if(e.equals(Ce.fromAst(g[w]))){v=w;break}else if(r.equals(Ce.fromAst(g[w]))){C=w;break}v!==-1?(g.splice(v,1),g.length===1?d=g[0]:d=["*"].concat(g)):C!==-1?(g.splice(C,1),g.length===1?h=g[0]:h=["*"].concat(g)):y=f}else if(b==="/"){let v=m(g[0]);if(!v.success)return{success:!1};d=["/",v.coeffvar1.tree,g[1]],h=["/",v.coeffvar2.tree,g[1]],y=["/",v.coeff0.tree,g[1]]}else b==="_"?e.equals(Ce.fromAst(f))?d=1:r.equals(Ce.fromAst(f))?h=1:y=f:y=f}}else return console.warn("Invalid format for equation of line in variables "+e+" and "+r),{success:!1};return{success:!0,coeffvar1:Ce.fromAst(d),coeffvar2:Ce.fromAst(h),coeff0:Ce.fromAst(y)}}}function nz({coeff0:i,coeffvar1:t,coeffvar2:e,variables:r,lastPointsFromInverting:a}){let s=r[0],o=r[1],l=s.toString(),u=o.toString();if(t.variables(!0).indexOf(l)!==-1||t.variables(!0).indexOf(u)!==-1||e.variables(!0).indexOf(l)!==-1||e.variables(!0).indexOf(u)!==-1||i.variables(!0).indexOf(l)!==-1||i.variables(!0).indexOf(u)!==-1)return console.warn("Invalid format for equation of line in variables "+l+" and "+u),{success:!1};let c=Ce.fromAst(0);if(t.equals(c)&&e.equals(c))return console.warn("Invalid format for equation of line in variables "+l+" and "+u),{success:!1};let p=t.evaluate_to_constant(),m=e.evaluate_to_constant(),f=i.evaluate_to_constant(),d,h,y,b,g={};if(Number.isFinite(f)&&Number.isFinite(p)&&Number.isFinite(m)){let v=p*p+m*m;if(v===0)return{success:!1};if(a){let C=a[0][0],w=a[0][1];d=(m*(m*C-p*w)-p*f)/v,h=(p*(-m*C+p*w)-m*f)/v,C=a[1][0],w=a[1][1],y=(m*(m*C-p*w)-p*f)/v,b=(p*(-m*C+p*w)-m*f)/v}else d=(2*m-p*f)/v,h=(-2*p-m*f)/v,y=(m-p*f)/v,b=-(p+m*f)/v;g["0,0"]=Ce.fromAst(d),g["0,1"]=Ce.fromAst(h),g["1,0"]=Ce.fromAst(y),g["1,1"]=Ce.fromAst(b)}else{let v=t.pow(2).add(e.pow(2));d=e.multiply(2).subtract(t.multiply(i)).divide(v),h=t.multiply(-2).subtract(e.multiply(i)).divide(v),y=e.subtract(t.multiply(i)).divide(v),b=t.add(e.multiply(i)).multiply(-1).divide(v),g["0,0"]=d,g["0,1"]=h,g["1,0"]=y,g["1,1"]=b}return{success:!0,points:g}}import Jl from"math-expressions";var Ql=class extends Qe{actions={moveLineSegment:this.moveLineSegment.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizeLineSegmentPosition:this.finalizeLineSegmentPosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["endpoints"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.endpoints={createComponentOfType:"_pointListComponent"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r="";return e.selectedStyle.lineWidth>=4?r+="thick ":e.selectedStyle.lineWidth<=1&&(r+="thin "),e.selectedStyle.lineStyle==="dashed"?r+="dashed ":e.selectedStyle.lineStyle==="dotted"&&(r+="dotted "),r+=e.selectedStyle.lineColor,{newValues:{styleDescription:r}}}},t.nDimensions={public:!0,componentType:"number",returnDependencies:()=>({endpointsAttr:{dependencyType:"attributeComponent",attributeName:"endpoints",variableNames:["nDimensions"]}}),definition:function({dependencyValues:e}){return e.endpointsAttr!==null?{newValues:{nDimensions:e.endpointsAttr.stateValues.nDimensions},checkForActualChange:{nDimensions:!0}}:{newValues:{nDimensions:2}}}},t.endpoints={public:!0,componentType:"math",isArray:!0,nDimensions:2,entryPrefixes:["endpointX","endpoint"],returnWrappingComponents(e){return e==="endpointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="endpointX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[2,e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let[s,o]=a.split(","),l=Number(s)+1+"_"+(Number(o)+1);r[a]={endpointsAttr:{dependencyType:"attributeComponent",attributeName:"endpoints",variableNames:["pointX"+l]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r,arraySize:a}){let s={},o={};for(let u of r){let[c,p]=u.split(","),m=Number(c)+1+"_"+(Number(p)+1);e[u].endpointsAttr!==null&&e[u].endpointsAttr.stateValues["pointX"+m]?s[u]=e[u].endpointsAttr.stateValues["pointX"+m]:u==="0,0"?o[u]={defaultValue:Jl.fromAst(1)}:o[u]={defaultValue:Jl.fromAst(0)}}let l={};return Object.keys(s).length>0&&(l.newValues={endpoints:s}),Object.keys(o).length>0&&(l.useEssentialOrDefaultValue={endpoints:o}),l},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,initialChange:s,stateValues:o}){if(s&&!o.draggable)return{success:!1};let l=[];for(let u in e.endpoints){let[c,p]=u.split(","),m=Number(c)+1+"_"+(Number(p)+1);r[u].endpointsAttr!==null&&r[u].endpointsAttr.stateValues["pointX"+m]?l.push({setDependency:a[u].endpointsAttr,desiredValue:e.endpoints[u],childIndex:0,variableIndex:0}):l.push({setStateVariable:"endpoints",value:{[u]:Ze(e.endpoints[u])}})}return{success:!0,instructions:l}}},t.numericalEndpoints={isArray:!0,entryPrefixes:["numericalEndpoint"],forRenderer:!0,returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return Number.isNaN(e.nDimensions)?[0]:[2]},returnArrayDependenciesByKey({arrayKeys:e}){let r={nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}},a={};for(let s of e)a[s]={endpoint:{dependencyType:"stateVariable",variableName:"endpoint"+(Number(s)+1)}};return{globalDependencies:r,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){if(Number.isNaN(e.nDimensions))return{};let s={};for(let o of a){let l=r[o].endpoint,u=[];for(let c=0;c<e.nDimensions;c++){let p=l[c].evaluate_to_constant();Number.isFinite(p)||(p=NaN),u.push(p)}s[o]=u}return{newValues:{numericalEndpoints:s}}}},t.graphXmin={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"graphXmax",forRenderer:!0},{variableName:"graphYmin",forRenderer:!0},{variableName:"graphYmax",forRenderer:!0}],returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]}}),definition({dependencyValues:e}){return e.graphAncestor?{newValues:{graphXmin:e.graphAncestor.stateValues.xmin,graphXmax:e.graphAncestor.stateValues.xmax,graphYmin:e.graphAncestor.stateValues.ymin,graphYmax:e.graphAncestor.stateValues.ymax}}:{newValues:{graphXmin:null,graphXmax:null,graphYmin:null,graphYmax:null}}}},t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalEndpoints:{dependencyType:"stateVariable",variableName:"numericalEndpoints"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:e}){let r=1,a=1;e.graphXmin!==null&&e.graphXmax!==null&&e.graphYmin!==null&&e.graphYmax!==null&&(r=e.graphXmax-e.graphXmin,a=e.graphYmax-e.graphYmin);let s=e.numericalEndpoints[0][0],o=e.numericalEndpoints[0][1],l=e.numericalEndpoints[1][0],u=e.numericalEndpoints[1][1],c=Number.isFinite(s)&&Number.isFinite(o)&&Number.isFinite(l)&&Number.isFinite(u),p=(l-s)/r,m=(u-o)/a,f=p*p+m*m,d=e.nDimensions!==2||!c||f===0;return{newValues:{nearestPoint:function(h){if(d)return{};let y=((h.x1-s)/r*p+(h.x2-o)/a*m)/f,b={};return y<=0?b={x1:s,x2:o}:y>=1?b={x1:l,x2:u}:b={x1:s+y*p*r,x2:o+y*m*a},h.x3!==void 0&&(b.x3=0),b}}}}},t}moveLineSegment({point1coords:t,point2coords:e,transient:r}){let a={};return t!==void 0&&(a["0,0"]=Jl.fromAst(t[0]),a["0,1"]=Jl.fromAst(t[1])),e!==void 0&&(a["1,0"]=Jl.fromAst(e[0]),a["1,1"]=Jl.fromAst(e[1])),r?this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"endpoints",value:a}],transient:!0}):this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"endpoints",value:a}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{point1:t,point2:e}}})}finalizeLineSegmentPosition(){return this.actions.moveLineSegment({point1coords:this.stateValues.numericalEndpoints[0],point2coords:this.stateValues.numericalEndpoints[1],transient:!1})}};T(Ql,"componentType","lineSegment"),T(Ql,"useChildrenForReference",!1);import uo from"math-expressions";var Hp=class extends Qe{actions={moveRay:this.moveRay.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizeRayPosition:this.finalizeRayPosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["endpoint"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.endpoint={createComponentOfType:"point"},e.through={createComponentOfType:"point"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r="";return e.selectedStyle.lineWidth>=4?r+="thick ":e.selectedStyle.lineWidth<=1&&(r+="thin "),e.selectedStyle.lineStyle==="dashed"?r+="dashed ":e.selectedStyle.lineStyle==="dotted"&&(r+="dotted "),r+=e.selectedStyle.lineColor,{newValues:{styleDescription:r}}}},t.nDimensions={public:!0,componentType:"number",returnDependencies:()=>({endpointAttr:{dependencyType:"attributeComponent",attributeName:"endpoint",variableNames:["nDimensions"]},throughAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nDimensions"]}}),definition:function({dependencyValues:e}){if(e.endpointAttr!==null){let r=e.endpointAttr.stateValues.nDimensions;return e.throughAttr!==null&&e.throughAttr.stateValues.nDimensions!==r&&(console.warn("Invalid ray: endpoint and through dimensions do not match"),r=null),{newValues:{nDimensions:r},checkForActualChange:{nDimensions:!0}}}else return e.throughAttr!==null?{newValues:{nDimensions:e.throughAttr.stateValues.nDimensions},checkForActualChange:{nDimensions:!0}}:{newValues:{nDimensions:2}}}},t.endpoint={public:!0,componentType:"math",isArray:!0,entryPrefixes:["endpointX"],defaultEntryValue:uo.fromAst(0),returnWrappingComponents(e){return e==="endpointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1;r[a]={endpointAttr:{dependencyType:"attributeComponent",attributeName:"endpoint",variableNames:[`x${s}`]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let l of r)if(e[l].endpointAttr!==null){let u=Number(l)+1;a[l]=e[l].endpointAttr.stateValues[`x${u}`]}else s[l]={variablesToCheck:[{variableName:"endpoint",arrayIndex:l}]};let o={};return Object.keys(a).length>0&&(o.newValues={endpoint:a}),Object.keys(s).length>0&&(o.useEssentialOrDefaultValue={endpoint:s}),o},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,initialChange:s,stateValues:o}){if(s&&!o.draggable)return{success:!1};let l=[];for(let u of Object.keys(e.endpoint).reverse())r[u].endpointAttr!==null?l.push({setDependency:a[u].endpointAttr,desiredValue:e.endpoint[u],variableIndex:0}):l.push({setStateVariable:"endpoint",value:{[u]:e.endpoint[u]}});return{success:!0,instructions:l}}},t.throughpoint={public:!0,componentType:"math",isArray:!0,entryPrefixes:["throughpointX"],returnWrappingComponents(e){return e==="throughpointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1;r[a]={throughpointAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:[`x${s}`]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let l of r)if(e[l].throughpointAttr!==null){let u=Number(l)+1;a[l]=e[l].throughpointAttr.stateValues[`x${u}`]}else{let u;l==="0"?u=uo.fromAst(1):u=uo.fromAst(0),s[l]={variablesToCheck:[{variableName:"throughpoint",arrayIndex:l}],defaultValue:u}}let o={};return Object.keys(a).length>0&&(o.newValues={throughpoint:a}),Object.keys(s).length>0&&(o.useEssentialOrDefaultValue={throughpoint:s}),o},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,initialChange:s,stateValues:o}){if(s&&!o.draggable)return{success:!1};let l=[];for(let u of Object.keys(e.throughpoint).reverse())r[u].throughpointAttr!==null?l.push({setDependency:a[u].throughpointAttr,desiredValue:e.throughpoint[u],variableIndex:0}):l.push({setStateVariable:"throughpoint",value:{[u]:e.throughpoint[u]}});return{success:!0,instructions:l}}},t.numericalEndpoint={forRenderer:!0,returnDependencies(){return{nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},endpoint:{dependencyType:"stateVariable",variableName:"endpoint"}}},definition({dependencyValues:e}){if(Number.isNaN(e.nDimensions))return null;let r=e.endpoint,a=[];for(let s=0;s<e.nDimensions;s++){let o=r[s].evaluate_to_constant();Number.isFinite(o)||(o=NaN),a.push(o)}return{newValues:{numericalEndpoint:a}}}},t.numericalThroughpoint={forRenderer:!0,returnDependencies(){return{nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},throughpoint:{dependencyType:"stateVariable",variableName:"throughpoint"}}},definition({dependencyValues:e}){if(Number.isNaN(e.nDimensions))return null;let r=e.throughpoint,a=[];for(let s=0;s<e.nDimensions;s++){let o=r[s].evaluate_to_constant();Number.isFinite(o)||(o=NaN),a.push(o)}return{newValues:{numericalThroughpoint:a}}}},t}moveRay({point1coords:t,point2coords:e,transient:r}){let a={},s={};return t!==void 0&&(a[0]=uo.fromAst(t[0]),a[1]=uo.fromAst(t[1])),e!==void 0&&(s[0]=uo.fromAst(e[0]),s[1]=uo.fromAst(e[1])),r?this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"endpoint",value:a},{componentName:this.componentName,updateType:"updateValue",stateVariable:"throughpoint",value:s}],transient:r}):this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"endpoint",value:a},{componentName:this.componentName,updateType:"updateValue",stateVariable:"throughpoint",value:s}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{endpoint:t,throughpoint:e}}})}finalizeRayPosition(){return this.actions.moveRay({point1coords:this.stateValues.numericalEndpoint,point2coords:this.stateValues.numericalThroughpoint,transient:!1})}};T(Hp,"componentType","ray");var sa=class extends Vi{actions={movePolygon:this.movePolygon.bind(new Proxy(this,this.readOnlyProxyHandler))};get movePolygon(){return this.movePolyline}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalVertices:{dependencyType:"stateVariable",variableName:"numericalVertices"},nVertices:{dependencyType:"stateVariable",variableName:"nVertices"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:e}){let r=e.nDimensions,a=e.nVertices,s=e.numericalVertices,o=1,l=1;e.graphXmin!==null&&e.graphXmax!==null&&e.graphYmin!==null&&e.graphYmax!==null&&(o=e.graphXmax-e.graphXmin,l=e.graphYmax-e.graphYmin);let u=[],c,p,m=s[a-1][0],f=s[a-1][1];for(let d=0;d<a;d++)if(c=m,p=f,m=s[d][0],f=s[d][1],!(Number.isFinite(c)&&Number.isFinite(p)&&Number.isFinite(m)&&Number.isFinite(f)))u.push(null);else{let h=(m-c)/o,y=(f-p)/l,b=h*h+y*y;b===0?u.push(null):u.push([h,y,b])}return{newValues:{nearestPoint:function(d){if(r!==2||a===0)return{};let h=1/0,y={},b=d.x1.evaluate_to_constant(),g=d.x2.evaluate_to_constant(),v,C,w=s[a-1][0],S=s[a-1][1];for(let A=0;A<a;A++){v=w,C=S,w=s[A][0],S=s[A][1];let E=u[A];if(E===null)continue;let[I,V,O]=E,k=((b-v)/o*I+(g-C)/l*V)/O,M;k<=0?M={x1:v,x2:C}:k>=1?M={x1:w,x2:S}:M={x1:v+k*I*o,x2:C+k*V*l};let L=Math.pow((b-M.x1)/o,2)+Math.pow((g-M.x2)/l,2);L<h&&(h=L,y=M)}return d.x3!==void 0&&Object.keys(y).length>0&&(y.x3=0),y}}}}},t}};T(sa,"componentType","polygon");import Gp from"math-expressions";var eu=class extends sa{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.vertices.returnArraySizeDependencies=()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),t.vertices.returnArraySize=function({dependencyValues:e}){return[3,e.nDimensions]},t.vertices.arrayDefinitionByKey=function({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let o of r){let[l,u]=o.split(","),c=Number(l)+1+"_"+(Number(u)+1),p=e[o].vertices;if(p!==null&&p.stateValues["pointX"+c])a[o]=p.stateValues["pointX"+c];else{let m;l==="0"?u==="1"?m=Gp.fromAst(1):m=Gp.fromAst(0):l==="1"?u==="0"?m=Gp.fromAst(1):m=Gp.fromAst(0):m=Gp.fromAst(0),s[o]={variablesToCheck:["vertexX"+c],defaultValue:m}}}return{newValues:{vertices:a},useEssentialOrDefaultValue:{vertices:s}}},t.vertices.inverseArrayDefinitionByKey=function({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,initialChange:s,stateValues:o}){if(s&&!o.draggable)return{success:!1};let l=[];for(let u in e.vertices){let[c,p]=u.split(","),m=Number(c)+1+"_"+(Number(p)+1);r[u].vertices!==null&&r[u].vertices.stateValues["pointX"+m]?l.push({setDependency:a[u].vertices,desiredValue:e.vertices[u],variableIndex:0}):l.push({setStateVariable:"vertices",value:{[u]:e.vertices[u].simplify()}})}return{success:!0,instructions:l}},t.nVertices={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{nVertices:3}})},t}};T(eu,"componentType","triangle"),T(eu,"rendererType","polygon");import Fn from"math-expressions";var tu=class extends sa{static get stateVariablesShadowedForReference(){return["vertices","nVertices","nVerticesSpecified","haveSpecifiedCenter","specifiedWidth","specifiedHeight","specifiedCenter"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.vertices={createComponentOfType:"_pointListComponent"},e.center={createComponentOfType:"point"},e.width={createComponentOfType:"number"},e.height={createComponentOfType:"number"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nVerticesSpecified={returnDependencies:()=>({verticesAttr:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["nPoints"]}}),definition:function({dependencyValues:e}){return e.verticesAttr!==null?{newValues:{nVerticesSpecified:e.verticesAttr.stateValues.nPoints}}:{newValues:{nVerticesSpecified:0}}}},t.essentialVertex={isArray:!0,entryPrefixes:["essentialVertexX"],defaultEntryValue:Fn.fromAst(0),returnArraySizeDependencies:()=>({nVerticesSpecified:{dependencyType:"stateVariable",variableName:"nVerticesSpecified"}}),returnArraySize({dependencyValues:e}){return[e.nVerticesSpecified===0?2:0]},returnArrayDependenciesByKey(){return{}},arrayDefinitionByKey:function({arrayKeys:e}){let r={};for(let a of e)r[a]={variablesToCheck:["essentialVertexX"+(Number(a)+1)]};return{useEssentialOrDefaultValue:{essentialVertex:r}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e}){let r=[];for(let a in e.essentialVertex)r.push({setStateVariable:"essentialVertex",value:{[a]:e.essentialVertex[a]}});return{success:!0,instructions:r}}},t.haveSpecifiedCenter={returnDependencies:()=>({centerAttr:{dependencyType:"attributeComponent",attributeName:"center"}}),definition:({dependencyValues:e})=>({newValues:{haveSpecifiedCenter:e.centerAttr!==null}})},t.specifiedCenter={isArray:!0,entryPrefixes:["specifiedCenterX"],returnArraySizeDependencies:()=>({haveSpecifiedCenter:{dependencyType:"stateVariable",variableName:"haveSpecifiedCenter"}}),returnArraySize({dependencyValues:e}){return[e.haveSpecifiedCenter?2:0]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1;r[a]={centerAttr:{dependencyType:"attributeComponent",attributeName:"center",variableNames:["x"+s]}}}return{dependenciesByKey:r}},arrayDefinitionByKey:function({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=Number(s)+1;e[s].centerAttr!==null&&(a[s]=e[s].centerAttr.stateValues["x"+o])}return{newValues:{specifiedCenter:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a}){let s=[];for(let o in e.specifiedCenter)r[o].centerAttr&&r[o].centerAttr!==null&&s.push({setDependency:a[o].centerAttr,desiredValue:e.specifiedCenter[o],variableIndex:0});return{success:!0,instructions:s}}},t.specifiedWidth={defaultValue:1,returnDependencies(){return{widthAttr:{dependencyType:"attributeComponent",attributeName:"width",variableNames:["value"]},nVerticesSpecified:{dependencyType:"stateVariable",variableName:"nVerticesSpecified"},haveSpecifiedCenter:{dependencyType:"stateVariable",variableName:"haveSpecifiedCenter"}}},definition({dependencyValues:e}){return e.widthAttr!==null?{newValues:{specifiedWidth:e.widthAttr.stateValues.value}}:(e.haveSpecifiedCenter?1:0)+e.nVerticesSpecified<=1?{useEssentialOrDefaultValue:{specifiedWidth:{variablesToCheck:["specifiedWidth"]}}}:{newValues:{specifiedWidth:null}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.widthAttr!==null?{success:!0,instructions:[{setDependency:"widthAttr",desiredValue:e.specifiedWidth,childIndex:0,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"specifiedWidth",value:e.specifiedWidth}]}}},t.specifiedHeight={defaultValue:1,returnDependencies(){return{heightAttr:{dependencyType:"attributeComponent",attributeName:"height",variableNames:["value"]},nVerticesSpecified:{dependencyType:"stateVariable",variableName:"nVerticesSpecified"},haveSpecifiedCenter:{dependencyType:"stateVariable",variableName:"haveSpecifiedCenter"}}},definition({dependencyValues:e}){return e.heightAttr!==null?{newValues:{specifiedHeight:e.heightAttr.stateValues.value}}:(e.haveSpecifiedCenter?1:0)+e.nVerticesSpecified<=1?{useEssentialOrDefaultValue:{specifiedHeight:{variablesToCheck:["specifiedHeight"]}}}:{newValues:{specifiedHeight:null}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.heightAttr!==null?{success:!0,instructions:[{setDependency:"heightAttr",desiredValue:e.specifiedHeight,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"specifiedHeight",value:e.specifiedHeight}]}}},t.center={public:!0,isArray:!0,entryPrefixes:["centerX"],componentType:"math",returnWrappingComponents(e){return e==="centerX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},returnArraySizeDependencies:()=>({}),returnArraySize:()=>[2],returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=Number(a)+1;r[a]={vertex0:{dependencyType:"stateVariable",variableName:"vertexX1_"+s},vertex2:{dependencyType:"stateVariable",variableName:"vertexX3_"+s}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].vertex0,l=e[s].vertex2;a[s]=o.add(l).divide(2).simplify()}return{newValues:{center:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,dependencyNamesByKey:a,stateValues:s}){let o=[];for(let l in e.center){let u=Number(l),c=r[l].vertex0,p=r[l].vertex2,m=e.center[u].subtract(s.center[u]),f=c.add(m).simplify(),d=p.add(m).simplify();o.push({setDependency:a[l].vertex0,desiredValue:f},{setDependency:a[l].vertex2,desiredValue:d})}return{success:!0,instructions:o}}},t.width={public:!0,componentType:"number",returnDependencies({}){return{vertex0:{dependencyType:"stateVariable",variableName:"vertexX1_1"},vertex2:{dependencyType:"stateVariable",variableName:"vertexX3_1"}}},definition({dependencyValues:e}){let r=e.vertex0.evaluate_to_constant(),a=e.vertex2.evaluate_to_constant();return{newValues:{width:Math.abs(r-a)}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r,stateValues:a}){let s=r.vertex0.evaluate_to_constant(),o=r.vertex2.evaluate_to_constant(),l=(o+s)/2,c=(o-s<0?-1:1)*Math.max(0,e.width)/2,p=Fn.fromAst(l-c),m=Fn.fromAst(l+c);return{success:!0,instructions:[{setDependency:"vertex0",desiredValue:p},{setDependency:"vertex2",desiredValue:m}]}}},t.height={public:!0,componentType:"number",returnDependencies({}){return{vertex0:{dependencyType:"stateVariable",variableName:"vertexX1_2"},vertex2:{dependencyType:"stateVariable",variableName:"vertexX3_2"}}},definition({dependencyValues:e}){let r=e.vertex0.evaluate_to_constant(),a=e.vertex2.evaluate_to_constant();return{newValues:{height:Math.abs(r-a)}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){let a=r.vertex0.evaluate_to_constant(),s=r.vertex2.evaluate_to_constant(),o=(s+a)/2,u=(s-a<0?-1:1)*Math.max(0,e.height)/2,c=Fn.fromAst(o-u),p=Fn.fromAst(o+u);return{success:!0,instructions:[{setDependency:"vertex0",desiredValue:c},{setDependency:"vertex2",desiredValue:p}]}}},t.vertices={public:!0,componentType:"point",isArray:!0,nDimensions:2,entryPrefixes:["vertexX","vertex"],returnWrappingComponents(e){return e==="vertexX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="vertexX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},stateVariablesDeterminingDependencies:["nVerticesSpecified","haveSpecifiedCenter"],returnArraySizeDependencies:()=>({}),returnArraySize(){return[4,2]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={},s={nVerticesSpecified:{dependencyType:"stateVariable",variableName:"nVerticesSpecified"}};if(r.nVerticesSpecified===0)if(s.haveSpecifiedCenter={dependencyType:"stateVariable",variableName:"haveSpecifiedCenter"},r.haveSpecifiedCenter)for(let o of e){let[l,u]=o.split(",");a[o]={specifiedCenter:{dependencyType:"stateVariable",variableName:"specifiedCenterX"+(Number(u)+1)}},u==="0"?a[o].specifiedWidth={dependencyType:"stateVariable",variableName:"specifiedWidth"}:a[o].specifiedHeight={dependencyType:"stateVariable",variableName:"specifiedHeight"}}else for(let o of e){let[l,u]=o.split(",");a[o]={essentialVertex:{dependencyType:"stateVariable",variableName:"essentialVertexX"+(Number(u)+1)}},u==="0"?(l==="1"||l==="2")&&(a[o].specifiedWidth={dependencyType:"stateVariable",variableName:"specifiedWidth"}):(l==="2"||l==="3")&&(a[o].specifiedHeight={dependencyType:"stateVariable",variableName:"specifiedHeight"})}else if(r.nVerticesSpecified===1)if(s.haveSpecifiedCenter={dependencyType:"stateVariable",variableName:"haveSpecifiedCenter"},r.haveSpecifiedCenter)for(let o of e){let[l,u]=o.split(","),c="1_"+(Number(u)+1);a[o]={verticesAttr:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["pointX"+c]}},(u==="0"&&l==="1"||l==="2"||u==="1"&&l==="2"||l==="3")&&(a[o].specifiedCenter={dependencyType:"stateVariable",variableName:"specifiedCenterX"+(Number(u)+1)})}else for(let o of e){let[l,u]=o.split(","),c="1_"+(Number(u)+1);a[o]={verticesAttr:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["pointX"+c]}},u==="0"?(l==="1"||l==="2")&&(a[o].specifiedWidth={dependencyType:"stateVariable",variableName:"specifiedWidth"}):(l==="2"||l==="3")&&(a[o].specifiedHeight={dependencyType:"stateVariable",variableName:"specifiedHeight"})}else for(let o of e){let[l,u]=o.split(","),c="1_"+(Number(u)+1),p="2_"+(Number(u)+1),m;l==="0"?m=c:l==="2"?m=p:l==="1"?u==="0"?m=p:m=c:u==="0"?m=c:m=p,a[o]={verticesAttr:{dependencyType:"attributeComponent",attributeName:"vertices",variableNames:["pointX"+m]}}}return{dependenciesByKey:a,globalDependencies:s}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r,globalDependencyValues:a}){let s={};if(a.nVerticesSpecified===0)if(a.haveSpecifiedCenter)for(let o of r){let[l,u]=o.split(","),c=e[o].specifiedCenter;if(u==="0"){let p=e[o].specifiedWidth;l==="0"||l==="3"?s[o]=c.subtract(p/2):s[o]=c.add(p/2)}else{let p=e[o].specifiedHeight;l==="0"||l==="1"?s[o]=c.subtract(p/2):s[o]=c.add(p/2)}}else for(let o of r){let[l,u]=o.split(","),c=e[o].essentialVertex;if(u==="0")if(l==="0"||l==="3")s[o]=c;else{let p=e[o].specifiedWidth;s[o]=c.add(p)}else if(l==="0"||l==="1")s[o]=c;else{let p=e[o].specifiedHeight;s[o]=c.add(p)}}else if(a.nVerticesSpecified===1)if(a.haveSpecifiedCenter)for(let o of r){let[l,u]=o.split(","),c=e[o].verticesAttr,p;if(c!==null&&Object.keys(c.stateValues).length===1?p=Object.values(c.stateValues)[0]:p=Fn.fromAst("\uFF3F"),u==="0"&&(l==="0"||l==="3")||u==="1"&&(l==="0"||l==="1"))s[o]=p;else{let m=e[o].specifiedCenter;s[o]=p.add(m.subtract(p).multiply(2))}}else for(let o of r){let[l,u]=o.split(","),c=e[o].verticesAttr,p;if(c!==null&&Object.keys(c.stateValues).length===1?p=Object.values(c.stateValues)[0]:p=Fn.fromAst("\uFF3F"),u==="0")if(l==="0"||l==="3")s[o]=p;else{let m=e[o].specifiedWidth;s[o]=p.add(m)}else if(l==="0"||l==="1")s[o]=p;else{let m=e[o].specifiedHeight;s[o]=p.add(m)}}else for(let o of r){let l=e[o].verticesAttr;l!==null&&Object.keys(l.stateValues).length===1?s[o]=Object.values(l.stateValues)[0]:s[o]=Fn.fromAst("\uFF3F")}return{newValues:{vertices:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyValuesByKey:r,globalDependencyValues:a,stateValues:s,workspace:o,initialChange:l,dependencyNamesByKey:u}){if(l&&!s.draggable)return{success:!1};o.v0||(o.v0=[...s.vertices[0]],o.v2=[...s.vertices[2]]);let c,p,m,f,d,h;for(let b in e.vertices){let[g,v]=b.split(","),C=e.vertices[b];g==="0"?o.v0[Number(v)]=C:g==="2"?o.v2[Number(v)]=C:g==="1"?v==="0"?o.v2[Number(v)]=C:o.v0[Number(v)]=C:v==="0"?o.v0[Number(v)]=C:o.v2[Number(v)]=C,v==="0"?(c=b,g==="0"||g==="3"?m=b:d=b):(p=b,g==="0"||g==="1"?f=b:h=b)}let y=[];if(a.nVerticesSpecified===0)if(a.haveSpecifiedCenter){if(c!==void 0){let b=o.v2[0].subtract(o.v0[0]).evaluate_to_constant(),g=o.v2[0].add(o.v0[0]).divide(2).simplify();y.push({setDependency:u[c].specifiedWidth,desiredValue:b},{setDependency:u[c].specifiedCenter,desiredValue:g})}if(p!==void 0){let b=o.v2[1].subtract(o.v0[1]).evaluate_to_constant(),g=o.v2[1].add(o.v0[1]).divide(2).simplify();y.push({setDependency:u[p].specifiedHeight,desiredValue:b},{setDependency:u[p].specifiedCenter,desiredValue:g})}}else{if(m!==void 0){let b=o.v0[0].simplify();y.push({setDependency:u[m].essentialVertex,desiredValue:b})}if(d!==void 0){let b=o.v2[0].subtract(o.v0[0]).evaluate_to_constant();y.push({setDependency:u[d].specifiedWidth,desiredValue:b})}if(f!==void 0){let b=o.v0[1].simplify();y.push({setDependency:u[f].essentialVertex,desiredValue:b})}if(h!==void 0){let b=o.v2[1].subtract(o.v0[1]).evaluate_to_constant();y.push({setDependency:u[h].specifiedHeight,desiredValue:b})}}else if(a.nVerticesSpecified===1)if(a.haveSpecifiedCenter){if(m!==void 0){let b=o.v0[0].simplify();y.push({setDependency:u[m].verticesAttr,desiredValue:b,variableIndex:0})}if(d!==void 0){let b=o.v2[0].add(o.v0[0]).divide(2).simplify();y.push({setDependency:u[d].specifiedCenter,desiredValue:b})}if(f!==void 0){let b=o.v0[1].simplify();y.push({setDependency:u[f].verticesAttr,desiredValue:b,variableIndex:0})}if(h!==void 0){let b=o.v2[1].add(o.v0[1]).divide(2).simplify();y.push({setDependency:u[h].specifiedCenter,desiredValue:b})}}else{if(m!==void 0){let b=o.v0[0].simplify();y.push({setDependency:u[m].verticesAttr,desiredValue:b,variableIndex:0})}if(d!==void 0){let b=o.v2[0].subtract(o.v0[0]).evaluate_to_constant();y.push({setDependency:u[d].specifiedWidth,desiredValue:b})}if(f!==void 0){let b=o.v0[1].simplify();y.push({setDependency:u[f].verticesAttr,desiredValue:b,variableIndex:0})}if(h!==void 0){let b=o.v2[1].subtract(o.v0[1]).evaluate_to_constant();y.push({setDependency:u[h].specifiedHeight,desiredValue:b})}}else m!==void 0&&y.push({setDependency:u[m].verticesAttr,desiredValue:o.v0[0],variableIndex:0}),d!==void 0&&y.push({setDependency:u[d].verticesAttr,desiredValue:o.v2[0],variableIndex:0}),f!==void 0&&y.push({setDependency:u[f].verticesAttr,desiredValue:o.v0[1],variableIndex:0}),h!==void 0&&y.push({setDependency:u[h].verticesAttr,desiredValue:o.v2[1],variableIndex:0});return{success:!0,instructions:y}}},t.nVertices={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{nVertices:4}})},t}movePolygon({pointCoords:t,transient:e,sourceInformation:r}){let a=[],s={};for(let o in t)s[o+",0"]=Fn.fromAst(t[o][0]),s[o+",1"]=Fn.fromAst(t[o][1]);if(a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"vertices",value:s}),Object.keys(t).length===1){let o=Number(Object.keys(t)[0]),l=Fn.fromAst(t[o][0]),u=Fn.fromAst(t[o][1]),c=(o+2)%4,p=this.stateValues.vertices[c][0],m=this.stateValues.vertices[c][1];if(this.stateValues.nVerticesSpecified<2)if(this.stateValues.haveSpecifiedCenter){let f,d;o===0?(f=l.add(p).divide(2),d=u.add(m).divide(2)):o===1?d=u.add(m).divide(2):o===3&&(f=l.add(p).divide(2)),f!==void 0&&a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"specifiedCenter",value:{0:f.simplify()}}),d!==void 0&&a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"specifiedCenter",value:{1:d.simplify()}})}else{let f,d;o===0?(f=p.subtract(l),d=m.subtract(u)):o===1?d=m.subtract(u):o===3&&(f=p.subtract(l)),f!==void 0&&a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"specifiedWidth",value:f.simplify()}),d!==void 0&&a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"specifiedHeight",value:d.simplify()})}}return e?this.coreFunctions.performUpdate({updateInstructions:a,transient:e}):this.coreFunctions.performUpdate({updateInstructions:a,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{pointCoordinates:t}}})}};T(tu,"componentType","rectangle"),T(tu,"rendererType","polygon");import vr from"math-expressions";var ei=class extends Qe{actions={moveControlVector:this.moveControlVector.bind(new Proxy(this,this.readOnlyProxyHandler)),moveThroughPoint:this.moveThroughPoint.bind(new Proxy(this,this.readOnlyProxyHandler)),changeVectorControlDirection:this.changeVectorControlDirection.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["variableForChild","parMin","parMax","curveType","nThroughPoints","nDimensions","throughPoints"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.label.propagateToDescendants=!0,e.showLabel.propagateToDescendants=!0,e.layer.propagateToDescendants=!0,e.labelPosition={createComponentOfType:"text",createStateVariable:"labelPosition",defaultValue:"upperright",public:!0,forRenderer:!0,toLowerCase:!0,validValues:["upperright","upperleft","lowerright","lowerleft","top","bottom","left","right"],propagateToDescendants:!0},e.flipFunction={createComponentOfType:"boolean",createStateVariable:"flipFunction",defaultValue:!1,public:!0,forRenderer:!0},e.nDiscretizationPoints={createComponentOfType:"number",createStateVariable:"nDiscretizationPoints",defaultValue:100,public:!0},e.periodic={createComponentOfType:"boolean",createStateVariable:"periodic",defaultValue:!1,public:!0},e.splineTension={createComponentOfType:"number",createStateVariable:"splineTension",defaultValue:.8,clamp:[0,1],public:!0},e.extrapolateBackward={createComponentOfType:"boolean",createStateVariable:"extrapolateBackward",defaultValue:!1,public:!0,forRenderer:!0},e.extrapolateForward={createComponentOfType:"boolean",createStateVariable:"extrapolateForward",defaultValue:!1,public:!0,forRenderer:!0},e.splineForm={createComponentOfType:"text",createStateVariable:"splineForm",defaultValue:"centripetal",public:!0,toLowerCase:!0,validValues:["centripetal","uniform"]},e.variable={createComponentOfType:"variable",createStateVariable:"variableForChild",defaultValue:vr.fromAst("x")},e.through={createComponentOfType:"_pointListComponent"},e.parMin={createComponentOfType:"math"},e.parMax={createComponentOfType:"math"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){if(!r.every(l=>l.componentType==="string"||l.doenetAttributes&&l.doenetAttributes.createdFromMacro))return{success:!1};let o=Ja({childrenToComponentFunction:l=>({componentType:"function",children:l}),mustStripOffOuterParentheses:!0})({matchedChildren:r});return o.success?o:{success:!0,newChildren:[{componentType:"function",children:r}]}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"functions",componentTypes:["function"]},{group:"bezierControls",componentTypes:["bezierControls"]}]}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t});return e.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:r}){let a="";return r.selectedStyle.lineWidth>=4?a+="thick ":r.selectedStyle.lineWidth<=1&&(a+="thin "),r.selectedStyle.lineStyle==="dashed"?a+="dashed ":r.selectedStyle.lineStyle==="dotted"&&(a+="dotted "),a+=r.selectedStyle.lineColor,{newValues:{styleDescription:a}}}},e.curveType={forRenderer:!0,returnDependencies:()=>({functionChildren:{dependencyType:"child",childGroups:["functions"]},through:{dependencyType:"attributeComponent",attributeName:"through"}}),definition({dependencyValues:r}){let a="function";return r.through!==null?a="bezier":r.functionChildren.length>1&&(a="parameterization"),{newValues:{curveType:a}}}},e.fShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{fShadow:{variablesToCheck:["fShadow"]}}})},e.graphXmin={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"graphXmax",forRenderer:!0},{variableName:"graphYmin",forRenderer:!0},{variableName:"graphYmax",forRenderer:!0}],returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]}}),definition({dependencyValues:r}){return r.graphAncestor?{newValues:{graphXmin:r.graphAncestor.stateValues.xmin,graphXmax:r.graphAncestor.stateValues.xmax,graphYmin:r.graphAncestor.stateValues.ymin,graphYmax:r.graphAncestor.stateValues.ymax}}:{newValues:{graphXmin:null,graphXmax:null,graphYmin:null,graphYmax:null}}}},e.parMax={public:!0,componentType:"number",forRenderer:!0,defaultValue:10,returnDependencies:()=>({curveType:{dependencyType:"stateVariable",variableName:"curveType"},parMaxAttr:{dependencyType:"attributeComponent",attributeName:"parMax",variableNames:["value"]},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},extrapolateForward:{dependencyType:"stateVariable",variableName:"extrapolateForward"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["domain"]},adapterSourceDomain:{dependencyType:"adapterSourceStateVariable",variableName:"domain"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"}}),definition:function({dependencyValues:r}){let a;if(r.curveType==="bezier")a=r.nThroughPoints-1,r.extrapolateForward&&(a*=2);else if(r.parMaxAttr!==null)a=r.parMaxAttr.stateValues.value.evaluate_to_constant(),Number.isFinite(a)||(a=NaN);else if(r.curveType==="function"){let s=null;if(r.functionChild.length===1?s=r.functionChild[0].stateValues.domain:s=r.adapterSourceDomain,s!==null){s=s[0];try{a=s[1].evaluate_to_constant(),Number.isFinite(a)||(a=NaN)}catch(u){}}let o=r.graphXmax,l=r.graphXmin;if(o!==null&&l!==null&&(a===void 0?a=o+.1*(o-l):a=Math.min(a,o+.1*(o-l))),a===void 0)return{useEssentialOrDefaultValue:{parMax:{variablesToCheck:["parMax"],defaultValue:1/0}}}}else return{useEssentialOrDefaultValue:{parMax:{variablesToCheck:["parMax"]}}};return{newValues:{parMax:a}}}},e.parMin={forRenderer:!0,public:!0,componentType:"number",defaultValue:-10,returnDependencies:()=>({curveType:{dependencyType:"stateVariable",variableName:"curveType"},parMinAttr:{dependencyType:"attributeComponent",attributeName:"parMin",variableNames:["value"]},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},extrapolateBackward:{dependencyType:"stateVariable",variableName:"extrapolateBackward"},functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["domain"]},adapterSourceDomain:{dependencyType:"adapterSourceStateVariable",variableName:"domain"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"}}),definition:function({dependencyValues:r}){let a;if(r.curveType==="bezier")a=0,r.extrapolateBackward&&(a=-(r.nThroughPoints-1));else if(r.parMinAttr!==null)a=r.parMinAttr.stateValues.value.evaluate_to_constant(),Number.isFinite(a)||(a=NaN);else if(r.curveType==="function"){let s=null;if(r.functionChild.length===1?s=r.functionChild[0].stateValues.domain:s=r.adapterSourceDomain,s!==null){s=s[0];try{a=s[0].evaluate_to_constant(),Number.isFinite(a)||(a=NaN)}catch(u){}}let o=r.graphXmax,l=r.graphXmin;if(o!==null&&l!==null&&(a===void 0?a=l+.1*(l-o):a=Math.max(a,l+.1*(l-o))),a===void 0)return{useEssentialOrDefaultValue:{parMin:{variablesToCheck:["parMin"],defaultValue:-1/0}}}}else return{useEssentialOrDefaultValue:{parMin:{variablesToCheck:["parMin"]}}};return{newValues:{parMin:a}}}},e.nThroughPoints={returnDependencies:()=>({through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nPoints"]}}),definition({dependencyValues:r}){let a=0;return r.through!==null&&(a=r.through.stateValues.nPoints),{newValues:{nThroughPoints:a}}}},e.nDimensions={public:!0,componentType:"number",returnDependencies(){return{through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nDimensions"]}}},definition:function({dependencyValues:r}){return r.through!==null?{newValues:{nDimensions:r.through.stateValues.nDimensions},checkForActualChange:{nDimensions:!0}}:{newValues:{nDimensions:2}}}},e.throughPoints={public:!0,componentType:"math",isArray:!0,nDimensions:2,entryPrefixes:["throughPointX","throughPoint"],returnWrappingComponents(r){return r==="throughPointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if(r==="throughPointX"){let o=a.split("_").map(l=>Number(l)-1);return o.length===2&&o.every((l,u)=>Number.isInteger(l)&&l>=0)?s?o.every((l,u)=>l<s[u])?[String(o)]:[]:[String(o)]:[]}else{if(!s)return[];let o=Number(a)-1;return Number.isInteger(o)&&o>=0&&o<s[0]?Array.from(Array(s[1]),(l,u)=>o+","+u):[]}},returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints,r.nDimensions]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r){let[o,l]=s.split(","),u=Number(o)+1+"_"+(Number(l)+1);a[s]={through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["pointX"+u]}}}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let[l,u]=o.split(","),c=Number(l)+1+"_"+(Number(u)+1),p=r[o].through;p!==null&&p.stateValues["pointX"+c]?s[o]=p.stateValues["pointX"+c]:s[o]=vr.fromAst(0)}return{newValues:{throughPoints:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,initialChange:o,stateValues:l}){if(o&&!l.draggable)return{success:!1};let u=[];for(let c in r.throughPoints){let[p,m]=c.split(","),f=Number(p)+1+"_"+(Number(m)+1);if(a[c].through!==null&&a[c].through.stateValues["pointX"+f])u.push({setDependency:s[c].through,desiredValue:r.throughPoints[c],childIndex:0,variableIndex:0});else return{success:!1}}return{success:!0,instructions:u}}},e.numericalThroughPoints={isArray:!0,entryPrefixes:["numericalThroughPoint"],forRenderer:!0,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r)a[s]={throughPoint:{dependencyType:"stateVariable",variableName:"throughPoint"+(Number(s)+1)}};return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].throughPoint.map(u=>u.evaluate_to_constant());l.every(u=>Number.isFinite(u))||(l=Array(l.length).fill(NaN)),s[o]=l}return{newValues:{numericalThroughPoints:s}}}},e.haveBezierControls={forRenderer:!0,returnDependencies:()=>({controlChild:{dependencyType:"child",childGroups:["bezierControls"]}}),definition({dependencyValues:r}){return{newValues:{haveBezierControls:r.controlChild.length>0}}}},e.bezierControlsAlwaysVisible={forRenderer:!0,returnDependencies:()=>({controlChild:{dependencyType:"child",childGroups:["bezierControls"],variableNames:["alwaysVisible"]}}),definition({dependencyValues:r}){return{newValues:{bezierControlsAlwaysVisible:r.controlChild.length>0&&r.controlChild[0].stateValues.alwaysVisible}}}},e.vectorControlDirections={public:!0,componentType:"text",isArray:!0,entryPrefixes:["vectorControlDirection"],forRenderer:!0,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let o of r)a[o]={controlChild:{dependencyType:"child",childGroups:["bezierControls"],variableNames:["direction"+(Number(o)+1)]}};return{dependenciesByKey:a,globalDependencies:{haveBezierControls:{dependencyType:"stateVariable",variableName:"haveBezierControls"}}}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].controlChild;l&&l.length>0?s[o]=l[0].stateValues["direction"+(Number(o)+1)]:s[o]="none"}return{newValues:{vectorControlDirections:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:r,dependencyNamesByKey:a,dependencyValuesByKey:s,globalDependencyValues:o}){if(!o.haveBezierControls)return{success:!1};let l=[],u={};for(let c in r.vectorControlDirections){let p=s[c].controlChild;p&&p.length>0?l.push({setDependency:a[c].controlChild,desiredValue:r.vectorControlDirections[c],childIndex:0,variableIndex:0}):u[c]=r.vectorControlDirections[c]}return Object.keys(u).length>0&&l.push({setStateVariable:"vectorControlDirections",value:u}),{success:!0,instructions:l}}},e.hiddenControls={public:!0,componentType:"boolean",isArray:!0,entryPrefixes:["hiddenControl"],forRenderer:!0,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let o of r)a[o]={controlChild:{dependencyType:"child",childGroups:["bezierControls"],variableNames:["hiddenControl"+(Number(o)+1)]}};return{dependenciesByKey:a,globalDependencies:{haveBezierControls:{dependencyType:"stateVariable",variableName:"haveBezierControls"}}}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].controlChild;l&&l.length>0?s[o]=l[0].stateValues["hiddenControl"+(Number(o)+1)]:s[o]=!1}return{newValues:{hiddenControls:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:r,dependencyNamesByKey:a,dependencyValuesByKey:s,globalDependencyValues:o}){if(!o.haveBezierControls)return{success:!1};let l=[],u={};for(let c in r.hiddenControls){let p=s[c].controlChild;p&&p.length>0?l.push({setDependency:a[c].controlChild,desiredValue:r.hiddenControls[c],childIndex:0,variableIndex:0}):u[c]=r.hiddenControls[c]}return Object.keys(u).length>0&&l.push({setStateVariable:"hiddenControls",value:u}),{success:!0,instructions:l}}},e.controlVectors={isArray:!0,public:!0,componentType:"math",entryPrefixes:["controlVectorX","controlVector"],nDimensions:3,stateVariablesDeterminingDependencies:["vectorControlDirections","nThroughPoints"],returnWrappingComponents(r){return r==="controlVectorX"?[]:[["vector",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if(r==="controlVectorX"){let o=a.split("_").map(l=>Number(l)-1);return o.length===3&&o.every((l,u)=>Number.isInteger(l)&&l>=0)?s?o.every((l,u)=>l<s[u])?[String(o)]:[]:[String(o)]:[]}else{if(!s)return[];let o=a.split("_").map(l=>Number(l)-1);return o.length===2&&o.every((l,u)=>Number.isInteger(l)&&l>=0&&l<s[u])?Array.from(Array(s[2]),(l,u)=>String(o)+","+u):[]}},returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints,2,r.nDimensions]},returnArrayDependenciesByKey({arrayKeys:r,stateValues:a}){let s={haveBezierControls:{dependencyType:"stateVariable",variableName:"haveBezierControls"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},splineTension:{dependencyType:"stateVariable",variableName:"splineTension"},splineForm:{dependencyType:"stateVariable",variableName:"splineForm"}},o={};for(let l of r){let u=l.split(",").map(h=>Number(h)),c=u.map(h=>h+1),p=c.join("_");o[l]={direction:{dependencyType:"stateVariable",variableName:"vectorControlDirection"+c[0]},controlChild:{dependencyType:"child",childGroups:["bezierControls"],variableNames:["control"+p]}};let m=u[0],f=a.vectorControlDirections[m],d=[];f==="none"?d=[m-1,m,m+1]:f==="previous"?d=[m,m+1]:f==="next"&&(d=[m-1,m]);for(let h of d)h>=0&&h<a.nThroughPoints&&(o[l]["throughPoint"+(h+1)]={dependencyType:"stateVariable",variableName:"throughPoint"+(h+1)})}return{globalDependencies:s,dependenciesByKey:o}},arrayDefinitionByKey({globalDependencyValues:r,dependencyValuesByKey:a,arrayKeys:s}){let o={};for(let l of s){if(r.nDimensions!==2){o[l]=vr.fromAst(NaN);continue}if(l in o)continue;let u=l.split(",").map(h=>Number(h)),p=u.map(h=>h+1).join("_"),m=u[0],f=u[1],d=a[l].direction;if(d==="none"){let h=a[l]["throughPoint"+(m+1)],y,b;m>0&&(y=a[l]["throughPoint"+m]),m<r.nThroughPoints&&(b=a[l]["throughPoint"+(m+2)]);let{coordsNumeric:g,numericEntries:v}=Xx({tau:r.splineTension,eps:t.eps,splineForm:r.splineForm,point1:y,point2:h,point3:b});for(let C=0;C<2;C++){let w=m+","+f+","+C,S=m+","+(1-f)+","+C;f===0?(o[w]=g[C],o[S]=vr.fromAst(-g[C].tree)):(o[w]=vr.fromAst(-g[C].tree),o[S]=g[C])}}else if(u[1]===0&&d==="next"||u[1]===0&&d==="next"){let h=a[l]["throughPoint"+m],y=a[l]["throughPoint"+(m+1)],b=a[l]["throughPoint"+(m+2)],{coordsNumeric:g,numericEntries:v}=Xx({tau:r.splineTension,eps:t.eps,splineForm:r.splineForm,point1:h||b,point2:y,point3:void 0});for(let C=0;C<2;C++){let w=m+","+f+","+C;o[w]=g[C]}}else o[l]=a[l].controlChild[0].stateValues["control"+p]}return{newValues:{controlVectors:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:r,dependencyNamesByKey:a,dependencyValuesByKey:s,globalDependencyValues:o}){if(!o.haveBezierControls||o.nDimensions!==2)return{success:!1};let l=[];for(let u in r.controlVectors){let m=u.split(",").map(d=>Number(d)).map(d=>d+1).join("_"),f=s[u].controlChild;f.length>0&&f[0].stateValues["control"+m]&&l.push({setDependency:a[u].controlChild,desiredValue:r.controlVectors[u],childIndex:0,variableIndex:0})}return{success:!0,instructions:l}}},e.numericalControlVectors={isArray:!0,entryPrefixes:["numericalControlVector"],forRenderer:!0,nDimensions:2,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints,2]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r){let u=s.split(",").map(c=>Number(c)).map(c=>c+1).join("_");a[s]={controlVector:{dependencyType:"stateVariable",variableName:"controlVector"+u}}}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].controlVector.map(u=>u.tree);s[o]=l}return{newValues:{numericalControlVectors:s}}}},e.controlPoints={isArray:!0,public:!0,componentType:"math",entryPrefixes:["controlPointX","controlPoint"],nDimensions:3,returnWrappingComponents(r){return r==="controlPointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:r,varEnding:a,arraySize:s}){if(r==="controlPointX"){let o=a.split("_").map(l=>Number(l)-1);return o.length===3&&o.every((l,u)=>Number.isInteger(l)&&l>=0)?s?o.every((l,u)=>l<s[u])?[String(o)]:[]:[String(o)]:[]}else{if(!s)return[];let o=a.split("_").map(l=>Number(l)-1);return o.length===2&&o.every((l,u)=>Number.isInteger(l)&&l>=0&&l<s[u])?Array.from(Array(s[2]),(l,u)=>String(o)+","+u):[]}},returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints,2,r.nDimensions]},returnArrayDependenciesByKey({arrayKeys:r}){let a={haveBezierControls:{dependencyType:"stateVariable",variableName:"haveBezierControls"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}},s={};for(let o of r){let u=o.split(",").map(p=>Number(p)).map(p=>p+1),c=u.join("_");s[o]={throughPointX:{dependencyType:"stateVariable",variableName:"throughPointX"+u[0]+"_"+u[2]},controlVectorX:{dependencyType:"stateVariable",variableName:"controlVectorX"+c}}}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey({globalDependencyValues:r,dependencyValuesByKey:a,arrayKeys:s}){let o={};for(let l of s)if(r.nDimensions!==2)o[l]=vr.fromAst(NaN);else{let u=a[l].controlVectorX;if(u){let c=a[l].throughPointX.evaluate_to_constant();Number.isFinite(c)||(c=NaN),o[l]=vr.fromAst(c+u.tree)}else o[l]=null}return{newValues:{controlPoints:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:r,dependencyNamesByKey:a,dependencyValuesByKey:s,globalDependencyValues:o}){if(!o.haveBezierControls||o.nDimensions!==2)return{success:!1};let l=[];for(let u in r.controlPoints)if(s[u].controlVectorX){let p=s[u].throughPointX,m=r.controlPoints[u];m.tree&&(m=m.tree);let f=vr.fromAst(["+",m,["-",p.tree]]);l.push({setDependency:a[u].controlVectorX,desiredValue:f})}return{success:!0,instructions:l}}},e.numericalControlPoints={isArray:!0,entryPrefixes:["numericalControlPoint"],forRenderer:!0,nDimensions:2,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints,2]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r){let u=s.split(",").map(c=>Number(c)).map(c=>c+1).join("_");a[s]={controlPoint:{dependencyType:"stateVariable",variableName:"controlPoint"+u}}}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].controlPoint.map(u=>u.tree);s[o]=l}return{newValues:{numericalControlPoints:s}}}},e.splineCoeffs={isArray:!0,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:r}){return[r.nThroughPoints-1]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r){let o=Number(s)+1,l=o+1;a[s]={previousPoint:{dependencyType:"stateVariable",variableName:"numericalThroughPoint"+o},nextPoint:{dependencyType:"stateVariable",variableName:"numericalThroughPoint"+l},previousVector:{dependencyType:"stateVariable",variableName:"numericalControlVector"+o+"_2"},nextVector:{dependencyType:"stateVariable",variableName:"numericalControlVector"+l+"_1"}}}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a){let l=r[o].previousPoint,u=r[o].nextPoint,c=r[o].previousVector,p=r[o].nextVector,m=[];for(let f=0;f<2;f++)m.push(sz(l[f],u[f],3*c[f],-3*p[f]));s[o]=m}return{newValues:{splineCoeffs:s}}}},e.extrapolateBackwardCoeffs={stateVariablesDeterminingDependencies:["extrapolateBackward"],returnDependencies({stateValues:r}){let a={extrapolateBackward:{dependencyType:"stateVariable",variableName:"extrapolateBackward"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}};return r.extrapolateBackward&&(a.firstSplineCoeffs={dependencyType:"stateVariable",variableName:"splineCoeffs1"},a.graphXmin={dependencyType:"stateVariable",variableName:"graphXmin"},a.graphXmax={dependencyType:"stateVariable",variableName:"graphXmax"},a.graphYmin={dependencyType:"stateVariable",variableName:"graphYmin"},a.graphYmax={dependencyType:"stateVariable",variableName:"graphYmax"}),a},definition({dependencyValues:r}){if(!r.extrapolateBackward||!r.firstSplineCoeffs)return{newValues:{extrapolateBackwardCoeffs:null}};let a=r.firstSplineCoeffs[0],s=r.firstSplineCoeffs[1],o=a[0],l=a[1],u=2*a[2],c=s[0],p=s[1],m=2*s[2],f=l*l+p*p,d=(p*u-l*m)/(f*f);if(Math.abs(d)<1e-12||Math.abs(l)<1e-12||Math.abs(p)<1e-12){let b=l,g=p;if(r.graphXmin!==null&&r.graphXmax!==null&&r.graphYmin!==null&&r.graphYmax!==null){let C=r.graphXmax-r.graphXmin,w=r.graphYmax-r.graphYmin,S=r.nThroughPoints-1,A=C/S/Math.abs(b),E=w/S/Math.abs(g),I=Math.min(A,E);I>1&&(b*=I,g*=I)}return{newValues:{extrapolateBackwardCoeffs:[[o,b,0],[c,g,0]]}}}let h=p*d,y=-l*d;if(h*l>0){let b=h/y,g=(1+b*b)**2,v=l;if(r.graphXmin!==null&&r.graphXmax!==null&&r.graphYmin!==null&&r.graphYmax!==null){let A=r.graphXmax-r.graphXmin,E=r.graphYmax-r.graphYmin,I=r.nThroughPoints-1,V=A/I,O=1/0;if(y!==0){let M=y*g/2*I*I,L=-b*I,G=Math.sqrt(L*L+4*Math.abs(M)*E);O=(Math.abs(L)+G)/(2*Math.abs(M))}let k=Math.min(V,O);k>Math.abs(v)&&(v*=k/Math.abs(v))}let C=-v*b,w=y*v*v*g;return{newValues:{extrapolateBackwardCoeffs:[[o,v,0],[c,C,w/2]]}}}else{let b=y/h,g=(1+b*b)**2,v=p;if(r.graphXmin!==null&&r.graphXmax!==null&&r.graphYmin!==null&&r.graphYmax!==null){let A=r.graphXmax-r.graphXmin,E=r.graphYmax-r.graphYmin,I=r.nThroughPoints-1,V=E/I,O=1/0;if(h!==0){let M=h*g/2*I*I,L=-b*I,G=Math.sqrt(L*L+4*Math.abs(M)*A);O=(Math.abs(L)+G)/(2*Math.abs(M))}let k=Math.min(O,V);k>Math.abs(v)&&(v*=k/Math.abs(v))}let C=-v*b,w=h*v*v*g;return{newValues:{extrapolateBackwardCoeffs:[[o,C,w/2],[c,v,0]]}}}}},e.extrapolateForwardCoeffs={stateVariablesDeterminingDependencies:["nThroughPoints","extrapolateForward"],returnDependencies({stateValues:r}){let a={extrapolateForward:{dependencyType:"stateVariable",variableName:"extrapolateForward"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}};return r.extrapolateForward&&r.nThroughPoints>=2&&(a.lastSplineCoeffs={dependencyType:"stateVariable",variableName:"splineCoeffs"+(r.nThroughPoints-1)},a.graphXmin={dependencyType:"stateVariable",variableName:"graphXmin"},a.graphXmax={dependencyType:"stateVariable",variableName:"graphXmax"},a.graphYmin={dependencyType:"stateVariable",variableName:"graphYmin"},a.graphYmax={dependencyType:"stateVariable",variableName:"graphYmax"}),a},definition({dependencyValues:r}){if(!r.extrapolateForward||!r.lastSplineCoeffs)return{newValues:{extrapolateForwardCoeffs:null}};let a=r.lastSplineCoeffs[0],s=r.lastSplineCoeffs[1],o=a[0]+a[1]+a[2]+a[3],l=a[1]+2*a[2]+3*a[3],u=2*a[2]+6*a[3],c=s[0]+s[1]+s[2]+s[3],p=s[1]+2*s[2]+3*s[3],m=2*s[2]+6*s[3],f=l*l+p*p,d=(p*u-l*m)/(f*f);if(Math.abs(d)<1e-12||Math.abs(l)<1e-12||Math.abs(p)<1e-12){let b=l,g=p;if(r.graphXmin!==null&&r.graphXmax!==null&&r.graphYmin!==null&&r.graphYmax!==null){let C=r.graphXmax-r.graphXmin,w=r.graphYmax-r.graphYmin,S=r.nThroughPoints-1,A=C/S/Math.abs(b),E=w/S/Math.abs(g),I=Math.min(A,E);I>1&&(b*=I,g*=I)}return{newValues:{extrapolateForwardCoeffs:[[o,b,0],[c,g,0]]}}}let h=p*d,y=-l*d;if(h*l<0){let b=h/y,g=(1+b*b)**2,v=l;if(r.graphXmin!==null&&r.graphXmax!==null&&r.graphYmin!==null&&r.graphYmax!==null){let A=r.graphXmax-r.graphXmin,E=r.graphYmax-r.graphYmin,I=r.nThroughPoints-1,V=A/I,O=1/0;if(y!==0){let M=y*g/2*I*I,L=-b*I,G=Math.sqrt(L*L+4*Math.abs(M)*E);O=(Math.abs(L)+G)/(2*Math.abs(M))}let k=Math.min(V,O);k>Math.abs(v)&&(v*=k/Math.abs(v))}let C=-v*b,w=y*v*v*g;return{newValues:{extrapolateForwardCoeffs:[[o,v,0],[c,C,w/2]]}}}else{let b=y/h,g=(1+b*b)**2,v=p;if(r.graphXmin!==null&&r.graphXmax!==null&&r.graphYmin!==null&&r.graphYmax!==null){let A=r.graphXmax-r.graphXmin,E=r.graphYmax-r.graphYmin,I=r.nThroughPoints-1,V=E/I,O=1/0;if(h!==0){let M=h*g/2*I*I,L=-b*I,G=Math.sqrt(L*L+4*Math.abs(M)*A);O=(Math.abs(L)+G)/(2*Math.abs(M))}let k=Math.min(O,V);k>Math.abs(v)&&(v*=k/Math.abs(v))}let C=-v*b,w=h*v*v*g;return{newValues:{extrapolateForwardCoeffs:[[o,C,w/2],[c,v,0]]}}}}},e.fs={forRenderer:!0,isArray:!0,entryPrefixes:["f"],defaultEntryValue:()=>0,returnArraySizeDependencies:()=>({functionChildren:{dependencyType:"child",childGroups:["functions"]},curveType:{dependencyType:"stateVariable",variableName:"curveType"}}),returnArraySize({dependencyValues:r}){return r.curveType==="bezier"?[2]:[Math.max(1,r.functionChildren.length)]},returnArrayDependenciesByKey({arrayKeys:r}){let a={curveType:{dependencyType:"stateVariable",variableName:"curveType"},numericalThroughPoints:{dependencyType:"stateVariable",variableName:"numericalThroughPoints"},splineCoeffs:{dependencyType:"stateVariable",variableName:"splineCoeffs"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},extrapolateBackward:{dependencyType:"stateVariable",variableName:"extrapolateBackward"},extrapolateBackwardCoeffs:{dependencyType:"stateVariable",variableName:"extrapolateBackwardCoeffs"},extrapolateForward:{dependencyType:"stateVariable",variableName:"extrapolateForward"},extrapolateForwardCoeffs:{dependencyType:"stateVariable",variableName:"extrapolateForwardCoeffs"}},s={};for(let o of r)s[o]={functionChild:{dependencyType:"child",childGroups:["functions"],variableNames:["numericalf"],childIndices:[o]}},Number(o)===0&&(s[o].fShadow={dependencyType:"stateVariable",variableName:"fShadow"});return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey({globalDependencyValues:r,dependencyValuesByKey:a,arrayKeys:s}){if(r.curveType==="bezier")return{newValues:{fs:oz({globalDependencyValues:r,arrayKeys:s})}};let o={},l={};for(let u of s){let c=a[u].functionChild;c.length===1?o[u]=c[0].stateValues.numericalf:Number(u)===0&&a[u].fShadow?o[u]=a[u].fShadow:l[u]={variablesToCheck:[{variableName:"fs",arrayIndex:u}]}}return{newValues:{fs:o},useEssentialOrDefaultValue:{fs:l}}}},e.f={isAlias:!0,targetVariableName:"f1"},e.nearestPoint={returnDependencies:()=>({curveType:{dependencyType:"stateVariable",variableName:"curveType"},fs:{dependencyType:"stateVariable",variableName:"fs"},flipFunction:{dependencyType:"stateVariable",variableName:"flipFunction"},nDiscretizationPoints:{dependencyType:"stateVariable",variableName:"nDiscretizationPoints"},parMin:{dependencyType:"stateVariable",variableName:"parMin"},parMax:{dependencyType:"stateVariable",variableName:"parMax"},periodic:{dependencyType:"stateVariable",variableName:"periodic"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:r}){let a=null;return r.curveType==="function"?a=iz({dependencyValues:r,numerics:t}):["parameterization","bezier"].includes(r.curveType)&&(a=az({dependencyValues:r,numerics:t})),{newValues:{nearestPoint:a}}}},e}moveControlVector({controlVector:t,controlVectorInds:e,transient:r}){let a={[e+",0"]:vr.fromAst(t[0]),[e+",1"]:vr.fromAst(t[1])};return r?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"controlVectors",value:a,sourceInformation:{controlVectorMoved:e}}],transient:r}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"controlVectors",value:a,sourceInformation:{controlVectorMoved:e}}],event:{verb:"interacted",object:{componentId:this.componentName},result:{["controlVector"+e.join("_")]:t}}})}moveThroughPoint({throughPoint:t,throughPointInd:e,transient:r}){let a={[e+",0"]:vr.fromAst(t[0]),[e+",1"]:vr.fromAst(t[1])};r?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"throughPoints",value:a,sourceInformation:{throughPointMoved:e}}],transient:r}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"throughPoints",value:a,sourceInformation:{throughPointMoved:e}}],event:{verb:"interacted",object:{componentId:this.componentName},result:{["throughPoint"+e]:t}}})}changeVectorControlDirection({direction:t,throughPointInd:e}){this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"vectorControlDirection",value:{[e]:t}}]})}};T(ei,"componentType","curve"),T(ei,"rendererType","curve"),T(ei,"primaryStateVariableForDefinition","fShadow");function iz({dependencyValues:i,numerics:t}){let e=i.flipFunction,r=i.fs[0],a=i.nDiscretizationPoints,s=i.parMax,o=i.parMin,l=1,u=1;return i.graphXmin!==null&&i.graphXmax!==null&&i.graphYmin!==null&&i.graphYmax!==null&&(l=i.graphXmax-i.graphXmin,u=i.graphYmax-i.graphYmin),function(c){let p=c.x1.evaluate_to_constant(),m=c.x2.evaluate_to_constant(),f,d;e?(d=m,f=r(d)):(f=p,d=r(f));let h,y;o!==-1/0&&(e?(h=r(o),y=o):(h=o,y=r(o)));let b,g;if(s!==1/0&&(e?(b=r(s),g=s):(b=s,g=r(s))),!(Number.isFinite(f)&&Number.isFinite(d))){let _,F;e?(_=Math.abs(o-m),F=Math.abs(s-m)):(_=Math.abs(o-p),F=Math.abs(s-p)),_<F||!Number.isFinite(F)?(f=h,d=y):(f=b,d=g)}if(Number.isFinite(f)&&Number.isFinite(d)){let _={x1:f,x2:d};return c.x3!==void 0&&(_.x3=0),_}else if(!(Number.isFinite(p)&&Number.isFinite(m)))return{};let v=function(_){let F=-10*Math.log(1/_-1),z=p,H=m;return e?(z-=r(F),H-=F):(z-=F,H-=r(F)),z/=l,H/=u,z*z+H*H},C=0,w=1;o!==-1/0&&(C=1/(Math.exp(-o/10)+1)),s!==-1/0&&(w=1/(Math.exp(-s/10)+1));let S=a,A=(w-C)/S,E=C,I=v(C),V=C,O=C+A,k;for(let _=1;_<=S;_++){let F=C+_*A,z=v(F);Number.isFinite(z)&&Number.isFinite(k)&&(z<I||Number.isNaN(I))&&(E=F,I=z,V=F-A,_===S?O=F:O=F+A),k=z}let M=v(O);Number.isFinite(M)||(O-=A);let L=t.fminbr(v,[V,O]);E=L.x;let G=-10*Math.log(1/E-1),K=r(G),B;if(L.success&&Number.isFinite(G)&&Number.isFinite(K)?(e&&([G,K]=[K,G]),B=Math.pow((G-p)/l,2)+Math.pow((K-m)/u,2)):B=1/0,o!==-1/0){let _=Math.pow((h-p)/l,2)+Math.pow((y-m)/u,2);_<B&&(G=h,K=y,B=_)}if(s!==1/0){let _=Math.pow((b-p)/l,2)+Math.pow((g-m)/u,2);_<B&&(G=b,K=g,B=_)}if(Number.isFinite(f)&&Number.isFinite(d)){let _=Math.pow((f-p)/l,2)+Math.pow((d-m)/u,2);if(_<100*B)return L={x1:f,x2:d},c.x3!==void 0&&(L.x3=0),L;if(_<225*B){let z=(Math.sqrt(_/B)-10)/5,H,ie;return e?(ie=d*(1-z)+K*z,H=r(ie)):(H=f*(1-z)+G*z,ie=r(H)),Number.isFinite(H)&&Number.isFinite(ie)?(L={x1:H,x2:ie},c.x3!==void 0&&(L.x3=0),L):(L={x1:f,x2:d},c.x3!==void 0&&(L.x3=0),L)}}return L={x1:G,x2:K},c.x3!==void 0&&(L.x3=0),L}}function az({dependencyValues:i,numerics:t}){let e=i.fs,r=i.parMin,a=i.parMax,s=i.nDiscretizationPoints,o=i.periodic,l=1,u=1;return i.graphXmin!==null&&i.graphXmax!==null&&i.graphYmin!==null&&i.graphYmax!==null&&(l=i.graphXmax-i.graphXmin,u=i.graphYmax-i.graphYmin),function(c){if(i.fs.length!==2)return{};let p=c.x1.evaluate_to_constant(),m=c.x2.evaluate_to_constant();if(!(Number.isFinite(p)&&Number.isFinite(m)))return{};let f=function(I){let V=(p-e[0](I))/l,O=(m-e[1](I))/u;return V*V+O*O},d=r,h=a,y=s,b=(h-d)/y,g=d,v=f(d),C=d,w=d+b;for(let I=1;I<=y;I++){let V=d+I*b,O=f(V);(O<v||Number.isNaN(v))&&(g=V,v=O,C=V-b,I===y?w=V:w=V+b)}o&&(Math.abs(g-d)<t.eps?C=d-b:Math.abs(g-h)<t.eps&&(w=h+b));let S=t.fminbr(f,[C,w]);g=S.x;let A=e[0](g),E=e[1](g);return S={x1:A,x2:E},c.x3!==void 0&&(S.x3=0),S}}function Xx({tau:i,eps:t,point1:e,point2:r,point3:a,splineForm:s}){let o=function(d,h){let y=d[0]-h[0],b=d[1]-h[1];return Math.sqrt(y*y+b*b)},l,u,c;if(r)u=r.map(d=>d.evaluate_to_constant());else return{coordsNumeric:[vr.fromAst(NaN),vr.fromAst(NaN)],numericEntries:!1};if(a)c=a.map(d=>d.evaluate_to_constant()),e?l=e.map(d=>d.evaluate_to_constant()):l=[2*u[0]-c[0],2*u[1]-c[1]];else if(e)l=e.map(d=>d.evaluate_to_constant()),c=[2*u[0]-l[0],2*u[1]-l[1]];else return{coordsNumeric:[vr.fromAst(NaN),vr.fromAst(NaN)],numericEntries:!1};let p=[];if(s==="centripetal"){let d=o(l,u),h=o(u,c);d=Math.sqrt(d),h=Math.sqrt(h),h<t&&(h=1),d<t&&(d=h);for(let y=0;y<2;y++){let b=(u[y]-l[y])/d-(c[y]-l[y])/(h+d)+(c[y]-u[y])/h;b*=i*Math.sqrt(d*h),p.push(-b/3)}}else for(let d=0;d<2;d++)p.push(-i*(c[d]-l[d])/3);let m=p.map(d=>vr.fromAst(d)),f=Number.isFinite(p[0])&&Number.isFinite(p[1]);return{coordsNumeric:m,numericEntries:f}}function sz(i,t,e,r){return[i,e,-3*i+3*t-2*e-r,2*i-2*t+e+r]}function oz({globalDependencyValues:i,arrayKeys:t}){if(i.nThroughPoints<1){let o={};for(let l of t)o[l]=()=>NaN;return o}let e=i.nThroughPoints-1,r={},a=i.extrapolateBackward,s=i.extrapolateForward;for(let o of t){let l=i.numericalThroughPoints[0][o],u=i.numericalThroughPoints[e][o],c=i.splineCoeffs.map(f=>f[o]),p;a&&(p=i.extrapolateBackwardCoeffs[o]);let m;s&&(m=i.extrapolateForwardCoeffs[o]),r[o]=function(f){if(isNaN(f))return NaN;if(f<0)return a?(p[2]*f+p[1])*f+p[0]:l;if(f>=e)return s?(f-=e,(m[2]*f+m[1])*f+m[0]):u;let d=Math.floor(f);f-=d;let h=c[d];return((h[3]*f+h[2])*f+h[1])*f+h[0]}}return r}import gt from"math-expressions";var co=class extends ei{actions={moveCircle:this.moveCircle.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizeCirclePosition:this.finalizeCirclePosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["throughPoints","nThroughPoints","prescribedCenter","prescribedRadius","havePrescribedCenter","havePrescribedRadius"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.through={createComponentOfType:"_pointListComponent"},e.center={createComponentOfType:"point"},e.radius={createComponentOfType:"math"},delete e.parMin,delete e.parMax,delete e.variable,e}static returnChildGroups(){return[]}static returnStateVariableDefinitions(t){let e=Qe.returnStateVariableDefinitions(t),r=super.returnStateVariableDefinitions(t);return e.styleDescription=r.styleDescription,e.curveType={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{curveType:"circle"}})},e.parMax={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{parMax:NaN}})},e.parMin={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{parMin:NaN}})},e.fs={forRenderer:!0,isArray:!0,entryPrefixes:["f"],defaultEntryValue:()=>0,returnArraySizeDependencies:()=>({}),returnArraySize:()=>[0],returnArrayDependenciesByKey:()=>({}),arrayDefinitionByKey:()=>({newValues:{fs:{}}})},e.nThroughPoints={returnDependencies:()=>({throughAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nPoints"]}}),definition:function({dependencyValues:a}){return a.throughAttr!==null?{newValues:{nThroughPoints:a.throughAttr.stateValues.nPoints}}:{newValues:{nThroughPoints:0}}}},e.throughPoints={public:!0,componentType:"math",isArray:!0,nDimensions:2,entryPrefixes:["throughPointX","throughPoint"],returnWrappingComponents(a){return a==="throughPointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:a,varEnding:s,arraySize:o}){if(a==="throughPointX"){let l=s.split("_").map(u=>Number(u)-1);return l.length===2&&l.every((u,c)=>Number.isInteger(u)&&u>=0)?o?l.every((u,c)=>u<o[c])?[String(l)]:[]:[String(l)]:[]}else{if(!o)return[];let l=Number(s)-1;return Number.isInteger(l)&&l>=0&&l<o[0]?Array.from(Array(o[1]),(u,c)=>l+","+c):[]}},returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:a}){return[a.nThroughPoints,2]},returnArrayDependenciesByKey({arrayKeys:a}){let s={};for(let o of a){let[l,u]=o.split(","),c=Number(l)+1+"_"+(Number(u)+1);s[o]={throughAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["pointX"+c]}}}return{dependenciesByKey:s}},arrayDefinitionByKey({dependencyValuesByKey:a,arrayKeys:s}){let o={};for(let l of s){let[u,c]=l.split(","),p=Number(u)+1+"_"+(Number(c)+1),m=a[l].throughAttr;m!==null&&m.stateValues["pointX"+p]?o[l]=m.stateValues["pointX"+p]:o[l]=gt.fromAst("\uFF3F")}return{newValues:{throughPoints:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,dependencyValuesByKey:s,dependencyNamesByKey:o,initialChange:l,stateValues:u}){if(l&&!u.draggable)return{success:!1};let c=[];for(let p in a.throughPoints){let[m,f]=p.split(","),d=Number(m)+1+"_"+(Number(f)+1);if(s[p].throughAttr!==null&&s[p].throughAttr.stateValues["pointX"+d])c.push({setDependency:o[p].throughAttr,desiredValue:a.throughPoints[p],variableIndex:0});else return{success:!1}}return{success:!0,instructions:c}}},e.radiusShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{radiusShadow:{variablesToCheck:["radius","radiusShadow"]}}}),inverseDefinition:function({desiredStateVariableValues:a}){return{success:!0,instructions:[{setStateVariable:"radiusShadow",value:a.radiusShadow}]}}},e.centerShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{centerShadow:{variablesToCheck:["center","centerShadow"]}}}),inverseDefinition:function({desiredStateVariableValues:a}){return{success:!0,instructions:[{setStateVariable:"centerShadow",value:a.centerShadow}]}}},e.havePrescribedCenter={returnDependencies:()=>({centerAttr:{dependencyType:"attributeComponent",attributeName:"center"},centerShadow:{dependencyType:"stateVariable",variableName:"centerShadow"}}),definition:({dependencyValues:a})=>({newValues:{havePrescribedCenter:a.centerAttr!==null||a.centerShadow!==null},checkForActualChange:{havePrescribedCenter:!0}})},e.prescribedCenter={isArray:!0,entryPrefixes:["prescribedCenterX"],returnArraySizeDependencies:()=>({havePrescribedCenter:{dependencyType:"stateVariable",variableName:"havePrescribedCenter"}}),returnArraySize({dependencyValues:a}){return[a.havePrescribedCenter?2:0]},returnArrayDependenciesByKey({arrayKeys:a}){let s={centerShadow:{dependencyType:"stateVariable",variableName:"centerShadow"}},o={};for(let l of a){let u=Number(l)+1;o[l]={centerAttr:{dependencyType:"attributeComponent",attributeName:"center",variableNames:["x"+u]}}}return{globalDependencies:s,dependenciesByKey:o}},arrayDefinitionByKey:function({globalDependencyValues:a,dependencyValuesByKey:s,arrayKeys:o}){let l={};for(let u of o){let c=Number(u)+1;s[u].centerAttr!==null?l[u]=s[u].centerAttr.stateValues["x"+c]:a.centerShadow!==null&&(l[u]=a.centerShadow.get_component(Number(u)))}return{newValues:{prescribedCenter:l}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,globalDependencyValues:s,dependencyValuesByKey:o,dependencyNamesByKey:l,arraySize:u}){let c=[],p=!1;for(let m of Object.keys(a.prescribedCenter).reverse())o[m].centerAttr!==null?c.push({setDependency:l[m].centerAttr,desiredValue:a.prescribedCenter[m],variableIndex:0}):s.centerShadow!==null&&(p=!0);if(p)if(u[0]>1){let m=["vector"];for(let f in a.prescribedCenter)m[Number(f)+1]=a.prescribedCenter[f].tree;m.length=u[0]+1,c.push({setDependency:"centerShadow",desiredValue:gt.fromAst(m)})}else u[0]===1&&"0"in a.prescribedCenter&&c.push({setDependency:"centerShadow",desiredValue:a.prescribedCenter[0]});return{success:!0,instructions:c}}},e.prescribedRadius={defaultValue:null,returnDependencies:()=>({radiusAttr:{dependencyType:"attributeComponent",attributeName:"radius",variableNames:["value"]},radiusShadow:{dependencyType:"stateVariable",variableName:"radiusShadow"}}),definition:function({dependencyValues:a}){return a.radiusAttr!==null?{newValues:{prescribedRadius:a.radiusAttr.stateValues.value}}:{newValues:{prescribedRadius:a.radiusShadow}}},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s}){return s.radiusAttr!==null?{success:!0,instructions:[{setDependency:"radiusAttr",desiredValue:a.prescribedRadius,childIndex:0,variableIndex:0}]}:{success:!0,instructions:[{setDependency:"radiusShadow",desiredValue:a.prescribedRadius}]}}},e.havePrescribedRadius={returnDependencies:()=>({radiusAttr:{dependencyType:"attributeComponent",attributeName:"radius"},radiusShadow:{dependencyType:"stateVariable",variableName:"radiusShadow"}}),definition:({dependencyValues:a})=>({newValues:{havePrescribedRadius:a.radiusAttr!==null||a.radiusShadow!==null},checkForActualChange:{havePrescribedRadius:!0}})},e.numericalPrescribedRadius={returnDependencies:()=>({prescribedRadius:{dependencyType:"stateVariable",variableName:"prescribedRadius"}}),additionalStateVariablesDefined:["haveNonNumericalPrescribedRadius"],definition:function({dependencyValues:a}){let s=!1,o;return a.prescribedRadius===null?o=null:(o=a.prescribedRadius.evaluate_to_constant(),Number.isFinite(o)||(o=NaN,s=!0)),{newValues:{haveNonNumericalPrescribedRadius:s,numericalPrescribedRadius:o},checkForActualChange:{haveNonNumericalEntriesNumericalRadius:!0}}},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s,stateValues:o}){return o.haveNonNumericalPrescribedRadius?{success:!1}:a.numericalPrescribedRadius!==void 0?s.prescribedRadius===null?{success:!1}:{success:!0,instructions:[{setDependency:"prescribedRadius",desiredValue:gt.fromAst(a.numericalPrescribedRadius)}]}:{success:!1}}},e.numericalPrescribedCenter={isArray:!0,entryPrefixes:["numericalPrescribedCenterX"],returnArraySizeDependencies:()=>({havePrescribedCenter:{dependencyType:"stateVariable",variableName:"havePrescribedCenter"}}),returnArraySize({dependencyValues:a}){return[a.havePrescribedCenter?2:0]},returnArrayDependenciesByKey({arrayKeys:a}){let s={};for(let o of a){let l=Number(o)+1;s[o]={prescribedCenterX:{dependencyType:"stateVariable",variableName:"prescribedCenterX"+l}}}return{dependenciesByKey:s}},arrayDefinitionByKey:function({dependencyValuesByKey:a,arrayKeys:s}){let o={};for(let l of s){let u=a[l].prescribedCenterX;u?(o[l]=u.evaluate_to_constant(),Number.isFinite(o[l])||(o[l]=NaN)):o[l]=NaN}return{newValues:{numericalPrescribedCenter:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,dependencyNamesByKey:s}){let o=[];for(let l in a.numericalPrescribedCenter)o.push({setDependency:s[l].prescribedCenterX,desiredValue:gt.fromAst(a.numericalPrescribedCenter[l])});return{success:!0,instructions:o}}},e.haveNonNumericalPrescribedCenter={returnDependencies:()=>({numericalPrescribedCenter:{dependencyType:"stateVariable",variableName:"numericalPrescribedCenter"}}),definition({dependencyValues:a}){return{newValues:{haveNonNumericalPrescribedCenter:a.numericalPrescribedCenter.some(o=>!Number.isFinite(o))},checkForActualChange:{haveNonNumericalPrescribedCenter:!0}}}},e.numericalThroughPoints={returnDependencies:()=>({throughPoints:{dependencyType:"stateVariable",variableName:"throughPoints"}}),additionalStateVariablesDefined:["haveNonNumericalThroughPoints"],definition:function({dependencyValues:a}){let s=!1,o=[];for(let l of a.throughPoints){let u=[];for(let c=0;c<2;c++){let p;try{p=l[c].evaluate_to_constant()}catch(m){console.warn("Invalid point of circle"),s=!0,u=[];break}if(Number.isFinite(p))u.push(p);else{s=!0,u=[];break}}if(u.length>0)o.push(u);else{o=[];break}}return{newValues:{haveNonNumericalThroughPoints:s,numericalThroughPoints:o},checkForActualChange:{haveNonNumericalThroughPoints:!0}}},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s,stateValues:o}){if(o.haveNonNumericalThroughPoints)return{success:!1};if(a.numericalThroughPoints!==void 0){let l={};for(let[u,c]of a.numericalThroughPoints.entries())l[u+",0"]=gt.fromAst(c[0]),l[u+",1"]=gt.fromAst(c[1]);return{success:!0,instructions:[{setDependency:"throughPoints",desiredValue:l}]}}return{success:!1}}},e.haveNumericalEntries={returnDependencies:()=>({haveNonNumericalPrescribedCenter:{dependencyType:"stateVariable",variableName:"haveNonNumericalPrescribedCenter"},haveNonNumericalPrescribedRadius:{dependencyType:"stateVariable",variableName:"haveNonNumericalPrescribedRadius"},haveNonNumericalThroughPoints:{dependencyType:"stateVariable",variableName:"haveNonNumericalThroughPoints"}}),definition:({dependencyValues:a})=>({newValues:{haveNumericalEntries:!(a.haveNonNumericalPrescribedCenter||a.haveNonNumericalPrescribedRadius||a.haveNonNumericalThroughPoints)}})},e.numericalRadiusCalculatedWithCenter={additionalStateVariablesDefined:["numericalCenterCalculatedWithRadius"],returnDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},numericalThroughPoints:{dependencyType:"stateVariable",variableName:"numericalThroughPoints"},haveNumericalEntries:{dependencyType:"stateVariable",variableName:"haveNonNumericalThroughPoints"}}),definition:function({dependencyValues:a}){if(a.haveNonNumericalThroughPoints){let s="Haven't implemented circle through "+a.nThroughPoints+" points";return s+=" in case where don't have numerical values.",console.warn(s),{newValues:{numericalRadiusCalculatedWithCenter:null,numericalCenterCalculatedWithRadius:null}}}if(a.nThroughPoints===2){let{numericalCenter:s,numericalRadius:o}=uT({point1:a.numericalThroughPoints[0],point2:a.numericalThroughPoints[1]});return{newValues:{numericalCenterCalculatedWithRadius:s,numericalRadiusCalculatedWithCenter:o}}}else if(a.nThroughPoints===3){let s=a.numericalThroughPoints[0][0],o=a.numericalThroughPoints[1][0],l=a.numericalThroughPoints[2][0],u=a.numericalThroughPoints[0][1],c=a.numericalThroughPoints[1][1],p=a.numericalThroughPoints[2][1],m,f;if(s===o&&u===c)if(s===l&&u===p)m=[s,u],f=0;else{let d=uT({point1:[s,u],point2:[l,p]});m=d.numericalCenter,f=d.numericalRadius}else if(s===l&&u===p||o===l&&c===p){let d=uT({point1:[s,u],point2:[o,c]});m=d.numericalCenter,f=d.numericalRadius}else{let d=s*s+u*u,h=o*o+c*c,y=l*l+p*p,b=s*(c-p)-u*(o-l)+o*p-l*c,g=d*(p-c)+h*(u-p)+y*(c-u),v=d*(o-l)+h*(l-s)+y*(s-o),C=d*(l*c-o*p)+h*(s*p-l*u)+y*(o*u-s*c);b!==0?(m=[-g/(2*b),-v/(2*b)],f=Math.sqrt((g*g+v*v-4*b*C)/(4*b*b))):(m=[NaN,NaN],f=NaN)}return{newValues:{numericalCenterCalculatedWithRadius:m,numericalRadiusCalculatedWithCenter:f}}}else return a.nThroughPoints>3?(console.warn("Can't calculate circle through more than 3 points"),{newValues:{numericalRadiusCalculatedWithCenter:null,numericalCenterCalculatedWithRadius:null}}):{newValues:{numericalRadiusCalculatedWithCenter:null,numericalCenterCalculatedWithRadius:null}}}},e.numericalRadius={forRenderer:!0,stateVariablesDeterminingDependencies:["nThroughPoints","havePrescribedCenter","havePrescribedRadius"],defaultValue:1,returnDependencies:function({stateValues:a}){let s={haveNonNumericalPrescribedRadius:{dependencyType:"stateVariable",variableName:"haveNonNumericalPrescribedRadius"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}};return a.havePrescribedRadius?(s.numericalPrescribedRadius={dependencyType:"stateVariable",variableName:"numericalPrescribedRadius"},a.havePrescribedCenter&&a.nThroughPoints>0&&(s.haveCenterRadiusPoints={dependencyType:"value",value:!0})):a.havePrescribedCenter?a.nThroughPoints===1&&(s.haveNonNumericalPrescribedCenter={dependencyType:"stateVariable",variableName:"haveNonNumericalPrescribedCenter"},s.numericalPrescribedCenter={dependencyType:"stateVariable",variableName:"numericalPrescribedCenter"},s.haveNonNumericalThroughPoints={dependencyType:"stateVariable",variableName:"haveNonNumericalThroughPoints"},s.numericalThroughPoints={dependencyType:"stateVariable",variableName:"numericalThroughPoints"}):a.nThroughPoints>1&&(s.numericalRadiusCalculatedWithCenter={dependencyType:"stateVariable",variableName:"numericalRadiusCalculatedWithCenter"},s.numericalThroughPoints={dependencyType:"stateVariable",variableName:"numericalThroughPoints"}),s},definition:function({dependencyValues:a}){if(a.haveNonNumericalPrescribedRadius||a.haveNonNumericalPrescribedCenter||a.haveNonNumericalThroughPoints)return{newValues:{numericalRadius:NaN}};if(a.numericalPrescribedRadius!==void 0)return a.haveCenterRadiusPoints?(console.warn("Can't calculate circle with specified radius and center and through points"),{newValues:{numericalRadius:NaN}}):{newValues:{numericalRadius:Math.max(0,a.numericalPrescribedRadius)}};if(a.numericalPrescribedCenter!==void 0){if(a.nThroughPoints===0)return{useEssentialOrDefaultValue:{numericalRadius:{variablesToCheck:"numericalRadius"}}};if(a.nThroughPoints===1){let s=a.numericalThroughPoints[0];return s===void 0?{newValues:{numericalRadius:NaN}}:{newValues:{numericalRadius:Math.sqrt(Math.pow(s[0]-a.numericalPrescribedCenter[0],2)+Math.pow(s[1]-a.numericalPrescribedCenter[1],2))}}}else return console.warn("Can't calculate circle with specified center through more than 1 point"),{newValues:{numericalRadius:NaN}}}return a.nThroughPoints<2?{useEssentialOrDefaultValue:{numericalRadius:{variablesToCheck:"numericalRadius"}}}:{newValues:{numericalRadius:a.numericalRadiusCalculatedWithCenter}}},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s,stateValues:o}){if(s.numericalPrescribedRadius!==void 0)return{success:!0,instructions:[{setDependency:"numericalPrescribedRadius",desiredValue:Math.max(0,a.numericalRadius)}]};if(s.numericalPrescribedCenter!==void 0){if(s.nThroughPoints===0)return{success:!0,instructions:[{setStateVariable:"numericalRadius",value:Math.max(0,a.numericalRadius)}]};if(s.nThroughPoints===1){let l=Math.max(0,a.numericalRadius),u=o.throughAngles[0];if(!Number.isFinite(u))return{success:!1};let c=[o.numericalCenter[0]+l*Math.cos(u),o.numericalCenter[1]+l*Math.sin(u)];return{success:!0,instructions:[{setDependency:"numericalThroughPoints",desiredValue:[c]}]}}else return{success:!1}}if(s.nThroughPoints<2)return{success:!0,instructions:[{setStateVariable:"numericalRadius",value:Math.max(0,a.numericalRadius)}]};{let l=[],u=Math.max(0,a.numericalRadius);for(let c=0;c<s.nThroughPoints;c++){let p=o.throughAngles[c];if(!Number.isFinite(p))return{success:!1};let m=[o.numericalCenter[0]+u*Math.cos(p),o.numericalCenter[1]+u*Math.sin(p)];l.push(m)}return{success:!0,instructions:[{setDependency:"numericalThroughPoints",desiredValue:l}]}}}},e.numericalCenter={forRenderer:!0,isArray:!0,entryPrefixes:["numericalCenterX"],defaultEntryValue:0,stateVariablesDeterminingDependencies:["nThroughPoints","havePrescribedCenter","havePrescribedRadius"],returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey({arrayKeys:a,stateValues:s}){let o={},l={};if(s.havePrescribedCenter){for(let u of a){let c=Number(u)+1;l[u]={numericalPrescribedCenterX:{dependencyType:"stateVariable",variableName:"numericalPrescribedCenterX"+c}}}s.havePrescribedRadius&&s.nThroughPoints>0&&(o.haveCenterRadiusPoints={dependencyType:"value",value:!0})}else o.nThroughPoints={dependencyType:"stateVariable",variableName:"nThroughPoints"},o.numericalThroughPoints={dependencyType:"stateVariable",variableName:"numericalThroughPoints"},o.haveNonNumericalThroughPoints={dependencyType:"stateVariable",variableName:"haveNonNumericalThroughPoints"},s.havePrescribedRadius?o.numericalRadius={dependencyType:"stateVariable",variableName:"numericalRadius"}:s.nThroughPoints==1?o.numericalRadius={dependencyType:"stateVariable",variableName:"numericalRadius"}:s.nThroughPoints>1&&(o.numericalCenterCalculatedWithRadius={dependencyType:"stateVariable",variableName:"numericalCenterCalculatedWithRadius"});return{globalDependencies:o,dependenciesByKey:l}},arrayDefinitionByKey:function({globalDependencyValues:a,dependencyValuesByKey:s,arrayKeys:o}){let l={};for(let u of o)if(s[u].numericalPrescribedCenterX!==void 0){if(a.haveCenterRadiusPoints)return console.warn("Can't calculate circle with specified radius and center and through points"),{newValues:{numericalCenter:[NaN,NaN]}};l[u]=s[u].numericalPrescribedCenterX}if(Object.keys(l).length>0)return{newValues:{numericalCenter:l}};if(a.haveNonNumericalPrescribedRadius||a.haveNonNumericalThroughPoints)return{newValues:{numericalCenter:[NaN,NaN]}};if(a.numericalRadius!==void 0)if(a.nThroughPoints===0){let u={};for(let c of o)u[c]={variablesToCheck:"numericalCenterX"+c};return{useEssentialOrDefaultValue:{numericalCenter:u}}}else{if(a.nThroughPoints===1)return a.numericalThroughPoints.length<1?{newValues:{numericalCenter:[NaN,NaN]}}:{newValues:{numericalCenter:[a.numericalThroughPoints[0][0],a.numericalThroughPoints[0][1]-a.numericalRadius]}};if(a.nThroughPoints===2){if(a.numericalThroughPoints.length<2)return{newValues:{numericalCenter:[NaN,NaN]}};let u=a.numericalRadius,c=a.numericalThroughPoints[0][0],p=a.numericalThroughPoints[1][0],m=a.numericalThroughPoints[0][1],f=a.numericalThroughPoints[1][1],d=Math.pow(c-p,2)+Math.pow(m-f,2),h=u*u;if(u<0||4*h<d)return console.warn("Can't find circle through given radius and two points"),{newValues:{numericalCenter:[NaN,NaN]}};if(d===0)return{newValues:{numericalCenter:[c,m-u]}};let y=.5*(d*(c+p)+(m-f)*Math.sqrt((4*h-d)*d))/d,b=.5*(d*(m+f)+(p-c)*Math.sqrt((4*h-d)*d))/d;return{newValues:{numericalCenter:[y,b]}}}else return console.warn("Can't create circle through more than two points with given radius"),{newValues:{numericalCenter:[NaN,NaN]}}}if(a.nThroughPoints===0){let u={};for(let c of o)u[c]={variablesToCheck:"numericalCenterX"+c};return{useEssentialOrDefaultValue:{numericalCenter:u}}}else return a.numericalCenterCalculatedWithRadius===void 0?{newValues:{numericalCenter:[NaN,NaN]}}:{newValues:{numericalCenter:a.numericalCenterCalculatedWithRadius}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,globalDependencyValues:s,dependencyValuesByKey:o,dependencyNamesByKey:l,stateValues:u,workspace:c}){let p=[];for(let m in a.numericalCenter)o[m].numericalPrescribedCenterX!==void 0&&p.push({setDependency:l[m].numericalPrescribedCenterX,desiredValue:a.numericalCenter[m]});if(p.length>0)return{success:!0,instructions:p};if(s.nThroughPoints===0){for(let m in a.numericalCenter)p.push({setStateVariable:"numericalCenter",value:{[m]:a.numericalCenter[m]}});return{success:!0,instructions:p}}else{c.desiredCenter||(c.desiredCenter={});for(let f=0;f<2;f++)a.numericalCenter[f]!==void 0?c.desiredCenter[f]=a.numericalCenter[f]:c.desiredCenter[f]===void 0&&(c.desiredCenter[f]=u.numericalCenter[f]);let m=[];for(let f=0;f<s.nThroughPoints;f++){let d=u.throughAngles[f];if(!Number.isFinite(d))return{success:!1};let h=[c.desiredCenter[0]+u.numericalRadius*Math.cos(d),c.desiredCenter[1]+u.numericalRadius*Math.sin(d)];m.push(h)}return{success:!0,instructions:[{setDependency:"numericalThroughPoints",desiredValue:m}]}}}},e.throughAngles={forRenderer:!0,defaultValue:[],returnDependencies:()=>({haveNumericalEntries:{dependencyType:"stateVariable",variableName:"haveNumericalEntries"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"},numericalThroughPoints:{dependencyType:"stateVariable",variableName:"numericalThroughPoints"},numericalRadius:{dependencyType:"stateVariable",variableName:"numericalRadius"},numericalCenter:{dependencyType:"stateVariable",variableName:"numericalCenter"}}),definition:function({dependencyValues:a}){if(!(a.haveNumericalEntries&&a.nThroughPoints>0&&a.numericalRadius>0&&a.numericalCenter.every(o=>Number.isFinite(o))))return{useEssentialOrDefaultValue:{throughAngles:{variablesToCheck:["throughAngles"]}}};let s=[];for(let o of a.numericalThroughPoints)s.push(Math.atan2(o[1]-a.numericalCenter[1],o[0]-a.numericalCenter[0]));return{newValues:{throughAngles:s},makeEssential:{throughAngles:!0}}}},e.radius={public:!0,componentType:"math",stateVariablesDeterminingDependencies:["nThroughPoints","havePrescribedCenter","havePrescribedRadius"],defaultValue:gt.fromAst(1),returnDependencies:function({stateValues:a}){let s={numericalRadius:{dependencyType:"stateVariable",variableName:"numericalRadius"},nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}};return a.havePrescribedRadius?(s.prescribedRadius={dependencyType:"stateVariable",variableName:"prescribedRadius"},a.havePrescribedCenter&&a.nThroughPoints>0&&(s.haveCenterRadiusPoints={dependencyType:"value",value:!0})):a.havePrescribedCenter&&a.nThroughPoints===1&&(s.prescribedCenter={dependencyType:"stateVariable",variableName:"prescribedCenter"},s.throughPoints={dependencyType:"stateVariable",variableName:"throughPoints"}),s},definition:function({dependencyValues:a}){if(Number.isFinite(a.numericalRadius))return{newValues:{radius:gt.fromAst(a.numericalRadius)},makeEssential:{radius:!0}};if(a.prescribedRadius!==void 0)return a.haveCenterRadiusPoints?(console.warn("Can't calculate circle with specified radius and center and through points"),{newValues:{radius:gt.fromAst("\uFF3F")}}):{newValues:{radius:a.prescribedRadius}};if(a.prescribedCenter!==void 0){if(a.nThroughPoints===0)return{useEssentialOrDefaultValue:{radius:{variablesToCheck:"radius"}}};if(a.nThroughPoints===1)try{let s=a.throughPoints[0],o=s[0],l=s[1],u=a.prescribedCenter[0],c=a.prescribedCenter[1];return{newValues:{radius:o.subtract(u).pow(2).add(l.subtract(c).pow(2)).pow(.5).simplify()}}}catch(s){return console.warn("Invalid center or through points of circle"),{newValues:{radius:gt.fromAst("\uFF3F")}}}else return console.warn("Can't calculate circle with specified center through more than 1 point"),{newValues:{radius:gt.fromAst("\uFF3F")}}}return a.nThroughPoints<2?{useEssentialOrDefaultValue:{radius:{variablesToCheck:"radius"}}}:(console.warn(`Have not implemented circle through ${a.nThroughPoints} points when non-numerical values`),{newValues:{radius:gt.fromAst("\uFF3F")}})},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s,stateValues:o}){let l=a.radius.evaluate_to_constant();if(Number.isFinite(l)&&Number.isFinite(s.numericalRadius))return{success:!0,instructions:[{setDependency:"numericalRadius",desiredValue:l}]};if(s.prescribedRadius!==void 0)return{success:!0,instructions:[{setDependency:"prescribedRadius",desiredValue:a.radius}]};if(s.nThroughPoints===0){let u=[{setStateVariable:"radius",value:a.radius}];return Number.isFinite(l)&&u.push({setDependency:"numericalRadius",desiredValue:l}),{success:!0,instructions:u}}else return console.warn("Can't change radius of circle with non-numerical values through points"),{success:!1}}},e.diameter={public:!0,componentType:"math",returnDependencies:()=>({radius:{dependencyType:"stateVariable",variableName:"radius"}}),definition({dependencyValues:a}){return{newValues:{diameter:a.radius.multiply(2).simplify()}}},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s,stateValues:o}){return{success:!0,instructions:[{setDependency:"radius",desiredValue:a.diameter.divide(2).simplify()}]}}},e.center={forRenderer:!0,public:!0,componentType:"math",isArray:!0,entryPrefixes:["centerX"],defaultEntryValue:gt.fromAst(0),returnWrappingComponents(a){return a==="centerX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},stateVariablesDeterminingDependencies:["nThroughPoints","havePrescribedCenter","havePrescribedRadius"],returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey({arrayKeys:a,stateValues:s}){let o={},l={};if(s.havePrescribedCenter){o.havePrescribedCenter={dependencyType:"value",value:!0};for(let u of a){let c=Number(u)+1;l[u]={numericalCenterX:{dependencyType:"stateVariable",variableName:"numericalCenterX"+c},prescribedCenterX:{dependencyType:"stateVariable",variableName:"prescribedCenterX"+c}}}s.havePrescribedRadius&&s.nThroughPoints>0&&(o.haveCenterRadiusPoints={dependencyType:"value",value:!0})}else o.numericalCenter={dependencyType:"stateVariable",variableName:"numericalCenter"},o.nThroughPoints={dependencyType:"stateVariable",variableName:"nThroughPoints"},o.throughPoints={dependencyType:"stateVariable",variableName:"throughPoints"},s.havePrescribedRadius?o.radius={dependencyType:"stateVariable",variableName:"prescribedRadius"}:s.nThroughPoints==1&&(o.radius={dependencyType:"stateVariable",variableName:"radius"});return{dependenciesByKey:l,globalDependencies:o}},arrayDefinitionByKey:function({globalDependencyValues:a,dependencyValuesByKey:s,arrayKeys:o}){if(a.havePrescribedCenter){if(a.haveCenterRadiusPoints)return console.warn("Can't calculate circle with specified radius and center and through points"),{newValues:{center:[gt.fromAst("\uFF3F"),gt.fromAst("\uFF3F")]}};let l={};for(let u of o)Number.isFinite(s[u].numericalCenterX)?l[u]=gt.fromAst(s[u].numericalCenterX):l[u]=s[u].prescribedCenterX;return{newValues:{center:l}}}if(a.numericalCenter.every(l=>Number.isFinite(l)))return{newValues:{center:a.numericalCenter.map(l=>gt.fromAst(l))},makeEssential:{center:!0}};if(a.radius!==void 0)if(a.nThroughPoints===0){let l={};for(let u of o)l[u]={variablesToCheck:"centerX"+u};return{useEssentialOrDefaultValue:{center:l}}}else if(a.nThroughPoints===1){let l;try{l=[a.throughPoints[0][0],a.throughPoints[0][1].subtract(a.radius).simplify()]}catch(u){l=[gt.fromAst("\uFF3F"),gt.fromAst("\uFF3F")]}return{newValues:{center:l}}}else return console.warn("Can't create circle through more than one point with given radius when don't have numerical values"),{newValues:{center:[gt.fromAst("\uFF3F"),gt.fromAst("\uFF3F")]}};if(a.nThroughPoints===0){let l={};for(let u of o)l[u]={variablesToCheck:"centerX"+u};return{useEssentialOrDefaultValue:{center:l}}}else return console.warn("Can't create circle through more than one point when don't have numerical values"),{newValues:{center:[gt.fromAst("\uFF3F"),gt.fromAst("\uFF3F")]}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,globalDependencyValues:s,stateValues:o,dependencyNamesByKey:l,workspace:u}){if(s.havePrescribedCenter){let m=[];for(let f in a.center)m.push({setDependency:l[f].prescribedCenterX,desiredValue:a.center[f],arrayKey:f});return{success:!0,instructions:m}}u.desiredCenter||(u.desiredCenter={});for(let m=0;m<2;m++)a.center[m]!==void 0?u.desiredCenter[m]=a.center[m]:u.desiredCenter[m]===void 0&&(u.desiredCenter[m]=o.center[m]);let c=[],p=!0;for(let m=0;m<2;m++){let f=u.desiredCenter[m].evaluate_to_constant();if(!Number.isFinite(f)){p=!1;break}c.push(f)}if(p&&s.numericalCenter.every(m=>Number.isFinite(m)))return{success:!0,instructions:[{setDependency:"numericalCenter",desiredValue:c}]};if(s.nThroughPoints===0){let m=[{setStateVariable:"center",value:u.desiredCenter}];return p&&m.push({setDependency:"numericalCenter",desiredValue:c}),{success:!0,instructions:m}}else return console.warn("Haven't implemented changing center of circle through points with non numerical values"),{success:!1}}},e.nearestPoint={returnDependencies:()=>({numericalCenter:{dependencyType:"stateVariable",variableName:"numericalCenter"},numericalRadius:{dependencyType:"stateVariable",variableName:"numericalRadius"}}),definition({dependencyValues:a}){let s=a.numericalRadius,o=a.numericalCenter[0],l=a.numericalCenter[1];return{newValues:{nearestPoint:function(u){let c=u.x1.evaluate_to_constant(),p=u.x2.evaluate_to_constant();if(!(Number.isFinite(c)&&Number.isFinite(p)))return{};if(!(Number.isFinite(o)&&Number.isFinite(l)&&Number.isFinite(s)))return{};let m=Math.atan2(p-l,c-o),f={x1:o+s*Math.cos(m),x2:l+s*Math.sin(m)};return u.x3!==void 0&&(f.x3=0),f}}}}},e}moveCircle({center:t,radius:e,throughAngles:r,transient:a}){let s=[];if((this.stateValues.nThroughPoints<=1||this.stateValues.numericalPrescribedCenter!==null)&&s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"numericalCenter",value:t}),this.stateValues.nThroughPoints>=1){let o=[];r===void 0&&(r=this.stateValues.throughAngles),e===void 0&&(e=this.stateValues.numericalRadius);for(let l=0;l<this.stateValues.nThroughPoints;l++){let u=r[l],c=[t[0]+e*Math.cos(u),t[1]+e*Math.sin(u)];o.push(c)}s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"numericalThroughPoints",value:o})}return a?this.coreFunctions.performUpdate({updateInstructions:s,transient:a}):this.coreFunctions.performUpdate({updateInstructions:s,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{center:t}}})}finalizeCirclePosition(){return this.actions.moveCircle({center:this.stateValues.numericalCenter,transient:!1})}};T(co,"componentType","circle"),T(co,"rendererType","circle"),T(co,"useChildrenForReference",!1);function uT({point1:i,point2:t}){let e=(i[0]+t[0])/2,r=(i[1]+t[1])/2,a=[e,r],s=Math.sqrt(Math.pow(e-i[0],2)+Math.pow(r-i[1],2));return{numericalCenter:a,numericalRadius:s}}import ki from"math-expressions";var ru=class extends ei{static get stateVariablesShadowedForReference(){return["nThroughPoints","throughPoints","prescribedVertex"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.through={createComponentOfType:"_pointListComponent"},e.vertex={createComponentOfType:"point",createStateVariable:"prescribedVertex",defaultValue:null},delete e.parMin,delete e.parMax,delete e.variable,e}static returnChildGroups(){return[]}static returnStateVariableDefinitions(t){let e=Qe.returnStateVariableDefinitions(t),r=super.returnStateVariableDefinitions(t);return e.styleDescription=r.styleDescription,e.graphXmin=r.graphXmin,e.curveType={forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{curveType:"function"}})},e.parMax={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{parMax:1/0}})},e.parMin={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{parMin:-1/0}})},e.aShadow={defaultValue:1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{aShadow:{variablesToCheck:["aShadow","a"]}}}),inverseDefinition:function({desiredStateVariableValues:a}){return{success:!0,instructions:[{setStateVariable:"aShadow",value:a.aShadow}]}}},e.nThroughPoints={returnDependencies:()=>({throughAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nPoints"]}}),definition:function({dependencyValues:a}){return a.throughAttr===null?{newValues:{nThroughPoints:0}}:{newValues:{nThroughPoints:a.throughAttr.stateValues.nPoints}}}},e.throughPoints={public:!0,componentType:"point",isArray:!0,nDimensions:2,entryPrefixes:["throughPointX","throughPoint"],returnWrappingComponents(a){return a==="throughPointX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:a,varEnding:s,arraySize:o}){if(a==="throughPointX"){let l=s.split("_").map(u=>Number(u)-1);return l.length===2&&l.every((u,c)=>Number.isInteger(u)&&u>=0)?o?l.every((u,c)=>u<o[c])?[String(l)]:[]:[String(l)]:[]}else{if(!o)return[];let l=Number(s)-1;return Number.isInteger(l)&&l>=0&&l<o[0]?Array.from(Array(o[1]),(u,c)=>l+","+c):[]}},returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:a}){return[a.nThroughPoints,2]},returnArrayDependenciesByKey({arrayKeys:a}){let s={};for(let o of a){let[l,u]=o.split(","),c=Number(l)+1+"_"+(Number(u)+1);s[o]={throughAttr:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["pointX"+c]}}}return{dependenciesByKey:s}},arrayDefinitionByKey({dependencyValuesByKey:a,arrayKeys:s}){let o={};for(let l of s){let[u,c]=l.split(","),p=Number(u)+1+"_"+(Number(c)+1),m=a[l].throughAttr;if(m!==null&&m.stateValues["pointX"+p]){let f=m.stateValues["pointX"+p].evaluate_to_constant();Number.isFinite(f)?o[l]=ki.fromAst(f):o[l]=ki.fromAst("\uFF3F")}else o[l]=ki.fromAst("\uFF3F")}return{newValues:{throughPoints:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,dependencyValuesByKey:s,dependencyNamesByKey:o,initialChange:l,stateValues:u}){if(l&&!u.draggable)return{success:!1};let c=[];for(let p in a.throughPoints){let[m,f]=p.split(","),d=Number(m)+1+"_"+(Number(f)+1);if(s[p].throughAttr!==null&&s[p].throughAttr.stateValues["pointX"+d])c.push({setDependency:o[p].throughAttr,desiredValue:a.throughPoints[p],childIndex:0,variableIndex:0});else return{success:!1}}return{success:!0,instructions:c}}},e.numericalThroughPoints={isArray:!0,forRenderer:!0,returnArraySizeDependencies:()=>({nThroughPoints:{dependencyType:"stateVariable",variableName:"nThroughPoints"}}),returnArraySize({dependencyValues:a}){return[a.nThroughPoints]},returnArrayDependenciesByKey({arrayKeys:a}){let s={};for(let o of a)s[o]={throughPoint:{dependencyType:"stateVariable",variableName:"throughPoint"+(Number(o)+1)}};return{dependenciesByKey:s}},arrayDefinitionByKey({dependencyValuesByKey:a,arrayKeys:s}){let o={};for(let l of s){let u=a[l].throughPoint.map(c=>c.tree);u.every(c=>Number.isFinite(c))||(u=Array(u.length).fill(NaN)),o[l]=u}return{newValues:{numericalThroughPoints:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:a,dependencyValuesByKey:s,dependencyNamesByKey:o}){let l=[];for(let u in a.numericalThroughPoints)if(s[u].throughPoint)l.push({setDependency:o[u].throughPoint,desiredValue:a.numericalThroughPoints[u].map(c=>ki.fromAst(c))});else return{success:!1};return{success:!0,instructions:l}}},e.numericalPrescribedVertex={returnDependencies:()=>({prescribedVertex:{dependencyType:"stateVariable",variableName:"prescribedVertex"}}),definition({dependencyValues:a}){if(a.prescribedVertex===null)return{newValues:{numericalPrescribedVertex:null}};let s,o;try{s=a.prescribedVertex.get_component(0).evaluate_to_constant(),o=a.prescribedVertex.get_component(1).evaluate_to_constant(),Number.isFinite(s)&&Number.isFinite(o)||(s=NaN,o=NaN)}catch(l){s=NaN,o=NaN}return{newValues:{numericalPrescribedVertex:[s,o]}}}},e.pointsAreNumerical={returnDependencies:()=>({numericalThroughPoints:{dependencyType:"stateVariable",variableName:"numericalThroughPoints"},numericalPrescribedVertex:{dependencyType:"stateVariable",variableName:"numericalPrescribedVertex"}}),definition:({dependencyValues:a})=>({newValues:{pointsAreNumerical:a.numericalThroughPoints.every(s=>Number.isFinite(s[0]))&&(!a.numericalPrescribedVertex||Number.isFinite(a.numericalPrescribedVertex[0]))},checkForActualChange:{pointsAreNumerical:!0}})},e.a={public:!0,componentType:"number",additionalStateVariablesDefined:[{variableName:"b",public:!0,componentType:"number"},{variableName:"c",public:!0,componentType:"number"},"realValued"],returnDependencies:()=>({numericalThroughPoints:{dependencyType:"stateVariable",variableName:"numericalThroughPoints"},numericalPrescribedVertex:{dependencyType:"stateVariable",variableName:"numericalPrescribedVertex"},pointsAreNumerical:{dependencyType:"stateVariable",variableName:"pointsAreNumerical"},aShadow:{dependencyType:"stateVariable",variableName:"aShadow"}}),definition:function({dependencyValues:a}){if(!a.pointsAreNumerical)return{newValues:{a:NaN,b:NaN,c:NaN,realValued:!1}};let s,o,l,u=!0;if(a.numericalPrescribedVertex)if(a.numericalThroughPoints.length===0){let c=a.numericalPrescribedVertex,p=c[0],m=c[1];return s=a.aShadow,o=-2*s*p,l=s*p*p+m,{newValues:{a:s,b:o,c:l,realValued:!0}}}else{let c=a.numericalPrescribedVertex,p=c[0],m=c[1],f=a.numericalThroughPoints[0],d=f[0];return s=(f[1]-m)/(d-p)**2,o=-2*s*p,l=s*p*p+m,{newValues:{a:s,b:o,c:l,realValued:!0}}}if(a.numericalThroughPoints.length===0)return{useEssentialOrDefaultValue:{b:{variablesToCheck:["b"],defaultValue:0},c:{variablesToCheck:["c"],defaultValue:0}},newValues:{a:a.aShadow,realValued:!0}};if(a.numericalThroughPoints.length===1){let c=a.numericalThroughPoints[0],p=c[0],m=c[1];return s=a.aShadow,o=-2*s*p,l=s*p*p+m,{newValues:{a:s,b:o,c:l,realValued:!0}}}else if(a.numericalThroughPoints.length===2){s=a.aShadow;let c=a.numericalThroughPoints[0],p=c[0],m=c[1],f=p*p,d=a.numericalThroughPoints[1],h=d[0],y=d[1],b=h*h;return p===h?m==y?(o=-2*s*p,l=s*f+m):(u=!1,s=NaN,o=NaN,l=NaN):(o=(m-y-s*(f-b))/(p-h),l=m-s*f-o*p),{newValues:{a:s,b:o,c:l,realValued:u}}}else if(a.numericalThroughPoints.length===3){let c=a.numericalThroughPoints[0],p=c[0],m=c[1],f=p*p,d=a.numericalThroughPoints[1],h=d[0],y=d[1],b=h*h,g=a.numericalThroughPoints[2],v=g[0],C=g[1],w=v*v,S=f-w,A=b-w,E=p-v,I=h-v,V=m-C,O=y-C,k=S*I-A*E;if(k===0){let M=!1,L,G,K;p===h?m===y?p===v?m==C?L=1:M=!0:(L=2,G=v,K=C):M=!0:p===v?m===C?(L=2,G=h,K=y):M=!0:h===v&&y===C?(L=2,G=h,K=y):M=!0,M?(u=!1,s=NaN,o=NaN,l=NaN):L===1?(s=a.aShadow,o=-2*s*p,l=s*p*p+m):(s=a.aShadow,o=(m-K-s*(f-G*G))/(p-G),l=m-s*f-o*p)}else s=(V*I-O*E)/k,o=(O*S-V*A)/k,l=m-o*p-s*f;return{newValues:{a:s,b:o,c:l,realValued:u}}}else return console.warn("Haven't implemented parabola through more than 3 points"),{newValues:{a:NaN,b:NaN,c:NaN,realValued:!1}}},inverseDefinition:function({desiredStateVariableValues:a,dependencyValues:s,stateValues:o,workspace:l}){if(!s.pointsAreNumerical)return{success:!1};let u={},c=function(m){if(Number.isFinite(m))return{success:!0,value:m};if(m instanceof ki.class){let f=m.evaluate_to_constant();if(Number.isFinite(f))return{success:!0,value:f}}return{success:!1}};if(a.a!==void 0){let m=c(a.a);if(m.success)u.a=m.value;else return{success:!1}}if(a.b!==void 0){let m=c(a.b);if(m.success)u.b=m.value;else return{success:!1}}if(a.c!==void 0){let m=c(a.c);if(m.success)u.c=m.value;else return{success:!1}}Object.assign(l,u);let p=function(m){return l[m]!==void 0?l[m]:o[m]};if(s.numericalThroughPoints.length===0){let m=[];return u.a!==void 0&&m.push({setDependency:"aShadow",desiredValue:u.a}),u.b!==void 0&&m.push({setStateVariable:"b",value:u.b}),u.c!==void 0&&m.push({setStateVariable:"c",value:u.c}),{success:!0,instructions:m}}else if(s.numericalThroughPoints.length===1){let m=p("a"),f=p("b"),d=p("c"),h=-f/(2*m),y=d-f*f/(4*m),b=[{setDependency:"numericalThroughPoints",desiredValue:[[h,y]]}];return u.a!==void 0&&b.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:b}}else if(s.numericalThroughPoints.length===2){let m=p("a"),f=p("b"),d=p("c"),y=s.numericalThroughPoints[0][0],g=s.numericalThroughPoints[1][0];if(y===g){y=-f/(2*m);let v=d-f*f/(4*m),C=[{setDependency:"numericalThroughPoints",desiredValue:[[y,v],[y,v]]}];return u.a!==void 0&&C.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:C}}else{let v=m*y*y+f*y+d,C=m*g*g+f*g+d,w=[{setDependency:"numericalThroughPoints",desiredValue:[[y,v],[g,C]]}];return u.a!==void 0&&w.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:w}}}else if(s.numericalThroughPoints.length===3){let m=p("a"),f=p("b"),d=p("c"),y=s.numericalThroughPoints[0][0],g=s.numericalThroughPoints[1][0],C=s.numericalThroughPoints[2][0],w=3,S;if(y===g?y===C?w=1:(w=2,S=3):y===C?(w=2,S=2):g===C&&(w=2,S=1),w===3){let A=m*y*y+f*y+d,E=m*g*g+f*g+d,I=m*C*C+f*C+d,V=[{setDependency:"numericalThroughPoints",desiredValue:[[y,A],[g,E],[C,I]]}];return u.a!==void 0&&V.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:V}}else if(w===2)if(S===1){let A=y,E=g,I=m*A*A+f*A+d,V=m*E*E+f*E+d,O=[{setDependency:"numericalThroughPoints",desiredValue:[[A,I],[E,V],[E,V]]}];return u.a!==void 0&&O.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:O}}else if(S===2){let A=y,E=g,I=m*A*A+f*A+d,V=m*E*E+f*E+d,O=[{setDependency:"numericalThroughPoints",desiredValue:[[A,I],[E,V],[A,I]]}];return u.a!==void 0&&O.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:O}}else{let A=y,E=C,I=m*A*A+f*A+d,V=m*E*E+f*E+d,O=[{setDependency:"numericalThroughPoints",desiredValue:[[A,I],[A,I],[E,V]]}];return u.a!==void 0&&O.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:O}}else{y=-f/(2*m);let A=d-f*f/(4*m),E=[{setDependency:"numericalThroughPoints",desiredValue:[[y,A],[y,A],[y,A]]}];return u.a!==void 0&&E.push({setDependency:"aShadow",desiredValue:u.a}),{success:!0,instructions:E}}}else return{success:!1}}},e.vertex={public:!0,componentType:"math",isArray:!0,entryPrefixes:["vertexX"],returnWrappingComponents(a){return a==="vertexX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},returnArraySizeDependencies:()=>({}),returnArraySize(){return[2]},returnArrayDependenciesByKey(){return{globalDependencies:{a:{dependencyType:"stateVariable",variableName:"a"},b:{dependencyType:"stateVariable",variableName:"b"},c:{dependencyType:"stateVariable",variableName:"c"},realValued:{dependencyType:"stateVariable",variableName:"realValued"}}}},arrayDefinitionByKey:function({globalDependencyValues:a}){let s={};return a.realValued&&a.a!==0?(s[0]=ki.fromAst(-a.b/(2*a.a)),s[1]=ki.fromAst(a.c-a.b**2/(4*a.a))):(s[0]=ki.fromAst("\uFF3F"),s[1]=ki.fromAst("\uFF3F")),{newValues:{vertex:s}}},inverseArrayDefinitionByKey:function({desiredStateVariableValues:a,globalDependencyValues:s,workspace:o,stateValues:l}){let u;if("0"in a.vertex?u=a.vertex[0].evaluate_to_constant():o.x!==void 0?u=o.x:u=l.vertex[0].tree,Number.isFinite(u))o.x=u;else return{success:!1};let c;if("1"in a.vertex?c=a.vertex[1].evaluate_to_constant():o.y!==void 0?c=o.y:c=l.vertex[1].tree,Number.isFinite(c))o.y=c;else return{success:!1};let p=s.a,m=-2*p*u,f=c+p*u*u;return{success:!0,instructions:[{setDependency:"b",desiredValue:m,additionalDependencyValues:{c:f}}]}}},e.equation={public:!0,componentType:"math",additionalProperties:{simplify:"numberspreserveorder",displaysmallaszero:!0},returnDependencies:()=>({a:{dependencyType:"stateVariable",variableName:"a"},b:{dependencyType:"stateVariable",variableName:"b"},c:{dependencyType:"stateVariable",variableName:"c"}}),definition:function({dependencyValues:a}){let s=["=","y",["+",["*",a.a,["^","x",2]],["*",a.b,"x"],a.c]];return{newValues:{equation:ki.fromAst(s).evaluate_numbers({skip_ordering:!0})}}}},e.fs={forRenderer:!0,isArray:!0,entryPrefixes:["f"],defaultEntryValue:()=>0,returnArraySizeDependencies:()=>({}),returnArraySize:()=>[1],returnArrayDependenciesByKey(){return{globalDependencies:{a:{dependencyType:"stateVariable",variableName:"a"},b:{dependencyType:"stateVariable",variableName:"b"},c:{dependencyType:"stateVariable",variableName:"c"}}}},arrayDefinitionByKey({globalDependencyValues:a}){return{newValues:{fs:[function(o){return a.a*o*o+a.b*o+a.c}]}}}},e.f={isAlias:!0,targetVariableName:"f1"},e.nearestPoint={returnDependencies:()=>({f:{dependencyType:"stateVariable",variableName:"f"},a:{dependencyType:"stateVariable",variableName:"a"},b:{dependencyType:"stateVariable",variableName:"b"},c:{dependencyType:"stateVariable",variableName:"c"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:a}){let s=1,o=1;a.graphXmin!==null&&a.graphXmax!==null&&a.graphYmin!==null&&a.graphYmax!==null&&(s=a.graphXmax-a.graphXmin,o=a.graphYmax-a.graphYmin);let l=a.a*s*s/o,u=a.b*s/o,c=a.c/o,p=!(Number.isFinite(l)&&Number.isFinite(u)&&Number.isFinite(c));return{newValues:{nearestPoint:function(m){if(p)return{};let f=m.x1.evaluate_to_constant(),d=m.x2.evaluate_to_constant();if(!(Number.isFinite(f)&&Number.isFinite(d)))return{};if(f/=s,d/=o,l===0){let I=u*u+1,V={};return V.x1=(f+u*d-u*c)/I*s,V.x2=(u*(f+u*d)+c)/I*o,m.x3!==void 0&&(V.x3=0),V}let h=c-d,y=2*l**2,b=3*l*u/y,g=(2*l*h+u**2+1)/y,v=(u*h-f)/y,C=lz(b,g,v),w=C[0],S=a.f(w*s)/o,A=(f-w)**2+(d-S)**2;for(let I of C.slice(1)){let V=I,O=a.f(V*s)/o,k=(f-V)**2+(d-O)**2;k<A&&(w=V,S=O,A=k)}let E={x1:w*s,x2:S*o};return m.x3!==void 0&&(E.x3=0),E}}}}},e}};T(ru,"componentType","parabola"),T(ru,"rendererType","curve");function lz(i,t,e,r=1e-10){let[a,s]=[-1/3*i*i+t,2/27*i*i*i-1/3*i*t+e];if(Math.abs(s)<=r){if(Math.abs(a)<=r)return[-i/3];let m=Math.sqrt(Math.abs(a));return a<0?[-m-i/3,-i/3,m-i/3]:[-i/3]}let o=-27*s*s-4*a*a*a;if(Math.abs(o)<=r){let m=Math.cbrt(-s/2);return[2*m-i/3,-m-i/3]}if(o>0){let m=Math.sqrt(o/108),f=Math.sqrt(Math.cbrt(s*s/4+o/108))*2,d=Math.atan2(m,-s/2);return[Math.cos(d/3),Math.cos(d/3+2*Math.PI/3),Math.cos(d/3-2*Math.PI/3)].sort((h,y)=>h-y).map(h=>f*h-i/3)}let l=Math.sqrt(-o/108),u=Math.cbrt(-s/2+l),c=Math.cbrt(-s/2-l);return[u+c-i/3]}import Fi from"math-expressions";var nu=class extends Q{static get stateVariablesShadowedForReference(){return["controls"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.alwaysVisible={createComponentOfType:"boolean",createStateVariable:"alwaysVisible",defaultValue:!1,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=Si({componentList:r});return a.success!==!0?{success:!1}:{success:!0,newChildren:a.pieces.map(function(s){return s.length>1||s[0].componentType==="string"?{componentType:"controlVectors",children:[{componentType:"vector",children:s}]}:s[0]})}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"controlVectors",componentTypes:["controlVectors"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nControls={returnDependencies:()=>({nParentPoints:{dependencyType:"parentStateVariable",variableName:"nThroughPoints",skipComponentNames:!0}}),definition({dependencyValues:e}){let r=e.nParentPoints;return Number.isInteger(r)&&r>=0||(r=0),{newValues:{nControls:r}}}},t.pointIndMap={returnDependencies:()=>({controlChildren:{dependencyType:"child",childGroups:["controlVectors"],variableNames:["pointNumber"]}}),definition:function({dependencyValues:e}){let r=[],a=-1;for(let[s,o]of e.controlChildren.entries()){let l=o.stateValues.pointNumber;Number.isFinite(l)?a=Math.round(l)-1:a+=1,r[a]=s}return{newValues:{pointIndMap:r}}}},t.directions={isArray:!0,entryPrefixes:["direction"],defaultEntryValue:"none",stateVariablesDeterminingDependencies:["pointIndMap"],returnArraySizeDependencies:()=>({nControls:{dependencyType:"stateVariable",variableName:"nControls"}}),returnArraySize({dependencyValues:e}){return[e.nControls]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={};for(let s of e){let o=r.pointIndMap[s];o!==void 0&&(a[s]={controlChild:{dependencyType:"child",childGroups:["controlVectors"],variableNames:["direction"],childIndices:[o]}})}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let o of r){let l=e[o].controlChild;l&&l.length===1?a[o]=l[0].stateValues.direction:s[o]={variablesToCheck:[{variableName:"directions",arrayIndex:o}]}}return{newValues:{directions:a},useEssentialOrDefaultValue:{directions:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,dependencyValuesByKey:a}){let s=[],o={};for(let l in e.directions){let u=a[l].controlChild;u&&u.length===1?s.push({setDependency:r[l].controlChild,desiredValue:e.directions[l],childIndex:0,variableIndex:0}):o[l]=e.directions[l]}return Object.keys(o).length>0&&s.push({setStateVariable:"directions",value:o}),{success:!0,instructions:s}}},t.hiddenControls={isArray:!0,entryPrefixes:["hiddenControl"],defaultEntryValue:!1,stateVariablesDeterminingDependencies:["pointIndMap"],returnArraySizeDependencies:()=>({nControls:{dependencyType:"stateVariable",variableName:"nControls"}}),returnArraySize({dependencyValues:e}){return[e.nControls]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={};for(let s of e){let o=r.pointIndMap[s];o!==void 0&&(a[s]={controlChild:{dependencyType:"child",childGroups:["controlVectors"],variableNames:["hide"],childIndices:[o]}})}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let o of r){let l=e[o].controlChild;l&&l.length===1?a[o]=l[0].stateValues.hide:s[o]={variablesToCheck:[{variableName:"hiddenControls",arrayIndex:o}]}}return{newValues:{hiddenControls:a},useEssentialOrDefaultValue:{hiddenControls:s}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,dependencyValuesByKey:a}){let s=[],o={};for(let l in e.hiddenControls){let u=a[l].controlChild;u&&u.length===1?s.push({setDependency:r[l].controlChild,desiredValue:e.hiddenControls[l],childIndex:0,variableIndex:0}):o[l]=e.hiddenControls[l]}return Object.keys(o).length>0&&s.push({setStateVariable:"hiddenControls",value:o}),{success:!0,instructions:s}}},t.nDimensions={returnDependencies(){return{nParentDimensions:{dependencyType:"parentStateVariable",variableName:"nDimensions"}}},definition:function({dependencyValues:e}){let r=e.nParentDimensions;return Number.isInteger(r)&&r>=0||(r=0),{newValues:{nDimensions:r},checkForActualChange:{nDimensions:!0}}}},t.essentialSymmetricControls={isArray:!0,entryPrefixes:["essentialSymmetricControl"],nDimensions:2,defaultEntryValue:Fi.fromAst(1),returnArraySizeDependencies:()=>({nControls:{dependencyType:"stateVariable",variableName:"nControls"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nControls,e.nDimensions]},returnArrayDependenciesByKey:()=>({}),arrayDefinitionByKey({arrayKeys:e}){let r={};for(let a of e){let s=a.split(",").map(o=>Number(o));r[a]={variablesToCheck:[{variableName:"essentialSymmetricControls",arrayIndex:s}]}}return{useEssentialOrDefaultValue:{essentialSymmetricControls:r}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e}){let r=[],a={};for(let s in e.essentialSymmetricControls)a[s]=e.essentialSymmetricControls[s];return Object.keys(a).length>0&&r.push({setStateVariable:"essentialSymmetricControls",value:a}),{success:!0,instructions:r}}},t.controls={isArray:!0,entryPrefixes:["control"],nDimensions:3,defaultEntryValue:Fi.fromAst(1),stateVariablesDeterminingDependencies:["pointIndMap","directions"],returnArraySizeDependencies:()=>({nControls:{dependencyType:"stateVariable",variableName:"nControls"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nControls,2,e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={};for(let s of e){let o=s.split(",").map(c=>Number(c)),l=o.map(c=>c+1);a[s]={direction:{dependencyType:"stateVariable",variableName:"direction"+l[0]}};let u=r.directions[o[0]];if(u!=="none"&&(o[1]===0||o[1]===1)){let c=r.pointIndMap[o[0]];c!==void 0&&(u==="symmetric"||u==="previous"&&o[1]===0||u==="next"&&o[1]===1?a[s].controlChild={dependencyType:"child",childGroups:["controlVectors"],variableNames:["vectorX1_"+l[2]],childIndices:[c]}:u==="both"&&(a[s].controlChild={dependencyType:"child",childGroups:["controlVectors"],variableNames:["vectorX"+l[1]+"_"+l[2]],childIndices:[c]})),u==="symmetric"&&(a[s].essentialSymmetricControl={dependencyType:"stateVariable",variableName:"essentialSymmetricControl"+l[0]+"_"+l[2]})}}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r,componentName:a}){let s={},o={};for(let l of r){let u=l.split(",").map(m=>Number(m)),c=u.map(m=>m+1),p=e[l].direction;if(u[1]===0)if(p==="none"||p==="next")o[l]={variablesToCheck:[{variableName:"controls",arrayIndex:u}]};else{let m=e[l].controlChild,f=!0;if(m&&m.length===1){let d=m[0].stateValues["vectorX1_"+c[2]];d&&(f=!1,d=d.evaluate_to_constant(),Number.isFinite(d)||(d=NaN),s[l]=Fi.fromAst(d))}f&&(p==="symmetric"?s[l]=e[l].essentialSymmetricControl:o[l]={variablesToCheck:[{variableName:"controls",arrayIndex:u}]})}else if(u[1]===1)if(p==="none"||p==="previous")o[l]={variablesToCheck:[{variableName:"controls",arrayIndex:u}]};else{let m=e[l].controlChild,f=!0;if(m&&m.length===1)if(p==="both"){let d=m[0].stateValues["vectorX2_"+c[2]];d&&(f=!1,d=d.evaluate_to_constant(),Number.isFinite(d)||(d=NaN),s[l]=Fi.fromAst(d))}else{let d=m[0].stateValues["vectorX1_"+c[2]];d&&(f=!1,d=d.evaluate_to_constant(),Number.isFinite(d)||(d=NaN),p==="symmetric"?s[l]=Fi.fromAst(-d):s[l]=Fi.fromAst(d))}f&&(p==="symmetric"?e[l].essentialSymmetricControl&&(s[l]=Fi.fromAst(-e[l].essentialSymmetricControl.tree)):o[l]={variablesToCheck:[{variableName:"controls",arrayIndex:u}]})}}return{newValues:{controls:s},useEssentialOrDefaultValue:{controls:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r,dependencyValuesByKey:a}){let s=[],o={};for(let l in e.controls){let u=l.split(",").map(m=>Number(m)),c=u.map(m=>m+1),p=a[l].direction;if(p){if(u[1]===0){if(!(p==="none"||p==="next")){let m=a[l].controlChild,f=!0;if(m&&m.length===1&&m[0].stateValues["vectorX1_"+c[2]]&&(f=!1,s.push({setDependency:r[l].controlChild,desiredValue:e.controls[l],childIndex:0,variableIndex:0})),f){let d=e.controls[l].evaluate_to_constant();Number.isFinite(d)||(d=NaN),d=Fi.fromAst(d),p==="symmetric"?s.push({setDependency:r[l].essentialSymmetricControl,desiredValue:d}):o[l]=d}}}else if(u[1]===1&&!(p==="none"||p==="previous")){let m=a[l].controlChild,f=!0;m&&m.length===1&&(p==="both"?m[0].stateValues["vectorX2_"+c[2]]&&(f=!1):m[0].stateValues["vectorX1_"+c[2]]&&(f=!1));let d;p==="symmetric"?d=Fi.fromAst(["-",e.controls[l].tree]):d=e.controls[l],f?(d=d.evaluate_to_constant(),Number.isFinite(d)||(d=NaN),d=Fi.fromAst(d),p==="symmetric"?s.push({setDependency:r[l].essentialSymmetricControl,desiredValue:d}):o[l]=d):s.push({setDependency:r[l].controlChild,desiredValue:d,childIndex:0,variableIndex:0})}}}return Object.keys(o).length>0&&s.push({setStateVariable:"controls",value:o}),{success:!0,instructions:s}}},t}};T(nu,"componentType","bezierControls"),T(nu,"rendererType","container");var oa=class extends Q{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=Si({componentList:r});return a.success!==!0?{success:!1}:{success:!0,newChildren:a.pieces.map(function(s){return s.length>1||s[0].componentType==="string"?{componentType:"vector",children:s}:s[0]})}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"vectors",componentTypes:["vector"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nVectors={returnDependencies:()=>({vectorChildren:{dependencyType:"child",childGroups:["vectors"],skipComponentNames:!0}}),definition:({dependencyValues:e})=>({newValues:{nVectors:e.vectorChildren.length},checkForActualChange:{nVectors:!0}})},t.nDimensions={returnDependencies:()=>({vectorChildren:{dependencyType:"child",childGroups:["vectors"],variableNames:["nDimensions"],skipPlaceholders:!0}}),definition:function({dependencyValues:e}){let r;if(e.vectorChildren.length===0)r=2;else{r=1;for(let a of e.vectorChildren)Number.isFinite(a.stateValues.nDimensions)&&(r=Math.max(r,a.stateValues.nDimensions))}return{newValues:{nDimensions:r},checkForActualChange:{nDimensions:!0}}}},t.vectors={isArray:!0,nDimensions:2,entryPrefixes:["vectorX","vector"],getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="vectorX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{let s=Number(r)-1;return a?Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]:[]}},returnArraySizeDependencies:()=>({nVectors:{dependencyType:"stateVariable",variableName:"nVectors"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nVectors,e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let[s,o]=a.split(",");r[a]={vectorChild:{dependencyType:"child",childGroups:["vectors"],variableNames:["x"+(Number(o)+1)],childIndices:[s]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=s.split(",")[1],l=e[s].vectorChild[0];l&&(a[s]=l.stateValues["x"+(Number(o)+1)])}return{newValues:{vectors:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r}){let a=[];for(let s in e.vectors)a.push({setDependency:r[s].vectorChild,desiredValue:e.vectors[s],childIndex:0,variableIndex:0});return{success:!0,instructions:a}}},t}};T(oa,"componentType","_vectorListComponent"),T(oa,"rendererType","container"),T(oa,"renderChildren",!0);var qp=class extends oa{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.direction={createComponentOfType:"text",createStateVariable:"direction",defaultValue:"symmetric",public:!0,toLowerCase:!0,validValues:["symmetric","previous","next","both","none"]},e.pointNumber={createComponentOfType:"number",createStateVariable:"pointNumber",defaultValue:null,public:!0},e}};T(qp,"componentType","controlVectors");var po=class extends Q{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=Si({componentList:r});return a.success!==!0?{success:!1}:{success:!0,newChildren:a.pieces.map(function(s){return s.length>1||s[0].componentType==="string"?{componentType:"point",children:s}:s[0]})}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"points",componentTypes:["point"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nPoints={returnDependencies:()=>({pointChildren:{dependencyType:"child",childGroups:["points"],skipComponentNames:!0}}),definition:function({dependencyValues:e}){return{newValues:{nPoints:e.pointChildren.length},checkForActualChange:{nPoints:!0}}}},t.nDimensions={returnDependencies:()=>({pointChildren:{dependencyType:"child",childGroups:["points"],variableNames:["nDimensions"],skipPlaceholders:!0}}),definition:function({dependencyValues:e}){let r;if(e.pointChildren.length===0)r=2;else{r=1;for(let a of e.pointChildren)Number.isFinite(a.stateValues.nDimensions)&&(r=Math.max(r,a.stateValues.nDimensions))}return{newValues:{nDimensions:r},checkForActualChange:{nDimensions:!0}}}},t.points={isArray:!0,nDimensions:2,entryPrefixes:["pointX","point"],getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="pointX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},returnArraySizeDependencies:()=>({nPoints:{dependencyType:"stateVariable",variableName:"nPoints"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nPoints,e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let[s,o]=a.split(",");r[a]={pointChild:{dependencyType:"child",childGroups:["points"],variableNames:["x"+(Number(o)+1)],childIndices:[s]}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=s.split(",")[1],l=e[s].pointChild[0];l&&(a[s]=l.stateValues["x"+(Number(o)+1)])}return{newValues:{points:a}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r}){let a=[];for(let s in e.points)a.push({setDependency:r[s].pointChild,desiredValue:e.points[s],childIndex:0,variableIndex:0});return{success:!0,instructions:a}}},t}};T(po,"componentType","_pointListComponent"),T(po,"rendererType","container"),T(po,"renderChildren",!0);var mo=class extends Q{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=r.reduce(function(s,o){return o.componentType==="string"?[...s,...o.state.value.split(/\s+/).filter(l=>l).map(l=>({componentType:"line",children:[{componentType:"string",state:{value:l}}]}))]:[...s,o]},[]);return{success:!0,newChildren:a}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"lines",componentTypes:["line"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nLines={returnDependencies:()=>({lineChildren:{dependencyType:"child",childGroups:["lines"],skipComponentNames:!0}}),definition:function({dependencyValues:e}){return{newValues:{nLines:e.lineChildren.length},checkForActualChange:{nLines:!0}}}},t.lineNames={isArray:!0,entryPrefixes:["lineName"],returnArraySizeDependencies:()=>({nLines:{dependencyType:"stateVariable",variableName:"nLines"}}),returnArraySize({dependencyValues:e}){return[e.nLines]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={lineChild:{dependencyType:"child",childGroups:["lines"],childIndices:[a]}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].lineChild[0];o&&(a[s]=o.componentName)}return{newValues:{lineNames:a}}}},t}};T(mo,"componentType","_lineListComponent"),T(mo,"rendererType","container"),T(mo,"renderChildren",!0);var Wp=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.hide={default:!0},e}static returnChildLogic(t){let e=super.returnChildLogic(t),r=e.newLeaf({name:"AtLeastZeroAngles",componentType:"angle",comparison:"atLeast",number:0}),a=Ad(u=>({componentType:"angle",children:[{componentType:"math",children:u}]})),s=e.newLeaf({name:"AtLeastOneString",componentType:"string",comparison:"atLeast",number:1}),o=e.newLeaf({name:"AtLeastOneMath",componentType:"math",comparison:"atLeast",number:1}),l=e.newOperator({name:"StringsAndMaths",operator:"or",propositions:[s,o],requireConsecutive:!0,isSugar:!0,replacementFunction:a});return e.newOperator({name:"AnglesXorSugar",operator:"xor",propositions:[r,l],setAsBase:!0}),e}updateState(t={}){if(t.init&&(this._state.angles={trackChanges:!0}),super.updateState(t),!this.childLogicSatisfied){this.unresolvedState.angles=!0,this.unresolvedState.nAngles=!0;return}if(this.currentTracker.trackChanges.childrenChanged(this.componentName)){delete this.unresolvedState.angles,delete this.unresolvedState.nAngles;let a=this.childLogic.returnMatches("AtLeastZeroAngles");this.state.nAngles=a.length,this.state.angles=a.map(s=>this.activeChildren[s])}}initializeRenderer(){this.renderer===void 0&&(this.renderer=new this.availableRenderers.container({key:this.componentName}))}updateChildrenWhoRender(){this.childrenWhoRender=this.state.angles.map(t=>t.componentName)}};T(Wp,"componentType","_angleListComponent");import nn from"math-expressions";var as=class extends Qe{actions={moveVector:this.moveVector.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizeVectorPosition:this.finalizeVectorPosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["head","tail","displacement","basedOnHead","basedOnTail","basedOnDisplacement","nDimensions","nDimDisplacement","nDimHead","nDimTail"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.headDraggable={createComponentOfType:"boolean",createStateVariable:"headDraggable",defaultValue:!0,public:!0,forRenderer:!0},e.tailDraggable={createComponentOfType:"boolean",createStateVariable:"tailDraggable",defaultValue:!0,public:!0,forRenderer:!0},e.x={createComponentOfType:"math"},e.y={createComponentOfType:"math"},e.z={createComponentOfType:"math"},e.xs={createComponentOfType:"mathList"},e.displacement={createComponentOfType:"vector"},e.head={createComponentOfType:"point"},e.tail={createComponentOfType:"point"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let o=Ja({childrenToComponentFunction:l=>({componentType:"math",children:l}),mustStripOffOuterParentheses:!0})({matchedChildren:r});return!o.success&&r.length===1?{success:!0,newAttributes:{x:{component:{componentType:"math",children:r}}}}:(o.success&&(o.newAttributes={xs:{component:{componentType:"mathList",children:o.newChildren,skipSugar:!0}}},delete o.newChildren),o)};return t.push({childrenRegex:/s+(.*s)?/,replacementFunction:e}),t}static returnChildGroups(){return[{group:"points",componentTypes:["point"]},{group:"vectors",componentTypes:["vector"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r="";return e.selectedStyle.lineWidth>=4?r+="thick ":e.selectedStyle.lineWidth<=1&&(r+="thin "),e.selectedStyle.lineStyle==="dashed"?r+="dashed ":e.selectedStyle.lineStyle==="dotted"&&(r+="dotted "),r+=e.selectedStyle.lineColor,{newValues:{styleDescription:r}}}},t.displacementShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{displacementShadow:{variablesToCheck:["displacement","displacementShadow"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"displacementShadow",value:e.displacementShadow}]}}},t.headShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{headShadow:{variablesToCheck:["head","headShadow"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"headShadow",value:e.headShadow}]}}},t.tailShadow={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{tailShadow:{variablesToCheck:["tail","tailShadow"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"tailShadow",value:e.tailShadow}]}}},t.sourceOfDisplacement={returnDependencies:()=>({xAttr:{dependencyType:"attributeComponent",attributeName:"x"},yAttr:{dependencyType:"attributeComponent",attributeName:"y"},zAttr:{dependencyType:"attributeComponent",attributeName:"z"},xsAttr:{dependencyType:"attributeComponent",attributeName:"xs"},displacementAttr:{dependencyType:"attributeComponent",attributeName:"displacement"},pointChild:{dependencyType:"child",childGroups:["points"]},vectorChild:{dependencyType:"child",childGroups:["vectors"]}}),definition({dependencyValues:e}){let r=null;return e.vectorChild.length>0?r="vectorChild":e.pointChild.length>0?r="pointChild":e.displacementAttr!==null?r="displacementAttr":e.xsAttr!==null?r="xsAttr":(e.xAttr!==null||e.yAttr!==null||e.zAttr!==null)&&(r="componentAttrs"),{newValues:{sourceOfDisplacement:r}}}},t.basedOnHead={returnDependencies:()=>({headAttr:{dependencyType:"attributeComponent",attributeName:"head"},headShadow:{dependencyType:"stateVariable",variableName:"headShadow"},tailAttr:{dependencyType:"attributeComponent",attributeName:"tail"},sourceOfDisplacement:{dependencyType:"stateVariable",variableName:"sourceOfDisplacement"}}),definition:function({dependencyValues:e}){return e.tailAttr!==null&&e.sourceOfDisplacement!==null?(e.headAttr!==null&&console.warn("Vector is prescribed by head, tail, and displacement.  Ignoring specified head."),{newValues:{basedOnHead:!1},checkForActualChange:{basedOnHead:!0}}):e.headAttr!==null?{newValues:{basedOnHead:!0},checkForActualChange:{basedOnHead:!0}}:{newValues:{basedOnHead:e.headShadow!==null},checkForActualChange:{basedOnHead:!0}}}},t.basedOnTail={returnDependencies:()=>({tailAttr:{dependencyType:"attributeComponent",attributeName:"tail"},tailShadow:{dependencyType:"stateVariable",variableName:"tailShadow"},sourceOfDisplacement:{dependencyType:"stateVariable",variableName:"sourceOfDisplacement"}}),definition:function({dependencyValues:e}){return e.tailAttr!==null?{newValues:{basedOnTail:!0},checkForActualChange:{basedOnTail:!0}}:{newValues:{basedOnTail:e.tailShadow!==null},checkForActualChange:{basedOnTail:!0}}}},t.basedOnDisplacement={returnDependencies:()=>({sourceOfDisplacement:{dependencyType:"stateVariable",variableName:"sourceOfDisplacement"},displacementShadow:{dependencyType:"stateVariable",variableName:"displacementShadow"}}),definition:function({dependencyValues:e}){return e.sourceOfDisplacement!==null?{newValues:{basedOnDisplacement:!0},checkForActualChange:{basedOnDisplacement:!0}}:{newValues:{basedOnDisplacement:e.displacementShadow!==null},checkForActualChange:{basedOnDisplacement:!0}}}},t.nDimDisplacement={stateVariablesDeterminingDependencies:["basedOnDisplacement","basedOnHead","basedOnTail"],returnDependencies({stateValues:e}){let r={basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},basedOnTail:{dependencyType:"stateVariable",variableName:"basedOnTail"},basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},sourceOfDisplacement:{dependencyType:"stateVariable",variableName:"sourceOfDisplacement"},displacementShadow:{dependencyType:"stateVariable",variableName:"displacementShadow"},displacementAttr:{dependencyType:"attributeComponent",attributeName:"displacement",variableNames:["nDimensions"]},vectorChild:{dependencyType:"child",childGroups:["vectors"],variableNames:["nDimensions"]},pointChild:{dependencyType:"child",childGroups:["points"],variableNames:["nDimensions"]},xAttr:{dependencyType:"attributeComponent",attributeName:"x"},yAttr:{dependencyType:"attributeComponent",attributeName:"y"},zAttr:{dependencyType:"attributeComponent",attributeName:"z"},xsAttr:{dependencyType:"attributeComponent",attributeName:"xs",variableNames:["nComponents"]}};return e.basedOnDisplacement||(e.basedOnHead&&(r.nDimHead={dependencyType:"stateVariable",variableName:"nDimHead"}),e.basedOnTail&&(r.nDimTail={dependencyType:"stateVariable",variableName:"nDimTail"})),r},definition:function({dependencyValues:e}){let r;if(e.basedOnDisplacement)switch(e.sourceOfDisplacement){case"vectorChild":r=e.vectorChild[0].stateValues.nDimensions;break;case"pointChild":r=e.pointChild[0].stateValues.nDimensions;break;case"displacementAttr":r=e.displacementAttr.stateValues.nDimensions;break;case"xsAttr":r=e.xsAttr.stateValues.nComponents;break;case"componentAttrs":e.zAttr!==null?r=3:e.yAttr!==null?r=2:r=1;break;default:let a=e.displacementShadow.tree;Array.isArray(a)&&["tuple","vector"].includes(a[0])?r=a.length-1:r=1}else e.basedOnHead?e.basedOnTail?e.nDimHead===e.nDimTail?r=e.nDimHead:r=NaN:r=e.nDimHead:e.basedOnTail?r=e.nDimTail:r=2;return{newValues:{nDimDisplacement:r},checkForActualChange:{nDimDisplacement:!0}}}},t.nDimHead={stateVariablesDeterminingDependencies:["basedOnDisplacement","basedOnHead","basedOnTail"],returnDependencies({stateValues:e}){let r={basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},basedOnTail:{dependencyType:"stateVariable",variableName:"basedOnTail"},basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},headShadow:{dependencyType:"stateVariable",variableName:"headShadow"},headAttr:{dependencyType:"attributeComponent",attributeName:"head",variableNames:["nDimensions"]}};return e.basedOnHead||(e.basedOnTail&&(r.nDimTail={dependencyType:"stateVariable",variableName:"nDimTail"}),e.basedOnDisplacement&&(r.nDimDisplacement={dependencyType:"stateVariable",variableName:"nDimDisplacement"})),r},definition:function({dependencyValues:e}){let r;if(e.basedOnHead){if(e.headAttr!==null)r=e.headAttr.stateValues.nDimensions;else if(e.headShadow){let a=e.headShadow.tree;Array.isArray(a)&&["tuple","vector"].includes(a[0])?r=a.length-1:r=2}}else e.basedOnDisplacement?e.basedOnTail?e.nDimDisplacement===e.nDimTail?r=e.nDimDisplacement:r=NaN:r=e.nDimDisplacement:e.basedOnTail?r=e.nDimTail:r=2;return{newValues:{nDimHead:r},checkForActualChange:{nDimHead:!0}}}},t.nDimTail={stateVariablesDeterminingDependencies:["basedOnDisplacement","basedOnHead","basedOnTail"],returnDependencies({stateValues:e}){let r={basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},basedOnTail:{dependencyType:"stateVariable",variableName:"basedOnTail"},basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},tailShadow:{dependencyType:"stateVariable",variableName:"tailShadow"},tailAttr:{dependencyType:"attributeComponent",attributeName:"tail",variableNames:["nDimensions"]}};return e.basedOnTail||(e.basedOnHead&&(r.nDimHead={dependencyType:"stateVariable",variableName:"nDimHead"}),e.basedOnDisplacement&&(r.nDimDisplacement={dependencyType:"stateVariable",variableName:"nDimDisplacement"})),r},definition:function({dependencyValues:e}){let r;if(e.basedOnTail){if(e.tailAttr!==null)r=e.tailAttr.stateValues.nDimensions;else if(e.tailShadow){let a=e.tailShadow.tree;Array.isArray(a)&&["tuple","vector"].includes(a[0])?r=a.length-1:r=2}}else e.basedOnDisplacement?e.basedOnHead?e.nDimDisplacement===e.nDimHead?r=e.nDimDisplacement:r=NaN:r=e.nDimDisplacement:e.basedOnHead?r=e.nDimHead:r=2;return{newValues:{nDimTail:r},checkForActualChange:{nDimTail:!0}}}},t.nDimensions={public:!0,componentType:"number",returnDependencies:()=>({basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},basedOnTail:{dependencyType:"stateVariable",variableName:"basedOnTail"},basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},nDimDisplacement:{dependencyType:"stateVariable",variableName:"nDimDisplacement"},nDimHead:{dependencyType:"stateVariable",variableName:"nDimHead"},nDimTail:{dependencyType:"stateVariable",variableName:"nDimTail"}}),definition:function({dependencyValues:e}){let r;if(e.basedOnDisplacement){if(e.basedOnTail){if(e.nDimDisplacement!==e.nDimTail)return console.warn("nDimensions mismatch in vector"),{newValues:{nDimensions:NaN}}}else if(e.basedOnHead&&e.nDimDisplacement!==e.nDimHead)return console.warn("nDimensions mismatch in vector"),{newValues:{nDimensions:NaN}};r=e.nDimDisplacement}else if(e.basedOnTail){if(e.basedOnHead&&e.nDimTail!==e.nDimHead)return console.warn("nDimensions mismatch in vector"),{newValues:{nDimensions:NaN}};r=e.nDimTail}else e.basedOnHead?r=e.nDimHead:r=2;return{newValues:{nDimensions:r},checkForActualChange:{nDimensions:!0}}}},t.displacement={public:!0,componentType:"math",isArray:!0,entryPrefixes:["x"],returnWrappingComponents(e){return e==="x"?[]:[["vector",{componentType:"mathList",isAttribute:"xs"}]]},stateVariablesDeterminingDependencies:["basedOnDisplacement","sourceOfDisplacement"],returnArraySizeDependencies:()=>({nDimDisplacement:{dependencyType:"stateVariable",variableName:"nDimDisplacement"}}),returnArraySize({dependencyValues:e}){return[e.nDimDisplacement]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},basedOnTail:{dependencyType:"stateVariable",variableName:"basedOnTail"},basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},displacementShadow:{dependencyType:"stateVariable",variableName:"displacementShadow"},sourceOfDisplacement:{dependencyType:"stateVariable",variableName:"sourceOfDisplacement"}},s={};for(let o of e){let l=Number(o)+1;s[o]={xsAttr:{dependencyType:"attributeComponent",attributeName:"xs",variableNames:["math"+l]},displacementAttr:{dependencyType:"attributeComponent",attributeName:"displacement",variableNames:["x"+l]},pointChild:{dependencyType:"child",childGroups:["points"],variableNames:["x"+l]},vectorChild:{dependencyType:"child",childGroups:["vectors"],variableNames:["x"+l]}},o==="0"?s[o].componentAttr={dependencyType:"attributeComponent",attributeName:"x",variableNames:["value"]}:o==="1"?s[o].componentAttr={dependencyType:"attributeComponent",attributeName:"y",variableNames:["value"]}:o==="2"&&(s[o].componentAttr={dependencyType:"attributeComponent",attributeName:"z",variableNames:["value"]}),r.basedOnDisplacement||(s[o].tailX={dependencyType:"stateVariable",variableName:"tailX"+l},s[o].headX={dependencyType:"stateVariable",variableName:"headX"+l})}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey:function({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={},o={};for(let u of a){let c=Number(u)+1;if(e.basedOnDisplacement)switch(e.sourceOfDisplacement){case"vectorChild":s[u]=r[u].vectorChild[0].stateValues["x"+c];break;case"pointChild":s[u]=r[u].pointChild[0].stateValues["x"+c];break;case"displacementAttr":s[u]=r[u].displacementAttr.stateValues["x"+c];break;case"xsAttr":s[u]=r[u].xsAttr.stateValues["math"+c].simplify();break;case"componentAttrs":let p=r[u].componentAttr;p===null?o[u]={defaultValue:nn.fromAst(0)}:s[u]=p.stateValues.value.simplify();break;default:let m=e.displacementShadow.tree;Array.isArray(m)&&["tuple","vector"].includes(m[0])?s[u]=e.displacementShadow.get_component(Number(u)):s[u]=e.displacementShadow}else s[u]=r[u].headX.subtract(r[u].tailX).simplify()}let l={};return Object.keys(s).length>0&&(l.newValues={displacement:s}),Object.keys(o).length>0&&(l.useEssentialOrDefaultValue={displacement:o}),l},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[],u=!1;for(let c in e.displacement)if(r.basedOnDisplacement)switch(r.sourceOfDisplacement){case"vectorChild":l.push({setDependency:s[c].vectorChild,desiredValue:e.displacement[c],childIndex:0,variableIndex:0});break;case"pointChild":l.push({setDependency:s[c].pointChild,desiredValue:e.displacement[c],childIndex:0,variableIndex:0});break;case"displacementAttr":l.push({setDependency:s[c].displacementAttr,desiredValue:e.displacement[c],variableIndex:0});break;case"xsAttr":l.push({setDependency:s[c].xsAttr,desiredValue:e.displacement[c],variableIndex:0});break;case"componentAttrs":a[c].componentAttr===null?l.push({setStateVariable:"displacement",value:{[c]:Ze(e.displacement[c])}}):l.push({setDependency:s[c].componentAttr,desiredValue:e.displacement[c],variableIndex:0});break;default:u=!0}else l.push({setDependency:s[c].headX,desiredValue:a[c].tailX.add(e.displacement[c]).simplify()});if(u)if(o[0]>1){let c=["vector"];for(let p in e.displacement)c[Number(p)+1]=e.displacement[p].tree;c.length=o[0]+1,l.push({setDependency:"displacementShadow",desiredValue:nn.fromAst(c)})}else o[0]===1&&"0"in e.displacement&&l.push({setDependency:"displacementShadow",desiredValue:e.displacement[0]});return{success:!0,instructions:l}}},t.x={isAlias:!0,targetVariableName:"x1"},t.y={isAlias:!0,targetVariableName:"x2"},t.z={isAlias:!0,targetVariableName:"x3"},t.head={public:!0,componentType:"math",isArray:!0,entryPrefixes:["headX"],returnWrappingComponents(e){return e==="headX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},stateVariablesDeterminingDependencies:["basedOnHead","basedOnDisplacement"],returnArraySizeDependencies:()=>({nDimHead:{dependencyType:"stateVariable",variableName:"nDimHead"}}),returnArraySize({dependencyValues:e}){return[e.nDimHead]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},basedOnTail:{dependencyType:"stateVariable",variableName:"basedOnTail"},basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},headShadow:{dependencyType:"stateVariable",variableName:"headShadow"}},s={};for(let o of e){let l=Number(o)+1;s[o]={headAttr:{dependencyType:"attributeComponent",attributeName:"head",variableNames:["x"+l]}},r.basedOnHead||(s[o].tailX={dependencyType:"stateVariable",variableName:"tailX"+l},r.basedOnDisplacement&&(s[o].x={dependencyType:"stateVariable",variableName:"x"+l}))}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey:function({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={},o={};for(let u of a){let c=Number(u)+1;e.basedOnHead?r[u].headAttr!==null?s[u]=r[u].headAttr.stateValues["x"+c]:e.headShadow!==null&&(s[u]=e.headShadow.get_component(Number(u))):e.basedOnDisplacement?s[u]=r[u].tailX.add(r[u].x).simplify():e.basedOnTail?o[u]={get defaultValue(){return u==="0"?r[u].tailX.add(nn.fromAst(1)).simplify():r[u].tailX},variablesToCheck:["headX"+c]}:o[u]={get defaultValue(){return nn.fromAst(u==="0"?1:0)},variablesToCheck:["headX"+c]}}let l={};return Object.keys(s).length>0&&(l.newValues={head:s}),Object.keys(o).length>0&&(l.useEssentialOrDefaultValue={head:o}),l},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[],u=!1;for(let c in e.head)r.basedOnHead?a[c].headAttr&&a[c].headAttr!==null?l.push({setDependency:s[c].headAttr,desiredValue:e.head[c],variableIndex:0}):r.headShadow!==null&&(u=!0):r.basedOnDisplacement?l.push({setDependency:s[c].x,desiredValue:e.head[c].subtract(a[c].tailX).simplify()}):l.push({setStateVariable:"head",value:{[c]:e.head[c]}});if(u)if(o[0]>1){let c=["vector"];for(let p in e.head)c[Number(p)+1]=e.head[p].tree;c.length=o[0]+1,l.push({setDependency:"headShadow",desiredValue:nn.fromAst(c)})}else o[0]===1&&"0"in e.head&&l.push({setDependency:"headShadow",desiredValue:e.head[0]});return{success:!0,instructions:l}}},t.tail={public:!0,componentType:"math",isArray:!0,entryPrefixes:["tailX"],returnWrappingComponents(e){return e==="tailX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},stateVariablesDeterminingDependencies:["basedOnHead","basedOnDisplacement"],returnArraySizeDependencies:()=>({nDimTail:{dependencyType:"stateVariable",variableName:"nDimTail"}}),returnArraySize({dependencyValues:e}){return[e.nDimTail]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={basedOnDisplacement:{dependencyType:"stateVariable",variableName:"basedOnDisplacement"},basedOnHead:{dependencyType:"stateVariable",variableName:"basedOnHead"},tailShadow:{dependencyType:"stateVariable",variableName:"tailShadow"}},s={};for(let o of e){let l=Number(o)+1;s[o]={tailAttr:{dependencyType:"attributeComponent",attributeName:"tail",variableNames:["x"+l]}},r.basedOnTail||(r.basedOnHead&&(s[o].headX={dependencyType:"stateVariable",variableName:"headX"+l}),r.basedOnDisplacement&&(s[o].x={dependencyType:"stateVariable",variableName:"x"+l}))}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey:function({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){let s={},o={};for(let u of a){let c=Number(u)+1;r[u].tailAttr!==null?s[u]=r[u].tailAttr.stateValues["x"+c]:e.tailShadow!==null?s[u]=e.tailShadow.get_component(Number(u)):e.basedOnHead&&e.basedOnDisplacement?s[u]=r[u].headX.subtract(r[u].x).simplify():o[u]={get defaultValue(){return nn.fromAst(0)},variablesToCheck:["tailX"+c]}}let l={};return Object.keys(s).length>0&&(l.newValues={tail:s}),Object.keys(o).length>0&&(l.useEssentialOrDefaultValue={tail:o}),l},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o}){let l=[],u=!1;for(let c in e.tail)a[c].tailAttr&&a[c].tailAttr!==null?l.push({setDependency:s[c].tailAttr,desiredValue:e.tail[c],variableIndex:0}):r.tailShadow!==null?u=!0:r.basedOnHead&&r.basedOnDisplacement?l.push({setDependency:s[c].x,desiredValue:a[c].headX.subtract(e.tail[c]).simplify()}):l.push({setStateVariable:"tail",value:{[c]:e.tail[c]}});if(u)if(o[0]>1){let c=["vector"];for(let p in e.tail)c[Number(p)+1]=e.tail[p].tree;c.length=o[0]+1,l.push({setDependency:"tailShadow",desiredValue:nn.fromAst(c)})}else o[0]===1&&"0"in e.tail&&l.push({setDependency:"tailShadow",desiredValue:e.tail[0]});return{success:!0,instructions:l}}},t.numericalEndpoints={forRenderer:!0,returnDependencies:()=>({head:{dependencyType:"stateVariable",variableName:"head"},tail:{dependencyType:"stateVariable",variableName:"tail"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),definition:function({dependencyValues:e}){let r,a;if(e.nDimensions===1){let s=e.head.evaluate_to_constant();Number.isFinite(s)||(s=NaN),a=e.tail.evaluate_to_constant(),Number.isFinite(a)||(a=NaN)}else{r=[],a=[];for(let s=0;s<e.nDimensions;s++){let o=e.head[s].evaluate_to_constant();Number.isFinite(o)||(o=NaN),r.push(o);let l=e.tail[s].evaluate_to_constant();Number.isFinite(l)||(l=NaN),a.push(l)}}return{newValues:{numericalEndpoints:[a,r]}}}},t.displacementCoords={forRenderer:!0,returnDependencies:()=>({displacement:{dependencyType:"stateVariable",variableName:"displacement"}}),definition({dependencyValues:e}){let r=[];for(let a of e.displacement)a?r.push(a.tree):r.push("\uFF3F");return r.length>1?r=["vector",...r]:r.length===1?r=r[0]:r="\uFF3F",{newValues:{displacementCoords:nn.fromAst(r)}}}},t.graphXmin={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"graphXmax",forRenderer:!0},{variableName:"graphYmin",forRenderer:!0},{variableName:"graphYmax",forRenderer:!0}],returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]}}),definition({dependencyValues:e}){return e.graphAncestor?{newValues:{graphXmin:e.graphAncestor.stateValues.xmin,graphXmax:e.graphAncestor.stateValues.xmax,graphYmin:e.graphAncestor.stateValues.ymin,graphYmax:e.graphAncestor.stateValues.ymax}}:{newValues:{graphXmin:null,graphXmax:null,graphYmin:null,graphYmax:null}}}},t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalEndpoints:{dependencyType:"stateVariable",variableName:"numericalEndpoints"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:e}){let r=1,a=1;e.graphXmin!==null&&e.graphXmax!==null&&e.graphYmin!==null&&e.graphYmax!==null&&(r=e.graphXmax-e.graphXmin,a=e.graphYmax-e.graphYmin);let s=e.numericalEndpoints[0][0],o=e.numericalEndpoints[0][1],l=e.numericalEndpoints[1][0],u=e.numericalEndpoints[1][1],c=Number.isFinite(s)&&Number.isFinite(o)&&Number.isFinite(l)&&Number.isFinite(u),p=(l-s)/r,m=(u-o)/a,f=p*p+m*m,d=e.nDimensions!==2||!c||f===0;return{newValues:{nearestPoint:function(h){if(d)return{};let y=((h.x1-s)/r*p+(h.x2-o)/a*m)/f,b={};return y<=0?b={x1:s,x2:o}:y>=1?b={x1:l,x2:u}:b={x1:s+y*p*r,x2:o+y*m*a},h.x3!==void 0&&(b.x3=0),b}}}}},t}moveVector({tailcoords:t,headcoords:e,transient:r,sourceInformation:a}){let s=[];if(t!==void 0){if(this.stateValues.basedOnHead&&this.stateValues.basedOnDisplacement){let o;e===void 0?o=t.map((l,u)=>this.stateValues.numericalEndpoints[1][u]-l):o=t.map((l,u)=>e[u]-l),s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"displacement",value:o.map(l=>nn.fromAst(l)),sourceInformation:a})}else s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"tail",value:t.map(o=>nn.fromAst(o)),sourceInformation:a});if(e===void 0&&!this.stateValues.basedOnHead&&this.stateValues.basedOnDisplacement){let o=t.map((l,u)=>this.stateValues.numericalEndpoints[1][u]-l);s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"displacement",value:o.map(l=>nn.fromAst(l)),sourceInformation:a})}}if(e!==void 0){if(this.stateValues.basedOnHead||!this.stateValues.basedOnDisplacement)s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"head",value:e.map(o=>nn.fromAst(o)),sourceInformation:a});else{t==null&&(t=this.stateValues.numericalEndpoints[0]);let o=t.map((l,u)=>e[u]-l);s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"displacement",value:o.map(l=>nn.fromAst(l)),sourceInformation:a})}if(t===void 0&&this.stateValues.basedOnHead&&this.stateValues.basedOnDisplacement){let o=e.map((l,u)=>l-this.stateValues.numericalEndpoints[0][u]);s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"displacement",value:o.map(l=>nn.fromAst(l)),sourceInformation:a})}}return r?this.coreFunctions.performUpdate({updateInstructions:s,transient:r}):this.coreFunctions.performUpdate({updateInstructions:s,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{head:e,tail:t}}})}finalizeVectorPosition(){return this.actions.moveVector({tailcoords:this.stateValues.numericalEndpoints[0],headcoords:this.stateValues.numericalEndpoints[1]})}};T(as,"componentType","vector"),T(as,"useChildrenForReference",!1),T(as,"primaryStateVariableForDefinition","displacementShadow"),T(as,"adapters",[{stateVariable:"displacementCoords",componentType:"coords"}]);import Et from"math-expressions";var iu=class extends Qe{static get stateVariablesShadowedForReference(){return["nPointsSpecified","points","radians","degrees","numericalPoints"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.radius={createComponentOfType:"math",createStateVariable:"radius",defaultValue:Et.fromAst(1),public:!0},e.renderAsAcuteAngle={createComponentOfType:"boolean",createStateVariable:"renderAsAcuteAngle",defaultValue:!1,public:!0,forRenderer:!0},e.inDegrees={createComponentOfType:"boolean",createStateVariable:"inDegrees",defaultValue:!1,public:!0,forRenderer:!0},e.radians={createComponentOfType:"math"},e.degrees={createComponentOfType:"math"},e.through={createComponentOfType:"_pointListComponent"},e.betweenLines={createComponentOfType:"_lineListComponent"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){return r.every(a=>a.componentType==="string"||a.doenetAttributes&&a.doenetAttributes.createdFromMacro)?{success:!0,newAttributes:{radians:{component:{componentType:"math",children:r}}}}:{success:!1}};return t.push({replacementFunction:e}),t}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.lineNames={returnDependencies:()=>({betweenLines:{dependencyType:"attributeComponent",attributeName:"betweenLines",variableNames:["lineNames"]}}),definition({dependencyValues:e}){let r=[];return e.betweenLines!==null&&(r=e.betweenLines.stateValues.lineNames),{newValues:{lineNames:r}}}},t.betweenLinesName={returnDependencies:()=>({betweenLines:{dependencyType:"attributeComponent",attributeName:"betweenLines"}}),definition({dependencyValues:e}){let r=null;return e.betweenLines!==null&&(r=e.betweenLines.componentName),{newValues:{betweenLinesName:r}}}},t.nPointsSpecified={returnDependencies:()=>({through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["nPoints"]}}),definition({dependencyValues:e}){return e.through!==null?{newValues:{nPointsSpecified:e.through.stateValues.nPoints}}:{newValues:{nPointsSpecified:0}}}},t.points={isArray:!0,nDimensions:2,entryPrefixes:["pointX","point"],stateVariablesDeterminingDependencies:["nPointsSpecified","betweenLinesName"],returnArraySizeDependencies:()=>({radians:{dependencyType:"attributeComponent",attributeName:"radians",variableNames:["value"]},degrees:{dependencyType:"attributeComponent",attributeName:"degrees",variableNames:["value"]}}),returnArraySize({dependencyValues:e}){return e.radians!==null||e.degrees!==null?[0,0]:[3,2]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="pointX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={nPointsSpecified:{dependencyType:"value",value:r.nPointsSpecified}};r.betweenLinesName!==null&&(a.lineChildren={dependencyType:"child",parentName:r.betweenLinesName,childGroups:["lines"],variableNames:["points","nDimensions","coeff0","coeffvar1","coeffvar2"]});let s={};for(let o of e){let[l,u]=o.split(",");if(l==="0"||r.nPointsSpecified>2){let c=Number(l)+1+"_"+(Number(u)+1);s[o]={through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["pointX"+c]}}}else if(l==="2"&&r.nPointsSpecified===2){let c="2_"+(Number(u)+1);s[o]={through:{dependencyType:"attributeComponent",attributeName:"through",variableNames:["pointX"+c]}}}}return{globalDependencies:a,dependenciesByKey:s}},arrayDefinitionByKey({dependencyValuesByKey:e,globalDependencyValues:r,arrayKeys:a}){if(r.lineChildren)if(r.lineChildren.length!==2)console.warn(`Cannot define an angle between ${r.lineChildren.length} line(s)`);else{let c=r.lineChildren[0],p=r.lineChildren[1],m=uz(c,p);if(m===void 0){let C={};for(let w=0;w<3;w++)for(let S=0;S<2;S++)C[w+","+S]=Et.fromAst("\uFF3F");return{newValues:{points:C}}}let f=m,d=c.stateValues.points[0][0].evaluate_to_constant(),h=c.stateValues.points[0][1].evaluate_to_constant(),y=c.stateValues.points[1][0].evaluate_to_constant(),b=c.stateValues.points[1][1].evaluate_to_constant(),g=[Et.fromAst(f[0].tree+y-d),Et.fromAst(f[1].tree+b-h)];d=p.stateValues.points[0][0].evaluate_to_constant(),h=p.stateValues.points[0][1].evaluate_to_constant(),y=p.stateValues.points[1][0].evaluate_to_constant(),b=p.stateValues.points[1][1].evaluate_to_constant();let v=[Et.fromAst(f[0].tree+y-d),Et.fromAst(f[1].tree+b-h)];return{newValues:{points:{"0,0":g[0],"0,1":g[1],"1,0":f[0],"1,1":f[1],"2,0":v[0],"2,1":v[1]}}}}let s=r.nPointsSpecified,o={},l={};for(let c of a){let[p,m]=c.split(",");if(p==="0"||s>2){let f=Number(p)+1+"_"+(Number(m)+1),d;e[c].through!==null&&(d=e[c].through.stateValues["pointX"+f]),d===void 0?p==="0"&&m==="1"||p==="2"&&m==="0"?l[c]={defaultValue:Et.fromAst(1)}:l[c]={defaultValue:Et.fromAst(0)}:o[c]=d}else if(p==="2"&&s===2){let f="2_"+(Number(m)+1),d;e[c].through!==null&&(d=e[c].through.stateValues["pointX"+f]),d===void 0?m==="0"?l[c]={defaultValue:Et.fromAst(1)}:l[c]={defaultValue:Et.fromAst(0)}:o[c]=d}else p==="2"&&m==="0"?l[c]={defaultValue:Et.fromAst(1)}:l[c]={defaultValue:Et.fromAst(0)}}let u={};return Object.keys(o).length>0&&(u.newValues={points:o}),Object.keys(l).length>0&&(u.useEssentialOrDefaultValue={points:l}),u}},t.radians={public:!0,componentType:"math",forRenderer:!0,returnDependencies:()=>({radians:{dependencyType:"attributeComponent",attributeName:"radians",variableNames:["value"]},degrees:{dependencyType:"attributeComponent",attributeName:"degrees",variableNames:["value"]},points:{dependencyType:"stateVariable",variableName:"points"}}),definition({dependencyValues:e}){if(e.radians!==null)return{newValues:{radians:e.radians.stateValues.value.simplify()}};if(e.degrees!==null)return{newValues:{radians:e.degrees.stateValues.value.multiply(Et.fromAst(["/","pi",180])).simplify()}};let r=[],a=!1;for(let o=0;o<3;o++)r.push([e.points[o][0].evaluate_to_constant(),e.points[o][1].evaluate_to_constant()]),(r[o][0]===null||r[o][1]===null)&&(a=!0);let s;return a?{newValues:{radians:Et.fromAst("\uFF3F")}}:(s=Math.atan2(r[2][1]-r[1][1],r[2][0]-r[1][0])-Math.atan2(r[0][1]-r[1][1],r[0][0]-r[1][0]),s<0&&(s+=2*Math.PI),{newValues:{radians:Et.fromAst(s)}})}},t.value={isAlias:!0,targetVariableName:"radians"},t.angle={isAlias:!0,targetVariableName:"radians"},t.degrees={public:!0,componentType:"math",forRenderer:!0,returnDependencies:()=>({radians:{dependencyType:"stateVariable",variableName:"radians"}}),definition({dependencyValues:e}){let r;return e.radians.tree==="\uFF3F"||Number.isNaN(e.radians.tree)?r=e.radians:r=e.radians.multiply(Et.fromAst(["/",180,"pi"])).simplify(),{newValues:{degrees:r}}}},t.numericalPoints={isArray:!0,entryPrefixes:["numericalPoint"],forRenderer:!0,returnArraySizeDependencies:()=>({radians:{dependencyType:"attributeComponent",attributeName:"radians",variableNames:["value"]},degrees:{dependencyType:"attributeComponent",attributeName:"degrees",variableNames:["value"]}}),returnArraySize({dependencyValues:e}){return e.radians!==null||e.degrees!==null?[0]:[3]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={point:{dependencyType:"stateVariable",variableName:"point"+(Number(a)+1)}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].point,l=[];for(let u=0;u<2;u++){let c=o[u].evaluate_to_constant();Number.isFinite(c)||(c=NaN),l.push(c)}a[s]=l}return{newValues:{numericalPoints:a}}}},t.numericalRadius={forRenderer:!0,returnDependencies:()=>({radius:{dependencyType:"stateVariable",variableName:"radius"}}),definition({dependencyValues:e}){let r=e.radius.evaluate_to_constant();return Number.isFinite(r)||(r=NaN),{newValues:{numericalRadius:r}}}},t}};T(iu,"componentType","angle"),T(iu,"adapters",["radians"]);function uz(i,t){if(i.stateValues.nDimensions!==2||t.stateValues.nDimensions!==2){console.log("Calculating angle between two lines implemented only in 2D");return}let e=i.stateValues.coeffvar1.evaluate_to_constant(),r=i.stateValues.coeffvar2.evaluate_to_constant(),a=i.stateValues.coeff0.evaluate_to_constant(),s=t.stateValues.coeffvar1.evaluate_to_constant(),o=t.stateValues.coeffvar2.evaluate_to_constant(),l=t.stateValues.coeff0.evaluate_to_constant();if(!(Number.isFinite(e)&&Number.isFinite(r)&&Number.isFinite(a)&&Number.isFinite(s)&&Number.isFinite(o)&&Number.isFinite(l))){console.log("Calculating angle between two lines implemented only for constant coefficients");return}let u=e*o-s*r;if(Math.abs(u)<1e-14)if(Math.abs(l*e-a*s)>1e-14){console.log("Cannot calculate angle between two parallel lines");return}else return e===0&&r===0&&a===0||s===0&&o===0&&l===0?void 0:r!==0?[Et.fromAst(0),Et.fromAst(-a/r)]:[Et.fromAst(-a/e),Et.fromAst(0)];let c=(l*r-a*o)/u,p=(a*s-l*e)/u;return[Et.fromAst(c),Et.fromAst(p)]}var tE=j(F0()),rE=j(M0()),nE=j(eE()),fo=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.weight={createComponentOfType:"number",createStateVariable:"weight",defaultValue:1,public:!0},e.inline={createComponentOfType:"boolean",createStateVariable:"inline",defaultValue:!1,public:!0,propagateToDescendants:!0},e.size={createComponentOfType:"number",createStateVariable:"size",defaultValue:10,public:!0,propagateToDescendants:!0},e.symbolicEquality={createComponentOfType:"boolean",createStateVariable:"symbolicEquality",defaultValue:!1,public:!0,propagateToDescendants:!0},e.matchPartial={createComponentOfType:"boolean",createStateVariable:"matchPartial",defaultValue:!1,public:!0,propagateToDescendants:!0},e.forceFullCheckworkButton={createComponentOfType:"boolean",createStateVariable:"forceFullCheckworkButton",defaultValue:!1,public:!0},e.simplifyOnCompare={createComponentOfType:"text",createStateVariable:"simplifyOnCompare",defaultValue:"none",toLowerCase:!0,valueTransformations:{"":"full",true:"full"},validValues:["none","full","numbers","numbersepreserveorder"],public:!0,propagateToDescendants:!0},e.expandOnCompare={createComponentOfType:"boolean",createStateVariable:"expandOnCompare",defaultValue:!1,public:!0,propagateToDescendants:!0},e.unorderedCompare={createComponentOfType:"boolean",createStateVariable:"unorderedCompare",defaultValue:!1,public:!0,propagateToDescendants:!0},e.matchByExactPositions={createComponentOfType:"boolean",createStateVariable:"matchByExactPositions",defaultValue:!1,public:!0,propagateToDescendants:!0},e.nAwardsCredited={createComponentOfType:"integer",createStateVariable:"nAwardsCredited",defaultValue:1,public:!0},e.maximumNumberOfAttempts={createComponentOfType:"integer",createStateVariable:"maximumNumberOfAttempts",defaultValue:1/0,public:!0},e.allowedErrorInNumbers={createComponentOfType:"number",createStateVariable:"allowedErrorInNumbers",defaultValue:0,public:!0,propagateToDescendants:!0},e.includeErrorInNumberExponents={createComponentOfType:"boolean",createStateVariable:"includeErrorInNumberExponents",defaultValue:!1,public:!0,propagateToDescendants:!0},e.allowedErrorIsAbsolute={createComponentOfType:"boolean",createStateVariable:"allowedErrorIsAbsolute",defaultValue:!1,public:!0,propagateToDescendants:!0},e.nSignErrorsMatched={createComponentOfType:"number",createStateVariable:"nSignErrorsMatched",defaultValue:0,public:!0,propagateToDescendants:!0},e.nPeriodicSetMatchesRequired={createComponentOfType:"integer",createStateVariable:"nPeriodicSetMatchesRequired",defaultValue:3,public:!0,propagateToDescendants:!0},e.feedbackDefinitions={createComponentOfType:"feedbackDefinitions",createStateVariable:"feedbackDefinitions",public:!0,propagateToDescendants:!0,mergeArrays:!0},e.showCorrectness={createComponentOfType:"boolean",createStateVariable:"showCorrectness",defaultValue:t.flags?t.flags.showCorrectness!==!1:!0,forRenderer:!0},e.type={createPrimitiveOfType:"string"},e.disableAfterCorrect={createComponentOfType:"boolean",createStateVariable:"disableAfterCorrect",defaultValue:!1,public:!0},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:a,componentAttributes:s}){if(!a.every(u=>u.componentType==="string"||u.doenetAttributes&&u.doenetAttributes.createdFromMacro))return{success:!1};let o;return s.type?o=s.type:o="math",["math","text","boolean"].includes(o)||(console.warn(`Invalid type ${o}`),o="math"),{success:!0,newChildren:[{componentType:"award",children:[{componentType:o,children:a}]}]}};t.push({replacementFunction:e});function r({matchedChildren:a,componentAttributes:s,componentInfoObjects:o}){let l=!1;for(let m of a){if(o.isInheritedComponentType({inheritedComponentType:m.componentType,baseComponentType:"_input"}))return{success:!1};if(o.isInheritedComponentType({inheritedComponentType:m.componentType,baseComponentType:"considerAsResponses"}))return{success:!1};(o.isInheritedComponentType({inheritedComponentType:m.componentType,baseComponentType:"_composite"})||o.isInheritedComponentType({inheritedComponentType:m.componentType,baseComponentType:"award"})&&m.children&&!m.children.some(f=>o.isInheritedComponentType({inheritedComponentType:f.componentType,baseComponentType:"when"})))&&(l=!0)}if(!l)return{success:!1};let u;s.type?u=s.type:u="math",["math","text","boolean"].includes(u)||(console.warn(`Invalid type ${u}`),u="math");let p=[{componentType:u+"Input"},...a];return{success:!0,newChildren:p}}return t.push({replacementFunction:r}),t}static returnChildGroups(){return[{group:"awards",componentTypes:["award"]},{group:"numbers",componentTypes:["number"]},{group:"inputs",componentTypes:["_input"]},{group:"responses",componentTypes:["considerAsResponses"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return yr({stateVariableDefinitions:t,oldName:"disabled",newName:"disabledOriginal"}),t.haveAwardThatRequiresInput={returnDependencies:()=>({awardChildren:{dependencyType:"child",childGroups:["awards"],variableNames:["requireInputInAnswer"]}}),definition({dependencyValues:e}){return{newValues:{haveAwardThatRequiresInput:e.awardChildren.some(r=>r.stateValues.requireInputInAnswer)}}}},t.allInputChildrenIncludingSugared={returnDependencies:()=>({allInputChildrenIncludingSugared:{dependencyType:"child",childGroups:["inputs"]}}),definition({dependencyValues:e}){return{newValues:{allInputChildrenIncludingSugared:e.allInputChildrenIncludingSugared}}}},t.inputChildren={stateVariablesDeterminingDependencies:["allInputChildrenIncludingSugared"],additionalStateVariablesDefined:["inputChildIndices"],forRenderer:!0,returnDependencies({stateValues:e}){let r={allInputChildrenIncludingSugared:{dependencyType:"stateVariable",variableName:"allInputChildrenIncludingSugared"},haveAwardThatRequiresInput:{dependencyType:"stateVariable",variableName:"haveAwardThatRequiresInput"}};for(let[a,s]of e.allInputChildrenIncludingSugared.entries())r[`child${a}FromSugar`]={dependencyType:"doenetAttribute",componentName:s.componentName,attributeName:"createdFromSugar"};return r},definition({dependencyValues:e}){let r=!e.haveAwardThatRequiresInput||e.allInputChildrenIncludingSugared.length>1,a=[],s=[];for(let[o,l]of e.allInputChildrenIncludingSugared.entries())r&&e[`child${o}FromSugar`]||(a.push(l),s.push(o));return{newValues:{inputChildren:a,inputChildIndices:s}}}},t.inputChildrenWithValues={stateVariablesDeterminingDependencies:["inputChildIndices"],forRenderer:!0,returnDependencies:({stateValues:e})=>({inputChildren:{dependencyType:"child",childGroups:["inputs"],variableNames:["valueToRecordOnSubmit","valueRecordedAtSubmit","value","immediateValue"],childIndices:e.inputChildIndices,variablesOptional:!0}}),definition:function({dependencyValues:e}){return{newValues:{inputChildrenWithValues:e.inputChildren}}}},t.inputChildWithValues={returnDependencies:()=>({inputChildrenWithValues:{dependencyType:"stateVariable",variableName:"inputChildrenWithValues"}}),definition({dependencyValues:e}){let r=null;return e.inputChildrenWithValues.length===1&&(r=e.inputChildrenWithValues[0]),{newValues:{inputChildWithValues:r}}}},t.awardInputResponseChildren={returnDependencies:()=>({awardInputResponseChildren:{dependencyType:"child",childGroups:["awards","inputs","responses"]}}),definition:({dependencyValues:e})=>({newValues:{awardInputResponseChildren:e.awardInputResponseChildren}})},t.nResponses={stateVariablesDeterminingDependencies:["awardInputResponseChildren"],returnDependencies({stateValues:e,componentInfoObjects:r}){let a={childTypes:{dependencyType:"value",value:e.awardInputResponseChildren.map(s=>s.componentType)}};for(let[s,o]of e.awardInputResponseChildren.entries())r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"award"})?a["child"+s]={dependencyType:"descendant",ancestorName:o.componentName,componentTypes:["_base"],variableNames:["isResponse","nValues"],variablesOptional:!0,recurseToMatchedChildren:!0,includeNonActiveChildren:!0,skipOverAdapters:!0}:r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"_input"})?a["childNValues"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"nValues",variablesOptional:!0}:a["child"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"childrenWithNValues"};return a},definition({dependencyValues:e,componentInfoObjects:r}){let a=0;for(let[s,o]of e.childTypes.entries())if(r.isInheritedComponentType({inheritedComponentType:o,baseComponentType:"award"}))for(let l of e["child"+s])!l.stateValues.isResponse||r.isInheritedComponentType({inheritedComponentType:l.componentType,baseComponentType:"_composite"})||(l.stateValues.nValues===void 0?a+=1:a+=l.stateValues.nValues);else if(r.isInheritedComponentType({inheritedComponentType:o,baseComponentType:"_input"})){let l=e["childNValues"+s];l===void 0?a+=1:a+=l}else for(let l of e["child"+s])l.stateValues.nValues===void 0?a+=1:a+=l.stateValues.nValues;return{newValues:{nResponses:a}}}},t.currentResponses={public:!0,isArray:!0,entryPrefixes:["currentResponse"],hasVariableComponentType:!0,defaultEntryValue:"\uFF3F",stateVariablesDeterminingDependencies:["awardInputResponseChildren"],returnArraySizeDependencies:()=>({nResponses:{dependencyType:"stateVariable",variableName:"nResponses"}}),returnArraySize({dependencyValues:e}){return[e.nResponses]},returnArrayDependenciesByKey({stateValues:e,componentInfoObjects:r}){let a={childTypes:{dependencyType:"value",value:e.awardInputResponseChildren.map(s=>s.componentType)}};for(let[s,o]of e.awardInputResponseChildren.entries())r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"award"})?a["child"+s]={dependencyType:"descendant",ancestorName:o.componentName,componentTypes:["_base"],variableNames:["isResponse","value","values","componentType"],variablesOptional:!0,recurseToMatchedChildren:!0,includeAttributeChildren:!0,includeNonActiveChildren:!0,skipOverAdapters:!0}:r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"_input"})?(a["childValue"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"value",variablesOptional:!0},a["childValues"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"values",variablesOptional:!0},a["childComponentType"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"componentType",variablesOptional:!0}):a["child"+s]={dependencyType:"stateVariable",componentName:o.componentName,variableName:"childrenAsResponses"};return{globalDependencies:a}},arrayDefinitionByKey({globalDependencyValues:e,componentInfoObjects:r}){let a=[],s=[],o=[];for(let[l,u]of e.childTypes.entries())if(r.isInheritedComponentType({inheritedComponentType:u,baseComponentType:"award"}))for(let c of e["child"+l])!c.stateValues.isResponse||r.isInheritedComponentType({inheritedComponentType:c.componentType,baseComponentType:"_composite"})||o.push(c);else if(r.isInheritedComponentType({inheritedComponentType:u,baseComponentType:"_input"})){let c={componentType:u,stateValues:{value:e["childValue"+l],values:e["childValues"+l],componentType:e["childComponentType"+l]}};o.push(c)}else o.push(...e["child"+l]);for(let l of o){let u=l.stateValues.componentType;u||(u=l.componentType),Array.isArray(l.stateValues.values)?(a.push(...l.stateValues.values),s.push(...Array(l.stateValues.values.length).fill(u))):(a.push(l.stateValues.value),s.push(u))}return{newValues:{currentResponses:a},setComponentType:{currentResponses:s}}}},t.currentResponse={isAlias:!0,targetVariableName:"currentResponse1"},t.nSubmittedResponses={public:!0,componentType:"number",returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{nSubmittedResponses:{variablesToCheck:["nSubmittedResponses"],defaultValue:0}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"nSubmittedResponses",value:e.nSubmittedResponses}]}}},t.submittedResponsesComponentType={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{submittedResponsesComponentType:{variablesToCheck:["submittedResponsesComponentType"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return e.submittedResponsesComponentType?{success:!0,instructions:[{setStateVariable:"submittedResponsesComponentType",value:[...e.submittedResponsesComponentType]}]}:{success:!0,instructions:[{setStateVariable:"submittedResponsesComponentType",value:[]}]}}},t.submittedResponses={public:!0,isArray:!0,entryPrefixes:["submittedResponse"],defaultEntryValue:"\uFF3F",essential:!0,componentType:"math",hasVariableComponentType:!0,returnArraySizeDependencies:()=>({nSubmittedResponses:{dependencyType:"stateVariable",variableName:"nSubmittedResponses"}}),returnArraySize({dependencyValues:e}){return[e.nSubmittedResponses]},returnArrayDependenciesByKey(){return{globalDependencies:{submittedResponsesComponentType:{dependencyType:"stateVariable",variableName:"submittedResponsesComponentType"},nSubmittedResponses:{dependencyType:"stateVariable",variableName:"nSubmittedResponses"}}}},arrayDefinitionByKey({globalDependencyValues:e}){let r=[];e.submittedResponsesComponentType&&r.push(...e.submittedResponsesComponentType.slice(0,e.nSubmittedResponses));let a={};for(let s=0;s<e.nSubmittedResponses;s++)a[s]={variablesToCheck:[{variableName:"submittedResponses",arrayIndex:s}]},r[s]||(r[s]="math");return{useEssentialOrDefaultValue:{submittedResponses:a},setComponentType:{submittedResponses:r}}},inverseArrayDefinitionByKey:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setDependency:"nSubmittedResponses",desiredValue:e.submittedResponses.length},{setStateVariable:"submittedResponses",value:[...e.submittedResponses]}]}}},t.submittedResponse={isAlias:!0,targetVariableName:"submittedResponse1"},t.delegateCheckWork={additionalStateVariablesDefined:["delegateCheckWorkToInput","delegateCheckWorkToAncestor"],forRenderer:!0,returnDependencies:()=>({inputChildren:{dependencyType:"stateVariable",variableName:"inputChildren"},forceFullCheckworkButton:{dependencyType:"stateVariable",variableName:"forceFullCheckworkButton"},sectionAncestor:{dependencyType:"ancestor",componentType:"_sectioningComponent",variableNames:["suppressAnswerSubmitButtons"]},documentAncestor:{dependencyType:"ancestor",componentType:"document",variableNames:["suppressAnswerSubmitButtons"]}}),definition:function({dependencyValues:e,componentName:r}){let a=!1,s=!1,o=!1;return(e.documentAncestor.stateValues.suppressAnswerSubmitButtons||e.sectionAncestor&&e.sectionAncestor.stateValues.suppressAnswerSubmitButtons)&&(a=o=!0),!a&&e.inputChildren.length===1&&!e.forceFullCheckworkButton&&(s=o=!0),{newValues:{delegateCheckWork:o,delegateCheckWorkToAncestor:a,delegateCheckWorkToInput:s}}}},t.creditAchievedIfSubmit={additionalStateVariablesDefined:["awardsUsedIfSubmit","awardChildren","inputUsedIfSubmit"],stateVariablesDeterminingDependencies:["inputChildIndices"],returnDependencies:({stateValues:e})=>({awardChildren:{dependencyType:"child",childGroups:["awards"],variableNames:["credit","creditAchieved","fractionSatisfied"]},inputChildren:{dependencyType:"child",childGroups:["inputs"],variableNames:["creditAchievedIfSubmit"],childIndices:e.inputChildIndices,variablesOptional:!0},nAwardsCredited:{dependencyType:"stateVariable",variableName:"nAwardsCredited"}}),definition:function({dependencyValues:e}){let r=0,a=e.nAwardsCredited,s=Array(a).fill(null),o=null;if(e.awardChildren.length===0){if(e.inputChildren.length===1){let l=e.inputChildren[0].stateValues.creditAchievedIfSubmit;l>=0&&(r=l,o=e.inputChildren[0].componentName)}}else{let l=Array(a).fill(null),u=0;for(let c of e.awardChildren){let p=c.stateValues.creditAchieved;if((p>u||s[a-1]===null)&&c.stateValues.fractionSatisfied>0){if(s[0]===null)s[0]=c.componentName,l[0]=p,u=Math.min(...l);else for(let[m,f]of l.entries())if(p>f||f===null){s.splice(m,0,c.componentName),s=s.slice(0,a),l.splice(m,0,p),l=l.slice(0,a),u=Math.min(...l);break}}}r=Math.min(1,l.reduce((c,p)=>c+p,0))}return{newValues:{creditAchievedIfSubmit:r,awardsUsedIfSubmit:s,awardChildren:e.awardChildren,inputUsedIfSubmit:o}}}},t.creditAchieved={defaultValue:0,public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{creditAchieved:{variablesToCheck:["creditAchieved"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"creditAchieved",value:e.creditAchieved}]}}},t.responseHasBeenSubmitted={public:!0,componentType:"boolean",defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{responseHasBeenSubmitted:{variablesToCheck:["responseHasBeenSubmitted"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"responseHasBeenSubmitted",value:e.responseHasBeenSubmitted}]}}},t.creditAchievedDependencies={additionalStateVariablesDefined:["creditAchievedDependenciesOld"],returnDependencies:()=>({currentCreditAchievedDependencies:{dependencyType:"recursiveDependencyValues",variableNames:["creditAchievedIfSubmit"],includeImmediateValueWithValue:!0,includeRawValueWithImmediateValue:!0}}),definition({dependencyValues:e}){let r=(0,nE.default)(e.currentCreditAchievedDependencies,{replacer:Vd});return{newValues:{creditAchievedDependenciesOld:JSON.parse(r,Id),creditAchievedDependencies:rE.default.stringify((0,tE.default)(r))}}}},t.creditAchievedDependenciesAtSubmit={defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{creditAchievedDependenciesAtSubmit:{variablesToCheck:["creditAchievedDependenciesAtSubmit"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"creditAchievedDependenciesAtSubmit",value:e.creditAchievedDependenciesAtSubmit}]}}},t.justSubmitted={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!1,willBeEssential:!0,returnDependencies:()=>({currentCreditAchievedDependencies:{dependencyType:"stateVariable",variableName:"creditAchievedDependencies"},currentCreditAchievedDependenciesOld:{dependencyType:"stateVariable",variableName:"creditAchievedDependenciesOld"},creditAchievedDependenciesAtSubmit:{dependencyType:"stateVariable",variableName:"creditAchievedDependenciesAtSubmit"},disableAfterCorrect:{dependencyType:"stateVariable",variableName:"disableAfterCorrect"},hasBeenCorrect:{dependencyType:"stateVariable",variableName:"hasBeenCorrect"}}),definition:function({dependencyValues:e}){if(e.disableAfterCorrect&&e.hasBeenCorrect)return{newValues:{justSubmitted:!0}};let r=!0;return e.creditAchievedDependenciesAtSubmit&&(typeof e.creditAchievedDependenciesAtSubmit=="string"?r=e.creditAchievedDependenciesAtSubmit!==e.currentCreditAchievedDependencies:r=!rn(e.currentCreditAchievedDependenciesOld,e.creditAchievedDependenciesAtSubmit)),r?{newValues:{justSubmitted:!1},makeEssential:{justSubmitted:!0}}:{useEssentialOrDefaultValue:{justSubmitted:{variablesToCheck:["justSubmitted"]}}}},inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"justSubmitted",value:e.justSubmitted}]}}},t.allFeedbacks={returnDependencies:()=>({awardChildren:{dependencyType:"child",childGroups:["awards"],variableNames:["feedbacks"]},feedbackComponents:{dependencyType:"descendant",componentTypes:["_input"],variableNames:["feedbacks"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r=[];for(let a of e.awardChildren)r.push(...a.stateValues.feedbacks);for(let a of e.feedbackComponents)Array.isArray(a.stateValues.feedbacks)&&r.push(...a.stateValues.feedbacks);return{newValues:{allFeedbacks:r}}}},t.numberFeedbacks={public:!0,componentType:"number",returnDependencies:()=>({allFeedbacks:{dependencyType:"stateVariable",variableName:"allFeedbacks"}}),definition({dependencyValues:e}){return{newValues:{numberFeedbacks:e.allFeedbacks.length},checkForActualChange:{numberFeedbacks:!0}}}},t.feedbacks={public:!0,componentType:"feedback",isArray:!0,entryPrefixes:["feedback"],returnArraySizeDependencies:()=>({numberFeedbacks:{dependencyType:"stateVariable",variableName:"numberFeedbacks"}}),returnArraySize({dependencyValues:e}){return[e.numberFeedbacks]},returnArrayDependenciesByKey(){return{globalDependencies:{allFeedbacks:{dependencyType:"stateVariable",variableName:"allFeedbacks"}}}},arrayDefinitionByKey({globalDependencyValues:e}){let r={};for(let a=0;a<e.__array_size;a++)r[a]=e.allFeedbacks[a];return{newValues:{feedbacks:r}}}},t.nSubmissions={public:!0,componentType:"integer",defaultValue:0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{nSubmissions:{variablesToCheck:["nSubmissions"]}}}),inverseDefinition:({desiredStateVariableValues:e})=>({success:!0,instructions:[{setStateVariable:"nSubmissions",value:e.nSubmissions}]})},t.numberOfAttemptsLeft={public:!0,componentType:"integer",forRenderer:!0,returnDependencies:()=>({nSubmissions:{dependencyType:"stateVariable",variableName:"nSubmissions"},maximumNumberOfAttempts:{dependencyType:"stateVariable",variableName:"maximumNumberOfAttempts"}}),definition({dependencyValues:e}){return{newValues:{numberOfAttemptsLeft:e.maximumNumberOfAttempts-e.nSubmissions}}}},t.hasBeenCorrect={defaultValue:!1,returnDependencies:()=>({creditAchieved:{dependencyType:"stateVariable",variableName:"creditAchieved"}}),definition({dependencyValues:e}){return e.creditAchieved===1?{newValues:{hasBeenCorrect:!0},makeEssential:{hasBeenCorrect:!0}}:{useEssentialOrDefaultValue:{hasBeenCorrect:{variablesToCheck:["hasBeenCorrect"]}}}}},t.disabled={public:!0,componentType:"boolean",forRenderer:!0,stateVariablesDeterminingDependencies:["disableAfterCorrect"],returnDependencies({stateValues:e}){let r={disabledOriginal:{dependencyType:"stateVariable",variableName:"disabledOriginal"},numberOfAttemptsLeft:{dependencyType:"stateVariable",variableName:"numberOfAttemptsLeft"},disableAfterCorrect:{dependencyType:"stateVariable",variableName:"disableAfterCorrect"}};return e.disableAfterCorrect&&(r.hasBeenCorrect={dependencyType:"stateVariable",variableName:"hasBeenCorrect"}),r},definition({dependencyValues:e}){return{newValues:{disabled:e.disabledOriginal||e.numberOfAttemptsLeft<1||e.disableAfterCorrect&&e.hasBeenCorrect}}}},t.inItemNumber={returnDependencies:()=>({documentAncestor:{dependencyType:"ancestor",componentType:"document",variableNames:["itemNumberByAnswerName"]}}),definition({dependencyValues:e,componentName:r}){return{newValues:{inItemNumber:e.documentAncestor.stateValues.itemNumberByAnswerName[r]}}}},t}actions={submitAnswer:this.submitAnswer.bind(new Proxy(this,this.readOnlyProxyHandler))};submitAnswer(){if(this.stateValues.numberOfAttemptsLeft<1){console.warn(`Cannot submit answer for ${this.componentName} as number of attempts left is ${this.stateValues.numberOfAttemptsLeft}`);return}let t=this.stateValues.creditAchievedIfSubmit,e=this.stateValues.awardsUsedIfSubmit,r=this.stateValues.inputUsedIfSubmit,a=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"creditAchieved",value:t},{updateType:"updateValue",componentName:this.componentName,stateVariable:"responseHasBeenSubmitted",value:!0}];if(this.stateValues.inputChildrenWithValues.length===1){let o=this.stateValues.inputChildrenWithValues[0];r===o.componentName&&"valueToRecordOnSubmit"in o.stateValues&&"valueRecordedAtSubmit"in o.stateValues&&a.push({updateType:"updateValue",componentName:o.componentName,stateVariable:"valueRecordedAtSubmit",value:o.stateValues.valueToRecordOnSubmit})}a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"submittedResponses",value:this.stateValues.currentResponses}),a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"submittedResponsesComponentType",value:this.state.currentResponses.componentType}),a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"justSubmitted",value:!0}),a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"creditAchievedDependenciesAtSubmit",value:this.stateValues.creditAchievedDependencies}),a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"nSubmissions",value:this.stateValues.nSubmissions+1});for(let o of this.stateValues.awardChildren){let l=e.includes(o.componentName);a.push({updateType:"updateValue",componentName:o.componentName,stateVariable:"awarded",value:l})}a.push({updateType:"recordItemSubmission",itemNumber:this.stateValues.inItemNumber});let s=[];for(let o of this.stateValues.currentResponses)o.toString?s.push(o.toString()):s.push(o);return this.coreFunctions.performUpdate({updateInstructions:a,event:{verb:"submitted",object:{componentName:this.componentName,componentType:this.componentType},result:{response:this.stateValues.currentResponses,responseText:s,creditAchieved:t}}}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}};T(fo,"componentType","answer"),T(fo,"renderChildren",!0),T(fo,"variableForPlainMacro","submittedResponses");import vz from"math-expressions";var os=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.credit={createComponentOfType:"number",createStateVariable:"credit",defaultValue:1,public:!0,attributesForCreatedComponent:{convertBoolean:!0}},e.matchPartial={createComponentOfType:"boolean",createStateVariable:"matchPartial",defaultValue:!1,public:!0,propagateToDescendants:!0},e.symbolicEquality={createComponentOfType:"boolean",createStateVariable:"symbolicEquality",defaultValue:!1,public:!0,propagateToDescendants:!0},e.expandOnCompare={createComponentOfType:"boolean",createStateVariable:"expandOnCompare",defaultValue:!1,public:!0,propagateToDescendants:!0},e.simplifyOnCompare={createComponentOfType:"text",createStateVariable:"simplifyOnCompare",defaultValue:"none",toLowerCase:!0,valueTransformations:{"":"full",true:"full"},validValues:["none","full","numbers","numberspreserveorder"],public:!0,propagateToDescendants:!0},e.unorderedCompare={createComponentOfType:"boolean",createStateVariable:"unorderedCompare",defaultValue:!1,public:!0,propagateToDescendants:!0},e.matchByExactPositions={createComponentOfType:"boolean",createStateVariable:"matchByExactPositions",defaultValue:!1,public:!0,propagateToDescendants:!0},e.allowedErrorInNumbers={createComponentOfType:"number",createStateVariable:"allowedErrorInNumbers",defaultValue:0,public:!0,propagateToDescendants:!0},e.includeErrorInNumberExponents={createComponentOfType:"boolean",createStateVariable:"includeErrorInNumberExponents",defaultValue:!1,public:!0,propagateToDescendants:!0},e.allowedErrorIsAbsolute={createComponentOfType:"boolean",createStateVariable:"allowedErrorIsAbsolute",defaultValue:!1,public:!0,propagateToDescendants:!0},e.nSignErrorsMatched={createComponentOfType:"number",createStateVariable:"nSignErrorsMatched",defaultValue:0,public:!0,propagateToDescendants:!0},e.nPeriodicSetMatchesRequired={createComponentOfType:"integer",createStateVariable:"nPeriodicSetMatchesRequired",defaultValue:3,public:!0,propagateToDescendants:!0},e.feedbackCodes={createComponentOfType:"textList",createStateVariable:"feedbackCodes",defaultValue:[],public:!0,propagateToDescendants:!0},e.feedbackText={createComponentOfType:"text",createStateVariable:"feedbackText",defaultValue:null,public:!0,propagateToDescendants:!0},e.targetsAreResponses={createPrimitiveOfType:"string"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r,parentAttributes:a}){if(!r.every(o=>o.componentType==="string"||o.doenetAttributes&&o.doenetAttributes.createdFromMacro))return{success:!1};let s;return a.type?s=a.type:s="math",["math","text","boolean"].includes(s)||(console.warn(`Invalid type ${s}`),s="math"),{success:!0,newChildren:[{componentType:s,children:r}]}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"whens",componentTypes:["when"]},{group:"maths",componentTypes:["math"]},{group:"texts",componentTypes:["text"]},{group:"booleans",componentTypes:["boolean"]},{group:"mathLists",componentTypes:["mathList"]},{group:"textLists",componentTypes:["textList"]},{group:"booleanLists",componentTypes:["booleanList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.parsedExpression={additionalStateVariablesDefined:["requireInputInAnswer"],returnDependencies:()=>({whenChild:{dependencyType:"child",childGroups:["whens"],variableNames:["fractionSatisfied"]},typeChildren:{dependencyType:"child",childGroups:["maths","texts","booleans","mathLists","textLists","booleanLists"]}}),definition:function({dependencyValues:e}){let r=null,a=!1;return e.whenChild.length==0&&e.typeChildren.length>0&&(a=!0,r=vz.fromAst(["=","comp1","comp2"])),{newValues:{parsedExpression:r,requireInputInAnswer:a}}}},t.creditAchieved={public:!0,componentType:"number",additionalStateVariablesDefined:[{variableName:"fractionSatisfied",public:!0,componentType:"number"}],returnDependencies:()=>({credit:{dependencyType:"stateVariable",variableName:"credit"},whenChild:{dependencyType:"child",childGroups:["whens"],variableNames:["fractionSatisfied"]},mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value","unordered"]},textChild:{dependencyType:"child",childGroups:["texts"],variableNames:["value"]},booleanChild:{dependencyType:"child",childGroups:["booleans"],variableNames:["value"]},mathListChild:{dependencyType:"child",childGroups:["mathLists"],variableNames:["maths","unordered"]},textListChild:{dependencyType:"child",childGroups:["textLists"],variableNames:["texts","unordered"]},booleanListChild:{dependencyType:"child",childGroups:["booleanLists"],variableNames:["booleans","unordered"]},answerInput:{dependencyType:"parentStateVariable",variableName:"inputChildWithValues"},parsedExpression:{dependencyType:"stateVariable",variableName:"parsedExpression"},matchPartial:{dependencyType:"stateVariable",variableName:"matchPartial"},symbolicEquality:{dependencyType:"stateVariable",variableName:"symbolicEquality"},expandOnCompare:{dependencyType:"stateVariable",variableName:"expandOnCompare"},simplifyOnCompare:{dependencyType:"stateVariable",variableName:"simplifyOnCompare"},unorderedCompare:{dependencyType:"stateVariable",variableName:"unorderedCompare"},matchByExactPositions:{dependencyType:"stateVariable",variableName:"matchByExactPositions"},allowedErrorInNumbers:{dependencyType:"stateVariable",variableName:"allowedErrorInNumbers"},includeErrorInNumberExponents:{dependencyType:"stateVariable",variableName:"includeErrorInNumberExponents"},allowedErrorIsAbsolute:{dependencyType:"stateVariable",variableName:"allowedErrorIsAbsolute"},nSignErrorsMatched:{dependencyType:"stateVariable",variableName:"nSignErrorsMatched"},nPeriodicSetMatchesRequired:{dependencyType:"stateVariable",variableName:"nPeriodicSetMatchesRequired"}}),definition:function({dependencyValues:e,usedDefault:r}){let a;if(e.whenChild.length>0)a=e.whenChild[0].stateValues.fractionSatisfied;else{if(!e.answerInput||!e.parsedExpression)return{newValues:{creditAchieved:0,fractionSatisfied:0}};a=Tz({dependencyValues:e,usedDefault:r})}a=Math.max(0,Math.min(1,a));let s=0;return Number.isFinite(e.credit)&&(s=Math.max(0,Math.min(1,e.credit))*a),{newValues:{fractionSatisfied:a,creditAchieved:s}}}},t.awarded={public:!0,componentType:"boolean",defaultValue:!1,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{awarded:{variablesToCheck:"awarded"}}}),inverseDefinition:function({desiredStateVariableValues:e,initialChange:r}){return r?{success:!0,instructions:[{setStateVariable:"awarded",value:e.awarded}]}:{success:!1}}},t.allFeedbacks={returnDependencies:()=>({feedbackText:{dependencyType:"stateVariable",variableName:"feedbackText"},feedbackCodes:{dependencyType:"stateVariable",variableName:"feedbackCodes"},feedbackDefinitions:{dependencyType:"parentStateVariable",variableName:"feedbackDefinitions"},awarded:{dependencyType:"stateVariable",variableName:"awarded"}}),definition:function({dependencyValues:e}){if(!e.awarded)return{newValues:{allFeedbacks:[]}};let r=[];for(let a of e.feedbackCodes){let s=a.toLowerCase();for(let o of e.feedbackDefinitions)if(s===o.feedbackCode){r.push(o.feedbackText);break}}return e.feedbackText!==null&&r.push(e.feedbackText),{newValues:{allFeedbacks:r}}}},t.numberFeedbacks={public:!0,componentType:"number",returnDependencies:()=>({allFeedbacks:{dependencyType:"stateVariable",variableName:"allFeedbacks"}}),definition({dependencyValues:e}){return{newValues:{numberFeedbacks:e.allFeedbacks.length},checkForActualChange:{numberFeedbacks:!0}}}},t.feedbacks={public:!0,componentType:"feedback",isArray:!0,entryPrefixes:["feedback"],returnArraySizeDependencies:()=>({numberFeedbacks:{dependencyType:"stateVariable",variableName:"numberFeedbacks"}}),returnArraySize({dependencyValues:e}){return[e.numberFeedbacks]},returnArrayDependenciesByKey(){return{globalDependencies:{allFeedbacks:{dependencyType:"stateVariable",variableName:"allFeedbacks"}}}},arrayDefinitionByKey({globalDependencyValues:e}){let r={};for(let a=0;a<e.__array_size;a++)r[a]=e.allFeedbacks[a];return{newValues:{feedbacks:r}}}},t.feedback={isAlias:!0,targetVariableName:"feedback1"},t}};T(os,"componentType","award"),T(os,"rendererType"),T(os,"adapters",["awarded"]),T(os,"standardizedFeedback",{numericalerror:"Credit reduced because numbers in your answer weren't quite right.  Did you round too much?",goodjob:"Good job!",onesignerror:"Credit reduced because it appears that you made a sign error.",twosignerrors:"Credit reduced because it appears that you made two sign errors."});function Tz({dependencyValues:i,usedDefault:t}){let e={mathChildrenByCode:{},mathListChildrenByCode:{},numberChildrenByCode:{},numberListChildrenByCode:{},textChildrenByCode:{},textListChildrenByCode:{},booleanChildrenByCode:{},booleanListChildrenByCode:{}};Object.assign(e,i);let r=t.unorderedCompare;i.textChild.length>0?e.textChildrenByCode.comp2=i.textChild[0]:i.mathChild.length>0?e.mathChildrenByCode.comp2=i.mathChild[0]:i.booleanChild.length>0?e.booleanChildrenByCode.comp2=i.booleanChild[0]:i.textListChild.length>0?e.textListChildrenByCode.comp2=i.textListChild[0]:i.mathListChild.length>0?e.mathListChildrenByCode.comp2=i.mathListChild[0]:i.booleanListChild.length>0&&(e.booleanListChildrenByCode.comp2=i.booleanListChild[0]);let a=i.answerInput.stateValues.immediateValue;a===void 0&&(a=i.answerInput.stateValues.value);let s={stateValues:{value:a}};return i.answerInput.componentType==="textInput"?e.textChildrenByCode.comp1=s:i.answerInput.componentType==="booleanInput"?e.booleanChildrenByCode.comp1=s:e.mathChildrenByCode.comp1=s,xi({logicTree:i.parsedExpression.tree,canOverrideUnorderedCompare:r,dependencyValues:e})}var ho=class extends hr{static createAttributesObject(t){let e=super.createAttributesObject(t);e.matchPartial={createComponentOfType:"boolean",createStateVariable:"matchPartial",defaultValue:!1,public:!0,propagateToDescendants:!0};for(let r of["symbolicEquality","expandOnCompare","simplifyOnCompare","unorderedCompare","matchByExactPositions","allowedErrorInNumbers","includeErrorInNumberExponents","allowedErrorIsAbsolute","nSignErrorsMatched","nPeriodicSetMatchesRequired"])delete e[r].ignorePropagationFromAncestors,e[r].propagateToDescendants=!0;return e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={additionalStateVariablesDefined:["fractionSatisfied","conditionSatisfied"],returnDependencies:()=>({matchPartial:{dependencyType:"stateVariable",variableName:"matchPartial"},symbolicEquality:{dependencyType:"stateVariable",variableName:"symbolicEquality"},expandOnCompare:{dependencyType:"stateVariable",variableName:"expandOnCompare"},simplifyOnCompare:{dependencyType:"stateVariable",variableName:"simplifyOnCompare"},unorderedCompare:{dependencyType:"stateVariable",variableName:"unorderedCompare"},matchByExactPositions:{dependencyType:"stateVariable",variableName:"matchByExactPositions"},allowedErrorInNumbers:{dependencyType:"stateVariable",variableName:"allowedErrorInNumbers"},includeErrorInNumberExponents:{dependencyType:"stateVariable",variableName:"includeErrorInNumberExponents"},allowedErrorIsAbsolute:{dependencyType:"stateVariable",variableName:"allowedErrorIsAbsolute"},nSignErrorsMatched:{dependencyType:"stateVariable",variableName:"nSignErrorsMatched"},nPeriodicSetMatchesRequired:{dependencyType:"stateVariable",variableName:"nPeriodicSetMatchesRequired"},parsedExpression:{dependencyType:"stateVariable",variableName:"parsedExpression"},booleanChildrenByCode:{dependencyType:"stateVariable",variableName:"booleanChildrenByCode"},booleanListChildrenByCode:{dependencyType:"stateVariable",variableName:"booleanListChildrenByCode"},textChildrenByCode:{dependencyType:"stateVariable",variableName:"textChildrenByCode"},textListChildrenByCode:{dependencyType:"stateVariable",variableName:"textListChildrenByCode"},mathChildrenByCode:{dependencyType:"stateVariable",variableName:"mathChildrenByCode"},mathListChildrenByCode:{dependencyType:"stateVariable",variableName:"mathListChildrenByCode"},numberChildrenByCode:{dependencyType:"stateVariable",variableName:"numberChildrenByCode"},numberListChildrenByCode:{dependencyType:"stateVariable",variableName:"numberListChildrenByCode"}}),definition({dependencyValues:e,usedDefault:r}){if(e.parsedExpression===null)return{newValues:{conditionSatisfied:!1,value:!1,fractionSatisfied:0}};let a=r.unorderedCompare,s=xi({logicTree:e.parsedExpression.tree,canOverrideUnorderedCompare:a,dependencyValues:e}),o=s===1;return{newValues:{fractionSatisfied:s,conditionSatisfied:o,value:o}}}},t}};T(ho,"componentType","when"),T(ho,"rendererType"),T(ho,"stateVariableForAttributeValue","conditionSatisfied");var Tn=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.collaborateGroups={createComponentOfType:"collaborateGroups",createStateVariable:"collaborateGroups",defaultValue:void 0,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nValues={returnDependencies:()=>({}),definition:()=>({newValues:{nValues:1}})},t.answerAncestor={returnDependencies:()=>({answerAncestor:{dependencyType:"ancestor",componentType:"answer",variableNames:["delegateCheckWorkToInput","justSubmitted","creditAchieved","showCorrectness","numberOfAttemptsLeft"]}}),definition:function({dependencyValues:e}){return{newValues:{answerAncestor:e.answerAncestor}}}},t.includeCheckWork={forRenderer:!0,returnDependencies:()=>({answerAncestor:{dependencyType:"stateVariable",variableName:"answerAncestor"}}),definition:function({dependencyValues:e}){let r=!1;return e.answerAncestor&&(r=e.answerAncestor.stateValues.delegateCheckWorkToInput),{newValues:{includeCheckWork:r}}}},t.creditAchieved={defaultValue:0,public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({answerAncestor:{dependencyType:"stateVariable",variableName:"answerAncestor"}}),definition:function({dependencyValues:e}){let r=0;return e.answerAncestor&&(r=e.answerAncestor.stateValues.creditAchieved),{newValues:{creditAchieved:r}}}},t.valueHasBeenValidated={forRenderer:!0,returnDependencies:()=>({answerAncestor:{dependencyType:"stateVariable",variableName:"answerAncestor"}}),definition:function({dependencyValues:e}){let r=!1;return e.answerAncestor&&e.answerAncestor.stateValues.justSubmitted&&(r=!0),{newValues:{valueHasBeenValidated:r}}}},t.showCorrectness={forRenderer:!0,returnDependencies:()=>({showCorrectnessFlag:{dependencyType:"flag",flagName:"showCorrectness"},answerAncestor:{dependencyType:"stateVariable",variableName:"answerAncestor"}}),definition({dependencyValues:e}){let r;return e.answerAncestor?r=e.answerAncestor.stateValues.showCorrectness:r=e.showCorrectnessFlag!==!1,{newValues:{showCorrectness:r}}}},t.numberOfAttemptsLeft={forRenderer:!0,returnDependencies:()=>({answerAncestor:{dependencyType:"stateVariable",variableName:"answerAncestor"}}),definition({dependencyValues:e}){let r;return e.answerAncestor?r=e.answerAncestor.stateValues.numberOfAttemptsLeft:r=1/0,{newValues:{numberOfAttemptsLeft:r}}}},t}};T(Tn,"componentType","_input");import Nz from"math-expressions";var ls=class extends Tn{constructor(t){super(t);this.actions={updateImmediateValue:this.updateImmediateValue.bind(new Proxy(this,this.readOnlyProxyHandler)),updateRawValue:this.updateRawValue.bind(new Proxy(this,this.readOnlyProxyHandler)),updateValue:this.updateValue.bind(new Proxy(this,this.readOnlyProxyHandler))},this.externalActions={},Object.defineProperty(this.externalActions,"submitAnswer",{enumerable:!0,get:function(){if(this.stateValues.answerAncestor!==null)return{componentName:this.stateValues.answerAncestor.componentName,actionName:"submitAnswer"}}.bind(this)})}static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.prefill={createComponentOfType:"math",createStateVariable:"prefill",defaultValue:Nz.fromAst("\uFF3F"),public:!0,copyComponentAttributesForCreatedComponent:["format","functionSymbols","splitSymbols"]},e.format={createComponentOfType:"text",createStateVariable:"format",defaultValue:"text",public:!0},e.size={createComponentOfType:"number",createStateVariable:"size",defaultValue:10,forRenderer:!0,public:!0},e.functionSymbols={createComponentOfType:"textList",createStateVariable:"functionSymbols",defaultValue:["f","g"],forRenderer:!0,public:!0},e.splitSymbols={createComponentOfType:"boolean",createStateVariable:"splitSymbols",defaultValue:!0,forRenderer:!0,public:!0},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e.bindValueTo={createComponentOfType:"math"},e.unionFromU={createComponentOfType:"boolean",createStateVariable:"unionFromU",defaultValue:!1,public:!0,forRenderer:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={public:!0,componentType:"math",forRenderer:!0,stateVariablesPrescribingAdditionalAttributes:{displayDigits:"displayDigits",displayDecimals:"displayDecimals",displaySmallAsZero:"displaySmallAsZero"},returnDependencies:()=>({bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["value"]},prefill:{dependencyType:"stateVariable",variableName:"prefill"}}),definition:function({dependencyValues:e}){return e.bindValueTo?{newValues:{value:e.bindValueTo.stateValues.value}}:{useEssentialOrDefaultValue:{value:{variablesToCheck:"value",defaultValue:e.prefill}}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r}){return r.bindValueTo?{success:!0,instructions:[{setDependency:"bindValueTo",desiredValue:e.value,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"value",value:e.value}]}}},t.immediateValue={public:!0,componentType:"math",forRenderer:!0,stateVariablesPrescribingAdditionalAttributes:{displayDigits:"displayDigits",displayDecimals:"displayDecimals",displaySmallAsZero:"displaySmallAsZero"},returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e,changes:r}){return r.value?{newValues:{immediateValue:e.value},makeEssential:{immediateValue:!0}}:{useEssentialOrDefaultValue:{immediateValue:{variablesToCheck:"immediateValue",defaultValue:e.value}}}},inverseDefinition:function({desiredStateVariableValues:e,initialChange:r,shadowedVariable:a}){let s=[{setStateVariable:"immediateValue",value:e.immediateValue}];return r||a||s.push({setDependency:"value",desiredValue:e.immediateValue}),{success:!0,instructions:s}}},t.valueForDisplay={forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"}}),definition:function({dependencyValues:e,usedDefault:r}){return{newValues:{valueForDisplay:dr({value:e.value,dependencyValues:e,usedDefault:r})}}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({valueForDisplay:{dependencyType:"stateVariable",variableName:"valueForDisplay"}}),definition:function({dependencyValues:e}){return{newValues:{text:e.valueForDisplay.toString()}}}},t.rawRendererValue={defaultValue:null,forRenderer:!0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{rawRendererValue:{variablesToCheck:["rawRendererValue"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"rawRendererValue",value:e.rawRendererValue}]}}},t.componentType={returnDependencies:()=>({}),definition:()=>({newValues:{componentType:"math"}})},t}updateImmediateValue({mathExpression:t,rawRendererValue:e}){if(!this.stateValues.disabled)return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"immediateValue",value:t},{updateType:"updateValue",componentName:this.componentName,stateVariable:"rawRendererValue",value:e}],transient:!0})}updateRawValue({rawRendererValue:t,transient:e=!1}){if(!this.stateValues.disabled)return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"rawRendererValue",value:t}],transient:e})}updateValue(){if(!this.stateValues.disabled){let t=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"value",value:this.stateValues.immediateValue},{updateType:"updateValue",componentName:this.componentName,stateVariable:"rawRendererValue",value:this.stateValues.rawRendererValue},{updateType:"executeUpdate"},{updateType:"updateValue",componentName:this.componentName,stateVariable:"immediateValue",valueOfStateVariable:"value"}],e={verb:"answered",object:{componentName:this.componentName,componentType:this.componentType},result:{response:this.stateValues.immediateValue,responseText:this.stateValues.immediateValue.toString()}};return this.stateValues.answerAncestor&&(e.context={answerAncestor:this.stateValues.answerAncestor.componentName}),this.coreFunctions.performUpdate({updateInstructions:t,event:e}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}}};T(ls,"componentType","mathInput"),T(ls,"variableForPlainMacro","value");import zr from"math-expressions";var Kp=class extends ls{constructor(t){super(t);delete this.actions.updateRawValue,this.actions.updateRawValues=this.updateRawValues.bind(new Proxy(this,this.readOnlyProxyHandler)),this.actions.updateNumRows=this.updateNumRows.bind(new Proxy(this,this.readOnlyProxyHandler)),this.actions.updateNumColumns=this.updateNumColumns.bind(new Proxy(this,this.readOnlyProxyHandler))}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.numRows={createComponentOfType:"integer",createStateVariable:"numRowsPreliminary",defaultValue:1,transformNonFiniteTo:0},e.numColumns={createComponentOfType:"integer",createStateVariable:"numColumnsPreliminary",defaultValue:1,transformNonFiniteTo:0},e.showSizeControls={createComponentOfType:"boolean",createStateVariable:"showSizeControls",defaultValue:!0,public:!0,forRenderer:!0},e.defaultEntry={createComponentOfType:"math",createStateVariable:"defaultEntry",defaultValue:zr.fromAst("\uFF3F")},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return yr({stateVariableDefinitions:t,oldName:"value",newName:"valueOriginal"}),t.haveBoundValue={returnDependencies:()=>({bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo"}}),definition({dependencyValues:e}){return{newValues:{haveBoundValue:e.bindValueTo!==null}}}},t.numRows={public:!0,componentType:"integer",forRenderer:!0,returnDependencies:()=>({numRowsPreliminary:{dependencyType:"stateVariable",variableName:"numRowsPreliminary"},valueOriginal:{dependencyType:"stateVariable",variableName:"valueOriginal"},haveBoundValue:{dependencyType:"stateVariable",variableName:"haveBoundValue"}}),definition({dependencyValues:e,usedDefault:r}){let a=e.numRowsPreliminary;if(r.numRowsPreliminary||e.haveBoundValue){let s=e.valueOriginal.tree;if(a=1,Array.isArray(s)){let o=s[0];o==="matrix"?a=s[1][1]:(o==="vector"||o=="tuple")&&(a=s.length-1)}}return{newValues:{numRows:a}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r,stateValues:a}){let s=e.numRows;if(!Number.isInteger(s))return{success:!1};s=Math.max(0,s);let o=[{setDependency:"numRowsPreliminary",desiredValue:s}];if(r.haveBoundValue){let l=r.valueOriginal.tree,u=a.defaultEntry.tree;if(a.numColumns===1&&Array.isArray(l)&&(l[0]==="vector"||l[0]==="tuple")){let c=l.length-1;if(s<c){let p=xe(l).slice(0,s+1);o.push({setDependency:"valueOriginal",desiredValue:zr.fromAst(p)})}else if(s>c){let p=xe(l);for(let m=c;m<s;m++){let f=a.accumulatedComponents[m],d;f&&(d=f[0]),p[m+1]=d===void 0?u:d}o.push({setDependency:"valueOriginal",desiredValue:zr.fromAst(p)})}}else{let c=xe(a.value.tree),p=c[1][1];if(c[1][1]=s,s!==p){if(s<p)c[2].length=s+1;else{let m=a.numColumns,f=c[2];for(let d=p;d<s;d++){f[d+1]||(f[d+1]=["tuple"]);let h=a.accumulatedComponents[d];h||(h=[]);for(let y=0;y<m;y++){let b=h[y];f[d+1][y+1]=b===void 0?u:b}}}o.push({setDependency:"valueOriginal",desiredValue:zr.fromAst(c)})}}}return{success:!0,instructions:o}}},t.numColumns={public:!0,componentType:"integer",forRenderer:!0,returnDependencies:()=>({numColumnsPreliminary:{dependencyType:"stateVariable",variableName:"numColumnsPreliminary"},valueOriginal:{dependencyType:"stateVariable",variableName:"valueOriginal"},haveBoundValue:{dependencyType:"stateVariable",variableName:"haveBoundValue"}}),definition({dependencyValues:e,usedDefault:r}){let a=e.numColumnsPreliminary;if(r.numColumnsPreliminary||e.haveBoundValue){let s=e.valueOriginal.tree;if(a=1,Array.isArray(s)){let o=s[0];o==="matrix"?a=s[1][2]:Array.isArray(s[1])&&(s[1][0]==="vector"||s[1][0]==="tuple")&&(o==="^"&&s[2]==="T"||o==="prime")&&(a=s[1].length-1)}}return{newValues:{numColumns:a}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r,stateValues:a}){let s=e.numColumns;if(!Number.isInteger(s))return{success:!1};s=Math.max(0,s);let o=[{setDependency:"numColumnsPreliminary",desiredValue:s}];if(r.haveBoundValue){let l=a.defaultEntry.tree,u=r.valueOriginal.tree,c=u[0];if(Array.isArray(u[1])&&(u[1][0]==="vector"||u[1][0]==="tuple")&&(c==="^"&&u[2]==="T"||c==="prime")){let p=u[1].length-1;if(s<p){let m=xe(u);m[1]=m[1].slice(0,s+1),o.push({setDependency:"valueOriginal",desiredValue:zr.fromAst(m)})}else if(s>p){let m=xe(u),f=a.accumulatedComponents[0];f||(f=[]);for(let d=p;d<s;d++){let h=f[d];m[1][d+1]=h===void 0?l:h}o.push({setDependency:"valueOriginal",desiredValue:zr.fromAst(m)})}}else{let p=xe(a.value.tree),m=p[1][2];if(p[1][2]=s,s!==m){let f=a.numRows,d=p[2];if(s<m)for(let h=0;h<f;h++)d[h+1].length=s+1;else for(let h=0;h<f;h++){let y=a.accumulatedComponents[h];y||(y=[]);for(let b=m;b<s;b++){let g=y[b];d[h+1][b+1]=g===void 0?l:g}}o.push({setDependency:"valueOriginal",desiredValue:zr.fromAst(p)})}}}return{success:!0,instructions:o}}},t.accumulatedComponents={providePreviousValuesInDefinition:!0,returnDependencies:()=>({valueOriginal:{dependencyType:"stateVariable",variableName:"valueOriginal"}}),definition({dependencyValues:e,previousValues:r}){let a=[];r.accumulatedComponents&&(a=xe(r.accumulatedComponents));let s=e.valueOriginal.tree;if(Array.isArray(s)){let l=s[0];if(l==="matrix"){let u=s[2];for(let[c,p]of u.slice(1).entries()){let m=a[c];m||(m=a[c]=[]);for(let[f,d]of p.slice(1).entries())m[f]=d}return{newValues:{accumulatedComponents:a}}}else if(l==="vector"||l==="tuple"){for(let[u,c]of s.slice(1).entries()){let p=a[u];p||(p=a[u]=[]),p[0]=c}return{newValues:{accumulatedComponents:a}}}else if(Array.isArray(s[1])&&(s[1][0]==="vector"||s[1][0]==="tuple")&&(l==="^"&&s[2]==="T"||l==="prime")){let u=a[0];u||(u=a[0]=[]);for(let[c,p]of s[1].slice(1).entries())u[c]=p;return{newValues:{accumulatedComponents:a}}}}let o=a[0];return o||(o=a[0]=[]),o[0]=s,{newValues:{accumulatedComponents:a}}}},t.value={public:!0,componentType:"math",forRenderer:!0,returnDependencies:()=>({valueOriginal:{dependencyType:"stateVariable",variableName:"valueOriginal"},numRows:{dependencyType:"stateVariable",variableName:"numRows"},numColumns:{dependencyType:"stateVariable",variableName:"numColumns"},accumulatedComponents:{dependencyType:"stateVariable",variableName:"accumulatedComponents"},defaultEntry:{dependencyType:"stateVariable",variableName:"defaultEntry"}}),definition({dependencyValues:e}){let r=e.valueOriginal.tree,a=e.accumulatedComponents,s=e.numRows,o=e.numColumns;if(Array.isArray(r)){let c=r[0];if(c==="matrix"){if(r[1][1]===s&&r[1][2]===o)return{newValues:{value:e.valueOriginal}};let p=xe(r),m=r[1][1],f=r[1][2];p[1][1]=s,p[1][2]=o;let d=p[2];if(o<f)for(let h=0;h<m;h++)d[h+1].length=o+1;else for(let h=0;h<m;h++){let y=a[h];for(let b=f;b<o;b++){let g=y[b];d[h+1][b+1]=g===void 0?e.defaultEntry.tree:g}}if(s<m)d.length=s+1;else for(let h=m;h<s;h++){d[h+1]=["tuple"];let y=a[h];y||(y=[]);for(let b=0;b<o;b++){let g=y[b];d[h+1][b+1]=g===void 0?e.defaultEntry.tree:g}}return{newValues:{value:zr.fromAst(p)}}}else if(c==="vector"||c==="tuple"){let p=r.slice(1),m=["matrix",["tuple",s,o]],f=p.length,d=m[2]=["tuple"];for(let h=0;h<s;h++){d[h+1]=["tuple"];let y=0;h<f&&(d[h+1][1]=p[h],y=1);let b=a[h];b||(b=[]);for(let g=y;g<o;g++){let v=b[g];d[h+1][g+1]=v===void 0?e.defaultEntry.tree:v}}return{newValues:{value:zr.fromAst(m)}}}else if(Array.isArray(r[1])&&(r[1][0]==="vector"||r[1][0]==="tuple")&&(c==="^"&&r[2]==="T"||c==="prime")){let p=r[1].slice(1,o+1),m=["matrix",["tuple",s,o]],f=m[2]=["tuple"],d=a[0];d||(d=[]);for(let h=0;h<s;h++){f[h+1]=["tuple"];let y=a[h];y||(y=[]);let b=0;h===0&&(f[h+1].push(...p),b=p.length);for(let g=b;g<o;g++){let v=y[g];f[h+1][g+1]=v===void 0?e.defaultEntry.tree:v}}return{newValues:{value:zr.fromAst(m)}}}}let l=["matrix",["tuple",s,o]],u=l[2]=["tuple"];for(let c=0;c<s;c++){u[c+1]=["tuple"];let p=0;c===0&&(u[c+1][1]=r,p=1);let m=a[c];m||(m=[]);for(let f=p;f<o;f++){let d=m[f];u[c+1][f+1]=d===void 0?e.defaultEntry.tree:d}}return{newValues:{value:zr.fromAst(l)}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){let a=e.value.tree;if(Array.isArray(a)&&a[0]==="matrix"&&a[1][1]===r.numRows&&a[1][2]===r.numColumns){if(r.numColumns===1){let s=r.valueOriginal.tree;if(Array.isArray(s)){let o=s[0];if(o==="vector"||o==="tuple"){let l=zr.fromAst([o,...a[2].slice(1).map(u=>u[1])]);return{success:!0,instructions:[{setDependency:"valueOriginal",desiredValue:l}]}}}}else if(r.numRows===1){let s=r.valueOriginal.tree;if(Array.isArray(s)){let o=s[0];if(Array.isArray(s[1])&&(s[1][0]==="vector"||s[1][0]==="tuple")&&(o==="^"&&s[2]==="T"||o==="prime")){let l=[s[1][0],...a[2][1].slice(1)];return o==="^"?l=zr.fromAst(["^",l,"T"]):l=zr.fromAst(["prime",l]),{success:!0,instructions:[{setDependency:"valueOriginal",desiredValue:l}]}}}}return{success:!0,instructions:[{setDependency:"valueOriginal",desiredValue:e.value}]}}else return{success:!1}}},t.componentDisplayValues={forRenderer:!0,returnDependencies:()=>({valueForDisplay:{dependencyType:"stateVariable",variableName:"valueForDisplay"}}),definition({dependencyValues:e}){return{newValues:{componentDisplayValues:e.valueForDisplay.tree[2].slice(1).map(a=>a.slice(1).map(s=>zr.fromAst(s)))}}}},t.rawRendererValues={defaultValue:[],forRenderer:!0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{rawRendererValues:{variablesToCheck:["rawRendererValues"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"rawRendererValues",value:e.rawRendererValues}]}}},t}updateRawValues({rawRendererValues:t,transient:e=!1}){if(!this.stateValues.disabled)return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"rawRendererValues",value:t}],transient:e})}updateNumRows({numRows:t}){if(!this.stateValues.disabled)return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"numRows",value:t}]})}updateNumColumns({numColumns:t}){if(!this.stateValues.disabled)return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"numColumns",value:t}]})}};T(Kp,"componentType","matrixInput");var au=class extends Tn{constructor(t){super(t);this.actions={updateImmediateValue:this.updateImmediateValue.bind(new Proxy(this,this.readOnlyProxyHandler)),updateValue:this.updateValue.bind(new Proxy(this,this.readOnlyProxyHandler))},this.externalActions={},Object.defineProperty(this.externalActions,"submitAnswer",{enumerable:!0,get:function(){if(this.stateValues.answerAncestor!==null)return{componentName:this.stateValues.answerAncestor.componentName,actionName:"submitAnswer"}}.bind(this)})}static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.prefill={createComponentOfType:"text",createStateVariable:"prefill",defaultValue:"",public:!0},e.size={createComponentOfType:"number",createStateVariable:"size",defaultValue:10,forRenderer:!0,public:!0},e.bindValueTo={createComponentOfType:"text"},e.expanded={createComponentOfType:"boolean",createStateVariable:"expanded",defaultValue:!1,forRenderer:!0,public:!0},e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:600,isAbsolute:!0},forRenderer:!0,public:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:{size:120,isAbsolute:!0},forRenderer:!0,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["value"]},prefill:{dependencyType:"stateVariable",variableName:"prefill"}}),definition:function({dependencyValues:e}){return e.bindValueTo?{newValues:{value:e.bindValueTo.stateValues.value}}:{useEssentialOrDefaultValue:{value:{variablesToCheck:"value",defaultValue:e.prefill}}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r}){return r.bindValueTo?{success:!0,instructions:[{setDependency:"bindValueTo",desiredValue:e.value,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"value",value:e.value}]}}},t.immediateValue={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e,changes:r}){return r.value?{newValues:{immediateValue:e.value},makeEssential:{immediateValue:!0}}:{useEssentialOrDefaultValue:{immediateValue:{variablesToCheck:"immediateValue",defaultValue:e.value}}}},inverseDefinition:function({desiredStateVariableValues:e,initialChange:r,shadowedVariable:a}){let s=[{setStateVariable:"immediateValue",value:e.immediateValue}];return r||a||s.push({setDependency:"value",desiredValue:e.immediateValue}),{success:!0,instructions:s}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){return{newValues:{text:e.value}}}},t.componentType={returnDependencies:()=>({}),definition:()=>({newValues:{componentType:"text"}})},t}updateImmediateValue({text:t}){if(!this.stateValues.disabled)return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"immediateValue",value:t}]})}updateValue(){if(!this.stateValues.disabled){let t=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"value",value:this.stateValues.immediateValue},{updateType:"executeUpdate"},{updateType:"updateValue",componentName:this.componentName,stateVariable:"immediateValue",valueOfStateVariable:"value"}],e={verb:"answered",object:{componentName:this.componentName,componentType:this.componentType},result:{response:this.stateValues.immediateValue,responseText:this.stateValues.immediateValue}};return this.stateValues.answerAncestor&&(e.context={answerAncestor:this.stateValues.answerAncestor.componentName}),this.coreFunctions.performUpdate({updateInstructions:t,event:e}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}}};T(au,"componentType","textInput"),T(au,"variableForPlainMacro","value");var su=class extends Tn{constructor(t){super(t);this.actions={updateBoolean:this.updateBoolean.bind(new Proxy(this,this.readOnlyProxyHandler))},this.externalActions={},Object.defineProperty(this.externalActions,"submitAnswer",{enumerable:!0,get:function(){if(this.stateValues.answerAncestor!==null)return{componentName:this.stateValues.answerAncestor.componentName,actionName:"submitAnswer"}}.bind(this)})}static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.prefill={createComponentOfType:"boolean",createStateVariable:"prefill",defaultValue:!1,public:!0},e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:"",forRenderer:!0,public:!0},e.bindValueTo={createComponentOfType:"boolean"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.value={public:!0,componentType:"boolean",forRenderer:!0,returnDependencies:()=>({bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["value"]},prefill:{dependencyType:"stateVariable",variableName:"prefill"}}),definition:function({dependencyValues:e}){return e.bindValueTo?{newValues:{value:e.bindValueTo.stateValues.value}}:{useEssentialOrDefaultValue:{value:{variablesToCheck:"value",defaultValue:e.prefill}}}},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r}){return r.bindValueTo?{success:!0,instructions:[{setDependency:"bindValueTo",desiredValue:e.value,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"value",value:e.value}]}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){return{newValues:{text:e.value?"true":"false"}}}},t.componentType={returnDependencies:()=>({}),definition:()=>({newValues:{componentType:"boolean"}})},t}updateBoolean({boolean:t}){if(!this.stateValues.disabled){let e=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"value",value:t}],r={verb:"selected",object:{componentName:this.componentName,componentType:this.componentType},result:{response:t,responseText:t.toString()}};return this.stateValues.answerAncestor&&(r.context={answerAncestor:this.stateValues.answerAncestor.componentName}),this.coreFunctions.performUpdate({updateInstructions:e,event:r}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}}};T(su,"componentType","booleanInput"),T(su,"variableForPlainMacro","value");var us=class extends Tn{constructor(t){super(t);this.actions={updateSelectedIndices:this.updateSelectedIndices.bind(new Proxy(this,this.readOnlyProxyHandler))},this.externalActions={},Object.defineProperty(this.externalActions,"submitAnswer",{enumerable:!0,get:function(){if(this.stateValues.answerAncestor!==null)return{componentName:this.stateValues.answerAncestor.componentName,actionName:"submitAnswer"}}.bind(this)})}static get stateVariablesShadowedForReference(){return["choiceOrder","allSelectedIndices","indicesMatchedByBoundValue"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.selectMultiple={createComponentOfType:"boolean",createStateVariable:"selectMultiple",defaultValue:!1,public:!0,forRenderer:!0},e.matchPartial={createComponentOfType:"boolean",createStateVariable:"matchPartial",defaultValue:!1,public:!0},e.inline={createComponentOfType:"boolean",createStateVariable:"inline",defaultValue:!1,public:!0,forRenderer:!0},e.randomizeOrder={createComponentOfType:"boolean",createStateVariable:"randomizeOrder",defaultValue:!1,public:!0},e.feedbackDefinitions={createComponentOfType:"feedbackDefinitions",createStateVariable:"feedbackDefinitions",public:!0,propagateToDescendants:!0,mergeArrays:!0},e.preselectChoice={createComponentOfType:"number",createStateVariable:"preselectChoice",defaultValue:null},e.bindValueTo={createComponentOfType:"text"},e.placeHolder={createComponentOfType:"text",createStateVariable:"placeHolder",defaultValue:"",forRenderer:!0},e}static returnChildGroups(){return[{group:"choices",componentTypes:["choice"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.numberChoices={public:!0,componentType:"number",returnDependencies:()=>({choiceChildren:{dependencyType:"child",childGroups:["choices"]}}),definition({dependencyValues:e}){return{newValues:{numberChoices:e.choiceChildren.length}}}},t.choiceOrder={forRenderer:!0,returnDependencies:({sharedParameters:e})=>({choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["text"]},randomizeOrder:{dependencyType:"stateVariable",variableName:"randomizeOrder"},selectRng:{dependencyType:"value",value:e.selectRng,doNotProxy:!0},variants:{dependencyType:"variants"}}),definition:function({dependencyValues:e}){let r=e.choiceChildren.length,a;if(!e.randomizeOrder)a=[...Array(r).keys()].map(s=>s+1);else{if(e.variants&&e.variants.desiredVariant!==void 0){let s=e.variants.desiredVariant.indices;if(s!==void 0)if(s.length!==r)console.warn("Ignoring indices specified for choiceInput as number of indices doesn't match number of choice children.");else{if(s=s.map(Number),!s.every(Number.isInteger))throw Error("All indices specified for choiceInput must be integers");if(!s.every(o=>o>=1&&o<=r))console.warn("Ignoring indices specified for choiceInput as some indices out of range.");else return{newValues:{choiceOrder:s}}}}a=[...Array(r).keys()].map(s=>s+1);for(let s=r-1;s>0;s--){let o=e.selectRng(),l=Math.floor(o*(s+1));[a[s],a[l]]=[a[l],a[s]]}}return{newValues:{choiceOrder:a}}}},t.generatedVariantInfo={additionalStateVariablesDefined:["isVariantComponent"],returnDependencies:({componentInfoObjects:e})=>({choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},randomizeOrder:{dependencyType:"stateVariable",variableName:"randomizeOrder"},variantDescendants:{dependencyType:"descendant",componentTypes:Object.keys(e.componentTypeWithPotentialVariants),variableNames:["isVariantComponent","generatedVariantInfo"],useReplacementsForComposites:!0,recurseToMatchedChildren:!1,variablesOptional:!0,includeNonActiveChildren:!0,ignoreReplacementsOfMatchedComposites:!0}}),definition({dependencyValues:e,componentName:r}){if(!e.randomizeOrder)return{newValues:{isVariantComponent:!1,generatedVariantInfo:null}};let a={indices:e.choiceOrder,meta:{createdBy:r}},s=a.subvariants=[];for(let o of e.variantDescendants)o.stateValues.isVariantComponent?s.push(o.stateValues.generatedVariantInfo):o.stateValues.generatedVariantInfo&&s.push(...o.stateValues.generatedVariantInfo.subvariants);return{newValues:{generatedVariantInfo:a,isVariantComponent:!0}}}},t.choiceChildrenOrdered={additionalStateVariablesDefined:[{variableName:"numberChoices",public:!0,componentType:"number"}],returnDependencies:()=>({choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"]}}),definition:function({dependencyValues:e}){let r=e.choiceChildren.length;return{newValues:{choiceChildrenOrdered:e.choiceOrder.map(s=>e.choiceChildren[s-1]),numberChoices:r}}}},t.choiceTexts={public:!0,componentType:"text",isArray:!0,entryPrefixes:["choiceText"],forRenderer:!0,returnArraySizeDependencies:()=>({numberChoices:{dependencyType:"stateVariable",variableName:"numberChoices"}}),returnArraySize({dependencyValues:e}){return[e.numberChoices]},returnArrayDependenciesByKey(){return{globalDependencies:{choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["text"]}}}},arrayDefinitionByKey({globalDependencyValues:e}){return{newValues:{choiceTexts:e.choiceOrder.map(a=>e.choiceChildren[a-1]).map(a=>a.stateValues.text)}}}},t.choicePreselects={isArray:!0,returnArraySizeDependencies:()=>({numberChoices:{dependencyType:"stateVariable",variableName:"numberChoices"}}),returnArraySize({dependencyValues:e}){return[e.numberChoices]},returnArrayDependenciesByKey(){return{globalDependencies:{choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["preSelect"]}}}},arrayDefinitionByKey({globalDependencyValues:e}){return{newValues:{choicePreselects:e.choiceOrder.map(a=>e.choiceChildren[a-1]).map(a=>a.stateValues.preSelect)}}}},t.choicesDisabled={isArray:!0,forRenderer:!0,returnArraySizeDependencies:()=>({numberChoices:{dependencyType:"stateVariable",variableName:"numberChoices"}}),returnArraySize({dependencyValues:e}){return[e.numberChoices]},returnArrayDependenciesByKey(){return{globalDependencies:{choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["disabled"]}}}},arrayDefinitionByKey({globalDependencyValues:e}){return{newValues:{choicesDisabled:e.choiceOrder.map(a=>e.choiceChildren[a-1]).map(a=>a.stateValues.disabled)}}}},t.choicesHidden={isArray:!0,forRenderer:!0,returnArraySizeDependencies:()=>({numberChoices:{dependencyType:"stateVariable",variableName:"numberChoices"}}),returnArraySize({dependencyValues:e}){return[e.numberChoices]},returnArrayDependenciesByKey(){return{globalDependencies:{choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["hidden"]}}}},arrayDefinitionByKey({globalDependencyValues:e}){return{newValues:{choicesHidden:e.choiceOrder.map(a=>e.choiceChildren[a-1]).map(a=>a.stateValues.hidden)}}}},t.componentType={returnDependencies:()=>({}),definition:()=>({newValues:{componentType:"text"}})},t.indicesMatchedByBoundValue={returnDependencies:()=>({choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["text"]},bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["value"]},selectMultiple:{dependencyType:"stateVariable",variableName:"selectMultiple"}}),definition({dependencyValues:e}){let r=e.choiceOrder.map(a=>e.choiceChildren[a-1]);if(e.bindValueTo!==null){let a=r.map(s=>s.stateValues.text.toLowerCase().trim());if(e.bindValueTo.stateValues.value)if(e.selectMultiple){let s=e.bindValueTo.stateValues.value.toLowerCase().split(",").map(l=>l.trim()),o=[];for(let l of s){let u=a.indexOf(l);u!==-1&&!o.includes(u+1)&&o.push(u+1)}return o.sort((l,u)=>l-u),{newValues:{indicesMatchedByBoundValue:o}}}else{let s=a.indexOf(e.bindValueTo.stateValues.value.toLowerCase().trim());if(s!==-1)return{newValues:{indicesMatchedByBoundValue:[s+1]}}}}return{newValues:{indicesMatchedByBoundValue:[]}}}},t.allSelectedIndices={returnDependencies(){return{choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["text"]},indicesMatchedByBoundValue:{dependencyType:"stateVariable",variableName:"indicesMatchedByBoundValue"},preselectChoice:{dependencyType:"stateVariable",variableName:"preselectChoice"},choicePreselects:{dependencyType:"stateVariable",variableName:"choicePreselects"},bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["value"]}}},definition({dependencyValues:e}){return e.bindValueTo!==null?{newValues:{allSelectedIndices:e.indicesMatchedByBoundValue}}:{useEssentialOrDefaultValue:{allSelectedIndices:{variablesToCheck:["allSelectedIndices"],get defaultValue(){let r=e.choicePreselects.indexOf(!0);return r!==-1?[r+1]:e.preselectChoice!==null?[e.preselectChoice]:[]}}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){if(r.bindValueTo===null)return{success:!0,instructions:[{setStateVariable:"allSelectedIndices",value:e.allSelectedIndices}]};{let a="";if(e.allSelectedIndices.length>0){let s=r.choiceOrder.map(l=>r.choiceChildren[l-1]),o=[];for(let l of e.allSelectedIndices){let u=s[l-1];u&&o.push(u.stateValues.text)}a=o.join(", ")}return{success:!0,instructions:[{setDependency:"bindValueTo",desiredValue:a,variableIndex:0}]}}}},t.nSelectedIndices={returnDependencies:()=>({allSelectedIndices:{dependencyType:"stateVariable",variableName:"allSelectedIndices"}}),definition({dependencyValues:e}){return{newValues:{nSelectedIndices:e.allSelectedIndices.length}}}},t.selectedIndices={public:!0,componentType:"number",isArray:!0,entryPrefixes:["selectedIndex"],forRenderer:!0,defaultEntryValue:0,returnArraySizeDependencies:()=>({nSelectedIndices:{dependencyType:"stateVariable",variableName:"nSelectedIndices"}}),returnArraySize({dependencyValues:e}){return[e.nSelectedIndices]},returnArrayDependenciesByKey(){return{globalDependencies:{allSelectedIndices:{dependencyType:"stateVariable",variableName:"allSelectedIndices"}}}},arrayDefinitionByKey({globalDependencyValues:e}){let r={};for(let a in e.allSelectedIndices)r[a]=e.allSelectedIndices[a];return{newValues:{selectedIndices:r}}}},t.selectedIndex={isAlias:!0,targetVariableName:"selectedIndex1"},t.selectedValues={public:!0,componentType:"text",isArray:!0,entryPrefixes:["selectedValue"],returnArraySizeDependencies:()=>({nSelectedIndices:{dependencyType:"stateVariable",variableName:"nSelectedIndices"}}),returnArraySize({dependencyValues:e}){return[e.nSelectedIndices]},returnArrayDependenciesByKey(){return{globalDependencies:{selectedIndices:{dependencyType:"stateVariable",variableName:"selectedIndices"},choiceTexts:{dependencyType:"stateVariable",variableName:"choiceTexts"}}}},arrayDefinitionByKey({globalDependencyValues:e,arrayKeys:r}){let a={};for(let s of r)a[s]=e.choiceTexts[e.selectedIndices[s]-1];return{newValues:{selectedValues:a}}}},t.selectedValue={isAlias:!0,targetVariableName:"selectedValue1"},t.values={isAlias:!0,targetVariableName:"selectedValues"},t.nValues={isAlias:!0,targetVariableName:"nSelectedIndices"},t.childIndicesSelected={returnDependencies:()=>({selectedIndices:{dependencyType:"stateVariable",variableName:"selectedIndices"},choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"}}),definition({dependencyValues:e}){return{newValues:{childIndicesSelected:e.selectedIndices.map(a=>e.choiceOrder[a-1])}}}},t.creditAchievedIfSubmit={returnDependencies:()=>({choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["selected","credit"]},selectMultiple:{dependencyType:"stateVariable",variableName:"selectMultiple"},matchPartial:{dependencyType:"stateVariable",variableName:"matchPartial"}}),definition:function({dependencyValues:e}){let r=0;if(e.selectMultiple){let a=0,s=0,o=0;for(let l of e.choiceChildren)l.stateValues.selected?l.stateValues.credit===1?a++:s++:l.stateValues.credit===1&&o++;if(e.matchPartial){let l=a+s+o;l===0?r=1:r=a/l}else s+o===0&&(r=1)}else for(let a of e.choiceChildren)if(a.stateValues.selected){r=a.stateValues.credit;break}return{newValues:{creditAchievedIfSubmit:r}}}},t.valueToRecordOnSubmit={isAlias:!0,targetVariableName:"selectedIndices"},t.submittedIndices={returnDependencies:()=>({choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["submitted"]}}),definition({dependencyValues:e}){let r=[],a=e.choiceOrder.map(s=>e.choiceChildren[s-1]);for(let[s,o]of a.entries())o.stateValues.submitted&&r.push(s+1);return{newValues:{submittedIndices:r}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){let a=[];for(let[s,o]of r.choiceOrder.entries())a.push({setDependency:"choiceChildren",desiredValue:e.submittedIndices.includes(s+1),variableIndex:0,childIndex:o-1});return{success:!0,instructions:a}}},t.valueRecordedAtSubmit={isAlias:!0,targetVariableName:"submittedIndices"},t.allFeedbacks={returnDependencies:()=>({choiceOrder:{dependencyType:"stateVariable",variableName:"choiceOrder"},choiceChildren:{dependencyType:"child",childGroups:["choices"],variableNames:["feedbacks"]}}),definition({dependencyValues:e}){let r=e.choiceOrder.map(s=>e.choiceChildren[s-1]),a=[];for(let s of r)a.push(...s.stateValues.feedbacks);return{newValues:{allFeedbacks:a}}}},t.numberFeedbacks={public:!0,componentType:"number",returnDependencies:()=>({allFeedbacks:{dependencyType:"stateVariable",variableName:"allFeedbacks"}}),definition({dependencyValues:e}){return{newValues:{numberFeedbacks:e.allFeedbacks.length},checkForActualChange:{numberFeedbacks:!0}}}},t.feedbacks={public:!0,componentType:"feedback",isArray:!0,entryPrefixes:["feedback"],returnArraySizeDependencies:()=>({numberFeedbacks:{dependencyType:"stateVariable",variableName:"numberFeedbacks"}}),returnArraySize({dependencyValues:e}){return[e.numberFeedbacks]},returnArrayDependenciesByKey(){return{globalDependencies:{allFeedbacks:{dependencyType:"stateVariable",variableName:"allFeedbacks"}}}},arrayDefinitionByKey({globalDependencyValues:e}){let r={};for(let a=0;a<e.__array_size;a++)r[a]=e.allFeedbacks[a];return{newValues:{feedbacks:r}}}},t}updateSelectedIndices({selectedIndices:t}){if(!this.stateValues.disabled){let e=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"allSelectedIndices",value:t}],r={verb:"selected",object:{componentName:this.componentName,componentType:this.componentType},result:{response:t,responseText:t.map(a=>this.stateValues.choiceTexts[a-1])}};return this.stateValues.answerAncestor&&(r.context={answerAncestor:this.stateValues.answerAncestor.componentName}),this.coreFunctions.performUpdate({updateInstructions:e,event:r}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}}};T(us,"componentType","choiceInput"),T(us,"renderChildren",!0),T(us,"variableForPlainMacro","values"),T(us,"createsVariants",!0);var la=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.credit={createComponentOfType:"number",createStateVariable:"credit",defaultValue:0,public:!0,attributesForCreatedComponent:{convertBoolean:!0}},e.feedbackCodes={createComponentOfType:"textList",createStateVariable:"feedbackCodes",defaultValue:[],public:!0},e.feedbackText={createComponentOfType:"text",createStateVariable:"feedbackText",defaultValue:null,public:!0},e.preSelect={createComponentOfType:"boolean",createStateVariable:"preSelect",defaultValue:!1},e}static returnChildGroups(){return[{group:"children",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.text={public:!0,componentType:"text",returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["children"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r="";for(let a of e.inlineChildren)typeof a.stateValues.text=="string"&&(r+=a.stateValues.text);return{newValues:{text:r}}}},t.selected={defaultValue:!1,public:!0,componentType:"boolean",returnDependencies:()=>({countAmongSiblings:{dependencyType:"countAmongSiblingsOfSameType"},childIndicesSelected:{dependencyType:"parentStateVariable",variableName:"childIndicesSelected"}}),definition({dependencyValues:e}){return{newValues:{selected:e.childIndicesSelected.includes(e.countAmongSiblings)}}},inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"selected",value:e.selected}]}}},t.submitted={defaultValue:!1,public:!0,componentType:"boolean",returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{submitted:{variablesToCheck:["submitted"]}}}),inverseDefinition:function({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"submitted",value:e.submitted}]}}},t.feedbacks={public:!0,componentType:"feedbacktext",returnDependencies:()=>({feedbackText:{dependencyType:"stateVariable",variableName:"feedbackText"},feedbackCodes:{dependencyType:"stateVariable",variableName:"feedbackCodes"},feedbackDefinitions:{dependencyType:"parentStateVariable",variableName:"feedbackDefinitions"},submitted:{dependencyType:"stateVariable",variableName:"submitted"}}),definition({dependencyValues:e}){if(!e.submitted)return{newValues:{feedbacks:[]}};let r=[];for(let a of e.feedbackCodes){let s=a.toLowerCase();for(let o of e.feedbackDefinitions)if(s===o.feedbackCode){r.push(o.feedbackText);break}}return e.feedbackText!==null&&r.push(e.feedbackText),{newValues:{feedbacks:r}}}},t}};T(la,"componentType","choice"),T(la,"rendererType","container"),T(la,"renderChildren",!0),T(la,"includeBlankStringChildren",!0),T(la,"adapters",["submitted"]);import ou from"math-expressions";var ua=class extends re{static get stateVariablesShadowedForReference(){return["value","convertBoolean"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.renderAsMath={createComponentOfType:"boolean",createStateVariable:"renderAsMath",defaultValue:!1,public:!0,forRenderer:!0},e.convertBoolean={createPrimitiveOfType:"boolean",createStateVariable:"convertBoolean",defaultValue:!1},e}static returnSugarInstructions(){let t=super.returnSugarInstructions();return t.push({childrenRegex:/..+/,replacementFunction:({matchedChildren:e,componentAttributes:r})=>({success:!r.convertBoolean,newChildren:[{componentType:"math",children:e}]})}),t}static returnChildGroups(){return[{group:"strings",componentTypes:["string"]},{group:"numbers",componentTypes:["number"]},{group:"maths",componentTypes:["math"]},{group:"texts",componentTypes:["text"]},{group:"booleans",componentTypes:["boolean"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.singleNumberOrStringChild={additionalStateVariablesDefined:["singleMathChild"],returnDependencies:()=>({numberChildren:{dependencyType:"child",childGroups:["numbers"]},stringChildren:{dependencyType:"child",childGroups:["strings"]},mathChildren:{dependencyType:"child",childGroups:["maths"]},booleanChildren:{dependencyType:"child",childGroups:["booleans"]},textChildren:{dependencyType:"child",childGroups:["texts"]}}),definition({dependencyValues:e}){let r=e.numberChildren.length+e.stringChildren.length,a=e.mathChildren.length,s=e.booleanChildren.length+e.textChildren.length,o=r<=1&&a+s===0,l=a===1&&r+s===0;return{newValues:{singleNumberOrStringChild:o,singleMathChild:l}}}},t.parsedExpression={additionalStateVariablesDefined:["codePre"],returnDependencies:()=>({allChildren:{dependencyType:"child",childGroups:["strings","numbers","maths","texts","booleans"]},stringChildren:{dependencyType:"child",childGroups:["strings"],variableNames:["value"]}}),definition:Ap},t.mathChildrenByCode={additionalStateVariablesDefined:["textChildrenByCode","numberChildrenByCode","booleanChildrenByCode"],returnDependencies:()=>({allChildren:{dependencyType:"child",childGroups:["strings","numbers","maths","texts","booleans"],variableNames:["value","texts","maths","booleans"],variablesOptional:!0},codePre:{dependencyType:"stateVariable",variableName:"codePre"}}),definition({dependencyValues:e,componentInfoObjects:r}){let a={},s={},o={},l={},u=0,c=e.codePre;for(let p of e.allChildren)if(p.componentType!=="string"){let m=c+u;r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"math"})?a[m]=p:r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"number"})?s[m]=p:r.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"text"})?o[m]=p:l[m]=p,u+=1}return{newValues:{mathChildrenByCode:a,numberChildrenByCode:s,textChildrenByCode:o,booleanChildrenByCode:l}}}},t.value={public:!0,componentType:"number",stateVariablesDeterminingDependencies:["singleNumberOrStringChild"],returnDependencies({stateValues:e}){return e.singleNumberOrStringChild?{singleNumberOrStringChild:{dependencyType:"stateVariable",variableName:"singleNumberOrStringChild"},convertBoolean:{dependencyType:"stateVariable",variableName:"convertBoolean"},numberChild:{dependencyType:"child",childGroups:["numbers"],variableNames:["value","canBeModified"]},stringChild:{dependencyType:"child",childGroups:["strings"],variableNames:["value"]}}:{singleNumberOrStringChild:{dependencyType:"stateVariable",variableName:"singleNumberOrStringChild"},singleMathChild:{dependencyType:"stateVariable",variableName:"singleMathChild"},convertBoolean:{dependencyType:"stateVariable",variableName:"convertBoolean"},parsedExpression:{dependencyType:"stateVariable",variableName:"parsedExpression"},allChildren:{dependencyType:"child",childGroups:["strings","numbers","maths","texts","booleans"],variableNames:["value","texts","maths","unordered"],variablesOptional:!0},booleanChildrenByCode:{dependencyType:"stateVariable",variableName:"booleanChildrenByCode"},textChildrenByCode:{dependencyType:"stateVariable",variableName:"textChildrenByCode"},mathChildrenByCode:{dependencyType:"stateVariable",variableName:"mathChildrenByCode"},numberChildrenByCode:{dependencyType:"stateVariable",variableName:"numberChildrenByCode"}}},defaultValue:NaN,definition({dependencyValues:e,componentInfoObjects:r}){if(e.singleNumberOrStringChild)if(e.numberChild.length===0){if(e.stringChild.length===0)return{useEssentialOrDefaultValue:{value:{variablesToCheck:["value"]}}};let a=Number(e.stringChild[0].stateValues.value);if(Number.isNaN(a))try{if(a=ou.fromAst(fr.convert(e.stringChild[0].stateValues.value)).evaluate_to_constant(),typeof a=="boolean")e.convertBoolean?a=a?1:0:a=NaN;else if(a===null||Number.isNaN(a))if(e.convertBoolean){let s=Ap({dependencyValues:{stringChildren:e.stringChild,allChildren:e.stringChild},componentInfoObjects:r}).newValues.parsedExpression;a=xi({logicTree:s.tree,dependencyValues:{booleanChildrenByCode:{},booleanListChildrenByCode:{},textChildrenByCode:{},textListChildrenByCode:{},mathChildrenByCode:{},mathListChildrenByCode:{},numberChildrenByCode:{},numberListChildrenByCode:{}},valueOnInvalid:NaN})}else a=NaN}catch(s){a=NaN}return{newValues:{value:a}}}else return{newValues:{value:e.numberChild[0].stateValues.value}};else{if(e.parsedExpression===null)return{newValues:{value:NaN}};if(Object.keys(e.textChildrenByCode).length===0&&Object.keys(e.booleanChildrenByCode).length===0){let s=function(l){if(typeof l=="string"){let u=e.mathChildrenByCode[l];return u!==void 0?u.stateValues.value.tree:(u=e.numberChildrenByCode[l],u!==void 0?u.stateValues.value:l)}return Array.isArray(l)?[l[0],...l.slice(1).map(s)]:l},o;try{o=ou.fromAst(s(e.parsedExpression.tree)).evaluate_to_constant()}catch(l){o=NaN}if(Number.isFinite(o)||o===1/0||o===-1/0)return{newValues:{value:o}}}return e.convertBoolean?(e=Object.assign({},e),e.mathListChildrenByCode={},e.numberListChildrenByCode={},e.textListChildrenByCode={},e.booleanListChildrenByCode={},{newValues:{value:xi({logicTree:e.parsedExpression.tree,dependencyValues:e,valueOnInvalid:NaN})}}):{newValues:{value:NaN}}}},set:function(e){let r=Number(e);if(Number.isNaN(r))try{r=ou.fromAst(fr.convert(e)).evaluate_to_constant(),r===null&&(r=NaN)}catch(a){r=NaN}return r},inverseDefinition:function({desiredStateVariableValues:e,dependencyValues:r,stateValues:a,overrideFixed:s}){if(!a.canBeModified&&!s)return{success:!1};let o=e.value;if(o instanceof ou.class?(o=o.evaluate_to_constant(),Number.isFinite(o)||(o=NaN)):o=Number(o),!r.singleNumberOrStringChild)return r.singleMathChild?{success:!0,instructions:[{setDependency:"allChildren",desiredValue:ou.fromAst(o),childIndex:0,variableIndex:0}]}:{success:!1};let l;return r.numberChild.length===0?r.stringChild.length===0?l=[{setStateVariable:"value",value:o}]:l=[{setDependency:"stringChild",desiredValue:o.toString(),childIndex:0,variableIndex:0}]:l=[{setDependency:"numberChild",desiredValue:o,childIndex:0,variableIndex:0}],{success:!0,instructions:l}}},t.valueForDisplay={forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"}}),definition:function({dependencyValues:e,usedDefault:r}){let a=dr({value:e.value,dependencyValues:e,usedDefault:r});return a instanceof ou.class&&(a=a.tree),{newValues:{valueForDisplay:a}}}},t.text={public:!0,componentType:"text",returnDependencies:()=>({valueForDisplay:{dependencyType:"stateVariable",variableName:"valueForDisplay"},value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){return{newValues:{text:e.valueForDisplay.toString()}}},inverseDefinition({desiredStateVariableValues:e,stateValues:r}){let a=Number(e.text);if(Number.isFinite(a))return{success:!0,instructions:[{setDependency:"value",desiredValue:a}]};{let s=io({functionSymbols:r.functionSymbols,splitSymbols:r.splitSymbols}),o;try{o=s(e.text)}catch(l){return{success:!1}}return a=o.evaluate_to_constant(),Number.isFinite(a)?{success:!0,instructions:[{setDependency:"value",desiredValue:a}]}:{success:!1}}}},t.math=_d({numberVariableName:"value",mathVariableName:"math",isPublic:!0}),t.canBeModified={returnDependencies:()=>({numberChildModifiable:{dependencyType:"child",childGroups:["numbers"],variableNames:["canBeModified"]},modifyIndirectly:{dependencyType:"stateVariable",variableName:"modifyIndirectly"},fixed:{dependencyType:"stateVariable",variableName:"fixed"},singleNumberOrStringChild:{dependencyType:"stateVariable",variableName:"singleNumberOrStringChild"},singleMathChild:{dependencyType:"stateVariable",variableName:"singleMathChild"}}),definition:function({dependencyValues:e}){return!e.modifyIndirectly||e.fixed||!(e.singleNumberOrStringChild||e.singleMathChild)?{newValues:{canBeModified:!1}}:e.numberChildModifiable.length===1&&!e.numberChildModifiable[0].stateValues.canBeModified?{newValues:{canBeModified:!1}}:{newValues:{canBeModified:!0}}}},t}};T(ua,"componentType","number"),T(ua,"useChildrenForReference",!1),T(ua,"adapters",["math","text"]);import Cz from"math-expressions";var lu=class extends ua{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return yr({stateVariableDefinitions:t,oldName:"value",newName:"valuePreRound"}),t.value={public:!0,componentType:"number",returnDependencies:()=>({valuePreRound:{dependencyType:"stateVariable",variableName:"valuePreRound"}}),definition({dependencyValues:e}){return{newValues:{value:Math.round(e.valuePreRound)}}},inverseDefinition({desiredStateVariableValues:e}){let r=e.value;return r instanceof Cz.class?(r=r.evaluate_to_constant(),Number.isFinite(r)||(r=NaN)):r=Number(r),r=Math.round(r),{success:!0,instructions:[{setDependency:"valuePreRound",desiredValue:r}]}}},t}};T(lu,"componentType","integer"),T(lu,"rendererType","number");var uu=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.xmin={createComponentOfType:"number",createStateVariable:"xminPrelim",defaultValue:-10},e.xmax={createComponentOfType:"number",createStateVariable:"xmaxPrelim",defaultValue:10},e.ymin={createComponentOfType:"number",createStateVariable:"yminPrelim",defaultValue:-10},e.ymax={createComponentOfType:"number",createStateVariable:"ymaxPrelim",defaultValue:10},e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:300,isAbsolute:!0},public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:{size:300,isAbsolute:!0},public:!0,forRenderer:!0},e.identicalAxisScales={createComponentOfType:"boolean",createStateVariable:"identicalAxisScales",defaultValue:!1,public:!0,forRenderer:!0},e.displayXAxis={createComponentOfType:"boolean",createStateVariable:"displayXAxis",defaultValue:!0,public:!0,forRenderer:!0},e.displayYAxis={createComponentOfType:"boolean",createStateVariable:"displayYAxis",defaultValue:!0,public:!0,forRenderer:!0},e.xlabel={createComponentOfType:"text",createStateVariable:"xlabel",defaultValue:"",public:!0,forRenderer:!0},e.xlabelPosition={createComponentOfType:"text",createStateVariable:"xlabelPosition",defaultValue:"right",public:!0,forRenderer:!0,toLowerCase:!0,validValues:["right","left"]},e.ylabel={createComponentOfType:"text",createStateVariable:"ylabel",defaultValue:"",public:!0,forRenderer:!0},e.ylabelPosition={createComponentOfType:"text",createStateVariable:"ylabelPosition",defaultValue:"top",public:!0,forRenderer:!0,toLowerCase:!0,validValues:["top","bottom"]},e.ylabelAlignment={createComponentOfType:"text",createStateVariable:"ylabelAlignment",defaultValue:"left",public:!0,forRenderer:!0,toLowerCase:!0,validValues:["left","right"]},e.showNavigation={createComponentOfType:"boolean",createStateVariable:"showNavigation",defaultValue:!0,public:!0,forRenderer:!0},e.fixAxes={createComponentOfType:"boolean",createStateVariable:"fixAxes",defaultValue:!1,public:!0,forRenderer:!0},e.grid={createComponentOfType:"text",createStateVariable:"grid",defaultValue:"none",public:!0,forRenderer:!0,toLowerCase:!0,valueTransformations:{true:"medium",false:"none"},validValues:["none","medium","dense"]},e}static returnChildGroups(){return[{group:"graphical",componentTypes:["_graphical"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.graphicalDescendants={forRenderer:!0,returnDependencies:()=>({graphicalDescendants:{dependencyType:"descendant",componentTypes:["_graphical"]}}),definition:function({dependencyValues:e}){return{newValues:{graphicalDescendants:e.graphicalDescendants}}}},t.nChildrenAdded={defaultValue:0,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{nChildrenAdded:{}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"nChildrenAdded",value:e.nChildrenAdded}]}}},t.xmin={stateVariablesDeterminingDependencies:["identicalAxisScales"],defaultValue:-10,public:!0,componentType:"number",forRenderer:!0,returnDependencies({stateValues:e}){let r={identicalAxisScales:{dependencyType:"stateVariable",variableName:"identicalAxisScales"},xminPrelim:{dependencyType:"stateVariable",variableName:"xminPrelim"}};return e.identicalAxisScales&&(r.xmaxPrelim={dependencyType:"stateVariable",variableName:"xmaxPrelim"},r.yminPrelim={dependencyType:"stateVariable",variableName:"yminPrelim"},r.ymaxPrelim={dependencyType:"stateVariable",variableName:"ymaxPrelim"},r.width={dependencyType:"stateVariable",variableName:"width"},r.height={dependencyType:"stateVariable",variableName:"height"}),r},definition({dependencyValues:e,usedDefault:r}){if(!e.identicalAxisScales)return{newValues:{xmin:e.xminPrelim}};if(!r.xminPrelim)return{newValues:{xmin:e.xminPrelim}};let s=!r.xmaxPrelim,o=!r.yminPrelim,l=!r.ymaxPrelim;if(o&&l){let c=e.width.size/e.height.size,p=(e.ymaxPrelim-e.yminPrelim)*c;return s?{newValues:{xmin:e.xmaxPrelim-p}}:{newValues:{xmin:-p/2}}}else return s?{newValues:{xmin:e.xmaxPrelim-20}}:{newValues:{xmin:-10}}},inverseDefinition({desiredStateVariableValues:e,stateValues:r}){return r.fixAxes?{success:!1}:{success:!0,instructions:[{setDependency:"xminPrelim",desiredValue:e.xmin}]}}},t.xmax={stateVariablesDeterminingDependencies:["identicalAxisScales"],defaultValue:-10,public:!0,componentType:"number",forRenderer:!0,returnDependencies({stateValues:e}){let r={identicalAxisScales:{dependencyType:"stateVariable",variableName:"identicalAxisScales"},xmaxPrelim:{dependencyType:"stateVariable",variableName:"xmaxPrelim"}};return e.identicalAxisScales&&(r.xminPrelim={dependencyType:"stateVariable",variableName:"xminPrelim"},r.yminPrelim={dependencyType:"stateVariable",variableName:"yminPrelim"},r.ymaxPrelim={dependencyType:"stateVariable",variableName:"ymaxPrelim"},r.width={dependencyType:"stateVariable",variableName:"width"},r.height={dependencyType:"stateVariable",variableName:"height"}),r},definition({dependencyValues:e,usedDefault:r}){if(!e.identicalAxisScales)return{newValues:{xmax:e.xmaxPrelim}};let a=!r.xminPrelim,s=!r.xmaxPrelim,o=!r.yminPrelim,l=!r.ymaxPrelim,u=o&&l,c=a&&s,p=e.xminPrelim;if(u){let m=e.width.size/e.height.size,f=(e.ymaxPrelim-e.yminPrelim)*m;if(c){let d=e.xmaxPrelim-p,h=Math.max(d,f);return{newValues:{xmax:p+h}}}else return a?{newValues:{xmax:p+f}}:s?{newValues:{xmax:e.xmaxPrelim}}:{newValues:{xmax:f/2}}}else return s?{newValues:{xmax:e.xmaxPrelim}}:a?{newValues:{xmax:p+20}}:{newValues:{xmax:10}}},inverseDefinition({desiredStateVariableValues:e,stateValues:r}){return r.fixAxes?{success:!1}:{success:!0,instructions:[{setDependency:"xmaxPrelim",desiredValue:e.xmax}]}}},t.ymin={stateVariablesDeterminingDependencies:["identicalAxisScales"],defaultValue:-10,public:!0,componentType:"number",forRenderer:!0,returnDependencies({stateValues:e}){let r={identicalAxisScales:{dependencyType:"stateVariable",variableName:"identicalAxisScales"},yminPrelim:{dependencyType:"stateVariable",variableName:"yminPrelim"}};return e.identicalAxisScales&&(r.xmaxPrelim={dependencyType:"stateVariable",variableName:"xmaxPrelim"},r.xminPrelim={dependencyType:"stateVariable",variableName:"xminPrelim"},r.ymaxPrelim={dependencyType:"stateVariable",variableName:"ymaxPrelim"},r.width={dependencyType:"stateVariable",variableName:"width"},r.height={dependencyType:"stateVariable",variableName:"height"}),r},definition({dependencyValues:e,usedDefault:r}){if(!e.identicalAxisScales)return{newValues:{ymin:e.yminPrelim}};if(!r.yminPrelim)return{newValues:{ymin:e.yminPrelim}};let s=!r.ymaxPrelim,o=!r.xminPrelim,l=!r.xmaxPrelim,u=o&&l,c=e.width.size/e.height.size;if(u){let p=(e.xmaxPrelim-e.xminPrelim)/c;return s?{newValues:{ymin:e.ymaxPrelim-p}}:{newValues:{ymin:-p/2}}}else return s?{newValues:{ymin:e.ymaxPrelim-20/c}}:{newValues:{ymin:-10/c}}},inverseDefinition({desiredStateVariableValues:e,stateValues:r}){return r.fixAxes?{success:!1}:{success:!0,instructions:[{setDependency:"yminPrelim",desiredValue:e.ymin}]}}},t.ymax={stateVariablesDeterminingDependencies:["identicalAxisScales"],defaultValue:-10,public:!0,componentType:"number",forRenderer:!0,returnDependencies({stateValues:e}){let r={identicalAxisScales:{dependencyType:"stateVariable",variableName:"identicalAxisScales"},ymaxPrelim:{dependencyType:"stateVariable",variableName:"ymaxPrelim"}};return e.identicalAxisScales&&(r.xminPrelim={dependencyType:"stateVariable",variableName:"xminPrelim"},r.yminPrelim={dependencyType:"stateVariable",variableName:"yminPrelim"},r.xmaxPrelim={dependencyType:"stateVariable",variableName:"xmaxPrelim"},r.width={dependencyType:"stateVariable",variableName:"width"},r.height={dependencyType:"stateVariable",variableName:"height"}),r},definition({dependencyValues:e,usedDefault:r}){if(!e.identicalAxisScales)return{newValues:{ymax:e.ymaxPrelim}};let a=!r.xminPrelim,s=!r.xmaxPrelim,o=!r.yminPrelim,l=!r.ymaxPrelim,u=o&&l,c=a&&s,p=e.yminPrelim,m=e.width.size/e.height.size;if(c){let f=(e.xmaxPrelim-e.xminPrelim)/m;if(u){let d=e.ymaxPrelim-p,h=Math.max(d,f);return{newValues:{ymax:p+h}}}else return o?{newValues:{ymax:p+f}}:l?{newValues:{ymax:e.ymaxPrelim}}:{newValues:{ymax:f/2}}}else return l?{newValues:{ymax:e.ymaxPrelim}}:o?{newValues:{ymax:p+20/m}}:{newValues:{ymax:10/m}}},inverseDefinition({desiredStateVariableValues:e,stateValues:r}){return r.fixAxes?{success:!1}:{success:!0,instructions:[{setDependency:"ymaxPrelim",desiredValue:e.ymax}]}}},t.xscale={public:!0,componentType:"number",returnDependencies:()=>({xmin:{dependencyType:"stateVariable",variableName:"xmin"},xmax:{dependencyType:"stateVariable",variableName:"xmax"}}),definition({dependencyValues:e}){return{newValues:{xscale:e.xmax-e.xmin}}}},t.yscale={public:!0,componentType:"number",returnDependencies:()=>({ymin:{dependencyType:"stateVariable",variableName:"ymin"},ymax:{dependencyType:"stateVariable",variableName:"ymax"}}),definition({dependencyValues:e}){return{newValues:{yscale:e.ymax-e.ymin}}}},t}changeAxisLimits({xmin:t,xmax:e,ymin:r,ymax:a}){let s=[];return t!==void 0&&s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"xmin",value:t}),e!==void 0&&s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"xmax",value:e}),r!==void 0&&s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"ymin",value:r}),a!==void 0&&s.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"ymax",value:a}),this.coreFunctions.performUpdate({updateInstructions:s,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{xmin:t,xmax:e,ymin:r,ymax:a}}})}addChildren({serializedComponents:t}){if(t&&t.length>0){let e=de({serializedComponents:t,parentName:this.componentName,parentCreatesNewNamespace:this.attributes.newNamespace&&this.attributes.newNamespace.primitive,componentInfoObjects:this.componentInfoObjects,indOffset:this.stateValues.nChildrenAdded});return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"addComponents",serializedComponents:e.serializedComponents,parentName:this.componentName,assignNamesOffset:this.stateValues.nChildrenAdded},{updateType:"updateValue",componentName:this.componentName,stateVariable:"nChildrenAdded",value:this.stateValues.nChildrenAdded+e.serializedComponents.length}]})}}deleteChildren({number:t}){let e=Math.min(t,this.stateValues.nChildrenAdded);if(e>0){let r=this.definingChildren.length,a=this.definingChildren.slice(r-e,r).map(s=>s.componentName);return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"deleteComponents",componentNames:a},{updateType:"updateValue",componentName:this.componentName,stateVariable:"nChildrenAdded",value:this.stateValues.nChildrenAdded-e}]})}}actions={changeAxisLimits:this.changeAxisLimits.bind(new Proxy(this,this.readOnlyProxyHandler)),addChildren:this.addChildren.bind(new Proxy(this,this.readOnlyProxyHandler)),deleteChildren:this.deleteChildren.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(uu,"componentType","graph"),T(uu,"renderChildren",!0);import"math-expressions";var cu=class extends kn{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();t.variables={public:!0,componentType:"variable",isArray:!0,entryPrefixes:["var"],returnArraySizeDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"}}),returnArraySize({dependencyValues:r}){return[r.nComponents]},returnArrayDependenciesByKey({arrayKeys:r}){let a={};for(let s of r)a[s]={math:{dependencyType:"stateVariable",variableName:"math"+(Number(s)+1)}};return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:r,arrayKeys:a}){let s={};for(let o of a)s[o]=r[o].math;return{newValues:{variables:s}}}};let e=this.componentType;return t.validVariables={returnDependencies:()=>({variables:{dependencyType:"stateVariable",variableName:"variables"}}),definition:function({dependencyValues:r}){let a=[];for(let s of r.variables){let o=Pd(s);o||(console.warn("Invalid value for "+e),o=!1),a.push(o)}return{newValues:{validVariables:a}}}},t}};T(cu,"componentType","variables"),T(cu,"stateVariableForAttributeValue","variables");var pu=class extends rt{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.validVariable={returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:function({dependencyValues:e}){let r=Pd(e.value);return r||console.warn("Invalid value of a "+this.componentType),{newValues:{validVariable:r}}}},t}};T(pu,"componentType","variable"),T(pu,"rendererType","math");var cs=class extends nt{};T(cs,"componentType","group"),T(cs,"renderedDefault",!0);var mu=class extends cs{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.selectForVariantNames={createComponentOfType:"variantNames",createStateVariable:"selectForVariantNames",defaultValue:[],public:!0},e.selectWeight={createComponentOfType:"number",createStateVariable:"selectWeight",defaultValue:1,public:!0},e}};T(mu,"componentType","option"),T(mu,"renderedDefault",!1);var ca=class extends Ee{static get stateVariablesShadowedForReference(){return Kd()}static createAttributesObject(t){let e=super.createAttributesObject(t);e.fixed={leaveRaw:!0};let r=Xd();return Object.assign(e,r),e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions(),e=Yd();return Object.assign(t,e),t.readyToExpandWhenResolved={returnDependencies:()=>({from:{dependencyType:"stateVariable",variableName:"from"},length:{dependencyType:"stateVariable",variableName:"length"},step:{dependencyType:"stateVariable",variableName:"step"},type:{dependencyType:"stateVariable",variableName:"type"},exclude:{dependencyType:"stateVariable",variableName:"exclude"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,workspace:e,componentInfoObjects:r}){if(!t.stateValues.validSequence)return e.lastReplacementParameters={from:null,length:null,step:null,type:null,exclude:null},{replacements:[]};e.lastReplacementParameters={from:t.stateValues.from,length:t.stateValues.length,step:t.stateValues.step,type:t.stateValues.type,exclude:t.stateValues.exclude};let a=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,s=[],o=Pp({from:t.stateValues.from,step:t.stateValues.step,length:t.stateValues.length,exclude:t.stateValues.exclude,type:t.stateValues.type,lowercase:t.stateValues.lowercase}),l=t.stateValues.type;t.stateValues.type==="letters"&&(l="text");for(let c of o){let p={};"fixed"in t.attributes&&(p=Ye({attributes:{fixed:t.attributes.fixed},componentType:l,componentInfoObjects:r,compositeCreatesNewNamespace:a}));let m={componentType:l,attributes:p,state:{value:c,fixed:!0}};s.push(m)}return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:s,parentName:t.componentName,parentCreatesNewNamespace:a,componentInfoObjects:r}).serializedComponents}}static calculateReplacementChanges({component:t,workspace:e,componentInfoObjects:r}){let a=e.lastReplacementParameters,s=[];if(!t.stateValues.validSequence){let o=t.replacementsToWithhold;if(o||(o=0),t.replacements.length-o>0){let l=t.replacements.length,u={changeType:"changeReplacementsToWithhold",replacementsToWithhold:l};s.push(u)}return a.length=0,s}if(a.type!==t.stateValues.type||a.exclude.length>0||t.stateValues.exclude.length>0){let o=this.createSerializedReplacements({component:t,workspace:e,componentInfoObjects:r}).replacements,l={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:t.replacements.length,serializedReplacements:o,replacementsToWithhold:0};s.push(l)}else{let o=!1;t.stateValues.type==="math"?t.stateValues.from.equals(a.from)&&t.stateValues.step.equals(a.step)||(o=!0):(t.stateValues.from!==a.from||t.stateValues.step!==a.step)&&(o=!0);let l=a.length,u=0,c=0,p=l,m;if(t.stateValues.length<l){m=t.replacements.length-t.stateValues.length;let f={changeType:"changeReplacementsToWithhold",replacementsToWithhold:m};s.push(f)}else if(t.stateValues.length>l&&(u=t.stateValues.length-l,t.replacementsToWithhold>0))if(t.replacementsToWithhold>=u){m=t.replacementsToWithhold-u,c+=u,l+=u,u=0;let f={changeType:"changeReplacementsToWithhold",replacementsToWithhold:m};s.push(f)}else u-=t.replacementsToWithhold,c+=t.replacementsToWithhold,l+=t.replacementsToWithhold,m=0;if(o===!0&&(c=l,p=0),c>0)for(let f=p;f<p+c;f++){let d=W2({index:f,from:t.stateValues.from,step:t.stateValues.step,exclude:[],type:t.stateValues.type,lowercase:t.stateValues.lowercase}),h={changeType:"updateStateVariables",component:t.replacements[f],stateChanges:{value:d}};s.push(h)}if(u>0){let f=[],d=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;for(let b=l;b<t.stateValues.length;b++){let g=W2({index:b,from:t.stateValues.from,step:t.stateValues.step,exclude:[],type:t.stateValues.type,lowercase:t.stateValues.lowercase}),v=t.stateValues.type;t.stateValues.type==="letters"&&(v="text");let C={};"fixed"in t.attributes&&(C=Ye({attributes:{fixed:t.attributes.fixed},componentType:v,componentInfoObjects:r,compositeCreatesNewNamespace:d}));let w={componentType:v,attributes:C,state:{value:g,fixed:!0}};f.push(w)}let h=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:f,parentName:t.componentName,parentCreatesNewNamespace:d,componentInfoObjects:r,indOffset:l}),y={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:l,serializedReplacements:h.serializedComponents,replacementsToWithhold:0,assignNamesOffset:l};s.push(y)}}return a.type=t.stateValues.type,a.from=t.stateValues.from,a.length=t.stateValues.length,a.step=t.stateValues.step,a.exclude=t.stateValues.exclude,s}get allPotentialRendererTypes(){let t=super.allPotentialRendererTypes,e=this.componentInfoObjects.allComponentClasses[this.stateValues.type==="letters"?"text":this.stateValues.type].rendererType;return t.includes(e)||t.push(e),t}};T(ca,"componentType","sequence"),T(ca,"assignNamesToReplacements",!0),T(ca,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");var yo=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.behavior={createComponentOfType:"text",createStateVariable:"behavior",defaultValue:"combination",public:!0,trim:!0},e.isResponse={leaveRaw:!0},e}static returnChildGroups(){return[{group:"templates",componentTypes:["template"]},{group:"sources",componentTypes:["sources"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nSources={additionalStateVariablesDefined:["sourcesNames","sourceAliases","sourceIndexAliases"],returnDependencies:()=>({sourcesChildren:{dependencyType:"child",childGroups:["sources"],variableNames:["alias","indexAlias"]}}),definition:function({dependencyValues:e}){return{newValues:{nSources:e.sourcesChildren.length,sourcesNames:e.sourcesChildren.map(r=>r.componentName),sourceAliases:e.sourcesChildren.map(r=>r.stateValues.alias),sourceIndexAliases:e.sourcesChildren.map(r=>r.stateValues.indexAlias)}}}},t.nIterates={additionalStateVariablesDefined:["minNIterates","sourcesChildNames"],returnDependencies:()=>({sourcesChildren:{dependencyType:"child",childGroups:["sources"],variableNames:["numberOfChildren","childComponentNames"]}}),definition:function({dependencyValues:e}){let r=e.sourcesChildren.map(o=>o.stateValues.numberOfChildren),a=Math.min(...r),s=e.sourcesChildren.map(o=>[...o.stateValues.childComponentNames]);return{newValues:{nIterates:r,minNIterates:a,sourcesChildNames:s}}}},t.template={returnDependencies:()=>({templateChild:{dependencyType:"child",childGroups:["templates"],variableNames:["serializedChildren","newNamespace"]}}),definition:function({dependencyValues:e}){let r=e.templateChild[0];if(!r)return{newValues:{template:null}};let a=r.stateValues.serializedChildren,s={componentType:"template",state:{rendered:!0},children:a,originalName:r.componentName};return r.stateValues.newNamespace&&(s.attributes={newNamespace:{primitive:!0}}),{newValues:{template:s}}}},t.validBehavior={returnDependencies:()=>({behavior:{dependencyType:"stateVariable",variableName:"behavior"},nIterates:{dependencyType:"stateVariable",variableName:"nIterates"}}),definition:function({dependencyValues:e}){let r=!0;return e.behavior==="parallel"?e.nIterates.slice(1).some(a=>a!=e.nIterates[0])&&console.warn("Warning: map with parallel behavior and different numbers of iterates in sources activeChildren. Extra iterates will be ignored."):e.behavior!=="combination"&&(console.warn("Invalid map behavior: "+e.behavior),r=!1),{newValues:{validBehavior:r}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({validBehavior:{dependencyType:"stateVariable",variableName:"validBehavior"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,workspace:e,componentInfoObjects:r}){if(!t.stateValues.validBehavior)return e.lastReplacementParameters={sourcesNames:[],sourcesChildNames:[],behavior:void 0,nIterates:void 0,minNIterates:void 0},{replacements:[]};e.lastReplacementParameters={sourcesNames:t.stateValues.sourcesNames,sourcesChildNames:t.stateValues.sourcesChildNames,behavior:t.stateValues.behavior,nIterates:t.stateValues.nIterates,minNIterates:t.stateValues.minNIterates,replacementsToWithhold:0,withheldSubstitutionChildNames:[]};let a=[];if(t.stateValues.behavior==="parallel")for(let s=0;s<t.stateValues.minNIterates;s++)a.push(...this.parallelReplacement({component:t,iter:s,componentInfoObjects:r}));else a=this.recurseThroughCombinations({component:t,sourcesNumber:0,iterateNumber:-1,componentInfoObjects:r}).replacements;return{replacements:a}}static parallelReplacement({component:t,iter:e,componentInfoObjects:r}){let a=[xe(t.stateValues.template)],s=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;return a=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:s,componentInfoObjects:r,indOffset:e}).serializedComponents,iE(a[0],t,Array(t.stateValues.nSources).fill(e)),a}static recurseThroughCombinations({component:t,sourcesNumber:e,childnumberArray:r=[],iterateNumber:a,componentInfoObjects:s}){let o=[],l=[...r,0],u=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;for(let c=0;c<t.stateValues.nIterates[e];c++)if(l[e]=c,e>=t.stateValues.nSources-1){a++;let p=[xe(t.stateValues.template)],f=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:p,parentName:t.componentName,parentCreatesNewNamespace:u,componentInfoObjects:s,indOffset:a}).serializedComponents[0];iE(f,t,l),o.push(f)}else{let p=this.recurseThroughCombinations({component:t,sourcesNumber:e+1,childnumberArray:l,iterateNumber:a,componentInfoObjects:s});o.push(...p.replacements),a=p.iterateNumber}return{replacements:o,iterateNumber:a}}static calculateReplacementChanges({component:t,components:e,workspace:r,componentInfoObjects:a}){let s=[];if(!t.stateValues.validBehavior){if(r.lastReplacementParameters={sourcesNames:[],sourcesChildNames:[],behavior:void 0,nIterates:void 0,minNIterates:void 0,replacementsToWithhold:0,withheldSubstitutionChildNames:[]},t.replacements.length>0){let y={changeType:"delete",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToDelete:t.replacements.length,replacementsToWithhold:0};s.push(y)}return s}let o=r.lastReplacementParameters,l=!1,u=!0;if(t.stateValues.nSources!==o.sourcesNames.length)u=!1;else for(let y=0;y<t.stateValues.nSources;y++)if(t.stateValues.sourcesNames[y]!==o.sourcesNames[y]){u=!1;break}if(!u||o.behavior!==t.stateValues.behavior)l=!0;else{let y=!0;if(o.nIterates===void 0)l=!0;else for(let b=0;b<t.stateValues.nSources;b++){let g=t.stateValues.nIterates[b],v=o.nIterates[b];g!==v&&(y=!1);let C=Math.min(g,v);for(let w=0;w<C;w++)if(t.stateValues.sourcesChildNames[b][w]!=o.sourcesChildNames[b][w]){l=!0,y=!1;break}if(l)break}if(y)return[];t.stateValues.behavior==="combination"&&t.stateValues.nSources>1&&(l=!0)}if(l){let y=this.createSerializedReplacements({component:t,workspace:r,componentInfoObjects:a}).replacements,b={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:t.replacements.length,serializedReplacements:y,replacementsToWithhold:0};return s.push(b),r.lastReplacementParameters={sourcesNames:t.stateValues.sourcesNames,sourcesChildNames:t.stateValues.sourcesChildNames,behavior:t.stateValues.behavior,nIterates:t.stateValues.nIterates,minNIterates:t.stateValues.minNIterates,replacementsToWithhold:0,withheldSubstitutionChildNames:[]},s}let c=t.stateValues.minNIterates,p=o.minNIterates,m=0,f=t.replacementsToWithhold;f||(f=0);let d=o.withheldSubstitutionChildNames,h=!1;if(c<p){for(let y=0;y<t.stateValues.nSources;y++)for(let b=c;b<p;b++)e[o.sourcesChildNames[y][b]]===void 0&&(h=!0);if(!h)for(let y of o.withheldSubstitutionChildNames)for(let b of y)e[b]===void 0&&(h=!0)}if(h){let y=Math.min(c,p),b=t.replacements.length-y,g={changeType:"delete",changeTopLevelReplacements:!0,firstReplacementInd:y,numberReplacementsToDelete:b,replacementsToWithhold:0};s.push(g),d=[],f=0}if(c<p){if(!h){m=t.replacements.length-c;let y={changeType:"changeReplacementsToWithhold",replacementsToWithhold:m};s.push(y);for(let b=0;b<t.stateValues.nSources;b++){let g=o.withheldSubstitutionChildNames[b];g?g=[...g]:g=[],g=new Set([...o.sourcesChildNames[b].slice(c),...g]),d[b]=g}}}else if(c>p){let y=c-p;if(f>0)if(f>=y){m=f-y,y=0;let b={changeType:"changeReplacementsToWithhold",replacementsToWithhold:m};s.push(b)}else y-=f,p+=f,m=0;if(y>0){let b=[];for(let C=p;C<c;C++)b.push(...this.parallelReplacement({component:t,iter:C,componentInfoObjects:a}));let g=0;t.doenetAttributes.assignNames&&(g=t.doenetAttributes.assignNames.length);let v={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:p,serializedReplacements:b,replacementsToWithhold:0,assignNamesOffset:p};s.push(v)}}return r.lastReplacementParameters={sourcesNames:t.stateValues.sourcesNames,sourcesChildNames:t.stateValues.sourcesChildNames,behavior:t.stateValues.behavior,nIterates:t.stateValues.nIterates,minNIterates:c,replacementsToWithhold:m,withheldSubstitutionChildNames:d},s}static determineNumberOfUniqueVariants({serializedComponent:t}){return{success:!1}}};T(yo,"componentType","map"),T(yo,"assignNamesToReplacements",!0),T(yo,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");function iE(i,t,e){let r=i.doenetAttributes.addToSharedParameters=[];for(let[a,s]of t.stateValues.sourceAliases.entries())if(s){let o=t.stateValues.sourcesNames[a];r.push({parameterName:"sourceNameMappings",key:s,value:{name:o,childNumber:e[a]}})}for(let[a,s]of t.stateValues.sourceIndexAliases.entries())s&&r.push({parameterName:"sourceIndexMappings",key:s,value:e[a]+1})}var bo=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.alias={createPrimitiveOfType:"string",validationFunction:function(r){if(!/[a-zA-Z_]/.test(r.substring(0,1)))throw Error("All aliases must begin with a letter or an underscore");if(!/^[a-zA-Z0-9_\-]+$/.test(r))throw Error("Aliases can contain only letters, numbers, hyphens, and underscores");return r}},e.indexAlias={createPrimitiveOfType:"string",validationFunction:function(r){if(!/[a-zA-Z_]/.test(r.substring(0,1)))throw Error("All index aliases must begin with a letter or an underscore");if(!/^[a-zA-Z0-9_\-]+$/.test(r))throw Error("Index aliases can contain only letters, numbers, hyphens, and underscores");return r}},e}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.alias={returnDependencies:()=>({alias:{dependencyType:"attributePrimitive",attributeName:"alias"}}),definition({dependencyValues:e}){return{newValues:{alias:e.alias}}}},t.indexAlias={returnDependencies:()=>({indexAlias:{dependencyType:"attributePrimitive",attributeName:"indexAlias"}}),definition({dependencyValues:e}){return{newValues:{indexAlias:e.indexAlias}}}},t.numberOfChildren={additionalStateVariablesDefined:["childComponentNames","childIdentities"],returnDependencies:()=>({children:{dependencyType:"child",childGroups:["anything"]}}),definition:function({dependencyValues:e}){let r=e.children.length,a=e.children.map(s=>s.componentName);return{newValues:{numberOfChildren:r,childComponentNames:a,childIdentities:e.children}}}},t}};T(bo,"componentType","sources"),T(bo,"rendererType","container"),T(bo,"renderChildren",!0);import Sz from"math-expressions";var fu=class extends Q{constructor(t){super(t);this.changeValue=this.changeValue.bind(this),this.actions={changeValue:this.changeValue}}static get stateVariablesShadowedForReference(){return["value"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.type={createPrimitiveOfType:"string",createStateVariable:"type",defaultValue:"number",toLowerCase:!0,validValues:["number","text"],forRenderer:!0},e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:300,isAbsolute:!0},public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:{size:100,isAbsolute:!0},public:!0,forRenderer:!0},e.initialValue={createComponentOfType:"_componentWithSelectableType",createStateVariable:"initialValue",defaultValue:void 0},e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:void 0,public:!0,forRenderer:!0},e.showControls={createComponentOfType:"boolean",createStateVariable:"showControls",defaultValue:!1,public:!0,forRenderer:!0},e.showTicks={createComponentOfType:"boolean",createStateVariable:"showTicks",defaultValue:!0,public:!0,forRenderer:!0},e.showValue={createComponentOfType:"boolean",createStateVariable:"showValue",defaultValue:!0,public:!0,forRenderer:!0},e.from={createComponentOfType:"number",createStateVariable:"from",defaultValue:0,public:!0,forRenderer:!0},e.to={createComponentOfType:"number",createStateVariable:"to",defaultValue:10,public:!0,forRenderer:!0},e.step={createComponentOfType:"number",createStateVariable:"step",defaultValue:1,public:!0,forRenderer:!0},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e.bindValueTo={createComponentOfType:"_componentWithSelectableType"},e}static returnChildGroups(){return[{group:"numbersTexts",componentTypes:["number","text"]},{group:"markers",componentTypes:["markers"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.items={forRenderer:!0,public:!0,hasVariableComponentType:!0,returnDependencies:()=>({numberAndTextChildren:{dependencyType:"child",childGroups:["numbersTexts"],variableNames:["value"]},type:{dependencyType:"stateVariable",variableName:"type"}}),definition:function({dependencyValues:e,componentInfoObjects:r}){let a=[];if(e.type==="text")for(let s of e.numberAndTextChildren)r.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"text"})?a.push(s.stateValues.value):a.push(s.stateValues.value.toString());else if(e.numberAndTextChildren.length>0){for(let s of e.numberAndTextChildren)if(r.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"number"}))a.push(s.stateValues.value);else{let o=Number(s.stateValues.value);Number.isFinite(o)&&a.push(o)}a.sort((s,o)=>s-o)}return{newValues:{items:a},setComponentType:{items:e.type}}}},t.nItems={forRenderer:!0,public:!0,componentType:"integer",returnDependencies:()=>({items:{dependencyType:"stateVariable",variableName:"items"},from:{dependencyType:"stateVariable",variableName:"from"},to:{dependencyType:"stateVariable",variableName:"to"},step:{dependencyType:"stateVariable",variableName:"step"},type:{dependencyType:"stateVariable",variableName:"type"}}),definition({dependencyValues:e}){let r=e.items.length;return r===0&&e.type==="number"&&(r=Math.floor((e.to-e.from)/e.step+1e-10)+1,r>=0&&Number.isFinite(r)||(r=0)),{newValues:{nItems:r}}}},t.firstItem={forRenderer:!0,returnDependencies:()=>({items:{dependencyType:"stateVariable",variableName:"items"},from:{dependencyType:"stateVariable",variableName:"from"},type:{dependencyType:"stateVariable",variableName:"type"}}),definition({dependencyValues:e}){let r;return e.items.length>0?r=e.items[0]:e.type==="number"?r=e.from:r=null,{newValues:{firstItem:r}}}},t.lastItem={forRenderer:!0,returnDependencies:()=>({items:{dependencyType:"stateVariable",variableName:"items"},from:{dependencyType:"stateVariable",variableName:"from"},nItems:{dependencyType:"stateVariable",variableName:"nItems"},step:{dependencyType:"stateVariable",variableName:"step"},type:{dependencyType:"stateVariable",variableName:"type"}}),definition({dependencyValues:e}){let r;return e.items.length>0?r=e.items[e.items.length-1]:e.type==="number"?r=e.from+(e.nItems-1)*e.step:r=null,{newValues:{lastItem:r}}}},t.valueToIndex={forRenderer:!0,returnDependencies:()=>({items:{dependencyType:"stateVariable",variableName:"items"}}),definition:function({dependencyValues:e}){let r={};for(let[a,s]of e.items.entries())r[s]=a;return{newValues:{valueToIndex:r}}}},t.preliminaryValue={returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},initialValue:{dependencyType:"stateVariable",variableName:"initialValue"},bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["value"]}}),definition({dependencyValues:e}){return e.bindValueTo?{newValues:{preliminaryValue:e.bindValueTo.stateValues.value}}:{useEssentialOrDefaultValue:{preliminaryValue:{variablesToCheck:"value",get defaultValue(){return e.initialValue}}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.bindValueTo?{success:!0,instructions:[{setDependency:"bindValueTo",desiredValue:e.preliminaryValue,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"preliminaryValue",value:e.preliminaryValue}]}}},t.index={forRenderer:!0,returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},valueToIndex:{dependencyType:"stateVariable",variableName:"valueToIndex"},items:{dependencyType:"stateVariable",variableName:"items"},preliminaryValue:{dependencyType:"stateVariable",variableName:"preliminaryValue"},from:{dependencyType:"stateVariable",variableName:"from"},step:{dependencyType:"stateVariable",variableName:"step"},nItems:{dependencyType:"stateVariable",variableName:"nItems"}}),definition:function({dependencyValues:e}){let r=aE(e);return r===void 0&&(r=0),{newValues:{index:r}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){if(r.items.length===0){let s=r.from,o=r.step,l=e.index;return Number.isInteger(l)?l>=0&&l<r.nItems?{success:!0,instructions:[{setDependency:"preliminaryValue",desiredValue:s+l*o}]}:{success:!1}:{success:!1}}let a=r.items[e.index];return a===void 0?{success:!1}:{success:!0,instructions:[{setDependency:"preliminaryValue",desiredValue:a}]}}},t.value={forRenderer:!0,public:!0,essential:!0,hasVariableComponentType:!0,returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},items:{dependencyType:"stateVariable",variableName:"items"},index:{dependencyType:"stateVariable",variableName:"index"},from:{dependencyType:"stateVariable",variableName:"from"},step:{dependencyType:"stateVariable",variableName:"step"}}),definition:function({dependencyValues:e}){let r;return e.items.length>0?r=e.items[e.index]:r=e.from+e.step*e.index,{newValues:{value:r},setComponentType:{value:e.type}}},inverseDefinition:Az},t.valueForDisplay={forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"}}),definition:function({dependencyValues:e,usedDefault:r}){return{newValues:{valueForDisplay:dr({value:e.value,dependencyValues:e,usedDefault:r}).tree}}}},t.markers={forRenderer:!0,returnDependencies:()=>({markersChild:{dependencyType:"child",childGroups:["markers"],variableNames:["markerType","markers"]},type:{dependencyType:"stateVariable",variableName:"type"},items:{dependencyType:"stateVariable",variableName:"items"}}),definition:function({dependencyValues:e}){let r=[];if(e.markersChild.length>0){let a=e.markersChild[0].stateValues.markerType;a==="empty"?r=[...e.items]:a!==e.type?(console.warn("Markers type doesn't match slider type."),r=[]):r=e.markersChild[0].stateValues.markers}return{newValues:{markers:r}}}},t}changeValue({value:t,transient:e}){if(!this.stateValues.disabled)return e?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"value",value:t}],transient:e}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"value",value:t}],event:{verb:"selected",object:{componentName:this.componentName,componentType:this.componentType},result:{response:t,responseText:t.toString()}}})}};T(fu,"componentType","slider"),T(fu,"variableForPlainMacro","value");function aE({preliminaryValue:i,valueToIndex:t,type:e,items:r,from:a,step:s,nItems:o}){let l=i;if(r.length===0){if(!Number.isFinite(l))return;let m=Math.round((l-a)/s);return m>=0?m<o?m:o-1:0}let u=t[l];if(u!==void 0)return u;if(e==="text")return;let c=function(m=0,f=r.length-1){if(f<=m+1)return l>r[m]?f:m;let d=Math.round((f+m)/2);return l>r[d]?c(d,f):c(m,d)},p=c();if(p!==0){let m=r[p-1],f=r[p],d=Math.abs(l-m),h=Math.abs(l-f);d<h&&p--}return p}function Az({desiredStateVariableValues:i,stateValues:t}){let e=i.value;if(t.type==="text")e=e.toString();else if(e instanceof Sz.class){if(e=e.evaluate_to_constant(),e===null)return{success:!1}}else e=Number(e);let r=aE({preliminaryValue:e,valueToIndex:t.valueToIndex,type:t.type,items:t.items,from:t.from,step:t.step,nItems:t.nItems});return r===void 0?{success:!1}:{success:!0,instructions:[{setDependency:"index",desiredValue:r}]}}var Xp=class extends Q{static returnChildGroups(){return[{group:"texts",componentTypes:["text"]},{group:"numbers",componentTypes:["number"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.markerType={public:!0,componentType:"text",returnDependencies:()=>({textChildren:{dependencyType:"child",childGroups:["texts"]},numberChildren:{dependencyType:"child",childGroups:["numbers"]}}),definition:function({dependencyValues:e}){let r;return e.textChildren.length>0?r="text":e.numberChildren.length>0?r="number":r="empty",{newValues:{markerType:r}}}},t.markers={public:!0,isArray:!0,entryPrefixes:["item"],hasVariableComponentType:!0,returnDependencies:()=>({markerType:{dependencyType:"stateVariable",variableName:"markerType"},textChildren:{dependencyType:"child",childGroups:["texts"],variableNames:["value"]},numberChildren:{dependencyType:"child",childGroups:["numbers"],variableNames:["value"]}}),definition:function({dependencyValues:e}){let r=[],a=e.markerType;return e.markerType==="text"?r=e.textChildren.map(s=>s.stateValues.value):e.markerType==="number"?(r=e.numberChildren.map(s=>s.stateValues.value),r.sort((s,o)=>s-o)):a="text",{newValues:{markers:r},setComponentType:{markers:a}}}},t}};T(Xp,"componentType","markers");function ps({variables:i,applyComponentConstraint:t}){let e={},r=!1;for(let a in i){let s=t({[a]:i[a]});s.constrained&&(r=!0,e[a]=s.variables[a])}return r?{constrained:r,variables:e}:{}}var du=class extends Q{static returnChildGroups(){return[{group:"constraints",componentTypes:["_constraint"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.independentComponentConstraints={returnDependencies:()=>({constraintChildren:{dependencyType:"child",childGroups:["constraints"],variableNames:["independentComponentConstraints"]}}),definition:({dependencyValues:e})=>({newValues:{independentComponentConstraints:e.constraintChildren.every(r=>r.stateValues.independentComponentConstraints)}})},t.arrayEntryPrefixForConstraints={returnDependencies:()=>({arrayEntryPrefixForConstraints:{dependencyType:"parentStateVariable",variableName:"arrayEntryPrefixForConstraints"}}),definition:({dependencyValues:e})=>({newValues:{arrayEntryPrefixForConstraints:e.arrayEntryPrefixForConstraints}})},t.arrayVariableForConstraints={returnDependencies:()=>({arrayVariableForConstraints:{dependencyType:"parentStateVariable",variableName:"arrayVariableForConstraints"}}),definition:({dependencyValues:e})=>({newValues:{arrayVariableForConstraints:e.arrayVariableForConstraints}})},t.nDimensions={returnDependencies:()=>({nDimensions:{dependencyType:"parentStateVariable",variableName:"nDimensionsForConstraints"}}),definition({dependencyValues:e}){return{newValues:{nDimensions:e.nDimensions}}}},t.constraintResults={additionalStateVariablesDefined:[{variableName:"constraintUsedByComponent",isArray:!0,entryPrefixes:["constraintUsedByComponent"]}],isArray:!0,entryPrefixes:["constraintResult"],stateVariablesDeterminingDependencies:["independentComponentConstraints","arrayEntryPrefixForConstraints","arrayVariableForConstraints"],returnArraySizeDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"}}),returnArraySize({dependencyValues:e}){return[e.nDimensions]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={constraintChildren:{dependencyType:"child",childGroups:["constraints"],variableNames:["applyConstraint","applyComponentConstraint"],variablesOptional:!0},independentComponentConstraints:{dependencyType:"stateVariable",variableName:"independentComponentConstraints"}},s=r.arrayEntryPrefixForConstraints,o={};if(r.independentComponentConstraints)for(let l of e)o[l]={x:{dependencyType:"parentStateVariable",variableName:s+(Number(l)+1)}};else{let l=r.arrayVariableForConstraints?r.arrayVariableForConstraints:"__null";a.xs={dependencyType:"parentStateVariable",variableName:l}}return{globalDependencies:a,dependenciesByKey:o}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a}){if(e.independentComponentConstraints){let s={},o={};for(let l of a){let u=Number(l)+1,c={["x"+u]:r[l].x},p=!1;for(let m of e.constraintChildren){let f=m.stateValues.applyComponentConstraint(c);f.constrained&&(c["x"+u]=Ze(f.variables["x"+u]),p=!0)}s[l]=c["x"+u],o[l]=p}return{newValues:{constraintResults:s,constraintUsedByComponent:o}}}else{let s={},o=!1;for(let c in e.xs)s[`x${Number(c)+1}`]=e.xs[c];for(let c of e.constraintChildren){let p;if(c.stateValues.applyConstraint?p=c.stateValues.applyConstraint(s):p=ps({variables:s,applyComponentConstraint:c.stateValues.applyComponentConstraint}),p.constrained){for(let m in p.variables)s[m]=Ze(p.variables[m]);o=!0}}let l={},u={};for(let c in e.xs)l[c]=s[`x${Number(c)+1}`],u[c]=o;return{newValues:{constraintResults:l,constraintUsedByComponent:u}}}},inverseArrayDefinitionByKey:function({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,stateValues:o,workspace:l}){if(r.independentComponentConstraints){let u=[];for(let c in e.constraintResults){let p=Number(c)+1,m={["x"+p]:Ze(e.constraintResults[c])};for(let f of r.constraintChildren){let d=f.stateValues.applyComponentConstraint(m);d.constrained&&(m["x"+p]=Ze(d.variables["x"+p]))}u.push({setDependency:s[c].x,desiredValue:m["x"+p]})}return{success:!0,instructions:u}}else{let u={};l.desiredConstraintResults||(l.desiredConstraintResults={}),Object.assign(l.desiredConstraintResults,e.constraintResults);for(let p in o.constraintResults){let m=Number(p)+1;p in l.desiredConstraintResults?u["x"+m]=Ze(l.desiredConstraintResults[p]):u["x"+m]=Ze(o.constraintResults[p])}for(let p of r.constraintChildren){let m;if(p.stateValues.applyConstraint?m=p.stateValues.applyConstraint(u):m=ps({variables:u,applyComponentConstraint:p.stateValues.applyComponentConstraint}),m.constrained)for(let f in m.variables)u[f]=Ze(m.variables[f])}let c={};for(let p in l.desiredConstraintResults)c[p]=u[`x${Number(p)+1}`];return{success:!0,instructions:[{setDependency:"xs",desiredValue:c}]}}}},t.constraintUsed={public:!0,componentType:"boolean",returnDependencies:()=>({constraintUsedByComponent:{dependencyType:"stateVariable",variableName:"constraintUsedByComponent"}}),definition:function({dependencyValues:e}){return{newValues:{constraintUsed:Object.values(e.constraintUsedByComponent).some(a=>a)}}}},t}};T(du,"componentType","constraints"),T(du,"rendererType");var ut=class extends Q{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.independentComponentConstraints={returnDependencies:()=>({}),definition:()=>({newValues:{independentComponentConstraints:!1}})},t}};T(ut,"componentType","_constraint"),T(ut,"rendererType");var Yp=class extends ut{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.dx={createComponentOfType:"number",createStateVariable:"dx",defaultValue:1,public:!0},e.dy={createComponentOfType:"number",createStateVariable:"dy",defaultValue:1,public:!0},e.dz={createComponentOfType:"number",createStateVariable:"dz",defaultValue:1,public:!0},e.xoffset={createComponentOfType:"number",createStateVariable:"xoffset",defaultValue:0,public:!0},e.yoffset={createComponentOfType:"number",createStateVariable:"yoffset",defaultValue:0,public:!0},e.zoffset={createComponentOfType:"number",createStateVariable:"zoffset",defaultValue:0,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.independentComponentConstraints={returnDependencies:()=>({}),definition:()=>({newValues:{independentComponentConstraints:!0}})},t.applyComponentConstraint={returnDependencies:()=>({dx:{dependencyType:"stateVariable",variableName:"dx"},dy:{dependencyType:"stateVariable",variableName:"dy"},dz:{dependencyType:"stateVariable",variableName:"dz"},xoffset:{dependencyType:"stateVariable",variableName:"xoffset"},yoffset:{dependencyType:"stateVariable",variableName:"yoffset"},zoffset:{dependencyType:"stateVariable",variableName:"zoffset"}}),definition:({dependencyValues:e})=>({newValues:{applyComponentConstraint:function(r){if("x1"in r){let a=it(r.x1);if(!Number.isFinite(a))return{};let s=e.dx,o=e.xoffset,l=Math.round((r.x1-o)/s)*s+o;return Number.isFinite(l)?{constrained:!0,variables:{x1:l}}:{}}if("x2"in r){let a=it(r.x2);if(!Number.isFinite(a))return{};let s=e.dy,o=e.yoffset,l=Math.round((r.x2-o)/s)*s+o;return Number.isFinite(l)?{constrained:!0,variables:{x2:l}}:{}}if("x3"in r){let a=it(r.x3);if(!Number.isFinite(a))return{};let s=e.dz,o=e.zoffset,l=Math.round((r.x3-o)/s)*s+o;return Number.isFinite(l)?{constrained:!0,variables:{x3:l}}:{}}return{}}}})},t}};T(Yp,"componentType","constrainToGrid");var Zp=class extends ut{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.buffer={createComponentOfType:"number",createStateVariable:"buffer",defaultValue:.01,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.independentComponentConstraints={returnDependencies:()=>({}),definition:()=>({newValues:{independentComponentConstraints:!0}})},t.applyComponentConstraint={returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]},buffer:{dependencyType:"stateVariable",variableName:"buffer"}}),definition:({dependencyValues:e})=>({newValues:{applyComponentConstraint:function(r){if(!e.graphAncestor)return{};if("x1"in r){let a=it(r.x1);if(!Number.isFinite(a))return{};let s=e.graphAncestor.stateValues.xmin,o=e.graphAncestor.stateValues.xmax;if(!(Number.isFinite(s)&&Number.isFinite(o)))return{};let l=s,u=o,c=e.buffer;if(c>0){let m=c*(o-s);l+=m,u-=m}let p=Math.max(l,Math.min(u,a));return{constrained:!0,variables:{x1:p}}}if("x2"in r){let a=it(r.x2);if(!Number.isFinite(a))return{};let s=e.graphAncestor.stateValues.ymin,o=e.graphAncestor.stateValues.ymax;if(!(Number.isFinite(s)&&Number.isFinite(o)))return{};let l=s,u=o,c=e.buffer;if(c>0){let m=c*(o-s);l+=m,u-=m}let p=Math.max(l,Math.min(u,a));return{constrained:!0,variables:{x2:p}}}return{}}}})},t}};T(Zp,"componentType","constrainToGraph");var Jp=class extends ut{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.dx={createComponentOfType:"number",createStateVariable:"dx",defaultValue:1,public:!0},e.dy={createComponentOfType:"number",createStateVariable:"dy",defaultValue:1,public:!0},e.dz={createComponentOfType:"number",createStateVariable:"dz",defaultValue:1,public:!0},e.xoffset={createComponentOfType:"number",createStateVariable:"xoffset",defaultValue:0,public:!0},e.yoffset={createComponentOfType:"number",createStateVariable:"yoffset",defaultValue:0,public:!0},e.zoffset={createComponentOfType:"number",createStateVariable:"zoffset",defaultValue:0,public:!0},e.xthreshold={createComponentOfType:"number",createStateVariable:"xthreshold",defaultValue:.2,public:!0},e.ythreshold={createComponentOfType:"number",createStateVariable:"ythreshold",defaultValue:.2,public:!0},e.zthreshold={createComponentOfType:"number",createStateVariable:"zthreshold",defaultValue:.2,public:!0},e.includeGridlines={createComponentOfType:"boolean",createStateVariable:"includeGridlines",defaultValue:!1,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.independentComponentConstraints={returnDependencies:()=>({includeGridlines:{dependencyType:"stateVariable",variableName:"includeGridlines"}}),definition:({dependencyValues:e})=>({newValues:{independentComponentConstraints:e.includeGridlines}})},t.applyComponentConstraint={returnDependencies:()=>({dx:{dependencyType:"stateVariable",variableName:"dx"},dy:{dependencyType:"stateVariable",variableName:"dy"},dz:{dependencyType:"stateVariable",variableName:"dz"},xoffset:{dependencyType:"stateVariable",variableName:"xoffset"},yoffset:{dependencyType:"stateVariable",variableName:"yoffset"},zoffset:{dependencyType:"stateVariable",variableName:"zoffset"},xthreshold:{dependencyType:"stateVariable",variableName:"xthreshold"},ythreshold:{dependencyType:"stateVariable",variableName:"ythreshold"},zthreshold:{dependencyType:"stateVariable",variableName:"zthreshold"}}),definition:({dependencyValues:e})=>({newValues:{applyComponentConstraint:function(r){if("x1"in r){let a=it(r.x1);if(!Number.isFinite(a))return{};let s=e.dx,o=e.xoffset,l=Math.round((r.x1-o)/s)*s+o;return Number.isFinite(l)&&Math.abs(r.x1-l)<e.xthreshold?{constrained:!0,variables:{x1:l}}:{}}if("x2"in r){let a=it(r.x2);if(!Number.isFinite(a))return{};let s=e.dy,o=e.yoffset,l=Math.round((r.x2-o)/s)*s+o;return Number.isFinite(l)&&Math.abs(r.x2-l)<e.ythreshold?{constrained:!0,variables:{x2:l}}:{}}if("x3"in r){let a=it(r.x3);if(!Number.isFinite(a))return{};let s=e.dz,o=e.zoffset,l=Math.round((r.x3-o)/s)*s+o;return Number.isFinite(l)&&Math.abs(r.x3-l)<e.zthreshold?{constrained:!0,variables:{x3:l}}:{}}return{}}}})},t.applyConstraint={returnDependencies:()=>({dx:{dependencyType:"stateVariable",variableName:"dx"},dy:{dependencyType:"stateVariable",variableName:"dy"},dz:{dependencyType:"stateVariable",variableName:"dz"},xoffset:{dependencyType:"stateVariable",variableName:"xoffset"},yoffset:{dependencyType:"stateVariable",variableName:"yoffset"},zoffset:{dependencyType:"stateVariable",variableName:"zoffset"},xthreshold:{dependencyType:"stateVariable",variableName:"xthreshold"},ythreshold:{dependencyType:"stateVariable",variableName:"ythreshold"},zthreshold:{dependencyType:"stateVariable",variableName:"zthreshold"},includeGridlines:{dependencyType:"stateVariable",variableName:"includeGridlines"},applyComponentConstraint:{dependencyType:"stateVariable",variableName:"applyComponentConstraint"}}),definition:({dependencyValues:e})=>({newValues:{applyConstraint:function(r){let a={},s=!1;for(let o in r){let l=e.applyComponentConstraint({[o]:r[o]});l.constrained&&(s=!0,a[o]=l.variables[o])}if(!s)return{};if(!e.includeGridlines){if(r.x1!==void 0&&a.x1===void 0)return{};if(r.x2!==void 0&&a.x2===void 0)return{};if(r.x3!==void 0&&a.x3===void 0)return{}}return{constrained:s,variables:a}}}})},t}};T(Jp,"componentType","attractToGrid");var Qp=class extends ut{static returnChildGroups(){return[{group:"graphical",componentTypes:["_graphical"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nearestPointFunctions={returnDependencies:()=>({graphicalChildren:{dependencyType:"child",childGroups:["graphical"],variableNames:["nearestPoint"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r=[];for(let a of e.graphicalChildren){if(!a.stateValues.nearestPoint){console.warn(`cannot attract to ${a.componentName} as it doesn't have a nearestPoint state variable`);continue}r.push(a.stateValues.nearestPoint)}return{newValues:{nearestPointFunctions:r}}}},t.applyConstraint={returnDependencies:()=>({nearestPointFunctions:{dependencyType:"stateVariable",variableName:"nearestPointFunctions"}}),definition:({dependencyValues:e})=>({newValues:{applyConstraint:function(r){let a=1/0,s={},o=!1,l={};for(let u in r)l[u]=it(r[u]);for(let u of e.nearestPointFunctions){let c=u(r);if(c===void 0)continue;let p={},m=0;if(l.x1!==void 0){if(c.x1===void 0)continue;p.x1=c.x1,m+=Math.pow(l.x1-c.x1,2)}if(l.x2!==void 0){if(c.x2===void 0)continue;p.x2=c.x2,m+=Math.pow(l.x2-c.x2,2)}if(l.x3!==void 0){if(c.x3===void 0)continue;p.x3=c.x3,m+=Math.pow(l.x3-c.x3,2)}m<a&&(s=p,a=m,o=!0)}return o?{constrained:o,variables:s}:{}}}})},t}};T(Qp,"componentType","constrainTo");var em=class extends ut{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.threshold={createComponentOfType:"number",createStateVariable:"threshold",defaultValue:.5,public:!0},e.thresholdRelativeToGraph={createComponentOfType:"boolean",createStateVariable:"thresholdRelativeToGraph",defaultValue:!1,public:!0},e}static returnChildGroups(){return[{group:"graphical",componentTypes:["_graphical"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nearestPointFunctions={returnDependencies:()=>({graphicalChildren:{dependencyType:"child",childGroups:["graphical"],variableNames:["nearestPoint"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r=[];for(let a of e.graphicalChildren){if(!a.stateValues.nearestPoint){console.warn(`cannot attract to ${a.componentName} as it doesn't have a nearestPoint state variable`);continue}r.push(a.stateValues.nearestPoint)}return{newValues:{nearestPointFunctions:r}}}},t.applyConstraint={stateVariablesDeterminingDependencies:["thresholdRelativeToGraph"],returnDependencies({stateValues:e}){let r={nearestPointFunctions:{dependencyType:"stateVariable",variableName:"nearestPointFunctions"},threshold:{dependencyType:"stateVariable",variableName:"threshold"},thresholdRelativeToGraph:{dependencyType:"stateVariable",variableName:"thresholdRelativeToGraph"}};return e.thresholdRelativeToGraph&&(r.graphAncestor={dependencyType:"ancestor",componentType:"graph",variableNames:["xscale","yscale"]}),r},definition({dependencyValues:e}){let r=1,a=1;return e.thresholdRelativeToGraph&&e.graphAncestor&&(r=e.graphAncestor.stateValues.xscale,a=e.graphAncestor.stateValues.yscale),{newValues:{applyConstraint:function(s){let o=1/0,l={},u={};for(let c in s)u[c]=it(s[c]);for(let c of e.nearestPointFunctions){let p=c(s);if(p===void 0)continue;let m={},f=0;if(u.x1!==void 0){if(p.x1===void 0)continue;m.x1=p.x1,f+=Math.pow((u.x1-p.x1)/r,2)}if(u.x2!==void 0){if(p.x2===void 0)continue;m.x2=p.x2,f+=Math.pow((u.x2-p.x2)/a,2)}if(u.x3!==void 0){if(p.x3===void 0)continue;m.x3=p.x3,f+=Math.pow(u.x3-p.x3,2)}f<o&&(l=m,o=f)}return o>e.threshold*e.threshold?{}:{constrained:!0,variables:l}}}}}},t}};T(em,"componentType","attractTo");var tm=class extends ut{static returnChildGroups(){return[{group:"constraints",componentTypes:["_constraint"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.applyConstraint={returnDependencies:()=>({constraintChildren:{dependencyType:"child",childGroups:["constraints"],variableNames:["applyConstraint","applyComponentConstraint"],variablesOptional:!0}}),definition:({dependencyValues:e})=>({newValues:{applyConstraint:function(r){let a;if(e.constraintChildren.length===1){let u=e.constraintChildren[0];return u.stateValues.applyConstraint?a=u.stateValues.applyConstraint(r):a=ps({variables:r,applyComponentConstraint:u.stateValues.applyComponentConstraint}),a}let s=1/0,o={},l;for(let[u,c]of e.constraintChildren.entries()){if(c.stateValues.applyConstraint?a=c.stateValues.applyConstraint(r):a=ps({variables:r,applyComponentConstraint:c.stateValues.applyComponentConstraint}),!a.constrained)continue;let p=0;for(let m in a.variables){let f=it(r[m]),d=it(a.variables[m]);if(!Number.isFinite(f)||!Number.isFinite(d)){p=1/0;break}p+=Math.pow(f-d,2)}p<s&&(o=a,l=u+1,s=p)}return l===void 0?{}:(o.constraintIndices===void 0?o.constraintIndices=[l]:o.constraintIndices=[l,...o.constraintIndices],o)}}})},t}};T(tm,"componentType","constraintUnion");var rm=class extends ut{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.threshold={createComponentOfType:"number",createStateVariable:"threshold",defaultValue:.5,public:!0},e}static returnChildGroups(){return[{group:"constraints",componentTypes:["_constraint"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.applyConstraint={returnDependencies:()=>({constraintChild:{dependencyType:"child",childGroups:["constraints"],variableNames:["applyConstraint","applyComponentConstraint"],variablesOptional:!0},independentComponentConstraints:{dependencyType:"stateVariable",variableName:"independentComponentConstraints"},threshold:{dependencyType:"stateVariable",variableName:"threshold"}}),definition:({dependencyValues:e})=>({newValues:{applyConstraint:function(r){let a,s=e.constraintChild[0];if(!s)return{};s.stateValues.applyConstraint?a=s.stateValues.applyConstraint(r):a=ps({variables:r,applyComponentConstraint:s.stateValues.applyComponentConstraint});let o=0;for(let l in a.variables){let u=it(r[l]),c=it(a.variables[l]);if(!Number.isFinite(u)||!Number.isFinite(c))return{};o+=Math.pow(u-c,2)}return o>e.threshold*e.threshold?{}:a}}})},t}};T(rm,"componentType","attractToConstraint");import wz from"math-expressions";var hu=class extends Ee{static returnChildGroups(){return[{group:"lines",componentTypes:["line"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.lineChildren={returnDependencies:()=>({lineChildren:{dependencyType:"child",childGroups:["lines"],variableNames:["numericalCoeff0","numericalCoeffvar1","numericalCoeffvar2","nDimensions"]}}),definition:({dependencyValues:e})=>({newValues:{lineChildren:e.lineChildren}})},t.readyToExpandWhenResolved={returnDependencies:()=>({lineChildren:{dependencyType:"stateVariable",variableName:"lineChildren"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,components:e}){let r=t.stateValues.lineChildren.length;if(r===0)return{replacements:[]};if(r===1){let b=t.stateValues.lineChildren[0].componentName,g=e[b].serialize({forLink:!0});return g.state||(g.state={}),g.state.draggable=!1,g.state.fixed=!0,{replacements:Rr({serializedComponents:[g],componentName:t.componentName})}}if(r>2)return console.warn("Haven't implemented intersection for more than two objects"),{replacements:[]};let a=t.stateValues.lineChildren[0],s=t.stateValues.lineChildren[1];if(a.stateValues.nDimensions!==2||s.stateValues.nDimensions!==2)return console.log("Intersection of lines implemented only in 2D"),{replacements:[]};let o=a.stateValues.numericalCoeffvar1,l=a.stateValues.numericalCoeffvar2,u=a.stateValues.numericalCoeff0,c=s.stateValues.numericalCoeffvar1,p=s.stateValues.numericalCoeffvar2,m=s.stateValues.numericalCoeff0;if(!(Number.isFinite(o)&&Number.isFinite(l)&&Number.isFinite(u)&&Number.isFinite(c)&&Number.isFinite(p)&&Number.isFinite(m)))return console.log("Intersection of lines implemented only for constant coefficients"),{replacements:[]};let f=o*p-c*l;if(Math.abs(f)<1e-14){if(Math.abs(m*o-u*c)>1e-14)return{replacements:[]};if(o===0&&l===0&&u===0||c===0&&p===0&&m===0)return{replacements:[]};{let b=t.stateValues.lineChildren[0].componentName,g=e[b].serialize({forLink:!0});return g.state||(g.state={}),g.state.draggable=!1,g.state.fixed=!0,{replacements:Rr({serializedComponents:[g],componentName:t.componentName})}}}let d=(m*l-u*p)/f,h=(u*c-m*o)/f,y=wz.fromAst(["vector",d,h]);return{replacements:[{componentType:"point",state:{coords:y,draggable:!1,fixed:!0}}]}}static calculateReplacementChanges({component:t,components:e}){let r=[],a=this.createSerializedReplacements({component:t,components:e}).replacements,s=a.length,o=!0;if(s===t.replacements.length){o=!1;for(let u=0;u<s;u++){if(a[u].componentType!==t.replacements[u].componentType){o=!0;break}if(a[u].state===void 0){console.warn("No state by which to update intersection component, so recreating"),o=!0;break}let c={changeType:"updateStateVariables",component:t.replacements[u],stateChanges:a[u].state};r.push(c)}}return o===!1?r:[{changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:t.replacements.length,serializedReplacements:a}]}};T(hu,"componentType","intersection"),T(hu,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");var go=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.columns={createComponentOfType:"text",createStateVariable:"columns",defaultValue:null,public:!0},e}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.breakpoints={returnDependencies:()=>({children:{dependencyType:"child",childGroups:["anything"],variableNames:["width"]},columns:{dependencyType:"stateVariable",variableName:"columns"}}),definition:function({dependencyValues:e}){let r=[],a=e.children.map(s=>s.stateValues.width);if(e.columns!==null){let s;if(e.columns.indexOf(",")!==-1)s=e.columns.split(",").map(Number);else if(e.columns.indexOf("-")!==-1){let[c,p]=e.columns.split("-");s=[];for(let m=Number(c);m<=p;m++)s.push(m)}else s=[Number(e.columns)];let o={},l={};for(let c of s){let p=[],m=0;for(let f=0;f<c;f++){let d=-1;for(let h=f;h<a.length;h=h+c)a[h]>d&&(d=a[h]);p.push(d),m=m+Number(d)}o[c]=p,l[c]=m}let u=-1;for(let c of s){let p=Number.POSITIVE_INFINITY,m=-1;for(let f of s)l[f]<=p&&f>u&&(p=l[f],m=f);p<Number.POSITIVE_INFINITY&&(r.push({breakpoint:p,possibleColumnNumbers:m,arrayOfWidths:o[m]}),u=m)}}return{newValues:{breakpoints:r}}}},t}};T(go,"componentType","panel"),T(go,"rendererType","container"),T(go,"renderChildren",!0);var nm=class extends ut{static returnChildLogic(t){let e=super.returnChildLogic(t),r=function({activeChildrenMatched:m}){let f=[];for(let d of m)f.push({createdComponent:!0,componentName:d.componentName});return{success:!0,newChildren:[{componentType:"angles",children:f}]}},a=e.newLeaf({name:"AtLeastOneAngle",componentType:"angle",comparison:"atLeast",number:1,isSugar:!0,replacementFunction:r}),s=e.newLeaf({name:"AtLeastOneString",componentType:"string",comparison:"atLeast",number:1}),o=e.newLeaf({name:"AtLeastOneMath",componentType:"math",comparison:"atLeast",number:1}),l=e.newOperator({name:"StringsAndMaths",operator:"or",propositions:[s,o],requireConsecutive:!0,isSugar:!0,replacementFunction:r}),u=e.newLeaf({name:"AtMostOneAngles",componentType:"angles",comparison:"atMost",number:1}),c=e.newOperator({name:"Angles",operator:"xor",propositions:[a,l,u],setAsBase:!0}),p=e.newLeaf({name:"AtMostOnePoint",componentType:"point",comparison:"atMost",number:1});return e.newOperator({name:"AnglesAndPoint",operator:"and",propositions:[c,p],setAsBase:!0}),e}updateState(t={}){if(super.updateState(t),!this.childLogicSatisfied){this.unresolvedState.angles=!0,this.unresolvedState.offset=!0;return}let e=this.currentTracker.trackChanges,r=e.childrenChanged(this.componentName);if(r){let a=this.childLogic.returnMatches("AtMostOneAngles");a.length===1?this.state.anglesChild=this.activeChildren[a[0]]:(delete this.state.anglesChild,this.state.angles=[],delete this.unresolvedState.angles);let s=this.childLogic.returnMatches("AtMostOnePoint");s.length===1?this.state.pointChild=this.activeChildren[s[0]]:(delete this.state.pointChild,this.state.offset=[0,0,0],delete this.unresolvedState.offset)}if(this.state.anglesChild){if(this.state.anglesChild.unresolvedState.angles){this.unresolvedState.angles=!0;return}(r||e.getVariableChanges({component:this.state.anglesChild,variable:"angles"}))&&(delete this.unresolvedState.angles,this.state.angles=this.state.anglesChild.state.angles)}if(this.state.pointChild){if(this.state.pointChild.unresolvedState.xs){this.unresolvedState.offset=!0;return}if(r||e.getVariableChanges({component:this.state.pointChild,variable:"xs"})){delete this.unresolvedState.offset,this.state.offset=[];for(let a=0;a<this.state.pointChild.state.ndimensions;a++){let s=this.state.pointChild.state.xs[a].evaluate_to_constant();if(!Number.isFinite(s)){this.state.offset=NaN;break}this.state.offset.push(s)}}}}applyTheConstraint({x1:t,x2:e,x3:r,offset:a}){if(this.unresolvedState.angles||this.unresolvedState.offset)return{};if(t===void 0||e===void 0||r!==void 0)return{};if(t=this.findFiniteNumericalValue(t),e=this.findFiniteNumericalValue(e),!Number.isFinite(t)||!Number.isFinite(e))return{};if(a===void 0&&(a=this.state.offset),Number.isNaN(a))return{};let s=t-a[0],o=e-a[1],l=Math.atan2(o,s),u=1/0,c,p;for(let[y,b]of this.state.angles.entries()){let g=b.state.angle.evaluate_to_constant();if(!Number.isFinite(g))continue;let v=Math.abs((g-l+Math.PI)%(2*Math.PI)-Math.PI);v<u&&(c=g,p=y,u=v)}if(c===void 0)return{};let m=Math.sqrt(s*s+o*o),f=a[0]+m*Math.cos(c),d=a[1]+m*Math.sin(c);return{variables:{x1:f,x2:d},constraintIndices:[p+1],constrained:!0}}};T(nm,"componentType","constrainToAngles");var im=class extends ut{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.threshold={createComponentOfType:"number",createStateVariable:"threshold",defaultValue:.3,public:!0},e}static returnChildLogic(t){let e=super.returnChildLogic(t),r=function({activeChildrenMatched:m}){let f=[];for(let d of m)f.push({createdComponent:!0,componentName:d.componentName});return{success:!0,newChildren:[{componentType:"angles",children:f}]}},a=e.newLeaf({name:"AtLeastOneAngle",componentType:"angle",comparison:"atLeast",number:1,isSugar:!0,replacementFunction:r}),s=e.newLeaf({name:"AtLeastOneString",componentType:"string",comparison:"atLeast",number:1}),o=e.newLeaf({name:"AtLeastOneMath",componentType:"math",comparison:"atLeast",number:1}),l=e.newOperator({name:"StringsAndMaths",operator:"or",propositions:[s,o],requireConsecutive:!0,isSugar:!0,replacementFunction:r}),u=e.newLeaf({name:"AtMostOneAngles",componentType:"angles",comparison:"atMost",number:1}),c=e.newOperator({name:"Angles",operator:"xor",propositions:[a,l,u],setAsBase:!0}),p=e.newLeaf({name:"AtMostOnePoint",componentType:"point",comparison:"atMost",number:1});return e.newOperator({name:"AnglesAndPoint",operator:"and",propositions:[c,p],setAsBase:!0}),e}updateState(t={}){if(super.updateState(t),!this.childLogicSatisfied){this.unresolvedState.angles=!0,this.unresolvedState.offset=!0;return}let e=this.currentTracker.trackChanges,r=e.childrenChanged(this.componentName);if(r){let a=this.childLogic.returnMatches("AtMostOneAngles");a.length===1?this.state.anglesChild=this.activeChildren[a[0]]:(delete this.state.anglesChild,this.state.angles=[],delete this.unresolvedState.angles);let s=this.childLogic.returnMatches("AtMostOnePoint");s.length===1?this.state.pointChild=this.activeChildren[s[0]]:(delete this.state.pointChild,this.state.offset=[0,0,0],delete this.unresolvedState.offset)}if(this.state.anglesChild){if(this.state.anglesChild.unresolvedState.angles){this.unresolvedState.angles=!0;return}(r||e.getVariableChanges({component:this.state.anglesChild,variable:"angles"}))&&(delete this.unresolvedState.angles,this.state.angles=this.state.anglesChild.state.angles)}if(this.state.pointChild){if(this.state.pointChild.unresolvedState.xs){this.unresolvedState.offset=!0;return}if(r||e.getVariableChanges({component:this.state.pointChild,variable:"xs"})){delete this.unresolvedState.offset,this.state.offset=[];for(let a=0;a<this.state.pointChild.state.ndimensions;a++){let s=this.state.pointChild.state.xs[a].evaluate_to_constant();if(!Number.isFinite(s)){this.state.offset=NaN;break}this.state.offset.push(s)}}}}applyTheConstraint({x1:t,x2:e,x3:r,offset:a}){if(this.unresolvedState.angles||this.unresolvedState.offset)return{};if(t===void 0||e===void 0||r!==void 0)return{};if(t=this.findFiniteNumericalValue(t),e=this.findFiniteNumericalValue(e),!Number.isFinite(t)||!Number.isFinite(e))return{};if(a===void 0&&(a=this.state.offset),Number.isNaN(a))return{};let s=t-a[0],o=e-a[1],l=Math.atan2(o,s),u=1/0,c,p;for(let[b,g]of this.state.angles.entries()){let v=g.state.angle.evaluate_to_constant();if(!Number.isFinite(v))continue;let C=Math.abs((v-l+Math.PI)%(2*Math.PI)-Math.PI);C<u&&(c=v,p=b,u=C)}if(c===void 0)return{};let m=Math.sqrt(s*s+o*o),f=a[0]+m*Math.cos(c),d=a[1]+m*Math.sin(c);return Math.sqrt(Math.pow(f-t,2)+Math.pow(d-e,2))>=this.state.threshold?{}:{variables:{x1:f,x2:d},constraintIndices:[p+1],constrained:!0}}};T(im,"componentType","attractToAngles");var pa=class extends Ee{static get stateVariablesShadowedForReference(){return["baseConditionSatisfied"]}static keepChildrenSerialized({serializedComponent:t}){if(t.children===void 0)return[];let e=[];for(let[r,a]of t.children.entries())["case","else"].includes(a.componentType)||a.attributes&&a.attributes.componentType&&["case","else"].includes(a.attributes.componentType.primitive)||e.push(r);return e}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.maximumNumberToShow={createComponentOfType:"number",createStateVariable:"maximumNumberToShow",defaultValue:null,public:!0},e.condition={createComponentOfType:"boolean"},e}static returnChildGroups(){return[{group:"cases",componentTypes:["case"]},{group:"elses",componentTypes:["else"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.baseConditionSatisfied={returnDependencies:()=>({conditionAttr:{dependencyType:"attributeComponent",attributeName:"condition",variableNames:["value"]}}),definition:function({dependencyValues:e}){let r=!0;return e.conditionAttr&&(r=e.conditionAttr.stateValues.value),{newValues:{baseConditionSatisfied:r}}}},t.nCases={additionalStateVariablesDefined:["caseChildren"],returnDependencies:()=>({caseChildren:{dependencyType:"child",childGroups:["cases"]}}),definition({dependencyValues:e}){return{newValues:{caseChildren:e.caseChildren,nCases:e.caseChildren.length}}}},t.elseChild={returnDependencies:()=>({elseChild:{dependencyType:"child",childGroups:["elses"]}}),definition({dependencyValues:e}){let r=null;return e.elseChild.length>0&&(r=e.elseChild[0]),{newValues:{elseChild:r}}}},t.haveCasesOrElse={returnDependencies:()=>({nCases:{dependencyType:"stateVariable",variableName:"nCases"},elseChild:{dependencyType:"stateVariable",variableName:"elseChild"}}),definition:({dependencyValues:e})=>({newValues:{haveCasesOrElse:e.nCases>0||e.elseChild!==null}})},t.selectedIndices={returnDependencies:()=>({caseChildren:{dependencyType:"child",childGroups:["cases"],variableNames:["conditionSatisfied"]},elseChild:{dependencyType:"stateVariable",variableName:"elseChild"},maximumNumberToShow:{dependencyType:"stateVariable",variableName:"maximumNumberToShow"}}),definition({dependencyValues:e}){let r=[];for(let[a,s]of e.caseChildren.entries())s.stateValues.conditionSatisfied&&r.push(a);if(r.length===0&&e.elseChild&&r.push(e.caseChildren.length),e.maximumNumberToShow!==null&&r.length>e.maximumNumberToShow){let a=Math.max(0,Math.floor(e.maximumNumberToShow));r=r.slice(0,a)}return{newValues:{selectedIndices:r}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({baseConditionSatisfied:{dependencyType:"stateVariable",variableName:"baseConditionSatisfied"},haveCasesOrElse:{dependencyType:"stateVariable",variableName:"haveCasesOrElse"},selectedIndices:{dependencyType:"stateVariable",variableName:"selectedIndices"}}),markStale:()=>({updateReplacements:!0}),definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,components:e,workspace:r,componentInfoObjects:a}){let s=this.getReplacements(t,e,a);return r.previousSelectedIndices=[...t.stateValues.selectedIndices],r.previousBaseConditionSatisfied=t.stateValues.baseConditionSatisfied,{replacements:s}}static getReplacements(t,e,r){if(!t.stateValues.baseConditionSatisfied)return[];let a=[];if(!t.stateValues.haveCasesOrElse)a=xe(t.serializedChildren);else for(let l of t.stateValues.selectedIndices){let u,c,p;l<t.stateValues.nCases?(u=t.stateValues.caseChildren[l].componentName,p=Ni("case",`${t.componentName}|replacement|${l}`),c="case"):(u=t.stateValues.elseChild.componentName,p=Ni("else",`${t.componentName}|replacement|${l}`),c="else");let m=u.lastIndexOf("/");p=u.substring(0,m)+"/"+p;let d=xe(e[u].state.serializedChildren.value),h={componentType:c,state:{rendered:!0},doenetAttributes:Object.assign({},e[u].doenetAttributes),children:d,originalName:p};e[u].attributes.newNamespace&&(h.attributes={newNamespace:{primitive:!0}}),a.push(h)}let s=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;return de({assignNames:t.doenetAttributes.assignNames,serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:s,componentInfoObjects:r,originalNamesAreConsistent:s||!t.doenetAttributes.assignNames}).serializedComponents}static calculateReplacementChanges({component:t,componentChanges:e,components:r,workspace:a,componentInfoObjects:s}){if(a.previousSelectedIndices.length===t.stateValues.selectedIndices.length&&a.previousSelectedIndices.every((c,p)=>c===t.stateValues.selectedIndices[p])){if(a.previousBaseConditionSatisfied===t.stateValues.baseConditionSatisfied)return[];if(t.stateValues.baseConditionSatisfied){if(t.replacements.length===t.serializedChildren.length){let c={changeType:"changeReplacementsToWithhold",replacementsToWithhold:0};return a.previousBaseConditionSatisfied=t.stateValues.baseConditionSatisfied,[c]}}else{let c=t.replacements.length,p={changeType:"changeReplacementsToWithhold",replacementsToWithhold:c};return a.previousBaseConditionSatisfied=t.stateValues.baseConditionSatisfied,[p]}}let o=[],l=this.getReplacements(t,r,s),u={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:t.replacements.length,serializedReplacements:l,replacementsToWithhold:0};return o.push(u),a.previousSelectedIndices=[...t.stateValues.selectedIndices],a.previousBaseConditionSatisfied=t.stateValues.baseConditionSatisfied,o}get allPotentialRendererTypes(){let t=super.allPotentialRendererTypes;if(this.serializedChildren){let e=this.potentialRendererTypesFromSerializedComponents(this.serializedChildren);for(let r of e)t.includes(r)||t.push(r)}return t}};T(pa,"componentType","conditionalContent"),T(pa,"includeBlankStringChildren",!0),T(pa,"assignNamesToReplacements",!0),T(pa,"originalNamesAreConsistent",!0),T(pa,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");var yu=class extends re{static returnChildGroups(){return[{group:"inline",componentTypes:["_inline"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.text={public:!0,componentType:"text",returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["inline"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r=[];for(let s of e.inlineChildren)typeof s.stateValues.text=="string"?r.push(s.stateValues.text):r.push("");return{newValues:{text:r.join(", ")}}}},t}};T(yu,"componentType","asList"),T(yu,"renderChildren",!0);function ye(i){if(i!==null&&i!==""){if(Number.isFinite(Number(i)))return Number(i)-1;if(typeof i=="string")return xz(i)}}function xz(i){i=i.toUpperCase();let t=0,e=i.length,r=e;for(;(r-=1)>-1;){let a=i.charCodeAt(r)-64;if(a<1||a>26){console.warn("Cannot convert "+i+" to a number");return}t+=a*Math.pow(26,e-1-r)}return t--,t}import Qye from"math-expressions";var ZG=ce(),JG=De(),QG=Hr(),HR=ym(),eq=OT(),tq=JG(function(){HR(1)});ZG({target:"Object",stat:!0,forced:tq,sham:!eq},{getPrototypeOf:function(t){return HR(QG(t))}});var aq=ce(),sq=De(),oq=wh().f,lq=sq(function(){return!Object.getOwnPropertyNames(1)});aq({target:"Object",stat:!0,forced:lq},{getOwnPropertyNames:oq});"use strict";var wq=ce(),xq=fa().f,Eq=So(),eV=Pr(),Rq=Vh(),Vq=Mn(),Iq=Ih(),Oq=No(),tV="".startsWith,Dq=Math.min,rV=Iq("startsWith"),Pq=!Oq&&!rV&&!!function(){var i=xq(String.prototype,"startsWith");return i&&!i.writable}();wq({target:"String",proto:!0,forced:!Pq&&!rV},{startsWith:function(t){var e=eV(Vq(this));Rq(t);var r=Eq(Dq(arguments.length>1?arguments[1]:void 0,e.length)),a=eV(t);return tV?tV.call(e,a,r):e.slice(r,r+a.length)===a}});var oW=ce(),lW=ma(),CV=PT(),uW=Ut(),SV=Mt(),cW=ds(),pW=NV(),AV=De(),jT=lW("Reflect","construct"),wV=AV(function(){function i(){}return!(jT(function(){},[],i)instanceof i)}),xV=!AV(function(){jT(function(){})}),EV=wV||xV;oW({target:"Reflect",stat:!0,forced:EV,sham:EV},{construct:function(t,e){CV(t),uW(e);var r=arguments.length<3?t:CV(arguments[2]);if(xV&&!wV)return jT(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var a=[null];return a.push.apply(a,e),new(pW.apply(t,a))}var s=r.prototype,o=cW(SV(s)?s:Object.prototype),l=Function.apply.call(t,o,e);return SV(l)?l:o}});"use strict";var TW=ce(),OV=xu(),NW=vm(),CW=Mt(),DV=Au(),SW=ri(),AW=ti(),wW=Tm(),xW=st(),EW=Eu(),RW=EW("slice"),VW=xW("species"),IW=[].slice,OW=Math.max;TW({target:"Array",proto:!0,forced:!RW},{slice:function(t,e){var r=AW(this),a=SW(r),s=DV(t,a),o=DV(e===void 0?a:e,a),l,u,c;if(OV(r)&&(l=r.constructor,NW(l)&&(l===Array||OV(l.prototype))?l=void 0:CW(l)&&(l=l[VW],l===null&&(l=void 0)),l===Array||l===void 0))return IW.call(r,s,o);for(u=new(l===void 0?Array:l)(OW(o-s,0)),c=0;s<o;s++,c++)s in r&&wW(u,c,r[s]);return u.length=c,u}});var _W=xh(),kW=jn(),FW=_V();_W||kW(Object.prototype,"toString",FW,{unsafe:!0});var MW=Tr(),jW=Su().EXISTS,BW=Dr().f,kV=Function.prototype,LW=kV.toString,UW=/^\s*function ([^ (]*)/,zW="name";MW&&!jW&&BW(kV,zW,{configurable:!0,get:function(){try{return LW.call(this).match(UW)[1]}catch(i){return""}}});var f$=ce(),d$=KV(),h$=HT(),y$=!h$(function(i){Array.from(i)});f$({target:"Array",stat:!0,forced:y$},{from:d$});"use strict";var $$=_h().charAt,K$=Pr(),N7=ji(),X$=Mh(),C7="String Iterator",Y$=N7.set,Z$=N7.getterFor(C7);X$(String,"String",function(i){Y$(this,{type:C7,string:K$(i),index:0})},function(){var t=Z$(this),e=t.string,r=t.index,a;return r>=e.length?{value:void 0,done:!0}:(a=$$(e,r),t.index+=a.length,{value:a,done:!1})});"use strict";var Vu=ce(),_7=at(),fK=ma(),dK=No(),Iu=Tr(),wo=yh(),JT=De(),zt=ir(),hK=xu(),yK=Rt(),bK=Mt(),QT=sm(),eN=Ut(),gK=Hr(),Bh=ti(),tN=pm(),k7=Pr(),rN=bu(),wm=ds(),F7=wu(),vK=Ao(),M7=wh(),nN=Ah(),j7=fa(),B7=Dr(),L7=am(),Lh=jn(),xm=om(),TK=mm(),U7=Cu(),z7=lm(),H7=st(),NK=YT(),CK=ZT(),SK=Cm(),G7=ji(),Uh=ys().forEach,an=TK("hidden"),zh="Symbol",ya="prototype",q7=H7("toPrimitive"),AK=G7.set,W7=G7.getterFor(zh),Bn=Object[ya],Nn=_7.Symbol,Em=fK("JSON","stringify"),$7=j7.f,bs=B7.f,K7=M7.f,wK=L7.f,ba=xm("symbols"),Rm=xm("op-symbols"),iN=xm("string-to-symbol-registry"),aN=xm("symbol-to-string-registry"),xK=xm("wks"),sN=_7.QObject,oN=!sN||!sN[ya]||!sN[ya].findChild,lN=Iu&&JT(function(){return wm(bs({},"a",{get:function(){return bs(this,"a",{value:7}).a}})).a!=7})?function(i,t,e){var r=$7(Bn,t);r&&delete Bn[t],bs(i,t,e),r&&i!==Bn&&bs(Bn,t,r)}:bs,uN=function(i,t){var e=ba[i]=wm(Nn[ya]);return AK(e,{type:zh,tag:i,description:t}),Iu||(e.description=t),e},Hh=function(t,e,r){t===Bn&&Hh(Rm,e,r),eN(t);var a=tN(e);return eN(r),zt(ba,a)?(r.enumerable?(zt(t,an)&&t[an][a]&&(t[an][a]=!1),r=wm(r,{enumerable:rN(0,!1)})):(zt(t,an)||bs(t,an,rN(1,{})),t[an][a]=!0),lN(t,a,r)):bs(t,a,r)},X7=function(t,e){eN(t);var r=Bh(e),a=F7(r).concat(pN(r));return Uh(a,function(s){(!Iu||cN.call(r,s))&&Hh(t,s,r[s])}),t},EK=function(t,e){return e===void 0?wm(t):X7(wm(t),e)},cN=function(t){var e=tN(t),r=wK.call(this,e);return this===Bn&&zt(ba,e)&&!zt(Rm,e)?!1:r||!zt(this,e)||!zt(ba,e)||zt(this,an)&&this[an][e]?r:!0},Y7=function(t,e){var r=Bh(t),a=tN(e);if(!(r===Bn&&zt(ba,a)&&!zt(Rm,a))){var s=$7(r,a);return s&&zt(ba,a)&&!(zt(r,an)&&r[an][a])&&(s.enumerable=!0),s}},Z7=function(t){var e=K7(Bh(t)),r=[];return Uh(e,function(a){!zt(ba,a)&&!zt(U7,a)&&r.push(a)}),r},pN=function(t){var e=t===Bn,r=K7(e?Rm:Bh(t)),a=[];return Uh(r,function(s){zt(ba,s)&&(!e||zt(Bn,s))&&a.push(ba[s])}),a};wo||(Nn=function(){if(this instanceof Nn)throw TypeError("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:k7(arguments[0]),e=z7(t),r=function(a){this===Bn&&r.call(Rm,a),zt(this,an)&&zt(this[an],e)&&(this[an][e]=!1),lN(this,e,rN(1,a))};return Iu&&oN&&lN(Bn,e,{configurable:!0,set:r}),uN(e,t)},Lh(Nn[ya],"toString",function(){return W7(this).tag}),Lh(Nn,"withoutSetter",function(i){return uN(z7(i),i)}),L7.f=cN,B7.f=Hh,j7.f=Y7,vK.f=M7.f=Z7,nN.f=pN,NK.f=function(i){return uN(H7(i),i)},Iu&&(bs(Nn[ya],"description",{configurable:!0,get:function(){return W7(this).description}}),dK||Lh(Bn,"propertyIsEnumerable",cN,{unsafe:!0})));Vu({global:!0,wrap:!0,forced:!wo,sham:!wo},{Symbol:Nn});Uh(F7(xK),function(i){CK(i)});Vu({target:zh,stat:!0,forced:!wo},{for:function(i){var t=k7(i);if(zt(iN,t))return iN[t];var e=Nn(t);return iN[t]=e,aN[e]=t,e},keyFor:function(t){if(!QT(t))throw TypeError(t+" is not a symbol");if(zt(aN,t))return aN[t]},useSetter:function(){oN=!0},useSimple:function(){oN=!1}});Vu({target:"Object",stat:!0,forced:!wo,sham:!Iu},{create:EK,defineProperty:Hh,defineProperties:X7,getOwnPropertyDescriptor:Y7});Vu({target:"Object",stat:!0,forced:!wo},{getOwnPropertyNames:Z7,getOwnPropertySymbols:pN});Vu({target:"Object",stat:!0,forced:JT(function(){nN.f(1)})},{getOwnPropertySymbols:function(t){return nN.f(gK(t))}});Em&&(J7=!wo||JT(function(){var i=Nn();return Em([i])!="[null]"||Em({a:i})!="{}"||Em(Object(i))!="{}"}),Vu({target:"JSON",stat:!0,forced:J7},{stringify:function(t,e,r){for(var a=[t],s=1,o;arguments.length>s;)a.push(arguments[s++]);if(o=e,!(!bK(e)&&t===void 0||QT(t)))return hK(e)||(e=function(l,u){if(yK(o)&&(u=o.call(this,l,u)),!QT(u))return u}),a[1]=e,Em.apply(null,a)}}));var J7;Nn[ya][q7]||(Q7=Nn[ya].valueOf,Lh(Nn[ya],q7,function(){return Q7.apply(this,arguments)}));var Q7;SK(Nn,zh);U7[an]=!0;"use strict";var RK=ce(),VK=Tr(),IK=at(),OK=ir(),DK=Rt(),PK=Mt(),_K=Dr().f,kK=VT(),ga=IK.Symbol;VK&&DK(ga)&&(!("description"in ga.prototype)||ga().description!==void 0)&&(mN={},Ou=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),e=this instanceof Ou?new ga(t):t===void 0?ga():ga(t);return t===""&&(mN[e]=!0),e},kK(Ou,ga),Gh=Ou.prototype=ga.prototype,Gh.constructor=Ou,e3=Gh.toString,t3=String(ga("test"))=="Symbol(test)",r3=/^Symbol\((.*)\)[^)]+$/,_K(Gh,"description",{configurable:!0,get:function(){var t=PK(this)?this.valueOf():this,e=e3.call(t);if(OK(mN,t))return"";var r=t3?e.slice(7,-1):e.replace(r3,"$1");return r===""?void 0:r}}),RK({global:!0,forced:!0},{Symbol:Ou}));var mN,Ou,Gh,e3,t3,r3;var FK=ZT();FK("iterator");var Xct=j(q());var p3=at(),m3=yN(),qK=gN(),Vm=q(),vN=da(),f3=st(),TN=f3("iterator"),d3=f3("toStringTag"),NN=Vm.values,h3=function(i,t){if(i){if(i[TN]!==NN)try{vN(i,TN,NN)}catch(r){i[TN]=NN}if(i[d3]||vN(i,d3,t),m3[t]){for(var e in Vm)if(i[e]!==Vm[e])try{vN(i,e,Vm[e])}catch(r){i[e]=Vm[e]}}}};for(qh in m3)h3(p3[qh]&&p3[qh].prototype,qh);var qh;h3(qK,"DOMTokenList");var ZK=ce(),T3=v3();ZK({target:"Object",stat:!0,forced:Object.assign!==T3},{assign:T3});"use strict";var JK=ce(),QK=De(),eX=xu(),tX=Mt(),rX=Hr(),nX=ri(),N3=Tm(),iX=jh(),aX=Eu(),sX=st(),oX=Tu(),C3=sX("isConcatSpreadable"),S3=9007199254740991,A3="Maximum allowed index exceeded",lX=oX>=51||!QK(function(){var i=[];return i[C3]=!1,i.concat()[0]!==i}),uX=aX("concat"),cX=function(i){if(!tX(i))return!1;var t=i[C3];return t!==void 0?!!t:eX(i)},pX=!lX||!uX;JK({target:"Array",proto:!0,forced:pX},{concat:function(t){var e=rX(this),r=iX(e,0),a=0,s,o,l,u,c;for(s=-1,l=arguments.length;s<l;s++)if(c=s===-1?e:arguments[s],cX(c)){if(u=nX(c),a+u>S3)throw TypeError(A3);for(o=0;o<u;o++,a++)o in c&&N3(r,a,c[o])}else{if(a>=S3)throw TypeError(A3);N3(r,a++,c)}return r.length=a,r}});var bje=j(q());var PFe=j(Nr());"use strict";var mX=ce(),fX=ys().map,dX=Eu(),hX=dX("map");mX({target:"Array",proto:!0,forced:!hX},{map:function(t){return fX(this,t,arguments.length>1?arguments[1]:void 0)}});var FFe=j(q());var jFe=j(gs());var Y3=at(),Z3=yN(),mY=gN(),DN=X3(),fY=da(),J3=function(i){if(i&&i.forEach!==DN)try{fY(i,"forEach",DN)}catch(t){i.forEach=DN}};for(Zh in Z3)Z3[Zh]&&J3(Y3[Zh]&&Y3[Zh].prototype);var Zh;J3(mY);"use strict";var dY=ce(),hY=ys().filter,yY=Eu(),bY=yY("filter");dY({target:"Array",proto:!0,forced:!bY},{filter:function(t){return hY(this,t,arguments.length>1?arguments[1]:void 0)}});var R8e=j(Nr());var TY=ce(),NY=e4();TY({target:"Number",stat:!0},{isFinite:NY});"use strict";var RY=Tr(),i4=at(),VY=hm(),IY=jn(),a4=ir(),OY=Kh(),DY=sm(),s4=yT(),PY=De(),_Y=Ao().f,kY=fa().f,FY=Dr().f,MY=PN(),jY=FN().trim,MN="Number",vs=i4[MN],o4=vs.prototype,BY=function(i){var t=s4(i,"number");return typeof t=="bigint"?t:LY(t)},LY=function(i){var t=s4(i,"number"),e,r,a,s,o,l,u,c;if(DY(t))throw TypeError("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=jY(t),e=t.charCodeAt(0),e===43||e===45){if(r=t.charCodeAt(2),r===88||r===120)return NaN}else if(e===48){switch(t.charCodeAt(1)){case 66:case 98:a=2,s=49;break;case 79:case 111:a=8,s=55;break;default:return+t}for(o=t.slice(2),l=o.length,u=0;u<l;u++)if(c=o.charCodeAt(u),c<48||c>s)return NaN;return parseInt(o,a)}}return+t};if(VY(MN,!vs(" 0o1")||!vs("0b1")||vs("+0x1"))){for(Ts=function(t){var e=arguments.length<1?0:vs(BY(t)),r=this;return r instanceof Ts&&PY(function(){MY(r)})?OY(Object(e),r,Ts):e},jN=RY?_Y(vs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Qh=0;jN.length>Qh;Qh++)a4(vs,_m=jN[Qh])&&!a4(Ts,_m)&&FY(Ts,_m,kY(vs,_m));Ts.prototype=o4,o4.constructor=Ts,IY(i4,MN,Ts)}var Ts,jN,Qh,_m;var F8e=j(q());"use strict";var zY=Su().PROPER,HY=jn(),GY=Ut(),u4=Pr(),qY=De(),WY=ey(),BN="toString",c4=RegExp.prototype,p4=c4[BN],$Y=qY(function(){return p4.call({source:"a",flags:"b"})!="/a/b"}),KY=zY&&p4.name!=BN;($Y||KY)&&HY(RegExp.prototype,BN,function(){var t=GY(this),e=u4(t.source),r=t.flags,a=u4(r===void 0&&t instanceof RegExp&&!("flags"in c4)?WY.call(t):r);return"/"+e+"/"+a},{unsafe:!0});var rZ=Tr(),y4=at(),nZ=hm(),iZ=Kh(),aZ=da(),sZ=Dr().f,oZ=Ao().f,lZ=Rh(),b4=Pr(),uZ=ey(),cZ=ty(),pZ=jn(),mZ=De(),fZ=ir(),dZ=ji().enforce,hZ=VN(),yZ=st(),g4=UN(),v4=zN(),bZ=yZ("match"),Ta=y4.RegExp,HN=Ta.prototype,gZ=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,xo=/a/g,GN=/a/g,vZ=new Ta(xo)!==xo,T4=cZ.UNSUPPORTED_Y,TZ=rZ&&(!vZ||T4||g4||v4||mZ(function(){return GN[bZ]=!1,Ta(xo)!=xo||Ta(GN)==GN||Ta(xo,"i")!="/a/i"})),NZ=function(i){for(var t=i.length,e=0,r="",a=!1,s;e<=t;e++){if(s=i.charAt(e),s==="\\"){r+=s+i.charAt(++e);continue}!a&&s==="."?r+="[\\s\\S]":(s==="["?a=!0:s==="]"&&(a=!1),r+=s)}return r},CZ=function(i){for(var t=i.length,e=0,r="",a=[],s={},o=!1,l=!1,u=0,c="",p;e<=t;e++){if(p=i.charAt(e),p==="\\")p=p+i.charAt(++e);else if(p==="]")o=!1;else if(!o)switch(!0){case p==="[":o=!0;break;case p==="(":gZ.test(i.slice(e+1))&&(e+=2,l=!0),r+=p,u++;continue;case(p===">"&&l):if(c===""||fZ(s,c))throw new SyntaxError("Invalid capture group name");s[c]=!0,a.push([c,u]),l=!1,c="";continue}l?c+=p:r+=p}return[r,a]};if(nZ("RegExp",TZ)){for(ni=function(t,e){var r=this instanceof ni,a=lZ(t),s=e===void 0,o=[],l=t,u,c,p,m,f,d;if(!r&&a&&s&&t.constructor===ni)return t;if((a||t instanceof ni)&&(t=t.source,s&&(e="flags"in l?l.flags:uZ.call(l))),t=t===void 0?"":b4(t),e=e===void 0?"":b4(e),l=t,g4&&"dotAll"in xo&&(c=!!e&&e.indexOf("s")>-1,c&&(e=e.replace(/s/g,""))),u=e,T4&&"sticky"in xo&&(p=!!e&&e.indexOf("y")>-1,p&&(e=e.replace(/y/g,""))),v4&&(m=CZ(t),t=m[0],o=m[1]),f=iZ(Ta(t,e),r?this:HN,ni),(c||p||o.length)&&(d=dZ(f),c&&(d.dotAll=!0,d.raw=ni(NZ(t),u)),p&&(d.sticky=!0),o.length&&(d.groups=o)),t!==l)try{aZ(f,"source",l===""?"(?:)":l)}catch(h){}return f},N4=function(i){i in ni||sZ(ni,i,{configurable:!0,get:function(){return Ta[i]},set:function(t){Ta[i]=t}})},qN=oZ(Ta),WN=0;qN.length>WN;)N4(qN[WN++]);HN.constructor=ni,ni.prototype=HN,pZ(y4,"RegExp",ni)}var ni,N4,qN,WN;hZ("RegExp");var TRe=j(ar());var SRe=j(q()),ARe=j(Vt());function E4(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function R4(i,t,e){return t&&E4(i.prototype,t),e&&E4(i,e),i}function Fm(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Fm=function(e){return typeof e}:Fm=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fm(i)}function je(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&Mm(i,t)}function Le(i){var t=V4();return function(){var r=jm(i),a;if(t){var s=jm(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return kZ(this,a)}}function kZ(i,t){if(t&&(Fm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FZ(i)}function FZ(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _e(i){var t=typeof Map=="function"?new Map:void 0;return _e=function(r){if(r===null||!MZ(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return ny(r,arguments,jm(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Mm(a,r)},_e(i)}function ny(i,t,e){return V4()?ny=Reflect.construct:ny=function(a,s,o){var l=[null];l.push.apply(l,s);var u=Function.bind.apply(a,l),c=new u;return o&&Mm(c,o.prototype),c},ny.apply(null,arguments)}function V4(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function MZ(i){return Function.toString.call(i).indexOf("[native code]")!==-1}function Mm(i,t){return Mm=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Mm(i,t)}function jm(i){return jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jm(i)}var $e=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"There's no sheet with id = ".concat(r))}return e}(_e(Error)),iy=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"There's no sheet with name '".concat(r,"'"))}return e}(_e(Error)),Ns=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Sheet with name ".concat(r," already exists"))}return e}(_e(Error)),Ln=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Sheet size limit exceeded")}return e}(_e(Error)),Bm=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"This is not a formula")}return e}(_e(Error)),ay=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Address (row = ".concat(r.row,", col = ").concat(r.col,") is invalid"))}return e}(_e(Error)),ot=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Invalid arguments, expected ".concat(r))}return e}(_e(Error)),Cs=function(i){Be(e,i);var t=Le(e);function e(r,a){return je(this,e),t.call(this,"Sheets ".concat(r," and ").concat(a," are not equal."))}return e}(_e(Error)),sy=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Name of Named Expression '".concat(r,"' is already present"))}return e}(_e(Error)),oy=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Name of Named Expression '".concat(r,"' is invalid"))}return e}(_e(Error)),Ss=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Named Expression '".concat(r,"' does not exist"))}return e}(_e(Error)),ly=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"There is no operation to undo")}return e}(_e(Error)),uy=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"There is no operation to redo")}return e}(_e(Error)),cy=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"There is nothing to paste")}return e}(_e(Error));function jZ(i,t){switch(Fm(t)){case"function":case"symbol":return t.toString();case"bigint":return"BigInt("+t.toString()+")";default:return t instanceof RegExp?"RegExp("+t.toString()+")":t}}var py=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Unable to parse value: ".concat(JSON.stringify(r,jZ,4)))}return e}(_e(Error)),Re=function(i){Be(e,i);var t=Le(e);function e(r,a){return je(this,e),t.call(this,"Expected value of type: ".concat(r," for config parameter: ").concat(a))}return e}(_e(Error)),I4=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Config parameter ".concat(r," cannot be empty."))}return e}(_e(Error)),my=function(i){Be(e,i);var t=Le(e);function e(r,a){return je(this,e),t.call(this,"Config parameter ".concat(r," should be at least ").concat(a))}return e}(_e(Error)),fy=function(i){Be(e,i);var t=Le(e);function e(r,a){return je(this,e),t.call(this,"Config parameter ".concat(r," should be at most ").concat(a))}return e}(_e(Error)),dy=function(i){Be(e,i);var t=Le(e);function e(r,a){return je(this,e),t.call(this,"Expected one of ".concat(r," for config parameter: ").concat(a))}return e}(_e(Error)),hy=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Computations are suspended")}return e}(_e(Error)),As=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Translation for ".concat(r," is missing in the translation package you're using."))}return e}(_e(Error)),yy=function(i){Be(e,i);var t=Le(e);function e(r){return je(this,e),t.call(this,"Cannot register translation for function with id: ".concat(r))}return e}(_e(Error)),Lm=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Language not registered.")}return e}(_e(Error)),by=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Language already registered.")}return e}(_e(Error)),Um=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.apply(this,arguments)}return R4(e,null,[{key:"functionNotDeclaredInPlugin",value:function(a,s){return new e("Function with id ".concat(a," not declared in plugin ").concat(s))}},{key:"functionMethodNotFound",value:function(a,s){return new e("Function method ".concat(a," not found in plugin ").concat(s))}}]),e}(_e(Error)),gy=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.apply(this,arguments)}return R4(e,null,[{key:"cannotRegisterFunctionWithId",value:function(a){return new e("Cannot register function with id ".concat(a))}},{key:"cannotUnregisterFunctionWithId",value:function(a){return new e("Cannot unregister function with id ".concat(a))}},{key:"cannotUnregisterProtectedPlugin",value:function(){return new e("Cannot unregister protected plugin")}}]),e}(_e(Error)),Na=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Cannot perform this operation, source location has an array inside.")}return e}(_e(Error)),Eo=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Cannot perform this operation, target location has an array inside.")}return e}(_e(Error)),_u=function(i){Be(e,i);var t=Le(e);function e(){return je(this,e),t.call(this,"Relative addresses not allowed in named expressions.")}return e}(_e(Error)),O4=function(i){Be(e,i);var t=Le(e);function e(r,a){return je(this,e),t.call(this,"Alias id ".concat(r," in plugin ").concat(a," already defined as a function or alias."))}return e}(_e(Error));var sIe=j(ar());"use strict";var YZ=ZN(),ZZ=Rh(),JZ=Ut(),U4=Mn(),QZ=j4(),eJ=JN(),tJ=So(),eC=Pr(),rJ=Nu(),z4=QN(),nJ=km(),iJ=ty(),aJ=De(),ku=iJ.UNSUPPORTED_Y,sJ=[].push,oJ=Math.min,H4=4294967295,lJ=!aJ(function(){var i=/(?:)/,t=i.exec;i.exec=function(){return t.apply(this,arguments)};var e="ab".split(i);return e.length!==2||e[0]!=="a"||e[1]!=="b"});YZ("split",function(i,t,e){var r;return"abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?r=function(a,s){var o=eC(U4(this)),l=s===void 0?H4:s>>>0;if(l===0)return[];if(a===void 0)return[o];if(!ZZ(a))return t.call(o,a,l);for(var u=[],c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(a.sticky?"y":""),p=0,m=new RegExp(a.source,c+"g"),f,d,h;(f=nJ.call(m,o))&&(d=m.lastIndex,!(d>p&&(u.push(o.slice(p,f.index)),f.length>1&&f.index<o.length&&sJ.apply(u,f.slice(1)),h=f[0].length,p=d,u.length>=l)));)m.lastIndex===f.index&&m.lastIndex++;return p===o.length?(h||!m.test(""))&&u.push(""):u.push(o.slice(p)),u.length>l?u.slice(0,l):u}:"0".split(void 0,0).length?r=function(a,s){return a===void 0&&s===0?[]:t.call(this,a,s)}:r=t,[function(s,o){var l=U4(this),u=s==null?void 0:rJ(s,i);return u?u.call(s,l,o):r.call(eC(l),s,o)},function(a,s){var o=JZ(this),l=eC(a),u=e(r,o,l,s,r!==t);if(u.done)return u.value;var c=QZ(o,RegExp),p=o.unicode,m=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(ku?"g":"y"),f=new c(ku?"^(?:"+o.source+")":o,m),d=s===void 0?H4:s>>>0;if(d===0)return[];if(l.length===0)return z4(f,l)===null?[l]:[];for(var h=0,y=0,b=[];y<l.length;){f.lastIndex=ku?0:y;var g=z4(f,ku?l.slice(y):l),v;if(g===null||(v=oJ(tJ(f.lastIndex+(ku?y:0)),l.length))===h)y=eJ(l,y,p);else{if(b.push(l.slice(h,y)),b.length===d)return b;for(var C=1;C<=g.length-1;C++)if(b.push(g[C]),b.length===d)return b;y=h=v}}return b.push(l.slice(h)),b}]},!lJ,ku);"use strict";var hJ=ce(),yJ=W4().left,bJ=Pm(),X4=Tu(),gJ=K4(),vJ=bJ("reduce"),TJ=!gJ&&X4>79&&X4<83;hJ({target:"Array",proto:!0,forced:!vJ||TJ},{reduce:function(t){return yJ(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});"use strict";var xJ=ZN(),EJ=De(),RJ=Ut(),VJ=Rt(),IJ=fs(),OJ=So(),Fu=Pr(),DJ=Mn(),PJ=JN(),_J=Nu(),kJ=Z4(),FJ=QN(),MJ=st(),tC=MJ("replace"),jJ=Math.max,BJ=Math.min,LJ=function(i){return i===void 0?i:String(i)},UJ=function(){return"a".replace(/./,"$0")==="$0"}(),J4=function(){return/./[tC]?/./[tC]("a","$0")==="":!1}(),zJ=!EJ(function(){var i=/./;return i.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(i,"$<a>")!=="7"});xJ("replace",function(i,t,e){var r=J4?"$":"$0";return[function(s,o){var l=DJ(this),u=s==null?void 0:_J(s,tC);return u?u.call(s,l,o):t.call(Fu(l),s,o)},function(a,s){var o=RJ(this),l=Fu(a);if(typeof s=="string"&&s.indexOf(r)===-1&&s.indexOf("$<")===-1){var u=e(t,o,l,s);if(u.done)return u.value}var c=VJ(s);c||(s=Fu(s));var p=o.global;if(p){var m=o.unicode;o.lastIndex=0}for(var f=[];;){var d=FJ(o,l);if(d===null||(f.push(d),!p))break;var h=Fu(d[0]);h===""&&(o.lastIndex=PJ(l,OJ(o.lastIndex),m))}for(var y="",b=0,g=0;g<f.length;g++){d=f[g];for(var v=Fu(d[0]),C=jJ(BJ(IJ(d.index),l.length),0),w=[],S=1;S<d.length;S++)w.push(LJ(d[S]));var A=d.groups;if(c){var E=[v].concat(w,C,l);A!==void 0&&E.push(A);var I=Fu(s.apply(void 0,E))}else I=kJ(v,l,C,w,A,s);C>=b&&(y+=l.slice(b,C)+I,b=C+v.length)}return y+l.slice(b)}]},!zJ||!UJ||J4);var bIe=j(q());function HJ(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Q4(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function GJ(i,t,e){return t&&Q4(i.prototype,t),e&&Q4(i,e),i}var Ue;(function(i){i.CELL_REFERENCE_RELATIVE="CELL_REFERENCE",i.CELL_REFERENCE_ABSOLUTE="CELL_REFERENCE_ABSOLUTE",i.CELL_REFERENCE_ABSOLUTE_COL="CELL_REFERENCE_ABSOLUTE_COL",i.CELL_REFERENCE_ABSOLUTE_ROW="CELL_REFERENCE_ABSOLUTE_ROW"})(Ue||(Ue={}));var _r=function(){function i(t,e,r,a){HJ(this,i),this.col=t,this.row=e,this.type=r,this.sheet=a}return GJ(i,[{key:"toSimpleCellAddress",value:function(e){var r=sr(this,e);return this.type===Ue.CELL_REFERENCE_ABSOLUTE?$(r,this.col,this.row):this.type===Ue.CELL_REFERENCE_ABSOLUTE_ROW?$(r,e.col+this.col,this.row):this.type===Ue.CELL_REFERENCE_ABSOLUTE_COL?$(r,this.col,e.row+this.row):$(r,e.col+this.col,e.row+this.row)}},{key:"toSimpleColumnAddress",value:function(e){var r=sr(this,e),a=this.col;return this.isColumnRelative()&&(a+=e.col),Ty(r,a)}},{key:"toSimpleRowAddress",value:function(e){var r=sr(this,e),a=this.row;return this.isRowRelative()&&(a+=e.row),vy(r,a)}},{key:"isRowAbsolute",value:function(){return this.type===Ue.CELL_REFERENCE_ABSOLUTE||this.type===Ue.CELL_REFERENCE_ABSOLUTE_ROW}},{key:"isColumnAbsolute",value:function(){return this.type===Ue.CELL_REFERENCE_ABSOLUTE||this.type===Ue.CELL_REFERENCE_ABSOLUTE_COL}},{key:"isColumnRelative",value:function(){return this.type===Ue.CELL_REFERENCE_RELATIVE||this.type===Ue.CELL_REFERENCE_ABSOLUTE_ROW}},{key:"isRowRelative",value:function(){return this.type===Ue.CELL_REFERENCE_RELATIVE||this.type===Ue.CELL_REFERENCE_ABSOLUTE_COL}},{key:"isAbsolute",value:function(){return this.type===Ue.CELL_REFERENCE_ABSOLUTE&&this.sheet!==void 0}},{key:"shiftedByRows",value:function(e){return new i(this.col,this.row+e,this.type,this.sheet)}},{key:"shiftedByColumns",value:function(e){return new i(this.col+e,this.row,this.type,this.sheet)}},{key:"moved",value:function(e,r,a){var s=this.sheet===void 0?void 0:e;return new i(this.col+r,this.row+a,this.type,s)}},{key:"withAbsoluteSheet",value:function(e){return new i(this.col,this.row,this.type,e)}},{key:"isInvalid",value:function(e){return Ht(this.toSimpleCellAddress(e))}},{key:"shiftRelativeDimensions",value:function(e,r){var a=this.isColumnAbsolute()?this.col:this.col+e,s=this.isRowAbsolute()?this.row:this.row+r;return new i(a,s,this.type,this.sheet)}},{key:"shiftAbsoluteDimensions",value:function(e,r){var a=this.isColumnRelative()?this.col:this.col+e,s=this.isRowRelative()?this.row:this.row+r;return new i(a,s,this.type,this.sheet)}},{key:"hash",value:function(e){var r=e&&this.sheet!==void 0?"#".concat(this.sheet):"";switch(this.type){case Ue.CELL_REFERENCE_RELATIVE:return"".concat(r,"#").concat(this.row,"R").concat(this.col);case Ue.CELL_REFERENCE_ABSOLUTE:return"".concat(r,"#").concat(this.row,"A").concat(this.col);case Ue.CELL_REFERENCE_ABSOLUTE_COL:return"".concat(r,"#").concat(this.row,"AC").concat(this.col);case Ue.CELL_REFERENCE_ABSOLUTE_ROW:return"".concat(r,"#").concat(this.row,"AR").concat(this.col)}}},{key:"unparse",value:function(e){var r=this.toSimpleCellAddress(e);if(!Ht(r)){var a=zm(r.col),s=this.type===Ue.CELL_REFERENCE_ABSOLUTE||this.type===Ue.CELL_REFERENCE_ABSOLUTE_ROW?"$":"",o=this.type===Ue.CELL_REFERENCE_ABSOLUTE||this.type===Ue.CELL_REFERENCE_ABSOLUTE_COL?"$":"";return"".concat(o).concat(a).concat(s).concat(r.row+1)}}},{key:"exceedsSheetSizeLimits",value:function(e,r){return this.row>=r||this.col>=e}}],[{key:"relative",value:function(e,r,a){return new i(r,e,Ue.CELL_REFERENCE_RELATIVE,a)}},{key:"absolute",value:function(e,r,a){return new i(e,r,Ue.CELL_REFERENCE_ABSOLUTE,a)}},{key:"absoluteCol",value:function(e,r,a){return new i(e,r,Ue.CELL_REFERENCE_ABSOLUTE_COL,a)}},{key:"absoluteRow",value:function(e,r,a){return new i(e,r,Ue.CELL_REFERENCE_ABSOLUTE_ROW,a)}}]),i}();function qJ(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function eI(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function WJ(i,t,e){return t&&eI(i.prototype,t),e&&eI(i,e),i}var er;(function(i){i.RELATIVE="RELATIVE",i.ABSOLUTE="ABSOLUTE"})(er||(er={}));var rC=function(){function i(t,e,r){qJ(this,i),this.type=t,this.col=e,this.sheet=r}return WJ(i,[{key:"isColumnAbsolute",value:function(){return this.type===er.ABSOLUTE}},{key:"isColumnRelative",value:function(){return this.type===er.RELATIVE}},{key:"isAbsolute",value:function(){return this.type===er.ABSOLUTE&&this.sheet!==void 0}},{key:"moved",value:function(e,r,a){var s=this.sheet===void 0?void 0:e;return new i(this.type,this.col+r,s)}},{key:"shiftedByColumns",value:function(e){return new i(this.type,this.col+e,this.sheet)}},{key:"toSimpleColumnAddress",value:function(e){var r=sr(this,e),a=this.col;return this.isColumnRelative()&&(a=e.col+this.col),Ty(r,a)}},{key:"shiftRelativeDimensions",value:function(e,r){var a=this.isColumnRelative()?this.col+e:this.col;return new i(this.type,a,this.sheet)}},{key:"shiftAbsoluteDimensions",value:function(e,r){var a=this.isColumnAbsolute()?this.col+e:this.col;return new i(this.type,a,this.sheet)}},{key:"withAbsoluteSheet",value:function(e){return new i(this.type,this.col,e)}},{key:"isInvalid",value:function(e){return this.toSimpleColumnAddress(e).col<0}},{key:"hash",value:function(e){var r=e&&this.sheet!==void 0?"#".concat(this.sheet):"";switch(this.type){case er.RELATIVE:return"".concat(r,"#COLR").concat(this.col);case er.ABSOLUTE:return"".concat(r,"#COLA").concat(this.col)}}},{key:"unparse",value:function(e){var r=this.toSimpleColumnAddress(e);if(!tI(r)){var a=zm(r.col),s=this.type===er.ABSOLUTE?"$":"";return"".concat(s).concat(a)}}},{key:"exceedsSheetSizeLimits",value:function(e){return this.col>=e}}],[{key:"absolute",value:function(e,r){return new i(er.ABSOLUTE,e,r)}},{key:"relative",value:function(e,r){return new i(er.RELATIVE,e,r)}}]),i}();var L4e=j(ar());var $4e=j(q());tb();function dee(i){return gee(i)||bee(i)||yee(i)||hee()}function hee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yee(i,t){if(!!i){if(typeof i=="string")return LC(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return LC(i,t)}}function bee(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function gee(i){if(Array.isArray(i))return LC(i)}function LC(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}var Xu=":",Ar="$",Yu=Ae({name:"AdditionOp",pattern:$t.NA}),rb=Ae({name:"PlusOp",pattern:/\+/,categories:Yu}),nb=Ae({name:"MinusOp",pattern:/-/,categories:Yu}),af=Ae({name:"MultiplicationOp",pattern:$t.NA}),UC=Ae({name:"TimesOp",pattern:/\*/,categories:af}),zC=Ae({name:"DivOp",pattern:/\//,categories:af}),ib=Ae({name:"PowerOp",pattern:/\^/}),HC=Ae({name:"PercentOp",pattern:/%/}),Va=Ae({name:"BooleanOp",pattern:$t.NA}),ab=Ae({name:"EqualsOp",pattern:/=/,categories:Va}),GC=Ae({name:"NotEqualOp",pattern:/<>/,categories:Va}),qC=Ae({name:"GreaterThanOp",pattern:/>/,categories:Va}),WC=Ae({name:"LessThanOp",pattern:/</,categories:Va}),$C=Ae({name:"GreaterThanOrEqualOp",pattern:/>=/,categories:Va}),KC=Ae({name:"LessThanOrEqualOp",pattern:/<=/,categories:Va}),XC=Ae({name:"ConcatenateOp",pattern:/&/}),YC="[A-Za-z0-9_\xC0-\u02AF]+",vee="'(((?!').|'')*)'",Ia="(".concat(YC,"|").concat(vee,")!"),Hi=Ae({name:"CellReference",pattern:new RegExp("(".concat(Ia,")?\\").concat(Ar,"?[A-Za-z]+\\").concat(Ar,"?[0-9]+"))}),sf=Ae({name:"ColumnRange",pattern:new RegExp("(".concat(Ia,")?\\").concat(Ar,"?[A-Za-z]+").concat(Xu,"(").concat(Ia,")?\\").concat(Ar,"?[A-Za-z]+"))}),of=Ae({name:"RowRange",pattern:new RegExp("(".concat(Ia,")?\\").concat(Ar,"?[0-9]+").concat(Xu,"(").concat(Ia,")?\\").concat(Ar,"?[0-9]+"))}),Zu=Ae({name:"RangeSeparator",pattern:"".concat(Xu)}),sb=Ae({name:"LParen",pattern:/\(/}),lf=Ae({name:"RParen",pattern:/\)/}),ZC=Ae({name:"ArrayLParen",pattern:/{/}),JC=Ae({name:"ArrayRParen",pattern:/}/}),uf=Ae({name:"ProcedureName",pattern:/([A-Za-z\u00C0-\u02AF][A-Za-z0-9\u00C0-\u02AF._]*)\(/}),QC=Ae({name:"NamedExpression",pattern:/[A-Za-z\u00C0-\u02AF_][A-Za-z0-9\u00C0-\u02AF._]*/}),e6=Ae({name:"StringLiteral",pattern:/"([^"\\]*(\\.[^"\\]*)*)"/}),t6=Ae({name:"ErrorLiteral",pattern:/#[A-Za-z0-9\/]+[?!]?/}),Oa=Ae({name:"WhiteSpace",pattern:/[ \t\n\r]+/}),Bo=function(t){var e=t.translationPackage.getFunctionTranslation("OFFSET"),r=t.errorMapping,a=t.translationPackage.buildFunctionMapping(),s=Ae({name:"ArrayRowSep",pattern:t.arrayRowSeparator}),o=Ae({name:"ArrayColSep",pattern:t.arrayColumnSeparator}),l,u;t.functionArgSeparator===t.arrayColumnSeparator?(l=o,u=[]):t.functionArgSeparator===t.arrayRowSeparator?(l=s,u=[]):(l=Ae({name:"ArgSeparator",pattern:t.functionArgSeparator}),u=[l]);var c=Ae({name:"NumberLiteral",pattern:new RegExp("(([".concat(t.decimalSeparator,"]\\d+)|(\\d+([").concat(t.decimalSeparator,"]\\d*)?))(e[+-]?\\d+)?"))}),p=Ae({name:"OffsetProcedureName",pattern:new RegExp(e,"i")}),m=[Oa,rb,nb,UC,zC,ib,ab,GC,HC,$C,KC,qC,WC,sb,lf,ZC,JC,p,uf,Zu].concat(dee(u),[sf,of,c,e6,t6,XC,Va,Yu,af,Hi,QC,s,o]);return{ArgSeparator:l,NumberLiteral:c,OffsetProcedureName:p,ArrayRowSeparator:s,ArrayColSeparator:o,allTokens:m,errorMapping:r,functionMapping:a,decimalSeparator:t.decimalSeparator,maxColumns:t.maxColumns,maxRows:t.maxRows}};function Tee(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function e8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Nee(i,t,e){return t&&e8(i.prototype,t),e&&e8(i,e),i}var cf=function(){function i(t,e,r){Tee(this,i),this.type=t,this.row=e,this.sheet=r}return Nee(i,[{key:"isRowAbsolute",value:function(){return this.type===er.ABSOLUTE}},{key:"isRowRelative",value:function(){return this.type===er.RELATIVE}},{key:"isAbsolute",value:function(){return this.type===er.ABSOLUTE&&this.sheet!==void 0}},{key:"moved",value:function(e,r,a){var s=this.sheet===void 0?void 0:e;return new i(this.type,this.row+a,s)}},{key:"shiftedByRows",value:function(e){return new i(this.type,this.row+e,this.sheet)}},{key:"toSimpleRowAddress",value:function(e){var r=sr(this,e),a=this.row;return this.isRowRelative()&&(a=e.row+this.row),vy(r,a)}},{key:"shiftRelativeDimensions",value:function(e,r){var a=this.isRowRelative()?this.row+r:this.row;return new i(this.type,a,this.sheet)}},{key:"shiftAbsoluteDimensions",value:function(e,r){var a=this.isRowAbsolute()?this.row+r:this.row;return new i(this.type,a,this.sheet)}},{key:"withAbsoluteSheet",value:function(e){return new i(this.type,this.row,e)}},{key:"isInvalid",value:function(e){return this.toSimpleRowAddress(e).row<0}},{key:"hash",value:function(e){var r=e&&this.sheet!==void 0?"#".concat(this.sheet):"";switch(this.type){case er.RELATIVE:return"".concat(r,"#ROWR").concat(this.row);case er.ABSOLUTE:return"".concat(r,"#ROWA").concat(this.row)}}},{key:"unparse",value:function(e){var r=this.toSimpleRowAddress(e);if(!t8(r)){var a=this.type===er.ABSOLUTE?"$":"";return"".concat(a).concat(r.row+1)}}},{key:"exceedsSheetSizeLimits",value:function(e){return this.row>=e}}],[{key:"absolute",value:function(e,r){return new i(er.ABSOLUTE,e,r)}},{key:"relative",value:function(e,r){return new i(er.RELATIVE,e,r)}}]),i}();function Cee(i,t){return xee(i)||wee(i,t)||Aee(i,t)||See()}function See(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aee(i,t){if(!!i){if(typeof i=="string")return r8(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r8(i,t)}}function r8(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function wee(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function xee(i){if(Array.isArray(i))return i}var n8=new RegExp("^(".concat(Ia,")?(\\").concat(Ar,"?)([A-Za-z]+)(\\").concat(Ar,"?)([0-9]+)$")),Eee=new RegExp("^(".concat(Ia,")?(\\").concat(Ar,"?)([A-Za-z]+)$")),Ree=new RegExp("^(".concat(Ia,")?(\\").concat(Ar,"?)([0-9]+)$")),Vee=new RegExp("^".concat(YC,"$")),Da=function(t,e,r){var a=n8.exec(e),s=i6(a[6]),o=ob(a,t);if(o!==void 0){o===null&&(o=void 0);var l=Number(a[8])-1;return a[5]===Ar&&a[7]===Ar?_r.absolute(s,l,o):a[5]===Ar?_r.absoluteCol(s,l-r.row,o):a[7]===Ar?_r.absoluteRow(s-r.col,l,o):_r.relative(l-r.row,s-r.col,o)}},Ju=function(t,e,r){var a=Eee.exec(e),s=ob(a,t);if(s!==void 0){s===null&&(s=void 0);var o=i6(a[6]);return a[5]===Ar?rC.absolute(o,s):rC.relative(o-r.col,s)}},Qu=function(t,e,r){var a=Ree.exec(e),s=ob(a,t);if(s!==void 0){s===null&&(s=void 0);var o=Number(a[6])-1;return a[5]===Ar?cf.absolute(o,s):cf.relative(o-r.row,s)}},pf=function(t,e,r){var a=n8.exec(e),s=i6(a[6]),o=ob(a,t);if(o!==void 0){o===null&&(o=r);var l=Number(a[8])-1;return $(o,s,l)}},r6=function(t,e,r){var a=e.split(Xu);if(a.length===2){var s=Cee(a,2),o=s[0],l=s[1],u=pf(t,o,r);if(u!==void 0){var c=pf(t,l,u.sheet);if(c!==void 0&&u.sheet===c.sheet)return mf(u,c)}}},Lo=function(t,e,r){var a=zm(e.col),s=a6(e.sheet,t);if(s!==void 0)return r!==e.sheet?"".concat(s,"!").concat(a).concat(e.row+1):"".concat(a).concat(e.row+1)},n6=function(t,e,r){var a=Lo(t,e.start,r),s=Lo(t,e.end,e.start.sheet);if(!(a===void 0||s===void 0))return"".concat(a).concat(Xu).concat(s)};function i6(i){return i.length===1?i.toUpperCase().charCodeAt(0)-65:i.split("").reduce(function(t,e){return t*26+(e.toUpperCase().charCodeAt(0)-64)},0)-1}function zm(i){for(var t="";i>=0;)t=String.fromCharCode(i%26+97)+t,i=Math.floor(i/26)-1;return t.toUpperCase()}function a6(i,t){var e=t(i);if(e!==void 0)return Vee.test(e)?e:(e=e.replace(/'/g,"''"),"'".concat(e,"'"))}function ob(i,t){var e,r=(e=i[3])!==null&&e!==void 0?e:i[2];return r?(r=r.replace(/''/g,"'"),t(r)):null}var UOe=j(ar());"use strict";var Iee=ce(),Oee=gu(),Dee=ti(),Pee=Pm(),_ee=[].join,kee=Oee!=Object,Fee=Pee("join",",");Iee({target:"Array",proto:!0,forced:kee||!Fee},{join:function(t){return _ee.call(Dee(this),t===void 0?",":t)}});var KOe=j(q());tb();var s6=function(t,e){return{type:t,message:e}},mt;(function(i){i.LexingError="LexingError",i.ParserError="ParsingError",i.StaticOffsetError="StaticOffsetError",i.StaticOffsetOutOfRangeError="StaticOffsetOutOfRangeError",i.RangeOffsetNotAllowed="RangeOffsetNotAllowed"})(mt||(mt={}));var P;(function(i){i.EMPTY="EMPTY",i.NUMBER="NUMBER",i.STRING="STRING",i.MINUS_UNARY_OP="MINUS_UNARY_OP",i.PLUS_UNARY_OP="PLUS_UNARY_OP",i.PERCENT_OP="PERCENT_OP",i.CONCATENATE_OP="CONCATENATE_OP",i.EQUALS_OP="EQUALS_OP",i.NOT_EQUAL_OP="NOT_EQUAL_OP",i.GREATER_THAN_OP="GREATER_THAN_OP",i.LESS_THAN_OP="LESS_THAN_OP",i.GREATER_THAN_OR_EQUAL_OP="GREATER_THAN_OR_EQUAL_OP",i.LESS_THAN_OR_EQUAL_OP="LESS_THAN_OR_EQUAL_OP",i.PLUS_OP="PLUS_OP",i.MINUS_OP="MINUS_OP",i.TIMES_OP="TIMES_OP",i.DIV_OP="DIV_OP",i.POWER_OP="POWER_OP",i.FUNCTION_CALL="FUNCTION_CALL",i.NAMED_EXPRESSION="NAMED_EXPRESSION",i.PARENTHESIS="PARENTHESES",i.CELL_REFERENCE="CELL_REFERENCE",i.CELL_RANGE="CELL_RANGE",i.COLUMN_RANGE="COLUMN_RANGE",i.ROW_RANGE="ROW_RANGE",i.ERROR="ERROR",i.ERROR_WITH_RAW_INPUT="ERROR_WITH_RAW_INPUT",i.ARRAY="ARRAY"})(P||(P={}));var rr;(function(i){i[i.RELATIVE=0]="RELATIVE",i[i.START_ABSOLUTE=1]="START_ABSOLUTE",i[i.BOTH_ABSOLUTE=2]="BOTH_ABSOLUTE"})(rr||(rr={}));var i8=function(t){return{type:P.EMPTY,leadingWhitespace:t==null?void 0:t.image}},a8=function(t,e){return{type:P.NUMBER,value:t,leadingWhitespace:e==null?void 0:e.image}},s8=function(t){var e;return{type:P.STRING,value:t.image.slice(1,-1),leadingWhitespace:(e=t.leadingWhitespace)===null||e===void 0?void 0:e.image}},o6=function(t,e){return{type:P.CELL_REFERENCE,reference:t,leadingWhitespace:e==null?void 0:e.image}},ec=function(t,e,r,a){return c6(t,e,r),{type:P.CELL_RANGE,start:t,end:e,sheetReferenceType:r,leadingWhitespace:a}},o8=function(t,e,r,a){return c6(t,e,r),{type:P.COLUMN_RANGE,start:t,end:e,sheetReferenceType:r,leadingWhitespace:a==null?void 0:a.image}},l8=function(t,e,r,a){return c6(t,e,r),{type:P.ROW_RANGE,start:t,end:e,sheetReferenceType:r,leadingWhitespace:a==null?void 0:a.image}},u8=function(t,e,r){return{type:P.CONCATENATE_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},c8=function(t,e,r){return{type:P.EQUALS_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},p8=function(t,e,r){return{type:P.NOT_EQUAL_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},m8=function(t,e,r){return{type:P.GREATER_THAN_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},f8=function(t,e,r){return{type:P.LESS_THAN_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},d8=function(t,e,r){return{type:P.GREATER_THAN_OR_EQUAL_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},h8=function(t,e,r){return{type:P.LESS_THAN_OR_EQUAL_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},y8=function(t,e,r){return{type:P.PLUS_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},b8=function(t,e,r){return{type:P.MINUS_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},g8=function(t,e,r){return{type:P.TIMES_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},v8=function(t,e,r){return{type:P.DIV_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},T8=function(t,e,r){return{type:P.POWER_OP,left:t,right:e,leadingWhitespace:r==null?void 0:r.image}},N8=function(t,e){return{type:P.MINUS_UNARY_OP,value:t,leadingWhitespace:e==null?void 0:e.image}},C8=function(t,e){return{type:P.PLUS_UNARY_OP,value:t,leadingWhitespace:e==null?void 0:e.image}},S8=function(t,e){return{type:P.PERCENT_OP,value:t,leadingWhitespace:e==null?void 0:e.image}},l6=function(t,e,r,a){return{type:P.FUNCTION_CALL,procedureName:t,args:e,leadingWhitespace:r==null?void 0:r.image,internalWhitespace:a==null?void 0:a.image}},u6=function(t,e,r){return{type:P.ARRAY,args:t,leadingWhitespace:e==null?void 0:e.image,internalWhitespace:r==null?void 0:r.image}},A8=function(t,e){return{type:P.NAMED_EXPRESSION,expressionName:t,leadingWhitespace:e==null?void 0:e.image}},w8=function(t,e,r){return{type:P.PARENTHESIS,expression:t,leadingWhitespace:e==null?void 0:e.image,internalWhitespace:r==null?void 0:r.image}},wn=function(t,e){return{type:P.ERROR,error:t,leadingWhitespace:e==null?void 0:e.image}},Uo=function(t,e,r){return{type:P.ERROR_WITH_RAW_INPUT,error:e,rawInput:t,leadingWhitespace:r==null?void 0:r.image}},tc=function(){return{type:P.ERROR,error:x.parsingError()}};function c6(i,t,e){if(i.sheet!==void 0&&t.sheet===void 0||i.sheet===void 0&&t.sheet!==void 0)throw new Error("Start address inconsistent with end address");if(i.sheet===void 0&&e!==rr.RELATIVE||i.sheet!==void 0&&e===rr.RELATIVE)throw new Error("Sheet address inconsistent with sheet reference type")}function Ve(i,t){return(t??"")+i}var on;function qn(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var lb=(on={},qn(on,P.PLUS_OP,"+"),qn(on,P.MINUS_OP,"-"),qn(on,P.TIMES_OP,"*"),qn(on,P.DIV_OP,"/"),qn(on,P.CONCATENATE_OP,"&"),qn(on,P.POWER_OP,"^"),qn(on,P.EQUALS_OP,"="),qn(on,P.NOT_EQUAL_OP,"<>"),qn(on,P.GREATER_THAN_OP,">"),qn(on,P.GREATER_THAN_OR_EQUAL_OP,">="),qn(on,P.LESS_THAN_OP,"<"),qn(on,P.LESS_THAN_OR_EQUAL_OP,"<="),on);var FIe=j(q()),MIe=j(Vt());function Mee(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function x8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jee(i,t,e){return t&&x8(i.prototype,t),e&&x8(i,e),i}var Bee=function(t,e,r,a){return{ast:t,relativeDependencies:e,hasVolatileFunction:r,hasStructuralChangeFunction:a}},E8=function(){function i(t){Mee(this,i),this.functionRegistry=t,this.cache=new Map}return jee(i,[{key:"set",value:function(e,r){var a=zo(r,this.functionRegistry),s=Bee(r,a,R8(r,this.functionRegistry.isFunctionVolatile),R8(r,this.functionRegistry.isFunctionDependentOnSheetStructureChange));return this.cache.set(e,s),s}},{key:"get",value:function(e){return this.cache.get(e)}},{key:"maybeSetAndThenGet",value:function(e,r){var a=this.cache.get(e);return a!==void 0?a.ast:(this.set(e,r),r)}}]),i}(),R8=function i(t,e){switch(t.type){case P.EMPTY:case P.NUMBER:case P.STRING:case P.ERROR:case P.ERROR_WITH_RAW_INPUT:case P.CELL_REFERENCE:case P.CELL_RANGE:case P.COLUMN_RANGE:case P.ROW_RANGE:case P.NAMED_EXPRESSION:return!1;case P.PERCENT_OP:case P.PLUS_UNARY_OP:case P.MINUS_UNARY_OP:return i(t.value,e);case P.CONCATENATE_OP:case P.EQUALS_OP:case P.NOT_EQUAL_OP:case P.LESS_THAN_OP:case P.GREATER_THAN_OP:case P.LESS_THAN_OR_EQUAL_OP:case P.GREATER_THAN_OR_EQUAL_OP:case P.MINUS_OP:case P.PLUS_OP:case P.TIMES_OP:case P.DIV_OP:case P.POWER_OP:return i(t.left,e)||i(t.right,e);case P.PARENTHESIS:return i(t.expression,e);case P.FUNCTION_CALL:return e(t.procedureName)?!0:t.args.some(function(r){return i(r,e)});case P.ARRAY:return t.args.some(function(r){return r.some(function(a){return i(a,e)})})}};var YIe=j(ar());var zee=ce(),Hee=I8();zee({target:"Number",stat:!0},{isInteger:Hee});var Gee=ce(),qee=Mt(),Wee=Ut(),$ee=P8(),Kee=fa(),Xee=ym();function _8(i,t){var e=arguments.length<3?i:arguments[2],r,a;if(Wee(i)===e)return i[t];if(r=Kee.f(i,t),r)return $ee(r)?r.value:r.get===void 0?void 0:r.get.call(e);if(qee(a=Xee(i)))return _8(a,t,e)}Gee({target:"Reflect",stat:!0},{get:_8});var Yee=ce(),Zee=De(),Jee=ti(),k8=fa().f,F8=Tr(),Qee=Zee(function(){k8(1)}),ete=!F8||Qee;Yee({target:"Object",stat:!0,forced:ete,sham:!F8},{getOwnPropertyDescriptor:function(t,e){return k8(Jee(t),e)}});var pOe=j(q());tb();function tte(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var D=function i(){tte(this,i)};D.DistinctSigns="Distinct signs.";D.WrongArgNumber="Wrong number of arguments.";D.EmptyArg="Empty function argument.";D.EmptyArray="Empty array not allowed.";D.ArrayDimensions="Array dimensions are not compatible.";D.NoSpaceForArrayResult="No space for array result.";D.ValueSmall="Value too small.";D.ValueLarge="Value too large.";D.BadCriterion="Incorrect criterion.";D.RangeManySheets="Range spans more than one sheet.";D.CellRangeExpected="Cell range expected.";D.WrongDimension="Wrong range dimension.";D.ScalarExpected="Cell range not allowed.";D.NumberCoercion="Value cannot be coerced to number.";D.NumberExpected="Number argument expected.";D.IntegerExpected="Value needs to be an integer.";D.BadMode="Mode not recognized.";D.DateBounds="Date outside of bounds.";D.OutOfSheet="Resulting reference is out of the sheet.";D.WrongType="Wrong type of argument.";D.NaN="NaN or infinite value encountered.";D.EqualLength="Ranges need to be of equal length.";D.Negative="Value cannot be negative.";D.NotBinary="String does not represent a binary number.";D.NotOctal="String does not represent an octal number.";D.NotHex="String does not represent a hexadecimal number.";D.EndStartPeriod="End period needs to be at least start period.";D.CellRefExpected="Cell reference expected.";D.EmptyRange="Empty range not allowed.";D.BadRef="Address is not correct.";D.NumberRange="Number-only range expected.";D.ValueNotFound="Value not found.";D.ValueBaseLarge="Value in base too large.";D.ValueBaseSmall="Value in base too small.";D.ValueBaseLong="Value in base too long.";D.NegativeLength="Length cannot be negative.";D.PatternNotFound="Pattern not found.";D.OneValue="Needs at least one value.";D.TwoValues="Range needs to contain at least two elements.";D.ThreeValues="Range needs to contain at least three elements.";D.IndexBounds="Index out of bounds.";D.IndexLarge="Index too large.";D.Formula="Expected formula.";D.NegativeCount="Count cannot be negative.";D.ParseError="Parsing error.";D.SheetRef="Sheet does not exist.";D.PeriodLong="Period number cannot exceed life length.";D.InvalidDate="Invalid date.";D.BitshiftLong="Result of bitshift is too long.";D.EmptyString="Empty-string argument not allowed.";D.LengthBounds="Length out of bounds.";D.NegativeTime="Time cannot be negative.";D.NoDefault="No default option.";D.Selector="Selector cannot exceed the number of arguments.";D.StartEndDate="Start date needs to be earlier than end date.";D.IncorrectDateTime="String does not represent correct DateTime.";D.CharacterCodeBounds="Character code out of bounds.";D.NonZero="Argument cannot be 0.";D.LessThanOne="Argument cannot be less than 1.";D.WeekendString="Incorrect weekend bitmask string.";D.InvalidRoman="Invalid roman numeral.";D.WrongOrder="Wrong order of values.";D.ComplexNumberExpected="Complex number expected.";D.ShouldBeIorJ="Should be 'i' or 'j'.";D.SizeMismatch="Array dimensions mismatched.";D.FunctionName=function(i){return"Function name ".concat(i," not recognized.")};D.NamedExpressionName=function(i){return"Named expression ".concat(i," not recognized.")};D.LicenseKey=function(i){return"License key is ".concat(i,".")};function ub(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ub=function(e){return typeof e}:ub=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ub(i)}function M8(i,t){return ate(i)||ite(i,t)||nte(i,t)||rte()}function rte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nte(i,t){if(!!i){if(typeof i=="string")return j8(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return j8(i,t)}}function j8(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function ite(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function ate(i){if(Array.isArray(i))return i}function B8(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function L8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function U8(i,t,e){return t&&L8(i.prototype,t),e&&L8(i,e),i}function cb(i,t,e){return typeof Reflect!="undefined"&&Reflect.get?cb=Reflect.get:cb=function(a,s,o){var l=ste(a,s);if(!!l){var u=Object.getOwnPropertyDescriptor(l,s);return u.get?u.get.call(o):u.value}},cb(i,t,e||i)}function ste(i,t){for(;!Object.prototype.hasOwnProperty.call(i,t)&&(i=rc(i),i!==null););return i}function ote(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&p6(i,t)}function p6(i,t){return p6=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},p6(i,t)}function lte(i){var t=pte();return function(){var r=rc(i),a;if(t){var s=rc(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return ute(this,a)}}function ute(i,t){if(t&&(ub(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cte(i)}function cte(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function pte(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function rc(i){return rc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rc(i)}var z8=function(i){ote(e,i);var t=lte(e);function e(r,a){var s;return B8(this,e),s=t.call(this,r.allTokens,{outputCst:!1,maxLookahead:7}),s.formula=s.RULE("formula",function(){return s.CONSUME(ab),s.SUBRULE(s.booleanExpression)}),s.booleanExpression=s.RULE("booleanExpression",function(){var o=s.SUBRULE(s.concatenateExpression);return s.MANY(function(){var l=s.CONSUME(Va),u=s.SUBRULE2(s.concatenateExpression);Me(l,ab)?o=c8(o,u,l.leadingWhitespace):Me(l,GC)?o=p8(o,u,l.leadingWhitespace):Me(l,qC)?o=m8(o,u,l.leadingWhitespace):Me(l,WC)?o=f8(o,u,l.leadingWhitespace):Me(l,$C)?o=d8(o,u,l.leadingWhitespace):Me(l,KC)?o=h8(o,u,l.leadingWhitespace):s.ACTION(function(){throw Error("Operator not supported")})}),o}),s.booleanExpressionOrEmpty=s.RULE("booleanExpressionOrEmpty",function(){return s.OR([{ALT:function(){return s.SUBRULE(s.booleanExpression)}},{ALT:jC(i8())}])}),s.concatenateExpression=s.RULE("concatenateExpression",function(){var o=s.SUBRULE(s.additionExpression);return s.MANY(function(){var l=s.CONSUME(XC),u=s.SUBRULE2(s.additionExpression);o=u8(o,u,l.leadingWhitespace)}),o}),s.additionExpression=s.RULE("additionExpression",function(){var o=s.SUBRULE(s.multiplicationExpression);return s.MANY(function(){var l=s.CONSUME(Yu),u=s.SUBRULE2(s.multiplicationExpression);Me(l,rb)?o=y8(o,u,l.leadingWhitespace):Me(l,nb)?o=b8(o,u,l.leadingWhitespace):s.ACTION(function(){throw Error("Operator not supported")})}),o}),s.multiplicationExpression=s.RULE("multiplicationExpression",function(){var o=s.SUBRULE(s.powerExpression);return s.MANY(function(){var l=s.CONSUME(af),u=s.SUBRULE2(s.powerExpression);Me(l,UC)?o=g8(o,u,l.leadingWhitespace):Me(l,zC)?o=v8(o,u,l.leadingWhitespace):s.ACTION(function(){throw Error("Operator not supported")})}),o}),s.powerExpression=s.RULE("powerExpression",function(){var o=s.SUBRULE(s.atomicExpression);return s.MANY(function(){var l=s.CONSUME(ib),u=s.SUBRULE2(s.atomicExpression);Me(l,ib)?o=T8(o,u,l.leadingWhitespace):s.ACTION(function(){throw Error("Operator not supported")})}),o}),s.atomicExpression=s.RULE("atomicExpression",function(){return s.OR([{ALT:function(){var l=s.CONSUME(Yu),u=s.SUBRULE(s.atomicExpression);return Me(l,rb)?C8(u,l.leadingWhitespace):Me(l,nb)?N8(u,l.leadingWhitespace):(s.customParsingError=s6(mt.ParserError,"Mismatched token type"),s.customParsingError)}},{ALT:function(){return s.SUBRULE2(s.rightUnaryOpAtomicExpression)}}])}),s.rightUnaryOpAtomicExpression=s.RULE("rightUnaryOpAtomicExpression",function(){var o=s.SUBRULE(s.positiveAtomicExpression),l=s.OPTION(function(){return s.CONSUME(HC)});return l?S8(o,l.leadingWhitespace):o}),s.positiveAtomicExpression=s.RULE("positiveAtomicExpression",function(){var o;return s.OR((o=s.atomicExpCache)!==null&&o!==void 0?o:s.atomicExpCache=[{ALT:function(){return s.SUBRULE(s.arrayExpression)}},{ALT:function(){return s.SUBRULE(s.cellRangeExpression)}},{ALT:function(){return s.SUBRULE(s.columnRangeExpression)}},{ALT:function(){return s.SUBRULE(s.rowRangeExpression)}},{ALT:function(){return s.SUBRULE(s.offsetExpression)}},{ALT:function(){return s.SUBRULE(s.cellReference)}},{ALT:function(){return s.SUBRULE(s.procedureExpression)}},{ALT:function(){return s.SUBRULE(s.namedExpressionExpression)}},{ALT:function(){var u=s.CONSUME(s.lexerConfig.NumberLiteral);return a8(s.numericStringToNumber(u.image),u.leadingWhitespace)}},{ALT:function(){var u=s.CONSUME(e6);return s8(u)}},{ALT:function(){var u=s.CONSUME(t6),c=u.image.toUpperCase(),p=s.lexerConfig.errorMapping[c];return p?wn(new x(p),u.leadingWhitespace):s.parsingError(mt.ParserError,"Unknown error literal")}}])}),s.procedureExpression=s.RULE("procedureExpression",function(){var o,l=s.CONSUME(uf),u=l.image.toUpperCase().slice(0,-1),c=(o=s.lexerConfig.functionMapping[u])!==null&&o!==void 0?o:u,p=[],m=s.SUBRULE(s.booleanExpressionOrEmpty);s.MANY(function(){var d,h=s.CONSUME(s.lexerConfig.ArgSeparator);m.type===P.EMPTY&&(m.leadingWhitespace=(d=h.leadingWhitespace)===null||d===void 0?void 0:d.image),p.push(m),m=s.SUBRULE2(s.booleanExpressionOrEmpty)}),p.push(m),p.length===1&&p[0].type===P.EMPTY&&(p.length=0);var f=s.CONSUME(lf);return l6(c,p,l.leadingWhitespace,f.leadingWhitespace)}),s.namedExpressionExpression=s.RULE("namedExpressionExpression",function(){var o=s.CONSUME(QC);return A8(o.image,o.leadingWhitespace)}),s.offsetExpression=s.RULE("offsetExpression",function(){var o=s.SUBRULE(s.offsetProcedureExpression),l;return s.OPTION(function(){s.CONSUME(Zu),o.type===P.CELL_RANGE?l=s.parsingError(mt.RangeOffsetNotAllowed,"Range offset not allowed here"):l=s.SUBRULE(s.endOfRangeWithOffsetStartExpression,{ARGS:[o]})}),l!==void 0?l:o}),s.offsetProcedureExpression=s.RULE("offsetProcedureExpression",function(){var o=[];return s.CONSUME(s.lexerConfig.OffsetProcedureName),s.CONSUME(sb),s.MANY_SEP({SEP:s.lexerConfig.ArgSeparator,DEF:function(){o.push(s.SUBRULE(s.booleanExpression))}}),s.CONSUME(lf),s.handleOffsetHeuristic(o)}),s.cellRangeExpression=s.RULE("cellRangeExpression",function(){var o=s.CONSUME(Hi);return s.CONSUME2(Zu),s.SUBRULE(s.endOfRangeExpression,{ARGS:[o]})}),s.columnRangeExpression=s.RULE("columnRangeExpression",function(){var o=s.CONSUME(sf),l=o.image.split(":"),u=M8(l,2),c=u[0],p=u[1],m=s.ACTION(function(){return Ju(s.sheetMapping,c,s.formulaAddress)}),f=s.ACTION(function(){return Ju(s.sheetMapping,p,s.formulaAddress)});if(m===void 0||f===void 0)return wn(new x(R.REF));if(m.exceedsSheetSizeLimits(s.lexerConfig.maxColumns)||f.exceedsSheetSizeLimits(s.lexerConfig.maxColumns))return Uo(o.image,new x(R.NAME),o.leadingWhitespace);if(m.sheet===void 0&&f.sheet!==void 0)return s.parsingError(mt.ParserError,"Malformed range expression");var d=s.rangeSheetReferenceType(m.sheet,f.sheet);return m.sheet!==void 0&&f.sheet===void 0&&(f=f.withAbsoluteSheet(m.sheet)),o8(m,f,d,o.leadingWhitespace)}),s.rowRangeExpression=s.RULE("rowRangeExpression",function(){var o=s.CONSUME(of),l=o.image.split(":"),u=M8(l,2),c=u[0],p=u[1],m=s.ACTION(function(){return Qu(s.sheetMapping,c,s.formulaAddress)}),f=s.ACTION(function(){return Qu(s.sheetMapping,p,s.formulaAddress)});if(m===void 0||f===void 0)return wn(new x(R.REF));if(m.exceedsSheetSizeLimits(s.lexerConfig.maxRows)||f.exceedsSheetSizeLimits(s.lexerConfig.maxRows))return Uo(o.image,new x(R.NAME),o.leadingWhitespace);if(m.sheet===void 0&&f.sheet!==void 0)return s.parsingError(mt.ParserError,"Malformed range expression");var d=s.rangeSheetReferenceType(m.sheet,f.sheet);return m.sheet!==void 0&&f.sheet===void 0&&(f=f.withAbsoluteSheet(m.sheet)),l8(m,f,d,o.leadingWhitespace)}),s.cellReference=s.RULE("cellReference",function(){var o=s.CONSUME(Hi),l=s.ACTION(function(){return Da(s.sheetMapping,o.image,s.formulaAddress)});return l===void 0?Uo(o.image,new x(R.REF),o.leadingWhitespace):l.exceedsSheetSizeLimits(s.lexerConfig.maxColumns,s.lexerConfig.maxRows)?Uo(o.image,new x(R.NAME),o.leadingWhitespace):o6(l,o.leadingWhitespace)}),s.endOfRangeExpression=s.RULE("endOfRangeExpression",function(o){return s.OR([{ALT:function(){return s.SUBRULE(s.endRangeReference,{ARGS:[o]})}},{ALT:function(){var u,c=s.SUBRULE(s.offsetProcedureExpression),p=s.ACTION(function(){return Da(s.sheetMapping,o.image,s.formulaAddress)});if(p===void 0)return wn(new x(R.REF));if(c.type===P.CELL_REFERENCE){var m=c.reference,f=rr.RELATIVE;return p.sheet!==void 0&&(f=rr.START_ABSOLUTE,m=m.withAbsoluteSheet(p.sheet)),ec(p,m,f,(u=o.leadingWhitespace)===null||u===void 0?void 0:u.image)}else return s.parsingError(mt.RangeOffsetNotAllowed,"Range offset not allowed here")}}])}),s.endOfRangeWithOffsetStartExpression=s.RULE("endOfRangeWithOffsetStartExpression",function(o){return s.OR([{ALT:function(){return s.SUBRULE(s.endRangeWithOffsetStartReference,{ARGS:[o]})}},{ALT:function(){var u=s.SUBRULE(s.offsetProcedureExpression);if(u.type===P.CELL_REFERENCE){var c=u.reference,p=rr.RELATIVE;return o.reference.sheet!==void 0&&(p=rr.START_ABSOLUTE,c=c.withAbsoluteSheet(o.reference.sheet)),ec(o.reference,c,p,o.leadingWhitespace)}else return s.parsingError(mt.RangeOffsetNotAllowed,"Range offset not allowed here")}}])}),s.endRangeReference=s.RULE("endRangeReference",function(o){var l,u=s.CONSUME(Hi),c=s.ACTION(function(){return Da(s.sheetMapping,o.image,s.formulaAddress)}),p=s.ACTION(function(){return Da(s.sheetMapping,u.image,s.formulaAddress)});return c===void 0||p===void 0?s.ACTION(function(){return Uo("".concat(o.image,":").concat(u.image),new x(R.REF),o.leadingWhitespace)}):c.exceedsSheetSizeLimits(s.lexerConfig.maxColumns,s.lexerConfig.maxRows)||p.exceedsSheetSizeLimits(s.lexerConfig.maxColumns,s.lexerConfig.maxRows)?s.ACTION(function(){return Uo("".concat(o.image,":").concat(u.image),new x(R.NAME),o.leadingWhitespace)}):s.buildCellRange(c,p,(l=o.leadingWhitespace)===null||l===void 0?void 0:l.image)}),s.endRangeWithOffsetStartReference=s.RULE("endRangeWithOffsetStartReference",function(o){var l=s.CONSUME(Hi),u=s.ACTION(function(){return Da(s.sheetMapping,l.image,s.formulaAddress)});return u===void 0?s.ACTION(function(){return wn(new x(R.REF))}):s.buildCellRange(o.reference,u,o.leadingWhitespace)}),s.arrayExpression=s.RULE("arrayExpression",function(){return s.OR([{ALT:function(){var l=s.CONSUME(ZC),u=s.SUBRULE(s.insideArrayExpression),c=s.CONSUME(JC);return u6(u.args,l.leadingWhitespace,c.leadingWhitespace)}},{ALT:function(){return s.SUBRULE(s.parenthesisExpression)}}])}),s.insideArrayExpression=s.RULE("insideArrayExpression",function(){var o=[[]];return o[o.length-1].push(s.SUBRULE(s.booleanExpression)),s.MANY(function(){s.OR([{ALT:function(){s.CONSUME(s.lexerConfig.ArrayColSeparator),o[o.length-1].push(s.SUBRULE2(s.booleanExpression))}},{ALT:function(){s.CONSUME(s.lexerConfig.ArrayRowSeparator),o.push([]),o[o.length-1].push(s.SUBRULE3(s.booleanExpression))}}])}),u6(o)}),s.parenthesisExpression=s.RULE("parenthesisExpression",function(){var o=s.CONSUME(sb),l=s.SUBRULE(s.booleanExpression),u=s.CONSUME(lf);return w8(l,o.leadingWhitespace,u.leadingWhitespace)}),s.numericStringToNumber=function(o){var l=o.replace(s.lexerConfig.decimalSeparator,".");return Number(l)},s.lexerConfig=r,s.sheetMapping=a,s.formulaAddress=$(0,0,0),s.performSelfAnalysis(),s}return U8(e,[{key:"parseFromTokens",value:function(a,s){this.input=a;var o=this.formulaWithContext(s),l=[];return this.customParsingError&&l.push(this.customParsingError),l=l.concat(this.errors.map(function(u){return{type:mt.ParserError,message:u.message}})),l.length>0&&(o=tc()),{ast:o,errors:l}}},{key:"formulaWithContext",value:function(a){return this.formulaAddress=a,this.formula()}},{key:"reset",value:function(){cb(rc(e.prototype),"reset",this).call(this),this.customParsingError=void 0}},{key:"buildCellRange",value:function(a,s,o){if(a.sheet===void 0&&s.sheet!==void 0)return this.parsingError(mt.ParserError,"Malformed range expression");var l=this.rangeSheetReferenceType(a.sheet,s.sheet);return a.sheet!==void 0&&s.sheet===void 0&&(s=s.withAbsoluteSheet(a.sheet)),ec(a,s,l,o)}},{key:"handleOffsetHeuristic",value:function(a){var s=a[0];if(s.type!==P.CELL_REFERENCE)return this.parsingError(mt.StaticOffsetError,"First argument to OFFSET is not a reference");var o=a[1],l;if(o.type===P.NUMBER&&Number.isInteger(o.value))l=o.value;else if(o.type===P.PLUS_UNARY_OP&&o.value.type===P.NUMBER&&Number.isInteger(o.value.value))l=o.value.value;else if(o.type===P.MINUS_UNARY_OP&&o.value.type===P.NUMBER&&Number.isInteger(o.value.value))l=-o.value.value;else return this.parsingError(mt.StaticOffsetError,"Second argument to OFFSET is not a static number");var u=a[2],c;if(u.type===P.NUMBER&&Number.isInteger(u.value))c=u.value;else if(u.type===P.PLUS_UNARY_OP&&u.value.type===P.NUMBER&&Number.isInteger(u.value.value))c=u.value.value;else if(u.type===P.MINUS_UNARY_OP&&u.value.type===P.NUMBER&&Number.isInteger(u.value.value))c=-u.value.value;else return this.parsingError(mt.StaticOffsetError,"Third argument to OFFSET is not a static number");var p=a[3],m;if(p===void 0)m=1;else if(p.type===P.NUMBER){if(m=p.value,m<1)return this.parsingError(mt.StaticOffsetError,"Fourth argument to OFFSET is too small number");if(!Number.isInteger(m))return this.parsingError(mt.StaticOffsetError,"Fourth argument to OFFSET is not integer")}else return this.parsingError(mt.StaticOffsetError,"Fourth argument to OFFSET is not a static number");var f=a[4],d;if(f===void 0)d=1;else if(f.type===P.NUMBER){if(d=f.value,d<1)return this.parsingError(mt.StaticOffsetError,"Fifth argument to OFFSET is too small number");if(!Number.isInteger(d))return this.parsingError(mt.StaticOffsetError,"Fifth argument to OFFSET is not integer")}else return this.parsingError(mt.StaticOffsetError,"Fifth argument to OFFSET is not a static number");var h=new _r(s.reference.col+c,s.reference.row+l,s.reference.type),y=h.col,b=h.row;if((s.reference.type===Ue.CELL_REFERENCE_RELATIVE||s.reference.type===Ue.CELL_REFERENCE_ABSOLUTE_COL)&&(b=b+this.formulaAddress.row),(s.reference.type===Ue.CELL_REFERENCE_RELATIVE||s.reference.type===Ue.CELL_REFERENCE_ABSOLUTE_ROW)&&(y=y+this.formulaAddress.col),y<0||b<0)return wn(new x(R.REF,D.OutOfSheet));if(d===1&&m===1)return o6(h);var g=new _r(h.col+d-1,h.row+m-1,h.type);return ec(h,g,rr.RELATIVE)}},{key:"parsingError",value:function(a,s){return this.customParsingError=s6(a,s),tc()}},{key:"rangeSheetReferenceType",value:function(a,s){return a===void 0?rr.RELATIVE:s===void 0?rr.START_ABSOLUTE:rr.BOTH_ABSOLUTE}}]),e}(BC),m6=function(){function i(t){B8(this,i),this.lexerConfig=t,this.lexer=new $t(t.allTokens,{ensureOptimizations:!0})}return U8(i,[{key:"tokenizeFormula",value:function(e){var r=this.lexer.tokenize(e),a=r.tokens;return a=this.trimTrailingWhitespaces(a),a=this.skipWhitespacesInsideRanges(a),a=this.skipWhitespacesBeforeArgSeparators(a),r.tokens=a,r}},{key:"skipWhitespacesInsideRanges",value:function(e){return this.filterTokensByNeighbors(e,function(r,a,s){return(Me(r,Hi)||Me(r,Zu))&&Me(a,Oa)&&(Me(s,Hi)||Me(s,Zu))})}},{key:"skipWhitespacesBeforeArgSeparators",value:function(e){var r=this;return this.filterTokensByNeighbors(e,function(a,s,o){return!Me(a,r.lexerConfig.ArgSeparator)&&Me(s,Oa)&&Me(o,r.lexerConfig.ArgSeparator)})}},{key:"filterTokensByNeighbors",value:function(e,r){if(e.length<3)return e;for(var a=0,s=[e[a++]];a<e.length-1;)r(e[a-1],e[a],e[a+1])||s.push(e[a]),++a;return s.push(e[a]),s}},{key:"trimTrailingWhitespaces",value:function(e){return e.length>0&&Me(e[e.length-1],Oa)&&e.pop(),e}}]),i}();var VOe=j(ar());function mte(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function H8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function fte(i,t,e){return t&&H8(i.prototype,t),e&&H8(i,e),i}var ff=function(){function i(t,e,r,a){mte(this,i),this.config=t,this.lexerConfig=e,this.sheetMappingFn=r,this.namedExpressions=a}return fte(i,[{key:"unparse",value:function(e,r){return"="+this.unparseAst(e,r)}},{key:"unparseAst",value:function(e,r){var a=this,s,o;switch(e.type){case P.EMPTY:return Ve("",e.leadingWhitespace);case P.NUMBER:return Ve(f6(e.value,this.config.decimalSeparator),e.leadingWhitespace);case P.STRING:return Ve('"'+e.value+'"',e.leadingWhitespace);case P.FUNCTION_CALL:{var l=e.args.map(function(w){return w!==void 0?a.unparseAst(w,r):""}).join(this.config.functionArgSeparator),u=this.config.translationPackage.isFunctionTranslated(e.procedureName)?this.config.translationPackage.getFunctionTranslation(e.procedureName):e.procedureName,c=u+"("+l+Ve(")",e.internalWhitespace);return Ve(c,e.leadingWhitespace)}case P.NAMED_EXPRESSION:{var p=(s=this.namedExpressions.nearestNamedExpression(e.expressionName,r.sheet))===null||s===void 0?void 0:s.displayName;return Ve(p||e.expressionName,e.leadingWhitespace)}case P.CELL_REFERENCE:{var m;return e.reference.sheet!==void 0?m=this.unparseSheetName(e.reference.sheet)+"!":m="",m+=(o=e.reference.unparse(r))!==null&&o!==void 0?o:this.config.translationPackage.getErrorTranslation(R.REF),Ve(m,e.leadingWhitespace)}case P.COLUMN_RANGE:case P.ROW_RANGE:case P.CELL_RANGE:return Ve(this.formatRange(e,r),e.leadingWhitespace);case P.PLUS_UNARY_OP:{var f=this.unparseAst(e.value,r);return Ve("+",e.leadingWhitespace)+f}case P.MINUS_UNARY_OP:{var d=this.unparseAst(e.value,r);return Ve("-",e.leadingWhitespace)+d}case P.PERCENT_OP:return this.unparseAst(e.value,r)+Ve("%",e.leadingWhitespace);case P.ERROR:{var h=this.config.translationPackage.getErrorTranslation(e.error?e.error.type:R.ERROR);return Ve(h,e.leadingWhitespace)}case P.ERROR_WITH_RAW_INPUT:return Ve(e.rawInput,e.leadingWhitespace);case P.PARENTHESIS:{var y=this.unparseAst(e.expression,r),b="("+y+Ve(")",e.internalWhitespace);return Ve(b,e.leadingWhitespace)}case P.ARRAY:{var g="{"+e.args.map(function(w){return w.map(function(S){return a.unparseAst(S,r)}).join(a.config.arrayColumnSeparator)}).join(this.config.arrayRowSeparator)+Ve("}",e.internalWhitespace);return Ve(g,e.leadingWhitespace)}default:{var v=this.unparseAst(e.left,r),C=this.unparseAst(e.right,r);return v+Ve(lb[e.type],e.leadingWhitespace)+C}}}},{key:"unparseSheetName",value:function(e){var r=a6(e,this.sheetMappingFn);if(r===void 0)throw new $e(e);return r}},{key:"formatRange",value:function(e,r){var a="",s="";e.start.sheet!==void 0&&e.sheetReferenceType!==rr.RELATIVE&&(a=this.unparseSheetName(e.start.sheet)+"!"),e.end.sheet!==void 0&&e.sheetReferenceType===rr.BOTH_ABSOLUTE&&(s=this.unparseSheetName(e.end.sheet)+"!");var o=e.start.unparse(r),l=e.end.unparse(r);return o===void 0||l===void 0?this.config.translationPackage.getErrorTranslation(R.REF):"".concat(a).concat(o,":").concat(s).concat(l)}}]),i}();function f6(i,t){var e=i.toString();return e.replace(".",t)}function G8(i,t){return bte(i)||yte(i,t)||hte(i,t)||dte()}function dte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hte(i,t){if(!!i){if(typeof i=="string")return q8(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return q8(i,t)}}function q8(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function yte(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function bte(i){if(Array.isArray(i))return i}function gte(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function W8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function vte(i,t,e){return t&&W8(i.prototype,t),e&&W8(i,e),i}var d6=function(){function i(t,e,r){gte(this,i),this.config=t,this.functionRegistry=e,this.sheetMapping=r,this.statsCacheUsed=0,this.lexerConfig=Bo(t),this.lexer=new m6(this.lexerConfig),this.formulaParser=new z8(this.lexerConfig,this.sheetMapping),this.cache=new E8(this.functionRegistry)}return vte(i,[{key:"parse",value:function(e,r){var a=this.lexer.tokenizeFormula(e);if(a.errors.length>0){var s=a.errors.map(function(y){return{type:mt.LexingError,message:y.message}});return{ast:tc(),errors:s,hasVolatileFunction:!1,hasStructuralChangeFunction:!1,dependencies:[]}}var o=this.computeHashFromTokens(a.tokens,r),l=this.cache.get(o);if(l!==void 0)++this.statsCacheUsed;else{var u=Tte(a.tokens),c=this.formulaParser.parseFromTokens(u,r);if(c.errors.length>0)return Object.assign(Object.assign({},c),{hasVolatileFunction:!1,hasStructuralChangeFunction:!1,dependencies:[]});l=this.cache.set(o,c.ast)}var p=l,m=p.ast,f=p.hasVolatileFunction,d=p.hasStructuralChangeFunction,h=p.relativeDependencies;return{ast:m,errors:[],hasVolatileFunction:f,hasStructuralChangeFunction:d,dependencies:h}}},{key:"fetchCachedResultForAst",value:function(e){var r=this.computeHashFromAst(e);return this.fetchCachedResult(r)}},{key:"fetchCachedResult",value:function(e){var r=this.cache.get(e);if(r===void 0)throw new Error("There is no AST with such key in the cache");var a=r.ast,s=r.hasVolatileFunction,o=r.hasStructuralChangeFunction,l=r.relativeDependencies;return{ast:a,errors:[],hasVolatileFunction:s,hasStructuralChangeFunction:o,dependencies:l}}},{key:"computeHashFromTokens",value:function(e,r){for(var a,s="",o=0;o<e.length;){var l=e[o];if(Me(l,Hi)){var u=Da(this.sheetMapping,l.image,r);u===void 0?s=s.concat(l.image):s=s.concat(u.hash(!0))}else if(Me(l,uf)){var c=l.image.toUpperCase().slice(0,-1),p=(a=this.lexerConfig.functionMapping[c])!==null&&a!==void 0?a:c;s=s.concat(p,"(")}else if(Me(l,sf)){var m=l.image.split(":"),f=G8(m,2),d=f[0],h=f[1],y=Ju(this.sheetMapping,d,r),b=Ju(this.sheetMapping,h,r);y===void 0||b===void 0?s=s.concat("!REF"):s=s.concat(y.hash(!0),":",b.hash(!0))}else if(Me(l,of)){var g=l.image.split(":"),v=G8(g,2),C=v[0],w=v[1],S=Qu(this.sheetMapping,C,r),A=Qu(this.sheetMapping,w,r);S===void 0||A===void 0?s=s.concat("!REF"):s=s.concat(S.hash(!0),":",A.hash(!0))}else s=s.concat(l.image);o++}return s}},{key:"rememberNewAst",value:function(e){var r=this.computeHashFromAst(e);return this.cache.maybeSetAndThenGet(r,e)}},{key:"computeHashFromAst",value:function(e){return"="+this.computeHashOfAstNode(e)}},{key:"computeHashOfAstNode",value:function(e){var r=this;switch(e.type){case P.EMPTY:return e.leadingWhitespace||"";case P.NUMBER:return Ve(f6(e.value,this.config.decimalSeparator),e.leadingWhitespace);case P.STRING:return Ve('"'+e.value+'"',e.leadingWhitespace);case P.NAMED_EXPRESSION:return Ve(e.expressionName,e.leadingWhitespace);case P.FUNCTION_CALL:{var a=e.args.map(function(f){return r.computeHashOfAstNode(f)}).join(this.config.functionArgSeparator),s=e.procedureName+"("+a+Ve(")",e.internalWhitespace);return Ve(s,e.leadingWhitespace)}case P.CELL_REFERENCE:return Ve(e.reference.hash(!0),e.leadingWhitespace);case P.COLUMN_RANGE:case P.ROW_RANGE:case P.CELL_RANGE:{var o=e.start.hash(e.sheetReferenceType!==rr.RELATIVE),l=e.end.hash(e.sheetReferenceType===rr.BOTH_ABSOLUTE);return Ve(o+":"+l,e.leadingWhitespace)}case P.MINUS_UNARY_OP:return Ve("-"+this.computeHashOfAstNode(e.value),e.leadingWhitespace);case P.PLUS_UNARY_OP:return Ve("+"+this.computeHashOfAstNode(e.value),e.leadingWhitespace);case P.PERCENT_OP:return this.computeHashOfAstNode(e.value)+Ve("%",e.leadingWhitespace);case P.ERROR:{var u=this.config.translationPackage.getErrorTranslation(e.error?e.error.type:R.ERROR);return Ve(u,e.leadingWhitespace)}case P.ERROR_WITH_RAW_INPUT:return Ve(e.rawInput,e.leadingWhitespace);case P.ARRAY:{var c=e.args.map(function(f){return f.map(function(d){return r.computeHashOfAstNode(d)}).join(",")}).join(";");return Ve("{"+c+Ve("}",e.internalWhitespace),e.leadingWhitespace)}case P.PARENTHESIS:{var p=this.computeHashOfAstNode(e.expression),m="("+p+Ve(")",e.internalWhitespace);return Ve(m,e.leadingWhitespace)}default:return this.computeHashOfAstNode(e.left)+Ve(lb[e.type],e.leadingWhitespace)+this.computeHashOfAstNode(e.right)}}}]),i}();function Tte(i){var t=[],e=i[0];Me(e,Oa)||t.push(e);for(var r=1;r<i.length;++r){var a=i[r];if(!Me(a,Oa)){var s=i[r-1];Me(s,Oa)&&(a.leadingWhitespace=s),t.push(a)}}return t}var Nte=function i(t,e,r,a){switch(t.type){case P.EMPTY:case P.NUMBER:case P.STRING:case P.ERROR:return;case P.NAMED_EXPRESSION:{a&&r.push(new xn(t.expressionName));return}case P.CELL_REFERENCE:{a&&r.push(new df(t.reference));return}case P.CELL_RANGE:{a&&t.start.sheet===t.end.sheet&&r.push(new h6(t.start,t.end));return}case P.COLUMN_RANGE:{a&&t.start.sheet===t.end.sheet&&r.push(new y6(t.start,t.end));return}case P.ROW_RANGE:{a&&t.start.sheet===t.end.sheet&&r.push(new b6(t.start,t.end));return}case P.PERCENT_OP:case P.PLUS_UNARY_OP:case P.MINUS_UNARY_OP:{i(t.value,e,r,!0);return}case P.CONCATENATE_OP:case P.EQUALS_OP:case P.NOT_EQUAL_OP:case P.LESS_THAN_OP:case P.GREATER_THAN_OP:case P.LESS_THAN_OR_EQUAL_OP:case P.GREATER_THAN_OR_EQUAL_OP:case P.MINUS_OP:case P.PLUS_OP:case P.TIMES_OP:case P.DIV_OP:case P.POWER_OP:i(t.left,e,r,!0),i(t.right,e,r,!0);return;case P.PARENTHESIS:i(t.expression,e,r,a);return;case P.FUNCTION_CALL:{var s=!e.doesFunctionNeedArgumentToBeComputed(t.procedureName);t.args.forEach(function(o){return i(o,e,r,s)});return}}},zo=function(t,e){var r=new Array;return Nte(t,e,r,!0),r};function hf(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function $8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function yf(i,t,e){return t&&$8(i.prototype,t),e&&$8(i,e),i}var df=function(){function i(t){hf(this,i),this.dependency=t}return yf(i,[{key:"absolutize",value:function(e){return this.dependency.toSimpleCellAddress(e)}}]),i}(),h6=function(){function i(t,e){hf(this,i),this.start=t,this.end=e}return yf(i,[{key:"absolutize",value:function(e){return new ae(this.start.toSimpleCellAddress(e),this.end.toSimpleCellAddress(e))}}]),i}(),y6=function(){function i(t,e){hf(this,i),this.start=t,this.end=e}return yf(i,[{key:"absolutize",value:function(e){var r=this.start.toSimpleColumnAddress(e),a=this.end.toSimpleColumnAddress(e);return new nc(r.sheet,r.col,a.col)}}]),i}(),b6=function(){function i(t,e){hf(this,i),this.start=t,this.end=e}return yf(i,[{key:"absolutize",value:function(e){var r=this.start.toSimpleRowAddress(e),a=this.end.toSimpleRowAddress(e);return new ic(r.sheet,r.row,a.row)}}]),i}(),xn=function(){function i(t){hf(this,i),this.name=t}return yf(i,[{key:"absolutize",value:function(e){return this}}]),i}();var x8e=j(Nr());function K8(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function X8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Y8(i,t,e){return t&&X8(i.prototype,t),e&&X8(i,e),i}var ln=function(){function i(t,e,r){if(K8(this,i),this.sheet=t,this.rowStart=e,this.rowEnd=r,e<0)throw Error("Starting row cant be less than 0");if(r<e)throw Error("Row span cant end before start")}return Y8(i,[{key:"numberOfRows",get:function(){return this.rowEnd-this.rowStart+1}},{key:"rows",value:regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=this.rowStart;case 1:if(!(e<=this.rowEnd)){a.next=7;break}return a.next=4,e;case 4:++e,a.next=1;break;case 7:case"end":return a.stop()}},t,this)})},{key:"intersect",value:function(e){if(this.sheet!==e.sheet)throw Error("Can't intersect spans from different sheets");var r=Math.max(this.rowStart,e.rowStart),a=Math.min(this.rowEnd,e.rowEnd);return r>a?null:new i(this.sheet,r,a)}},{key:"firstRow",value:function(){return new i(this.sheet,this.rowStart,this.rowStart)}},{key:"start",get:function(){return this.rowStart}},{key:"end",get:function(){return this.rowEnd}}],[{key:"fromNumberOfRows",value:function(e,r,a){return new i(e,r,r+a-1)}},{key:"fromRowStartAndEnd",value:function(e,r,a){return new i(e,r,a)}}]),i}(),Wn=function(){function i(t,e,r){if(K8(this,i),this.sheet=t,this.columnStart=e,this.columnEnd=r,e<0)throw Error("Starting column cant be less than 0");if(r<e)throw Error("Column span cant end before start")}return Y8(i,[{key:"numberOfColumns",get:function(){return this.columnEnd-this.columnStart+1}},{key:"columns",value:regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e=this.columnStart;case 1:if(!(e<=this.columnEnd)){a.next=7;break}return a.next=4,e;case 4:++e,a.next=1;break;case 7:case"end":return a.stop()}},t,this)})},{key:"intersect",value:function(e){if(this.sheet!==e.sheet)throw Error("Can't intersect spans from different sheets");var r=Math.max(this.columnStart,e.columnStart),a=Math.min(this.columnEnd,e.columnEnd);return r>a?null:new i(this.sheet,r,a)}},{key:"firstColumn",value:function(){return new i(this.sheet,this.columnStart,this.columnStart)}},{key:"start",get:function(){return this.columnStart}},{key:"end",get:function(){return this.columnEnd}}],[{key:"fromNumberOfColumns",value:function(e,r,a){return new i(e,r,r+a-1)}},{key:"fromColumnStartAndEnd",value:function(e,r,a){return new i(e,r,a)}}]),i}();function Z8(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&g6(i,t)}function g6(i,t){return g6=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},g6(i,t)}function J8(i){var t=Ate();return function(){var r=pb(i),a;if(t){var s=pb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Cte(this,a)}}function Cte(i,t){if(t&&(bf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ste(i)}function Ste(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ate(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function pb(i){return pb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pb(i)}function v6(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Q8(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function T6(i,t,e){return t&&Q8(i.prototype,t),e&&Q8(i,e),i}function bf(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bf=function(e){return typeof e}:bf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(i)}var N6="AbsoluteCellRange: Wrong range size";function un(i){return i&&(bf(i)==="object"||typeof i=="function")?"start"in i&&ft(i.start)&&"end"in i&&ft(i.end):!1}var mf=function(t,e){return{start:t,end:e}},ae=function(){function i(t,e){if(v6(this,i),t.sheet!==e.sheet)throw new Cs(t.sheet,e.sheet);this.start=$(t.sheet,t.col,t.row),this.end=$(e.sheet,e.col,e.row)}return T6(i,[{key:"sheet",get:function(){return this.start.sheet}},{key:"isFinite",value:function(){return Number.isFinite(this.size())}},{key:"doesOverlap",value:function(e){return!(this.start.sheet!=e.start.sheet||this.end.row<e.start.row||this.start.row>e.end.row||this.end.col<e.start.col||this.start.col>e.end.col)}},{key:"addressInRange",value:function(e){return this.sheet!==e.sheet?!1:this.start.row<=e.row&&this.end.row>=e.row&&this.start.col<=e.col&&this.end.col>=e.col}},{key:"columnInRange",value:function(e){return this.sheet!==e.sheet?!1:this.start.col<=e.col&&this.end.col>=e.col}},{key:"rowInRange",value:function(e){return this.sheet!==e.sheet?!1:this.start.row<=e.row&&this.end.row>=e.row}},{key:"containsRange",value:function(e){return this.addressInRange(e.start)&&this.addressInRange(e.end)}},{key:"intersectionWith",value:function(e){if(this.sheet===e.start.sheet){var r=Math.max(this.start.row,e.start.row),a=Math.min(this.end.row,e.end.row),s=Math.max(this.start.col,e.start.col),o=Math.min(this.end.col,e.end.col);if(!(r>a||s>o))return new i($(this.sheet,s,r),$(this.sheet,o,a))}}},{key:"includesRow",value:function(e){return this.start.row<e&&this.end.row>=e}},{key:"includesColumn",value:function(e){return this.start.col<e&&this.end.col>=e}},{key:"shiftByRows",value:function(e){this.start.row+=e,this.end.row+=e}},{key:"expandByRows",value:function(e){this.end.row+=e}},{key:"shiftByColumns",value:function(e){this.start.col+=e,this.end.col+=e}},{key:"shifted",value:function(e,r){return i.spanFrom($(this.sheet,this.start.col+e,this.start.row+r),this.width(),this.height())}},{key:"expandByColumns",value:function(e){this.end.col+=e}},{key:"moveToSheet",value:function(e){this.start.sheet=e,this.end.sheet=e}},{key:"removeSpan",value:function(e){e instanceof ln?this.removeRows(e.start,e.end):this.removeColumns(e.start,e.end)}},{key:"removeRows",value:function(e,r){if(!(e>this.end.row)){if(r<this.start.row){var a=r-e+1;return this.shiftByRows(-a)}e<=this.start.row&&(this.start.row=e),this.end.row-=Math.min(r,this.end.row)-e+1}}},{key:"removeColumns",value:function(e,r){if(!(e>this.end.col)){if(r<this.start.col){var a=r-e+1;return this.shiftByColumns(-a)}e<=this.start.col&&(this.start.col=e),this.end.col-=Math.min(r,this.end.col)-e+1}}},{key:"shouldBeRemoved",value:function(){return this.width()<=0||this.height()<=0}},{key:"rangeWithSameWidth",value:function(e,r){return i.spanFrom($(this.sheet,this.start.col,e),this.width(),r)}},{key:"rangeWithSameHeight",value:function(e,r){return i.spanFrom($(this.sheet,e,this.start.row),r,this.height())}},{key:"toString",value:function(){return"".concat(this.start.sheet,",").concat(this.start.col,",").concat(this.start.row,",").concat(this.end.col,",").concat(this.end.row)}},{key:"width",value:function(){return this.end.col-this.start.col+1}},{key:"height",value:function(){return this.end.row-this.start.row+1}},{key:"size",value:function(){return this.height()*this.width()}},{key:"arrayOfAddressesInRange",value:function(){for(var e=[],r=0;r<this.height();++r){e[r]=[];for(var a=0;a<this.width();++a){var s=$(this.sheet,this.start.col+a,this.start.row+r);e[r].push(s)}}return e}},{key:"withStart",value:function(e){return new i(e,this.end)}},{key:"sameDimensionsAs",value:function(e){return this.width()===e.width()&&this.height()===e.height()}},{key:"sameAs",value:function(e){return Pa(this.start,e.start)&&Pa(this.end,e.end)}},{key:"addressesArrayMap",value:function(e,r){for(var a=[],s=this.start.row;s<=this.effectiveEndRow(e);){for(var o=this.start.col,l=[];o<=this.effectiveEndColumn(e);)l.push(r($(this.start.sheet,o,s))),o++;a.push(l),s++}return a}},{key:"addresses",value:function(e){for(var r=[],a=this.start.row,s=this.effectiveEndRow(e),o=this.effectiveEndColumn(e);a<=s;){for(var l=this.start.col;l<=o;)r.push($(this.start.sheet,l,a)),l++;a++}return r}},{key:"addressesWithDirection",value:regeneratorRuntime.mark(function t(e,r,a){var s,o,l,u,c,p,m,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(e>0)){h.next=30;break}if(!(r>0)){h.next=16;break}s=this.effectiveEndRow(a);case 3:if(!(s>=this.start.row)){h.next=14;break}o=this.effectiveEndColumn(a);case 5:if(!(o>=this.start.col)){h.next=11;break}return h.next=8,$(this.start.sheet,o,s);case 8:o-=1,h.next=5;break;case 11:s-=1,h.next=3;break;case 14:h.next=28;break;case 16:l=this.start.row;case 17:if(!(l<=this.effectiveEndRow(a))){h.next=28;break}u=this.effectiveEndColumn(a);case 19:if(!(u>=this.start.col)){h.next=25;break}return h.next=22,$(this.start.sheet,u,l);case 22:u-=1,h.next=19;break;case 25:l+=1,h.next=17;break;case 28:h.next=57;break;case 30:if(!(r>0)){h.next=45;break}c=this.effectiveEndRow(a);case 32:if(!(c>=this.start.row)){h.next=43;break}p=this.start.col;case 34:if(!(p<=this.effectiveEndColumn(a))){h.next=40;break}return h.next=37,$(this.start.sheet,p,c);case 37:p+=1,h.next=34;break;case 40:c-=1,h.next=32;break;case 43:h.next=57;break;case 45:m=this.start.row;case 46:if(!(m<=this.effectiveEndRow(a))){h.next=57;break}f=this.start.col;case 48:if(!(f<=this.effectiveEndColumn(a))){h.next=54;break}return h.next=51,$(this.start.sheet,f,m);case 51:f+=1,h.next=48;break;case 54:m+=1,h.next=46;break;case 57:case"end":return h.stop()}},t,this)})},{key:"getAddress",value:function(e,r){if(e<0||r<0||r>this.height()-1||e>this.width()-1)throw Error("Index out of bound");return $(this.start.sheet,this.start.col+e,this.start.row+r)}},{key:"exceedsSheetSizeLimits",value:function(e,r){return this.end.col>=e||this.end.row>=r}},{key:"effectiveEndColumn",value:function(e){return this.end.col}},{key:"effectiveEndRow",value:function(e){return this.end.row}}],[{key:"fromAst",value:function(e,r){return e.type===P.CELL_RANGE?i.fromCellRange(e,r):e.type===P.COLUMN_RANGE?nc.fromColumnRange(e,r):ic.fromRowRangeAst(e,r)}},{key:"fromCellRange",value:function(e,r){return new i(e.start.toSimpleCellAddress(r),e.end.toSimpleCellAddress(r))}},{key:"fromCellRangeOrUndef",value:function(e,r){try{return new i(e.start.toSimpleCellAddress(r),e.end.toSimpleCellAddress(r))}catch(a){return}}},{key:"spanFrom",value:function(e,r,a){if(!Number.isFinite(r)&&Number.isFinite(a)){if(e.col!==0)throw new Error(N6);return new ic(e.sheet,e.row,e.row+a-1)}else if(!Number.isFinite(a)&&Number.isFinite(r)){if(e.row!==0)throw new Error(N6);return new nc(e.sheet,e.col,e.col+r-1)}else if(Number.isFinite(a)&&Number.isFinite(r))return new i(e,$(e.sheet,e.col+r-1,e.row+a-1));throw new Error(N6)}},{key:"fromCoordinates",value:function(e,r,a,s,o){return new i($(e,r,a),$(e,s,o))}}]),i}(),nc=function(i){Z8(e,i);var t=J8(e);function e(r,a,s){return v6(this,e),t.call(this,$(r,a,0),$(r,s,Number.POSITIVE_INFINITY))}return T6(e,[{key:"shouldBeRemoved",value:function(){return this.width()<=0}},{key:"shiftByRows",value:function(a){}},{key:"expandByRows",value:function(a){}},{key:"shifted",value:function(a,s){return new e(this.sheet,this.start.col+a,this.end.col+a)}},{key:"removeRows",value:function(a,s){}},{key:"rangeWithSameHeight",value:function(a,s){return new e(this.sheet,a,a+s-1)}},{key:"exceedsSheetSizeLimits",value:function(a,s){return this.end.col>=a}},{key:"effectiveEndRow",value:function(a){return a.getSheetHeight(this.sheet)-1}}],[{key:"fromColumnRange",value:function(a,s){var o=a.start.toSimpleColumnAddress(s),l=a.end.toSimpleColumnAddress(s);if(o.sheet!==l.sheet)throw new Cs(o.sheet,l.sheet);return new e(o.sheet,o.col,l.col)}}]),e}(ae),ic=function(i){Z8(e,i);var t=J8(e);function e(r,a,s){return v6(this,e),t.call(this,$(r,0,a),$(r,Number.POSITIVE_INFINITY,s))}return T6(e,[{key:"shouldBeRemoved",value:function(){return this.height()<=0}},{key:"shiftByColumns",value:function(a){}},{key:"expandByColumns",value:function(a){}},{key:"shifted",value:function(a,s){return new e(this.sheet,this.start.row+s,this.end.row+s)}},{key:"removeColumns",value:function(a,s){}},{key:"rangeWithSameWidth",value:function(a,s){return new e(this.sheet,a,a+s-1)}},{key:"exceedsSheetSizeLimits",value:function(a,s){return this.end.row>=s}},{key:"effectiveEndColumn",value:function(a){return a.getSheetWidth(this.sheet)-1}}],[{key:"fromRowRangeAst",value:function(a,s){var o=a.start.toSimpleRowAddress(s),l=a.end.toSimpleRowAddress(s);if(o.sheet!==l.sheet)throw new Cs(o.sheet,l.sheet);return new e(o.sheet,o.row,l.row)}}]),e}(ae);var cn=function(t,e){return t.map(function(r){return r.absolutize(e)})},eD=function(t){return t.filter(function(e){return e instanceof xn?!0:e instanceof ae?!(Ht(e.start)||Ht(e.end)):!Ht(e)})};var M9e=j(q()),j9e=j(Vt());var C9e=j(q());var O9e=j(Nr());var p9e=j(q());function wte(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var qr=function i(t,e,r){wte(this,i),this.formulaAddress=t,this.arraysFlag=e,this.formulaVertex=r};var qDe=j(q());var dDe=j(ar());"use strict";var Rte=ce(),Vte=FN().trim,Ite=iD();Rte({target:"String",proto:!0,forced:Ite("trim")},{trim:function(){return Vte(this)}});"use strict";var Ote=ce(),Dte=xT().includes,Pte=Du();Ote({target:"Array",proto:!0},{includes:function(t){return Dte(this,t,arguments.length>1?arguments[1]:void 0)}});Pte("includes");var VDe=j(q());var fD=j(sD());function oD(i){var t=i.caseSensitive?i.accentSensitive?"variant":"case":i.accentSensitive?"accent":"base",e=i.caseFirst,r=i.ignorePunctuation;return new Intl.Collator(i.localeLang,{sensitivity:t,caseFirst:e,ignorePunctuation:r})}var uDe=j(q());function mb(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mb=function(e){return typeof e}:mb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mb(i)}function gf(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&S6(i,t)}function S6(i,t){return S6=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},S6(i,t)}function vf(i){var t=Fte();return function(){var r=fb(i),a;if(t){var s=fb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return _te(this,a)}}function _te(i,t){if(t&&(mb(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kte(i)}function kte(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Fte(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function fb(i){return fb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},fb(i)}function ac(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function lD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function sc(i,t,e){return t&&lD(i.prototype,t),e&&lD(i,e),i}var se=Symbol("Empty value");function W(i){return i instanceof Gi?i.val:i}var Gi=function(){function i(t,e){ac(this,i),this.val=t,this.format=e}return sc(i,[{key:"fromNumber",value:function(e){return new this.constructor(e)}}]),i}();function oc(i,t){if(typeof i=="number")return t;var e=i.fromNumber(t);return e.format=i.format,e}var lc=function(i){gf(e,i);var t=vf(e);function e(){return ac(this,e),t.apply(this,arguments)}return sc(e,[{key:"getDetailedType",value:function(){return te.NUMBER_DATE}}]),e}(Gi),db=function(i){gf(e,i);var t=vf(e);function e(){return ac(this,e),t.apply(this,arguments)}return sc(e,[{key:"getDetailedType",value:function(){return te.NUMBER_CURRENCY}}]),e}(Gi),uc=function(i){gf(e,i);var t=vf(e);function e(){return ac(this,e),t.apply(this,arguments)}return sc(e,[{key:"getDetailedType",value:function(){return te.NUMBER_TIME}}]),e}(Gi),cc=function(i){gf(e,i);var t=vf(e);function e(){return ac(this,e),t.apply(this,arguments)}return sc(e,[{key:"getDetailedType",value:function(){return te.NUMBER_DATETIME}}]),e}(Gi),Tf=function(i){gf(e,i);var t=vf(e);function e(){return ac(this,e),t.apply(this,arguments)}return sc(e,[{key:"getDetailedType",value:function(){return te.NUMBER_PERCENT}}]),e}(Gi);function he(i){return typeof i=="number"||i instanceof Gi}var te;(function(i){i.NUMBER_RAW="NUMBER_RAW",i.NUMBER_DATE="NUMBER_DATE",i.NUMBER_TIME="NUMBER_TIME",i.NUMBER_DATETIME="NUMBER_DATETIME",i.NUMBER_CURRENCY="NUMBER_CURRENCY",i.NUMBER_PERCENT="NUMBER_PERCENT"})(te||(te={}));function uD(i){return i instanceof Gi?i.getDetailedType():te.NUMBER_RAW}function cD(i){if(i instanceof Gi)return i.format}function Nf(i){return i instanceof Gi?{type:i.getDetailedType(),format:i.format}:{type:te.NUMBER_RAW}}function Mte(i,t){return Lte(i)||Bte(i,t)||A6(i,t)||jte()}function jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bte(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Lte(i){if(Array.isArray(i))return i}function pD(i){return Hte(i)||zte(i)||A6(i)||Ute()}function Ute(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zte(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Hte(i){if(Array.isArray(i))return w6(i)}function pc(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=A6(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function A6(i,t){if(!!i){if(typeof i=="string")return w6(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return w6(i,t)}}function w6(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Gte(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function mD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function qte(i,t,e){return t&&mD(i.prototype,t),e&&mD(i,e),i}var Wte="i",$te=/^\s*([+-]?)\s*(([\d\.,]+(e[+-]?\d+)?)\s*([ij]?)|([ij]))\s*(([+-])\s*([+-]?)\s*(([\d\.,]+(e[+-]?\d+)?)\s*([ij]?)|([ij])))?$/,dD=function(){function i(t,e,r){var a=this;Gte(this,i),this.config=t,this.dateTimeHelper=e,this.numberLiteralsHelper=r,this.lt=function(s,o){return a.compare(s,o)<0},this.leq=function(s,o){return a.compare(s,o)<=0},this.gt=function(s,o){return a.compare(s,o)>0},this.geq=function(s,o){return a.compare(s,o)>=0},this.eq=function(s,o){return a.compare(s,o)===0},this.neq=function(s,o){return a.compare(s,o)!==0},this.pow=function(s,o){return Math.pow(W(s),W(o))},this.addWithEpsilonRaw=function(s,o){var l=s+o;return Math.abs(l)<a.actualEps*Math.abs(s)?0:l},this.addWithEpsilon=function(s,o){var l=bD(s,o);return a.ExtendedNumberFactory(a.addWithEpsilonRaw(W(s),W(o)),l)},this.unaryMinus=function(s){return oc(s,-W(s))},this.unaryPlus=function(s){return s},this.unaryPercent=function(s){return new Tf(W(s)/100)},this.concat=function(s,o){return s.concat(o)},this.nonstrictadd=function(s,o){return s instanceof x?s:o instanceof x?o:typeof s=="number"?typeof o=="number"?a.addWithEpsilonRaw(s,o):s:typeof o=="number"?o:0},this.subtract=function(s,o){var l=bD(s,o),u=W(s),c=W(o),p=u-c;return Math.abs(p)<a.actualEps*Math.abs(u)&&(p=0),a.ExtendedNumberFactory(p,l)},this.divide=function(s,o){var l=W(s),u=W(o);if(u===0)return new x(R.DIV_BY_ZERO);var c=gD(s,o);return a.ExtendedNumberFactory(l/u,c)},this.multiply=function(s,o){var l=gD(s,o);return a.ExtendedNumberFactory(W(s)*W(o),l)},this.manyToExactComplex=function(s){var o=[],l=pc(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c instanceof x)return c;if(he(c)||typeof c=="string"){var p=a.coerceScalarToComplex(c);p instanceof x||o.push(p)}}}catch(m){l.e(m)}finally{l.f()}return o},this.coerceNumbersExactRanges=function(s){return a.manyToNumbers(s,a.manyToExactNumbers)},this.coerceNumbersCoerceRangesDropNulls=function(s){return a.manyToNumbers(s,a.manyToCoercedNumbersDropNulls)},this.manyToExactNumbers=function(s){var o=[],l=pc(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c instanceof x)return c;he(c)&&o.push(W(c))}}catch(p){l.e(p)}finally{l.f()}return o},this.manyToOnlyNumbersDropNulls=function(s){var o=[],l=pc(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c instanceof x)return c;if(c===se)continue;if(he(c))o.push(W(c));else return new x(R.VALUE,D.NumberExpected)}}catch(p){l.e(p)}finally{l.f()}return o},this.manyToCoercedNumbersDropNulls=function(s){var o=[],l=pc(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c instanceof x)return c;if(c!==se){var p=a.coerceScalarToNumberOrError(c);he(p)&&o.push(W(p))}}}catch(m){l.e(m)}finally{l.f()}return o},this.collator=oD(t),this.actualEps=t.smartRounding?t.precisionEpsilon:0}return qte(i,[{key:"eqMatcherFunction",value:function(e){var r=this,a=this.buildRegex(e);return function(s){return typeof s=="string"&&a.test(r.normalizeString(s))}}},{key:"neqMatcherFunction",value:function(e){var r=this,a=this.buildRegex(e);return function(s){return typeof s!="string"||!a.test(r.normalizeString(s))}}},{key:"searchString",value:function(e,r){var a,s=this.buildRegex(e,!1),o=s.exec(r);return(a=o==null?void 0:o.index)!==null&&a!==void 0?a:-1}},{key:"requiresRegex",value:function(e){if(!this.config.useRegularExpressions&&!this.config.useWildcards)return!this.config.matchWholeCell;for(var r=0;r<e.length;r++){var a=e.charAt(r);if(Sf(a)||this.config.useRegularExpressions&&Af(a))return!0}return!1}},{key:"buildRegex",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;e=this.normalizeString(e);var a,s=this.config.useWildcards,o=this.config.useRegularExpressions;if(o)try{RegExp(e)}catch(l){o=!1,s=!1}return o?a=Zte(e,this.config.caseSensitive):s?a=Xte(e,this.config.caseSensitive):a=Yte(e,this.config.caseSensitive),this.config.matchWholeCell&&r?RegExp("^("+a+")$"):RegExp(a)}},{key:"normalizeString",value:function(e){return this.config.caseSensitive||(e=e.toLowerCase()),this.config.accentSensitive||(e=vD(e,"nfd").replace(/[\u0300-\u036f]/g,"")),e}},{key:"compare",value:function(e,r){if(typeof e=="string"||typeof r=="string"){var a=typeof e=="string"?this.dateTimeHelper.dateStringToDateNumber(e):e,s=typeof r=="string"?this.dateTimeHelper.dateStringToDateNumber(r):r;if(he(a)&&he(s))return this.floatCmp(a,s)}return e===se?e=hD(r):r===se&&(r=hD(e)),typeof e=="string"&&typeof r=="string"?this.stringCmp(e,r):typeof e=="boolean"&&typeof r=="boolean"?yD(yb(e),yb(r)):he(e)&&he(r)?this.floatCmp(e,r):e===se&&r===se?0:yD(x6(fc(e)),x6(fc(r)))}},{key:"floatCmp",value:function(e,r){var a=W(e),s=W(r),o=1+this.actualEps;return s>=0&&a*o>=s&&a<=s*o||s<=0&&a*o<=s&&a>=s*o?0:a>s?1:-1}},{key:"stringCmp",value:function(e,r){return this.collator.compare(e,r)}},{key:"coerceScalarToNumberOrError",value:function(e){var r;return e instanceof x?e:(r=this.coerceToMaybeNumber(e))!==null&&r!==void 0?r:new x(R.VALUE,D.NumberCoercion)}},{key:"coerceToMaybeNumber",value:function(e){var r;return(r=this.coerceNonDateScalarToMaybeNumber(e))!==null&&r!==void 0?r:typeof e=="string"?this.dateTimeHelper.dateStringToDateNumber(e):void 0}},{key:"coerceNonDateScalarToMaybeNumber",value:function(e){return e===se?0:typeof e=="string"?e===""?0:this.numberLiteralsHelper.numericStringToMaybeNumber(e.trim()):he(e)?e:typeof e=="boolean"?Number(e):void 0}},{key:"coerceComplexExactRanges",value:function(e){var r=[],a=pc(e),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o instanceof J)r.push(o);else if(o!==se){var l=this.coerceScalarToComplex(o);if(l instanceof x)return l;r.push(l)}}}catch(d){a.e(d)}finally{a.f()}for(var u=[],c=0,p=r;c<p.length;c++){var m=p[c];if(m instanceof J){var f=this.manyToExactComplex(m.valuesFromTopLeftCorner());if(f instanceof x)return f;u.push.apply(u,pD(f))}else u.push(m)}return u}},{key:"manyToNumbers",value:function(e,r){var a=[],s=pc(e),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l instanceof J)a.push(l);else{var u=W(this.coerceScalarToNumberOrError(l));if(u instanceof x)return u;a.push(u)}}}catch(h){s.e(h)}finally{s.f()}for(var c=[],p=0,m=a;p<m.length;p++){var f=m[p];if(f instanceof J){var d=r(f.valuesFromTopLeftCorner());if(d instanceof x)return d;c.push.apply(c,pD(d))}else c.push(f)}return c}},{key:"coerceScalarToComplex",value:function(e){return e instanceof x?e:e===se?[0,0]:he(e)?[W(e),0]:typeof e=="string"?this.coerceStringToComplex(e):new x(R.NUM,D.ComplexNumberExpected)}},{key:"coerceStringToComplex",value:function(e){var r=$te.exec(e);if(r===null)return new x(R.NUM,D.ComplexNumberExpected);var a;if(r[6]!==void 0?a=r[1]==="-"?[0,-1]:[0,1]:a=this.parseComplexToken(r[1]+r[3],r[5]),a instanceof x||r[8]===void 0)return a;var s;return r[14]!==void 0?s=r[9]==="-"?[0,-1]:[0,1]:s=this.parseComplexToken(r[9]+r[11],r[13]),s instanceof x?s:r[5]!==""||r[13]===""?new x(R.NUM,D.ComplexNumberExpected):r[8]==="+"?[a[0]+s[0],a[1]+s[1]]:[a[0]-s[0],a[1]-s[1]]}},{key:"parseComplexToken",value:function(e,r){var a=W(this.coerceNonDateScalarToMaybeNumber(e));return a===void 0?new x(R.NUM,D.ComplexNumberExpected):r===""?[a,0]:[0,a]}},{key:"ExtendedNumberFactory",value:function(e,r){var a=r.type,s=r.format;switch(a){case te.NUMBER_RAW:return e;case te.NUMBER_CURRENCY:return new db(e,s??this.config.currencySymbol[0]);case te.NUMBER_DATE:return new lc(e,s);case te.NUMBER_DATETIME:return new cc(e,s);case te.NUMBER_TIME:return new uc(e,s);case te.NUMBER_PERCENT:return new Tf(e,s)}}}]),i}();function At(i,t){var e=Mte(i,2),r=e[0],a=e[1];if(!isFinite(r)||!isFinite(a))return new x(R.NUM,D.NaN);if(t=t??Wte,a===0)return"".concat(r);var s="".concat(a===-1||a===1?"":Math.abs(a)).concat(t);return r===0?"".concat(a<0?"-":"").concat(s):"".concat(r).concat(a<0?"-":"+").concat(s)}function hb(i){return i instanceof J?i:J.fromScalar(i)}function yb(i){return Number(i)}function hD(i){return typeof i=="string"?"":he(i)?0:typeof i=="boolean"?!1:se}function bb(i){if(i instanceof x||typeof i=="boolean")return i;if(i===se)return!1;if(he(i))return W(i)!==0;var t=i.toUpperCase();return t==="TRUE"?!0:t==="FALSE"||t===""?!1:void 0}function Cf(i){return i instanceof x||typeof i=="string"?i:i===se?"":he(i)?W(i).toString():i?"TRUE":"FALSE"}function gb(i){return i===se?0:i}function yD(i,t){var e=W(i),r=W(t);return e>r?1:e<r?-1:0}function vb(i){return isNaN(i)||i===1/0||i===-1/0}function Tb(i){return i===0?0:i}function Sf(i){return["*","?"].includes(i)}var Kte=["{","}","[","]","(",")","<",">","=",".","+","-",",","\\","$","^","!"];function Af(i){return Kte.includes(i)}function Xte(i,t){for(var e="",r=0;r<i.length;r++){var a=i.charAt(r);if(a==="~"){if(r==i.length-1){e+="~";continue}var s=i.charAt(r+1);Sf(s)||Af(s)?(e+="\\"+s,r++):(e+=s,r++)}else Sf(a)?e+="."+a:Af(a)?e+="\\"+a:t?e+=a:e+=a.toLowerCase()}return e}function Yte(i,t){for(var e="",r=0;r<i.length;r++){var a=i.charAt(r);Sf(a)||Af(a)?e+="\\"+a:t?e+=a:e+=a.toLowerCase()}return e}function Zte(i,t){for(var e="",r=0;r<i.length;r++){var a=i.charAt(r);Sf(a)||Af(a)||t?e+=a:e+=a.toLowerCase()}return e}function bD(i,t){var e=Nf(i),r=e.type,a=e.format,s=Nf(t),o=s.type,l=s.format;if(r===te.NUMBER_RAW)return{type:o,format:l};if(o===te.NUMBER_RAW)return{type:r,format:a};if((r===te.NUMBER_DATETIME||r===te.NUMBER_DATE)&&(o===te.NUMBER_DATETIME||o===te.NUMBER_DATE))return{type:te.NUMBER_RAW};if(r===te.NUMBER_TIME){if(o===te.NUMBER_DATE)return{type:te.NUMBER_DATETIME,format:l+" "+a};if(o===te.NUMBER_DATETIME)return{type:te.NUMBER_DATETIME,format:l}}if(o===te.NUMBER_TIME){if(r===te.NUMBER_DATE)return{type:te.NUMBER_DATETIME,format:a+" "+l};if(r===te.NUMBER_DATETIME)return{type:te.NUMBER_DATETIME,format:a}}return{type:r,format:a}}function gD(i,t){var e=Nf(i),r=e.type,a=e.format,s=Nf(t),o=s.type,l=s.format;return r===te.NUMBER_PERCENT&&(r=te.NUMBER_RAW,a=void 0),o===te.NUMBER_PERCENT&&(o=te.NUMBER_RAW,l=void 0),r===te.NUMBER_RAW?{type:o,format:l}:o===te.NUMBER_RAW?{type:r,format:a}:{type:te.NUMBER_RAW}}function li(i){return vD(i.toLowerCase(),"nfd").replace(/[\u0300-\u036f]/g,"")}function mc(i,t){var e;if(i.isAdHoc())return(e=i.data[0])===null||e===void 0?void 0:e[0];var r=i.range;if(t.formulaAddress.sheet===r.sheet){if(r.width()===1){var a=t.formulaAddress.row-r.start.row;if(a>=0&&a<r.height())return i.data[a][0]}else if(r.height()===1){var s=t.formulaAddress.col-r.start.col;if(s>=0&&s<r.width())return i.data[0][s]}}}function vD(i,t){return typeof i.normalize=="function"?i.normalize(t.toUpperCase()):fD.default[t](i)}function TD(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=E6(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function ND(i,t){return ere(i)||Qte(i,t)||E6(i,t)||Jte()}function Jte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qte(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function ere(i){if(Array.isArray(i))return i}function CD(i){return nre(i)||rre(i)||E6(i)||tre()}function tre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E6(i,t){if(!!i){if(typeof i=="string")return R6(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R6(i,t)}}function rre(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function nre(i){if(Array.isArray(i))return R6(i)}function R6(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function ire(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function SD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function are(i,t,e){return t&&SD(i.prototype,t),e&&SD(i,e),i}var N;(function(i){i.STRING="STRING",i.NUMBER="NUMBER",i.BOOLEAN="BOOLEAN",i.SCALAR="SCALAR",i.NOERROR="NOERROR",i.RANGE="RANGE",i.INTEGER="INTEGER",i.COMPLEX="COMPLEX",i.ANY="ANY"})(N||(N={}));var Y=function(){function i(t){var e=this;ire(this,i),this.coerceScalarToNumberOrError=function(r){return e.arithmeticHelper.coerceScalarToNumberOrError(r)},this.runFunction=function(r,a,s,o){var l,u,c,p,m,f=s.parameters,d;if(s.expandRanges?d=e.listOfScalarValues(r,a):d=r.map(function(z){return[e.evaluateAst(z,a),!1]}),s.repeatLastArgs===void 0&&f.length<d.length)return new x(R.NA,D.WrongArgNumber);if(s.repeatLastArgs!==void 0&&f.length<d.length&&(d.length-f.length)%s.repeatLastArgs!=0)return new x(R.NA,D.WrongArgNumber);for(f=CD(f);f.length<d.length;){var h;(h=f).push.apply(h,CD(f.slice(f.length-s.repeatLastArgs)))}var y=1,b=1;if(!s.vectorizationForbidden&&a.arraysFlag)for(var g=0;g<d.length;g++){var v=ND(d[g],1),C=v[0];C instanceof J&&f[g].argumentType!==N.RANGE&&f[g].argumentType!==N.ANY&&(b=Math.max(b,C.height()),y=Math.max(y,C.width()))}for(var w=d.length;w<f.length;w++)if(((l=f[w])===null||l===void 0?void 0:l.defaultValue)===void 0&&!((u=f[w])===null||u===void 0?void 0:u.optionalArg))return new x(R.NA,D.WrongArgNumber);for(var S=[],A=0;A<b;A++){for(var E=[],I=0;I<y;I++){for(var V=void 0,O=[],k=0;k<f.length;k++){var M=(c=d[k])!==null&&c!==void 0?c:[void 0,void 0],L=ND(M,2),G=L[0],K=L[1];G instanceof J&&f[k].argumentType!==N.RANGE&&f[k].argumentType!==N.ANY&&!s.vectorizationForbidden&&a.arraysFlag&&(G=(p=G.data[G.height()!==1?A:0])===null||p===void 0?void 0:p[G.width()!==1?I:0]);var B=G??((m=f[k])===null||m===void 0?void 0:m.defaultValue);if(B===void 0)O.push(void 0);else{var _=G!==void 0?e.coerceToType(B,f[k],a):B;_!==void 0?(_ instanceof x&&f[k].argumentType!==N.SCALAR&&(V=V??_),O.push(_)):K||(V=V??new x(R.VALUE,D.WrongType))}}var F=V??e.returnNumberWrapper(o.apply(void 0,O),s.returnNumberType);if(b===1&&y===1)return F;if(F instanceof J)throw"Function returning array cannot be vectorized.";E.push(F)}S.push(E)}return J.onlyValues(S)},this.runFunctionWithReferenceArgument=function(r,a,s,o,l){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:function(){return new x(R.NA,D.CellRefExpected)};if(r.length===0)return e.returnNumberWrapper(o(),s.returnNumberType);if(r.length>1)return new x(R.NA,D.WrongArgNumber);for(var c=r[0];c.type===P.PARENTHESIS;)c=c.expression;var p;if(c.type===P.CELL_REFERENCE)p=c.reference.toSimpleCellAddress(a.formulaAddress);else if(c.type===P.CELL_RANGE||c.type===P.COLUMN_RANGE||c.type===P.ROW_RANGE)try{p=ae.fromAst(c,a.formulaAddress).start}catch(m){return new x(R.REF,D.CellRefExpected)}return p!==void 0?e.returnNumberWrapper(l(p),s.returnNumberType):e.runFunction(r,a,s,u)},this.interpreter=t,this.dependencyGraph=t.dependencyGraph,this.columnSearch=t.columnSearch,this.config=t.config,this.serialization=t.serialization,this.arraySizePredictor=t.arraySizePredictor,this.dateTimeHelper=t.dateTimeHelper,this.arithmeticHelper=t.arithmeticHelper}return are(i,[{key:"evaluateAst",value:function(e,r){return this.interpreter.evaluateAst(e,r)}},{key:"arraySizeForAst",value:function(e,r){return this.arraySizePredictor.checkArraySizeForAst(e,r)}},{key:"listOfScalarValues",value:function(e,r){var a=[],s=TD(e),o;try{for(s.s();!(o=s.n()).done;){var l=o.value,u=this.evaluateAst(l,r);if(u instanceof J){var c=TD(u.valuesFromTopLeftCorner()),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;a.push([m,!0])}}catch(f){c.e(f)}finally{c.f()}}else a.push([u,!1])}}catch(f){s.e(f)}finally{s.f()}return a}},{key:"coerceToType",value:function(e,r,a){var s;if(e instanceof J)switch(r.argumentType){case N.RANGE:case N.ANY:s=e;break;default:{var o=mc(e,a);if(o===void 0)return;e=o}}if(!(e instanceof J))switch(r.argumentType){case N.INTEGER:case N.NUMBER:var l=this.coerceScalarToNumberOrError(e);if(!he(l)){s=l;break}var u=W(l);if(r.maxValue!==void 0&&u>r.maxValue)return new x(R.NUM,D.ValueLarge);if(r.minValue!==void 0&&u<r.minValue)return new x(R.NUM,D.ValueSmall);if(r.lessThan!==void 0&&u>=r.lessThan)return new x(R.NUM,D.ValueLarge);if(r.greaterThan!==void 0&&u<=r.greaterThan)return new x(R.NUM,D.ValueSmall);if(r.argumentType===N.INTEGER&&!Number.isInteger(u))return new x(R.NUM,D.IntegerExpected);s=l;break;case N.STRING:s=Cf(e);break;case N.BOOLEAN:s=bb(e);break;case N.SCALAR:case N.NOERROR:case N.ANY:s=e;break;case N.RANGE:if(e instanceof x)return e;s=hb(e);break;case N.COMPLEX:return this.arithmeticHelper.coerceScalarToComplex(W(e))}return r.passSubtype||s===void 0?s:W(s)}},{key:"metadata",value:function(e){var r=this.constructor.implementedFunctions[e];if(r!==void 0)return r;throw new Error("No metadata for function ".concat(e,"."))}},{key:"returnNumberWrapper",value:function(e,r,a){return r!==void 0&&he(e)?this.arithmeticHelper.ExtendedNumberFactory(W(e),{type:r,format:a}):e}}]),i}();function sre(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=AD(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function V6(i){return ure(i)||lre(i)||AD(i)||ore()}function ore(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AD(i,t){if(!!i){if(typeof i=="string")return I6(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return I6(i,t)}}function lre(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function ure(i){if(Array.isArray(i))return I6(i)}function I6(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function wD(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function xD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ED(i,t,e){return t&&xD(i.prototype,t),e&&xD(i,e),i}var be=function(){function i(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(wD(this,i),this.width=t,this.height=e,this.isRef=r,t<=0||e<=0)throw Error("Incorrect array size")}return ED(i,[{key:"isScalar",value:function(){return this.width<=1&&this.height<=1||this.isRef}}],[{key:"fromArray",value:function(e){return new i(e.length>0?e[0].length:0,e.length)}},{key:"error",value:function(){return new i(1,1,!0)}},{key:"scalar",value:function(){return new i(1,1,!1)}}]),i}();function cre(i,t){return new be(Math.max(i.width,t.width),Math.max(i.height,t.height))}function pre(i){return new be(i.width,i.height)}var RD=function(){function i(t,e){wD(this,i),this.config=t,this.functionRegistry=e}return ED(i,[{key:"checkArraySize",value:function(e,r){return this.checkArraySizeForAst(e,{formulaAddress:r,arraysFlag:this.config.useArrayArithmetic})}},{key:"checkArraySizeForFunction",value:function(e,r){var a=this,s=this.functionRegistry.getMetadata(e.procedureName),o=this.functionRegistry.getArraySizeFunction(e.procedureName);if(o!==void 0)return o(e,r);var l=e.args.map(function(f){var d;return a.checkArraySizeForAst(f,new qr(r.formulaAddress,r.arraysFlag||((d=s==null?void 0:s.arrayFunction)!==null&&d!==void 0?d:!1)))});if(s===void 0||s.expandRanges||!r.arraysFlag||s.vectorizationForbidden||s.parameters===void 0)return new be(1,1);var u=V6(s.parameters);if(s.repeatLastArgs===void 0&&u.length<l.length||s.repeatLastArgs!==void 0&&u.length<l.length&&(l.length-u.length)%s.repeatLastArgs!=0)return be.error();for(;u.length<l.length;)u.push.apply(u,V6(u.slice(u.length-s.repeatLastArgs)));for(var c=1,p=1,m=0;m<l.length;m++)u[m].argumentType!==N.RANGE&&u[m].argumentType!==N.ANY&&(p=Math.max(p,l[m].height),c=Math.max(c,l[m].width));return new be(c,p)}},{key:"checkArraySizeForAst",value:function(e,r){var a=this;switch(e.type){case P.FUNCTION_CALL:return this.checkArraySizeForFunction(e,r);case P.CELL_RANGE:{var s=ae.fromCellRangeOrUndef(e,r.formulaAddress);return s===void 0?be.error():new be(s.width(),s.height(),!0)}case P.ARRAY:{var o=[],l=[],u=sre(e.args),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,m=p.map(function(C){return a.checkArraySizeForAst(C,r)}),f=Math.min.apply(Math,V6(m.map(function(C){return C.height}))),d=m.reduce(function(C,w){return C+w.width},0);o.push(f),l.push(d)}}catch(C){u.e(C)}finally{u.f()}var h=o.reduce(function(C,w){return C+w},0),y=Math.min.apply(Math,l);return new be(y,h)}case P.STRING:case P.NUMBER:return be.scalar();case P.CELL_REFERENCE:return new be(1,1,!0);case P.DIV_OP:case P.CONCATENATE_OP:case P.EQUALS_OP:case P.GREATER_THAN_OP:case P.GREATER_THAN_OR_EQUAL_OP:case P.LESS_THAN_OP:case P.LESS_THAN_OR_EQUAL_OP:case P.MINUS_OP:case P.NOT_EQUAL_OP:case P.PLUS_OP:case P.POWER_OP:case P.TIMES_OP:{var b=this.checkArraySizeForAst(e.left,r),g=this.checkArraySizeForAst(e.right,r);return!r.arraysFlag&&(b.height>1||b.width>1||g.height>1||g.width>1)?be.error():cre(b,g)}case P.MINUS_UNARY_OP:case P.PLUS_UNARY_OP:case P.PERCENT_OP:{var v=this.checkArraySizeForAst(e.value,r);return!r.arraysFlag&&(v.height>1||v.width>1)?be.error():pre(v)}case P.EMPTY:return be.error();default:return be.error()}}}]),i}();function VD(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=mre(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function mre(i,t){if(!!i){if(typeof i=="string")return ID(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ID(i,t)}}function ID(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function fre(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function OD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function dre(i,t,e){return t&&OD(i.prototype,t),e&&OD(i,e),i}var J=function(){function i(t,e,r,a){fre(this,i),this._data=t,this.range=e,this.dependencyGraph=r,this._hasOnlyNumbers=a,t===void 0?this.size=new be(e.width(),e.height()):this.size=new be(t[0].length,t.length)}return dre(i,[{key:"isAdHoc",value:function(){return this.range===void 0}},{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}},{key:"data",get:function(){return this.ensureThatComputed(),this._data}},{key:"ensureThatComputed",value:function(){var e=this;this._data===void 0&&(this._hasOnlyNumbers=!0,this._data=this.range.addressesArrayMap(this.dependencyGraph,function(r){var a=e.dependencyGraph.getCellValue(r);return a instanceof i?(e._hasOnlyNumbers=!1,new x(R.VALUE,D.ScalarExpected)):(he(a)||(e._hasOnlyNumbers=!1),a)}))}},{key:"valuesFromTopLeftCorner",value:function(){this.ensureThatComputed();for(var e=[],r=0;r<this._data.length;r++)for(var a=0;a<this._data[0].length;a++)e.push(this._data[r][a]);return e}},{key:"effectiveAddressesFromData",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=0;case 1:if(!(r<this.data.length)){l.next=13;break}a=this.data[r],s=0;case 4:if(!(s<a.length)){l.next=10;break}return l.next=7,$(e.sheet,e.col+s,e.row+r);case 7:++s,l.next=4;break;case 10:++r,l.next=1;break;case 13:case"end":return l.stop()}},t,this)})},{key:"entriesFromTopLeftCorner",value:regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:this.ensureThatComputed(),r=0;case 2:if(!(r<this.size.height)){o.next=13;break}a=0;case 4:if(!(a<this.size.width)){o.next=10;break}return o.next=7,[this._data[r][a],$(e.sheet,e.col+a,e.row+r)];case 7:++a,o.next=4;break;case 10:++r,o.next=2;break;case 13:case"end":return o.stop()}},t,this)})},{key:"iterateValuesFromTopLeftCorner",value:regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.delegateYield(this.valuesFromTopLeftCorner(),"t0",1);case 1:case"end":return r.stop()}},t,this)})},{key:"numberOfElements",value:function(){return this.size.width*this.size.height}},{key:"hasOnlyNumbers",value:function(){if(this._hasOnlyNumbers===void 0){this._hasOnlyNumbers=!0;var e=VD(this.data),r;try{for(e.s();!(r=e.n()).done;){var a=r.value,s=VD(a),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;if(typeof l!="number")return this._hasOnlyNumbers=!1,!1}}catch(u){s.e(u)}finally{s.f()}}}catch(u){e.e(u)}finally{e.f()}}return this._hasOnlyNumbers}},{key:"rawNumbers",value:function(){return this._data}},{key:"rawData",value:function(){var e;return this.ensureThatComputed(),(e=this._data)!==null&&e!==void 0?e:[]}},{key:"sameDimensionsAs",value:function(e){return this.width()===e.width()&&this.height()===e.height()}}],[{key:"fromRange",value:function(e,r,a){return new i(e,r,a,!0)}},{key:"onlyNumbers",value:function(e){return new i(e,void 0,void 0,!0)}},{key:"onlyValues",value:function(e){return new i(e,void 0,void 0,void 0)}},{key:"onlyRange",value:function(e,r){return new i(void 0,e,r,void 0)}},{key:"fromScalar",value:function(e){return new i([[e]],void 0,void 0,void 0)}}]),i}();function DD(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=hre(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function hre(i,t){if(!!i){if(typeof i=="string")return PD(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return PD(i,t)}}function PD(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function yre(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _D(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function bre(i,t,e){return t&&_D(i.prototype,t),e&&_D(i,e),i}var _a=function(){function i(){yre(this,i),this.changes=new Map}return bre(i,[{key:"addAll",value:function(e){var r=DD(e.changes.values()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.add(s.address,s)}}catch(o){r.e(o)}finally{r.f()}return this}},{key:"addChange",value:function(e,r,a){this.addInterpreterValue(e,r,a)}},{key:"exportChanges",value:function(e){var r=[];return this.changes.forEach(function(a){var s=e.exportChange(a);Array.isArray(s)?r=r.concat(s):r.push(s)}),r}},{key:"getChanges",value:function(){return Array.from(this.changes.values())}},{key:"isEmpty",value:function(){return this.changes.size===0}},{key:"add",value:function(e,r){var a=r.value;if(a instanceof J){var s=DD(a.effectiveAddressesFromData(e)),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;this.changes.delete("".concat(l.sheet,",").concat(l.col,",").concat(l.row))}}catch(u){s.e(u)}finally{s.f()}}this.changes.set(dc(e),r)}},{key:"addInterpreterValue",value:function(e,r,a){this.add(r,{address:r,value:e,oldValue:a})}}],[{key:"empty",value:function(){return new i}}]),i}();var fPe=j(q());var ePe=j(q()),tPe=j(Vt());var oe;(function(i){i.BUILD_ENGINE_TOTAL="BUILD_ENGINE_TOTAL",i.PARSER="PARSER",i.GRAPH_BUILD="GRAPH_BUILD",i.COLLECT_DEPENDENCIES="COLLECT_DEPENDENCIES",i.PROCESS_DEPENDENCIES="PROCESS_DEPENDENCIES",i.TOP_SORT="TOP_SORT",i.BUILD_COLUMN_INDEX="BUILD_COLUMN_INDEX",i.EVALUATION="EVALUATION",i.VLOOKUP="VLOOKUP",i.TRANSFORM_ASTS="TRANSFORM_ASTS",i.TRANSFORM_ASTS_POSTPONED="TRANSFORM_ASTS_POSTPONED",i.ADJUSTING_ADDRESS_MAPPING="ADJUSTING_ADDRESS_MAPPING",i.ADJUSTING_ARRAY_MAPPING="ADJUSTING_ARRAY_MAPPING",i.ADJUSTING_RANGES="ADJUSTING_RANGES",i.ADJUSTING_GRAPH="ADJUSTING_GRAPH",i.CRITERION_FUNCTION_FULL_CACHE_USED="CRITERION_FUNCTION_FULL_CACHE_USED",i.CRITERION_FUNCTION_PARTIAL_CACHE_USED="CRITERION_FUNCTION_PARTIAL_CACHE_USED"})(oe||(oe={}));function gre(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function kD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function vre(i,t,e){return t&&kD(i.prototype,t),e&&kD(i,e),i}var wf=function(){function i(){gre(this,i),this.stats=new Map([[oe.CRITERION_FUNCTION_FULL_CACHE_USED,0],[oe.CRITERION_FUNCTION_PARTIAL_CACHE_USED,0]]),this.startTimes=new Map}return vre(i,[{key:"incrementCriterionFunctionFullCacheUsed",value:function(){var e,r=((e=this.stats.get(oe.CRITERION_FUNCTION_FULL_CACHE_USED))!==null&&e!==void 0?e:0)+1;this.stats.set(oe.CRITERION_FUNCTION_FULL_CACHE_USED,r)}},{key:"incrementCriterionFunctionPartialCacheUsed",value:function(){var e,r=((e=this.stats.get(oe.CRITERION_FUNCTION_PARTIAL_CACHE_USED))!==null&&e!==void 0?e:0)+1;this.stats.set(oe.CRITERION_FUNCTION_PARTIAL_CACHE_USED,r)}},{key:"reset",value:function(){this.stats.clear(),this.startTimes.clear(),this.stats.set(oe.CRITERION_FUNCTION_FULL_CACHE_USED,0),this.stats.set(oe.CRITERION_FUNCTION_PARTIAL_CACHE_USED,0)}},{key:"start",value:function(e){if(this.startTimes.get(e))throw Error("Statistics ".concat(e," already started"));this.startTimes.set(e,Date.now())}},{key:"end",value:function(e){var r,a=Date.now(),s=this.startTimes.get(e);if(s){var o=(r=this.stats.get(e))!==null&&r!==void 0?r:0;o+=a-s,this.stats.set(e,o),this.startTimes.delete(e)}else throw Error("Statistics ".concat(e," not started"))}},{key:"measure",value:function(e,r){this.start(e);var a=r();return this.end(e),a}},{key:"snapshot",value:function(){return new Map(this.stats)}}]),i}();function Nb(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nb=function(e){return typeof e}:Nb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nb(i)}function Tre(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function FD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Nre(i,t,e){return t&&FD(i.prototype,t),e&&FD(i,e),i}function Cre(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&O6(i,t)}function O6(i,t){return O6=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},O6(i,t)}function Sre(i){var t=xre();return function(){var r=Cb(i),a;if(t){var s=Cb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Are(this,a)}}function Are(i,t){if(t&&(Nb(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wre(i)}function wre(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function xre(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Cb(i){return Cb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Cb(i)}var D6=function(i){Cre(e,i);var t=Sre(e);function e(){return Tre(this,e),t.apply(this,arguments)}return Nre(e,[{key:"incrementCriterionFunctionFullCacheUsed",value:function(){}},{key:"incrementCriterionFunctionPartialCacheUsed",value:function(){}},{key:"start",value:function(a){}},{key:"end",value:function(a){}}]),e}(wf);var APe=j(Nr()),wPe=j(q()),xPe=j(Vt());var Vre=ce(),Ire=BD(),Ore=Du();Vre({target:"Array",proto:!0},{fill:Ire});Ore("fill");function Dre(i,t){return kre(i)||_re(i,t)||LD(i,t)||Pre()}function Pre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _re(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function kre(i){if(Array.isArray(i))return i}function Fre(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=LD(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function LD(i,t){if(!!i){if(typeof i=="string")return UD(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return UD(i,t)}}function UD(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Mre(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function zD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jre(i,t,e){return t&&zD(i.prototype,t),e&&zD(i,e),i}var P6=function(){function i(t){Mre(this,i),this.policy=t,this.mapping=new Map}return jre(i,[{key:"getCell",value:function(e){var r=this.mapping.get(e.sheet);if(r===void 0)throw new $e(e.sheet);return r.getCell(e)}},{key:"fetchCell",value:function(e){var r=this.mapping.get(e.sheet);if(r===void 0)throw new $e(e.sheet);var a=r.getCell(e);if(!a)throw Error("Vertex for address missing in AddressMapping");return a}},{key:"strategyFor",value:function(e){var r=this.mapping.get(e);if(r===void 0)throw new $e(e);return r}},{key:"addSheet",value:function(e,r){if(this.mapping.has(e))throw Error("Sheet already added");this.mapping.set(e,r)}},{key:"autoAddSheet",value:function(e,r,a){var s=a.height,o=a.width,l=a.fill,u=this.policy.call(l);this.addSheet(e,new u(o,s))}},{key:"getCellValue",value:function(e){var r=this.getCell(e);return r===void 0?se:r instanceof He?r.getArrayCellValue(e):r.getCellValue()}},{key:"getRawValue",value:function(e){var r=this.getCell(e);return r instanceof pn?r.getValues().rawValue:r instanceof He?r.getArrayCellRawValue(e):null}},{key:"setCell",value:function(e,r){var a=this.mapping.get(e.sheet);if(!a)throw Error("Sheet not initialized");a.setCell(e,r)}},{key:"moveCell",value:function(e,r){var a=this.mapping.get(e.sheet);if(!a)throw Error("Sheet not initialized.");if(e.sheet!==r.sheet)throw Error("Cannot move cells between sheets.");if(a.has(r))throw new Error("Cannot move cell. Destination already occupied.");var s=a.getCell(e);if(s===void 0)throw new Error("Cannot move cell. No cell with such address.");this.setCell(r,s),this.removeCell(e)}},{key:"removeCell",value:function(e){var r=this.mapping.get(e.sheet);if(!r)throw Error("Sheet not initialized");r.removeCell(e)}},{key:"has",value:function(e){var r=this.mapping.get(e.sheet);return r===void 0?!1:r.has(e)}},{key:"getHeight",value:function(e){var r=this.mapping.get(e);if(r===void 0)throw new $e(e);return r.getHeight()}},{key:"getWidth",value:function(e){var r=this.mapping.get(e);if(!r)throw new $e(e);return r.getWidth()}},{key:"addRows",value:function(e,r,a){var s=this.mapping.get(e);if(s===void 0)throw new $e(e);s.addRows(r,a)}},{key:"removeRows",value:function(e){var r=this.mapping.get(e.sheet);if(r===void 0)throw new $e(e.sheet);r.removeRows(e)}},{key:"removeSheet",value:function(e){this.mapping.delete(e)}},{key:"addColumns",value:function(e,r,a){var s=this.mapping.get(e);if(s===void 0)throw new $e(e);s.addColumns(r,a)}},{key:"removeColumns",value:function(e){var r=this.mapping.get(e.sheet);if(r===void 0)throw new $e(e.sheet);r.removeColumns(e)}},{key:"verticesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(this.mapping.get(e.sheet).verticesFromRowsSpan(e),"t0",1);case 1:case"end":return a.stop()}},t,this)})},{key:"verticesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(this.mapping.get(e.sheet).verticesFromColumnsSpan(e),"t0",1);case 1:case"end":return a.stop()}},t,this)})},{key:"entriesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(this.mapping.get(e.sheet).entriesFromRowsSpan(e),"t0",1);case 1:case"end":return a.stop()}},t,this)})},{key:"entriesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(this.mapping.get(e.sheet).entriesFromColumnsSpan(e),"t0",1);case 1:case"end":return a.stop()}},t,this)})},{key:"entries",value:regeneratorRuntime.mark(function t(){var e,r,a,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=Fre(this.mapping.entries()),u.prev=1,e.s();case 3:if((r=e.n()).done){u.next=8;break}return a=Dre(r.value,2),s=a[0],o=a[1],u.delegateYield(o.getEntries(s),"t0",6);case 6:u.next=3;break;case 8:u.next=13;break;case 10:u.prev=10,u.t1=u.catch(1),e.e(u.t1);case 13:return u.prev=13,e.f(),u.finish(13);case 16:case"end":return u.stop()}},t,this,[[1,10,13,16]])})},{key:"sheetEntries",value:regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=this.mapping.get(e),r===void 0){s.next=5;break}return s.delegateYield(r.getEntries(e),"t0",3);case 3:s.next=6;break;case 5:throw new $e(e);case 6:case"end":return s.stop()}},t,this)})}]),i}();var UPe=j(Nr()),zPe=j(q()),HPe=j(Vt());function Sb(i,t){return Ure(i)||Lre(i,t)||HD(i,t)||Bre()}function Bre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lre(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Ure(i){if(Array.isArray(i))return i}function ka(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=HD(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function HD(i,t){if(!!i){if(typeof i=="string")return GD(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return GD(i,t)}}function GD(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function zre(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function qD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Hre(i,t,e){return t&&qD(i.prototype,t),e&&qD(i,e),i}var _6=function(){function i(){zre(this,i),this.arrayMapping=new Map}return Hre(i,[{key:"getArray",value:function(e){var r=this.getArrayByCorner(e.start);if(r==null?void 0:r.getRange().sameAs(e))return r}},{key:"getArrayByCorner",value:function(e){return this.arrayMapping.get(dc(e))}},{key:"setArray",value:function(e,r){this.arrayMapping.set(dc(e.start),r)}},{key:"removeArray",value:function(e){typeof e=="string"?this.arrayMapping.delete(e):this.arrayMapping.delete(dc(e.start))}},{key:"count",value:function(){return this.arrayMapping.size}},{key:"arraysInRows",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=ka(this.arrayMapping.entries()),c.prev=1,r.s();case 3:if((a=r.n()).done){c.next=10;break}if(s=Sb(a.value,2),o=s[0],l=s[1],!l.spansThroughSheetRows(e.sheet,e.rowStart,e.rowEnd)){c.next=8;break}return c.next=8,[o,l];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),r.e(c.t0);case 15:return c.prev=15,r.f(),c.finish(15);case 18:case"end":return c.stop()}},t,this,[[1,12,15,18]])})},{key:"arraysInCols",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=ka(this.arrayMapping.entries()),c.prev=1,r.s();case 3:if((a=r.n()).done){c.next=10;break}if(s=Sb(a.value,2),o=s[0],l=s[1],!l.spansThroughSheetColumn(e.sheet,e.columnStart,e.columnEnd)){c.next=8;break}return c.next=8,[o,l];case 8:c.next=3;break;case 10:c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),r.e(c.t0);case 15:return c.prev=15,r.f(),c.finish(15);case 18:case"end":return c.stop()}},t,this,[[1,12,15,18]])})},{key:"isFormulaArrayInRow",value:function(e,r){var a=ka(this.arrayMapping.values()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o.spansThroughSheetRows(e,r))return!0}}catch(l){a.e(l)}finally{a.f()}return!1}},{key:"isFormulaArrayInAllRows",value:function(e){var r=!0,a=ka(e.rows()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;this.isFormulaArrayInRow(e.sheet,o)||(r=!1)}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"isFormulaArrayInColumn",value:function(e,r){var a=ka(this.arrayMapping.values()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(o.spansThroughSheetColumn(e,r))return!0}}catch(l){a.e(l)}finally{a.f()}return!1}},{key:"isFormulaArrayInAllColumns",value:function(e){var r=!0,a=ka(e.columns()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;this.isFormulaArrayInColumn(e.sheet,o)||(r=!1)}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"isFormulaArrayInRange",value:function(e){var r=ka(this.arrayMapping.values()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.getRange().doesOverlap(e))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}},{key:"isFormulaArrayAtAddress",value:function(e){var r=ka(this.arrayMapping.values()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s.getRange().addressInRange(e))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}},{key:"moveArrayVerticesAfterRowByRows",value:function(e,r,a){this.updateArrayVerticesInSheet(e,function(s,o){var l=o.getRange();return r<=l.start.row?[l.shifted(0,a),o]:void 0})}},{key:"moveArrayVerticesAfterColumnByColumns",value:function(e,r,a){this.updateArrayVerticesInSheet(e,function(s,o){var l=o.getRange();return r<=l.start.col?[l.shifted(a,0),o]:void 0})}},{key:"updateArrayVerticesInSheet",value:function(e,r){var a=this,s=Array(),o=ka(this.arrayMapping.entries()),l;try{for(o.s();!(l=o.n()).done;){var u=Sb(l.value,2),c=u[0],p=u[1];if(p.sheet===e){var m=r(c,p);m!==void 0&&(this.removeArray(c),s.push(m))}}}catch(f){o.e(f)}finally{o.f()}s.forEach(function(f){var d=Sb(f,2),h=d[0],y=d[1];a.setArray(h,y)})}}]),i}();var A_e=j(q());"use strict";var Gre=ce(),qre=Au(),Wre=fs(),$re=ri(),Kre=Hr(),Xre=jh(),Yre=Tm(),Zre=Eu(),Jre=Zre("splice"),Qre=Math.max,ene=Math.min,tne=9007199254740991,rne="Maximum allowed length exceeded";Gre({target:"Array",proto:!0,forced:!Jre},{splice:function(t,e){var r=Kre(this),a=$re(r),s=qre(t,a),o=arguments.length,l,u,c,p,m,f;if(o===0?l=u=0:o===1?(l=0,u=a-s):(l=o-2,u=ene(Qre(Wre(e),0),a-s)),a+l-u>tne)throw TypeError(rne);for(c=Xre(r,u),p=0;p<u;p++)m=s+p,m in r&&Yre(c,p,r[m]);if(c.length=u,l<u){for(p=s;p<a-u;p++)m=p+u,f=p+l,m in r?r[f]=r[m]:delete r[f];for(p=a;p>a-u+l;p--)delete r[p-1]}else if(l>u)for(p=a-u;p>s;p--)m=p+u-1,f=p+l-1,m in r?r[f]=r[m]:delete r[f];for(p=0;p<l;p++)r[p+s]=arguments[p+2];return r.length=a-u+l,c}});var c_e=j(q());function nne(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=$D(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function WD(i){return sne(i)||ane(i)||$D(i)||ine()}function ine(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $D(i,t){if(!!i){if(typeof i=="string")return k6(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return k6(i,t)}}function ane(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function sne(i){if(Array.isArray(i))return k6(i)}function k6(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function F6(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function KD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function M6(i,t,e){return t&&KD(i.prototype,t),e&&KD(i,e),i}var Ho=function(){function i(t){F6(this,i),this.size=t}return M6(i,[{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}},{key:"get",value:function(e,r){throw Error("Array not computed yet.")}},{key:"simpleRangeValue",value:function(){throw Error("Array not computed yet.")}}]),i}(),xf=function(){function i(t){F6(this,i),this.size=new be(t.length>0?t[0].length:0,t.length),this.array=t}return M6(i,[{key:"simpleRangeValue",value:function(){return J.onlyValues(this.array)}},{key:"addRows",value:function(e,r){var a;(a=this.array).splice.apply(a,[e,0].concat(WD(this.nullArrays(r,this.width())))),this.size.height+=r}},{key:"addColumns",value:function(e,r){for(var a=0;a<this.height();a++){var s;(s=this.array[a]).splice.apply(s,[e,0].concat(WD(new Array(r).fill(se))))}this.size.width+=r}},{key:"removeRows",value:function(e,r){if(this.outOfBound(0,e)||this.outOfBound(0,r))throw Error("Array index out of bound");var a=r-e+1;this.array.splice(e,a),this.size.height-=a}},{key:"removeColumns",value:function(e,r){if(this.outOfBound(e,0)||this.outOfBound(r,0))throw Error("Array index out of bound");var a=r-e+1,s=nne(this.array),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;l.splice(e,a)}}catch(u){s.e(u)}finally{s.f()}this.size.width-=a}},{key:"nullArrays",value:function(e,r){for(var a=[],s=0;s<e;++s)a.push(new Array(r).fill(se));return a}},{key:"get",value:function(e,r){if(this.outOfBound(e,r))throw Error("Array index out of bound");return this.array[r][e]}},{key:"set",value:function(e,r,a){if(this.outOfBound(e,r))throw Error("Array index out of bound");this.array[r][e]=a}},{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}},{key:"raw",value:function(){return this.array}},{key:"resize",value:function(e){if(this.height()<e.height&&this.addRows(this.height(),e.height-this.height()),this.height()>e.height||(this.width()<e.width&&this.addColumns(this.width(),e.width-this.width()),this.width()>e.width))throw"Resizing to smaller array"}},{key:"outOfBound",value:function(e,r){return e<0||r<0||r>this.size.height-1||e>this.size.width-1}}],[{key:"fromInterpreterValue",value:function(e){return e instanceof J?new i(e.data):new i([[e]])}}]),i}(),Ab=function(){function i(t,e){F6(this,i),this.error=t,this.size=e}return M6(i,[{key:"get",value:function(e,r){return this.error}},{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}},{key:"simpleRangeValue",value:function(){return this.error}}]),i}();function wb(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?wb=function(e){return typeof e}:wb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wb(i)}function XD(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&j6(i,t)}function j6(i,t){return j6=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},j6(i,t)}function YD(i){var t=une();return function(){var r=xb(i),a;if(t){var s=xb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return one(this,a)}}function one(i,t){if(t&&(wb(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lne(i)}function lne(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function une(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function xb(i){return xb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xb(i)}function cne(i,t){return dne(i)||fne(i,t)||mne(i,t)||pne()}function pne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mne(i,t){if(!!i){if(typeof i=="string")return ZD(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ZD(i,t)}}function ZD(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function fne(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function dne(i){if(Array.isArray(i))return i}function B6(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function JD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function L6(i,t,e){return t&&JD(i.prototype,t),e&&JD(i,e),i}var lr=function(){function i(t,e,r){B6(this,i),this.formula=t,this.cellAddress=e,this.version=r}return L6(i,[{key:"width",get:function(){return 1}},{key:"height",get:function(){return 1}},{key:"getFormula",value:function(e){return this.ensureRecentData(e),this.formula}},{key:"ensureRecentData",value:function(e){if(this.version!=e.version()){var r=e.applyTransformations(this.formula,this.cellAddress,this.version),a=cne(r,3),s=a[0],o=a[1],l=a[2];this.formula=s,this.cellAddress=o,this.version=l}}},{key:"getAddress",value:function(e){return this.ensureRecentData(e),this.cellAddress}}],[{key:"fromAst",value:function(e,r,a,s){return a.isScalar()?new Wr(e,r,s):new He(e,r,a,s)}}]),i}(),He=function(i){XD(e,i);var t=YD(e);function e(r,a,s){var o,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return B6(this,e),o=t.call(this,r,a,l),s.isRef?o.array=new Ab(new x(R.REF,D.NoSpaceForArrayResult),be.error()):o.array=new Ho(s),o}return L6(e,[{key:"width",get:function(){return this.array.width()}},{key:"height",get:function(){return this.array.height()}},{key:"sheet",get:function(){return this.cellAddress.sheet}},{key:"leftCorner",get:function(){return this.cellAddress}},{key:"setCellValue",value:function(a){if(a instanceof x)return this.setErrorValue(a),a;var s=xf.fromInterpreterValue(a);return s.resize(this.array.size),this.array=s,a}},{key:"getCellValue",value:function(){if(this.array instanceof Ho)throw Error("Array not computed yet.");return this.array.simpleRangeValue()}},{key:"valueOrUndef",value:function(){if(!(this.array instanceof Ho))return this.array.simpleRangeValue()}},{key:"getArrayCellValue",value:function(a){var s=a.col-this.cellAddress.col,o=a.row-this.cellAddress.row;try{return this.array.get(s,o)}catch(l){return new x(R.REF)}}},{key:"getArrayCellRawValue",value:function(a){var s=this.getArrayCellValue(a);if(!(s instanceof x||s===se))return W(s)}},{key:"setArrayCellValue",value:function(a,s){var o=a.col-this.cellAddress.col,l=a.row-this.cellAddress.row;this.array instanceof xf&&this.array.set(o,l,s)}},{key:"setNoSpace",value:function(){return this.array=new Ab(new x(R.SPILL,D.NoSpaceForArrayResult),be.error()),this.getCellValue()}},{key:"getRange",value:function(){return ae.spanFrom(this.cellAddress,this.width,this.height)}},{key:"setAddress",value:function(a){this.cellAddress=a}},{key:"setFormula",value:function(a){this.formula=a}},{key:"spansThroughSheetRows",value:function(a,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s;return this.cellAddress.sheet===a&&this.cellAddress.row<=o&&s<this.cellAddress.row+this.height}},{key:"spansThroughSheetColumn",value:function(a,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s;return this.cellAddress.sheet===a&&this.cellAddress.col<=o&&s<this.cellAddress.col+this.width}},{key:"isComputed",value:function(){return!(this.array instanceof Ho)}},{key:"columnsFromArray",value:function(){return Wn.fromNumberOfColumns(this.cellAddress.sheet,this.cellAddress.col,this.width)}},{key:"rowsFromArray",value:function(){return ln.fromNumberOfRows(this.cellAddress.sheet,this.cellAddress.row,this.height)}},{key:"ensureRecentData",value:function(a){}},{key:"isLeftCorner",value:function(a){return Pa(this.cellAddress,a)}},{key:"setErrorValue",value:function(a){this.array=new Ab(a,this.array.size)}}]),e}(lr),Wr=function(i){XD(e,i);var t=YD(e);function e(r,a,s){return B6(this,e),t.call(this,r,a,s)}return L6(e,[{key:"valueOrUndef",value:function(){return this.cachedCellValue}},{key:"setCellValue",value:function(a){return this.cachedCellValue=a,this.cachedCellValue}},{key:"getCellValue",value:function(){if(this.cachedCellValue!==void 0)return this.cachedCellValue;throw Error("Value of the formula cell is not computed.")}},{key:"isComputed",value:function(){return this.cachedCellValue!==void 0}}]),e}(lr);var L_e=j(q()),U_e=j(Vt());var q_e=j(gs());function hne(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function QD(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function yne(i,t,e){return t&&QD(i.prototype,t),e&&QD(i,e),i}var Kt=function(){function i(t){hne(this,i),this.range=t,this.functionCache=new Map,this.criterionFunctionCache=new Map,this.dependentCacheRanges=new Set,this.bruteForce=!1}return yne(i,[{key:"start",get:function(){return this.range.start}},{key:"end",get:function(){return this.range.end}},{key:"sheet",get:function(){return this.range.start.sheet}},{key:"getFunctionValue",value:function(e){return this.functionCache.get(e)}},{key:"setFunctionValue",value:function(e,r){this.functionCache.set(e,r)}},{key:"getCriterionFunctionValue",value:function(e,r){var a;return(a=this.getCriterionFunctionValues(e).get(r))===null||a===void 0?void 0:a[0]}},{key:"getCriterionFunctionValues",value:function(e){var r;return(r=this.criterionFunctionCache.get(e))!==null&&r!==void 0?r:new Map}},{key:"setCriterionFunctionValues",value:function(e,r){this.criterionFunctionCache.set(e,r)}},{key:"addDependentCacheRange",value:function(e){e!==this&&this.dependentCacheRanges.add(e)}},{key:"clearCache",value:function(){this.functionCache.clear(),this.criterionFunctionCache.clear(),this.dependentCacheRanges.forEach(function(e){return e.criterionFunctionCache.clear()}),this.dependentCacheRanges.clear()}},{key:"getStart",value:function(){return this.start}},{key:"getEnd",value:function(){return this.end}}]),i}();var e9=function(t,e,r,a,s){if(e instanceof Kt){var o=e.range.intersectionWith(r);return o!==void 0?Array.from(o.addresses(s)):[]}var l,u;if(e instanceof lr)l=e.getFormula(a),u=e.getAddress(a);else return[];return zo(l,t).filter(function(c){return c instanceof df}).map(function(c){return c.dependency.toSimpleCellAddress(u)}).filter(function(c){return r.addressInRange(c)})};var nke=j(q());var ake=j(gs());var lke=j(Vt());"use strict";var bne=ce(),gne=xu(),vne=[].reverse,t9=[1,2];bne({target:"Array",proto:!0,forced:String(t9)===String(t9.reverse())},{reverse:function(){return gne(this)&&(this.length=this.length),vne.call(this)}});function r9(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=Tne(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function Tne(i,t){if(!!i){if(typeof i=="string")return n9(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n9(i,t)}}function n9(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Nne(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function i9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Cne(i,t,e){return t&&i9(i.prototype,t),e&&i9(i,e),i}var Fa;(function(i){i[i.ON_STACK=0]="ON_STACK",i[i.PROCESSED=1]="PROCESSED",i[i.POPPED=2]="POPPED"})(Fa||(Fa={}));var U6=function(){function i(t){Nne(this,i),this.dependencyQuery=t,this.nodes=new Set,this.specialNodes=new Set,this.specialNodesStructuralChanges=new Set,this.specialNodesRecentlyChanged=new Set,this.infiniteRanges=new Set,this.edges=new Map}return Cne(i,[{key:"addNode",value:function(e){this.nodes.add(e),this.edges.has(e)||this.edges.set(e,new Set)}},{key:"addEdge",value:function(e,r){if(!this.nodes.has(e))throw new Error("Unknown node ".concat(e));if(!this.nodes.has(r))throw new Error("Unknown node ".concat(r));this.edges.get(e).add(r)}},{key:"removeEdge",value:function(e,r){if(this.existsEdge(e,r))this.edges.get(e).delete(r);else throw new Error("Edge does not exist")}},{key:"softRemoveEdge",value:function(e,r){var a;(a=this.edges.get(e))===null||a===void 0||a.delete(r)}},{key:"removeIncomingEdges",value:function(e){this.edges.forEach(function(r){r.delete(e)})}},{key:"adjacentNodes",value:function(e){return this.edges.get(e)}},{key:"adjacentNodesCount",value:function(e){return this.adjacentNodes(e).size}},{key:"hasNode",value:function(e){return this.nodes.has(e)}},{key:"nodesCount",value:function(){return this.nodes.size}},{key:"edgesCount",value:function(){var e=0;return this.edges.forEach(function(r){return e+=r.size}),e}},{key:"removeNode",value:function(e){var r=r9(this.adjacentNodes(e).values()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.markNodeAsSpecialRecentlyChanged(s)}}catch(o){r.e(o)}finally{r.f()}return this.edges.delete(e),this.nodes.delete(e),this.specialNodes.delete(e),this.specialNodesRecentlyChanged.delete(e),this.specialNodesStructuralChanges.delete(e),this.infiniteRanges.delete(e),this.removeDependencies(e)}},{key:"markNodeAsSpecial",value:function(e){this.specialNodes.add(e)}},{key:"markNodeAsSpecialRecentlyChanged",value:function(e){this.nodes.has(e)&&this.specialNodesRecentlyChanged.add(e)}},{key:"markNodeAsChangingWithStructure",value:function(e){this.specialNodesStructuralChanges.add(e)}},{key:"clearSpecialNodesRecentlyChanged",value:function(){this.specialNodesRecentlyChanged.clear()}},{key:"markNodeAsInfiniteRange",value:function(e){this.infiniteRanges.add(e)}},{key:"existsEdge",value:function(e,r){var a,s;return(s=(a=this.edges.get(e))===null||a===void 0?void 0:a.has(r))!==null&&s!==void 0?s:!1}},{key:"topSortWithScc",value:function(){return this.getTopSortedWithSccSubgraphFrom(Array.from(this.nodes),function(){return!0},function(){})}},{key:"getTopSortedWithSccSubgraphFrom",value:function(e,r,a){var s=this,o=new Map,l=new Map,u=new Map,c=new Set,p=new Map,m=[],f=0,d=new Set;e.reverse(),e.forEach(function(g){if(p.get(g)===void 0){var v=[g],C=[];p.set(g,Fa.ON_STACK);for(var w=function(){var A=v[v.length-1];switch(p.get(A)){case Fa.ON_STACK:{o.set(A,f),l.set(A,f),C.push(A),f++,s.adjacentNodes(A).forEach(function(V){o.get(V)===void 0&&(v.push(V),u.set(V,A),p.set(V,Fa.ON_STACK))}),p.set(A,Fa.PROCESSED);break}case Fa.PROCESSED:{var E;if(E=o.get(A),s.adjacentNodes(A).forEach(function(V){c.has(V)||(u.get(V)===A?E=Math.min(E,l.get(V)):E=Math.min(E,o.get(V)))}),l.set(A,E),E===o.get(A)){var I=[];do I.push(C[C.length-1]),C.pop();while(I[I.length-1]!==A);I.forEach(function(V){c.add(V)}),m.push.apply(m,I),I.length>1&&I.forEach(function(V){d.add(V)})}v.pop(),p.set(A,Fa.POPPED);break}case Fa.POPPED:{v.pop();break}}};v.length>0;)w()}});var h=new Set(e),y=[],b=[];return m.reverse(),m.forEach(function(g){d.has(g)||s.adjacentNodes(g).has(g)?(b.push(g),a(g),s.adjacentNodes(g).forEach(function(v){return h.add(v)})):(y.push(g),h.has(g)&&r(g)&&s.adjacentNodes(g).forEach(function(v){return h.add(v)}))}),{sorted:y,cycled:b}}},{key:"getDependencies",value:function(e){var r=[];return this.edges.forEach(function(a,s){a.has(e)&&r.push(s)}),r}},{key:"removeDependencies",value:function(e){var r=this.dependencyQuery(e),a=r9(r),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;this.softRemoveEdge(o,e)}}catch(l){a.e(l)}finally{a.f()}return r}}]),i}();var Ske=j(Nr()),Ake=j(q()),wke=j(Vt());"use strict";var Vne=ce(),Ine=To(),One=Hr(),Dne=ri(),h9=Pr(),H6=De(),Pne=s9(),_ne=Pm(),y9=u9(),kne=p9(),b9=Tu(),g9=d9(),Go=[],v9=Go.sort,Fne=H6(function(){Go.sort(void 0)}),Mne=H6(function(){Go.sort(null)}),jne=_ne("sort"),T9=!H6(function(){if(b9)return b9<70;if(!(y9&&y9>3)){if(kne)return!0;if(g9)return g9<603;var i="",t,e,r,a;for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(a=0;a<47;a++)Go.push({k:e+a,v:r})}for(Go.sort(function(s,o){return o.v-s.v}),a=0;a<Go.length;a++)e=Go[a].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return i!=="DGBEFHACIJK"}}),Bne=Fne||!Mne||!jne||!T9,Lne=function(i){return function(t,e){return e===void 0?-1:t===void 0?1:i!==void 0?+i(t,e)||0:h9(t)>h9(e)?1:-1}};Vne({target:"Array",proto:!0,forced:Bne},{sort:function(t){t!==void 0&&Ine(t);var e=One(this);if(T9)return t===void 0?v9.call(e):v9.call(e,t);var r=[],a=Dne(e),s,o;for(o=0;o<a;o++)o in e&&r.push(e[o]);for(r=Pne(r,Lne(t)),s=r.length,o=0;o<s;)e[o]=r[o++];for(;o<a;)delete e[o++];return e}});function G6(i,t){return Hne(i)||zne(i,t)||N9(i,t)||Une()}function Une(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zne(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Hne(i){if(Array.isArray(i))return i}function q6(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=N9(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function N9(i,t){if(!!i){if(typeof i=="string")return C9(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C9(i,t)}}function C9(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Gne(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function S9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function qne(i,t,e){return t&&S9(i.prototype,t),e&&S9(i,e),i}var W6=function(){function i(){Gne(this,i),this.rangeMapping=new Map}return qne(i,[{key:"getMappingSize",value:function(e){var r,a;return(a=(r=this.rangeMapping.get(e))===null||r===void 0?void 0:r.size)!==null&&a!==void 0?a:0}},{key:"setRange",value:function(e){var r=this.rangeMapping.get(e.getStart().sheet);r===void 0&&(r=new Map,this.rangeMapping.set(e.getStart().sheet,r));var a=Eb(e.getStart(),e.getEnd());r.set(a,e)}},{key:"removeRange",value:function(e){var r=e.getStart().sheet,a=this.rangeMapping.get(r);if(a!==void 0){var s=Eb(e.getStart(),e.getEnd());a.delete(s),a.size===0&&this.rangeMapping.delete(r)}}},{key:"getRange",value:function(e,r){var a=this.rangeMapping.get(e.sheet),s=Eb(e,r);return a==null?void 0:a.get(s)}},{key:"fetchRange",value:function(e,r){var a=this.getRange(e,r);if(!a)throw Error("Range does not exist");return a}},{key:"truncateRanges",value:function(e,r){var a=Array(),s=Array(),o=Array(),l=e.sheet,u=q6(this.entriesFromSheet(e.sheet)),c;try{for(u.s();!(c=u.n()).done;){var p=G6(c.value,2),m=p[0],f=p[1],d=f.range;e.start<=r(f.range.end)&&(d.removeSpan(e),d.shouldBeRemoved()?(this.removeByKey(l,m),a.push(f)):s.push([m,f]),o.push(f))}}catch(A){u.e(A)}finally{u.f()}var h=[];s.sort(function(A,E){return $ne(A[1],E[1],r)});for(var y=0,b=s;y<b.length;y++){var g=G6(b[y],2),v=g[0],C=g[1],w=Wne(C.range);if(w!==v){var S=this.getByKey(l,w);this.removeByKey(l,v),S!==void 0&&C!=S?h.push([S,C]):this.setRange(C)}}return{verticesToRemove:a,verticesToMerge:h,verticesWithChangedSize:o}}},{key:"moveAllRangesInSheetAfterRowByRows",value:function(e,r,a){return this.updateVerticesFromSheet(e,function(s,o){return r<=o.start.row?(o.range.shiftByRows(a),{changedSize:!1,vertex:o}):r>o.start.row&&r<=o.end.row?(o.range.expandByRows(a),{changedSize:!0,vertex:o}):void 0})}},{key:"moveAllRangesInSheetAfterColumnByColumns",value:function(e,r,a){return this.updateVerticesFromSheet(e,function(s,o){return r<=o.start.col?(o.range.shiftByColumns(a),{changedSize:!1,vertex:o}):r>o.start.col&&r<=o.end.col?(o.range.expandByColumns(a),{changedSize:!0,vertex:o}):void 0})}},{key:"moveRangesInsideSourceRange",value:function(e,r,a,s){this.updateVerticesFromSheet(e.sheet,function(o,l){if(e.containsRange(l.range))return l.range.shiftByColumns(r),l.range.shiftByRows(a),l.range.moveToSheet(s),{changedSize:!1,vertex:l}})}},{key:"removeRangesInSheet",value:function(e){if(this.rangeMapping.has(e)){var r=this.rangeMapping.get(e).values();return this.rangeMapping.delete(e),r}return[][Symbol.iterator]()}},{key:"rangesInSheet",value:regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=this.rangeMapping.get(e),r){s.next=3;break}return s.abrupt("return");case 3:return s.delegateYield(r.values(),"t0",4);case 4:case"end":return s.stop()}},t,this)})},{key:"rangeVerticesContainedInRange",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=q6(this.rangesInSheet(e.sheet)),l.prev=1,r.s();case 3:if((a=r.n()).done){l.next=10;break}if(s=a.value,!e.containsRange(s.range)){l.next=8;break}return l.next=8,s;case 8:l.next=3;break;case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),r.e(l.t0);case 15:return l.prev=15,r.f(),l.finish(15);case 18:case"end":return l.stop()}},t,this,[[1,12,15,18]])})},{key:"findSmallerRange",value:function(e){if(e.height()>1&&Number.isFinite(e.height())){var r=$(e.end.sheet,e.end.col,e.end.row-1),a=this.getRange(e.start,r);if(a!==void 0){var s=new ae($(e.start.sheet,e.start.col,e.end.row),e.end);return{smallerRangeVertex:a,restRange:s}}}return{restRange:e}}},{key:"entriesFromSheet",value:regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(r=this.rangeMapping.get(e),r){s.next=3;break}return s.abrupt("return");case 3:return s.delegateYield(r.entries(),"t0",4);case 4:case"end":return s.stop()}},t,this)})},{key:"removeByKey",value:function(e,r){this.rangeMapping.get(e).delete(r)}},{key:"getByKey",value:function(e,r){var a;return(a=this.rangeMapping.get(e))===null||a===void 0?void 0:a.get(r)}},{key:"updateVerticesFromSheet",value:function(e,r){var a=this,s=Array(),o=q6(this.entriesFromSheet(e)),l;try{for(o.s();!(l=o.n()).done;){var u=G6(l.value,2),c=u[0],p=u[1],m=r(c,p);m!==void 0&&(this.removeByKey(e,c),s.push(m))}}catch(f){o.e(f)}finally{o.f()}return s.forEach(function(f){a.setRange(f.vertex)}),{verticesWithChangedSize:s.filter(function(f){return f.changedSize}).map(function(f){return f.vertex})}}}]),i}();function Eb(i,t){return"".concat(i.col,",").concat(i.row,",").concat(t.col,",").concat(t.row)}function Wne(i){return Eb(i.start,i.end)}var $ne=function(t,e,r){var a=r(t.range.start),s=r(t.range.start);if(a===s){var o=r(t.range.end),l=r(e.range.end);return o-l}else return a-s};var yFe=j(Nr()),bFe=j(q()),gFe=j(Vt());var Kne=ce(),Xne=Hr(),A9=wu(),Yne=De(),Zne=Yne(function(){A9(1)});Kne({target:"Object",stat:!0,forced:Zne},{keys:function(t){return A9(Xne(t))}});var rie=ce(),nie=$6().values;rie({target:"Object",stat:!0},{values:function(t){return nie(t)}});var Jke=j(q());var eFe=j(gs());function E9(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=iie(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function iie(i,t){if(!!i){if(typeof i=="string")return R9(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R9(i,t)}}function R9(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function aie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function V9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function sie(i,t,e){return t&&V9(i.prototype,t),e&&V9(i,e),i}var I9=function(){function i(t,e,r){aie(this,i),this.functions=t,this.errors=e,this.ui=r,this._protectedTranslations={VERSION:"VERSION"},this.checkUI(),this.checkErrors(),this.checkFunctionTranslations(this.functions),Object.assign(this.functions,this._protectedTranslations)}return sie(i,[{key:"extendFunctions",value:function(e){this.checkFunctionTranslations(e),Object.assign(this.functions,e)}},{key:"buildFunctionMapping",value:function(){var e=this;return Object.keys(this.functions).reduce(function(r,a){return r[e.functions[a]]=a,r},{})}},{key:"buildErrorMapping",value:function(){var e=this;return Object.keys(this.errors).reduce(function(r,a){return r[e.errors[a]]=a,r},{})}},{key:"isFunctionTranslated",value:function(e){return this.functions[e]!==void 0}},{key:"getFunctionTranslations",value:function(e){var r=[],a=E9(e),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;this.isFunctionTranslated(o)&&r.push(this.functions[o])}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"getFunctionTranslation",value:function(e){var r=this.functions[e];if(r===void 0)throw new As("functions.".concat(e));return r}},{key:"getMaybeFunctionTranslation",value:function(e){return this.functions[e]}},{key:"getErrorTranslation",value:function(e){if(e===R.LIC)return"#".concat(R.LIC,"!");var r=this.errors[e];if(r===void 0)throw new As("errors.".concat(e));return r}},{key:"getUITranslation",value:function(e){var r=this.ui[e];if(r===void 0)throw new As("ui.".concat(e));return r}},{key:"checkUI",value:function(){for(var e=0,r=Object.values(_s);e<r.length;e++){var a=r[e];if(!(a in this.ui))throw new As("ui.".concat(a))}}},{key:"checkErrors",value:function(){for(var e=0,r=Object.values(R);e<r.length;e++){var a=r[e];if(!(a in this.errors)&&a!==R.LIC)throw new As("errors.".concat(a))}}},{key:"checkFunctionTranslations",value:function(e){var r=new Set(Object.getOwnPropertyNames(e)),a=E9(Object.getOwnPropertyNames(this._protectedTranslations)),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;if(r.has(o))throw new yy(o)}}catch(l){a.e(l)}finally{a.f()}}}]),i}();function K6(i){return new I9(Object.assign({},i.functions),Object.assign({},i.errors),Object.assign({},i.ui))}var _s;(function(i){i.NEW_SHEET_PREFIX="NEW_SHEET_PREFIX"})(_s||(_s={}));function oie(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=lie(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function lie(i,t){if(!!i){if(typeof i=="string")return O9(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O9(i,t)}}function O9(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function D9(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function P9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function _9(i,t,e){return t&&P9(i.prototype,t),e&&P9(i,e),i}function hc(i){return i.toLowerCase()}var uie=function(){function i(t,e){D9(this,i),this.id=t,this.displayName=e}return _9(i,[{key:"canonicalName",get:function(){return hc(this.displayName)}}]),i}(),X6=function(){function i(t){var e=this;D9(this,i),this.languages=t,this.mappingFromCanonicalName=new Map,this.mappingFromId=new Map,this.lastSheetId=-1,this.fetch=function(r){var a=e.mappingFromCanonicalName.get(hc(r));if(a===void 0)throw new iy(r);return a.id},this.get=function(r){var a;return(a=e.mappingFromCanonicalName.get(hc(r)))===null||a===void 0?void 0:a.id},this.fetchDisplayName=function(r){return e.fetchSheetById(r).displayName},this.sheetNamePrefix=t.getUITranslation(_s.NEW_SHEET_PREFIX)}return _9(i,[{key:"addSheet",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"".concat(this.sheetNamePrefix).concat(this.lastSheetId+2),r=hc(e);if(this.mappingFromCanonicalName.has(r))throw new Ns(e);this.lastSheetId++;var a=new uie(this.lastSheetId,e);return this.store(a),a.id}},{key:"removeSheet",value:function(e){var r=this.fetchSheetById(e);e==this.lastSheetId&&--this.lastSheetId,this.mappingFromCanonicalName.delete(r.canonicalName),this.mappingFromId.delete(r.id)}},{key:"getDisplayName",value:function(e){var r;return(r=this.mappingFromId.get(e))===null||r===void 0?void 0:r.displayName}},{key:"displayNames",value:regeneratorRuntime.mark(function t(){var e,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=oie(this.mappingFromCanonicalName.values()),o.prev=1,e.s();case 3:if((r=e.n()).done){o.next=9;break}return a=r.value,o.next=7,a.displayName;case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),e.e(o.t0);case 14:return o.prev=14,e.f(),o.finish(14);case 17:case"end":return o.stop()}},t,this,[[1,11,14,17]])})},{key:"numberOfSheets",value:function(){return this.mappingFromCanonicalName.size}},{key:"hasSheetWithId",value:function(e){return this.mappingFromId.has(e)}},{key:"hasSheetWithName",value:function(e){return this.mappingFromCanonicalName.has(hc(e))}},{key:"renameSheet",value:function(e,r){var a=this.fetchSheetById(e),s=a.displayName;if(s!==r){var o=this.mappingFromCanonicalName.get(hc(r));if(o!==void 0&&o.id!==a.id)throw new Ns(r);var l=a.canonicalName;return this.mappingFromCanonicalName.delete(l),a.displayName=r,this.store(a),s}}},{key:"sheetNames",value:function(){return Array.from(this.mappingFromId.values()).map(function(e){return e.displayName})}},{key:"store",value:function(e){this.mappingFromId.set(e.id,e),this.mappingFromCanonicalName.set(e.canonicalName,e)}},{key:"fetchSheetById",value:function(e){var r=this.mappingFromId.get(e);if(r===void 0)throw new $e(e);return r}}]),i}();function Rb(i,t,e){return cie()?Rb=Reflect.construct:Rb=function(a,s,o){var l=[null];l.push.apply(l,s);var u=Function.bind.apply(a,l),c=new u;return o&&Y6(c,o.prototype),c},Rb.apply(null,arguments)}function cie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Y6(i,t){return Y6=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Y6(i,t)}function Z6(i){return fie(i)||mie(i)||J6(i)||pie()}function pie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mie(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function fie(i){if(Array.isArray(i))return Q6(i)}function le(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=J6(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function $r(i,t){return yie(i)||hie(i,t)||J6(i,t)||die()}function die(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J6(i,t){if(!!i){if(typeof i=="string")return Q6(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Q6(i,t)}}function Q6(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function hie(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function yie(i){if(Array.isArray(i))return i}function bie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function k9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function gie(i,t,e){return t&&k9(i.prototype,t),e&&k9(i,e),i}var eS=function(){function i(t,e,r,a,s,o,l,u){var c=this;bie(this,i),this.addressMapping=t,this.rangeMapping=e,this.sheetMapping=r,this.arrayMapping=a,this.stats=s,this.lazilyTransformingAstService=o,this.functionRegistry=l,this.namedExpressions=u,this.changes=_a.empty(),this.dependencyQueryAddresses=function(p){if(p instanceof Kt)return c.rangeDependencyQuery(p).map(function(y){var b=$r(y,2),g=b[0],v=b[1];return g});var m=c.formulaDependencyQuery(p);if(m!==void 0){var f=$r(m,2),d=f[0],h=f[1];return h.map(function(y){return y instanceof xn?c.namedExpressions.namedExpressionOrPlaceholder(y.name,d.sheet).address:ft(y)?y:mf(y.start,y.end)})}else return[]},this.dependencyQueryVertices=function(p){if(p instanceof Kt)return c.rangeDependencyQuery(p).map(function(y){var b=$r(y,2),g=b[0],v=b[1];return v});var m=c.formulaDependencyQuery(p);if(m!==void 0){var f=$r(m,2),d=f[0],h=f[1];return h.map(function(y){if(y instanceof ae)return c.rangeMapping.fetchRange(y.start,y.end);if(y instanceof xn){var b=c.namedExpressions.namedExpressionOrPlaceholder(y.name,d.sheet);return c.addressMapping.fetchCell(b.address)}else return c.addressMapping.fetchCell(y)})}else return[]},this.rangeDependencyQuery=function(p){var m=[],f=c.rangeMapping.findSmallerRange(p.range),d=f.smallerRangeVertex,h=f.restRange,y;d!==void 0&&c.graph.adjacentNodes(d).has(p)?(y=h,m.push([new ae(d.start,d.end),d])):y=p.range;var b=le(y.addresses(c)),g;try{for(b.s();!(g=b.n()).done;){var v=g.value,C=c.addressMapping.getCell(v);C instanceof $n&&(C.address=v),C!==void 0&&m.push([v,C])}}catch(w){b.e(w)}finally{b.f()}return m},this.formulaDependencyQuery=function(p){var m,f;if(p instanceof lr)f=p.getAddress(c.lazilyTransformingAstService),m=p.getFormula(c.lazilyTransformingAstService);else return;var d=zo(m,c.functionRegistry);return[f,cn(d,f)]},this.graph=new U6(this.dependencyQueryVertices)}return gie(i,[{key:"setFormulaToCell",value:function(e,r,a,s,o,l){var u=lr.fromAst(r,e,s,this.lazilyTransformingAstService.version());return this.exchangeOrAddFormulaVertex(u),this.processCellDependencies(a,u),this.graph.markNodeAsSpecialRecentlyChanged(u),o&&this.markAsVolatile(u),l&&this.markAsDependentOnStructureChange(u),this.correctInfiniteRangesDependency(e),this.getAndClearContentChanges()}},{key:"setParsingErrorToCell",value:function(e,r){var a=this.shrinkPossibleArrayAndGetCell(e);return this.exchangeOrAddGraphNode(a,r),this.addressMapping.setCell(e,r),this.graph.markNodeAsSpecialRecentlyChanged(r),this.correctInfiniteRangesDependency(e),this.getAndClearContentChanges()}},{key:"setValueToCell",value:function(e,r){var a=this.shrinkPossibleArrayAndGetCell(e);if(a instanceof He&&this.arrayMapping.removeArray(a.getRange()),a instanceof pn){var s=a.getValues();s.rawValue!==r.rawValue&&(a.setValues(r),this.graph.markNodeAsSpecialRecentlyChanged(a))}else{var o=new pn(r.parsedValue,r.rawValue);this.exchangeOrAddGraphNode(a,o),this.addressMapping.setCell(e,o),this.graph.markNodeAsSpecialRecentlyChanged(o)}return this.correctInfiniteRangesDependency(e),this.getAndClearContentChanges()}},{key:"setCellEmpty",value:function(e){var r=this.shrinkPossibleArrayAndGetCell(e);if(r===void 0)return _a.empty();if(this.graph.adjacentNodes(r).size>0){var a=new $n(e);this.exchangeGraphNode(r,a),this.graph.adjacentNodesCount(a)===0?(this.removeVertex(a),this.addressMapping.removeCell(e)):(this.graph.markNodeAsSpecialRecentlyChanged(a),this.addressMapping.setCell(e,a))}else this.removeVertex(r),this.addressMapping.removeCell(e);return this.getAndClearContentChanges()}},{key:"ensureThatVertexIsNonArrayCellVertex",value:function(e){if(e instanceof He)throw new Error("Illegal operation")}},{key:"clearRecentlyChangedVertices",value:function(){this.graph.clearSpecialNodesRecentlyChanged()}},{key:"verticesToRecompute",value:function(){return new Set([].concat(Z6(this.graph.specialNodesRecentlyChanged),Z6(this.volatileVertices())))}},{key:"processCellDependencies",value:function(e,r){var a=this;e.forEach(function(s){if(s instanceof ae){var o=s,l=a.getRange(o.start,o.end);l===void 0&&(l=new Kt(o),a.rangeMapping.setRange(l)),a.graph.addNode(l),o.isFinite()||a.graph.markNodeAsInfiniteRange(l);var u=a.rangeMapping.findSmallerRange(o),c=u.smallerRangeVertex,p=u.restRange;if(c!==void 0){if(a.graph.addEdge(c,l),l.bruteForce){l.bruteForce=!1;var m=le(o.addresses(a)),f;try{for(m.s();!(f=m.n()).done;){var d=f.value;a.graph.removeEdge(a.fetchCell(d),l)}}catch(w){m.e(w)}finally{m.f()}}}else l.bruteForce=!0;var h=a.arrayMapping.getArray(p);if(h!==void 0)a.graph.addEdge(h,l);else{var y=le(p.addresses(a)),b;try{for(y.s();!(b=y.n()).done;){var g=b.value;a.graph.addEdge(a.fetchCellOrCreateEmpty(g),l)}}catch(w){y.e(w)}finally{y.f()}}a.graph.addEdge(l,r),o.isFinite()&&a.correctInfiniteRangesDependenciesByRangeVertex(l)}else if(s instanceof xn){var v=r.getAddress(a.lazilyTransformingAstService).sheet,C=a.fetchNamedExpressionVertex(s.name,v);a.graph.addEdge(C,r)}else a.graph.addEdge(a.fetchCellOrCreateEmpty(s),r)})}},{key:"fetchNamedExpressionVertex",value:function(e,r){var a=this.namedExpressions.namedExpressionOrPlaceholder(e,r);return this.fetchCellOrCreateEmpty(a.address)}},{key:"exchangeNode",value:function(e,r){var a=this.fetchCellOrCreateEmpty(e),s=this.fetchCellOrCreateEmpty(r);this.addressMapping.removeCell(e),this.exchangeGraphNode(a,s)}},{key:"correctInfiniteRangesDependency",value:function(e){var r=void 0,a=le(this.graph.infiniteRanges),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=o;l.range.addressInRange(e)&&(r=r??this.fetchCellOrCreateEmpty(e),this.graph.addEdge(r,l))}}catch(u){a.e(u)}finally{a.f()}}},{key:"fetchCellOrCreateEmpty",value:function(e){var r=this.addressMapping.getCell(e);return r===void 0&&(r=new $n(e),this.graph.addNode(r),this.addressMapping.setCell(e,r)),r}},{key:"removeRows",value:function(e){var r=this;this.stats.measure(oe.ADJUSTING_GRAPH,function(){var s=le(r.addressMapping.entriesFromRowsSpan(e)),o;try{for(s.s();!(o=s.n()).done;){var l=$r(o.value,2),u=l[0],c=l[1],p=le(r.graph.adjacentNodes(c)),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;r.graph.markNodeAsSpecialRecentlyChanged(f)}}catch(d){p.e(d)}finally{p.f()}if(c instanceof He)if(c.isLeftCorner(u))r.shrinkArrayToCorner(c),r.arrayMapping.removeArray(c.getRange());else continue;r.removeVertex(c)}}catch(d){s.e(d)}finally{s.f()}}),this.stats.measure(oe.ADJUSTING_ADDRESS_MAPPING,function(){r.addressMapping.removeRows(e)});var a=this.stats.measure(oe.ADJUSTING_RANGES,function(){var s=r.truncateRanges(e,function(o){return o.row});return r.getArrayVerticesRelatedToRanges(s)});return this.stats.measure(oe.ADJUSTING_ARRAY_MAPPING,function(){r.fixArraysAfterRemovingRows(e.sheet,e.rowStart,e.numberOfRows)}),this.addStructuralNodesToChangeSet(),{affectedArrays:a,contentChanges:this.getAndClearContentChanges()}}},{key:"removeSheet",value:function(e){var r=this,a=new Set,s=le(this.addressMapping.sheetEntries(e)),o;try{for(s.s();!(o=s.n()).done;){var l=$r(o.value,2),u=l[0],c=l[1];if(c instanceof He){if(a.has(c))continue;a.add(c)}var p=le(this.graph.adjacentNodes(c)),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;this.graph.markNodeAsSpecialRecentlyChanged(f)}}catch(d){p.e(d)}finally{p.f()}this.removeVertex(c),this.addressMapping.removeCell(u)}}catch(d){s.e(d)}finally{s.f()}this.stats.measure(oe.ADJUSTING_ARRAY_MAPPING,function(){var d=le(a.values()),h;try{for(d.s();!(h=d.n()).done;){var y=h.value;r.arrayMapping.removeArray(y.getRange())}}catch(b){d.e(b)}finally{d.f()}}),this.stats.measure(oe.ADJUSTING_RANGES,function(){var d=r.rangeMapping.removeRangesInSheet(e),h=le(d),y;try{for(h.s();!(y=h.n()).done;){var b=y.value;r.removeVertex(b)}}catch(g){h.e(g)}finally{h.f()}r.stats.measure(oe.ADJUSTING_ADDRESS_MAPPING,function(){r.addressMapping.removeSheet(e)})}),this.addStructuralNodesToChangeSet()}},{key:"clearSheet",value:function(e){var r=new Set,a=le(this.addressMapping.sheetEntries(e)),s;try{for(a.s();!(s=a.n()).done;){var o=$r(s.value,2),l=o[0],u=o[1];u instanceof He?r.add(u):this.setCellEmpty(l)}}catch(f){a.e(f)}finally{a.f()}var c=le(r.values()),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;this.setArrayEmpty(m)}}catch(f){c.e(f)}finally{c.f()}this.addStructuralNodesToChangeSet()}},{key:"removeColumns",value:function(e){var r=this;this.stats.measure(oe.ADJUSTING_GRAPH,function(){var s=le(r.addressMapping.entriesFromColumnsSpan(e)),o;try{for(s.s();!(o=s.n()).done;){var l=$r(o.value,2),u=l[0],c=l[1],p=le(r.graph.adjacentNodes(c)),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;r.graph.markNodeAsSpecialRecentlyChanged(f)}}catch(d){p.e(d)}finally{p.f()}if(c instanceof He)if(c.isLeftCorner(u))r.shrinkArrayToCorner(c),r.arrayMapping.removeArray(c.getRange());else continue;r.removeVertex(c)}}catch(d){s.e(d)}finally{s.f()}}),this.stats.measure(oe.ADJUSTING_ADDRESS_MAPPING,function(){r.addressMapping.removeColumns(e)});var a=this.stats.measure(oe.ADJUSTING_RANGES,function(){var s=r.truncateRanges(e,function(o){return o.col});return r.getArrayVerticesRelatedToRanges(s)});return this.stats.measure(oe.ADJUSTING_ARRAY_MAPPING,function(){return r.fixArraysAfterRemovingColumns(e.sheet,e.columnStart,e.numberOfColumns)}),this.addStructuralNodesToChangeSet(),{affectedArrays:a,contentChanges:this.getAndClearContentChanges()}}},{key:"addRows",value:function(e){var r=this;this.stats.measure(oe.ADJUSTING_ADDRESS_MAPPING,function(){r.addressMapping.addRows(e.sheet,e.rowStart,e.numberOfRows)});var a=this.stats.measure(oe.ADJUSTING_RANGES,function(){var u=r.rangeMapping.moveAllRangesInSheetAfterRowByRows(e.sheet,e.rowStart,e.numberOfRows);return r.fixRangesWhenAddingRows(e.sheet,e.rowStart,e.numberOfRows),r.getArrayVerticesRelatedToRanges(u.verticesWithChangedSize)});this.stats.measure(oe.ADJUSTING_ARRAY_MAPPING,function(){r.fixArraysAfterAddingRow(e.sheet,e.rowStart,e.numberOfRows)});var s=le(this.addressMapping.verticesFromRowsSpan(e)),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;this.graph.markNodeAsSpecialRecentlyChanged(l)}}catch(u){s.e(u)}finally{s.f()}return this.addStructuralNodesToChangeSet(),{affectedArrays:a}}},{key:"addColumns",value:function(e){var r=this;this.stats.measure(oe.ADJUSTING_ADDRESS_MAPPING,function(){r.addressMapping.addColumns(e.sheet,e.columnStart,e.numberOfColumns)});var a=this.stats.measure(oe.ADJUSTING_RANGES,function(){var u=r.rangeMapping.moveAllRangesInSheetAfterColumnByColumns(e.sheet,e.columnStart,e.numberOfColumns);return r.fixRangesWhenAddingColumns(e.sheet,e.columnStart,e.numberOfColumns),r.getArrayVerticesRelatedToRanges(u.verticesWithChangedSize)});this.stats.measure(oe.ADJUSTING_ARRAY_MAPPING,function(){return r.fixArraysAfterAddingColumn(e.sheet,e.columnStart,e.numberOfColumns)});var s=le(this.addressMapping.verticesFromColumnsSpan(e)),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;this.graph.markNodeAsSpecialRecentlyChanged(l)}}catch(u){s.e(u)}finally{s.f()}return this.addStructuralNodesToChangeSet(),{affectedArrays:a,contentChanges:this.getAndClearContentChanges()}}},{key:"ensureNoArrayInRange",value:function(e){if(this.arrayMapping.isFormulaArrayInRange(e))throw Error("It is not possible to move / replace cells with array")}},{key:"isThereSpaceForArray",value:function(e){var r=le(e.getRange().addresses(this)),a;try{for(r.s();!(a=r.n()).done;){var s=a.value,o=this.addressMapping.getCell(s);if(o!==void 0&&!(o instanceof $n)&&o!==e)return!1}}catch(l){r.e(l)}finally{r.f()}return!0}},{key:"moveCells",value:function(e,r,a,s){var o=le(e.addressesWithDirection(r,a,this)),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=$(s,u.col+r,u.row+a),p=this.addressMapping.getCell(u),m=this.addressMapping.getCell(c);if(this.addressMapping.removeCell(u),p!==void 0){this.graph.markNodeAsSpecialRecentlyChanged(p),this.addressMapping.setCell(c,p);var f=void 0,d=le(this.graph.adjacentNodes(p)),h;try{for(d.s();!(h=d.n()).done;){var y=h.value;y instanceof Kt&&!e.containsRange(y.range)&&(f=f??this.fetchCellOrCreateEmpty(u),this.graph.addEdge(f,y),this.graph.removeEdge(p,y))}}catch(L){d.e(L)}finally{d.f()}f&&(this.graph.markNodeAsSpecialRecentlyChanged(f),this.addressMapping.setCell(u,f))}if(m!==void 0){p===void 0&&this.addressMapping.removeCell(c);var b=le(this.graph.adjacentNodes(m)),g;try{for(b.s();!(g=b.n()).done;){var v=g.value;p=p??this.fetchCellOrCreateEmpty(c),this.graph.addEdge(p,v),this.graph.markNodeAsSpecialRecentlyChanged(p)}}catch(L){b.e(L)}finally{b.f()}this.removeVertex(m)}}}catch(L){o.e(L)}finally{o.f()}var C=le(this.rangeMapping.rangeVerticesContainedInRange(e)),w;try{for(C.s();!(w=C.n()).done;){var S=w.value,A=le(this.graph.adjacentNodes(S)),E;try{for(A.s();!(E=A.n()).done;){var I=E.value;if(I instanceof Kt&&!e.containsRange(I.range)){this.graph.removeEdge(S,I);var V=le(S.range.addresses(this)),O;try{for(V.s();!(O=V.n()).done;){var k=O.value,M=this.fetchCellOrCreateEmpty(k);this.graph.addEdge(M,I),this.addressMapping.setCell(k,M),this.graph.markNodeAsSpecialRecentlyChanged(M)}}catch(L){V.e(L)}finally{V.f()}}}}catch(L){A.e(L)}finally{A.f()}}}catch(L){C.e(L)}finally{C.f()}this.rangeMapping.moveRangesInsideSourceRange(e,r,a,s)}},{key:"setArrayEmpty",value:function(e){var r=ae.spanFrom(e.getAddress(this.lazilyTransformingAstService),e.width,e.height),a=this.graph.adjacentNodes(e),s=le(r.addresses(this)),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;this.addressMapping.removeCell(l)}}catch(b){s.e(b)}finally{s.f()}var u=le(a.values()),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,m=e9(this.functionRegistry,p,e.getRange(),this.lazilyTransformingAstService,this),f=le(m),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,y=this.fetchCellOrCreateEmpty(h);this.graph.addEdge(y,p)}}catch(b){f.e(b)}finally{f.f()}m.length>0&&this.graph.markNodeAsSpecialRecentlyChanged(p)}}catch(b){u.e(b)}finally{u.f()}this.removeVertex(e),this.arrayMapping.removeArray(e.getRange())}},{key:"addVertex",value:function(e,r){this.graph.addNode(r),this.addressMapping.setCell(e,r)}},{key:"addArrayVertex",value:function(e,r){this.graph.addNode(r),this.setAddressMappingForArrayVertex(r,e)}},{key:"arrayFormulaNodes",value:regeneratorRuntime.mark(function t(){var e,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=le(this.graph.nodes),o.prev=1,e.s();case 3:if((r=e.n()).done){o.next=10;break}if(a=r.value,!(a instanceof He)){o.next=8;break}return o.next=8,a;case 8:o.next=3;break;case 10:o.next=15;break;case 12:o.prev=12,o.t0=o.catch(1),e.e(o.t0);case 15:return o.prev=15,e.f(),o.finish(15);case 18:case"end":return o.stop()}},t,this,[[1,12,15,18]])})},{key:"entriesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(this.addressMapping.entriesFromRowsSpan(e),"t0",1);case 1:case"end":return a.stop()}},t,this)})},{key:"entriesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.delegateYield(this.addressMapping.entriesFromColumnsSpan(e),"t0",1);case 1:case"end":return a.stop()}},t,this)})},{key:"existsVertex",value:function(e){return this.addressMapping.has(e)}},{key:"fetchCell",value:function(e){return this.addressMapping.fetchCell(e)}},{key:"getCell",value:function(e){return this.addressMapping.getCell(e)}},{key:"getCellValue",value:function(e){return this.addressMapping.getCellValue(e)}},{key:"getRawValue",value:function(e){return this.addressMapping.getRawValue(e)}},{key:"getScalarValue",value:function(e){var r=this.addressMapping.getCellValue(e);return r instanceof J?new x(R.VALUE,D.ScalarExpected):r}},{key:"existsEdge",value:function(e,r){return this.graph.existsEdge(e,r)}},{key:"getSheetId",value:function(e){return this.sheetMapping.fetch(e)}},{key:"getSheetHeight",value:function(e){return this.addressMapping.getHeight(e)}},{key:"getSheetWidth",value:function(e){return this.addressMapping.getWidth(e)}},{key:"getArray",value:function(e){return this.arrayMapping.getArray(e)}},{key:"setArray",value:function(e,r){this.arrayMapping.setArray(e,r)}},{key:"getRange",value:function(e,r){return this.rangeMapping.getRange(e,r)}},{key:"topSortWithScc",value:function(){return this.graph.topSortWithScc()}},{key:"markAsVolatile",value:function(e){this.graph.markNodeAsSpecial(e)}},{key:"markAsDependentOnStructureChange",value:function(e){this.graph.markNodeAsChangingWithStructure(e)}},{key:"forceApplyPostponedTransformations",value:function(){var e=le(this.graph.nodes.values()),r;try{for(e.s();!(r=e.n()).done;){var a=r.value;a instanceof Wr&&a.ensureRecentData(this.lazilyTransformingAstService)}}catch(s){e.e(s)}finally{e.f()}}},{key:"volatileVertices",value:function(){return this.graph.specialNodes}},{key:"getArrayVerticesRelatedToRanges",value:function(e){var r=this,a=e.map(function(s){return r.graph.hasNode(s)?Array.from(r.graph.adjacentNodes(s)).filter(function(o){return o instanceof He}):[]});return Rb(Set,Z6(a))}},{key:"rawValuesFromRange",value:regeneratorRuntime.mark(function t(e){var r,a,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=le(e.addresses(this)),u.prev=1,r.s();case 3:if((a=r.n()).done){u.next=11;break}if(s=a.value,o=this.getScalarValue(s),o===se){u.next=9;break}return u.next=9,[W(o),s];case 9:u.next=3;break;case 11:u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),r.e(u.t0);case 16:return u.prev=16,r.f(),u.finish(16);case 19:case"end":return u.stop()}},t,this,[[1,13,16,19]])})},{key:"entriesFromRange",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=le(e.addresses(this)),l.prev=1,r.s();case 3:if((a=r.n()).done){l.next=9;break}return s=a.value,l.next=7,[s,this.getCell(s)];case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),r.e(l.t0);case 14:return l.prev=14,r.f(),l.finish(14);case 17:case"end":return l.stop()}},t,this,[[1,11,14,17]])})},{key:"exchangeGraphNode",value:function(e,r){var a=this;this.graph.addNode(r);var s=this.graph.adjacentNodes(e);this.removeVertex(e),s.forEach(function(o){a.graph.hasNode(o)&&a.graph.addEdge(r,o)})}},{key:"exchangeOrAddGraphNode",value:function(e,r){e?this.exchangeGraphNode(e,r):this.graph.addNode(r)}},{key:"computeListOfValuesInRange",value:function(e){var r=[],a=le(e.addresses(this)),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=this.getScalarValue(o);r.push(l)}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"shrinkArrayToCorner",value:function(e){this.cleanAddressMappingUnderArray(e);var r=le(this.adjacentArrayVertices(e)),a;try{for(r.s();!(a=r.n()).done;){var s=a.value,o=void 0;s instanceof lr?o=this.formulaDirectDependenciesToArray(s,e):o=this.rangeDirectDependenciesToArray(s,e);var l=!1,u=le(o),c;try{for(u.s();!(c=u.n()).done;){var p=$r(c.value,2),m=p[0],f=p[1];e.isLeftCorner(m)&&(l=!0),this.graph.addEdge(f,s),this.graph.markNodeAsSpecialRecentlyChanged(f)}}catch(d){u.e(d)}finally{u.f()}l||this.graph.removeEdge(e,s)}}catch(d){r.e(d)}finally{r.f()}this.graph.markNodeAsSpecialRecentlyChanged(e)}},{key:"isArrayInternalCell",value:function(e){var r=this.getCell(e);return r instanceof He&&!r.isLeftCorner(e)}},{key:"getAndClearContentChanges",value:function(){var e=this.changes;return this.changes=_a.empty(),e}},{key:"getAdjacentNodesAddresses",value:function(e){var r=this,a=this.graph.adjacentNodes(e),s=[];return a.forEach(function(o){var l=o;l instanceof Kt?s.push(mf(l.start,l.end)):s.push(l.getAddress(r.lazilyTransformingAstService))}),s}},{key:"correctInfiniteRangesDependenciesByRangeVertex",value:function(e){var r=le(this.graph.infiniteRanges),a;try{for(r.s();!(a=r.n()).done;){var s=a.value,o=s,l=e.range.intersectionWith(o.range);if(l!==void 0){var u=le(l.addresses(this)),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;this.graph.addEdge(this.fetchCellOrCreateEmpty(p),s)}}catch(m){u.e(m)}finally{u.f()}}}}catch(m){r.e(m)}finally{r.f()}}},{key:"cleanAddressMappingUnderArray",value:function(e){var r=e.getRange(),a=le(r.addresses(this)),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=e.getArrayCellValue(o);this.getCell(o)===e?e.isLeftCorner(o)?this.changes.addChange(new x(R.REF),o,l):(this.addressMapping.removeCell(o),this.changes.addChange(se,o,l)):this.changes.addChange(se,o,l)}}catch(u){a.e(u)}finally{a.f()}}},{key:"formulaDirectDependenciesToArray",value:regeneratorRuntime.mark(function t(e,r){var a,s,o,l,u,c,p,m;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(s=(a=this.formulaDependencyQuery(e))!==null&&a!==void 0?a:[],o=$r(s,2),l=o[1],l!==void 0){d.next=3;break}return d.abrupt("return");case 3:u=le(l),d.prev=4,u.s();case 6:if((c=u.n()).done){d.next=16;break}if(p=c.value,!(p instanceof xn||p instanceof ae)){d.next=10;break}return d.abrupt("continue",14);case 10:if(!r.getRange().addressInRange(p)){d.next=14;break}return m=this.fetchCellOrCreateEmpty(p),d.next=14,[p,m];case 14:d.next=6;break;case 16:d.next=21;break;case 18:d.prev=18,d.t0=d.catch(4),u.e(d.t0);case 21:return d.prev=21,u.f(),d.finish(21);case 24:case"end":return d.stop()}},t,this,[[4,18,21,24]])})},{key:"rangeDirectDependenciesToArray",value:regeneratorRuntime.mark(function t(e,r){var a,s,o,l,u,c;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:a=this.rangeMapping.findSmallerRange(e.range),s=a.restRange,o=le(s.addresses(this)),m.prev=2,o.s();case 4:if((l=o.n()).done){m.next=12;break}if(u=l.value,!r.getRange().addressInRange(u)){m.next=10;break}return c=this.fetchCellOrCreateEmpty(u),m.next=10,[u,c];case 10:m.next=4;break;case 12:m.next=17;break;case 14:m.prev=14,m.t0=m.catch(2),o.e(m.t0);case 17:return m.prev=17,o.f(),m.finish(17);case 20:case"end":return m.stop()}},t,this,[[2,14,17,20]])})},{key:"adjacentArrayVertices",value:regeneratorRuntime.mark(function t(e){var r,a,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=this.graph.adjacentNodes(e),a=le(r),u.prev=2,a.s();case 4:if((s=a.n()).done){u.next=11;break}if(o=s.value,!(o instanceof lr||o instanceof Kt)){u.next=9;break}return u.next=9,o;case 9:u.next=4;break;case 11:u.next=16;break;case 13:u.prev=13,u.t0=u.catch(2),a.e(u.t0);case 16:return u.prev=16,a.f(),u.finish(16);case 19:case"end":return u.stop()}},t,this,[[2,13,16,19]])})},{key:"addStructuralNodesToChangeSet",value:function(){var e=le(this.graph.specialNodesStructuralChanges),r;try{for(e.s();!(r=e.n()).done;){var a=r.value;this.graph.markNodeAsSpecialRecentlyChanged(a)}}catch(s){e.e(s)}finally{e.f()}}},{key:"fixRangesWhenAddingRows",value:function(e,r,a){for(var s=Array.from(this.rangeMapping.rangesInSheet(e)),o=0,l=s;o<l.length;o++){var u=l[o];if(u.range.includesRow(r+a))if(u.bruteForce){var c=u.range.rangeWithSameWidth(r,a),p=le(c.addresses(this)),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;this.graph.addEdge(this.fetchCellOrCreateEmpty(f),u)}}catch(g){p.e(g)}finally{p.f()}}else{var d=u,h=this.rangeMapping.findSmallerRange(d.range);if(h.smallerRangeVertex!==void 0)continue;for(;h.smallerRangeVertex===void 0;){var y=new Kt(ae.spanFrom(d.range.start,d.range.width(),d.range.height()-1));this.rangeMapping.setRange(y),this.graph.addNode(y);var b=new ae($(d.range.start.sheet,d.range.start.col,d.range.end.row),d.range.end);this.addAllFromRange(b,d),this.graph.addEdge(y,d),d=y,h=this.rangeMapping.findSmallerRange(d.range)}this.graph.addEdge(h.smallerRangeVertex,d),this.addAllFromRange(h.restRange,d),this.graph.removeEdge(h.smallerRangeVertex,u)}}}},{key:"addAllFromRange",value:function(e,r){var a=le(e.addresses(this)),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;this.graph.addEdge(this.fetchCellOrCreateEmpty(o),r)}}catch(l){a.e(l)}finally{a.f()}}},{key:"fixRangesWhenAddingColumns",value:function(e,r,a){var s=le(this.rangeMapping.rangesInSheet(e)),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.range.includesColumn(r+a)){var u=void 0;l.bruteForce?u=l.range.rangeWithSameHeight(r,a):u=ae.spanFrom($(e,r,l.range.end.row),a,1);var c=le(u.addresses(this)),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;this.graph.addEdge(this.fetchCellOrCreateEmpty(m),l)}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){s.e(f)}finally{s.f()}}},{key:"exchangeOrAddFormulaVertex",value:function(e){var r=e.getAddress(this.lazilyTransformingAstService),a=ae.spanFrom(r,e.width,e.height),s=this.shrinkPossibleArrayAndGetCell(r);if(e instanceof He&&this.setArray(a,e),this.exchangeOrAddGraphNode(s,e),this.addressMapping.setCell(r,e),e instanceof He){if(!this.isThereSpaceForArray(e))return;var o=le(a.addresses(this)),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;if(!e.isLeftCorner(u)){var c=this.getCell(u);this.exchangeOrAddGraphNode(c,e)}}}catch(d){o.e(d)}finally{o.f()}}var p=le(a.addresses(this)),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;this.addressMapping.setCell(f,e)}}catch(d){p.e(d)}finally{p.f()}}},{key:"setAddressMappingForArrayVertex",value:function(e,r){if(this.addressMapping.setCell(r,e),e instanceof He){var a=ae.spanFrom(r,e.width,e.height);if(this.setArray(a,e),!!this.isThereSpaceForArray(e)){var s=le(a.addresses(this)),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;this.addressMapping.setCell(l,e)}}catch(u){s.e(u)}finally{s.f()}}}}},{key:"truncateRanges",value:function(e,r){var a=this.rangeMapping.truncateRanges(e,r),s=a.verticesToRemove,o=a.verticesToMerge,l=a.verticesWithChangedSize,u=le(o),c;try{for(u.s();!(c=u.n()).done;){var p=$r(c.value,2),m=p[0],f=p[1];this.mergeRangeVertices(m,f)}}catch(b){u.e(b)}finally{u.f()}var d=le(s),h;try{for(d.s();!(h=d.n()).done;){var y=h.value;this.removeVertexAndCleanupDependencies(y)}}catch(b){d.e(b)}finally{d.f()}return l}},{key:"fixArraysAfterAddingRow",value:function(e,r,a){if(this.arrayMapping.moveArrayVerticesAfterRowByRows(e,r,a),!(r<=0)){var s=le(this.arrayMapping.arraysInRows(ln.fromRowStartAndEnd(e,r-1,r-1))),o;try{for(s.s();!(o=s.n()).done;)for(var l=$r(o.value,2),u=l[1],c=u.getRange(),p=c.start.col;p<=c.end.col;++p)for(var m=r;m<=c.end.row;++m){var f=$(e,p,m),d=$(e,p,m+a),h=u.getArrayCellValue(f);this.addressMapping.moveCell(d,f),this.changes.addChange(se,d,h)}}catch(y){s.e(y)}finally{s.f()}}}},{key:"fixArraysAfterRemovingRows",value:function(e,r,a){if(this.arrayMapping.moveArrayVerticesAfterRowByRows(e,r,-a),!(r<=0)){var s=le(this.arrayMapping.arraysInRows(ln.fromRowStartAndEnd(e,r-1,r-1))),o;try{for(s.s();!(o=s.n()).done;){var l=$r(o.value,2),u=l[1];if(this.isThereSpaceForArray(u)){var c=le(u.getRange().addresses(this)),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;this.addressMapping.setCell(m,u)}}catch(f){c.e(f)}finally{c.f()}}else this.setNoSpaceIfArray(u)}}catch(f){s.e(f)}finally{s.f()}}}},{key:"fixArraysAfterAddingColumn",value:function(e,r,a){if(this.arrayMapping.moveArrayVerticesAfterColumnByColumns(e,r,a),!(r<=0)){var s=le(this.arrayMapping.arraysInCols(Wn.fromColumnStartAndEnd(e,r-1,r-1))),o;try{for(s.s();!(o=s.n()).done;)for(var l=$r(o.value,2),u=l[1],c=u.getRange(),p=c.start.row;p<=c.end.row;++p)for(var m=r;m<=c.end.col;++m){var f=$(e,m,p),d=$(e,m+a,p),h=u.getArrayCellValue(f);this.addressMapping.moveCell(d,f),this.changes.addChange(se,d,h)}}catch(y){s.e(y)}finally{s.f()}}}},{key:"fixArraysAfterRemovingColumns",value:function(e,r,a){if(this.arrayMapping.moveArrayVerticesAfterColumnByColumns(e,r,-a),!(r<=0)){var s=le(this.arrayMapping.arraysInCols(Wn.fromColumnStartAndEnd(e,r-1,r-1))),o;try{for(s.s();!(o=s.n()).done;){var l=$r(o.value,2),u=l[1];if(this.isThereSpaceForArray(u)){var c=le(u.getRange().addresses(this)),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;this.addressMapping.setCell(m,u)}}catch(f){c.e(f)}finally{c.f()}}else this.setNoSpaceIfArray(u)}}catch(f){s.e(f)}finally{s.f()}}}},{key:"shrinkPossibleArrayAndGetCell",value:function(e){var r=this.getCell(e);return r instanceof He?(this.setNoSpaceIfArray(r),this.getCell(e)):r}},{key:"setNoSpaceIfArray",value:function(e){e instanceof He&&(this.shrinkArrayToCorner(e),e.setNoSpace())}},{key:"removeVertex",value:function(e){this.removeVertexAndCleanupDependencies(e),e instanceof Kt&&this.rangeMapping.removeRange(e)}},{key:"mergeRangeVertices",value:function(e,r){var a=this,s=this.graph.adjacentNodes(r);this.removeVertexAndCleanupDependencies(r),this.graph.softRemoveEdge(e,r),s.forEach(function(o){a.graph.hasNode(o)&&a.graph.addEdge(e,o)})}},{key:"removeVertexAndCleanupDependencies",value:function(e){for(var r=new Set(this.graph.removeNode(e));r.size>0;){var a=r.values().next().value;r.delete(a),this.graph.hasNode(a)&&this.graph.adjacentNodesCount(a)===0&&((a instanceof Kt||a instanceof $n)&&this.graph.removeNode(a).forEach(function(s){return r.add(s)}),a instanceof Kt?this.rangeMapping.removeRange(a):a instanceof $n&&this.addressMapping.removeCell(a.address))}}}],[{key:"buildEmpty",value:function(e,r,a,s,o){return new i(new P6(r.chooseAddressMappingPolicy),new W6,new X6(r.translationPackage),new _6,o,e,a,s)}}]),i}();function vie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function F9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Tie(i,t,e){return t&&F9(i.prototype,t),e&&F9(i,e),i}var $n=function(){function i(t){vie(this,i),this.address=t}return Tie(i,[{key:"getCellValue",value:function(){return se}}]),i}();function Nie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function M9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Cie(i,t,e){return t&&M9(i.prototype,t),e&&M9(i,e),i}var pn=function(){function i(t,e){Nie(this,i),this.parsedValue=t,this.rawValue=e}return Cie(i,[{key:"getValues",value:function(){return{parsedValue:this.parsedValue,rawValue:this.rawValue}}},{key:"setValues",value:function(e){this.parsedValue=e.parsedValue,this.rawValue=e.rawValue}},{key:"getCellValue",value:function(){return this.parsedValue}},{key:"setCellValue",value:function(e){throw"SetCellValue is deprecated for ValueCellVertex"}}]),i}();function Sie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function j9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Aie(i,t,e){return t&&j9(i.prototype,t),e&&j9(i,e),i}var ui=function(){function i(t,e){Sie(this,i),this.errors=t,this.rawInput=e}return Aie(i,[{key:"getCellValue",value:function(){return x.parsingError()}},{key:"getFormula",value:function(){return this.rawInput}}]),i}();var TMe=j(Nr()),NMe=j(q()),CMe=j(Vt());function ks(i,t){return Eie(i)||xie(i,t)||B9(i,t)||wie()}function wie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xie(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Eie(i){if(Array.isArray(i))return i}function mn(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=B9(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function B9(i,t){if(!!i){if(typeof i=="string")return L9(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return L9(i,t)}}function L9(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Rie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function U9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Vie(i,t,e){return t&&U9(i.prototype,t),e&&U9(i,e),i}var Vb=function(){function i(t,e){Rie(this,i),this.width=t,this.height=e,this.mapping=new Map}return Vie(i,[{key:"getCell",value:function(e){var r;return(r=this.mapping.get(e.col))===null||r===void 0?void 0:r.get(e.row)}},{key:"setCell",value:function(e,r){this.width=Math.max(this.width,e.col+1),this.height=Math.max(this.height,e.row+1);var a=this.mapping.get(e.col);a||(a=new Map,this.mapping.set(e.col,a)),a.set(e.row,r)}},{key:"has",value:function(e){var r;return!!((r=this.mapping.get(e.col))===null||r===void 0?void 0:r.get(e.row))}},{key:"getHeight",value:function(){return this.height}},{key:"getWidth",value:function(){return this.width}},{key:"removeCell",value:function(e){var r;(r=this.mapping.get(e.col))===null||r===void 0||r.delete(e.row)}},{key:"addRows",value:function(e,r){this.mapping.forEach(function(a){var s=new Map;a.forEach(function(o,l){l>=e&&(s.set(l+r,o),a.delete(l))}),s.forEach(function(o,l){a.set(l,o)})}),this.height+=r}},{key:"addColumns",value:function(e,r){var a=this,s=new Map;this.mapping.forEach(function(o,l){l>=e&&(s.set(l+r,o),a.mapping.delete(l))}),s.forEach(function(o,l){a.mapping.set(l,o)}),this.width+=r}},{key:"removeRows",value:function(e){this.mapping.forEach(function(s){var o=new Map;s.forEach(function(l,u){u>=e.rowStart&&(s.delete(u),u>e.rowEnd&&o.set(u-e.numberOfRows,l))}),o.forEach(function(l,u){s.set(u,l)})});var r=Math.min(this.height-1,e.rowEnd),a=Math.max(0,r-e.rowStart+1);this.height=Math.max(0,this.height-a)}},{key:"removeColumns",value:function(e){var r=this,a=new Map;this.mapping.forEach(function(l,u){u>=e.columnStart&&(r.mapping.delete(u),u>e.columnEnd&&a.set(u-e.numberOfColumns,l))}),a.forEach(function(l,u){r.mapping.set(u,l)});var s=Math.min(this.width-1,e.columnEnd),o=Math.max(0,s-e.columnStart+1);this.width=Math.max(0,this.width-o)}},{key:"getEntries",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l,u,c,p,m,f;return regeneratorRuntime.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:r=mn(this.mapping),h.prev=1,r.s();case 3:if((a=r.n()).done){h.next=24;break}s=ks(a.value,2),o=s[0],l=s[1],u=mn(l),h.prev=6,u.s();case 8:if((c=u.n()).done){h.next=14;break}return p=ks(c.value,2),m=p[0],f=p[1],h.next=12,[$(e,o,m),f];case 12:h.next=8;break;case 14:h.next=19;break;case 16:h.prev=16,h.t0=h.catch(6),u.e(h.t0);case 19:return h.prev=19,u.f(),h.finish(19);case 22:h.next=3;break;case 24:h.next=29;break;case 26:h.prev=26,h.t1=h.catch(1),r.e(h.t1);case 29:return h.prev=29,r.f(),h.finish(29);case 32:case"end":return h.stop()}},t,this,[[1,26,29,32],[6,16,19,22]])})},{key:"verticesFromColumn",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l,u;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(r=this.mapping.get(e),r!==void 0){p.next=3;break}return p.abrupt("return");case 3:a=mn(r),p.prev=4,a.s();case 6:if((s=a.n()).done){p.next=12;break}return o=ks(s.value,2),l=o[0],u=o[1],p.next=10,u;case 10:p.next=6;break;case 12:p.next=17;break;case 14:p.prev=14,p.t0=p.catch(4),a.e(p.t0);case 17:return p.prev=17,a.f(),p.finish(17);case 20:case"end":return p.stop()}},t,this,[[4,14,17,20]])})},{key:"verticesFromRow",value:regeneratorRuntime.mark(function t(e){var r,a,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:r=mn(this.mapping.values()),u.prev=1,r.s();case 3:if((a=r.n()).done){u.next=11;break}if(s=a.value,o=s.get(e),o===void 0){u.next=9;break}return u.next=9,o;case 9:u.next=3;break;case 11:u.next=16;break;case 13:u.prev=13,u.t0=u.catch(1),r.e(u.t0);case 16:return u.prev=16,r.f(),u.finish(16);case 19:case"end":return u.stop()}},t,this,[[1,13,16,19]])})},{key:"verticesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l,u,c,p,m;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r=mn(e.columns()),d.prev=1,r.s();case 3:if((a=r.n()).done){d.next=27;break}if(s=a.value,o=this.mapping.get(s),o!==void 0){d.next=8;break}return d.abrupt("continue",25);case 8:l=mn(o),d.prev=9,l.s();case 11:if((u=l.n()).done){d.next=17;break}return c=ks(u.value,2),p=c[0],m=c[1],d.next=15,m;case 15:d.next=11;break;case 17:d.next=22;break;case 19:d.prev=19,d.t0=d.catch(9),l.e(d.t0);case 22:return d.prev=22,l.f(),d.finish(22);case 25:d.next=3;break;case 27:d.next=32;break;case 29:d.prev=29,d.t1=d.catch(1),r.e(d.t1);case 32:return d.prev=32,r.f(),d.finish(32);case 35:case"end":return d.stop()}},t,this,[[1,29,32,35],[9,19,22,25]])})},{key:"verticesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l,u,c;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:r=mn(this.mapping.values()),m.prev=1,r.s();case 3:if((a=r.n()).done){m.next=26;break}s=a.value,o=mn(e.rows()),m.prev=6,o.s();case 8:if((l=o.n()).done){m.next=16;break}if(u=l.value,c=s.get(u),c===void 0){m.next=14;break}return m.next=14,c;case 14:m.next=8;break;case 16:m.next=21;break;case 18:m.prev=18,m.t0=m.catch(6),o.e(m.t0);case 21:return m.prev=21,o.f(),m.finish(21);case 24:m.next=3;break;case 26:m.next=31;break;case 28:m.prev=28,m.t1=m.catch(1),r.e(m.t1);case 31:return m.prev=31,r.f(),m.finish(31);case 34:case"end":return m.stop()}},t,this,[[1,28,31,34],[6,18,21,24]])})},{key:"entriesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l,u,c,p,m;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r=mn(this.mapping.entries()),d.prev=1,r.s();case 3:if((a=r.n()).done){d.next=26;break}s=ks(a.value,2),o=s[0],l=s[1],u=mn(e.rows()),d.prev=6,u.s();case 8:if((c=u.n()).done){d.next=16;break}if(p=c.value,m=l.get(p),m===void 0){d.next=14;break}return d.next=14,[$(e.sheet,o,p),m];case 14:d.next=8;break;case 16:d.next=21;break;case 18:d.prev=18,d.t0=d.catch(6),u.e(d.t0);case 21:return d.prev=21,u.f(),d.finish(21);case 24:d.next=3;break;case 26:d.next=31;break;case 28:d.prev=28,d.t1=d.catch(1),r.e(d.t1);case 31:return d.prev=31,r.f(),d.finish(31);case 34:case"end":return d.stop()}},t,this,[[1,28,31,34],[6,18,21,24]])})},{key:"entriesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s,o,l,u,c,p,m;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:r=mn(e.columns()),d.prev=1,r.s();case 3:if((a=r.n()).done){d.next=26;break}if(s=a.value,o=this.mapping.get(s),o===void 0){d.next=24;break}l=mn(o.entries()),d.prev=8,l.s();case 10:if((u=l.n()).done){d.next=16;break}return c=ks(u.value,2),p=c[0],m=c[1],d.next=14,[$(e.sheet,s,p),m];case 14:d.next=10;break;case 16:d.next=21;break;case 18:d.prev=18,d.t0=d.catch(8),l.e(d.t0);case 21:return d.prev=21,l.f(),d.finish(21);case 24:d.next=3;break;case 26:d.next=31;break;case 28:d.prev=28,d.t1=d.catch(1),r.e(d.t1);case 31:return d.prev=31,r.f(),d.finish(31);case 34:case"end":return d.stop()}},t,this,[[1,28,31,34],[8,18,21,24]])})},{key:"vertices",value:regeneratorRuntime.mark(function t(){var e,r,a,s,o,l,u,c,p,m;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:e=mn(this.mapping),d.prev=1,e.s();case 3:if((r=e.n()).done){d.next=25;break}a=ks(r.value,2),s=a[0],o=a[1],l=mn(o),d.prev=6,l.s();case 8:if((u=l.n()).done){d.next=15;break}if(c=ks(u.value,2),p=c[0],m=c[1],m===void 0){d.next=13;break}return d.next=13,m;case 13:d.next=8;break;case 15:d.next=20;break;case 17:d.prev=17,d.t0=d.catch(6),l.e(d.t0);case 20:return d.prev=20,l.f(),d.finish(20);case 23:d.next=3;break;case 25:d.next=30;break;case 27:d.prev=27,d.t1=d.catch(1),e.e(d.t1);case 30:return d.prev=30,e.f(),d.finish(30);case 33:case"end":return d.stop()}},t,this,[[1,27,30,33],[6,17,20,23]])})}]),i}();var kMe=j(Nr());var zMe=j(q());function Iie(i){return _ie(i)||Pie(i)||Die(i)||Oie()}function Oie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Die(i,t){if(!!i){if(typeof i=="string")return tS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return tS(i,t)}}function Pie(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function _ie(i){if(Array.isArray(i))return tS(i)}function tS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function kie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function z9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Fie(i,t,e){return t&&z9(i.prototype,t),e&&z9(i,e),i}var rS=function(){function i(t,e){kie(this,i),this.width=t,this.height=e,this.mapping=new Array(e);for(var r=0;r<e;r++)this.mapping[r]=new Array(t)}return Fie(i,[{key:"getCell",value:function(e){return this.getCellVertex(e.col,e.row)}},{key:"setCell",value:function(e,r){this.width=Math.max(this.width,e.col+1),this.height=Math.max(this.height,e.row+1);var a=this.mapping[e.row];a||(this.mapping[e.row]=new Array(this.width)),this.mapping[e.row][e.col]=r}},{key:"has",value:function(e){var r=this.mapping[e.row];return r?!!r[e.col]:!1}},{key:"getHeight",value:function(){return this.height}},{key:"getWidth",value:function(){return this.width}},{key:"removeCell",value:function(e){this.mapping[e.row]!==void 0&&delete this.mapping[e.row][e.col]}},{key:"addRows",value:function(e,r){for(var a,s=[],o=0;o<r;o++)s.push(new Array(this.width));(a=this.mapping).splice.apply(a,[e,0].concat(s)),this.height+=r}},{key:"addColumns",value:function(e,r){for(var a=0;a<this.height;a++){var s;(s=this.mapping[a]).splice.apply(s,[e,0].concat(Iie(new Array(r))))}this.width+=r}},{key:"removeRows",value:function(e){this.mapping.splice(e.rowStart,e.numberOfRows);var r=Math.min(this.height-1,e.rowEnd),a=Math.max(0,r-e.rowStart+1);this.height=Math.max(0,this.height-a)}},{key:"removeColumns",value:function(e){for(var r=0;r<this.height;r++)this.mapping[r].splice(e.columnStart,e.numberOfColumns);var a=Math.min(this.width-1,e.columnEnd),s=Math.max(0,a-e.columnStart+1);this.width=Math.max(0,this.width-s)}},{key:"getEntries",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=0;case 1:if(!(r<this.height)){l.next=14;break}a=0;case 3:if(!(a<this.width)){l.next=11;break}if(s=this.getCellVertex(a,r),!s){l.next=8;break}return l.next=8,[$(e,a,r),s];case 8:++a,l.next=3;break;case 11:++r,l.next=1;break;case 14:case"end":return l.stop()}},t,this)})},{key:"verticesFromColumn",value:regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:r=0;case 1:if(!(r<this.height)){o.next=9;break}if(a=this.getCellVertex(e,r),!a){o.next=6;break}return o.next=6,a;case 6:++r,o.next=1;break;case 9:case"end":return o.stop()}},t,this)})},{key:"verticesFromRow",value:regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:r=0;case 1:if(!(r<this.width)){o.next=9;break}if(a=this.getCellVertex(r,e),!a){o.next=6;break}return o.next=6,a;case 6:++r,o.next=1;break;case 9:case"end":return o.stop()}},t,this)})},{key:"verticesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=e.columnStart;case 1:if(!(r<=e.columnEnd)){l.next=14;break}a=0;case 3:if(!(a<this.height)){l.next=11;break}if(s=this.getCellVertex(r,a),!s){l.next=8;break}return l.next=8,s;case 8:++a,l.next=3;break;case 11:++r,l.next=1;break;case 14:case"end":return l.stop()}},t,this)})},{key:"verticesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=0;case 1:if(!(r<this.width)){l.next=14;break}a=e.rowStart;case 3:if(!(a<=e.rowEnd)){l.next=11;break}if(s=this.getCellVertex(r,a),!s){l.next=8;break}return l.next=8,s;case 8:++a,l.next=3;break;case 11:++r,l.next=1;break;case 14:case"end":return l.stop()}},t,this)})},{key:"entriesFromRowsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=0;case 1:if(!(r<this.width)){l.next=14;break}a=e.rowStart;case 3:if(!(a<=e.rowEnd)){l.next=11;break}if(s=this.getCellVertex(r,a),!s){l.next=8;break}return l.next=8,[$(e.sheet,r,a),s];case 8:++a,l.next=3;break;case 11:++r,l.next=1;break;case 14:case"end":return l.stop()}},t,this)})},{key:"entriesFromColumnsSpan",value:regeneratorRuntime.mark(function t(e){var r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r=0;case 1:if(!(r<this.height)){l.next=14;break}a=e.columnStart;case 3:if(!(a<=e.columnEnd)){l.next=11;break}if(s=this.getCellVertex(a,r),!s){l.next=8;break}return l.next=8,[$(e.sheet,a,r),s];case 8:++a,l.next=3;break;case 11:++r,l.next=1;break;case 14:case"end":return l.stop()}},t,this)})},{key:"vertices",value:regeneratorRuntime.mark(function t(){var e,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=0;case 1:if(!(e<this.height)){o.next=14;break}r=0;case 3:if(!(r<this.width)){o.next=11;break}if(a=this.getCellVertex(r,e),!a){o.next=8;break}return o.next=8,a;case 8:++r,o.next=3;break;case 11:++e,o.next=1;break;case 14:case"end":return o.stop()}},t,this)})},{key:"getCellVertex",value:function(e,r){var a;return(a=this.mapping[r])===null||a===void 0?void 0:a[e]}}]),i}();function Ib(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ib=function(e){return typeof e}:Ib=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ib(i)}function Mie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function H9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jie(i,t,e){return t&&H9(i.prototype,t),e&&H9(i,e),i}var R;(function(i){i.DIV_BY_ZERO="DIV_BY_ZERO",i.NAME="NAME",i.VALUE="VALUE",i.NUM="NUM",i.NA="NA",i.CYCLE="CYCLE",i.REF="REF",i.SPILL="SPILL",i.LIC="LIC",i.ERROR="ERROR"})(R||(R={}));var Fr;(function(i){i.FORMULA="FORMULA",i.VALUE="VALUE",i.ARRAY="ARRAY",i.EMPTY="EMPTY",i.ARRAYFORMULA="ARRAYFORMULA"})(Fr||(Fr={}));var G9=function(t,e){return t instanceof He?t.isLeftCorner(e)?Fr.ARRAYFORMULA:Fr.ARRAY:t instanceof Wr||t instanceof ui?Fr.FORMULA:t instanceof pn?Fr.VALUE:Fr.EMPTY},Ob;(function(i){i.EMPTY="EMPTY",i.NUMBER="NUMBER",i.STRING="STRING",i.BOOLEAN="BOOLEAN",i.ERROR="ERROR"})(Ob||(Ob={}));var nS;(function(i){i.NUMBER="NUMBER"})(nS||(nS={}));var Kn=Object.assign(Object.assign({},Ob),nS),q9=Object.assign(Object.assign({},Ob),te),x6=function(t){switch(t){case Kn.EMPTY:return 0;case Kn.NUMBER:return 1;case Kn.STRING:return 2;case Kn.BOOLEAN:return 3;case Kn.ERROR:return 4}throw new Error("Cell value not computed")},fc=function(t){if(t===se)return Kn.EMPTY;if(t instanceof x||t instanceof J)return Kn.ERROR;if(typeof t=="string")return Kn.STRING;if(he(t))return Kn.NUMBER;if(typeof t=="boolean")return Kn.BOOLEAN;throw new Error("Cell value not computed")},W9=function(t){return he(t)?uD(t):fc(t)},$9=function(t){if(he(t))return cD(t)},x=function(){function i(t,e,r){Mie(this,i),this.type=t,this.message=e,this.root=r}return jie(i,[{key:"attachRootVertex",value:function(e){return this.root===void 0?new i(this.type,this.message,e):this}}],[{key:"parsingError",value:function(){return new i(R.ERROR,D.ParseError)}}]),i}(),vy=function(t,e){return{sheet:t,row:e}},t8=function(t){return t.row<0},Ty=function(t,e){return{sheet:t,col:e}},tI=function(t){return t.col<0},$=function(t,e,r){return{sheet:t,col:e,row:r}},Ht=function(t){return t.col<0||t.row<0},K9=function(t,e,r,a){return $(e,t.col+r,t.row+a)},dc=function(t){return"".concat(t.sheet,",").concat(t.row,",").concat(t.col)};function ft(i){return i&&(Ib(i)==="object"||typeof i=="function")?"col"in i&&typeof i.col=="number"&&"row"in i&&typeof i.row=="number"&&"sheet"in i&&typeof i.sheet=="number":!1}var sr=function(t,e){var r;return(r=t.sheet)!==null&&r!==void 0?r:e.sheet},Pa=function(t,e){return t.sheet===e.sheet&&t.col===e.col&&t.row===e.row};function Bie(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function X9(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Lie(i,t,e){return t&&X9(i.prototype,t),e&&X9(i,e),i}var Db=function(){function i(t,e,r){Bie(this,i);var a;this.value=e,this.address=r,this.type=t.type,this.message=(a=t.message)!==null&&a!==void 0?a:""}return Lie(i,[{key:"toString",value:function(){return this.value}},{key:"valueOf",value:function(){return this.value}}]),i}();var VYe=j(q());var DYe=j(oP());"use strict";var tae=ce(),rae=Vh(),nae=Mn(),lP=Pr(),iae=Ih();tae({target:"String",proto:!0,forced:!iae("includes")},{includes:function(t){return!!~lP(nae(this)).indexOf(lP(rae(t)),arguments.length>1?arguments[1]:void 0)}});var Pje=j(q()),_je=j(Vt());function aae(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=sae(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function sae(i,t){if(!!i){if(typeof i=="string")return uP(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return uP(i,t)}}function uP(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Vf(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vf=function(e){return typeof e}:Vf=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(i)}function Fe(i,t,e){if(typeof i=="undefined")return qi.defaultConfig[e];if(typeof t=="string"){if(Vf(i)===t)return i;throw new Re(t,e)}else{if(t.includes(i))return i;throw new dy(t.map(function(r){return"'".concat(r,"'")}).join(" "),e)}}function Fs(i,t,e){if(i<e)throw new my(t,e)}function cP(i,t,e){if(i>e)throw new fy(t,e)}function If(i,t,e,r){if(t(i))return i;if(typeof i=="undefined")return qi.defaultConfig[r];throw new Re(e,r)}function uS(){for(var i=new Map,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach(function(c){var p=i.get(c.value)||[];p.push(c.name),i.set(c.value,p)});var a=[],s=aae(i.values()),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;l.length>1&&a.push(l)}}catch(c){s.e(c)}finally{s.f()}if(a.length>0){a.forEach(function(c){return c.sort()});var u=a.map(function(c){return"[".concat(c,"]")}).join("; ");throw new Error("Config initialization failed. Parameters in conflict: ".concat(u))}}function X(i,t,e){if(Vf(i)!==t)throw new Re(t,e)}var Zje=j(ar());"use strict";var oae=ce(),lae=fa().f,uae=So(),pP=Pr(),cae=Vh(),pae=Mn(),mae=Ih(),fae=No(),mP="".endsWith,dae=Math.min,fP=mae("endsWith"),hae=!fae&&!fP&&!!function(){var i=lae(String.prototype,"endsWith");return i&&!i.writable}();oae({target:"String",proto:!0,forced:!hae&&!fP},{endsWith:function(t){var e=pP(pae(this));cae(t);var r=arguments.length>1?arguments[1]:void 0,a=e.length,s=r===void 0?a:dae(uae(r),a),o=pP(t);return mP?mP.call(e,o,s):e.slice(s-o.length,s)===o}});function dP(i,t,e){i=i.replace(/\s\s+/g," ").trim().toLowerCase();var r=i.substring(i.length-2);r==="am"||r==="pm"?i=i.substring(0,i.length-2).trim():(r=i.substring(i.length-1),r==="a"||r==="p"?i=i.substring(0,i.length-1).trim():r=void 0);var a=i.split(/[ /.-]/g);a.length>=2&&a[a.length-2].includes(":")&&(a[a.length-2]=a[a.length-2]+"."+a[a.length-1],a.pop());var s=a[a.length-1].split(":");if(r!==void 0&&s.push(r),a.length===1)return hP(s,e);if(s.length===1)return yP(a,t);var o=yP(a.slice(0,a.length-1),t),l=hP(s,e);if(o!==void 0)return l===void 0?void 0:Object.assign(Object.assign({},o),l)}var jb=/^ss\.(s+|0+)$/;function hP(i,t){if(t!==void 0){t=t.toLowerCase(),t.endsWith("am/pm")?t=t.substring(0,t.length-5).trim():t.endsWith("a/p")&&(t=t.substring(0,t.length-3).trim());var e=t.split(":"),r=void 0;i[i.length-1]==="am"||i[i.length-1]==="a"?(r=!1,i.pop()):(i[i.length-1]==="pm"||i[i.length-1]==="p")&&(r=!0,i.pop());var a=0;if(e.length>=1&&jb.test(e[e.length-1])&&(a=e[e.length-1].length-3,e[e.length-1]="ss"),i.length===e.length){var s=e.indexOf("hh"),o=e.indexOf("mm"),l=e.indexOf("ss"),u=s!==-1?i[s]:"0";if(!!/^\d+$/.test(u)){var c=Number(u);if(r!==void 0){if(c<0||c>12)return;c=c%12,r&&(c=c+12)}var p=o!==-1?i[o]:"0";if(!!/^\d+$/.test(p)){var m=Number(p),f=l!==-1?i[l]:"0";if(!!/^\d+(\.\d+)?$/.test(f)){var d=Number(f);return d=Math.round(d*Math.pow(10,a))/Math.pow(10,a),{hours:c,minutes:m,seconds:d}}}}}}}function yP(i,t){if(t!==void 0){var e=t.toLowerCase().split(/[ /.-]/g);if(i.length===e.length){var r=e.indexOf("mm"),a=e.indexOf("dd"),s=e.indexOf("yyyy"),o=e.indexOf("yy");if(!(!(r in i)||!(a in i)||!(s in i)&&!(o in i))&&!(s in i&&o in i)){var l;if(s in i){var u=i[s];if(/^\d+$/.test(u)){if(l=Number(u),l<1e3||l>9999)return}else return}else{var c=i[o];if(/^\d+$/.test(c)){if(l=Number(c),l<0||l>99)return}else return}var p=i[r];if(!!/^\d+$/.test(p)){var m=Number(p),f=i[a];if(!!/^\d+$/.test(f)){var d=Number(f);return{year:l,month:m,day:d}}}}}}}var mBe=j(q());function bP(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=yae(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function yae(i,t){if(!!i){if(typeof i=="string")return gP(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return gP(i,t)}}function gP(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function bae(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function vP(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function gae(i,t,e){return t&&vP(i.prototype,t),e&&vP(i,e),i}function Of(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Of=function(e){return typeof e}:Of=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(i)}var cS=[31,28,31,30,31,30,31,31,30,31,30,31],bc=[0,31,59,90,120,151,181,212,243,273,304,334];function qo(i){return i&&(Of(i)==="object"||typeof i=="function")?"year"in i&&typeof i.year=="number"&&"month"in i&&typeof i.month=="number"&&"day"in i&&typeof i.day=="number":!1}function pS(i){return i&&(Of(i)==="object"||typeof i=="function")?"hours"in i&&typeof i.hours=="number"&&"minutes"in i&&typeof i.minutes=="number"&&"seconds"in i&&typeof i.seconds=="number":!1}var vae={year:9999,month:12,day:31},TP=function(){function i(t){bae(this,i),this.config=t,this.minDateAboluteValue=this.dateToNumberFromZero(t.nullDate),this.maxDateValue=this.dateToNumber(vae),this.leapYear1900=t.leapYear1900,!this.leapYear1900&&0<=this.dateToNumber({year:1900,month:2,day:28})?this.epochYearZero=this.numberToSimpleDate(2).year:this.epochYearZero=this.numberToSimpleDate(1).year,this.parseDateTime=t.parseDateTime}return gae(i,[{key:"getWithinBounds",value:function(e){return e<=this.maxDateValue&&e>=0?e:void 0}},{key:"dateStringToDateNumber",value:function(e){var r=this.parseDateTimeFromConfigFormats(e),a=r.dateTime,s=r.dateFormat,o=s===void 0?"":s,l=r.timeFormat,u=l===void 0?"":l;if(a!==void 0)return pS(a)?qo(a)?new cc(Ms(a)+this.dateToNumber(a),o+" "+u):new uc(Ms(a),u):qo(a)?new lc(this.dateToNumber(a),o):0}},{key:"parseSingleFormat",value:function(e,r,a){var s=this.parseDateTime(e,r,a);if(!(qo(s)&&(s.year>=0&&s.year<100&&(s.year<this.getNullYear()?s.year+=2e3:s.year+=1900),!this.isValidDate(s))))return s}},{key:"parseDateTimeFromConfigFormats",value:function(e){return this.parseDateTimeFromFormats(e,this.config.dateFormats,this.config.timeFormats)}},{key:"parseDateTimeFromFormats",value:function(e,r,a){var s=r.length===0?[void 0]:r,o=a.length===0?[void 0]:a,l=bP(s),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,p=bP(o),m;try{for(p.s();!(m=p.n()).done;){var f=m.value,d=this.parseSingleFormat(e,c,f);if(d!==void 0)return{dateTime:d,timeFormat:f,dateFormat:c}}}catch(h){p.e(h)}finally{p.f()}}}catch(h){l.e(h)}finally{l.f()}return{}}},{key:"getNullYear",value:function(){return this.config.nullYear}},{key:"getEpochYearZero",value:function(){return this.epochYearZero}},{key:"isValidDate",value:function(e){return isNaN(e.year)||isNaN(e.month)||isNaN(e.day)||e.day!==Math.round(e.day)||e.month!==Math.round(e.month)||e.year!==Math.round(e.year)||e.year<1582||e.month<1||e.month>12||e.day<1?!1:this.isLeapYear(e.year)&&e.month===2?e.day<=29:e.day<=cS[e.month-1]}},{key:"dateToNumber",value:function(e){return this.dateToNumberFromZero(e)-this.minDateAboluteValue}},{key:"relativeNumberToAbsoluteNumber",value:function(e){return e+this.minDateAboluteValue-(this.leapYear1900?1:0)}},{key:"numberToSimpleDate",value:function(e){var r=Math.floor(e)+this.minDateAboluteValue,a=Math.floor(r/365.2425);this.dateToNumberFromZero({year:a+1,month:1,day:1})<=r?a++:this.dateToNumberFromZero({year:a-1,month:1,day:1})>r&&a--;var s=r-this.dateToNumberFromZero({year:a,month:1,day:1}),o=Tae(s-(this.isLeapYear(a)&&s>=59?1:0)),l=s-bc[o]-(this.isLeapYear(a)&&o>1?1:0);return{year:a,month:o+1,day:l+1}}},{key:"numberToSimpleDateTime",value:function(e){return Object.assign(Object.assign({},this.numberToSimpleDate(Math.floor(e))),Ma(e%1))}},{key:"leapYearsCount",value:function(e){return Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400)+(this.config.leapYear1900&&e>=1900?1:0)}},{key:"countLeapDays",value:function(e){return e.month>2||e.month===2&&e.day>=29?this.leapYearsCount(e.year):this.leapYearsCount(e.year-1)}},{key:"dateToNumberFromZero",value:function(e){return 365*e.year+bc[e.month-1]+e.day-1+(e.month<=2?this.leapYearsCount(e.year-1):this.leapYearsCount(e.year))}},{key:"isLeapYear",value:function(e){return e%4?!1:e%100?!0:e%400?e===1900&&this.config.leapYear1900:!0}},{key:"daysInMonth",value:function(e,r){return this.isLeapYear(e)&&r===2?29:cS[r-1]}},{key:"endOfMonth",value:function(e){return{year:e.year,month:e.month,day:this.daysInMonth(e.year,e.month)}}},{key:"toBasisUS",value:function(e,r){return e.day===31&&(e.day=30),e.day===30&&r.day===31&&(r.day=30),e.month===2&&e.day===this.daysInMonth(e.year,e.month)&&(e.day=30,r.month===2&&r.day===this.daysInMonth(r.year,r.month)&&(r.day=30)),[e,r]}},{key:"yearLengthForBasis",value:function(e,r){return e.year!==r.year?e.year+1!==r.year||e.month<r.month||e.month===r.month&&e.day<r.day?(this.leapYearsCount(r.year)-this.leapYearsCount(e.year-1))/(r.year-e.year+1)+365:this.countLeapDays(r)!==this.countLeapDays({year:e.year,month:e.month,day:e.day-1})?366:365:this.isLeapYear(e.year)?366:365}}]),i}();function Tae(i){var t=0;return bc[t+6]<=i&&(t+=6),bc[t+3]<=i&&(t+=3),bc[t+2]<=i?t+=2:bc[t+1]<=i&&(t+=1),t}function mS(i,t){var e=12*i.year+i.month-1+t;return{year:Math.floor(e/12),month:e%12+1,day:i.day}}function NP(i){return{year:i.year,month:i.month,day:Math.min(i.day,cS[i.month-1])}}function Bb(i){return Math.round(i*3600*24)/(3600*24)}function Ma(i){i=Math.round(i*24*60*60*1e5)/(24*60*60*1e5),i*=24;var t=Math.floor(i);i-=t,i*=60;var e=Math.floor(i);i-=e,i*=60;var r=Math.round(i*1e5)/1e5;return{hours:t,minutes:e,seconds:r}}function Ms(i){return((i.seconds/60+i.minutes)/60+i.hours)/24}function fS(i){return{year:i.year,month:i.month,day:Math.min(30,i.day)}}function Nae(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function CP(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Cae(i,t,e){return t&&CP(i.prototype,t),e&&CP(i,e),i}var dS=function(){function i(){Nae(this,i)}return Cae(i,[{key:"call",value:function(){return rS}}]),i}();var RBe=j(ar());"use strict";var xae=ce(),Eae=fs(),Rae=PN(),hS=Lb(),Vae=De(),AP=1 .toFixed,wP=Math.floor,gc=function(i,t,e){return t===0?e:t%2==1?gc(i,t-1,e*i):gc(i*i,t/2,e)},Iae=function(i){for(var t=0,e=i;e>=4096;)t+=12,e/=4096;for(;e>=2;)t+=1,e/=2;return t},vc=function(i,t,e){for(var r=-1,a=e;++r<6;)a+=t*i[r],i[r]=a%1e7,a=wP(a/1e7)},yS=function(i,t){for(var e=6,r=0;--e>=0;)r+=i[e],i[e]=wP(r/t),r=r%t*1e7},xP=function(i){for(var t=6,e="";--t>=0;)if(e!==""||t===0||i[t]!==0){var r=String(i[t]);e=e===""?r:e+hS.call("0",7-r.length)+r}return e},Oae=AP&&(8e-5 .toFixed(3)!=="0.000"||.9 .toFixed(0)!=="1"||1.255 .toFixed(2)!=="1.25"||1000000000000000100 .toFixed(0)!=="1000000000000000128")||!Vae(function(){AP.call({})});xae({target:"Number",proto:!0,forced:Oae},{toFixed:function(t){var e=Rae(this),r=Eae(t),a=[0,0,0,0,0,0],s="",o="0",l,u,c,p;if(r<0||r>20)throw RangeError("Incorrect fraction digits");if(e!=e)return"NaN";if(e<=-1e21||e>=1e21)return String(e);if(e<0&&(s="-",e=-e),e>1e-21)if(l=Iae(e*gc(2,69,1))-69,u=l<0?e*gc(2,-l,1):e/gc(2,l,1),u*=4503599627370496,l=52-l,l>0){for(vc(a,0,u),c=r;c>=7;)vc(a,1e7,0),c-=7;for(vc(a,gc(10,c,1),0),c=l-1;c>=23;)yS(a,1<<23),c-=23;yS(a,1<<c),vc(a,1,1),yS(a,2),o=xP(a)}else vc(a,0,u),vc(a,1<<-l,0),o=xP(a)+hS.call("0",r);return r>0?(p=o.length,o=s+(p<=r?"0."+hS.call("0",r-p)+o:o.slice(0,p-r)+"."+o.slice(p-r))):o=s+o,o}});var zBe=j(q());var wBe=j(ar());var EP=/(\\.|dd|DD|d|D|mm|MM|m|M|YYYY|YY|yyyy|yy|HH|hh|H|h|ss(\.(0+|s+))?|s|AM\/PM|am\/pm|A\/P|a\/p|\[mm]|\[MM]|\[hh]|\[HH])/g,RP=/(\\.|[#0]+(\.[#0]*)?)/g,ci;(function(i){i.FORMAT="FORMAT",i.FREE_TEXT="FREE_TEXT"})(ci||(ci={}));function Ub(i,t){return{type:i,value:t}}var zb;(function(i){i.DATE="DATE",i.NUMBER="NUMBER",i.STRING="STRING"})(zb||(zb={}));function Dae(i){EP.lastIndex=0;var t=[],e;do e=EP.exec(i),e!==null&&t.push(e);while(e);return t}function Pae(i){RP.lastIndex=0;var t=RP.exec(i);return t!==null?[t]:[]}function VP(i,t){for(var e=[],r=0,a=0;a<i.length;++a){var s=i[a];if(s.index!==r){var o=t.substr(r,s.index-r);e.push(Ub(ci.FREE_TEXT,o))}s[0].startsWith("\\")?e.push(Ub(ci.FREE_TEXT,s[0])):e.push(Ub(ci.FORMAT,s[0])),r=s.index+s[0].length}var l=i[i.length-1];if(l.index+l[0].length<t.length){var u=t.substr(l.index+l[0].length,t.length);e.push(Ub(ci.FREE_TEXT,u))}return e}function bS(i){var t=Dae(i);if(!t.every(function(e){return OP(e)}))return{type:zb.DATE,tokens:VP(t,i)}}function IP(i){var t=Pae(i);if(!t.every(function(e){return OP(e)}))return{type:zb.NUMBER,tokens:VP(t,i)}}function OP(i){return i[0].startsWith("\\")}function _ae(i,t){return Mae(i)||Fae(i,t)||DP(i,t)||kae()}function kae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fae(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Mae(i){if(Array.isArray(i))return i}function jae(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=DP(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function DP(i,t){if(!!i){if(typeof i=="string")return PP(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return PP(i,t)}}function PP(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function _P(i,t,e,r){var a=e.stringifyDateTime(r.numberToSimpleDateTime(i),t);if(a!==void 0)return a;var s=e.stringifyDuration(Ma(i),t);if(s!==void 0)return s;var o=IP(t);return o!==void 0?Lae(o.tokens,i):t}function Kr(i,t){for(var e=i+"";e.length<t;)e="0"+e;return e}function Bae(i,t){for(var e=i+"";e.length<t;)e=e+"0";return e}function kP(i,t){return i.split(t).length-1}function Lae(i,t){for(var e="",r=0;r<i.length;++r){var a=i[r];if(a.type===ci.FREE_TEXT){e+=a.value;continue}var s=a.value.split("."),o=s[0],l=s[1]||"",u=s[1]?".":"",c=Number(t.toFixed(l.length)).toString().split("."),p=c[0]||"",m=c[1]||"";if(o.length>p.length){var f=kP(o.substr(0,o.length-p.length),"0");p=Kr(p,f+p.length)}var d=kP(l.substr(m.length,l.length-m.length),"0");m=Bae(m,d+m.length),e+=p+u+m}return e}function FP(i,t){var e=bS(t);if(e!==void 0){var r=e.tokens,a="",s=jae(r),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.type===ci.FREE_TEXT){a+=l.value;continue}if(jb.test(l.value)){var u=l.value.length-3;a+=(i.seconds<10?"0":"")+Math.round(i.seconds*Math.pow(10,u))/Math.pow(10,u);continue}switch(l.value.toLowerCase()){case"h":case"hh":{a+=Kr(i.hours,l.value.length),i.hours=0;break}case"[hh]":{a+=Kr(i.hours,l.value.length-2),i.hours=0;break}case"m":case"mm":{a+=Kr(i.minutes,l.value.length),i.minutes=0;break}case"[mm]":{a+=Kr(i.minutes+60*i.hours,l.value.length-2),i.minutes=0,i.hours=0;break}case"s":case"ss":{a+=Kr(i.seconds,l.value.length);break}default:return}}}catch(c){s.e(c)}finally{s.f()}return a}}function MP(i,t){var e=bS(t);if(e!==void 0){for(var r=e.tokens,a="",s=!1,o=r.some(function(h){return h.type===ci.FORMAT&&(h.value==="a/p"||h.value==="A/P"||h.value==="am/pm"||h.value==="AM/PM")}),l=0;l<r.length;l++){var u=r[l];if(u.type===ci.FREE_TEXT){a+=u.value;continue}if(jb.test(u.value)){var c=u.value.length-3;a+=(i.seconds<10?"0":"")+Math.round(i.seconds*Math.pow(10,c))/Math.pow(10,c);continue}switch(u.value.toLowerCase()){case"h":case"hh":{s=!0,a+=Kr(o?(i.hours+11)%12+1:i.hours,u.value.length);break}case"d":case"dd":{a+=Kr(i.day,u.value.length);break}case"s":case"ss":{a+=Kr(Math.round(i.seconds),u.value.length);break}case"m":case"mm":{l+1<r.length&&r[l+1].value.startsWith(":")&&(s=!0),s?a+=Kr(i.minutes,u.value.length):a+=Kr(i.month,u.value.length),s=!0;break}case"yy":{a+=Kr(i.year%100,u.value.length);break}case"yyyy":{a+=i.year;break}case"am/pm":case"a/p":{var p=u.value.split("/"),m=_ae(p,2),f=m[0],d=m[1];a+=i.hours<12?f:d;break}default:return}}return a}}var hLe=j(ar());var CLe=j(q());var JBe=j(ar());"use strict";var Uae=ce(),zae=_h().codeAt;Uae({target:"String",proto:!0},{codePointAt:function(t){return zae(this,t)}});"use strict";var Kae=ce(),Xae=UP().start,Yae=HP();Kae({target:"String",proto:!0,forced:Yae},{padStart:function(t){return Xae(this,t,arguments.length>1?arguments[1]:void 0)}});var lLe=j(q());function Zae(i,t){return tse(i)||ese(i,t)||Qae(i,t)||Jae()}function Jae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qae(i,t){if(!!i){if(typeof i=="string")return GP(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return GP(i,t)}}function GP(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function ese(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function tse(i){if(Array.isArray(i))return i}var gS="length",Df=function(t){return parseInt(t,16)},qP=function(t){return parseInt(t,10)},vS=function(t){return(t+"").replace(/\-/g,"")},Hb=function(t,e,r){return t.substr(e,r)},pi=function(t){return t.codePointAt(0)-65};function WP(i){return vS(i)[gS]===50>>1?Df(Hb(vS(i),Df("12"),pi("F")))/(Df(Hb(vS(i),pi("C"),pi("Y")>>4))||(~~![][gS]<<3)+1):0}function $P(i){if(i=(i+"").replace(/\-/g,""),i[gS]!==pi("Z"))return!1;var t=0;return[[0,pi("G")+1],[pi("H"),pi("H")-1],[pi("G")+pi("H"),pi("G")]].reduce(function(e,r,a){var s=Zae(r,2),o=s[0],l=s[1];return e|=(qP("".concat(qP(Df(Hb.apply(void 0,[i].concat([t+o-(a===3>>2?0:2),l+(a?2:0)])))+(Df(Hb.apply(void 0,[i].concat([t+o+l,2])))+[]).padStart(2,"0"))))%97||2)>>1,t+=2,e},pi("A"))===[]+1>>1}function rse(i,t){return sse(i)||ase(i,t)||ise(i,t)||nse()}function nse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ise(i,t){if(!!i){if(typeof i=="string")return KP(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return KP(i,t)}}function KP(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function ase(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function sse(i){if(Array.isArray(i))return i}var ose={invalid:function(){return"The license key for HyperFormula is invalid."},expired:function(t){var e=t.keyValidityDate;return"The license key for HyperFormula expired"+" on ".concat(e,", and is not valid for the installed version.")},missing:function(){return"The license key for HyperFormula is missing."}},XP=!1;function YP(i){var t={template:"missing",vars:{}};if(i==="gpl-v3"||i==="internal-use-in-handsontable")t.template="valid";else if(typeof i=="string"&&$P(i)){var e="23/09/2021".split("/"),r=rse(e,3),a=r[0],s=r[1],o=r[2],l=Math.floor(new Date("".concat(s,"/").concat(a,"/").concat(o)).getTime()/864e5),u=WP(i);t.vars.keyValidityDate=lse(new Date((u+1)*864e5)),l>u?t.template="expired":t.template="valid"}else i!==""&&(t.template="invalid");return!XP&&t.template!=="valid"&&(console.warn(ose[t.template](t.vars)),XP=!0),t.template}function lse(i){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],e=t[i.getMonth()],r=i.getDate(),a=i.getFullYear();return"".concat(e," ").concat(r,", ").concat(a)}var sYe=j(q());var uYe=j(Vt());var ULe=j(q());function use(i,t){return mse(i)||pse(i,t)||ZP(i,t)||cse()}function cse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pse(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function mse(i){if(Array.isArray(i))return i}function fse(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=ZP(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function ZP(i,t){if(!!i){if(typeof i=="string")return JP(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return JP(i,t)}}function JP(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function QP(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function e_(i,t,e){return t&&QP(i.prototype,t),e&&QP(i,e),i}function Wo(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Ke;(function(i){var t=function l(u){Wo(this,l),this.value=u,this.value=oc(this.value,Tb(W(this.value)))};i.Number=t;var e=function l(u){Wo(this,l),this.value=u};i.String=e;var r=function l(u){Wo(this,l),this.value=u};i.Boolean=r;var a=function(){function l(){Wo(this,l)}return e_(l,null,[{key:"getSingletonInstance",value:function(){return l.instance||(l.instance=new l),l.instance}}]),l}();i.Empty=a;var s=function l(u){Wo(this,l),this.formula=u};i.Formula=s;var o=function l(u,c){Wo(this,l),this.value=new x(u,c)};i.Error=o})(Ke||(Ke={}));function dse(i){return i.startsWith("=")}function hse(i){var t=i.toLowerCase();return t==="true"||t==="false"}function yse(i,t){var e=i.toUpperCase(),r=/#[A-Za-z0-9\/]+[?!]?/;return r.test(e)&&Object.prototype.hasOwnProperty.call(t,e)}var t_=function(){function i(t,e,r){Wo(this,i),this.config=t,this.dateHelper=e,this.numberLiteralsHelper=r}return e_(i,[{key:"currencyMatcher",value:function(e){var r=fse(this.config.currencySymbol),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;if(e.startsWith(s))return[s,e.slice(s.length)];if(e.endsWith(s))return[s,e.slice(0,e.length-s.length)]}}catch(o){r.e(o)}finally{r.f()}}},{key:"parse",value:function(e){if(e==null)return Ke.Empty.getSingletonInstance();if(typeof e=="number")return vb(e)?new Ke.Error(R.NUM,D.ValueLarge):new Ke.Number(e);if(typeof e=="boolean")return new Ke.Boolean(e);if(e instanceof Date){var r=this.dateHelper.dateToNumber({day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}),a=Ms({hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()+e.getMilliseconds()/1e3}),s=r+a;return s<0?new Ke.Error(R.NUM,D.DateBounds):s%1==0?new Ke.Number(new lc(s,"Date()")):s<1?new Ke.Number(new uc(s,"Date()")):new Ke.Number(new cc(s,"Date()"))}else if(typeof e=="string"){if(hse(e))return new Ke.Boolean(e.toLowerCase()==="true");if(dse(e))return new Ke.Formula(e);if(yse(e,this.config.errorMapping))return new Ke.Error(this.config.errorMapping[e.toUpperCase()]);var o=e.trim(),l=0,u;if(o.endsWith("%"))l=1,o=o.slice(0,o.length-1);else{var c=this.currencyMatcher(o);if(c!==void 0){l=2;var p=use(c,2);u=p[0],o=p[1]}}var m=this.numberLiteralsHelper.numericStringToMaybeNumber(o);if(m!==void 0){var f;return l===1?f=new Tf(m/100):l===2?f=new db(m,u):f=m,new Ke.Number(f)}var d=this.dateHelper.dateStringToDateNumber(o);return d!==void 0?new Ke.Number(d):new Ke.String(e.startsWith("'")?e.slice(1):e)}else throw new py(e)}}]),i}();var YLe=j(Nr());function r_(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function n_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function i_(i,t,e){return t&&n_(i.prototype,t),e&&n_(i,e),i}var $o;(function(i){i[i.COPY=0]="COPY",i[i.CUT=1]="CUT"})($o||($o={}));var ur;(function(i){i[i.VALUE=0]="VALUE",i[i.EMPTY=1]="EMPTY",i[i.FORMULA=2]="FORMULA",i[i.PARSING_ERROR=3]="PARSING_ERROR"})(ur||(ur={}));var a_=function(){function i(t,e,r,a,s){r_(this,i),this.sourceLeftCorner=t,this.width=e,this.height=r,this.type=a,this.content=s}return i_(i,[{key:"getContent",value:regeneratorRuntime.mark(function t(e){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(this.content!==void 0){o.next=4;break}return o.abrupt("return");case 4:r=0;case 5:if(!(r<this.height)){o.next=16;break}a=0;case 7:if(!(a<this.width)){o.next=13;break}return o.next=10,[$(e.sheet,e.col+a,e.row+r),this.content[r][a]];case 10:++a,o.next=7;break;case 13:++r,o.next=5;break;case 16:case"end":return o.stop()}},t,this)})}]),i}(),s_=function(){function i(t,e,r){r_(this,i),this.dependencyGraph=e,this.operations=r,this.maxRows=t.maxRows,this.maxColumns=t.maxColumns}return i_(i,[{key:"cut",value:function(e,r,a){this.clipboard=new a_(e,r,a,$o.CUT)}},{key:"copy",value:function(e,r,a){for(var s=[],o=0;o<a;++o){s[o]=[];for(var l=0;l<r;++l){var u=this.operations.getClipboardCell($(e.sheet,e.col+l,e.row+o));s[o].push(u)}}this.clipboard=new a_(e,r,a,$o.COPY,s)}},{key:"abortCut",value:function(){this.clipboard&&this.clipboard.type===$o.CUT&&this.clear()}},{key:"clear",value:function(){this.clipboard=void 0}},{key:"ensureItIsPossibleToCopyPaste",value:function(e){if(this.clipboard!==void 0){if(Ht(e)||!this.dependencyGraph.sheetMapping.hasSheetWithId(e.sheet))throw new ot("a valid target address.");var r=ae.spanFrom(e,this.clipboard.width,this.clipboard.height);if(r.exceedsSheetSizeLimits(this.maxColumns,this.maxRows))throw new Ln;if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(r))throw new Error("It is not possible to paste onto an array")}}},{key:"isCutClipboard",value:function(){return this.clipboard!==void 0&&this.clipboard.type===$o.CUT}},{key:"isCopyClipboard",value:function(){return this.clipboard!==void 0&&this.clipboard.type===$o.COPY}}]),i}();var kGe=j(q());var tUe=j(q()),rUe=j(Vt());function Gb(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function o_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function qb(i,t,e){return t&&o_(i.prototype,t),e&&o_(i,e),i}var l_=function(){function i(t,e,r,a){Gb(this,i),this.displayName=t,this.address=e,this.added=r,this.options=a}return qb(i,[{key:"normalizeExpressionName",value:function(){return this.displayName.toLowerCase()}},{key:"copy",value:function(){return new i(this.displayName,this.address,this.added,this.options)}}]),i}(),bse=function(){function i(){Gb(this,i),this.mapping=new Map}return qb(i,[{key:"has",value:function(e){return this.mapping.has(this.normalizeExpressionName(e))}},{key:"isNameAvailable",value:function(e){var r=this.normalizeExpressionName(e),a=this.mapping.get(r);return!(a&&a.added)}},{key:"add",value:function(e){this.mapping.set(e.normalizeExpressionName(),e)}},{key:"get",value:function(e){return this.mapping.get(this.normalizeExpressionName(e))}},{key:"getExisting",value:function(e){var r=this.mapping.get(this.normalizeExpressionName(e));if(r&&r.added)return r}},{key:"remove",value:function(e){var r=this.normalizeExpressionName(e),a=this.mapping.get(r);a&&(a.added=!1)}},{key:"getAllNamedExpressions",value:function(){return Array.from(this.mapping.values()).filter(function(e){return e.added})}},{key:"normalizeExpressionName",value:function(e){return e.toLowerCase()}}]),i}(),u_=function(){function i(){Gb(this,i),this.mapping=new Map}return qb(i,[{key:"add",value:function(e){this.mapping.set(this.normalizeExpressionName(e.displayName),e)}},{key:"get",value:function(e){return this.mapping.get(this.normalizeExpressionName(e))}},{key:"has",value:function(e){return this.mapping.has(this.normalizeExpressionName(e))}},{key:"getAllNamedExpressions",value:function(){return Array.from(this.mapping.values()).filter(function(e){return e.added})}},{key:"normalizeExpressionName",value:function(e){return e.toLowerCase()}},{key:"isNameAvailable",value:function(e){var r=this.normalizeExpressionName(e);return!this.mapping.has(r)}},{key:"remove",value:function(e){var r=this.normalizeExpressionName(e),a=this.mapping.get(r);a&&this.mapping.delete(r)}}]),i}(),Tc=function(){function i(){Gb(this,i),this.nextNamedExpressionRow=0,this.workbookStore=new bse,this.worksheetStores=new Map,this.addressCache=new Map}return qb(i,[{key:"isNameAvailable",value:function(e,r){var a,s;return r===void 0?this.workbookStore.isNameAvailable(e):(s=(a=this.worksheetStore(r))===null||a===void 0?void 0:a.isNameAvailable(e))!==null&&s!==void 0?s:!0}},{key:"namedExpressionInAddress",value:function(e){var r=this.addressCache.get(e);if(r&&r.added)return r}},{key:"namedExpressionForScope",value:function(e,r){var a;return r===void 0?this.workbookStore.getExisting(e):(a=this.worksheetStore(r))===null||a===void 0?void 0:a.get(e)}},{key:"nearestNamedExpression",value:function(e,r){var a,s;return(s=(a=this.worksheetStore(r))===null||a===void 0?void 0:a.get(e))!==null&&s!==void 0?s:this.workbookStore.getExisting(e)}},{key:"isExpressionInScope",value:function(e,r){var a,s;return(s=(a=this.worksheetStore(r))===null||a===void 0?void 0:a.has(e))!==null&&s!==void 0?s:!1}},{key:"isNameValid",value:function(e){return/^[A-Za-z]+[0-9]+$/.test(e)?!1:/^[A-Za-z\u00C0-\u02AF_][A-Za-z0-9\u00C0-\u02AF._]*$/.test(e)}},{key:"addNamedExpression",value:function(e,r,a){var s=r===void 0?this.workbookStore:this.worksheetStoreOrCreate(r),o=s.get(e);return o!==void 0?(o.added=!0,o.displayName=e,o.options=a):(o=new l_(e,this.nextAddress(),!0,a),s.add(o)),this.addressCache.set(o.address.row,o),o}},{key:"restoreNamedExpression",value:function(e,r){var a=r===void 0?this.workbookStore:this.worksheetStoreOrCreate(r);return e.added=!0,a.add(e),this.addressCache.set(e.address.row,e),e}},{key:"worksheetStoreOrCreate",value:function(e){var r=this.worksheetStores.get(e);return r||(r=new u_,this.worksheetStores.set(e,r)),r}},{key:"worksheetStore",value:function(e){return this.worksheetStores.get(e)}},{key:"namedExpressionOrPlaceholder",value:function(e,r){var a;return(a=this.worksheetStoreOrCreate(r).get(e))!==null&&a!==void 0?a:this.workbookNamedExpressionOrPlaceholder(e)}},{key:"workbookNamedExpressionOrPlaceholder",value:function(e){var r=this.workbookStore.get(e);return r===void 0&&(r=new l_(e,this.nextAddress(),!1),this.workbookStore.add(r)),r}},{key:"remove",value:function(e,r){var a;r===void 0?a=this.workbookStore:a=this.worksheetStore(r);var s=a==null?void 0:a.get(e);if(a===void 0||s===void 0||!s.added)throw"Named expression does not exist";a.remove(e),a instanceof u_&&a.mapping.size===0&&this.worksheetStores.delete(r),this.addressCache.delete(s.address.row)}},{key:"getAllNamedExpressionsNamesInScope",value:function(e){return this.getAllNamedExpressions().filter(function(r){var a=r.scope;return a===e}).map(function(r){return r.expression.displayName})}},{key:"getAllNamedExpressionsNames",value:function(){return this.getAllNamedExpressions().map(function(e){return e.expression.displayName})}},{key:"getAllNamedExpressions",value:function(){var e=[];return this.workbookStore.getAllNamedExpressions().forEach(function(r){e.push({expression:r,scope:void 0})}),this.worksheetStores.forEach(function(r,a){r.getAllNamedExpressions().forEach(function(s){e.push({expression:s,scope:a})})}),e}},{key:"getAllNamedExpressionsForScope",value:function(e){var r,a;return e===void 0?this.workbookStore.getAllNamedExpressions():(a=(r=this.worksheetStores.get(e))===null||r===void 0?void 0:r.getAllNamedExpressions())!==null&&a!==void 0?a:[]}},{key:"nextAddress",value:function(){return $(i.SHEET_FOR_WORKBOOK_EXPRESSIONS,0,this.nextNamedExpressionRow++)}}]),i}();Tc.SHEET_FOR_WORKBOOK_EXPRESSIONS=-1;var Wb=function i(t){switch(t.type){case P.EMPTY:case P.NUMBER:case P.STRING:case P.ERROR:case P.ERROR_WITH_RAW_INPUT:return!1;case P.CELL_REFERENCE:return!t.reference.isAbsolute();case P.CELL_RANGE:case P.COLUMN_RANGE:case P.ROW_RANGE:return!t.start.isAbsolute();case P.NAMED_EXPRESSION:return!1;case P.PERCENT_OP:case P.PLUS_UNARY_OP:case P.MINUS_UNARY_OP:return i(t.value);case P.CONCATENATE_OP:case P.EQUALS_OP:case P.NOT_EQUAL_OP:case P.LESS_THAN_OP:case P.GREATER_THAN_OP:case P.LESS_THAN_OR_EQUAL_OP:case P.GREATER_THAN_OR_EQUAL_OP:case P.MINUS_OP:case P.PLUS_OP:case P.TIMES_OP:case P.DIV_OP:case P.POWER_OP:return i(t.left)||i(t.right);case P.PARENTHESIS:return i(t.expression);case P.FUNCTION_CALL:return t.args.some(function(e){return i(e)});case P.ARRAY:return t.args.some(function(e){return e.some(function(r){return i(r)})})}};var bHe=j(q());var kUe=j(q());var SUe=j(q());function gse(i,t){return Nse(i)||Tse(i,t)||c_(i,t)||vse()}function vse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tse(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Nse(i){if(Array.isArray(i))return i}function Cse(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=c_(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function c_(i,t){if(!!i){if(typeof i=="string")return p_(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return p_(i,t)}}function p_(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Sse(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function m_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ase(i,t,e){return t&&m_(i.prototype,t),e&&m_(i,e),i}var Xr=function(){function i(){Sse(this,i)}return Ase(i,[{key:"performEagerTransformations",value:function(e,r){var a=Cse(e.arrayFormulaNodes()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=this.transformSingleAst(o.getFormula(e.lazilyTransformingAstService),o.getAddress(e.lazilyTransformingAstService)),u=gse(l,2),c=u[0],p=u[1],m=r.rememberNewAst(c);o.setFormula(m),o.setAddress(p)}}catch(f){a.e(f)}finally{a.f()}}},{key:"transformSingleAst",value:function(e,r){var a=this.transformAst(e,r),s=this.fixNodeAddress(r);return[a,s]}},{key:"transformAst",value:function(e,r){var a=this;switch(e.type){case P.CELL_REFERENCE:return this.transformCellReferenceAst(e,r);case P.CELL_RANGE:return this.transformCellRangeAst(e,r);case P.COLUMN_RANGE:return this.transformColumnRangeAst(e,r);case P.ROW_RANGE:return this.transformRowRangeAst(e,r);case P.EMPTY:case P.ERROR:case P.NUMBER:case P.NAMED_EXPRESSION:case P.ERROR_WITH_RAW_INPUT:case P.STRING:return e;case P.PERCENT_OP:case P.MINUS_UNARY_OP:case P.PLUS_UNARY_OP:return Object.assign(Object.assign({},e),{value:this.transformAst(e.value,r)});case P.FUNCTION_CALL:return Object.assign(Object.assign({},e),{procedureName:e.procedureName,args:e.args.map(function(s){return a.transformAst(s,r)})});case P.PARENTHESIS:return Object.assign(Object.assign({},e),{expression:this.transformAst(e.expression,r)});case P.ARRAY:return Object.assign(Object.assign({},e),{args:e.args.map(function(s){return s.map(function(o){return a.transformAst(o,r)})})});default:return Object.assign(Object.assign({},e),{left:this.transformAst(e.left,r),right:this.transformAst(e.right,r)})}}},{key:"transformCellReferenceAst",value:function(e,r){var a=this.transformCellAddress(e.reference,r);return a instanceof _r?Object.assign(Object.assign({},e),{reference:a}):a===R.REF?wn(new x(R.REF)):e}},{key:"transformCellRangeAst",value:function(e,r){var a=this.transformCellRange(e.start,e.end,r);return Array.isArray(a)?Object.assign(Object.assign({},e),{start:a[0],end:a[1]}):a===R.REF?wn(new x(R.REF)):e}},{key:"transformColumnRangeAst",value:function(e,r){var a=this.transformColumnRange(e.start,e.end,r);return Array.isArray(a)?Object.assign(Object.assign({},e),{start:a[0],end:a[1]}):a===R.REF?wn(new x(R.REF)):e}},{key:"transformRowRangeAst",value:function(e,r){var a=this.transformRowRange(e.start,e.end,r);return Array.isArray(a)?Object.assign(Object.assign({},e),{start:a[0],end:a[1]}):a===R.REF?wn(new x(R.REF)):e}}]),i}();function $b(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$b=function(e){return typeof e}:$b=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$b(i)}function wse(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function f_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function xse(i,t,e){return t&&f_(i.prototype,t),e&&f_(i,e),i}function Ese(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&TS(i,t)}function TS(i,t){return TS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},TS(i,t)}function Rse(i){var t=Ose();return function(){var r=Kb(i),a;if(t){var s=Kb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Vse(this,a)}}function Vse(i,t){if(t&&($b(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ise(i)}function Ise(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ose(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Kb(i){return Kb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kb(i)}var d_=function(i){Ese(e,i);var t=Rse(e);function e(r){var a;return wse(this,e),a=t.call(this),a.columnsSpan=r,a}return xse(e,[{key:"sheet",get:function(){return this.columnsSpan.sheet}},{key:"isIrreversible",value:function(){return!1}},{key:"transformRowRangeAst",value:function(a,s){return a}},{key:"transformCellRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRowRange",value:function(a,s,o){throw Error("Not implemented")}},{key:"transformColumnRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformCellAddress",value:function(a,s){var o=sr(a,s);if(o!==this.columnsSpan.sheet&&s.sheet!==this.columnsSpan.sheet)return!1;var l=a.toSimpleColumnAddress(s);if(o===this.columnsSpan.sheet&&s.sheet!==this.columnsSpan.sheet)return this.columnsSpan.columnStart<=l.col?a.shiftedByColumns(this.columnsSpan.numberOfColumns):!1;if(s.sheet===this.columnsSpan.sheet&&o!==this.columnsSpan.sheet)return a.isColumnAbsolute()||s.col<this.columnsSpan.columnStart?!1:a.shiftedByColumns(-this.columnsSpan.numberOfColumns);if(a.isColumnAbsolute())return a.col<this.columnsSpan.columnStart?!1:a.shiftedByColumns(this.columnsSpan.numberOfColumns);var u=a.toSimpleColumnAddress(s);return u.col<this.columnsSpan.columnStart?s.col<this.columnsSpan.columnStart?!1:a.shiftedByColumns(-this.columnsSpan.numberOfColumns):s.col<this.columnsSpan.columnStart?a.shiftedByColumns(this.columnsSpan.numberOfColumns):!1}},{key:"fixNodeAddress",value:function(a){return this.columnsSpan.sheet===a.sheet&&this.columnsSpan.columnStart<=a.col?Object.assign(Object.assign({},a),{col:a.col+this.columnsSpan.numberOfColumns}):a}},{key:"transformRange",value:function(a,s,o){var l=this.transformCellAddress(a,o),u=this.transformCellAddress(s,o);return l===R.REF||u===R.REF?R.REF:l||u?[l||a,u||s]:!1}}]),e}(Xr);var KUe=j(q());function Xb(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xb=function(e){return typeof e}:Xb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xb(i)}function Dse(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function h_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Pse(i,t,e){return t&&h_(i.prototype,t),e&&h_(i,e),i}function _se(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&NS(i,t)}function NS(i,t){return NS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},NS(i,t)}function kse(i){var t=jse();return function(){var r=Yb(i),a;if(t){var s=Yb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Fse(this,a)}}function Fse(i,t){if(t&&(Xb(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mse(i)}function Mse(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jse(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Yb(i){return Yb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yb(i)}var Pf=function(i){_se(e,i);var t=kse(e);function e(r){var a;return Dse(this,e),a=t.call(this),a.rowsSpan=r,a}return Pse(e,[{key:"sheet",get:function(){return this.rowsSpan.sheet}},{key:"isIrreversible",value:function(){return!1}},{key:"transformColumnRangeAst",value:function(a,s){return a}},{key:"transformCellRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRowRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformColumnRange",value:function(a,s,o){throw Error("Not implemented")}},{key:"transformCellAddress",value:function(a,s){var o=sr(a,s);if(o!==this.rowsSpan.sheet&&s.sheet!==this.rowsSpan.sheet)return!1;var l=a.toSimpleRowAddress(s);return o===this.rowsSpan.sheet&&s.sheet!==this.rowsSpan.sheet?this.rowsSpan.rowStart<=l.row?a.shiftedByRows(this.rowsSpan.numberOfRows):!1:s.sheet===this.rowsSpan.sheet&&o!==this.rowsSpan.sheet?a.isRowAbsolute()||s.row<this.rowsSpan.rowStart?!1:a.shiftedByRows(-this.rowsSpan.numberOfRows):a.isRowAbsolute()?a.row<this.rowsSpan.rowStart?!1:a.shiftedByRows(this.rowsSpan.numberOfRows):l.row<this.rowsSpan.rowStart?s.row<this.rowsSpan.rowStart?!1:a.shiftedByRows(-this.rowsSpan.numberOfRows):s.row<this.rowsSpan.rowStart?a.shiftedByRows(this.rowsSpan.numberOfRows):!1}},{key:"fixNodeAddress",value:function(a){return this.rowsSpan.sheet===a.sheet&&this.rowsSpan.rowStart<=a.row?Object.assign(Object.assign({},a),{row:a.row+this.rowsSpan.numberOfRows}):a}},{key:"transformRange",value:function(a,s,o){var l=this.transformCellAddress(a,o),u=this.transformCellAddress(s,o);return l===R.REF||u===R.REF?R.REF:l||u?[l||a,u||s]:!1}}]),e}(Xr);var sze=j(q());function Zb(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zb=function(e){return typeof e}:Zb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zb(i)}function Bse(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function y_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Lse(i,t,e){return t&&y_(i.prototype,t),e&&y_(i,e),i}function Use(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&CS(i,t)}function CS(i,t){return CS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},CS(i,t)}function zse(i){var t=qse();return function(){var r=Jb(i),a;if(t){var s=Jb(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Hse(this,a)}}function Hse(i,t){if(t&&(Zb(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gse(i)}function Gse(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function qse(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Jb(i){return Jb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jb(i)}var b_=function(i){Use(e,i);var t=zse(e);function e(r){var a;return Bse(this,e),a=t.call(this),a.sheet=r,a}return Lse(e,[{key:"isIrreversible",value:function(){return!0}},{key:"fixNodeAddress",value:function(a){return a}},{key:"transformCellAddress",value:function(a,s){return a.isInvalid(s)?R.REF:!1}},{key:"transformCellRange",value:function(a,s,o){return a.isInvalid(o)||s.isInvalid(o)?R.REF:!1}},{key:"transformColumnRange",value:function(a,s,o){return a.isInvalid(o)||s.isInvalid(o)?R.REF:!1}},{key:"transformRowRange",value:function(a,s,o){return a.isInvalid(o)||s.isInvalid(o)?R.REF:!1}}]),e}(Xr);var gze=j(q());function Qb(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qb=function(e){return typeof e}:Qb=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qb(i)}function g_(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function v_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function T_(i,t,e){return t&&v_(i.prototype,t),e&&v_(i,e),i}function N_(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&SS(i,t)}function SS(i,t){return SS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},SS(i,t)}function C_(i){var t=Kse();return function(){var r=eg(i),a;if(t){var s=eg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Wse(this,a)}}function Wse(i,t){if(t&&(Qb(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $se(i)}function $se(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kse(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function eg(i){return eg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},eg(i)}var S_=function(i){N_(e,i);var t=C_(e);function e(r,a,s,o){var l;return g_(this,e),l=t.call(this),l.sourceRange=r,l.toRight=a,l.toBottom=s,l.toSheet=o,l.dependentFormulaTransformer=new Xse(r,a,s,o),l}return T_(e,[{key:"isIrreversible",value:function(){return!0}},{key:"sheet",get:function(){return this.sourceRange.sheet}},{key:"transformSingleAst",value:function(a,s){if(this.sourceRange.addressInRange(s)){var o=this.transformAst(a,s);return[o,this.fixNodeAddress(s)]}else return this.dependentFormulaTransformer.transformSingleAst(a,s)}},{key:"fixNodeAddress",value:function(a){return $(this.toSheet,a.col+this.toRight,a.row+this.toBottom)}},{key:"transformCellAddress",value:function(a,s){return this.transformAddress(a,s)}},{key:"transformCellRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformColumnRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRowRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformAddress",value:function(a,s){var o=this.sourceRange;if(a instanceof _r){var l=a.toSimpleCellAddress(s);if(o.addressInRange(l))return a.shiftAbsoluteDimensions(this.toRight,this.toBottom)}return a.shiftRelativeDimensions(-this.toRight,-this.toBottom)}},{key:"transformRange",value:function(a,s,o){var l=this.sourceRange;if(a instanceof _r&&s instanceof _r){var u=a.toSimpleCellAddress(o),c=s.toSimpleCellAddress(o);if(l.addressInRange(u)&&l.addressInRange(c))return[a.shiftAbsoluteDimensions(this.toRight,this.toBottom),s.shiftAbsoluteDimensions(this.toRight,this.toBottom)]}return[a.shiftRelativeDimensions(-this.toRight,-this.toBottom),s.shiftRelativeDimensions(-this.toRight,-this.toBottom)]}}]),e}(Xr),Xse=function(i){N_(e,i);var t=C_(e);function e(r,a,s,o){var l;return g_(this,e),l=t.call(this),l.sourceRange=r,l.toRight=a,l.toBottom=s,l.toSheet=o,l}return T_(e,[{key:"sheet",get:function(){return this.sourceRange.sheet}},{key:"isIrreversible",value:function(){return!0}},{key:"fixNodeAddress",value:function(a){return a}},{key:"transformCellAddress",value:function(a,s){return this.shouldMove(a,s)?a.moved(this.toSheet,this.toRight,this.toBottom):!1}},{key:"shouldMove",value:function(a,s){return a instanceof _r?this.sourceRange.addressInRange(a.toSimpleCellAddress(s)):a instanceof cf?this.sourceRange.rowInRange(a.toSimpleRowAddress(s))&&!this.sourceRange.isFinite():this.sourceRange.columnInRange(a.toSimpleColumnAddress(s))&&!this.sourceRange.isFinite()}},{key:"transformCellRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformColumnRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRowRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRange",value:function(a,s,o){var l=this.transformCellAddress(a,o),u=this.transformCellAddress(s,o);return l&&u?[l,u]:!1}}]),e}(Xr);var Pze=j(q());function tg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tg=function(e){return typeof e}:tg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(i)}function Yse(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function A_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Zse(i,t,e){return t&&A_(i.prototype,t),e&&A_(i,e),i}function Jse(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&AS(i,t)}function AS(i,t){return AS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},AS(i,t)}function Qse(i){var t=roe();return function(){var r=rg(i),a;if(t){var s=rg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return eoe(this,a)}}function eoe(i,t){if(t&&(tg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return toe(i)}function toe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function roe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function rg(i){return rg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rg(i)}var w_=function(i){Jse(e,i);var t=Qse(e);function e(r){var a;return Yse(this,e),a=t.call(this),a.columnsSpan=r,a}return Zse(e,[{key:"isIrreversible",value:function(){return!0}},{key:"sheet",get:function(){return this.columnsSpan.sheet}},{key:"transformRowRangeAst",value:function(a,s){return a}},{key:"transformCellRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRowRange",value:function(a,s,o){throw Error("Not implemented")}},{key:"transformColumnRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformCellAddress",value:function(a,s){var o=sr(a,s);if(this.columnsSpan.sheet!==s.sheet&&this.columnsSpan.sheet!==o)return!1;if(this.columnsSpan.sheet!==s.sheet&&this.columnsSpan.sheet===o){var l=a.toSimpleColumnAddress(s);if(l.col<this.columnsSpan.columnStart)return!1;if(l.col>this.columnsSpan.columnEnd)return a.shiftedByColumns(-this.columnsSpan.numberOfColumns)}if(this.columnsSpan.sheet===s.sheet&&this.columnsSpan.sheet!==o){if(a.isColumnAbsolute())return!1;if(s.col<this.columnsSpan.columnStart)return!1;if(s.col>this.columnsSpan.columnEnd)return a.shiftedByColumns(this.columnsSpan.numberOfColumns)}if(this.columnsSpan.sheet===s.sheet&&this.columnsSpan.sheet===o)if(a.isColumnAbsolute()){if(a.col<this.columnsSpan.columnStart)return!1;if(a.col>this.columnsSpan.columnEnd)return a.shiftedByColumns(-this.columnsSpan.numberOfColumns)}else{var u=a.toSimpleColumnAddress(s);if(u.col<this.columnsSpan.columnStart){if(s.col<this.columnsSpan.columnStart)return!1;if(s.col>this.columnsSpan.columnEnd)return a.shiftedByColumns(this.columnsSpan.numberOfColumns)}else if(u.col>this.columnsSpan.columnEnd){if(s.col<this.columnsSpan.columnStart)return a.shiftedByColumns(-this.columnsSpan.numberOfColumns);if(s.col>this.columnsSpan.columnEnd)return!1}}return R.REF}},{key:"fixNodeAddress",value:function(a){return this.columnsSpan.sheet===a.sheet&&this.columnsSpan.columnStart<=a.col?Object.assign(Object.assign({},a),{col:a.col-this.columnsSpan.numberOfColumns}):a}},{key:"transformRange",value:function(a,s,o){var l=sr(a,o),u=a,c=s;if(this.columnsSpan.sheet===l){var p=a.toSimpleColumnAddress(o),m=s.toSimpleColumnAddress(o);if(this.columnsSpan.columnStart<=p.col&&this.columnsSpan.columnEnd>=m.col)return R.REF;p.col>=this.columnsSpan.columnStart&&p.col<=this.columnsSpan.columnEnd&&(u=a.shiftedByColumns(this.columnsSpan.columnEnd-p.col+1)),m.col>=this.columnsSpan.columnStart&&m.col<=this.columnsSpan.columnEnd&&(c=s.shiftedByColumns(-(m.col-this.columnsSpan.columnStart+1)))}var f=this.transformCellAddress(u,o),d=this.transformCellAddress(c,o);if(f===!1&&d===!1)return[u,c];if(f===R.REF||d===R.REF)throw Error("Cannot happen");return[f||u,d||c]}}]),e}(Xr);var Wze=j(q());function ng(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ng=function(e){return typeof e}:ng=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(i)}function noe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function x_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ioe(i,t,e){return t&&x_(i.prototype,t),e&&x_(i,e),i}function aoe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&wS(i,t)}function wS(i,t){return wS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},wS(i,t)}function soe(i){var t=uoe();return function(){var r=ig(i),a;if(t){var s=ig(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return ooe(this,a)}}function ooe(i,t){if(t&&(ng(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return loe(i)}function loe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function uoe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function ig(i){return ig=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ig(i)}var _f=function(i){aoe(e,i);var t=soe(e);function e(r){var a;return noe(this,e),a=t.call(this),a.rowsSpan=r,a}return ioe(e,[{key:"sheet",get:function(){return this.rowsSpan.sheet}},{key:"isIrreversible",value:function(){return!0}},{key:"transformColumnRangeAst",value:function(a,s){return a}},{key:"transformCellAddress",value:function(a,s){var o=sr(a,s);if(this.rowsSpan.sheet!==s.sheet&&this.rowsSpan.sheet!==o)return!1;if(this.rowsSpan.sheet!==s.sheet&&this.rowsSpan.sheet===o){var l=a.toSimpleRowAddress(s);if(l.row<this.rowsSpan.rowStart)return!1;if(l.row>this.rowsSpan.rowEnd)return a.shiftedByRows(-this.rowsSpan.numberOfRows)}if(this.rowsSpan.sheet===s.sheet&&this.rowsSpan.sheet!==o){if(a.isRowAbsolute())return!1;if(s.row<this.rowsSpan.rowStart)return!1;if(s.row>this.rowsSpan.rowEnd)return a.shiftedByRows(this.rowsSpan.numberOfRows)}if(this.rowsSpan.sheet===s.sheet&&this.rowsSpan.sheet===o)if(a.isRowAbsolute()){if(a.row<this.rowsSpan.rowStart)return!1;if(a.row>this.rowsSpan.rowEnd)return a.shiftedByRows(-this.rowsSpan.numberOfRows)}else{var u=a.toSimpleRowAddress(s);if(u.row<this.rowsSpan.rowStart){if(s.row<this.rowsSpan.rowStart)return!1;if(s.row>this.rowsSpan.rowEnd)return a.shiftedByRows(this.rowsSpan.numberOfRows)}else if(u.row>this.rowsSpan.rowEnd){if(s.row<this.rowsSpan.rowStart)return a.shiftedByRows(-this.rowsSpan.numberOfRows);if(s.row>this.rowsSpan.rowEnd)return!1}}return R.REF}},{key:"transformCellRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformRowRange",value:function(a,s,o){return this.transformRange(a,s,o)}},{key:"transformColumnRange",value:function(a,s,o){throw Error("Not implemented")}},{key:"fixNodeAddress",value:function(a){return this.rowsSpan.sheet===a.sheet&&this.rowsSpan.rowStart<=a.row?Object.assign(Object.assign({},a),{row:a.row-this.rowsSpan.numberOfRows}):a}},{key:"transformRange",value:function(a,s,o){var l=sr(a,o),u=a,c=s;if(this.rowsSpan.sheet===l){var p=a.toSimpleRowAddress(o),m=s.toSimpleRowAddress(o);if(this.rowsSpan.rowStart<=p.row&&this.rowsSpan.rowEnd>=m.row)return R.REF;p.row>=this.rowsSpan.rowStart&&p.row<=this.rowsSpan.rowEnd&&(u=a.shiftedByRows(this.rowsSpan.rowEnd-p.row+1)),m.row>=this.rowsSpan.rowStart&&m.row<=this.rowsSpan.rowEnd&&(c=s.shiftedByRows(-(m.row-this.rowsSpan.rowStart+1)))}var f=this.transformCellAddress(u,o),d=this.transformCellAddress(c,o);return f===!1&&d===!1?[u,c]:f===R.REF||d===R.REF?R.REF:[f||u,d||c]}}]),e}(Xr);var lHe=j(q());function ag(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ag=function(e){return typeof e}:ag=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(i)}function coe(i,t){return foe(i)||moe(i,t)||E_(i,t)||poe()}function poe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function moe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function foe(i){if(Array.isArray(i))return i}function doe(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=E_(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function E_(i,t){if(!!i){if(typeof i=="string")return R_(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return R_(i,t)}}function R_(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function hoe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function V_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function yoe(i,t,e){return t&&V_(i.prototype,t),e&&V_(i,e),i}function boe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&xS(i,t)}function xS(i,t){return xS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},xS(i,t)}function goe(i){var t=Noe();return function(){var r=sg(i),a;if(t){var s=sg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return voe(this,a)}}function voe(i,t){if(t&&(ag(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Toe(i)}function Toe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Noe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function sg(i){return sg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sg(i)}var I_=function(i){boe(e,i);var t=goe(e);function e(r){var a;return hoe(this,e),a=t.call(this),a.sheet=r,a}return yoe(e,[{key:"isIrreversible",value:function(){return!0}},{key:"performEagerTransformations",value:function(a,s){var o=doe(a.arrayFormulaNodes()),l;try{for(o.s();!(l=o.n()).done;){var u=l.value,c=this.transformSingleAst(u.getFormula(a.lazilyTransformingAstService),u.getAddress(a.lazilyTransformingAstService)),p=coe(c,1),m=p[0];u.setFormula(m)}}catch(f){o.e(f)}finally{o.f()}}},{key:"fixNodeAddress",value:function(a){return a}},{key:"transformCellAddress",value:function(a,s){return this.transformAddress(a)}},{key:"transformCellRange",value:function(a,s,o){return this.transformAddress(a)}},{key:"transformColumnRange",value:function(a,s,o){return this.transformAddress(a)}},{key:"transformRowRange",value:function(a,s,o){return this.transformAddress(a)}},{key:"transformAddress",value:function(a){return a.sheet===this.sheet?R.REF:!1}}]),e}(Xr);function og(i){if(!Array.isArray(i))throw new ot("an array of arrays.");for(var t=0;t<i.length;t++)if(!Array.isArray(i[t]))throw new ot("an array of arrays.")}function Ko(i){for(var t=0,e=0,r=0,a=0;a<i.length;a++){for(var s=0,o=0;o<i[a].length;o++){var l=i[a][o];l!=null&&(s=o+1,++r)}t=Math.max(t,s),s>0&&(e=a+1)}var u=t*e;return{height:e,width:t,fill:u===0?0:r/u}}function lg(i){return Aoe(i)||Soe(i)||ES(i)||Coe()}function Coe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Soe(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Aoe(i){if(Array.isArray(i))return RS(i)}function fn(i,t){return Eoe(i)||xoe(i,t)||ES(i,t)||woe()}function woe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xoe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Eoe(i){if(Array.isArray(i))return i}function Yr(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=ES(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function ES(i,t){if(!!i){if(typeof i=="string")return RS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return RS(i,t)}}function RS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function kf(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function O_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ff(i,t,e){return t&&O_(i.prototype,t),e&&O_(i,e),i}var ug=function(){function i(t,e){kf(this,i),this.sheet=t,this.indexes=e}return Ff(i,[{key:"normalizedIndexes",value:function(){return Mf(this.indexes)}},{key:"rowsSpans",value:function(){var e=this;return this.normalizedIndexes().map(function(r){return ln.fromNumberOfRows(e.sheet,r[0],r[1])})}}]),i}(),cg=function(){function i(t,e){kf(this,i),this.sheet=t,this.indexes=e}return Ff(i,[{key:"normalizedIndexes",value:function(){return jf(this.indexes)}},{key:"rowsSpans",value:function(){var e=this;return this.normalizedIndexes().map(function(r){return ln.fromNumberOfRows(e.sheet,r[0],r[1])})}}]),i}(),pg=function(){function i(t,e){kf(this,i),this.sheet=t,this.indexes=e}return Ff(i,[{key:"normalizedIndexes",value:function(){return jf(this.indexes)}},{key:"columnsSpans",value:function(){var e=this;return this.normalizedIndexes().map(function(r){return Wn.fromNumberOfColumns(e.sheet,r[0],r[1])})}}]),i}(),mg=function(){function i(t,e){kf(this,i),this.sheet=t,this.indexes=e}return Ff(i,[{key:"normalizedIndexes",value:function(){return Mf(this.indexes)}},{key:"columnsSpans",value:function(){var e=this;return this.normalizedIndexes().map(function(r){return Wn.fromNumberOfColumns(e.sheet,r[0],r[1])})}}]),i}(),D_=function(){function i(t,e,r,a,s,o,l,u,c){kf(this,i),this.dependencyGraph=e,this.columnSearch=r,this.cellContentParser=a,this.parser=s,this.stats=o,this.lazilyTransformingAstService=l,this.namedExpressions=u,this.arraySizePredictor=c,this.changes=_a.empty(),this.allocateNamedExpressionAddressSpace(),this.maxColumns=t.maxColumns,this.maxRows=t.maxRows}return Ff(i,[{key:"removeRows",value:function(e){var r=[],a=Yr(e.rowsSpans()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=this.doRemoveRows(o);l&&r.push(l)}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"addRows",value:function(e){var r=Yr(e.rowsSpans()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.doAddRows(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"addColumns",value:function(e){var r=Yr(e.columnsSpans()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.doAddColumns(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"removeColumns",value:function(e){var r=[],a=Yr(e.columnsSpans()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=this.doRemoveColumns(o);l&&r.push(l)}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"removeSheet",value:function(e){var r=this;this.dependencyGraph.removeSheet(e);var a;this.stats.measure(oe.TRANSFORM_ASTS,function(){var o=new I_(e);o.performEagerTransformations(r.dependencyGraph,r.parser),a=r.lazilyTransformingAstService.addTransformation(o)}),this.sheetMapping.removeSheet(e),this.columnSearch.removeSheet(e);var s=this.namedExpressions.getAllNamedExpressionsForScope(e).map(function(o){return r.removeNamedExpression(o.normalizeExpressionName(),e)});return{version:a,scopedNamedExpressions:s}}},{key:"removeSheetByName",value:function(e){var r=this.sheetMapping.fetch(e);return this.removeSheet(r)}},{key:"clearSheet",value:function(e){this.dependencyGraph.clearSheet(e),this.columnSearch.removeSheet(e)}},{key:"addSheet",value:function(e){var r=this.sheetMapping.addSheet(e),a=[];return this.dependencyGraph.addressMapping.autoAddSheet(r,a,Ko(a)),this.sheetMapping.fetchDisplayName(r)}},{key:"renameSheet",value:function(e,r){return this.sheetMapping.renameSheet(e,r)}},{key:"moveRows",value:function(e,r,a,s){var o=ln.fromNumberOfRows(e,s,a);this.lazilyTransformingAstService.beginCombinedMode(e),this.doAddRows(o),s<r&&(r+=a);var l=$(e,0,r),u=$(e,0,s);this.moveCells(l,Number.POSITIVE_INFINITY,a,u);var c=ln.fromNumberOfRows(e,r,a);return this.doRemoveRows(c),this.lazilyTransformingAstService.commitCombinedMode()}},{key:"moveColumns",value:function(e,r,a,s){var o=Wn.fromNumberOfColumns(e,s,a);this.lazilyTransformingAstService.beginCombinedMode(e),this.doAddColumns(o),s<r&&(r+=a);var l=$(e,r,0),u=$(e,s,0);this.moveCells(l,a,Number.POSITIVE_INFINITY,u);var c=Wn.fromNumberOfColumns(e,r,a);return this.doRemoveColumns(c),this.lazilyTransformingAstService.commitCombinedMode()}},{key:"moveCells",value:function(e,r,a,s){var o=this;this.ensureItIsPossibleToMoveCells(e,r,a,s);var l=ae.spanFrom(e,r,a),u=ae.spanFrom(s,r,a),c=s.col-e.col,p=s.row-e.row,m=s.sheet,f=this.getRangeClipboardCells(u),d=this.dependencyGraph.rawValuesFromRange(u);this.columnSearch.removeValues(d);var h=this.dependencyGraph.rawValuesFromRange(l);this.columnSearch.moveValues(h,c,p,m);var y;this.stats.measure(oe.TRANSFORM_ASTS,function(){var g=new S_(l,c,p,m);g.performEagerTransformations(o.dependencyGraph,o.parser),y=o.lazilyTransformingAstService.addTransformation(g)}),this.dependencyGraph.moveCells(l,c,p,m);var b=this.updateNamedExpressionsForMovedCells(e,r,a,s);return{version:y,overwrittenCellsData:f,addedGlobalNamedExpressions:b}}},{key:"setRowOrder",value:function(e,r){var a=this,s=[],o=[],l=Yr(r),u;try{var c=function(){var m=fn(u.value,2),f=m[0],d=m[1];if(f!==d){var h=ae.spanFrom({sheet:e,col:0,row:f},1/0,1),y=a.getRangeClipboardCells(h);o=o.concat(y),s.push(y.map(function(b){var g=fn(b,2),v=g[0],C=v.sheet,w=v.col,S=g[1];return[{sheet:C,col:w,row:d},S]}))}};for(l.s();!(u=l.n()).done;)c()}catch(p){l.e(p)}finally{l.f()}return s.forEach(function(p){return a.restoreClipboardCells(e,p.values())}),o}},{key:"setColumnOrder",value:function(e,r){var a=this,s=[],o=[],l=Yr(r),u;try{var c=function(){var m=fn(u.value,2),f=m[0],d=m[1];if(f!==d){var h=ae.spanFrom({sheet:e,col:f,row:0},1,1/0),y=a.getRangeClipboardCells(h);o=o.concat(y),s.push(y.map(function(b){var g=fn(b,2),v=g[0],C=v.sheet,w=v.col,S=v.row,A=g[1];return[{sheet:C,col:d,row:S},A]}))}};for(l.s();!(u=l.n()).done;)c()}catch(p){l.e(p)}finally{l.f()}return s.forEach(function(p){return a.restoreClipboardCells(e,p.values())}),o}},{key:"addNamedExpression",value:function(e,r,a,s){var o=this.namedExpressions.addNamedExpression(e,a,s);this.storeNamedExpressionInCell(o.address,r),this.adjustNamedExpressionEdges(o,e,a)}},{key:"restoreNamedExpression",value:function(e,r,a){var s=e.displayName;this.restoreCell(e.address,r);var o=this.namedExpressions.restoreNamedExpression(e,a);this.adjustNamedExpressionEdges(o,s,a)}},{key:"changeNamedExpressionExpression",value:function(e,r,a,s){var o=this.namedExpressions.namedExpressionForScope(e,a);if(!o)throw new Ss(e);var l=o.copy();o.options=s;var u=this.getClipboardCell(o.address);return this.storeNamedExpressionInCell(o.address,r),[l,u]}},{key:"removeNamedExpression",value:function(e,r){var a=this.namedExpressions.namedExpressionForScope(e,r);if(!a)throw new Ss(e);this.namedExpressions.remove(a.displayName,r);var s=this.getClipboardCell(a.address);if(r!==void 0){var o=this.namedExpressions.workbookNamedExpressionOrPlaceholder(e);this.dependencyGraph.exchangeNode(a.address,o.address)}else this.dependencyGraph.setCellEmpty(a.address);return[a,s]}},{key:"ensureItIsPossibleToMoveCells",value:function(e,r,a,s){if(Ht(e)||!(fg(r)&&fg(a)||Roe(e,r,a))||Ht(s)||!this.sheetMapping.hasSheetWithId(e.sheet)||!this.sheetMapping.hasSheetWithId(s.sheet))throw new ot("a valid range of cells to move.");var o=ae.spanFrom(e,r,a),l=ae.spanFrom(s,r,a);if(l.exceedsSheetSizeLimits(this.maxColumns,this.maxRows))throw new Ln;if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(o))throw new Na;if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(l))throw new Eo}},{key:"restoreClipboardCells",value:function(e,r){var a=[],s=Yr(r),o;try{for(s.s();!(o=s.n()).done;){var l=fn(o.value,2),u=l[0],c=l[1];if(this.restoreCell(u,c),c.type===ur.FORMULA){var p=this.parser.fetchCachedResult(c.hash),m=p.dependencies;a.push.apply(a,lg(this.updateNamedExpressionsForTargetAddress(e,u,m)))}}}catch(f){s.e(f)}finally{s.f()}return a}},{key:"restoreCell",value:function(e,r){switch(r.type){case ur.VALUE:{this.setValueToCell(r,e);break}case ur.FORMULA:{this.setFormulaToCellFromCache(r.hash,e);break}case ur.EMPTY:{this.setCellEmpty(e);break}case ur.PARSING_ERROR:{this.setParsingErrorToCell(r.rawInput,r.errors,e);break}}}},{key:"doRemoveRows",value:function(e){var r=this;if(!this.rowEffectivelyNotInSheet(e.rowStart,e.sheet)){var a=[],s=Yr(this.dependencyGraph.entriesFromRowsSpan(e)),o;try{for(s.s();!(o=s.n()).done;){var l=fn(o.value,1),u=l[0];a.push({address:u,cellType:this.getClipboardCell(u)})}}catch(d){s.e(d)}finally{s.f()}var c=this.dependencyGraph.removeRows(e),p=c.affectedArrays,m=c.contentChanges;this.columnSearch.applyChanges(m.getChanges());var f;return this.stats.measure(oe.TRANSFORM_ASTS,function(){var d=new _f(e);d.performEagerTransformations(r.dependencyGraph,r.parser),f=r.lazilyTransformingAstService.addTransformation(d)}),this.rewriteAffectedArrays(p),{version:f,removedCells:a,rowFrom:e.rowStart,rowCount:e.numberOfRows}}}},{key:"doRemoveColumns",value:function(e){var r=this;if(!this.columnEffectivelyNotInSheet(e.columnStart,e.sheet)){var a=[],s=Yr(this.dependencyGraph.entriesFromColumnsSpan(e)),o;try{for(s.s();!(o=s.n()).done;){var l=fn(o.value,1),u=l[0];a.push({address:u,cellType:this.getClipboardCell(u)})}}catch(d){s.e(d)}finally{s.f()}var c=this.dependencyGraph.removeColumns(e),p=c.affectedArrays,m=c.contentChanges;this.columnSearch.applyChanges(m.getChanges()),this.columnSearch.removeColumns(e);var f;return this.stats.measure(oe.TRANSFORM_ASTS,function(){var d=new w_(e);d.performEagerTransformations(r.dependencyGraph,r.parser),f=r.lazilyTransformingAstService.addTransformation(d)}),this.rewriteAffectedArrays(p),{version:f,removedCells:a,columnFrom:e.columnStart,columnCount:e.numberOfColumns}}}},{key:"doAddRows",value:function(e){var r=this;if(!this.rowEffectivelyNotInSheet(e.rowStart,e.sheet)){var a=this.dependencyGraph.addRows(e),s=a.affectedArrays;this.stats.measure(oe.TRANSFORM_ASTS,function(){var o=new Pf(e);o.performEagerTransformations(r.dependencyGraph,r.parser),r.lazilyTransformingAstService.addTransformation(o)}),this.rewriteAffectedArrays(s)}}},{key:"rewriteAffectedArrays",value:function(e){var r=Yr(e.values()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;if(!s.array.size.isRef){var o=s.getFormula(this.lazilyTransformingAstService),l=s.getAddress(this.lazilyTransformingAstService),u=this.parser.computeHashFromAst(o);this.setFormulaToCellFromCache(u,l)}}}catch(c){r.e(c)}finally{r.f()}}},{key:"doAddColumns",value:function(e){var r=this;if(!this.columnEffectivelyNotInSheet(e.columnStart,e.sheet)){var a=this.dependencyGraph.addColumns(e),s=a.affectedArrays,o=a.contentChanges;this.columnSearch.addColumns(e),this.columnSearch.applyChanges(o.getChanges()),this.stats.measure(oe.TRANSFORM_ASTS,function(){var l=new d_(e);l.performEagerTransformations(r.dependencyGraph,r.parser),r.lazilyTransformingAstService.addTransformation(l)}),this.rewriteAffectedArrays(s)}}},{key:"getOldContent",value:function(e){var r=this.dependencyGraph.getCell(e);if(r===void 0||r instanceof $n)return[e,{type:ur.EMPTY}];if(r instanceof pn)return[e,Object.assign({type:ur.VALUE},r.getValues())];if(r instanceof lr)return[r.getAddress(this.lazilyTransformingAstService),{type:ur.FORMULA,hash:this.parser.computeHashFromAst(r.getFormula(this.lazilyTransformingAstService))}];if(r instanceof ui)return[e,{type:ur.PARSING_ERROR,rawInput:r.rawInput,errors:r.errors}];throw Error("Trying to copy unsupported type")}},{key:"getClipboardCell",value:function(e){var r=this.dependencyGraph.getCell(e);if(r===void 0||r instanceof $n)return{type:ur.EMPTY};if(r instanceof pn)return Object.assign({type:ur.VALUE},r.getValues());if(r instanceof He){var a=r.getArrayCellValue(e);return a===se?{type:ur.EMPTY}:{type:ur.VALUE,parsedValue:a,rawValue:r.getArrayCellRawValue(e)}}else{if(r instanceof Wr)return{type:ur.FORMULA,hash:this.parser.computeHashFromAst(r.getFormula(this.lazilyTransformingAstService))};if(r instanceof ui)return{type:ur.PARSING_ERROR,rawInput:r.rawInput,errors:r.errors}}throw Error("Trying to copy unsupported type")}},{key:"getSheetClipboardCells",value:function(e){for(var r=this.dependencyGraph.getSheetHeight(e),a=this.dependencyGraph.getSheetWidth(e),s=new Array(r),o=0;o<r;o++){s[o]=new Array(a);for(var l=0;l<a;l++){var u=$(e,l,o);s[o][l]=this.getClipboardCell(u)}}return s}},{key:"getRangeClipboardCells",value:function(e){var r=[],a=Yr(e.addresses(this.dependencyGraph)),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;r.push([o,this.getClipboardCell(o)])}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"setCellContent",value:function(e,r){var a=this.cellContentParser.parse(r),s=this.getOldContent(e);if(a instanceof Ke.Formula){var o=this.parser.parse(a.formula,e),l=o.ast,u=o.errors;if(u.length>0)this.setParsingErrorToCell(a.formula,u,e);else{var c=this.arraySizePredictor.checkArraySize(l,e);this.setFormulaToCell(e,c,o)}}else a instanceof Ke.Empty?this.setCellEmpty(e):this.setValueToCell({parsedValue:a.value,rawValue:r},e);return s}},{key:"setSheetContent",value:function(e,r){this.clearSheet(e);for(var a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++){var o=$(e,s,a);this.setCellContent(o,r[a][s])}}},{key:"setParsingErrorToCell",value:function(e,r,a){var s=this.dependencyGraph.getCellValue(a),o=new ui(r,e),l=this.dependencyGraph.setParsingErrorToCell(a,o);this.columnSearch.remove(W(s),a),this.columnSearch.applyChanges(l.getChanges()),this.changes.addAll(l),this.changes.addChange(o.getCellValue(),a)}},{key:"setFormulaToCell",value:function(e,r,a){var s=a.ast,o=a.hasVolatileFunction,l=a.hasStructuralChangeFunction,u=a.dependencies,c=this.dependencyGraph.getCellValue(e),p=this.dependencyGraph.setFormulaToCell(e,s,cn(u,e),r,o,l);this.columnSearch.remove(W(c),e),this.columnSearch.applyChanges(p.getChanges()),this.changes.addAll(p)}},{key:"setValueToCell",value:function(e,r){var a=this.dependencyGraph.getCellValue(r),s=this.dependencyGraph.setValueToCell(r,e);this.columnSearch.change(W(a),W(e.parsedValue),r),this.columnSearch.applyChanges(s.getChanges().filter(function(o){return!Pa(o.address,r)})),this.changes.addAll(s),this.changes.addChange(e.parsedValue,r)}},{key:"setCellEmpty",value:function(e){if(!this.dependencyGraph.isArrayInternalCell(e)){var r=this.dependencyGraph.getCellValue(e),a=this.dependencyGraph.setCellEmpty(e);this.columnSearch.remove(W(r),e),this.columnSearch.applyChanges(a.getChanges()),this.changes.addAll(a),this.changes.addChange(se,e)}}},{key:"setFormulaToCellFromCache",value:function(e,r){var a=this.parser.fetchCachedResult(e),s=a.ast,o=a.hasVolatileFunction,l=a.hasStructuralChangeFunction,u=a.dependencies,c=cn(u,r),p=new b_(r.sheet).transformSingleAst(s,r),m=fn(p,1),f=m[0];this.parser.rememberNewAst(f);var d=eD(c),h=this.arraySizePredictor.checkArraySize(s,r);this.dependencyGraph.setFormulaToCell(r,f,d,h,o,l)}},{key:"rowEffectivelyNotInSheet",value:function(e,r){var a=this.dependencyGraph.addressMapping.getHeight(r);return e>=a}},{key:"getAndClearContentChanges",value:function(){var e=this.changes;return this.changes=_a.empty(),e}},{key:"forceApplyPostponedTransformations",value:function(){this.dependencyGraph.forceApplyPostponedTransformations()}},{key:"sheetMapping",get:function(){return this.dependencyGraph.sheetMapping}},{key:"columnEffectivelyNotInSheet",value:function(e,r){var a=this.dependencyGraph.addressMapping.getWidth(r);return e>=a}},{key:"adjustNamedExpressionEdges",value:function(e,r,a){if(a!==void 0){var s=this.dependencyGraph.fetchCellOrCreateEmpty(e.address),o=this.namedExpressions.workbookNamedExpressionOrPlaceholder(r),l=this.dependencyGraph.fetchCellOrCreateEmpty(o.address),u=Yr(this.dependencyGraph.graph.adjacentNodes(l)),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;if(p instanceof Wr&&p.getAddress(this.lazilyTransformingAstService).sheet===a){var m=p.getFormula(this.lazilyTransformingAstService),f=p.getAddress(this.lazilyTransformingAstService),d=this.parser.fetchCachedResultForAst(m),h=d.dependencies,y=Yr(cn(h,f)),b;try{for(y.s();!(b=y.n()).done;){var g=b.value;g instanceof xn&&g.name.toLowerCase()===e.displayName.toLowerCase()&&(this.dependencyGraph.graph.removeEdge(l,p),this.dependencyGraph.graph.addEdge(s,p))}}catch(v){y.e(v)}finally{y.f()}}}}catch(v){u.e(v)}finally{u.f()}}}},{key:"storeNamedExpressionInCell",value:function(e,r){var a=this.cellContentParser.parse(r);if(a instanceof Ke.Formula){var s=this.parser.parse(a.formula,$(-1,0,0));if(Wb(s.ast))throw new _u;var o=s.ast,l=s.hasVolatileFunction,u=s.hasStructuralChangeFunction,c=s.dependencies;this.dependencyGraph.setFormulaToCell(e,o,cn(c,e),be.scalar(),l,u)}else a instanceof Ke.Empty?this.setCellEmpty(e):this.setValueToCell({parsedValue:a.value,rawValue:r},e)}},{key:"updateNamedExpressionsForMovedCells",value:function(e,r,a,s){if(e.sheet===s.sheet)return[];var o=[],l=ae.spanFrom(s,r,a),u=Yr(l.addresses(this.dependencyGraph)),c;try{for(u.s();!(c=u.n()).done;){var p=c.value,m=this.addressMapping.fetchCell(p);if(m instanceof Wr&&p.sheet!==e.sheet){var f=m.getFormula(this.lazilyTransformingAstService),d=this.parser.fetchCachedResultForAst(f),h=d.dependencies;o.push.apply(o,lg(this.updateNamedExpressionsForTargetAddress(e.sheet,p,h)))}}}catch(y){u.e(y)}finally{u.f()}return o}},{key:"updateNamedExpressionsForTargetAddress",value:function(e,r,a){if(e===r.sheet)return[];var s=[],o=this.addressMapping.fetchCell(r),l=Yr(cn(a,r)),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c instanceof xn){var p=c.name,m=this.dependencyGraph.fetchNamedExpressionVertex(p,e),f=this.namedExpressions.isExpressionInScope(p,r.sheet),d=f?this.dependencyGraph.fetchNamedExpressionVertex(p,r.sheet):this.copyOrFetchGlobalNamedExpressionVertex(p,m,s);d!==m&&(this.dependencyGraph.graph.softRemoveEdge(m,o),this.dependencyGraph.graph.addEdge(d,o))}}}catch(h){l.e(h)}finally{l.f()}return s}},{key:"allocateNamedExpressionAddressSpace",value:function(){this.dependencyGraph.addressMapping.addSheet(-1,new Vb(0,0))}},{key:"copyOrFetchGlobalNamedExpressionVertex",value:function(e,r,a){var s=this.namedExpressions.namedExpressionForScope(e);if(s===void 0)if(s=this.namedExpressions.addNamedExpression(e),a.push(s.normalizeExpressionName()),r instanceof Wr){var o=this.parser.fetchCachedResultForAst(r.getFormula(this.lazilyTransformingAstService)),l=o.ast,u=o.hasVolatileFunction,c=o.hasStructuralChangeFunction,p=o.dependencies;this.dependencyGraph.setFormulaToCell(s.address,l,cn(p,s.address),be.scalar(),u,c)}else r instanceof $n?this.setCellEmpty(s.address):r instanceof pn&&this.setValueToCell(r.getValues(),s.address);return this.dependencyGraph.fetchCellOrCreateEmpty(s.address)}},{key:"addressMapping",get:function(){return this.dependencyGraph.addressMapping}}]),i}();function Mf(i){if(i.length<=1)return i;for(var t=lg(i).sort(function(s,o){var l=fn(s,1),u=l[0],c=fn(o,1),p=c[0];return u-p}),e=t.reduce(function(s,o){var l=fn(o,2),u=l[0],c=l[1],p=s[s.length-1],m=p[0]+p[1];return u<=m?p[1]+=Math.max(0,c-(m-u)):s.push([u,c]),s},[t[0]]),r=0,a=0;a<e.length;++a)e[a][0]-=r,r+=e[a][1];return e}function jf(i){if(i.length<=1)return i;for(var t=lg(i).sort(function(s,o){var l=fn(s,1),u=l[0],c=fn(o,1),p=c[0];return u-p}),e=t.reduce(function(s,o){var l=fn(o,2),u=l[0],c=l[1],p=s[s.length-1];return u===p[0]?p[1]=Math.max(p[1],c):s.push([u,c]),s},[t[0]]),r=0,a=0;a<e.length;++a)e[a][0]+=r,r+=e[a][1];return e}function fg(i){return Number.isInteger(i)&&i>0}function Roe(i,t,e){return i.row===0&&fg(t)&&e===Number.POSITIVE_INFINITY||i.col===0&&fg(e)&&t===Number.POSITIVE_INFINITY}var nGe=j(Nr());var aGe=j(q()),sGe=j(Vt());function dg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dg=function(e){return typeof e}:dg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(i)}function hg(i,t){return Ooe(i)||Ioe(i,t)||P_(i,t)||Voe()}function Voe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ioe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Ooe(i){if(Array.isArray(i))return i}function mi(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=P_(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function P_(i,t){if(!!i){if(typeof i=="string")return __(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return __(i,t)}}function __(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function k_(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jt(i,t,e){return t&&k_(i.prototype,t),e&&k_(i,e),i}function Xt(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&VS(i,t)}function VS(i,t){return VS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},VS(i,t)}function Yt(i){var t=_oe();return function(){var r=yg(i),a;if(t){var s=yg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Doe(this,a)}}function Doe(i,t){if(t&&(dg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Poe(i)}function Poe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function _oe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function yg(i){return yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yg(i)}function kt(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}var Zt=function i(){kt(this,i)},F_=function(i){Xt(e,i);var t=Yt(e);function e(r,a){var s;return kt(this,e),s=t.call(this),s.command=r,s.rowsRemovals=a,s}return jt(e,[{key:"doUndo",value:function(a){a.undoRemoveRows(this)}},{key:"doRedo",value:function(a){a.redoRemoveRows(this)}}]),e}(Zt),M_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o,l,u,c){var p;return kt(this,e),p=t.call(this),p.sourceLeftCorner=r,p.width=a,p.height=s,p.destinationLeftCorner=o,p.overwrittenCellsData=l,p.addedGlobalNamedExpressions=u,p.version=c,p}return jt(e,[{key:"doUndo",value:function(a){a.undoMoveCells(this)}},{key:"doRedo",value:function(a){a.redoMoveCells(this)}}]),e}(Zt),j_=function(i){Xt(e,i);var t=Yt(e);function e(r){var a;return kt(this,e),a=t.call(this),a.command=r,a}return jt(e,[{key:"doUndo",value:function(a){a.undoAddRows(this)}},{key:"doRedo",value:function(a){a.redoAddRows(this)}}]),e}(Zt),B_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s){var o;return kt(this,e),o=t.call(this),o.sheetId=r,o.rowMapping=a,o.oldContent=s,o}return jt(e,[{key:"doUndo",value:function(a){a.undoSetRowOrder(this)}},{key:"doRedo",value:function(a){a.redoSetRowOrder(this)}}]),e}(Zt),L_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s){var o;return kt(this,e),o=t.call(this),o.sheetId=r,o.columnMapping=a,o.oldContent=s,o}return jt(e,[{key:"doUndo",value:function(a){a.undoSetColumnOrder(this)}},{key:"doRedo",value:function(a){a.redoSetColumnOrder(this)}}]),e}(Zt),U_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s){var o;return kt(this,e),o=t.call(this),o.sheetId=r,o.oldSheetContent=a,o.newSheetContent=s,o}return jt(e,[{key:"doUndo",value:function(a){a.undoSetSheetContent(this)}},{key:"doRedo",value:function(a){a.redoSetSheetContent(this)}}]),e}(Zt),z_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o,l){var u;return kt(this,e),u=t.call(this),u.sheet=r,u.startRow=a,u.numberOfRows=s,u.targetRow=o,u.version=l,u.undoStart=u.startRow<u.targetRow?u.targetRow-u.numberOfRows:u.targetRow,u.undoEnd=u.startRow>u.targetRow?u.startRow+u.numberOfRows:u.startRow,u}return jt(e,[{key:"doUndo",value:function(a){a.undoMoveRows(this)}},{key:"doRedo",value:function(a){a.redoMoveRows(this)}}]),e}(Zt),H_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o,l){var u;return kt(this,e),u=t.call(this),u.sheet=r,u.startColumn=a,u.numberOfColumns=s,u.targetColumn=o,u.version=l,u.undoStart=u.startColumn<u.targetColumn?u.targetColumn-u.numberOfColumns:u.targetColumn,u.undoEnd=u.startColumn>u.targetColumn?u.startColumn+u.numberOfColumns:u.startColumn,u}return jt(e,[{key:"doUndo",value:function(a){a.undoMoveColumns(this)}},{key:"doRedo",value:function(a){a.redoMoveColumns(this)}}]),e}(Zt),G_=function(i){Xt(e,i);var t=Yt(e);function e(r){var a;return kt(this,e),a=t.call(this),a.command=r,a}return jt(e,[{key:"doUndo",value:function(a){a.undoAddColumns(this)}},{key:"doRedo",value:function(a){a.redoAddColumns(this)}}]),e}(Zt),q_=function(i){Xt(e,i);var t=Yt(e);function e(r,a){var s;return kt(this,e),s=t.call(this),s.command=r,s.columnsRemovals=a,s}return jt(e,[{key:"doUndo",value:function(a){a.undoRemoveColumns(this)}},{key:"doRedo",value:function(a){a.redoRemoveColumns(this)}}]),e}(Zt),W_=function(i){Xt(e,i);var t=Yt(e);function e(r){var a;return kt(this,e),a=t.call(this),a.sheetName=r,a}return jt(e,[{key:"doUndo",value:function(a){a.undoAddSheet(this)}},{key:"doRedo",value:function(a){a.redoAddSheet(this)}}]),e}(Zt),$_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o,l){var u;return kt(this,e),u=t.call(this),u.sheetName=r,u.sheetId=a,u.oldSheetContent=s,u.scopedNamedExpressions=o,u.version=l,u}return jt(e,[{key:"doUndo",value:function(a){a.undoRemoveSheet(this)}},{key:"doRedo",value:function(a){a.redoRemoveSheet(this)}}]),e}(Zt),K_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s){var o;return kt(this,e),o=t.call(this),o.sheetId=r,o.oldName=a,o.newName=s,o}return jt(e,[{key:"doUndo",value:function(a){a.undoRenameSheet(this)}},{key:"doRedo",value:function(a){a.redoRenameSheet(this)}}]),e}(Zt),X_=function(i){Xt(e,i);var t=Yt(e);function e(r,a){var s;return kt(this,e),s=t.call(this),s.sheetId=r,s.oldSheetContent=a,s}return jt(e,[{key:"doUndo",value:function(a){a.undoClearSheet(this)}},{key:"doRedo",value:function(a){a.redoClearSheet(this)}}]),e}(Zt),Y_=function(i){Xt(e,i);var t=Yt(e);function e(r){var a;return kt(this,e),a=t.call(this),a.cellContents=r,a}return jt(e,[{key:"doUndo",value:function(a){a.undoSetCellContents(this)}},{key:"doRedo",value:function(a){a.redoSetCellContents(this)}}]),e}(Zt),Z_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o){var l;return kt(this,e),l=t.call(this),l.targetLeftCorner=r,l.oldContent=a,l.newContent=s,l.addedGlobalNamedExpressions=o,l}return jt(e,[{key:"doUndo",value:function(a){a.undoPaste(this)}},{key:"doRedo",value:function(a){a.redoPaste(this)}}]),e}(Zt),J_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o){var l;return kt(this,e),l=t.call(this),l.name=r,l.newContent=a,l.scope=s,l.options=o,l}return jt(e,[{key:"doUndo",value:function(a){a.undoAddNamedExpression(this)}},{key:"doRedo",value:function(a){a.redoAddNamedExpression(this)}}]),e}(Zt),Q_=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s){var o;return kt(this,e),o=t.call(this),o.namedExpression=r,o.content=a,o.scope=s,o}return jt(e,[{key:"doUndo",value:function(a){a.undoRemoveNamedExpression(this)}},{key:"doRedo",value:function(a){a.redoRemoveNamedExpression(this)}}]),e}(Zt),ek=function(i){Xt(e,i);var t=Yt(e);function e(r,a,s,o,l){var u;return kt(this,e),u=t.call(this),u.namedExpression=r,u.newContent=a,u.oldContent=s,u.scope=o,u.options=l,u}return jt(e,[{key:"doUndo",value:function(a){a.undoChangeNamedExpression(this)}},{key:"doRedo",value:function(a){a.redoChangeNamedExpression(this)}}]),e}(Zt),koe=function(i){Xt(e,i);var t=Yt(e);function e(){var r;return kt(this,e),r=t.apply(this,arguments),r.operations=[],r}return jt(e,[{key:"add",value:function(a){this.operations.push(a)}},{key:"reversedOperations",value:regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a=this.operations.length-1;case 1:if(!(a>=0)){o.next=7;break}return o.next=4,this.operations[a];case 4:a--,o.next=1;break;case 7:case"end":return o.stop()}},r,this)})},{key:"doUndo",value:function(a){a.undoBatch(this)}},{key:"doRedo",value:function(a){a.redoBatch(this)}}]),e}(Zt),tk=function(){function i(t,e){kt(this,i),this.operations=e,this.undoStack=[],this.redoStack=[],this.oldData=new Map,this.undoLimit=t.undoLimit}return jt(i,[{key:"saveOperation",value:function(e){this.batchUndoEntry!==void 0?this.batchUndoEntry.add(e):this.addUndoEntry(e)}},{key:"beginBatchMode",value:function(){this.batchUndoEntry=new koe}},{key:"addUndoEntry",value:function(e){this.undoStack.push(e),this.undoStack.splice(0,Math.max(0,this.undoStack.length-this.undoLimit))}},{key:"commitBatchMode",value:function(){if(this.batchUndoEntry===void 0)throw"Batch mode wasn't started";this.addUndoEntry(this.batchUndoEntry),this.batchUndoEntry=void 0}},{key:"storeDataForVersion",value:function(e,r,a){this.oldData.has(e)||this.oldData.set(e,[]);var s=this.oldData.get(e);s.push([r,a])}},{key:"clearRedoStack",value:function(){this.redoStack=[]}},{key:"clearUndoStack",value:function(){this.undoStack=[]}},{key:"isUndoStackEmpty",value:function(){return this.undoStack.length===0}},{key:"isRedoStackEmpty",value:function(){return this.redoStack.length===0}},{key:"undo",value:function(){var e=this.undoStack.pop();if(!e)throw"Attempted to undo without operation on stack";this.undoEntry(e),this.redoStack.push(e)}},{key:"undoEntry",value:function(e){e.doUndo(this)}},{key:"undoBatch",value:function(e){var r=mi(e.reversedOperations()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.undoEntry(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"undoRemoveRows",value:function(e){this.operations.forceApplyPostponedTransformations();for(var r=e.command.sheet,a=e.rowsRemovals,s=a.length-1;s>=0;--s){var o=a[s];this.operations.addRows(new cg(r,[[o.rowFrom,o.rowCount]]));var l=mi(o.removedCells),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,p=c.address,m=c.cellType;this.operations.restoreCell(p,m)}}catch(f){l.e(f)}finally{l.f()}this.restoreOldDataFromVersion(o.version-1)}}},{key:"undoRemoveColumns",value:function(e){this.operations.forceApplyPostponedTransformations();for(var r=e.command.sheet,a=e.columnsRemovals,s=a.length-1;s>=0;--s){var o=a[s];this.operations.addColumns(new pg(r,[[o.columnFrom,o.columnCount]]));var l=mi(o.removedCells),u;try{for(l.s();!(u=l.n()).done;){var c=u.value,p=c.address,m=c.cellType;this.operations.restoreCell(p,m)}}catch(f){l.e(f)}finally{l.f()}this.restoreOldDataFromVersion(o.version-1)}}},{key:"undoAddRows",value:function(e){for(var r=e.command.rowsSpans(),a=r.length-1;a>=0;--a){var s=r[a];this.operations.removeRows(new ug(e.command.sheet,[[s.rowStart,s.numberOfRows]]))}}},{key:"undoAddColumns",value:function(e){for(var r=e.command.columnsSpans(),a=r.length-1;a>=0;--a){var s=r[a];this.operations.removeColumns(new mg(e.command.sheet,[[s.columnStart,s.numberOfColumns]]))}}},{key:"undoSetCellContents",value:function(e){var r=mi(e.cellContents),a;try{for(r.s();!(a=r.n()).done;){var s=a.value,o=s.address,l=hg(s.oldContent,2),u=l[0],c=l[1];Pa(o,u)||this.operations.setCellEmpty(o),this.operations.restoreCell(u,c)}}catch(p){r.e(p)}finally{r.f()}}},{key:"undoPaste",value:function(e){this.restoreOperationOldContent(e.oldContent);var r=mi(e.addedGlobalNamedExpressions),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.operations.removeNamedExpression(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"undoMoveRows",value:function(e){var r=e.sheet;this.operations.moveRows(r,e.undoStart,e.numberOfRows,e.undoEnd),this.restoreOldDataFromVersion(e.version-1)}},{key:"undoMoveColumns",value:function(e){var r=e.sheet;this.operations.moveColumns(r,e.undoStart,e.numberOfColumns,e.undoEnd),this.restoreOldDataFromVersion(e.version-1)}},{key:"undoMoveCells",value:function(e){this.operations.forceApplyPostponedTransformations(),this.operations.moveCells(e.destinationLeftCorner,e.width,e.height,e.sourceLeftCorner),this.restoreOperationOldContent(e.overwrittenCellsData),this.restoreOldDataFromVersion(e.version-1);var r=mi(e.addedGlobalNamedExpressions),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.operations.removeNamedExpression(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"undoAddSheet",value:function(e){var r=e.sheetName;this.operations.removeSheetByName(r)}},{key:"undoRemoveSheet",value:function(e){this.operations.forceApplyPostponedTransformations();var r=e.oldSheetContent,a=e.sheetId;this.operations.addSheet(e.sheetName);for(var s=0;s<r.length;s++)for(var o=r[s],l=0;l<o.length;l++){var u=o[l],c=$(a,l,s);this.operations.restoreCell(c,u)}var p=mi(e.scopedNamedExpressions),m;try{for(p.s();!(m=p.n()).done;){var f=hg(m.value,2),d=f[0],h=f[1];this.operations.restoreNamedExpression(d,h,a)}}catch(y){p.e(y)}finally{p.f()}this.restoreOldDataFromVersion(e.version-1)}},{key:"undoRenameSheet",value:function(e){this.operations.renameSheet(e.sheetId,e.oldName)}},{key:"undoClearSheet",value:function(e){for(var r=e.oldSheetContent,a=e.sheetId,s=0;s<r.length;s++)for(var o=r[s],l=0;l<o.length;l++){var u=o[l],c=$(a,l,s);this.operations.restoreCell(c,u)}}},{key:"undoSetSheetContent",value:function(e){var r=e.oldSheetContent,a=e.sheetId;this.operations.clearSheet(a);for(var s=0;s<r.length;s++)for(var o=r[s],l=0;l<o.length;l++){var u=o[l],c=$(a,l,s);this.operations.restoreCell(c,u)}}},{key:"undoAddNamedExpression",value:function(e){this.operations.removeNamedExpression(e.name,e.scope)}},{key:"undoRemoveNamedExpression",value:function(e){this.operations.restoreNamedExpression(e.namedExpression,e.content,e.scope)}},{key:"undoChangeNamedExpression",value:function(e){this.operations.restoreNamedExpression(e.namedExpression,e.oldContent,e.scope)}},{key:"undoSetRowOrder",value:function(e){this.restoreOperationOldContent(e.oldContent)}},{key:"undoSetColumnOrder",value:function(e){this.restoreOperationOldContent(e.oldContent)}},{key:"restoreOperationOldContent",value:function(e){var r=mi(e),a;try{for(r.s();!(a=r.n()).done;){var s=hg(a.value,2),o=s[0],l=s[1];this.operations.restoreCell(o,l)}}catch(u){r.e(u)}finally{r.f()}}},{key:"redo",value:function(){var e=this.redoStack.pop();if(!e)throw"Attempted to redo without operation on stack";this.redoEntry(e),this.undoStack.push(e)}},{key:"redoEntry",value:function(e){e.doRedo(this)}},{key:"redoBatch",value:function(e){var r=mi(e.operations),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.redoEntry(s)}}catch(o){r.e(o)}finally{r.f()}}},{key:"redoRemoveRows",value:function(e){this.operations.removeRows(e.command)}},{key:"redoMoveCells",value:function(e){this.operations.moveCells(e.sourceLeftCorner,e.width,e.height,e.destinationLeftCorner)}},{key:"redoRemoveColumns",value:function(e){this.operations.removeColumns(e.command)}},{key:"redoPaste",value:function(e){for(var r=e.targetLeftCorner,a=e.newContent,s=a.length,o=a[0].length,l=0;l<s;++l)for(var u=0;u<o;++u){var c=$(r.sheet,r.col+u,r.row+l);this.operations.restoreCell(c,a[l][u])}}},{key:"redoSetCellContents",value:function(e){var r=mi(e.cellContents),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;this.operations.setCellContent(s.address,s.newContent)}}catch(o){r.e(o)}finally{r.f()}}},{key:"redoAddRows",value:function(e){this.operations.addRows(e.command)}},{key:"redoAddColumns",value:function(e){this.operations.addColumns(e.command)}},{key:"redoRemoveSheet",value:function(e){this.operations.removeSheetByName(e.sheetName)}},{key:"redoAddSheet",value:function(e){this.operations.addSheet(e.sheetName)}},{key:"redoRenameSheet",value:function(e){this.operations.renameSheet(e.sheetId,e.newName)}},{key:"redoMoveRows",value:function(e){this.operations.moveRows(e.sheet,e.startRow,e.numberOfRows,e.targetRow)}},{key:"redoMoveColumns",value:function(e){this.operations.moveColumns(e.sheet,e.startColumn,e.numberOfColumns,e.targetColumn)}},{key:"redoClearSheet",value:function(e){this.operations.clearSheet(e.sheetId)}},{key:"redoSetSheetContent",value:function(e){var r=e.sheetId,a=e.newSheetContent;this.operations.setSheetContent(r,a)}},{key:"redoAddNamedExpression",value:function(e){this.operations.addNamedExpression(e.name,e.newContent,e.scope,e.options)}},{key:"redoRemoveNamedExpression",value:function(e){this.operations.removeNamedExpression(e.namedExpression.displayName,e.scope)}},{key:"redoChangeNamedExpression",value:function(e){this.operations.changeNamedExpressionExpression(e.namedExpression.displayName,e.newContent,e.scope,e.options)}},{key:"redoSetRowOrder",value:function(e){this.operations.setRowOrder(e.sheetId,e.rowMapping)}},{key:"redoSetColumnOrder",value:function(e){this.operations.setColumnOrder(e.sheetId,e.columnMapping)}},{key:"restoreOldDataFromVersion",value:function(e){var r=this.oldData.get(e)||[],a=mi(r),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=hg(o,2),u=l[0],c=l[1];this.operations.setFormulaToCellFromCache(c,u)}}catch(p){a.e(p)}finally{a.f()}}}]),i}();function Wi(i,t){return joe(i)||Moe(i,t)||rk(i,t)||Foe()}function Foe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Moe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function joe(i){if(Array.isArray(i))return i}function IS(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=rk(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function rk(i,t){if(!!i){if(typeof i=="string")return nk(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nk(i,t)}}function nk(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Boe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function ik(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Loe(i,t,e){return t&&ik(i.prototype,t),e&&ik(i,e),i}var ak=function(){function i(t,e,r,a,s,o,l,u,c,p){Boe(this,i),this.operations=e,this.undoRedo=r,this.clipboardOperations=a,this.dependencyGraph=s,this.columnSearch=o,this.parser=l,this.cellContentParser=u,this.lazilyTransformingAstService=c,this.namedExpressions=p,this.maxRows=t.maxRows,this.maxColumns=t.maxColumns}return Loe(i,[{key:"addRows",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=new cg(e,a);this.ensureItIsPossibleToAddRows.apply(this,[e].concat(a)),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut(),this.operations.addRows(o),this.undoRedo.saveOperation(new j_(o))}},{key:"removeRows",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=new ug(e,a);this.ensureItIsPossibleToRemoveRows.apply(this,[e].concat(a)),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var l=this.operations.removeRows(o);this.undoRedo.saveOperation(new F_(o,l))}},{key:"addColumns",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=new pg(e,a);this.ensureItIsPossibleToAddColumns.apply(this,[e].concat(a)),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut(),this.operations.addColumns(o),this.undoRedo.saveOperation(new G_(o))}},{key:"removeColumns",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=new mg(e,a);this.ensureItIsPossibleToRemoveColumns.apply(this,[e].concat(a)),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var l=this.operations.removeColumns(o);this.undoRedo.saveOperation(new q_(o,l))}},{key:"moveCells",value:function(e,r,a,s){this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var o=this.operations.moveCells(e,r,a,s),l=o.version,u=o.overwrittenCellsData,c=o.addedGlobalNamedExpressions;this.undoRedo.saveOperation(new M_(e,r,a,s,u,c,l))}},{key:"moveRows",value:function(e,r,a,s){this.ensureItIsPossibleToMoveRows(e,r,a,s),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var o=this.operations.moveRows(e,r,a,s);this.undoRedo.saveOperation(new z_(e,r,a,s,o))}},{key:"moveColumns",value:function(e,r,a,s){this.ensureItIsPossibleToMoveColumns(e,r,a,s),this.undoRedo.clearRedoStack();var o=this.operations.moveColumns(e,r,a,s);this.undoRedo.saveOperation(new H_(e,r,a,s,o))}},{key:"cut",value:function(e,r,a){this.clipboardOperations.cut(e,r,a)}},{key:"ensureItIsPossibleToCopy",value:function(e,r,a){if(!Nc(r))throw new ot("width to be positive integer.");if(!Nc(a))throw new ot("height to be positive integer.")}},{key:"copy",value:function(e,r,a){this.ensureItIsPossibleToCopy(e,r,a),this.clipboardOperations.copy(e,r,a)}},{key:"paste",value:function(e){var r=this.clipboardOperations.clipboard;if(r===void 0)throw new cy;if(this.clipboardOperations.isCutClipboard())this.moveCells(r.sourceLeftCorner,r.width,r.height,e);else if(this.clipboardOperations.isCopyClipboard()){this.clipboardOperations.ensureItIsPossibleToCopyPaste(e);var a=ae.spanFrom(e,r.width,r.height),s=this.operations.getRangeClipboardCells(a);this.undoRedo.clearRedoStack();var o=this.operations.restoreClipboardCells(r.sourceLeftCorner.sheet,r.getContent(e));this.undoRedo.saveOperation(new Z_(e,s,r.content,o))}}},{key:"beginUndoRedoBatchMode",value:function(){this.undoRedo.beginBatchMode()}},{key:"commitUndoRedoBatchMode",value:function(){this.undoRedo.commitBatchMode()}},{key:"isClipboardEmpty",value:function(){return this.clipboardOperations.clipboard===void 0}},{key:"clearClipboard",value:function(){this.clipboardOperations.clear()}},{key:"addSheet",value:function(e){e!==void 0&&this.ensureItIsPossibleToAddSheet(e),this.undoRedo.clearRedoStack();var r=this.operations.addSheet(e);return this.undoRedo.saveOperation(new W_(r)),r}},{key:"removeSheet",value:function(e){this.ensureScopeIdIsValid(e),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var r=this.sheetMapping.fetchDisplayName(e),a=this.operations.getSheetClipboardCells(e),s=this.operations.removeSheet(e),o=s.version,l=s.scopedNamedExpressions;this.undoRedo.saveOperation(new $_(r,e,a,l,o))}},{key:"renameSheet",value:function(e,r){this.ensureItIsPossibleToRenameSheet(e,r);var a=this.operations.renameSheet(e,r);return a!==void 0&&(this.undoRedo.clearRedoStack(),this.undoRedo.saveOperation(new K_(e,a,r))),a}},{key:"clearSheet",value:function(e){this.ensureScopeIdIsValid(e),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var r=this.operations.getSheetClipboardCells(e);this.operations.clearSheet(e),this.undoRedo.saveOperation(new X_(e,r))}},{key:"setCellContents",value:function(e,r){if(!(r instanceof Array))r=[[r]];else for(var a=0;a<r.length;a++)if(!(r[a]instanceof Array))throw new ot("an array of arrays or a raw cell value.");this.ensureItIsPossibleToChangeCellContents(e,r),this.undoRedo.clearRedoStack();for(var s=[],o=0;o<r.length;o++)for(var l=0;l<r[o].length;l++){var u={sheet:e.sheet,row:e.row+o,col:e.col+l},c=r[o][l];this.clipboardOperations.abortCut();var p=this.operations.setCellContent(u,c);s.push({address:u,newContent:c,oldContent:p})}this.undoRedo.saveOperation(new Y_(s))}},{key:"setSheetContent",value:function(e,r){this.ensureScopeIdIsValid(e),this.ensureItIsPossibleToChangeSheetContents(e,r),og(r),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var a=this.operations.getSheetClipboardCells(e);this.operations.setSheetContent(e,r),this.undoRedo.saveOperation(new U_(e,a,r))}},{key:"setRowOrder",value:function(e,r){this.validateSwapRowIndexes(e,r),this.testRowOrderForArrays(e,r),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var a=this.operations.setRowOrder(e,r);this.undoRedo.saveOperation(new B_(e,r,a))}},{key:"validateSwapRowIndexes",value:function(e,r){if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e);this.validateRowOrColumnMapping(e,r,"row")}},{key:"testColumnOrderForArrays",value:function(e,r){var a=IS(r),s;try{for(a.s();!(s=a.n()).done;){var o=Wi(s.value,2),l=o[0],u=o[1];if(l!==u){var c=ae.spanFrom({sheet:e,col:l,row:0},1,1/0);if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(c))throw new Na}}}catch(p){a.e(p)}finally{a.f()}}},{key:"setColumnOrder",value:function(e,r){this.validateSwapColumnIndexes(e,r),this.testColumnOrderForArrays(e,r),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut();var a=this.operations.setColumnOrder(e,r);this.undoRedo.saveOperation(new L_(e,r,a))}},{key:"validateSwapColumnIndexes",value:function(e,r){if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e);this.validateRowOrColumnMapping(e,r,"column")}},{key:"testRowOrderForArrays",value:function(e,r){var a=IS(r),s;try{for(a.s();!(s=a.n()).done;){var o=Wi(s.value,2),l=o[0],u=o[1];if(l!==u){var c=ae.spanFrom({sheet:e,col:0,row:l},1/0,1);if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(c))throw new Na}}}catch(p){a.e(p)}finally{a.f()}}},{key:"mappingFromOrder",value:function(e,r,a){if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e);var s=a==="row"?this.dependencyGraph.getSheetHeight(e):this.dependencyGraph.getSheetWidth(e);if(r.length!==s)throw new ot("number of ".concat(a,"s provided to be sheet ").concat(a==="row"?"height":"width","."));for(var o=[],l=0;l<s;l++)r[l]!==l&&o.push([l,r[l]]);return o}},{key:"validateRowOrColumnMapping",value:function(e,r,a){for(var s=a==="row"?this.dependencyGraph.getSheetHeight(e):this.dependencyGraph.getSheetWidth(e),o=r.map(function(c){var p=Wi(c,2),m=p[0],f=p[1];return m}).sort(function(c,p){return c-p}),l=r.map(function(c){var p=Wi(c,2),m=p[0],f=p[1];return f}).sort(function(c,p){return c-p}),u=0;u<o.length;u++){if(!Xo(o[u])||o[u]>=s)throw new ot("".concat(a," numbers to be nonnegative integers and less than sheet ").concat(a==="row"?"height":"width","."));if(o[u]===o[u+1])throw new ot("source ".concat(a," numbers to be unique."));if(o[u]!==l[u])throw new ot("target ".concat(a," numbers to be permutation of source ").concat(a," numbers."))}}},{key:"undo",value:function(){if(this.undoRedo.isUndoStackEmpty())throw new ly;this.clipboardOperations.abortCut(),this.undoRedo.undo()}},{key:"redo",value:function(){if(this.undoRedo.isRedoStackEmpty())throw new uy;this.clipboardOperations.abortCut(),this.undoRedo.redo()}},{key:"addNamedExpression",value:function(e,r,a,s){this.ensureItIsPossibleToAddNamedExpression(e,r,a),this.operations.addNamedExpression(e,r,a,s),this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut(),this.undoRedo.saveOperation(new J_(e,r,a,s))}},{key:"changeNamedExpressionExpression",value:function(e,r,a,s){this.ensureItIsPossibleToChangeNamedExpression(e,a,r);var o=this.operations.changeNamedExpressionExpression(e,a,r,s),l=Wi(o,2),u=l[0],c=l[1];this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut(),this.undoRedo.saveOperation(new ek(u,a,c,r,s))}},{key:"removeNamedExpression",value:function(e,r){this.ensureScopeIdIsValid(r);var a=this.operations.removeNamedExpression(e,r),s=Wi(a,2),o=s[0],l=s[1];return this.undoRedo.clearRedoStack(),this.clipboardOperations.abortCut(),this.undoRedo.saveOperation(new Q_(o,l,r)),o}},{key:"ensureItIsPossibleToAddNamedExpression",value:function(e,r,a){this.ensureScopeIdIsValid(a),this.ensureNamedExpressionNameIsValid(e,a),this.ensureNamedExpressionIsValid(r)}},{key:"ensureItIsPossibleToChangeNamedExpression",value:function(e,r,a){if(this.ensureScopeIdIsValid(a),this.namedExpressions.namedExpressionForScope(e,a)===void 0)throw new Ss(e);this.ensureNamedExpressionIsValid(r)}},{key:"isItPossibleToRemoveNamedExpression",value:function(e,r){if(this.ensureScopeIdIsValid(r),this.namedExpressions.namedExpressionForScope(e,r)===void 0)throw new Ss(e)}},{key:"ensureItIsPossibleToAddRows",value:function(e){if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e);for(var r=this.dependencyGraph.getSheetHeight(e),a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=s.map(function(d){return d[1]}).reduce(function(d,h){return d+h},0);if(r+l>this.maxRows)throw new Ln;for(var u=0,c=s;u<c.length;u++){var p=Wi(c[u],2),m=p[0],f=p[1];if(!Xo(m)||!Nc(f))throw new ot("row number to be nonnegative and number of rows to add to be positive.")}}},{key:"ensureItIsPossibleToRemoveRows",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];for(var o=0,l=a;o<l.length;o++){var u=Wi(l[o],2),c=u[0],p=u[1],m=c+p-1;if(!Xo(c)||!Xo(m))throw new ot("starting and ending row to be nonnegative.");if(m<c)throw new ot("starting row to be smaller than the ending row.");if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e)}}},{key:"ensureItIsPossibleToAddColumns",value:function(e){if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e);for(var r=this.dependencyGraph.getSheetWidth(e),a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l=s.map(function(d){return d[1]}).reduce(function(d,h){return d+h},0);if(r+l>this.maxColumns)throw new Ln;for(var u=0,c=s;u<c.length;u++){var p=Wi(c[u],2),m=p[0],f=p[1];if(!Xo(m)||!Nc(f))throw new ot("column number to be nonnegative and number of columns to add to be positive.")}}},{key:"ensureItIsPossibleToRemoveColumns",value:function(e){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];for(var o=0,l=a;o<l.length;o++){var u=Wi(l[o],2),c=u[0],p=u[1],m=c+p-1;if(!Xo(c)||!Xo(m))throw new ot("starting and ending column to be nonnegative.");if(m<c)throw new ot("starting column to be smaller than the ending column.");if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e)}}},{key:"ensureItIsPossibleToMoveRows",value:function(e,r,a,s){this.ensureItIsPossibleToAddRows(e,[s,a]);var o=$(e,0,r),l=$(e,0,s);if(!this.sheetMapping.hasSheetWithId(e)||Ht(o)||Ht(l)||!Nc(a)||s<=r+a&&s>=r)throw new ot("a valid range of rows to move.");var u=this.dependencyGraph.getSheetWidth(e),c=ae.spanFrom(o,u,a);if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(c))throw new Na;if(s>0&&this.dependencyGraph.arrayMapping.isFormulaArrayInAllRows(ln.fromNumberOfRows(e,s-1,2)))throw new Eo}},{key:"ensureItIsPossibleToMoveColumns",value:function(e,r,a,s){this.ensureItIsPossibleToAddColumns(e,[s,a]);var o=$(e,r,0),l=$(e,s,0);if(!this.sheetMapping.hasSheetWithId(e)||Ht(o)||Ht(l)||!Nc(a)||s<=r+a&&s>=r)throw new ot("a valid range of columns to move.");var u=this.dependencyGraph.getSheetHeight(e),c=ae.spanFrom(o,a,u);if(this.dependencyGraph.arrayMapping.isFormulaArrayInRange(c))throw new Na;if(s>0&&this.dependencyGraph.arrayMapping.isFormulaArrayInAllColumns(Wn.fromNumberOfColumns(e,s-1,2)))throw new Eo}},{key:"ensureItIsPossibleToAddSheet",value:function(e){if(this.sheetMapping.hasSheetWithName(e))throw new Ns(e)}},{key:"ensureItIsPossibleToRenameSheet",value:function(e,r){if(!this.sheetMapping.hasSheetWithId(e))throw new $e(e);var a=this.sheetMapping.get(r);if(a!==void 0&&a!==e)throw new Ns(r)}},{key:"ensureItIsPossibleToChangeContent",value:function(e){if(Ht(e))throw new ay(e);if(!this.sheetMapping.hasSheetWithId(e.sheet))throw new $e(e.sheet)}},{key:"ensureItIsPossibleToChangeCellContents",value:function(e,r){var a=Ko(r),s=ae.spanFrom(e,a.width,a.height);this.ensureRangeInSizeLimits(s);var o=IS(s.addresses(this.dependencyGraph)),l;try{for(o.s();!(l=o.n()).done;){var u=l.value;this.ensureItIsPossibleToChangeContent(u)}}catch(c){o.e(c)}finally{o.f()}}},{key:"ensureItIsPossibleToChangeSheetContents",value:function(e,r){var a=Ko(r),s=ae.spanFrom($(e,0,0),a.width,a.height);this.ensureRangeInSizeLimits(s)}},{key:"ensureRangeInSizeLimits",value:function(e){if(e.exceedsSheetSizeLimits(this.maxColumns,this.maxRows))throw new Ln}},{key:"isThereSomethingToUndo",value:function(){return!this.undoRedo.isUndoStackEmpty()}},{key:"isThereSomethingToRedo",value:function(){return!this.undoRedo.isRedoStackEmpty()}},{key:"getAndClearContentChanges",value:function(){return this.operations.getAndClearContentChanges()}},{key:"ensureScopeIdIsValid",value:function(e){if(e!==void 0&&!this.sheetMapping.hasSheetWithId(e))throw new $e(e)}},{key:"sheetMapping",get:function(){return this.dependencyGraph.sheetMapping}},{key:"ensureNamedExpressionNameIsValid",value:function(e,r){if(!this.namedExpressions.isNameValid(e))throw new oy(e);if(!this.namedExpressions.isNameAvailable(e,r))throw new sy(e)}},{key:"ensureNamedExpressionIsValid",value:function(e){var r=this.cellContentParser.parse(e);if(r instanceof Ke.Formula){var a=this.parser.parse(r.formula,$(-1,0,0));if(Wb(a.ast))throw new _u}}}]),i}();function Nc(i){return Number.isInteger(i)&&i>0}function Xo(i){return Number.isInteger(i)&&i>=0}var rqe=j(q());function Uoe(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=zoe(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function zoe(i,t){if(!!i){if(typeof i=="string")return sk(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return sk(i,t)}}function sk(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Hoe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function ok(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Goe(i,t,e){return t&&ok(i.prototype,t),e&&ok(i,e),i}var lk=function(){function i(t,e,r,a,s,o){Hoe(this,i),this.config=t,this.stats=e,this.interpreter=r,this.lazilyTransformingAstService=a,this.dependencyGraph=s,this.columnSearch=o}return Goe(i,[{key:"run",value:function(){var e=this;this.stats.start(oe.TOP_SORT);var r=this.dependencyGraph.topSortWithScc(),a=r.sorted,s=r.cycled;this.stats.end(oe.TOP_SORT),this.stats.measure(oe.EVALUATION,function(){e.recomputeFormulas(s,a)})}},{key:"partialRun",value:function(e){var r=this,a=_a.empty();return this.stats.measure(oe.EVALUATION,function(){r.dependencyGraph.graph.getTopSortedWithSccSubgraphFrom(e,function(s){if(s instanceof lr){var o=s.isComputed()?s.getCellValue():void 0,l=r.recomputeFormulaVertexValue(s);if(l!==o){var u=s.getAddress(r.lazilyTransformingAstService);return a.addChange(l,u),r.columnSearch.change(W(o),W(l),u),!0}return!1}else return s instanceof Kt&&s.clearCache(),!0},function(s){if(s instanceof Kt)s.clearCache();else if(s instanceof lr){var o=s.getAddress(r.lazilyTransformingAstService);r.columnSearch.remove(W(s.valueOrUndef()),o);var l=new x(R.CYCLE,void 0,s);s.setCellValue(l),a.addChange(l,o)}})}),a}},{key:"runAndForget",value:function(e,r,a){var s=this,o=[],l=Uoe(cn(a,r)),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c instanceof ae){var p=c;if(this.dependencyGraph.getRange(p.start,p.end)===void 0){var m=new Kt(p);this.dependencyGraph.rangeMapping.setRange(m),o.push(m)}}}}catch(d){l.e(d)}finally{l.f()}var f=this.evaluateAstToCellValue(e,new qr(r,this.config.useArrayArithmetic));return o.forEach(function(d){s.dependencyGraph.rangeMapping.removeRange(d)}),f}},{key:"recomputeFormulas",value:function(e,r){var a=this;e.forEach(function(s){s instanceof lr&&s.setCellValue(new x(R.CYCLE,void 0,s))}),r.forEach(function(s){if(s instanceof lr){var o=a.recomputeFormulaVertexValue(s),l=s.getAddress(a.lazilyTransformingAstService);a.columnSearch.add(W(o),l)}else s instanceof Kt&&s.clearCache()})}},{key:"recomputeFormulaVertexValue",value:function(e){var r=e.getAddress(this.lazilyTransformingAstService);if(e instanceof He&&(e.array.size.isRef||!this.dependencyGraph.isThereSpaceForArray(e)))return e.setNoSpace();var a=e.getFormula(this.lazilyTransformingAstService),s=this.evaluateAstToCellValue(a,new qr(r,this.config.useArrayArithmetic,e));return e.setCellValue(s)}},{key:"evaluateAstToCellValue",value:function(e,r){var a=this.interpreter.evaluateAst(e,r);return a instanceof J?a:a===se&&this.config.evaluateNullToZero?0:a}}]),i}();var qoe=ce(),Woe=Math.log,$oe=Math.LOG10E;qoe({target:"Math",stat:!0},{log10:function(t){return Woe(t)*$oe}});var xqe=j(q());function Koe(i,t){return Zoe(i)||Yoe(i,t)||uk(i,t)||Xoe()}function Xoe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yoe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Zoe(i){if(Array.isArray(i))return i}function Joe(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=uk(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function uk(i,t){if(!!i){if(typeof i=="string")return ck(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ck(i,t)}}function ck(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function OS(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function pk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function mk(i,t,e){return t&&pk(i.prototype,t),e&&pk(i,e),i}var bg=function(){function i(t,e){OS(this,i),this.address=t,this.newValue=e}return mk(i,[{key:"col",get:function(){return this.address.col}},{key:"row",get:function(){return this.address.row}},{key:"sheet",get:function(){return this.address.sheet}},{key:"value",get:function(){return this.newValue}}]),i}(),DS=function i(t,e){OS(this,i),this.name=t,this.newValue=e},fk=function(){function i(t,e,r,a){OS(this,i),this.config=t,this.namedExpressions=e,this.sheetIndexMapping=r,this.lazilyTransformingService=a}return mk(i,[{key:"exportChange",value:function(e){var r=e.value,a=e.address;if(a.sheet===Tc.SHEET_FOR_WORKBOOK_EXPRESSIONS){var s=this.namedExpressions.namedExpressionInAddress(a.row);if(!s)throw new Error("Missing named expression");return new DS(s.displayName,this.exportScalarOrRange(r))}else if(r instanceof J){var o=[],l=Joe(r.entriesFromTopLeftCorner(a)),u;try{for(l.s();!(u=l.n()).done;){var c=Koe(u.value,2),p=c[0],m=c[1];o.push(new bg(m,this.exportValue(p)))}}catch(f){l.e(f)}finally{l.f()}return o}else return new bg(a,this.exportValue(r))}},{key:"exportValue",value:function(e){return e instanceof J?this.detailedError(new x(R.VALUE,D.ScalarExpected)):this.config.smartRounding&&he(e)?this.cellValueRounding(W(e)):e instanceof x?this.detailedError(e):e===se?null:W(e)}},{key:"exportScalarOrRange",value:function(e){var r=this;return e instanceof J?e.rawData().map(function(a){return a.map(function(s){return r.exportValue(s)})}):this.exportValue(e)}},{key:"detailedError",value:function(e){var r,a,s=void 0,o=(r=e.root)===null||r===void 0?void 0:r.getAddress(this.lazilyTransformingService);return o!==void 0&&(o.sheet===Tc.SHEET_FOR_WORKBOOK_EXPRESSIONS?s=(a=this.namedExpressions.namedExpressionInAddress(o.row))===null||a===void 0?void 0:a.displayName:s=Lo(this.sheetIndexMapping,o,-1)),new Db(e,this.config.translationPackage.getErrorTranslation(e.type),s)}},{key:"cellValueRounding",value:function(e){if(e===0)return e;var r=Math.floor(Math.log10(Math.abs(e))),a=Math.pow(10,this.config.precisionRounding-r);return e<0?-Math.round(-e*a)/a:Math.round(e*a)/a}}]),i}();var Mqe=j(q()),jqe=j(Vt());function dk(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function hk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function yk(i,t,e){return t&&hk(i.prototype,t),e&&hk(i,e),i}var bk=function(){function i(t,e,r,a,s,o){dk(this,i),this.dependencyGraph=t,this.columnSearch=e,this.parser=r,this.cellContentParser=a,this.stats=s,this.arraySizePredictor=o,this.buildStrategy=new Qoe(t,e,r,s,a,o)}return yk(i,[{key:"buildGraph",value:function(e,r){var a=this,s=r.measure(oe.COLLECT_DEPENDENCIES,function(){return a.buildStrategy.run(e)});this.dependencyGraph.getAndClearContentChanges(),r.measure(oe.PROCESS_DEPENDENCIES,function(){return a.processDependencies(s)})}},{key:"processDependencies",value:function(e){var r=this;e.forEach(function(a,s){r.dependencyGraph.processCellDependencies(a,s)})}}]),i}(),Qoe=function(){function i(t,e,r,a,s,o){dk(this,i),this.dependencyGraph=t,this.columnIndex=e,this.parser=r,this.stats=a,this.cellContentParser=s,this.arraySizePredictor=o}return yk(i,[{key:"run",value:function(e){var r=this,a=new Map;for(var s in e)for(var o=this.dependencyGraph.getSheetId(s),l=e[s],u=0;u<l.length;++u)for(var c=l[u],p=function(d){var h=c[d],y=$(o,d,u),b=r.cellContentParser.parse(h);if(b instanceof Ke.Formula){var g=r.stats.measure(oe.PARSER,function(){return r.parser.parse(b.formula,y)});if(g.errors.length>0){r.shrinkArrayIfNeeded(y);var v=new ui(g.errors,b.formula);r.dependencyGraph.addVertex(y,v)}else{r.shrinkArrayIfNeeded(y);var C=r.arraySizePredictor.checkArraySize(g.ast,y);if(C.isScalar()){var w=new Wr(g.ast,y,0);a.set(w,cn(g.dependencies,y)),r.dependencyGraph.addVertex(y,w),g.hasVolatileFunction&&r.dependencyGraph.markAsVolatile(w),g.hasStructuralChangeFunction&&r.dependencyGraph.markAsDependentOnStructureChange(w)}else{var S=new He(g.ast,y,new be(C.width,C.height));a.set(S,cn(g.dependencies,y)),r.dependencyGraph.addArrayVertex(y,S)}}}else if(!(b instanceof Ke.Empty)){r.shrinkArrayIfNeeded(y);var A=new pn(b.value,h);r.columnIndex.add(W(b.value),y),r.dependencyGraph.addVertex(y,A)}},m=0;m<c.length;++m)p(m);return a}},{key:"shrinkArrayIfNeeded",value:function(e){var r=this.dependencyGraph.getCell(e);r instanceof He&&this.dependencyGraph.shrinkArrayToCorner(r)}}]),i}();var mWe=j(Nr());var dWe=j(q()),hWe=j(Vt());var vWe=j(gs());"use strict";var ele=ce(),tle=ys().find,rle=Du(),PS="find",gk=!0;PS in[]&&Array(1)[PS](function(){gk=!1});ele({target:"Array",proto:!0,forced:gk},{find:function(t){return tle(this,t,arguments.length>1?arguments[1]:void 0)}});rle(PS);var Zqe=j(q()),Jqe=j(Vt());function gg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gg=function(e){return typeof e}:gg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(i)}function nle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function vk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ile(i,t,e){return t&&vk(i.prototype,t),e&&vk(i,e),i}function ale(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&_S(i,t)}function _S(i,t){return _S=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},_S(i,t)}function sle(i){var t=ule();return function(){var r=vg(i),a;if(t){var s=vg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return ole(this,a)}}function ole(i,t){if(t&&(gg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lle(i)}function lle(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ule(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function vg(i){return vg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vg(i)}var Tg=new Map([["gpl-v3",1],["missing",2],["invalid",3],["expired",4]]),kS=function(i){ale(e,i);var t=sle(e);function e(){return nle(this,e),t.apply(this,arguments)}return ile(e,[{key:"version",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("VERSION"),function(){var l=o.config,u=l.licenseKeyValidityState,c=l.licenseKey,p;return Tg.has(c)?p=Tg.get(c):Tg.has(u)?p=Tg.get(u):u==="valid"&&(p=c.slice(-5)),"HyperFormula v".concat(Jt.version,", ").concat(p)})}}]),e}(Y);kS.implementedFunctions={VERSION:{method:"version",parameters:[]}};function Tk(i){return mle(i)||ple(i)||FS(i)||cle()}function cle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ple(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mle(i){if(Array.isArray(i))return MS(i)}function ja(i,t){return hle(i)||dle(i,t)||FS(i,t)||fle()}function fle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dle(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function hle(i){if(Array.isArray(i))return i}function Ba(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=FS(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function FS(i,t){if(!!i){if(typeof i=="string")return MS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return MS(i,t)}}function MS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function yle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Nk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ble(i,t,e){return t&&Nk(i.prototype,t),e&&Nk(i,e),i}function jS(i,t){var e,r=t.implementedFunctions[i],a=(e=t.aliases)===null||e===void 0?void 0:e[i];if(a!==void 0){if(r!==void 0)throw new O4(i,t.name);r=t.implementedFunctions[a]}if(r===void 0)throw Um.functionNotDeclaredInPlugin(i,t.name);return r}var Zr=function(){function i(t){var e=this;if(yle(this,i),this.config=t,this.functions=new Map,this.arraySizeFunctions=new Map,this.volatileFunctions=new Set,this.arrayFunctions=new Set,this.structuralChangeFunctions=new Set,this.functionsWhichDoesNotNeedArgumentsToBeComputed=new Set,this.functionsMetadata=new Map,this.doesFunctionNeedArgumentToBeComputed=function(b){return e.functionsWhichDoesNotNeedArgumentsToBeComputed.has(b)},this.isFunctionVolatile=function(b){return e.volatileFunctions.has(b)},this.isArrayFunction=function(b){return e.arrayFunctions.has(b)},this.isFunctionDependentOnSheetStructureChange=function(b){return e.structuralChangeFunctions.has(b)},t.functionPlugins.length>0){this.instancePlugins=new Map;var r=Ba(t.functionPlugins),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;i.loadPluginFunctions(s,this.instancePlugins)}}catch(b){r.e(b)}finally{r.f()}}else this.instancePlugins=new Map(i.plugins);var o=Ba(i.protectedFunctions()),l;try{for(o.s();!(l=o.n()).done;){var u=ja(l.value,2),c=u[0],p=u[1];i.loadFunctionUnprotected(p,c,this.instancePlugins)}}catch(b){o.e(b)}finally{o.f()}var m=Ba(this.instancePlugins.entries()),f;try{for(m.s();!(f=m.n()).done;){var d=ja(f.value,2),h=d[0],y=d[1];this.categorizeFunction(h,jS(h,y))}}catch(b){m.e(b)}finally{m.f()}}return ble(i,[{key:"initializePlugins",value:function(e){var r=this,a=[],s=Ba(this.instancePlugins.entries()),o;try{var l=function(){var c=ja(o.value,2),p=c[0],m=c[1],f=a.find(function(b){return b instanceof m});f===void 0&&(f=new m(e),a.push(f));var d=jS(p,m),h=d.method;r.functions.set(p,[h,f]);var y=d.arraySizeMethod;y!==void 0&&r.arraySizeFunctions.set(p,[y,f])};for(s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}}},{key:"getFunctionPlugin",value:function(e){if(!i.functionIsProtected(e))return this.instancePlugins.get(e)}},{key:"getFunction",value:function(e){var r=this.functions.get(e);if(r!==void 0&&this.config.translationPackage.isFunctionTranslated(e)){var a=ja(r,2),s=a[0],o=a[1];return function(l,u){return o[s](l,u)}}else return}},{key:"getArraySizeFunction",value:function(e){var r=this.arraySizeFunctions.get(e);if(r!==void 0&&this.config.translationPackage.isFunctionTranslated(e)){var a=ja(r,2),s=a[0],o=a[1];return function(l,u){return o[s](l,u)}}else return}},{key:"getMetadata",value:function(e){return this.functionsMetadata.get(e)}},{key:"getPlugins",value:function(){var e=new Set,r=Ba(this.instancePlugins),a;try{for(r.s();!(a=r.n()).done;){var s=ja(a.value,2),o=s[0],l=s[1];i.functionIsProtected(o)||e.add(l)}}catch(u){r.e(u)}finally{r.f()}return Array.from(e)}},{key:"getRegisteredFunctionIds",value:function(){return Array.from(this.functions.keys())}},{key:"categorizeFunction",value:function(e,r){r.isVolatile&&this.volatileFunctions.add(e),r.arrayFunction&&this.arrayFunctions.add(e),r.doesNotNeedArgumentsToBeComputed&&this.functionsWhichDoesNotNeedArgumentsToBeComputed.add(e),r.isDependentOnSheetStructureChange&&this.structuralChangeFunctions.add(e),this.functionsMetadata.set(e,r)}}],[{key:"registerFunctionPlugin",value:function(e,r){this.loadPluginFunctions(e,this.plugins),r!==void 0&&this.loadTranslations(r)}},{key:"registerFunction",value:function(e,r,a){this.loadPluginFunction(r,e,this.plugins),a!==void 0&&this.loadTranslations(a)}},{key:"unregisterFunction",value:function(e){if(this.functionIsProtected(e))throw gy.cannotUnregisterFunctionWithId(e);this.plugins.delete(e)}},{key:"unregisterFunctionPlugin",value:function(e){var r=Ba(this.protectedPlugins()),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;if(s===e)throw gy.cannotUnregisterProtectedPlugin()}}catch(m){r.e(m)}finally{r.f()}var o=Ba(this.plugins.entries()),l;try{for(o.s();!(l=o.n()).done;){var u=ja(l.value,2),c=u[0],p=u[1];p===e&&this.plugins.delete(c)}}catch(m){o.e(m)}finally{o.f()}}},{key:"unregisterAll",value:function(){this.plugins.clear()}},{key:"getRegisteredFunctionIds",value:function(){return[].concat(Tk(Array.from(this.plugins.keys())),Tk(Array.from(this._protectedPlugins.keys())))}},{key:"getPlugins",value:function(){return Array.from(new Set(this.plugins.values()).values())}},{key:"getFunctionPlugin",value:function(e){if(!this.functionIsProtected(e))return this.plugins.get(e)}},{key:"loadTranslations",value:function(e){var r=new Set(Jt.getRegisteredLanguagesCodes());Object.keys(e).forEach(function(a){r.has(a)&&Jt.getLanguage(a).extendFunctions(e[a])})}},{key:"loadPluginFunctions",value:function(e,r){var a=this;Object.keys(e.implementedFunctions).forEach(function(s){a.loadPluginFunction(e,s,r)}),e.aliases!==void 0&&Object.keys(e.aliases).forEach(function(s){a.loadPluginFunction(e,s,r)})}},{key:"loadPluginFunction",value:function(e,r,a){if(this.functionIsProtected(r))throw gy.cannotRegisterFunctionWithId(r);this.loadFunctionUnprotected(e,r,a)}},{key:"loadFunctionUnprotected",value:function(e,r,a){var s=jS(r,e).method;if(Object.prototype.hasOwnProperty.call(e.prototype,s))a.set(r,e);else throw Um.functionMethodNotFound(s,e.name)}},{key:"functionIsProtected",value:function(e){return this._protectedPlugins.has(e)}},{key:"protectedFunctions",value:regeneratorRuntime.mark(function t(){var e,r,a,s,o;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:e=Ba(this._protectedPlugins),u.prev=1,e.s();case 3:if((r=e.n()).done){u.next=10;break}if(a=ja(r.value,2),s=a[0],o=a[1],o===void 0){u.next=8;break}return u.next=8,[s,o];case 8:u.next=3;break;case 10:u.next=15;break;case 12:u.prev=12,u.t0=u.catch(1),e.e(u.t0);case 15:return u.prev=15,e.f(),u.finish(15);case 18:case"end":return u.stop()}},t,this,[[1,12,15,18]])})},{key:"protectedPlugins",value:regeneratorRuntime.mark(function t(){var e,r,a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:e=Ba(this._protectedPlugins),l.prev=1,e.s();case 3:if((r=e.n()).done){l.next=10;break}if(a=ja(r.value,2),s=a[1],s===void 0){l.next=8;break}return l.next=8,s;case 8:l.next=3;break;case 10:l.next=15;break;case 12:l.prev=12,l.t0=l.catch(1),e.e(l.t0);case 15:return l.prev=15,e.f(),l.finish(15);case 18:case"end":return l.stop()}},t,this,[[1,12,15,18]])})}]),i}();Zr.plugins=new Map;Zr._protectedPlugins=new Map([["VERSION",kS],["OFFSET",void 0]]);var zWe=j(q());var PWe=j(ar());function gle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Ck(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function vle(i,t,e){return t&&Ck(i.prototype,t),e&&Ck(i,e),i}var cr;(function(i){i.GREATER_THAN="GREATER_THAN",i.GREATER_THAN_OR_EQUAL="GREATER_THAN_OR_EQUAL",i.LESS_THAN="LESS_THAN",i.LESS_THAN_OR_EQUAL="LESS_THAN_OR_EQUAL",i.NOT_EQUAL="NOT_EQUAL",i.EQUAL="EQUAL"})(cr||(cr={}));var Ng=function(t,e){return{operator:t,value:e}},Sk=function(){function i(t){gle(this,i);var e,r,a,s;this.trueString=(r=(e=t.translationPackage.getMaybeFunctionTranslation("TRUE"))===null||e===void 0?void 0:e.toLowerCase())!==null&&r!==void 0?r:"true",this.falseString=(s=(a=t.translationPackage.getMaybeFunctionTranslation("FALSE"))===null||a===void 0?void 0:a.toLowerCase())!==null&&s!==void 0?s:"false"}return vle(i,[{key:"fromCellValue",value:function(e,r){if(!(typeof e!="string"&&typeof e!="boolean"&&typeof e!="number")){var a=this.parseCriterion(e,r);if(a!==void 0)return{raw:e,lambda:Cle(a,r)}}}},{key:"parseCriterion",value:function(e,r){if(typeof e=="number"||typeof e=="boolean")return Ng(cr.EQUAL,e);if(typeof e=="string"){var a=Tle.exec(e),s,o;a?(o=Nle(a[1]),s=a[2]):(o=cr.EQUAL,s=e);var l=r.coerceToMaybeNumber(s),u=s.toLowerCase()===this.trueString?!0:s.toLowerCase()===this.falseString?!1:void 0;if(o===void 0)return;if(s==="")return Ng(o,null);if(l===void 0){if(o===cr.EQUAL||o===cr.NOT_EQUAL)return Ng(o,u??s)}else return Ng(o,W(l))}}}]),i}(),Tle=/([<>=]+)(.*)/;function Nle(i){switch(i){case">":return cr.GREATER_THAN;case">=":return cr.GREATER_THAN_OR_EQUAL;case"<":return cr.LESS_THAN;case"<=":return cr.LESS_THAN_OR_EQUAL;case"<>":return cr.NOT_EQUAL;case"=":return cr.EQUAL;default:return}}var Cle=function(t,e){switch(t.operator){case cr.GREATER_THAN:return typeof t.value=="number"?function(r){return typeof r=="number"&&e.floatCmp(r,t.value)>0}:function(r){return!1};case cr.GREATER_THAN_OR_EQUAL:return typeof t.value=="number"?function(r){return typeof r=="number"&&e.floatCmp(r,t.value)>=0}:function(r){return!1};case cr.LESS_THAN:return typeof t.value=="number"?function(r){return typeof r=="number"&&e.floatCmp(r,t.value)<0}:function(r){return!1};case cr.LESS_THAN_OR_EQUAL:return typeof t.value=="number"?function(r){return typeof r=="number"&&e.floatCmp(r,t.value)<=0}:function(r){return!1};case cr.EQUAL:return typeof t.value=="number"?function(r){if(typeof r=="number")return e.floatCmp(r,t.value)===0;if(typeof r=="string"){if(r==="")return!1;var a=e.coerceToMaybeNumber(r);return a===void 0?!1:e.floatCmp(a,t.value)===0}else return!1}:typeof t.value=="string"?e.eqMatcherFunction(t.value):typeof t.value=="boolean"?function(r){return typeof r=="boolean"&&r===t.value}:function(r){return r===se};case cr.NOT_EQUAL:return typeof t.value=="number"?function(r){if(typeof r=="number")return e.floatCmp(r,t.value)!==0;if(typeof r=="string"){if(r==="")return!0;var a=e.coerceToMaybeNumber(r);return a===void 0?!0:e.floatCmp(a,t.value)!==0}else return!0}:typeof t.value=="string"?e.neqMatcherFunction(t.value):typeof t.value=="boolean"?function(r){return typeof r!="boolean"||r!==t.value}:function(r){return r!==se}}};function Ak(i){return wle(i)||Ale(i)||BS(i)||Sle()}function Sle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ale(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function wle(i){if(Array.isArray(i))return LS(i)}function wk(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=BS(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function xk(i,t){return Rle(i)||Ele(i,t)||BS(i,t)||xle()}function xle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BS(i,t){if(!!i){if(typeof i=="string")return LS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return LS(i,t)}}function LS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Ele(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Rle(i){if(Array.isArray(i))return i}function Vle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Ek(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ile(i,t,e){return t&&Ek(i.prototype,t),e&&Ek(i,e),i}var Rk=function(){function i(t,e,r,a,s,o,l,u,c,p){var m=this;Vle(this,i),this.config=t,this.dependencyGraph=e,this.columnSearch=r,this.stats=a,this.arithmeticHelper=s,this.functionRegistry=o,this.namedExpressions=l,this.serialization=u,this.arraySizePredictor=c,this.dateTimeHelper=p,this.equalOp=function(f,d){return Xn(m.arithmeticHelper.eq,f,d)},this.notEqualOp=function(f,d){return Xn(m.arithmeticHelper.neq,f,d)},this.greaterThanOp=function(f,d){return Xn(m.arithmeticHelper.gt,f,d)},this.lessThanOp=function(f,d){return Xn(m.arithmeticHelper.lt,f,d)},this.greaterThanOrEqualOp=function(f,d){return Xn(m.arithmeticHelper.geq,f,d)},this.lessThanOrEqualOp=function(f,d){return Xn(m.arithmeticHelper.leq,f,d)},this.concatOp=function(f,d){return Xn(m.arithmeticHelper.concat,Cf(f),Cf(d))},this.plusOp=function(f,d){return Xn(m.arithmeticHelper.addWithEpsilon,m.arithmeticHelper.coerceScalarToNumberOrError(f),m.arithmeticHelper.coerceScalarToNumberOrError(d))},this.minusOp=function(f,d){return Xn(m.arithmeticHelper.subtract,m.arithmeticHelper.coerceScalarToNumberOrError(f),m.arithmeticHelper.coerceScalarToNumberOrError(d))},this.timesOp=function(f,d){return Xn(m.arithmeticHelper.multiply,m.arithmeticHelper.coerceScalarToNumberOrError(f),m.arithmeticHelper.coerceScalarToNumberOrError(d))},this.powerOp=function(f,d){return Xn(m.arithmeticHelper.pow,m.arithmeticHelper.coerceScalarToNumberOrError(f),m.arithmeticHelper.coerceScalarToNumberOrError(d))},this.divOp=function(f,d){return Xn(m.arithmeticHelper.divide,m.arithmeticHelper.coerceScalarToNumberOrError(f),m.arithmeticHelper.coerceScalarToNumberOrError(d))},this.unaryMinusOp=function(f){return Vk(m.arithmeticHelper.unaryMinus,m.arithmeticHelper.coerceScalarToNumberOrError(f))},this.percentOp=function(f){return Vk(m.arithmeticHelper.unaryPercent,m.arithmeticHelper.coerceScalarToNumberOrError(f))},this.unaryPlusOp=function(f){return m.arithmeticHelper.unaryPlus(f)},this.functionRegistry.initializePlugins(this),this.criterionBuilder=new Sk(t)}return Ile(i,[{key:"evaluateAst",value:function(e,r){var a=this.evaluateAstWithoutPostprocessing(e,r);if(he(a)){if(vb(W(a)))return new x(R.NUM,D.NaN);a=oc(a,Tb(W(a)))}if(a instanceof J&&a.height()===1&&a.width()===1){var s=xk(a.data,1),o=xk(s[0],1);a=o[0]}return Ole(a,r.formulaVertex)}},{key:"evaluateAstWithoutPostprocessing",value:function(e,r){switch(e.type){case P.EMPTY:return se;case P.CELL_REFERENCE:{var a=e.reference.toSimpleCellAddress(r.formulaAddress);return Ht(a)?new x(R.REF,D.BadRef):this.dependencyGraph.getCellValue(a)}case P.NUMBER:case P.STRING:return e.value;case P.CONCATENATE_OP:{var s=this.evaluateAst(e.left,r),o=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.concatOp,s,o,r)}case P.EQUALS_OP:{var l=this.evaluateAst(e.left,r),u=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.equalOp,l,u,r)}case P.NOT_EQUAL_OP:{var c=this.evaluateAst(e.left,r),p=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.notEqualOp,c,p,r)}case P.GREATER_THAN_OP:{var m=this.evaluateAst(e.left,r),f=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.greaterThanOp,m,f,r)}case P.LESS_THAN_OP:{var d=this.evaluateAst(e.left,r),h=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.lessThanOp,d,h,r)}case P.GREATER_THAN_OR_EQUAL_OP:{var y=this.evaluateAst(e.left,r),b=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.greaterThanOrEqualOp,y,b,r)}case P.LESS_THAN_OR_EQUAL_OP:{var g=this.evaluateAst(e.left,r),v=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.lessThanOrEqualOp,g,v,r)}case P.PLUS_OP:{var C=this.evaluateAst(e.left,r),w=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.plusOp,C,w,r)}case P.MINUS_OP:{var S=this.evaluateAst(e.left,r),A=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.minusOp,S,A,r)}case P.TIMES_OP:{var E=this.evaluateAst(e.left,r),I=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.timesOp,E,I,r)}case P.POWER_OP:{var V=this.evaluateAst(e.left,r),O=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.powerOp,V,O,r)}case P.DIV_OP:{var k=this.evaluateAst(e.left,r),M=this.evaluateAst(e.right,r);return this.binaryRangeWrapper(this.divOp,k,M,r)}case P.PLUS_UNARY_OP:{var L=this.evaluateAst(e.value,r);return this.unaryRangeWrapper(this.unaryPlusOp,L,r)}case P.MINUS_UNARY_OP:{var G=this.evaluateAst(e.value,r);return this.unaryRangeWrapper(this.unaryMinusOp,G,r)}case P.PERCENT_OP:{var K=this.evaluateAst(e.value,r);return this.unaryRangeWrapper(this.percentOp,K,r)}case P.FUNCTION_CALL:{if(this.config.licenseKeyValidityState!=="valid"&&!Zr.functionIsProtected(e.procedureName))return new x(R.LIC,D.LicenseKey(this.config.licenseKeyValidityState));var B=this.functionRegistry.getFunction(e.procedureName);return B!==void 0?B(e,new qr(r.formulaAddress,r.arraysFlag||this.functionRegistry.isArrayFunction(e.procedureName),r.formulaVertex)):new x(R.NAME,D.FunctionName(e.procedureName))}case P.NAMED_EXPRESSION:{var _=this.namedExpressions.nearestNamedExpression(e.expressionName,r.formulaAddress.sheet);return _?this.dependencyGraph.getCellValue(_.address):new x(R.NAME,D.NamedExpressionName(e.expressionName))}case P.CELL_RANGE:{if(!this.rangeSpansOneSheet(e))return new x(R.REF,D.RangeManySheets);var F=ae.fromCellRange(e,r.formulaAddress),z=this.dependencyGraph.getArray(F);if(z){var H=z.array;if(H instanceof Ho)throw new Error("Array should be already computed");if(H instanceof x)return H;if(H instanceof xf)return J.fromRange(H.raw(),F,this.dependencyGraph);throw new Error("Unknown array")}else return J.onlyRange(F,this.dependencyGraph)}case P.COLUMN_RANGE:{if(!this.rangeSpansOneSheet(e))return new x(R.REF,D.RangeManySheets);var ie=nc.fromColumnRange(e,r.formulaAddress);return J.onlyRange(ie,this.dependencyGraph)}case P.ROW_RANGE:{if(!this.rangeSpansOneSheet(e))return new x(R.REF,D.RangeManySheets);var fe=ic.fromRowRangeAst(e,r.formulaAddress);return J.onlyRange(fe,this.dependencyGraph)}case P.PARENTHESIS:return this.evaluateAst(e.expression,r);case P.ARRAY:{var we=void 0,Ne=[],ve=wk(e.args),Vn;try{for(ve.s();!(Vn=ve.n()).done;){var In=Vn.value,bn=void 0,jr=[],gi=wk(In),El;try{for(gi.s();!(El=gi.n()).done;){var fp=El.value,Ya=hb(this.evaluateAst(fp,r)),Zs=Ya.height();if(bn===void 0)bn=Zs,jr.push.apply(jr,Ak(Ya.data));else if(bn===Zs)for(var Za=0;Za<Zs;Za++){var Rl;(Rl=jr[Za]).push.apply(Rl,Ak(Ya.data[Za]))}else return new x(R.REF,D.SizeMismatch)}}catch(Vl){gi.e(Vl)}finally{gi.f()}var dp=jr[0].length;if(we===void 0)we=dp,Ne.push.apply(Ne,jr);else if(we===dp)Ne.push.apply(Ne,jr);else return new x(R.REF,D.SizeMismatch)}}catch(Vl){ve.e(Vl)}finally{ve.f()}return J.onlyValues(Ne)}case P.ERROR_WITH_RAW_INPUT:case P.ERROR:return e.error}}},{key:"getGpuInstance",value:function(){var e=this.config.gpuMode,r=this.config.gpujs;if(r===void 0)throw Error("Cannot instantiate GPU.js. Constructor not provided.");return this.gpu||(this.gpu=new r({mode:e})),this.gpu}},{key:"destroyGpu",value:function(){var e;(e=this.gpu)===null||e===void 0||e.destroy()}},{key:"rangeSpansOneSheet",value:function(e){return e.start.sheet===e.end.sheet}},{key:"unaryRangeWrapper",value:function(e,r,a){var s;if(r instanceof J&&!a.arraysFlag&&(r=(s=mc(r,a))!==null&&s!==void 0?s:new x(R.VALUE,D.ScalarExpected)),r instanceof x)return r;if(r instanceof J){var o=r.data.map(function(l){return l.map(e)});return J.onlyValues(o)}return e(r)}},{key:"binaryRangeWrapper",value:function(e,r,a,s){var o,l;if(r instanceof J&&!s.arraysFlag&&(r=(o=mc(r,s))!==null&&o!==void 0?o:new x(R.VALUE,D.ScalarExpected)),r instanceof x)return r;if(a instanceof J&&!s.arraysFlag&&(a=(l=mc(a,s))!==null&&l!==void 0?l:new x(R.VALUE,D.ScalarExpected)),a instanceof x)return a;if(r instanceof J||a instanceof J){if(!(r instanceof J))if(a.isAdHoc()){for(var u=a.data,c=0;c<u.length;c++)for(var p=0;p<u[0].length;p++)u[c][p]=e(r,u[c][p]);return J.onlyValues(u)}else r=J.fromScalar(r);if(!(a instanceof J))if(r.isAdHoc()){for(var m=r.data,f=0;f<m.length;f++)for(var d=0;d<m[0].length;d++)m[f][d]=e(m[f][d],a);return J.onlyValues(m)}else a=J.fromScalar(a);if(r.width()===a.width()&&r.height()===a.height()){if(r.isAdHoc()){for(var h=r.data,y=a.data,b=0;b<h.length;b++)for(var g=0;g<h[0].length;g++)h[b][g]=e(h[b][g],y[b][g]);return J.onlyValues(h)}if(a.isAdHoc()){for(var v=r.data,C=a.data,w=0;w<v.length;w++)for(var S=0;S<v[0].length;S++)C[w][S]=e(v[w][S],C[w][S]);return J.onlyValues(C)}}for(var A=Math.max(r.width(),a.width()),E=Math.max(r.height(),a.height()),I=Array(E),V=0;V<E;V++)I[V]=Array(A);for(var O=0;O<E;O++)for(var k=r.height()!==1?O:0,M=a.height()!==1?O:0,L=0;L<A;L++){var G=r.width()!==1?L:0,K=a.width()!==1?L:0;k<r.height()&&M<a.height()&&G<r.width()&&K<a.width()?I[O][L]=e(r.data[k][G],a.data[M][K]):I[O][L]=new x(R.NA)}return J.onlyValues(I)}return e(r,a)}}]),i}();function Vk(i,t){return t instanceof x?t:i(t)}function Xn(i,t,e){return t instanceof x?t:e instanceof x?e:i(t,e)}function Ole(i,t){return i instanceof x&&t!==void 0?i.attachRootVertex(t):i}var C$e=j(q());var R$e=j(Nr());var p$e=j(q());function Dle(i,t){return Fle(i)||kle(i,t)||_le(i,t)||Ple()}function Ple(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _le(i,t){if(!!i){if(typeof i=="string")return Ik(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ik(i,t)}}function Ik(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function kle(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Fle(i){if(Array.isArray(i))return i}function Mle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Ok(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jle(i,t,e){return t&&Ok(i.prototype,t),e&&Ok(i,e),i}var Dk=function(){function i(t){Mle(this,i),this.sheet=t,this.transformations=[]}return jle(i,[{key:"add",value:function(e){this.transformations.push(e)}},{key:"performEagerTransformations",value:function(e,r){this.transformations.forEach(function(a){return a.performEagerTransformations(e,r)})}},{key:"transformSingleAst",value:function(e,r){var a=e,s=r;return this.transformations.forEach(function(o){var l=o.transformSingleAst(a,s),u=Dle(l,2);a=u[0],s=u[1]}),[a,s]}},{key:"isIrreversible",value:function(){return!0}}]),i}();function Ble(i,t){return Hle(i)||zle(i,t)||Ule(i,t)||Lle()}function Lle(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ule(i,t){if(!!i){if(typeof i=="string")return Pk(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Pk(i,t)}}function Pk(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function zle(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Hle(i){if(Array.isArray(i))return i}function Gle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function _k(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function qle(i,t,e){return t&&_k(i.prototype,t),e&&_k(i,e),i}var kk=function(){function i(t){Gle(this,i),this.stats=t,this.transformations=[]}return qle(i,[{key:"version",value:function(){return this.transformations.length}},{key:"addTransformation",value:function(e){return this.combinedTransformer!==void 0?this.combinedTransformer.add(e):this.transformations.push(e),this.version()}},{key:"beginCombinedMode",value:function(e){this.combinedTransformer=new Dk(e)}},{key:"commitCombinedMode",value:function(){if(this.combinedTransformer===void 0)throw"Combined mode wasn't started";return this.transformations.push(this.combinedTransformer),this.combinedTransformer=void 0,this.version()}},{key:"applyTransformations",value:function(e,r,a){this.stats.start(oe.TRANSFORM_ASTS_POSTPONED);for(var s=a;s<this.transformations.length;s++){var o=this.transformations[s];o.isIrreversible()&&(this.undoRedo.storeDataForVersion(s,r,this.parser.computeHashFromAst(e)),this.parser.rememberNewAst(e));var l=o.transformSingleAst(e,r),u=Ble(l,2),c=u[0],p=u[1];e=c,r=p}var m=this.parser.rememberNewAst(e);return this.stats.end(oe.TRANSFORM_ASTS_POSTPONED),[m,r,this.transformations.length]}},{key:"getTransformationsFrom",value:regeneratorRuntime.mark(function t(e,r){var a,s;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=e;case 1:if(!(a<this.transformations.length)){l.next=9;break}if(s=this.transformations[a],!(!r||r(s))){l.next=6;break}return l.next=6,s;case 6:a++,l.next=1;break;case 9:case"end":return l.stop()}},t,this)})}]),i}();"use strict";var Wle=ce(),$le=ys().findIndex,Kle=Du(),US="findIndex",Fk=!0;US in[]&&Array(1)[US](function(){Fk=!1});Wle({target:"Array",proto:!0,forced:Fk},{findIndex:function(t){return $le(this,t,arguments.length>1?arguments[1]:void 0)}});Kle(US);var Q$e=j(q());var M$e=j(q());function Yo(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Yo=function(e){return typeof e}:Yo=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yo(i)}function Cg(i,t,e,r){var a;r==="col"?a=i.effectiveEndColumn(e):a=i.effectiveEndRow(e);var s=i.start[r],o;r==="row"?o=function(c){return W(e.getCellValue($(i.sheet,i.start.col,c)))}:o=function(c){return W(e.getCellValue($(i.sheet,c,i.start.row)))};var l=Xle(o,t,s,a);return Yo(o(l))!==Yo(t)?-1:l-s}function Xle(i,t,e,r){for(;e<=r;){var a=Math.floor((e+r)/2),s=Yle(t,i(a));if(s>0)e=a+1;else if(s<0)r=a-1;else if(e!=a)r=a;else return a}return r}function Yle(i,t){return Yo(i)===Yo(t)?i===se?0:i<t?-1:i>t?1:0:i===se?-1:t===se?1:t instanceof x||typeof i=="number"&&typeof t=="string"||typeof i=="number"&&typeof t=="boolean"?-1:typeof i=="string"&&typeof t=="number"?1:typeof i=="string"&&typeof t=="boolean"?-1:1}function Zle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Mk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Jle(i,t,e){return t&&Mk(i.prototype,t),e&&Mk(i,e),i}var Sg=function(){function i(t){Zle(this,i),this.dependencyGraph=t}return Jle(i,[{key:"advancedFind",value:function(e,r){var a,s=r.range;s===void 0?a=r.valuesFromTopLeftCorner():a=this.dependencyGraph.computeListOfValuesInRange(s);for(var o=0;o<a.length;o++)if(e(W(a[o])))return o;return-1}}]),i}();function Ag(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ag=function(e){return typeof e}:Ag=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ag(i)}function Qle(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function jk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function eue(i,t,e){return t&&jk(i.prototype,t),e&&jk(i,e),i}function tue(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&zS(i,t)}function zS(i,t){return zS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},zS(i,t)}function rue(i){var t=aue();return function(){var r=wg(i),a;if(t){var s=wg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return nue(this,a)}}function nue(i,t){if(t&&(Ag(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iue(i)}function iue(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function aue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function wg(i){return wg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wg(i)}var xg=function(i){tue(e,i);var t=rue(e);function e(r,a){var s;return Qle(this,e),s=t.call(this,r),s.dependencyGraph=r,s.config=a,s}return eue(e,[{key:"add",value:function(a,s){}},{key:"remove",value:function(a,s){}},{key:"change",value:function(a,s,o){}},{key:"applyChanges",value:function(a){}},{key:"addColumns",value:function(a){}},{key:"removeColumns",value:function(a){}},{key:"removeSheet",value:function(a){}},{key:"moveValues",value:function(a,s,o,l){}},{key:"removeValues",value:function(a){}},{key:"find",value:function(a,s,o){typeof a=="string"&&(a=li(a));var l=s.range;return l===void 0?s.valuesFromTopLeftCorner().map(W).map(function(u){return typeof u=="string"?li(u):u}).indexOf(a):o?Cg(l,a,this.dependencyGraph,"row"):this.dependencyGraph.computeListOfValuesInRange(l).findIndex(function(u){return u=W(u),u=typeof u=="string"?li(u):u,u===a})}}]),e}(Sg);var oKe=j(q()),lKe=j(Vt());function sue(i){return uue(i)||lue(i)||HS(i)||oue()}function oue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lue(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function uue(i){if(Array.isArray(i))return GS(i)}function Eg(i,t){return mue(i)||pue(i,t)||HS(i,t)||cue()}function cue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pue(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function mue(i){if(Array.isArray(i))return i}function Cc(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=HS(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function HS(i,t){if(!!i){if(typeof i=="string")return GS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return GS(i,t)}}function GS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function fue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Bk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function due(i,t,e){return t&&Bk(i.prototype,t),e&&Bk(i,e),i}var Lk=function(){function i(t,e,r){fue(this,i),this.dependencyGraph=t,this.config=e,this.stats=r,this.index=new Map,this.transformingService=this.dependencyGraph.lazilyTransformingAstService,this.binarySearchStrategy=new xg(t,e)}return due(i,[{key:"add",value:function(e,r){if(!(e===se||e instanceof x))if(e instanceof J){var a=Cc(e.entriesFromTopLeftCorner(r)),s;try{for(a.s();!(s=a.n()).done;){var o=Eg(s.value,2),l=o[0],u=o[1];this.addSingleCellValue(W(l),u)}}catch(c){a.e(c)}finally{a.f()}}else this.addSingleCellValue(e,r)}},{key:"remove",value:function(e,r){if(e!==void 0)if(e instanceof J){var a=Cc(e.entriesFromTopLeftCorner(r)),s;try{for(a.s();!(s=a.n()).done;){var o=Eg(s.value,2),l=o[0],u=o[1];this.removeSingleValue(W(l),u)}}catch(c){a.e(c)}finally{a.f()}}else this.removeSingleValue(e,r)}},{key:"change",value:function(e,r,a){e!==r&&(this.remove(e,a),this.add(r,a))}},{key:"applyChanges",value:function(e){var r=Cc(e),a;try{for(r.s();!(a=r.n()).done;){var s=a.value;s.oldValue!==void 0&&this.change(W(s.oldValue),W(s.value),s.address)}}catch(o){r.e(o)}finally{r.f()}}},{key:"moveValues",value:function(e,r,a,s){var o=Cc(e),l;try{for(o.s();!(l=o.n()).done;){var u=Eg(l.value,2),c=u[0],p=u[1],m=K9(p,s,r,a);this.remove(c,p),this.add(c,m)}}catch(f){o.e(f)}finally{o.f()}}},{key:"removeValues",value:function(e){var r=Cc(e),a;try{for(r.s();!(a=r.n()).done;){var s=Eg(a.value,2),o=s[0],l=s[1];this.remove(o,l)}}catch(u){r.e(u)}finally{r.f()}}},{key:"find",value:function(e,r,a){var s=r.range;if(s===void 0)return this.binarySearchStrategy.find(e,r,a);this.ensureRecentData(s.sheet,s.start.col,e);var o=this.getColumnMap(s.sheet,s.start.col);if(!o)return-1;typeof e=="string"&&(e=li(e));var l=o.get(e);if(!l)return this.binarySearchStrategy.find(e,r,a);var u=Rg(l.index,s.start.row),c=l.index[u];return c<=s.end.row?c-s.start.row:this.binarySearchStrategy.find(e,r,a)}},{key:"advancedFind",value:function(e,r){return this.binarySearchStrategy.advancedFind(e,r)}},{key:"addColumns",value:function(e){var r=this.index.get(e.sheet);!r||r.splice.apply(r,[e.columnStart,0].concat(sue(Array(e.numberOfColumns))))}},{key:"removeColumns",value:function(e){var r=this.index.get(e.sheet);!r||r.splice(e.columnStart,e.numberOfColumns)}},{key:"removeSheet",value:function(e){this.index.delete(e)}},{key:"getColumnMap",value:function(e,r){this.index.has(e)||this.index.set(e,[]);var a=this.index.get(e),s=a[r];return s||(s=new Map,a[r]=s),s}},{key:"getValueIndex",value:function(e,r,a){var s=this.getColumnMap(e,r),o=this.getColumnMap(e,r).get(a);return o||(o={version:this.transformingService.version(),index:[]},s.set(a,o)),o}},{key:"ensureRecentData",value:function(e,r,a){var s=this.getValueIndex(e,r,a),o=this.transformingService.version();if(s.version!==o){var l=this.transformingService.getTransformationsFrom(s.version,function(m){return m.sheet===e&&(m instanceof Pf||m instanceof _f)}),u=Cc(l),c;try{for(u.s();!(c=u.n()).done;){var p=c.value;p instanceof Pf?this.addRows(r,p.rowsSpan,a):p instanceof _f&&this.removeRows(r,p.rowsSpan,a)}}catch(m){u.e(m)}finally{u.f()}s.version=o}}},{key:"addSingleCellValue",value:function(e,r){var a=this;this.stats.measure(oe.BUILD_COLUMN_INDEX,function(){a.ensureRecentData(r.sheet,r.col,e),typeof e=="string"&&(e=li(e));var s=a.getValueIndex(r.sheet,r.col,e);a.addValue(s,r.row)})}},{key:"removeSingleValue",value:function(e,r){var a=this;this.stats.measure(oe.BUILD_COLUMN_INDEX,function(){a.ensureRecentData(r.sheet,r.col,e);var s=a.getColumnMap(r.sheet,r.col);typeof e=="string"&&(e=li(e));var o=s.get(e);if(!!o){var l=Rg(o.index,r.row);o.index.splice(l,1),o.index.length===0&&s.delete(e),s.size===0&&delete a.index.get(r.sheet)[r.col]}})}},{key:"addRows",value:function(e,r,a){var s=this.getValueIndex(r.sheet,e,a);this.shiftRows(s,r.rowStart,r.numberOfRows)}},{key:"removeRows",value:function(e,r,a){var s=this.getValueIndex(r.sheet,e,a);this.removeRowsFromValues(s,r),this.shiftRows(s,r.rowEnd+1,-r.numberOfRows)}},{key:"addValue",value:function(e,r){var a=Uk(e.index,r),s=e.index[a];s!==r&&(a===e.index.length-1?e.index.push(r):e.index.splice(a+1,0,r))}},{key:"removeRowsFromValues",value:function(e,r){var a=Rg(e.index,r.rowStart),s=Uk(e.index,r.rowEnd);e.index[a]<=r.rowEnd&&e.index.splice(a,s-a+1)}},{key:"shiftRows",value:function(e,r,a){for(var s=Rg(e.index,r),o=s;o<e.index.length;++o)e.index[o]+=a}}]),i}();function Rg(i,t){for(var e=0,r=i.length-1;e<=r;){var a=Math.floor((e+r)/2);if(t>i[a])e=a+1;else if(t<i[a])r=a-1;else return a}return e}function Uk(i,t){for(var e=0,r=i.length-1;e<=r;){var a=Math.floor((e+r)/2);if(t>i[a])e=a+1;else if(t<i[a])r=a-1;else return a}return r}function zk(i,t,e){return t.useColumnIndex?new Lk(i,t,e):new xg(i,t)}var _Ke=j(ar());function hue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Hk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function yue(i,t,e){return t&&Hk(i.prototype,t),e&&Hk(i,e),i}var Gk=function(){function i(t){hue(this,i),this.config=t;var e=this.config.thousandSeparator==="."?"\\".concat(this.config.thousandSeparator):this.config.thousandSeparator,r=this.config.decimalSeparator==="."?"\\".concat(this.config.decimalSeparator):this.config.decimalSeparator;this.numberPattern=new RegExp("^([+-]?((".concat(r,"\\d+)|(\\d+(").concat(e,"\\d{3,})*(").concat(r,"\\d*)?)))(e[+-]?\\d+)?$")),this.allThousandSeparatorsRegex=new RegExp("".concat(e),"g")}return yue(i,[{key:"numericStringToMaybeNumber",value:function(e){if(this.numberPattern.test(e)){var r=this.numericStringToNumber(e);return isNaN(r)?void 0:r}}},{key:"numericStringToNumber",value:function(e){var r=e.replace(this.allThousandSeparatorsRegex,"").replace(this.config.decimalSeparator,".");return Number(r)}}]),i}();var XKe=j(q());function qk(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=bue(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function bue(i,t){if(!!i){if(typeof i=="string")return Wk(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Wk(i,t)}}function Wk(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function gue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function $k(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function vue(i,t,e){return t&&$k(i.prototype,t),e&&$k(i,e),i}var Kk=function(){function i(t,e,r){gue(this,i),this.dependencyGraph=t,this.unparser=e,this.exporter=r}return vue(i,[{key:"getCellFormula",value:function(e,r){var a=this.dependencyGraph.getCell(e);if(a instanceof Wr){var s=a.getFormula(this.dependencyGraph.lazilyTransformingAstService);return r=r??e,this.unparser.unparse(s,r)}else if(a instanceof He){var o=a.getAddress(this.dependencyGraph.lazilyTransformingAstService);if(o.row!==e.row||o.col!==e.col||o.sheet!==e.sheet)return;r=r??e;var l=a.getFormula(this.dependencyGraph.lazilyTransformingAstService);if(l!==void 0)return this.unparser.unparse(l,r)}else if(a instanceof ui)return a.getFormula()}},{key:"getCellSerialized",value:function(e,r){var a;return(a=this.getCellFormula(e,r))!==null&&a!==void 0?a:this.getRawValue(e)}},{key:"getCellValue",value:function(e){return this.exporter.exportValue(this.dependencyGraph.getScalarValue(e))}},{key:"getRawValue",value:function(e){return this.dependencyGraph.getRawValue(e)}},{key:"getSheetValues",value:function(e){var r=this;return this.genericSheetGetter(e,function(a){return r.getCellValue(a)})}},{key:"getSheetFormulas",value:function(e){var r=this;return this.genericSheetGetter(e,function(a){return r.getCellFormula(a)})}},{key:"genericSheetGetter",value:function(e,r){for(var a=this.dependencyGraph.getSheetHeight(e),s=this.dependencyGraph.getSheetWidth(e),o=new Array(a),l=0;l<a;l++){o[l]=new Array(s);for(var u=0;u<s;u++){var c=$(e,u,l);o[l][u]=r(c)}for(var p=s-1;p>=0&&(o[l][p]===null||o[l][p]===void 0);p--)o[l].pop()}for(var m=a-1;m>=0&&o[m].length===0;m--)o.pop();return o}},{key:"genericAllSheetsGetter",value:function(e){var r={},a=qk(this.dependencyGraph.sheetMapping.displayNames()),s;try{for(a.s();!(s=a.n()).done;){var o=s.value,l=this.dependencyGraph.sheetMapping.fetch(o);r[o]=e(l)}}catch(u){a.e(u)}finally{a.f()}return r}},{key:"getSheetSerialized",value:function(e){var r=this;return this.genericSheetGetter(e,function(a){return r.getCellSerialized(a)})}},{key:"getAllSheetsValues",value:function(){var e=this;return this.genericAllSheetsGetter(function(r){return e.getSheetValues(r)})}},{key:"getAllSheetsFormulas",value:function(){var e=this;return this.genericAllSheetsGetter(function(r){return e.getSheetFormulas(r)})}},{key:"getAllSheetsSerialized",value:function(){var e=this;return this.genericAllSheetsGetter(function(r){return e.getSheetSerialized(r)})}},{key:"getAllNamedExpressionsSerialized",value:function(){var e=this,r=[],a=0,s=qk(this.dependencyGraph.sheetMapping.displayNames()),o;try{for(s.s();!(o=s.n()).done;){var l=o.value,u=this.dependencyGraph.sheetMapping.fetch(l);r[u]=a,a++}}catch(c){s.e(c)}finally{s.f()}return this.dependencyGraph.namedExpressions.getAllNamedExpressions().map(function(c){return{name:c.expression.displayName,expression:e.getCellSerialized(c.expression.address),scope:c.scope!==void 0?r[c.scope]:void 0,options:c.expression.options}})}},{key:"withNewConfig",value:function(e,r){var a=new ff(e,Bo(e),this.dependencyGraph.sheetMapping.fetchDisplayName,r);return new i(this.dependencyGraph,a,this.exporter)}}]),i}();function Tue(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Nue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Xk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Cue(i,t,e){return t&&Xk(i.prototype,t),e&&Xk(i,e),i}var Bf=function(){function i(){Nue(this,i)}return Cue(i,null,[{key:"buildEngine",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e.useStats?new wf:new D6;s.start(oe.BUILD_ENGINE_TOTAL);var o=new Tc,l=new Zr(e),u=new kk(s),c=eS.buildEmpty(u,e,l,o,s),p=zk(c,e,s),m=c.sheetMapping,f=c.addressMapping;for(var d in r)if(Object.prototype.hasOwnProperty.call(r,d)){var h=r[d];og(h);var y=Ko(h);if(y.height>e.maxRows||y.width>e.maxColumns)throw new Ln;var b=m.addSheet(d);f.autoAddSheet(b,h,y)}var g=new d6(e,l,m.get);u.parser=g;var v=new ff(e,Bo(e),m.fetchDisplayName,o),C=new TP(e),w=new Gk(e),S=new dD(e,C,w),A=new t_(e,C,w),E=new RD(e,l),I=new D_(e,c,p,A,g,s,u,o,E),V=new tk(e,I);u.undoRedo=V;var O=new s_(e,c,I),k=new ak(e,I,V,O,c,p,g,A,u,o);a.forEach(function(B){k.ensureItIsPossibleToAddNamedExpression(B.name,B.expression,B.scope),k.operations.addNamedExpression(B.name,B.expression,B.scope,B.options)});var M=new fk(e,o,m.fetchDisplayName,u),L=new Kk(c,v,M),G=new Rk(e,c,p,s,S,l,o,L,E,C);s.measure(oe.GRAPH_BUILD,function(){var B=new bk(c,p,g,A,s,E);B.buildGraph(r,s)});var K=new lk(e,s,G,u,c,p);return K.run(),s.end(oe.BUILD_ENGINE_TOTAL),{config:e,stats:s,dependencyGraph:c,columnSearch:p,parser:g,unparser:v,cellContentParser:A,evaluator:K,lazilyTransformingAstService:u,crudOperations:k,exporter:M,namedExpressions:o,serialization:L,functionRegistry:l}}},{key:"buildFromSheets",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=new qi(r);return this.buildEngine(s,e,a)}},{key:"buildFromSheet",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],s=new qi(r),o=s.translationPackage.getUITranslation(_s.NEW_SHEET_PREFIX)+"1";return this.buildEngine(s,Tue({},o,e),a)}},{key:"buildEmpty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return this.buildEngine(new qi(e),{},r)}},{key:"rebuildWithConfig",value:function(e,r,a,s){return this.buildEngine(e,r,a,s)}}]),i}();var Sue=ce(),Aue=$6().entries;Sue({target:"Object",stat:!0},{entries:function(t){return Aue(t)}});var kXe=j(q());function wue(i,t){return Vue(i)||Rue(i,t)||Eue(i,t)||xue()}function xue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eue(i,t){if(!!i){if(typeof i=="string")return Yk(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Yk(i,t)}}function Yk(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Rue(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function Vue(i){if(Array.isArray(i))return i}function Zk(i){for(var t=0,e=Object.entries(i);t<e.length;t++){var r=wue(e[t],2),a=r[0],s=r[1];s instanceof Function?i[a]=Iue(s):delete i[a]}}function Iue(i){return function(){throw new Error('The "'.concat(i,'" method cannot be called because this HyperFormula instance has been destroyed'))}}var JXe=j(q());var eF=j(Jk());function Vg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vg=function(e){return typeof e}:Vg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vg(i)}function Oue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function Qk(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Due(i,t,e){return t&&Qk(i.prototype,t),e&&Qk(i,e),i}function Ig(i,t,e){return typeof Reflect!="undefined"&&Reflect.get?Ig=Reflect.get:Ig=function(a,s,o){var l=Pue(a,s);if(!!l){var u=Object.getOwnPropertyDescriptor(l,s);return u.get?u.get.call(o):u.value}},Ig(i,t,e||i)}function Pue(i,t){for(;!Object.prototype.hasOwnProperty.call(i,t)&&(i=Sc(i),i!==null););return i}function _ue(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&$S(i,t)}function $S(i,t){return $S=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},$S(i,t)}function kue(i){var t=jue();return function(){var r=Sc(i),a;if(t){var s=Sc(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Fue(this,a)}}function Fue(i,t){if(t&&(Vg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mue(i)}function Mue(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Sc(i){return Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Sc(i)}var fi;(function(i){i.SheetAdded="sheetAdded",i.SheetRemoved="sheetRemoved",i.SheetRenamed="sheetRenamed",i.NamedExpressionAdded="namedExpressionAdded",i.NamedExpressionRemoved="namedExpressionRemoved",i.ValuesUpdated="valuesUpdated",i.EvaluationSuspended="evaluationSuspended",i.EvaluationResumed="evaluationResumed"})(fi||(fi={}));var tF=function(i){_ue(e,i);var t=kue(e);function e(){return Oue(this,e),t.apply(this,arguments)}return Due(e,[{key:"emit",value:function(a){for(var s,o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];return(s=Ig(Sc(e.prototype),"emit",this)).call.apply(s,[this,a].concat(l)),this}}]),e}(eF.TinyEmitter);function Og(i){return Uue(i)||Lue(i)||rF(i)||Bue()}function Bue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lue(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Uue(i){if(Array.isArray(i))return KS(i)}function zue(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=rF(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function rF(i,t){if(!!i){if(typeof i=="string")return KS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return KS(i,t)}}function KS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Hue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function nF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Gue(i,t,e){return t&&nF(i.prototype,t),e&&nF(i,e),i}var Jt=function(){function i(t,e,r,a,s,o,l,u,c,p,m,f,d,h){Hue(this,i),this._config=t,this._stats=e,this._dependencyGraph=r,this._columnSearch=a,this._parser=s,this._unparser=o,this._cellContentParser=l,this._evaluator=u,this._lazilyTransformingAstService=c,this._crudOperations=p,this._exporter=m,this._namedExpressions=f,this._serialization=d,this._functionRegistry=h,this._emitter=new tF,this._evaluationSuspended=!1}return Gue(i,[{key:"graph",get:function(){return this.dependencyGraph.graph}},{key:"rangeMapping",get:function(){return this.dependencyGraph.rangeMapping}},{key:"arrayMapping",get:function(){return this.dependencyGraph.arrayMapping}},{key:"sheetMapping",get:function(){return this.dependencyGraph.sheetMapping}},{key:"addressMapping",get:function(){return this.dependencyGraph.addressMapping}},{key:"dependencyGraph",get:function(){return this._dependencyGraph}},{key:"evaluator",get:function(){return this._evaluator}},{key:"columnSearch",get:function(){return this._columnSearch}},{key:"lazilyTransformingAstService",get:function(){return this._lazilyTransformingAstService}},{key:"licenseKeyValidityState",get:function(){return this._config.licenseKeyValidityState}},{key:"getCellValue",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");return this.ensureEvaluationIsNotSuspended(),this._serialization.getCellValue(e)}},{key:"ensureEvaluationIsNotSuspended",value:function(){if(this._evaluationSuspended)throw new hy}},{key:"getCellFormula",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");return this._serialization.getCellFormula(e)}},{key:"getCellSerialized",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");return this.ensureEvaluationIsNotSuspended(),this._serialization.getCellSerialized(e)}},{key:"getSheetValues",value:function(e){return X(e,"number","sheetId"),this.ensureEvaluationIsNotSuspended(),this._serialization.getSheetValues(e)}},{key:"getSheetFormulas",value:function(e){return X(e,"number","sheetId"),this._serialization.getSheetFormulas(e)}},{key:"getSheetSerialized",value:function(e){return X(e,"number","sheetId"),this.ensureEvaluationIsNotSuspended(),this._serialization.getSheetSerialized(e)}},{key:"getAllSheetsDimensions",value:function(){var e=this;return this._serialization.genericAllSheetsGetter(function(r){return e.getSheetDimensions(r)})}},{key:"getSheetDimensions",value:function(e){return X(e,"number","sheetId"),{width:this.dependencyGraph.getSheetWidth(e),height:this.dependencyGraph.getSheetHeight(e)}}},{key:"getAllSheetsValues",value:function(){return this.ensureEvaluationIsNotSuspended(),this._serialization.getAllSheetsValues()}},{key:"getAllSheetsFormulas",value:function(){return this._serialization.getAllSheetsFormulas()}},{key:"getAllSheetsSerialized",value:function(){return this.ensureEvaluationIsNotSuspended(),this._serialization.getAllSheetsSerialized()}},{key:"updateConfig",value:function(e){var r=this._config.mergeConfig(e),a=this._config.mergeConfig({language:e.language}),s=this._serialization.withNewConfig(a,this._namedExpressions).getAllSheetsSerialized(),o=this._serialization.getAllNamedExpressionsSerialized(),l=Bf.rebuildWithConfig(r,s,o,this._stats);this._config=l.config,this._stats=l.stats,this._dependencyGraph=l.dependencyGraph,this._columnSearch=l.columnSearch,this._parser=l.parser,this._unparser=l.unparser,this._cellContentParser=l.cellContentParser,this._evaluator=l.evaluator,this._lazilyTransformingAstService=l.lazilyTransformingAstService,this._crudOperations=l.crudOperations,this._exporter=l.exporter,this._namedExpressions=l.namedExpressions,this._serialization=l.serialization,this._functionRegistry=l.functionRegistry}},{key:"getConfig",value:function(){return this._config.getConfig()}},{key:"rebuildAndRecalculate",value:function(){this.updateConfig({})}},{key:"getStats",value:function(){return this._stats.snapshot()}},{key:"undo",value:function(){return this._crudOperations.undo(),this.recomputeIfDependencyGraphNeedsIt()}},{key:"redo",value:function(){return this._crudOperations.redo(),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isThereSomethingToUndo",value:function(){return this._crudOperations.isThereSomethingToUndo()}},{key:"isThereSomethingToRedo",value:function(){return this._crudOperations.isThereSomethingToRedo()}},{key:"isItPossibleToSetCellContents",value:function(e){var r;if(ft(e))r=new ae(e,e);else if(un(e))r=new ae(e.start,e.end);else throw new Re("SimpleCellAddress | SimpleCellRange","address");try{this._crudOperations.ensureRangeInSizeLimits(r);var a=zue(r.addresses(this._dependencyGraph)),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;this._crudOperations.ensureItIsPossibleToChangeContent(o)}}catch(l){a.e(l)}finally{a.f()}}catch(l){return!1}return!0}},{key:"setCellContents",value:function(e,r){return this._crudOperations.setCellContents(e,r),this.recomputeIfDependencyGraphNeedsIt()}},{key:"swapRowIndexes",value:function(e,r){return X(e,"number","sheetId"),this._crudOperations.setRowOrder(e,r),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToSwapRowIndexes",value:function(e,r){X(e,"number","sheetId");try{return this._crudOperations.validateSwapRowIndexes(e,r),this._crudOperations.testRowOrderForArrays(e,r),!0}catch(a){return!1}}},{key:"setRowOrder",value:function(e,r){X(e,"number","sheetId");var a=this._crudOperations.mappingFromOrder(e,r,"row");return this.swapRowIndexes(e,a)}},{key:"isItPossibleToSetRowOrder",value:function(e,r){X(e,"number","sheetId");try{var a=this._crudOperations.mappingFromOrder(e,r,"row");return this._crudOperations.validateSwapRowIndexes(e,a),this._crudOperations.testRowOrderForArrays(e,a),!0}catch(s){return!1}}},{key:"swapColumnIndexes",value:function(e,r){return X(e,"number","sheetId"),this._crudOperations.setColumnOrder(e,r),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToSwapColumnIndexes",value:function(e,r){X(e,"number","sheetId");try{return this._crudOperations.validateSwapColumnIndexes(e,r),this._crudOperations.testColumnOrderForArrays(e,r),!0}catch(a){return!1}}},{key:"setColumnOrder",value:function(e,r){X(e,"number","sheetId");var a=this._crudOperations.mappingFromOrder(e,r,"column");return this.swapColumnIndexes(e,a)}},{key:"isItPossibleToSetColumnOrder",value:function(e,r){X(e,"number","sheetId");try{var a=this._crudOperations.mappingFromOrder(e,r,"column");return this._crudOperations.validateSwapColumnIndexes(e,a),this._crudOperations.testColumnOrderForArrays(e,a),!0}catch(s){return!1}}},{key:"isItPossibleToAddRows",value:function(e){X(e,"number","sheetId");for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=jf(a);try{var l;return(l=this._crudOperations).ensureItIsPossibleToAddRows.apply(l,[e].concat(Og(o))),!0}catch(u){return!1}}},{key:"addRows",value:function(e){var r;X(e,"number","sheetId");for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return(r=this._crudOperations).addRows.apply(r,[e].concat(s)),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToRemoveRows",value:function(e){X(e,"number","sheetId");for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=Mf(a);try{var l;return(l=this._crudOperations).ensureItIsPossibleToRemoveRows.apply(l,[e].concat(Og(o))),!0}catch(u){return!1}}},{key:"removeRows",value:function(e){var r;X(e,"number","sheetId");for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return(r=this._crudOperations).removeRows.apply(r,[e].concat(s)),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToAddColumns",value:function(e){X(e,"number","sheetId");for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=jf(a);try{var l;return(l=this._crudOperations).ensureItIsPossibleToAddColumns.apply(l,[e].concat(Og(o))),!0}catch(u){return!1}}},{key:"addColumns",value:function(e){var r;X(e,"number","sheetId");for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return(r=this._crudOperations).addColumns.apply(r,[e].concat(s)),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToRemoveColumns",value:function(e){X(e,"number","sheetId");for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];var o=Mf(a);try{var l;return(l=this._crudOperations).ensureItIsPossibleToRemoveColumns.apply(l,[e].concat(Og(o))),!0}catch(u){return!1}}},{key:"removeColumns",value:function(e){var r;X(e,"number","sheetId");for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return(r=this._crudOperations).removeColumns.apply(r,[e].concat(s)),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToMoveCells",value:function(e,r){if(!ft(r))throw new Re("SimpleCellAddress","destinationLeftCorner");if(!un(e))throw new Re("SimpleCellRange","source");try{var a=new ae(e.start,e.end);return this._crudOperations.operations.ensureItIsPossibleToMoveCells(a.start,a.width(),a.height(),r),!0}catch(s){return!1}}},{key:"moveCells",value:function(e,r){if(!ft(r))throw new Re("SimpleCellAddress","destinationLeftCorner");if(!un(e))throw new Re("SimpleCellRange","source");var a=new ae(e.start,e.end);return this._crudOperations.moveCells(a.start,a.width(),a.height(),r),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToMoveRows",value:function(e,r,a,s){X(e,"number","sheetId"),X(r,"number","startRow"),X(a,"number","numberOfRows"),X(s,"number","targetRow");try{return this._crudOperations.ensureItIsPossibleToMoveRows(e,r,a,s),!0}catch(o){return!1}}},{key:"moveRows",value:function(e,r,a,s){return X(e,"number","sheetId"),X(r,"number","startRow"),X(a,"number","numberOfRows"),X(s,"number","targetRow"),this._crudOperations.moveRows(e,r,a,s),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToMoveColumns",value:function(e,r,a,s){X(e,"number","sheetId"),X(r,"number","startColumn"),X(a,"number","numberOfColumns"),X(s,"number","targetColumn");try{return this._crudOperations.ensureItIsPossibleToMoveColumns(e,r,a,s),!0}catch(o){return!1}}},{key:"moveColumns",value:function(e,r,a,s){return X(e,"number","sheetId"),X(r,"number","startColumn"),X(a,"number","numberOfColumns"),X(s,"number","targetColumn"),this._crudOperations.moveColumns(e,r,a,s),this.recomputeIfDependencyGraphNeedsIt()}},{key:"copy",value:function(e){if(!un(e))throw new Re("SimpleCellRange","source");var r=new ae(e.start,e.end);return this._crudOperations.copy(r.start,r.width(),r.height()),this.getRangeValues(e)}},{key:"cut",value:function(e){if(!un(e))throw new Re("SimpleCellRange","source");var r=new ae(e.start,e.end);return this._crudOperations.cut(r.start,r.width(),r.height()),this.getRangeValues(e)}},{key:"paste",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","targetLeftCorner");return this.ensureEvaluationIsNotSuspended(),this._crudOperations.paste(e),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isClipboardEmpty",value:function(){return this._crudOperations.isClipboardEmpty()}},{key:"clearClipboard",value:function(){this._crudOperations.clearClipboard()}},{key:"clearRedoStack",value:function(){this._crudOperations.undoRedo.clearRedoStack()}},{key:"clearUndoStack",value:function(){this._crudOperations.undoRedo.clearUndoStack()}},{key:"getRangeValues",value:function(e){var r=this;if(!un(e))throw new Re("SimpleCellRange","source");var a=new ae(e.start,e.end);return a.arrayOfAddressesInRange().map(function(s){return s.map(function(o){return r.getCellValue(o)})})}},{key:"getRangeFormulas",value:function(e){var r=this;if(!un(e))throw new Re("SimpleCellRange","source");var a=new ae(e.start,e.end);return a.arrayOfAddressesInRange().map(function(s){return s.map(function(o){return r.getCellFormula(o)})})}},{key:"getRangeSerialized",value:function(e){var r=this;if(!un(e))throw new Re("SimpleCellRange","source");var a=new ae(e.start,e.end);return a.arrayOfAddressesInRange().map(function(s){return s.map(function(o){return r.getCellSerialized(o)})})}},{key:"getFillRangeData",value:function(e,r){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!un(e))throw new Re("SimpleCellRange","source");if(!un(r))throw new Re("SimpleCellRange","target");var o=new ae(e.start,e.end),l=new ae(r.start,r.end);if(o.sheet!==l.sheet)throw new Cs(o.sheet,l.sheet);return this.ensureEvaluationIsNotSuspended(),l.arrayOfAddressesInRange().map(function(u){return u.map(function(c){var p=((c.row-(s?r:e).start.row)%o.height()+o.height())%o.height()+e.start.row,m=((c.col-(s?r:e).start.col)%o.width()+o.width())%o.width()+e.start.col;return a._serialization.getCellSerialized({row:p,col:m,sheet:l.sheet},c)})})}},{key:"isItPossibleToAddSheet",value:function(e){X(e,"string","sheetName");try{return this._crudOperations.ensureItIsPossibleToAddSheet(e),!0}catch(r){return!1}}},{key:"addSheet",value:function(e){e!==void 0&&X(e,"string","sheetName");var r=this._crudOperations.addSheet(e);return this._emitter.emit(fi.SheetAdded,r),r}},{key:"isItPossibleToRemoveSheet",value:function(e){X(e,"number","sheetId");try{return this._crudOperations.ensureScopeIdIsValid(e),!0}catch(r){return!1}}},{key:"removeSheet",value:function(e){X(e,"number","sheetId");var r=this.sheetMapping.getDisplayName(e);this._crudOperations.removeSheet(e);var a=this.recomputeIfDependencyGraphNeedsIt();return this._emitter.emit(fi.SheetRemoved,r,a),a}},{key:"isItPossibleToClearSheet",value:function(e){X(e,"number","sheetId");try{return this._crudOperations.ensureScopeIdIsValid(e),!0}catch(r){return!1}}},{key:"clearSheet",value:function(e){return X(e,"number","sheetId"),this._crudOperations.clearSheet(e),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToReplaceSheetContent",value:function(e,r){X(e,"number","sheetId");try{return this._crudOperations.ensureScopeIdIsValid(e),this._crudOperations.ensureItIsPossibleToChangeSheetContents(e,r),!0}catch(a){return!1}}},{key:"setSheetContent",value:function(e,r){return X(e,"number","sheetId"),this._crudOperations.setSheetContent(e,r),this.recomputeIfDependencyGraphNeedsIt()}},{key:"simpleCellAddressFromString",value:function(e,r){return X(e,"string","cellAddress"),X(r,"number","sheetId"),pf(this.sheetMapping.get,e,r)}},{key:"simpleCellRangeFromString",value:function(e,r){return X(e,"string","cellRange"),X(r,"number","sheetId"),r6(this.sheetMapping.get,e,r)}},{key:"simpleCellAddressToString",value:function(e,r){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");return X(r,"number","sheetId"),Lo(this.sheetMapping.fetchDisplayName,e,r)}},{key:"simpleCellRangeToString",value:function(e,r){if(!un(e))throw new Re("SimpleCellRange","cellRange");return X(r,"number","sheetId"),n6(this.sheetMapping.fetchDisplayName,e,r)}},{key:"getCellDependents",value:function(e){var r;if(ft(e))r=this._dependencyGraph.addressMapping.getCell(e);else if(un(e))r=this._dependencyGraph.rangeMapping.getRange(e.start,e.end);else throw new Re("SimpleCellAddress | SimpleCellRange",e);return r===void 0?[]:this._dependencyGraph.getAdjacentNodesAddresses(r)}},{key:"getCellPrecedents",value:function(e){var r;if(ft(e))r=this._dependencyGraph.addressMapping.getCell(e);else if(un(e))r=this._dependencyGraph.rangeMapping.getRange(e.start,e.end);else throw new Re("SimpleCellAddress | SimpleCellRange",e);return r===void 0?[]:this._dependencyGraph.dependencyQueryAddresses(r)}},{key:"getSheetName",value:function(e){return X(e,"number","sheetId"),this.sheetMapping.getDisplayName(e)}},{key:"getSheetNames",value:function(){return this.sheetMapping.sheetNames()}},{key:"getSheetId",value:function(e){return X(e,"string","sheetName"),this.sheetMapping.get(e)}},{key:"doesSheetExist",value:function(e){return X(e,"string","sheetName"),this.sheetMapping.hasSheetWithName(e)}},{key:"getCellType",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");var r=this.dependencyGraph.getCell(e);return G9(r,e)}},{key:"doesCellHaveSimpleValue",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");return this.getCellType(e)===Fr.VALUE}},{key:"doesCellHaveFormula",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");var r=this.getCellType(e);return r===Fr.FORMULA||r===Fr.ARRAYFORMULA}},{key:"isCellEmpty",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");return this.getCellType(e)===Fr.EMPTY}},{key:"isCellPartOfArray",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");var r=this.getCellType(e);return r===Fr.ARRAY||r===Fr.ARRAYFORMULA}},{key:"getCellValueType",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");this.ensureEvaluationIsNotSuspended();var r=this.dependencyGraph.getCellValue(e);return fc(r)}},{key:"getCellValueDetailedType",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");this.ensureEvaluationIsNotSuspended();var r=this.dependencyGraph.getCellValue(e);return W9(r)}},{key:"getCellValueFormat",value:function(e){if(!ft(e))throw new Re("SimpleCellAddress","cellAddress");this.ensureEvaluationIsNotSuspended();var r=this.dependencyGraph.getCellValue(e);return $9(r)}},{key:"countSheets",value:function(){return this.sheetMapping.numberOfSheets()}},{key:"isItPossibleToRenameSheet",value:function(e,r){X(e,"number","sheetId"),X(r,"string","newName");try{return this._crudOperations.ensureItIsPossibleToRenameSheet(e,r),!0}catch(a){return!1}}},{key:"renameSheet",value:function(e,r){X(e,"number","sheetId"),X(r,"string","newName");var a=this._crudOperations.renameSheet(e,r);a!==void 0&&this._emitter.emit(fi.SheetRenamed,a,r)}},{key:"batch",value:function(e){this.suspendEvaluation(),this._crudOperations.beginUndoRedoBatchMode();try{e()}catch(r){throw this._crudOperations.commitUndoRedoBatchMode(),this.resumeEvaluation(),r}return this._crudOperations.commitUndoRedoBatchMode(),this.resumeEvaluation()}},{key:"suspendEvaluation",value:function(){this._evaluationSuspended=!0,this._emitter.emit(fi.EvaluationSuspended)}},{key:"resumeEvaluation",value:function(){this._evaluationSuspended=!1;var e=this.recomputeIfDependencyGraphNeedsIt();return this._emitter.emit(fi.EvaluationResumed,e),e}},{key:"isEvaluationSuspended",value:function(){return this._evaluationSuspended}},{key:"isItPossibleToAddNamedExpression",value:function(e,r,a){X(e,"string","expressionName"),a!==void 0&&X(a,"number","scope");try{return this._crudOperations.ensureItIsPossibleToAddNamedExpression(e,r,a),!0}catch(s){return!1}}},{key:"addNamedExpression",value:function(e,r,a,s){X(e,"string","expressionName"),a!==void 0&&X(a,"number","scope"),this._crudOperations.addNamedExpression(e,r,a,s);var o=this.recomputeIfDependencyGraphNeedsIt();return this._emitter.emit(fi.NamedExpressionAdded,e,o),o}},{key:"getNamedExpressionValue",value:function(e,r){X(e,"string","expressionName"),r!==void 0&&X(r,"number","scope"),this.ensureEvaluationIsNotSuspended(),this._crudOperations.ensureScopeIdIsValid(r);var a=this._namedExpressions.namedExpressionForScope(e,r);if(a)return this._serialization.getCellValue(a.address)}},{key:"getNamedExpressionFormula",value:function(e,r){X(e,"string","expressionName"),r!==void 0&&X(r,"number","scope"),this._crudOperations.ensureScopeIdIsValid(r);var a=this._namedExpressions.namedExpressionForScope(e,r);if(a!==void 0)return this._serialization.getCellFormula(a.address)}},{key:"getNamedExpression",value:function(e,r){X(e,"string","expressionName"),r!==void 0&&X(r,"number","scope");var a=this._namedExpressions.namedExpressionForScope(e,r);if(a!==void 0){var s=this._serialization.getCellFormula(a.address);return{name:e,scope:r,expression:s,options:a.options}}}},{key:"isItPossibleToChangeNamedExpression",value:function(e,r,a){X(e,"string","expressionName"),a!==void 0&&X(a,"number","scope");try{return this._crudOperations.ensureItIsPossibleToChangeNamedExpression(e,r,a),!0}catch(s){return!1}}},{key:"changeNamedExpression",value:function(e,r,a,s){return X(e,"string","expressionName"),a!==void 0&&X(a,"number","scope"),this._crudOperations.changeNamedExpressionExpression(e,a,r,s),this.recomputeIfDependencyGraphNeedsIt()}},{key:"isItPossibleToRemoveNamedExpression",value:function(e,r){X(e,"string","expressionName"),r!==void 0&&X(r,"number","scope");try{return this._crudOperations.isItPossibleToRemoveNamedExpression(e,r),!0}catch(a){return!1}}},{key:"removeNamedExpression",value:function(e,r){X(e,"string","expressionName"),r!==void 0&&X(r,"number","scope");var a=this._crudOperations.removeNamedExpression(e,r);if(a){var s=this.recomputeIfDependencyGraphNeedsIt();return this._emitter.emit(fi.NamedExpressionRemoved,a.displayName,s),s}else return[]}},{key:"listNamedExpressions",value:function(e){return e!==void 0&&X(e,"number","scope"),this._crudOperations.ensureScopeIdIsValid(e),this._namedExpressions.getAllNamedExpressionsNamesInScope(e)}},{key:"getAllNamedExpressionsSerialized",value:function(){return this._serialization.getAllNamedExpressionsSerialized()}},{key:"normalizeFormula",value:function(e){X(e,"string","formulaString");var r=this.extractTemporaryFormula(e),a=r.ast,s=r.address;if(a===void 0)throw new Bm;return this._unparser.unparse(a,s)}},{key:"calculateFormula",value:function(e,r){X(e,"string","formulaString"),X(r,"number","sheetId"),this._crudOperations.ensureScopeIdIsValid(r);var a=this.extractTemporaryFormula(e,r),s=a.ast,o=a.address,l=a.dependencies;if(s===void 0)throw new Bm;var u=this.evaluator.runAndForget(s,o,l);return this._exporter.exportScalarOrRange(u)}},{key:"validateFormula",value:function(e){X(e,"string","formulaString");var r=this.extractTemporaryFormula(e),a=r.ast;return!(a===void 0||a.type===P.ERROR&&!a.error)}},{key:"getRegisteredFunctionNames",value:function(){var e=i.getLanguage(this._config.language);return e.getFunctionTranslations(this._functionRegistry.getRegisteredFunctionIds())}},{key:"getFunctionPlugin",value:function(e){return X(e,"string","functionId"),this._functionRegistry.getFunctionPlugin(e)}},{key:"getAllFunctionPlugins",value:function(){return this._functionRegistry.getPlugins()}},{key:"numberToDateTime",value:function(e){return X(e,"number","val"),this._evaluator.interpreter.dateTimeHelper.numberToSimpleDateTime(e)}},{key:"numberToDate",value:function(e){return X(e,"number","val"),this._evaluator.interpreter.dateTimeHelper.numberToSimpleDate(e)}},{key:"numberToTime",value:function(e){return X(e,"number","val"),Ma(e)}},{key:"extractTemporaryFormula",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,a=this._cellContentParser.parse(e),s={sheet:r,col:0,row:0};if(!(a instanceof Ke.Formula))return{address:s,dependencies:[]};var o=this._parser.parse(a.formula,s),l=o.ast,u=o.errors,c=o.dependencies;return u.length>0?{address:s,dependencies:[]}:{ast:l,address:s,dependencies:c}}},{key:"on",value:function(e,r){this._emitter.on(e,r)}},{key:"once",value:function(e,r){this._emitter.once(e,r)}},{key:"off",value:function(e,r){this._emitter.off(e,r)}},{key:"destroy",value:function(){this._evaluator.interpreter.destroyGpu(),Zk(this)}},{key:"recomputeIfDependencyGraphNeedsIt",value:function(){if(this._evaluationSuspended)return[];var e=this._crudOperations.getAndClearContentChanges(),r=Array.from(this.dependencyGraph.verticesToRecompute());this.dependencyGraph.clearRecentlyChangedVertices(),r.length>0&&e.addAll(this.evaluator.partialRun(r));var a=e.exportChanges(this._exporter);return e.isEmpty()||this._emitter.emit(fi.ValuesUpdated,a),a}}],[{key:"buildFromEngineState",value:function(e){return new i(e.config,e.stats,e.dependencyGraph,e.columnSearch,e.parser,e.unparser,e.cellContentParser,e.evaluator,e.lazilyTransformingAstService,e.crudOperations,e.exporter,e.namedExpressions,e.serialization,e.functionRegistry)}},{key:"buildFromArray",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this.buildFromEngineState(Bf.buildFromSheet(e,r,a))}},{key:"buildFromSheets",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this.buildFromEngineState(Bf.buildFromSheets(e,r,a))}},{key:"buildEmpty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return this.buildFromEngineState(Bf.buildEmpty(e,r))}},{key:"getLanguage",value:function(e){X(e,"string","languageCode");var r=this.registeredLanguages.get(e);if(r===void 0)throw new Lm;return r}},{key:"registerLanguage",value:function(e,r){if(X(e,"string","languageCode"),this.registeredLanguages.has(e))throw new by;this.registeredLanguages.set(e,K6(r))}},{key:"unregisterLanguage",value:function(e){if(X(e,"string","languageCode"),this.registeredLanguages.has(e))this.registeredLanguages.delete(e);else throw new Lm}},{key:"getRegisteredLanguagesCodes",value:function(){return Array.from(this.registeredLanguages.keys())}},{key:"registerFunctionPlugin",value:function(e,r){Zr.registerFunctionPlugin(e,r)}},{key:"unregisterFunctionPlugin",value:function(e){Zr.unregisterFunctionPlugin(e)}},{key:"registerFunction",value:function(e,r,a){X(e,"string","functionId"),Zr.registerFunction(e,r,a)}},{key:"unregisterFunction",value:function(e){X(e,"string","functionId"),Zr.unregisterFunction(e)}},{key:"unregisterAllFunctions",value:function(){Zr.unregisterAll()}},{key:"getRegisteredFunctionNames",value:function(e){X(e,"string","code");var r=Zr.getRegisteredFunctionIds(),a=this.getLanguage(e);return a.getFunctionTranslations(r)}},{key:"getFunctionPlugin",value:function(e){return X(e,"string","functionId"),Zr.getFunctionPlugin(e)}},{key:"getAllFunctionPlugins",value:function(){return Zr.getPlugins()}}]),i}();Jt.version="1.2.0";Jt.buildDate="23/09/2021 13:29:51";Jt.releaseDate="23/09/2021";Jt.languages={};Jt.registeredLanguages=new Map;function Lf(i){return Kue(i)||$ue(i)||Wue(i)||que()}function que(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wue(i,t){if(!!i){if(typeof i=="string")return XS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return XS(i,t)}}function $ue(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Kue(i){if(Array.isArray(i))return XS(i)}function XS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Xue(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function iF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Yue(i,t,e){return t&&iF(i.prototype,t),e&&iF(i,e),i}var Zue=["gpu","cpu","dev"],aF=new WeakMap,qi=function(){function i(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.accentSensitive,r=t.binarySearchThreshold,a=t.caseSensitive,s=t.caseFirst,o=t.chooseAddressMappingPolicy,l=t.currencySymbol,u=t.dateFormats,c=t.decimalSeparator,p=t.evaluateNullToZero,m=t.functionArgSeparator,f=t.functionPlugins,d=t.gpujs,h=t.gpuMode,y=t.ignorePunctuation,b=t.leapYear1900,g=t.localeLang,v=t.language,C=t.licenseKey,w=t.matchWholeCell,S=t.arrayColumnSeparator,A=t.arrayRowSeparator,E=t.maxRows,I=t.maxColumns,V=t.nullYear,O=t.nullDate,k=t.parseDateTime,M=t.precisionEpsilon,L=t.precisionRounding,G=t.stringifyDateTime,K=t.stringifyDuration,B=t.smartRounding,_=t.timeFormats,F=t.thousandSeparator,z=t.useArrayArithmetic,H=t.useStats,ie=t.undoLimit,fe=t.useColumnIndex,we=t.useRegularExpressions,Ne=t.useWildcards;Xue(this,i),this.useArrayArithmetic=Fe(z,"boolean","useArrayArithmetic"),this.accentSensitive=Fe(e,"boolean","accentSensitive"),this.caseSensitive=Fe(a,"boolean","caseSensitive"),this.caseFirst=Fe(s,["upper","lower","false"],"caseFirst"),this.ignorePunctuation=Fe(y,"boolean","ignorePunctuation"),this.chooseAddressMappingPolicy=o??i.defaultConfig.chooseAddressMappingPolicy,this.dateFormats=Lf(If(u,Array.isArray,"array","dateFormats")),this.timeFormats=Lf(If(_,Array.isArray,"array","timeFormats")),this.functionArgSeparator=Fe(m,"string","functionArgSeparator"),this.decimalSeparator=Fe(c,[".",","],"decimalSeparator"),this.language=Fe(v,"string","language"),this.licenseKey=Fe(C,"string","licenseKey"),this.thousandSeparator=Fe(F,["",","," ","."],"thousandSeparator"),this.arrayColumnSeparator=Fe(S,[",",";"],"arrayColumnSeparator"),this.arrayRowSeparator=Fe(A,[";","|"],"arrayRowSeparator"),this.localeLang=Fe(g,"string","localeLang"),this.functionPlugins=Lf(f??i.defaultConfig.functionPlugins),this.gpujs=d??i.defaultConfig.gpujs,this.gpuMode=Fe(h,Zue,"gpuMode"),this.smartRounding=Fe(B,"boolean","smartRounding"),this.evaluateNullToZero=Fe(p,"boolean","evaluateNullToZero"),this.nullYear=Fe(V,"number","nullYear"),Fs(this.nullYear,"nullYear",0),cP(this.nullYear,"nullYear",100),this.precisionRounding=Fe(L,"number","precisionRounding"),Fs(this.precisionRounding,"precisionRounding",0),this.precisionEpsilon=Fe(M,"number","precisionEpsilon"),Fs(this.precisionEpsilon,"precisionEpsilon",0),this.useColumnIndex=Fe(fe,"boolean","useColumnIndex"),this.useStats=Fe(H,"boolean","useStats"),this.binarySearchThreshold=Fe(r,"number","binarySearchThreshold"),Fs(this.binarySearchThreshold,"binarySearchThreshold",1),this.parseDateTime=Fe(k,"function","parseDateTime"),this.stringifyDateTime=Fe(G,"function","stringifyDateTime"),this.stringifyDuration=Fe(K,"function","stringifyDuration"),this.translationPackage=Jt.getLanguage(this.language),this.errorMapping=this.translationPackage.buildErrorMapping(),this.nullDate=If(O,qo,"IDate","nullDate"),this.leapYear1900=Fe(b,"boolean","leapYear1900"),this.undoLimit=Fe(ie,"number","undoLimit"),this.useRegularExpressions=Fe(we,"boolean","useRegularExpressions"),this.useWildcards=Fe(Ne,"boolean","useWildcards"),this.matchWholeCell=Fe(w,"boolean","matchWholeCell"),Fs(this.undoLimit,"undoLimit",0),this.maxRows=Fe(E,"number","maxRows"),Fs(this.maxRows,"maxRows",1),this.maxColumns=Fe(I,"number","maxColumns"),this.currencySymbol=Lf(If(l,Array.isArray,"array","currencySymbol")),this.currencySymbol.forEach(function(ve){if(typeof ve!="string")throw new Re("string[]","currencySymbol");if(ve==="")throw new I4("currencySymbol")}),Fs(this.maxColumns,"maxColumns",1),this.warnDeprecatedIfUsed(r,"binarySearchThreshold","1.1"),this.warnDeprecatedIfUsed(d,"gpujs","1.2"),h!==i.defaultConfig.gpuMode&&this.warnDeprecatedIfUsed(h,"gpuMode","1.2"),aF.set(this,{licenseKeyValidityState:YP(this.licenseKey)}),uS({value:this.decimalSeparator,name:"decimalSeparator"},{value:this.functionArgSeparator,name:"functionArgSeparator"},{value:this.thousandSeparator,name:"thousandSeparator"}),uS({value:this.arrayRowSeparator,name:"arrayRowSeparator"},{value:this.arrayColumnSeparator,name:"arrayColumnSeparator"})}return Yue(i,[{key:"licenseKeyValidityState",get:function(){return aF.get(this).licenseKeyValidityState}},{key:"getConfig",value:function(){var e={};for(var r in i.defaultConfig){var a=this[r];Array.isArray(a)?e[r]=Lf(a):e[r]=a}return e}},{key:"mergeConfig",value:function(e){var r=Object.assign({},this.getConfig(),e);return new i(r)}},{key:"warnDeprecatedIfUsed",value:function(e,r,a,s){e!==void 0&&console.warn(s===void 0?"".concat(r," option is deprecated since ").concat(a):"".concat(r," option is deprecated since ").concat(a,", please use ").concat(s))}}]),i}();qi.defaultConfig={accentSensitive:!1,binarySearchThreshold:20,currencySymbol:["$"],caseSensitive:!1,caseFirst:"lower",chooseAddressMappingPolicy:new dS,dateFormats:["DD/MM/YYYY","DD/MM/YY"],decimalSeparator:".",evaluateNullToZero:!1,functionArgSeparator:",",functionPlugins:[],gpujs:void 0,gpuMode:"gpu",ignorePunctuation:!1,language:"enGB",licenseKey:"",leapYear1900:!1,localeLang:"en",matchWholeCell:!0,arrayColumnSeparator:",",arrayRowSeparator:";",maxRows:4e4,maxColumns:18278,nullYear:30,nullDate:{year:1899,month:12,day:30},parseDateTime:dP,precisionEpsilon:1e-13,precisionRounding:14,smartRounding:!0,stringifyDateTime:MP,stringifyDuration:FP,timeFormats:["hh:mm","hh:mm:ss.sss"],thousandSeparator:"",undoLimit:20,useRegularExpressions:!1,useWildcards:!0,useColumnIndex:!1,useStats:!1,useArrayArithmetic:!1};var Jue={errors:{CYCLE:"#CYCLE!",DIV_BY_ZERO:"#DIV/0!",ERROR:"#ERROR!",NA:"#N/A",NAME:"#NAME?",NUM:"#NUM!",REF:"#REF!",SPILL:"#SPILL!",VALUE:"#VALUE!"},functions:{FILTER:"FILTER",ARRAY_CONSTRAIN:"ARRAY_CONSTRAIN",ARRAYFORMULA:"ARRAYFORMULA",ABS:"ABS",ACOS:"ACOS",ACOSH:"ACOSH",ACOT:"ACOT",ACOTH:"ACOTH",AND:"AND",ARABIC:"ARABIC",ASIN:"ASIN",ASINH:"ASINH",ATAN2:"ATAN2",ATAN:"ATAN",ATANH:"ATANH",AVERAGE:"AVERAGE",AVERAGEA:"AVERAGEA",AVERAGEIF:"AVERAGEIF",BASE:"BASE",BIN2DEC:"BIN2DEC",BIN2HEX:"BIN2HEX",BIN2OCT:"BIN2OCT",BITAND:"BITAND",BITLSHIFT:"BITLSHIFT",BITOR:"BITOR",BITRSHIFT:"BITRSHIFT",BITXOR:"BITXOR",CEILING:"CEILING",CHAR:"CHAR",CHOOSE:"CHOOSE",CLEAN:"CLEAN",CODE:"CODE",COLUMN:"COLUMN",COLUMNS:"COLUMNS",CONCATENATE:"CONCATENATE",CORREL:"CORREL",COS:"COS",COSH:"COSH",COT:"COT",COTH:"COTH",COUNT:"COUNT",COUNTA:"COUNTA",COUNTBLANK:"COUNTBLANK",COUNTIF:"COUNTIF",COUNTIFS:"COUNTIFS",COUNTUNIQUE:"COUNTUNIQUE",CSC:"CSC",CSCH:"CSCH",CUMIPMT:"CUMIPMT",CUMPRINC:"CUMPRINC",DATE:"DATE",DATEDIF:"DATEDIF",DATEVALUE:"DATEVALUE",DAY:"DAY",DAYS360:"DAYS360",DAYS:"DAYS",DB:"DB",DDB:"DDB",DEC2BIN:"DEC2BIN",DEC2HEX:"DEC2HEX",DEC2OCT:"DEC2OCT",DECIMAL:"DECIMAL",DEGREES:"DEGREES",DELTA:"DELTA",DOLLARDE:"DOLLARDE",DOLLARFR:"DOLLARFR",EDATE:"EDATE",EFFECT:"EFFECT",EOMONTH:"EOMONTH",ERF:"ERF",ERFC:"ERFC",EVEN:"EVEN",EXACT:"EXACT",EXP:"EXP",FALSE:"FALSE",FIND:"FIND",FORMULATEXT:"FORMULATEXT",FV:"FV",FVSCHEDULE:"FVSCHEDULE",HEX2BIN:"HEX2BIN",HEX2DEC:"HEX2DEC",HEX2OCT:"HEX2OCT",HLOOKUP:"HLOOKUP",HOUR:"HOUR",IF:"IF",IFERROR:"IFERROR",IFNA:"IFNA",INDEX:"INDEX",INT:"INT",INTERVAL:"INTERVAL",IPMT:"IPMT",ISBINARY:"ISBINARY",ISBLANK:"ISBLANK",ISERR:"ISERR",ISERROR:"ISERROR",ISEVEN:"ISEVEN",ISFORMULA:"ISFORMULA",ISLOGICAL:"ISLOGICAL",ISNA:"ISNA",ISNONTEXT:"ISNONTEXT",ISNUMBER:"ISNUMBER",ISODD:"ISODD",ISOWEEKNUM:"ISOWEEKNUM",ISPMT:"ISPMT",ISREF:"ISREF",ISTEXT:"ISTEXT",LEFT:"LEFT",LEN:"LEN",LN:"LN",LOG10:"LOG10",LOG:"LOG",LOWER:"LOWER",MATCH:"MATCH",MAX:"MAX",MAXA:"MAXA",MAXPOOL:"MAXPOOL",MEDIAN:"MEDIAN",MEDIANPOOL:"MEDIANPOOL",MID:"MID",MIN:"MIN",MINA:"MINA",MINUTE:"MINUTE",MIRR:"MIRR",MMULT:"MMULT",MOD:"MOD",MONTH:"MONTH",NA:"NA",NETWORKDAYS:"NETWORKDAYS","NETWORKDAYS.INTL":"NETWORKDAYS.INTL",NOMINAL:"NOMINAL",NOT:"NOT",NOW:"NOW",NPER:"NPER",NPV:"NPV",OCT2BIN:"OCT2BIN",OCT2DEC:"OCT2DEC",OCT2HEX:"OCT2HEX",ODD:"ODD",OFFSET:"OFFSET",OR:"OR",PI:"PI",PMT:"PMT",PDURATION:"PDURATION",PRODUCT:"PRODUCT",POWER:"POWER",PPMT:"PPMT",PROPER:"PROPER",PV:"PV",RADIANS:"RADIANS",RAND:"RAND",RATE:"RATE",REPLACE:"REPLACE",REPT:"REPT",RIGHT:"RIGHT",ROMAN:"ROMAN",ROUND:"ROUND",ROUNDDOWN:"ROUNDDOWN",ROUNDUP:"ROUNDUP",ROW:"ROW",ROWS:"ROWS",RRI:"RRI",SEARCH:"SEARCH",SEC:"SEC",SECH:"SECH",SECOND:"SECOND",SHEET:"SHEET",SHEETS:"SHEETS",SIN:"SIN",SINH:"SINH",SLN:"SLN",SPLIT:"SPLIT",SQRT:"SQRT",STDEVA:"STDEVA","STDEV.P":"STDEV.P",STDEVPA:"STDEVPA","STDEV.S":"STDEV.S",SUBSTITUTE:"SUBSTITUTE",SUBTOTAL:"SUBTOTAL",SUM:"SUM",SUMIF:"SUMIF",SUMIFS:"SUMIFS",SUMPRODUCT:"SUMPRODUCT",SUMSQ:"SUMSQ",SWITCH:"SWITCH",SYD:"SYD",T:"T",TAN:"TAN",TANH:"TANH",TBILLEQ:"TBILLEQ",TBILLPRICE:"TBILLPRICE",TBILLYIELD:"TBILLYIELD",TEXT:"TEXT",TIME:"TIME",TIMEVALUE:"TIMEVALUE",TODAY:"TODAY",TRANSPOSE:"TRANSPOSE",TRIM:"TRIM",TRUE:"TRUE",TRUNC:"TRUNC",UNICHAR:"UNICHAR",UNICODE:"UNICODE",UPPER:"UPPER",VARA:"VARA","VAR.P":"VAR.P",VARPA:"VARPA","VAR.S":"VAR.S",VLOOKUP:"VLOOKUP",WEEKDAY:"WEEKDAY",WEEKNUM:"WEEKNUM",WORKDAY:"WORKDAY","WORKDAY.INTL":"WORKDAY.INTL",XNPV:"XNPV",XOR:"XOR",YEAR:"YEAR",YEARFRAC:"YEARFRAC","HF.ADD":"HF.ADD","HF.CONCAT":"HF.CONCAT","HF.DIVIDE":"HF.DIVIDE","HF.EQ":"HF.EQ","HF.GT":"HF.GT","HF.GTE":"HF.GTE","HF.LT":"HF.LT","HF.LTE":"HF.LTE","HF.MINUS":"HF.MINUS","HF.MULTIPLY":"HF.MULTIPLY","HF.NE":"HF.NE","HF.POW":"HF.POW","HF.UMINUS":"HF.UMINUS","HF.UNARY_PERCENT":"HF.UNARY_PERCENT","HF.UPLUS":"HF.UPLUS",VARP:"VARP",VAR:"VAR",STDEVP:"STDEVP",STDEV:"STDEV","EXPON.DIST":"EXPON.DIST",FISHER:"FISHER",FISHERINV:"FISHERINV",GAMMA:"GAMMA","GAMMA.DIST":"GAMMA.DIST",GAMMALN:"GAMMALN","GAMMALN.PRECISE":"GAMMALN.PRECISE","GAMMA.INV":"GAMMA.INV",GAUSS:"GAUSS",FACT:"FACT",FACTDOUBLE:"FACTDOUBLE",COMBIN:"COMBIN",COMBINA:"COMBINA",GCD:"GCD",LCM:"LCM",MROUND:"MROUND",MULTINOMIAL:"MULTINOMIAL",QUOTIENT:"QUOTIENT",RANDBETWEEN:"RANDBETWEEN",SERIESSUM:"SERIESSUM",SIGN:"SIGN",SQRTPI:"SQRTPI",SUMX2MY2:"SUMX2MY2",SUMX2PY2:"SUMX2PY2",SUMXMY2:"SUMXMY2",EXPONDIST:"EXPONDIST",GAMMADIST:"GAMMADIST",GAMMAINV:"GAMMAINV","BETA.DIST":"BETA.DIST",BETADIST:"BETADIST","BETA.INV":"BETA.INV",BETAINV:"BETAINV","BINOM.DIST":"BINOM.DIST",BINOMDIST:"BINOMDIST","BINOM.INV":"BINOM.INV",BESSELI:"BESSELI",BESSELJ:"BESSELJ",BESSELK:"BESSELK",BESSELY:"BESSELY","CHISQ.DIST":"CHISQ.DIST","CHISQ.DIST.RT":"CHISQ.DIST.RT","CHISQ.INV":"CHISQ.INV","CHISQ.INV.RT":"CHISQ.INV.RT",CHIDIST:"CHIDIST",CHIINV:"CHIINV","F.DIST":"F.DIST","F.DIST.RT":"F.DIST.RT","F.INV":"F.INV","F.INV.RT":"F.INV.RT",FDIST:"FDIST",FINV:"FINV",WEIBULL:"WEIBULL","WEIBULL.DIST":"WEIBULL.DIST",POISSON:"POISSON","POISSON.DIST":"POISSON.DIST","HYPGEOM.DIST":"HYPGEOM.DIST",HYPGEOMDIST:"HYPGEOMDIST","T.DIST":"T.DIST","T.DIST.2T":"T.DIST.2T","T.DIST.RT":"T.DIST.RT","T.INV":"T.INV","T.INV.2T":"T.INV.2T",TDIST:"TDIST",TINV:"TINV",LOGINV:"LOGINV","LOGNORM.DIST":"LOGNORM.DIST","LOGNORM.INV":"LOGNORM.INV",LOGNORMDIST:"LOGNORMDIST","NORM.DIST":"NORM.DIST","NORM.INV":"NORM.INV","NORM.S.DIST":"NORM.S.DIST","NORM.S.INV":"NORM.S.INV",NORMDIST:"NORMDIST",NORMINV:"NORMINV",NORMSDIST:"NORMSDIST",NORMSINV:"NORMSINV",PHI:"PHI","NEGBINOM.DIST":"NEGBINOM.DIST",NEGBINOMDIST:"NEGBINOMDIST",COMPLEX:"COMPLEX",IMABS:"IMABS",IMAGINARY:"IMAGINARY",IMARGUMENT:"IMARGUMENT",IMCONJUGATE:"IMCONJUGATE",IMCOS:"IMCOS",IMCOSH:"IMCOSH",IMCOT:"IMCOT",IMCSC:"IMCSC",IMCSCH:"IMCSCH",IMDIV:"IMDIV",IMEXP:"IMEXP",IMLN:"IMLN",IMLOG10:"IMLOG10",IMLOG2:"IMLOG2",IMPOWER:"IMPOWER",IMPRODUCT:"IMPRODUCT",IMREAL:"IMREAL",IMSEC:"IMSEC",IMSECH:"IMSECH",IMSIN:"IMSIN",IMSINH:"IMSINH",IMSQRT:"IMSQRT",IMSUB:"IMSUB",IMSUM:"IMSUM",IMTAN:"IMTAN",LARGE:"LARGE",SMALL:"SMALL",AVEDEV:"AVEDEV",CONFIDENCE:"CONFIDENCE","CONFIDENCE.NORM":"CONFIDENCE.NORM","CONFIDENCE.T":"CONFIDENCE.T",DEVSQ:"DEVSQ",GEOMEAN:"GEOMEAN",HARMEAN:"HARMEAN",CRITBINOM:"CRITBINOM","COVARIANCE.P":"COVARIANCE.P","COVARIANCE.S":"COVARIANCE.S",COVAR:"COVAR",PEARSON:"PEARSON",RSQ:"RSQ",STANDARDIZE:"STANDARDIZE","Z.TEST":"Z.TEST",ZTEST:"ZTEST","F.TEST":"F.TEST",FTEST:"FTEST",STEYX:"STEYX",SLOPE:"SLOPE","CHISQ.TEST":"CHISQ.TEST",CHITEST:"CHITEST","T.TEST":"T.TEST",TTEST:"TTEST",SKEW:"SKEW","SKEW.P":"SKEW.P",WEIBULLDIST:"WEIBULLDIST",VARS:"VARS",TINV2T:"TINV2T",TDISTRT:"TDISTRT",TDIST2T:"TDIST2T",STDEVS:"STDEVS",FINVRT:"FINVRT",FDISTRT:"FDISTRT",CHIDISTRT:"CHIDISTRT",CHIINVRT:"CHIINVRT",COVARIANCEP:"COVARIANCEP",COVARIANCES:"COVARIANCES",LOGNORMINV:"LOGNORMINV",POISSONDIST:"POISSONDIST",SKEWP:"SKEWP","CEILING.MATH":"CEILING.MATH",FLOOR:"FLOOR","FLOOR.MATH":"FLOOR.MATH","CEILING.PRECISE":"CEILING.PRECISE","FLOOR.PRECISE":"FLOOR.PRECISE","ISO.CEILING":"ISO.CEILING"},langCode:"enGB",ui:{NEW_SHEET_PREFIX:"Sheet"}},Dg=Jue;var I1={};lt(I1,{AbsPlugin:()=>eA,ArrayPlugin:()=>JS,BitShiftPlugin:()=>rA,BitwiseLogicOperationsPlugin:()=>iA,BooleanPlugin:()=>sA,CharPlugin:()=>lA,CodePlugin:()=>cA,ComplexPlugin:()=>z5,CountBlankPlugin:()=>mA,CountUniquePlugin:()=>dA,DateTimePlugin:()=>gA,DegreesPlugin:()=>TA,DeltaPlugin:()=>CA,ExpPlugin:()=>AA,FinancialPlugin:()=>xA,FormulaTextPlugin:()=>DA,InformationPlugin:()=>_A,IsEvenPlugin:()=>FA,IsOddPlugin:()=>jA,LogarithmPlugin:()=>LA,LookupPlugin:()=>A5,MathConstantsPlugin:()=>zA,MathPlugin:()=>L5,MatrixPlugin:()=>qA,MedianPlugin:()=>$A,ModuloPlugin:()=>XA,NumericAggregationPlugin:()=>Vv,PowerPlugin:()=>JA,RadiansPlugin:()=>e5,RadixConversionPlugin:()=>r5,RandomPlugin:()=>i5,RomanPlugin:()=>x5,RoundingPlugin:()=>Uv,SimpleArithmerticPlugin:()=>R5,SqrtPlugin:()=>o5,StatisticalAggregationPlugin:()=>V1,StatisticalPlugin:()=>v1,SumifPlugin:()=>f5,SumprodPlugin:()=>h5,TextPlugin:()=>b5,TrigonometryPlugin:()=>N5});var dZe=j(q());function Pg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pg=function(e){return typeof e}:Pg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pg(i)}function sF(i){return tce(i)||ece(i)||oF(i)||Que()}function Que(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ece(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function tce(i){if(Array.isArray(i))return YS(i)}function rce(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=oF(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function oF(i,t){if(!!i){if(typeof i=="string")return YS(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return YS(i,t)}}function YS(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function nce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function lF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ice(i,t,e){return t&&lF(i.prototype,t),e&&lF(i,e),i}function ace(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&ZS(i,t)}function ZS(i,t){return ZS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},ZS(i,t)}function sce(i){var t=uce();return function(){var r=_g(i),a;if(t){var s=_g(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return oce(this,a)}}function oce(i,t){if(t&&(Pg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lce(i)}function lce(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function uce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function _g(i){return _g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_g(i)}var JS=function(i){ace(e,i);var t=sce(e);function e(){return nce(this,e),t.apply(this,arguments)}return ice(e,[{key:"arrayformula",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ARRAYFORMULA"),function(o){return o})}},{key:"arrayformulaArraySize",value:function(a,s){var o=this;if(a.args.length!==1)return be.error();var l=this.metadata("ARRAYFORMULA"),u=a.args.map(function(c){var p;return o.arraySizeForAst(c,new qr(s.formulaAddress,s.arraysFlag||((p=l==null?void 0:l.arrayFunction)!==null&&p!==void 0?p:!1)))});return u[0]}},{key:"arrayconstrain",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ARRAY_CONSTRAIN"),function(o,l,u){l=Math.min(l,o.height()),u=Math.min(u,o.width());for(var c=o.data,p=[],m=0;m<l;m++)p.push(c[m].slice(0,u));return J.onlyValues(p)})}},{key:"arrayconstrainArraySize",value:function(a,s){var o=this;if(a.args.length!==3)return be.error();var l=this.metadata("ARRAY_CONSTRAIN"),u=a.args.map(function(f){var d;return o.arraySizeForAst(f,new qr(s.formulaAddress,s.arraysFlag||((d=l==null?void 0:l.arrayFunction)!==null&&d!==void 0?d:!1)))}),c=u[0],p=c.height,m=c.width;return a.args[1].type===P.NUMBER&&(p=Math.min(p,a.args[1].value)),a.args[2].type===P.NUMBER&&(m=Math.min(m,a.args[2].value)),p<1||m<1||!Number.isInteger(p)||!Number.isInteger(m)?be.error():new be(m,p)}},{key:"filter",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FILTER"),function(o){for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];for(var p=0,m=u;p<m.length;p++){var f=m[p];if(o.width()!==f.width()||o.height()!==f.height())return new x(R.NA,D.EqualLength)}if(o.width()>1&&o.height()>1)return new x(R.NA,D.WrongDimension);for(var d=o.data,h=[],y=0;y<o.height();y++){for(var b=[],g=0;g<o.width();g++){var v=!0,C=rce(u),w;try{for(C.s();!(w=C.n()).done;){var S=w.value,A=bb(S.data[y][g]);if(A!==!0){v=!1;break}}}catch(E){C.e(E)}finally{C.f()}v&&b.push(d[y][g])}b.length>0&&h.push(b)}return h.length>0?J.onlyValues(h):new x(R.NA,D.EmptyRange)})}},{key:"filterArraySize",value:function(a,s){var o=this;if(a.args.length<=1)return be.error();var l=this.metadata("FILTER"),u=a.args.map(function(m){var f;return o.arraySizeForAst(m,new qr(s.formulaAddress,s.arraysFlag||((f=l==null?void 0:l.arrayFunction)!==null&&f!==void 0?f:!1)))}),c=Math.max.apply(Math,sF(u.map(function(m){return m.width}))),p=Math.max.apply(Math,sF(u.map(function(m){return m.height})));return new be(c,p)}}]),e}(Y);JS.implementedFunctions={ARRAYFORMULA:{method:"arrayformula",arraySizeMethod:"arrayformulaArraySize",arrayFunction:!0,parameters:[{argumentType:N.ANY}]},ARRAY_CONSTRAIN:{method:"arrayconstrain",arraySizeMethod:"arrayconstrainArraySize",parameters:[{argumentType:N.RANGE},{argumentType:N.INTEGER,minValue:1},{argumentType:N.INTEGER,minValue:1}],vectorizationForbidden:!0},FILTER:{method:"filter",arraySizeMethod:"filterArraySize",arrayFunction:!0,parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}],repeatLastArgs:1}};var OZe=j(q());function kg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kg=function(e){return typeof e}:kg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg(i)}function cce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function uF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function pce(i,t,e){return t&&uF(i.prototype,t),e&&uF(i,e),i}function mce(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&QS(i,t)}function QS(i,t){return QS=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},QS(i,t)}function fce(i){var t=yce();return function(){var r=Fg(i),a;if(t){var s=Fg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return dce(this,a)}}function dce(i,t){if(t&&(kg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hce(i)}function hce(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function yce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Fg(i){return Fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fg(i)}var eA=function(i){mce(e,i);var t=fce(e);function e(){return cce(this,e),t.apply(this,arguments)}return pce(e,[{key:"abs",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ABS"),Math.abs)}}]),e}(Y);eA.implementedFunctions={ABS:{method:"abs",parameters:[{argumentType:N.NUMBER}]}};var zZe=j(q());function Mg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mg=function(e){return typeof e}:Mg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mg(i)}function bce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function cF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function gce(i,t,e){return t&&cF(i.prototype,t),e&&cF(i,e),i}function vce(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&tA(i,t)}function tA(i,t){return tA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},tA(i,t)}function Tce(i){var t=Sce();return function(){var r=jg(i),a;if(t){var s=jg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Nce(this,a)}}function Nce(i,t){if(t&&(Mg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cce(i)}function Cce(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Sce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function jg(i){return jg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jg(i)}var Ace=281474976710655,pF=-53,mF=53,rA=function(i){vce(e,i);var t=Tce(e);function e(){return bce(this,e),t.apply(this,arguments)}return gce(e,[{key:"bitlshift",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BITLSHIFT"),fF)}},{key:"bitrshift",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BITRSHIFT"),dF)}}]),e}(Y);rA.implementedFunctions={BITLSHIFT:{method:"bitlshift",parameters:[{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:pF,maxValue:mF}]},BITRSHIFT:{method:"bitrshift",parameters:[{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:pF,maxValue:mF}]}};function fF(i,t){return t<0?dF(i,-t):hF(i*Math.pow(2,t))}function dF(i,t){return t<0?fF(i,-t):hF(Math.floor(i/Math.pow(2,t)))}function hF(i){return i>Ace?new x(R.NUM,D.BitshiftLong):i}var tJe=j(q());function Bg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bg=function(e){return typeof e}:Bg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bg(i)}function wce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function yF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function xce(i,t,e){return t&&yF(i.prototype,t),e&&yF(i,e),i}function Ece(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&nA(i,t)}function nA(i,t){return nA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},nA(i,t)}function Rce(i){var t=Oce();return function(){var r=Lg(i),a;if(t){var s=Lg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Vce(this,a)}}function Vce(i,t){if(t&&(Bg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ice(i)}function Ice(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Oce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Lg(i){return Lg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lg(i)}var iA=function(i){Ece(e,i);var t=Rce(e);function e(){return wce(this,e),t.apply(this,arguments)}return xce(e,[{key:"bitand",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BITAND"),function(o,l){return o&l})}},{key:"bitor",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BITOR"),function(o,l){return o|l})}},{key:"bitxor",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BITXOR"),function(o,l){return o^l})}}]),e}(Y);iA.implementedFunctions={BITAND:{method:"bitand",parameters:[{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:0}]},BITOR:{method:"bitor",parameters:[{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:0}]},BITXOR:{method:"bitxor",parameters:[{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:0}]}};var fJe=j(q());function Ug(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ug=function(e){return typeof e}:Ug=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ug(i)}function Dce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function bF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Pce(i,t,e){return t&&bF(i.prototype,t),e&&bF(i,e),i}function _ce(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&aA(i,t)}function aA(i,t){return aA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},aA(i,t)}function kce(i){var t=jce();return function(){var r=zg(i),a;if(t){var s=zg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Fce(this,a)}}function Fce(i,t){if(t&&(Ug(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mce(i)}function Mce(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function jce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function zg(i){return zg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},zg(i)}var sA=function(i){_ce(e,i);var t=kce(e);function e(){return Dce(this,e),t.apply(this,arguments)}return Pce(e,[{key:"literalTrue",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TRUE"),function(){return!0})}},{key:"literalFalse",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FALSE"),function(){return!1})}},{key:"conditionalIf",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IF"),function(o,l,u){return o?l:u})}},{key:"and",value:function(a,s){return this.runFunction(a.args,s,this.metadata("AND"),function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return!l.some(function(c){return!c})})}},{key:"or",value:function(a,s){return this.runFunction(a.args,s,this.metadata("OR"),function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];return l.some(function(c){return c})})}},{key:"not",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NOT"),function(o){return!o})}},{key:"xor",value:function(a,s){return this.runFunction(a.args,s,this.metadata("XOR"),function(){for(var o=0,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return u.forEach(function(p){p&&o++}),o%2==1})}},{key:"switch",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SWITCH"),function(l){for(var u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];for(var m=c.length,f=0;f+1<m;f+=2)if(!(c[f]instanceof x)&&o.arithmeticHelper.eq(l,c[f]))return c[f+1];return f<m?c[f]:new x(R.NA,D.NoDefault)})}},{key:"iferror",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IFERROR"),function(o,l){return o instanceof x?l:o})}},{key:"ifna",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IFNA"),function(o,l){return o instanceof x&&o.type===R.NA?l:o})}},{key:"choose",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHOOSE"),function(o){return o>(arguments.length<=1?0:arguments.length-1)?new x(R.NUM,D.Selector):o-1+1<1||arguments.length<=o-1+1?void 0:arguments[o-1+1]})}}]),e}(Y);sA.implementedFunctions={TRUE:{method:"literalTrue",parameters:[]},FALSE:{method:"literalFalse",parameters:[]},IF:{method:"conditionalIf",parameters:[{argumentType:N.BOOLEAN},{argumentType:N.SCALAR,passSubtype:!0},{argumentType:N.SCALAR,defaultValue:!1,passSubtype:!0}]},AND:{method:"and",parameters:[{argumentType:N.BOOLEAN}],repeatLastArgs:1,expandRanges:!0},OR:{method:"or",parameters:[{argumentType:N.BOOLEAN}],repeatLastArgs:1,expandRanges:!0},XOR:{method:"xor",parameters:[{argumentType:N.BOOLEAN}],repeatLastArgs:1,expandRanges:!0},NOT:{method:"not",parameters:[{argumentType:N.BOOLEAN}]},SWITCH:{method:"switch",parameters:[{argumentType:N.NOERROR},{argumentType:N.SCALAR,passSubtype:!0},{argumentType:N.SCALAR,passSubtype:!0}],repeatLastArgs:1},IFERROR:{method:"iferror",parameters:[{argumentType:N.SCALAR,passSubtype:!0},{argumentType:N.SCALAR,passSubtype:!0}]},IFNA:{method:"ifna",parameters:[{argumentType:N.SCALAR,passSubtype:!0},{argumentType:N.SCALAR,passSubtype:!0}]},CHOOSE:{method:"choose",parameters:[{argumentType:N.INTEGER,minValue:1},{argumentType:N.SCALAR,passSubtype:!0}],repeatLastArgs:1}};var Bce=ce(),Lce=Math.ceil,Uce=Math.floor;Bce({target:"Math",stat:!0},{trunc:function(t){return(t>0?Uce:Lce)(t)}});var zce=ce(),Hce=Au(),gF=String.fromCharCode,vF=String.fromCodePoint,Gce=!!vF&&vF.length!=1;zce({target:"String",stat:!0,forced:Gce},{fromCodePoint:function(t){for(var e=[],r=arguments.length,a=0,s;r>a;){if(s=+arguments[a++],Hce(s,1114111)!==s)throw RangeError(s+" is not a valid code point");e.push(s<65536?gF(s):gF(((s-=65536)>>10)+55296,s%1024+56320))}return e.join("")}});var IJe=j(q());function Hg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hg=function(e){return typeof e}:Hg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(i)}function qce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function TF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Wce(i,t,e){return t&&TF(i.prototype,t),e&&TF(i,e),i}function $ce(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&oA(i,t)}function oA(i,t){return oA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},oA(i,t)}function Kce(i){var t=Zce();return function(){var r=Gg(i),a;if(t){var s=Gg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Xce(this,a)}}function Xce(i,t){if(t&&(Hg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yce(i)}function Yce(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Gg(i){return Gg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gg(i)}var lA=function(i){$ce(e,i);var t=Kce(e);function e(){return qce(this,e),t.apply(this,arguments)}return Wce(e,[{key:"char",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHAR"),function(o){return o<1||o>=256?new x(R.VALUE,D.CharacterCodeBounds):String.fromCharCode(Math.trunc(o))})}},{key:"unichar",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHAR"),function(o){return o<1||o>=1114112?new x(R.VALUE,D.CharacterCodeBounds):String.fromCodePoint(Math.trunc(o))})}}]),e}(Y);lA.implementedFunctions={CHAR:{method:"char",parameters:[{argumentType:N.NUMBER}]},UNICHAR:{method:"unichar",parameters:[{argumentType:N.NUMBER}]}};var GJe=j(q());function qg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qg=function(e){return typeof e}:qg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qg(i)}function Jce(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function NF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Qce(i,t,e){return t&&NF(i.prototype,t),e&&NF(i,e),i}function epe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&uA(i,t)}function uA(i,t){return uA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},uA(i,t)}function tpe(i){var t=ipe();return function(){var r=Wg(i),a;if(t){var s=Wg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return rpe(this,a)}}function rpe(i,t){if(t&&(qg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return npe(i)}function npe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ipe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Wg(i){return Wg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wg(i)}var cA=function(i){epe(e,i);var t=tpe(e);function e(){return Jce(this,e),t.apply(this,arguments)}return Qce(e,[{key:"code",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CODE"),function(o){return o.length===0?new x(R.VALUE,D.EmptyString):o.charCodeAt(0)})}},{key:"unicode",value:function(a,s){return this.runFunction(a.args,s,this.metadata("UNICODE"),function(o){var l;return(l=o.codePointAt(0))!==null&&l!==void 0?l:new x(R.VALUE,D.EmptyString)})}}]),e}(Y);cA.implementedFunctions={CODE:{method:"code",parameters:[{argumentType:N.STRING}]},UNICODE:{method:"unicode",parameters:[{argumentType:N.STRING}]}};var iQe=j(q());function $g(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$g=function(e){return typeof e}:$g=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(i)}function ape(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function CF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function spe(i,t,e){return t&&CF(i.prototype,t),e&&CF(i,e),i}function ope(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&pA(i,t)}function pA(i,t){return pA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},pA(i,t)}function lpe(i){var t=ppe();return function(){var r=Kg(i),a;if(t){var s=Kg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return upe(this,a)}}function upe(i,t){if(t&&($g(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cpe(i)}function cpe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ppe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Kg(i){return Kg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kg(i)}var mA=function(i){ope(e,i);var t=lpe(e);function e(){return ape(this,e),t.apply(this,arguments)}return spe(e,[{key:"countblank",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COUNTBLANK"),function(){for(var o=0,l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return u.forEach(function(p){p===se&&o++}),o})}}]),e}(Y);mA.implementedFunctions={COUNTBLANK:{method:"countblank",parameters:[{argumentType:N.SCALAR}],repeatLastArgs:1,expandRanges:!0}};var cQe=j(q());var mQe=j(gs());function Xg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xg=function(e){return typeof e}:Xg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(i)}function mpe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function SF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function fpe(i,t,e){return t&&SF(i.prototype,t),e&&SF(i,e),i}function dpe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&fA(i,t)}function fA(i,t){return fA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},fA(i,t)}function hpe(i){var t=gpe();return function(){var r=Yg(i),a;if(t){var s=Yg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return ype(this,a)}}function ype(i,t){if(t&&(Xg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bpe(i)}function bpe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function gpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Yg(i){return Yg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yg(i)}var dA=function(i){dpe(e,i);var t=hpe(e);function e(){return mpe(this,e),t.apply(this,arguments)}return fpe(e,[{key:"countunique",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COUNTUNIQUE"),function(){for(var o=new Set,l=new Set,u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];for(var m=0,f=c;m<f.length;m++){var d=f[m];d instanceof x?l.add(d.type):d!==""&&o.add(d)}return o.size+l.size})}}]),e}(Y);dA.implementedFunctions={COUNTUNIQUE:{method:"countunique",parameters:[{argumentType:N.SCALAR}],repeatLastArgs:1,expandRanges:!0}};var xQe=j(q());var RQe=j(gs());var OQe=j(Vt());function Zg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zg=function(e){return typeof e}:Zg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zg(i)}function vpe(i){return Cpe(i)||Npe(i)||hA(i)||Tpe()}function Tpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Npe(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Cpe(i){if(Array.isArray(i))return yA(i)}function AF(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=hA(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function Spe(i,t){return xpe(i)||wpe(i,t)||hA(i,t)||Ape()}function Ape(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hA(i,t){if(!!i){if(typeof i=="string")return yA(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yA(i,t)}}function yA(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function wpe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function xpe(i){if(Array.isArray(i))return i}function Epe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function wF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Rpe(i,t,e){return t&&wF(i.prototype,t),e&&wF(i,e),i}function Vpe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&bA(i,t)}function bA(i,t){return bA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},bA(i,t)}function Ipe(i){var t=Ppe();return function(){var r=Jg(i),a;if(t){var s=Jg(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Ope(this,a)}}function Ope(i,t){if(t&&(Zg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dpe(i)}function Dpe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ppe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Jg(i){return Jg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Jg(i)}var gA=function(i){Vpe(e,i);var t=Ipe(e);function e(){var r;return Epe(this,e),r=t.apply(this,arguments),r.isoweeknumCore=function(a){var s=Math.floor(r.dateTimeHelper.relativeNumberToAbsoluteNumber(a)),o=r.dateTimeHelper.numberToSimpleDate(a),l=r.dateTimeHelper.dateToNumber({year:o.year,month:1,day:1}),u=r.dateTimeHelper.relativeNumberToAbsoluteNumber(l),c=u+((4-u)%7+7)%7,p=Math.floor((s-1)/7)-Math.floor((c-1)/7)+1;return p===0?r.isoweeknumCore(a-7)+1:p},r.days360Core=function(a,s,o){var l=r.dateTimeHelper.numberToSimpleDate(a),u=r.dateTimeHelper.numberToSimpleDate(s),c,p;if(o)c=fS(l),p=fS(u);else{var m=r.dateTimeHelper.toBasisUS(l,u),f=Spe(m,2);c=f[0],p=f[1]}return 360*(p.year-c.year)+30*(p.month-c.month)+p.day-c.day},r}return Rpe(e,[{key:"date",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("DATE"),function(l,u,c){var p=Math.trunc(c),m=Math.trunc(u),f=Math.trunc(l);f<o.dateTimeHelper.getEpochYearZero()&&(f+=o.dateTimeHelper.getEpochYearZero());var d=Math.floor((m-1)/12);f+=d,m-=d*12;var h={year:f,month:m,day:1};if(o.dateTimeHelper.isValidDate(h)){var y=o.dateTimeHelper.dateToNumber(h)+(p-1);return y=o.dateTimeHelper.getWithinBounds(y),y===void 0?new x(R.NUM,D.DateBounds):y}return new x(R.VALUE,D.InvalidDate)})}},{key:"time",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TIME"),function(o,l,u){var c=Ms({hours:Math.trunc(o),minutes:Math.trunc(l),seconds:Math.trunc(u)});return c<0?new x(R.NUM,D.NegativeTime):c%1})}},{key:"eomonth",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("EOMONTH"),function(l,u){var c=o.dateTimeHelper.numberToSimpleDate(l),p=o.dateTimeHelper.dateToNumber(o.dateTimeHelper.endOfMonth(mS(c,u)));return p=o.dateTimeHelper.getWithinBounds(p),p===void 0?new x(R.NUM,D.DateBounds):p})}},{key:"day",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("DAY"),function(l){return o.dateTimeHelper.numberToSimpleDate(l).day})}},{key:"days",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DAYS"),function(o,l){return Math.trunc(o)-Math.trunc(l)})}},{key:"month",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MONTH"),function(l){return o.dateTimeHelper.numberToSimpleDate(l).month})}},{key:"year",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("YEAR"),function(l){return o.dateTimeHelper.numberToSimpleDate(l).year})}},{key:"hour",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HOUR"),function(o){return Ma(Bb(o)%1).hours})}},{key:"minute",value:function(a,s){return this.runFunction(a.args,s,this.metadata("MINUTE"),function(o){return Ma(Bb(o)%1).minutes})}},{key:"second",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SECOND"),function(o){return Ma(Bb(o)%1).seconds})}},{key:"text",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("TEXT"),function(l,u){return _P(l,u,o.config,o.dateTimeHelper)})}},{key:"weekday",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("WEEKDAY"),function(l,u){var c=Math.floor(o.dateTimeHelper.relativeNumberToAbsoluteNumber(l));if(u===3)return(c-1)%7;var p=RF.get(u);return p===void 0?new x(R.NUM,D.BadMode):(c-p)%7+1})}},{key:"weeknum",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("WEEKNUM"),function(l,u){var c=Math.floor(o.dateTimeHelper.relativeNumberToAbsoluteNumber(l)),p=o.dateTimeHelper.numberToSimpleDate(l),m=o.dateTimeHelper.dateToNumber({year:p.year,month:1,day:1}),f=o.dateTimeHelper.relativeNumberToAbsoluteNumber(m);if(u===21)return o.isoweeknumCore(l);var d=RF.get(u);return d===void 0?new x(R.NUM,D.BadMode):Math.floor((c-d)/7)-Math.floor((f-d)/7)+1})}},{key:"isoweeknum",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISOWEEKNUM"),this.isoweeknumCore)}},{key:"datevalue",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("DATEVALUE"),function(l){var u=o.dateTimeHelper.parseDateTimeFromConfigFormats(l),c=u.dateTime;return c===void 0?new x(R.VALUE,D.IncorrectDateTime):qo(c)?(pS(c)?Math.trunc(Ms(c)):0)+o.dateTimeHelper.dateToNumber(c):0})}},{key:"timevalue",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("TIMEVALUE"),function(l){var u=o.dateTimeHelper.dateStringToDateNumber(l);return u===void 0?new x(R.VALUE,D.IncorrectDateTime):W(u)%1})}},{key:"now",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("NOW"),function(){var l=new Date(Date.now());return Ms({hours:l.getHours(),minutes:l.getMinutes(),seconds:l.getSeconds()})+o.dateTimeHelper.dateToNumber({year:l.getFullYear(),month:l.getMonth()+1,day:l.getDate()})})}},{key:"today",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("TODAY"),function(){var l=new Date(Date.now());return o.dateTimeHelper.dateToNumber({year:l.getFullYear(),month:l.getMonth()+1,day:l.getDate()})})}},{key:"edate",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("EDATE"),function(l,u){var c=o.dateTimeHelper.numberToSimpleDate(l),p=NP(mS(c,u)),m=o.dateTimeHelper.dateToNumber(p);return m=o.dateTimeHelper.getWithinBounds(m),m===void 0?new x(R.NUM,D.DateBounds):m})}},{key:"datedif",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("DATEDIF"),function(l,u,c){if(l>u)return new x(R.NUM,D.StartEndDate);if(c==="D")return Math.floor(u)-Math.floor(l);var p=o.dateTimeHelper.numberToSimpleDate(l),m=o.dateTimeHelper.numberToSimpleDate(u);switch(c){case"M":return(m.year-p.year)*12+(m.month-p.month)-(m.day<p.day?1:0);case"YM":return(12+(m.month-p.month)-(m.day<p.day?1:0))%12;case"Y":return m.month>p.month||m.month===p.month&&m.day>=p.day?m.year-p.year:m.year-p.year-1;case"MD":if(m.day>=p.day)return m.day-p.day;var f=m.month===1?12:m.month-1,d=m.month===1?m.year-1:m.year;return o.dateTimeHelper.daysInMonth(d,f)+m.day-p.day;case"YD":return m.month>p.month||m.month===p.month&&m.day>=p.day?Math.floor(u)-o.dateTimeHelper.dateToNumber({year:m.year,month:p.month,day:p.day}):Math.floor(u)-Math.floor(l)-365*(m.year-p.year-1)-o.dateTimeHelper.leapYearsCount(m.year-1)+o.dateTimeHelper.leapYearsCount(p.year);default:return new x(R.NUM,D.BadMode)}})}},{key:"days360",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DAYS360"),this.days360Core)}},{key:"yearfrac",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("YEARFRAC"),function(l,u,c){if(l=Math.trunc(l),u=Math.trunc(u),l>u){var p=[u,l];l=p[0],u=p[1]}switch(c){case 0:return o.days360Core(l,u,!1)/360;case 1:return(u-l)/o.dateTimeHelper.yearLengthForBasis(o.dateTimeHelper.numberToSimpleDate(l),o.dateTimeHelper.numberToSimpleDate(u));case 2:return(u-l)/360;case 3:return(u-l)/365;case 4:return o.days360Core(l,u,!0)/360}throw new Error("Should not be reachable.")})}},{key:"interval",value:function(a,s){return this.runFunction(a.args,s,this.metadata("INTERVAL"),function(o){o=Math.trunc(o);var l=o%60;o=Math.trunc(o/60);var u=o%60;o=Math.trunc(o/60);var c=o%24;o=Math.trunc(o/24);var p=o%30;o=Math.trunc(o/30);var m=o%12,f=Math.trunc(o/12);return"P"+(f>0?f+"Y":"")+(m>0?m+"M":"")+(p>0?p+"D":"")+"T"+(c>0?c+"H":"")+(u>0?u+"M":"")+(l>0?l+"S":"")})}},{key:"networkdays",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("NETWORKDAYS"),function(l,u,c){return o.networkdayscore(l,u,1,c)})}},{key:"networkdaysintl",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("NETWORKDAYS.INTL"),function(l,u,c,p){return o.networkdayscore(l,u,c,p)})}},{key:"workday",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("WORKDAY"),function(l,u,c){return o.workdaycore(l,u,1,c)})}},{key:"workdayintl",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("WORKDAY.INTL"),function(l,u,c,p){return o.workdaycore(l,u,c,p)})}},{key:"networkdayscore",value:function(a,s,o,l){a=Math.trunc(a),s=Math.trunc(s);var u=1;if(a>s){var c=[s,a];a=c[0],s=c[1],u=-1}var p=EF(o);if(p instanceof x)return p;var m=this.simpleRangeToFilteredHolidays(p,l);return m instanceof x?m:u*this.countWorkdays(a,s,p,m)}},{key:"workdaycore",value:function(a,s,o,l){a=Math.trunc(a),s=Math.trunc(s);var u=EF(o);if(u instanceof x)return u;var c=this.simpleRangeToFilteredHolidays(u,l);if(c instanceof x)return c;if(s>0){for(var p=1;this.countWorkdays(a+1,a+p,u,c)<s;)p*=2;for(var m=1;m+1<p;){var f=Math.trunc((m+p)/2);this.countWorkdays(a+1,a+f,u,c)<s?m=f:p=f}return a+p}else if(s<0){s*=-1;for(var d=1;this.countWorkdays(a-d,a-1,u,c)<s;)d*=2;for(var h=1;h+1<d;){var y=Math.trunc((h+d)/2);this.countWorkdays(a-y,a-1,u,c)<s?h=y:d=y}return a-d}else return a}},{key:"countWorkdays",value:function(a,s,o,l){for(var u=Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(s)),c=Math.floor(this.dateTimeHelper.relativeNumberToAbsoluteNumber(a)),p=0,m=0;m<7;m++)o.charAt(m)==="0"&&(p+=Math.floor((u+6-m)/7),p-=Math.floor((c-1+6-m)/7));return p-=xF(s+1,l)-xF(a,l),p}},{key:"simpleRangeToFilteredHolidays",value:function(a,s){var o=this,l,u=(l=s==null?void 0:s.valuesFromTopLeftCorner())!==null&&l!==void 0?l:[],c=AF(u),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;if(m instanceof x)return m}}catch(b){c.e(b)}finally{c.f()}var f=[],d=AF(u),h;try{for(d.s();!(h=d.n()).done;){var y=h.value;if(y!==se)if(he(y))f.push(Math.trunc(W(y)));else return new x(R.VALUE,D.WrongType)}}catch(b){d.e(b)}finally{d.f()}return vpe(new Set(f)).sort(function(b,g){return b-g}).filter(function(b){var g=o.dateTimeHelper.relativeNumberToAbsoluteNumber(b),v=(g-1)%7;return a.charAt(v)==="0"})}}]),e}(Y);gA.implementedFunctions={DATE:{method:"date",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_DATE},TIME:{method:"time",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_TIME},MONTH:{method:"month",parameters:[{argumentType:N.NUMBER,minValue:0}]},YEAR:{method:"year",parameters:[{argumentType:N.NUMBER,minValue:0}]},HOUR:{method:"hour",parameters:[{argumentType:N.NUMBER,minValue:0}]},MINUTE:{method:"minute",parameters:[{argumentType:N.NUMBER,minValue:0}]},SECOND:{method:"second",parameters:[{argumentType:N.NUMBER,minValue:0}]},TEXT:{method:"text",parameters:[{argumentType:N.NUMBER},{argumentType:N.STRING}]},EOMONTH:{method:"eomonth",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_DATE},DAY:{method:"day",parameters:[{argumentType:N.NUMBER,minValue:0}]},DAYS:{method:"days",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0}]},WEEKDAY:{method:"weekday",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,defaultValue:1}]},WEEKNUM:{method:"weeknum",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,defaultValue:1}]},ISOWEEKNUM:{method:"isoweeknum",parameters:[{argumentType:N.NUMBER,minValue:0}]},DATEVALUE:{method:"datevalue",parameters:[{argumentType:N.STRING}],returnNumberType:te.NUMBER_DATE},TIMEVALUE:{method:"timevalue",parameters:[{argumentType:N.STRING}],returnNumberType:te.NUMBER_TIME},NOW:{method:"now",parameters:[],isVolatile:!0,returnNumberType:te.NUMBER_DATETIME},TODAY:{method:"today",parameters:[],isVolatile:!0,returnNumberType:te.NUMBER_DATE},EDATE:{method:"edate",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_DATE},DAYS360:{method:"days360",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.BOOLEAN,defaultValue:!1}]},DATEDIF:{method:"datedif",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.STRING}]},YEARFRAC:{method:"yearfrac",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.INTEGER,defaultValue:0,minValue:0,maxValue:4}]},INTERVAL:{method:"interval",parameters:[{argumentType:N.NUMBER,minValue:0}]},NETWORKDAYS:{method:"networkdays",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.RANGE,optionalArg:!0}]},"NETWORKDAYS.INTL":{method:"networkdaysintl",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.NOERROR,defaultValue:1},{argumentType:N.RANGE,optionalArg:!0}]},WORKDAY:{method:"workday",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER},{argumentType:N.RANGE,optionalArg:!0}]},"WORKDAY.INTL":{method:"workdayintl",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER},{argumentType:N.NOERROR,defaultValue:1},{argumentType:N.RANGE,optionalArg:!0}]}};function xF(i,t){if(t.length===0||i<=t[0])return 0;if(t[t.length-1]<i)return t.length;for(var e=0,r=t.length-1;e+1<r;){var a=Math.floor((r+e)/2);t[a]>=i?r=a:e=a}return r}function EF(i){var t;return typeof i!="number"&&typeof i!="string"?new x(R.VALUE,D.WrongType):typeof i=="string"?i.length!==7||!/^(0|1)*$/.test(i)||i==="1111111"?new x(R.NUM,D.WeekendString):i:(t=_pe.get(i))!==null&&t!==void 0?t:new x(R.NUM,D.BadMode)}var RF=new Map([[1,0],[2,1],[11,1],[12,2],[13,3],[14,4],[15,5],[16,6],[17,0]]),_pe=new Map([[1,"0000011"],[2,"1000001"],[3,"1100000"],[4,"0110000"],[5,"0011000"],[6,"0001100"],[7,"0000110"],[11,"0000001"],[12,"1000000"],[13,"0100000"],[14,"0010000"],[15,"0001000"],[16,"0000100"],[17,"0000010"]]);var QQe=j(q());function Qg(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qg=function(e){return typeof e}:Qg=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qg(i)}function kpe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function VF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Fpe(i,t,e){return t&&VF(i.prototype,t),e&&VF(i,e),i}function Mpe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&vA(i,t)}function vA(i,t){return vA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},vA(i,t)}function jpe(i){var t=Upe();return function(){var r=ev(i),a;if(t){var s=ev(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Bpe(this,a)}}function Bpe(i,t){if(t&&(Qg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lpe(i)}function Lpe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Upe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function ev(i){return ev=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ev(i)}var TA=function(i){Mpe(e,i);var t=jpe(e);function e(){return kpe(this,e),t.apply(this,arguments)}return Fpe(e,[{key:"degrees",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DEGREES"),function(o){return o*(180/Math.PI)})}}]),e}(Y);TA.implementedFunctions={DEGREES:{method:"degrees",parameters:[{argumentType:N.NUMBER}]}};var pet=j(q());function tv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tv=function(e){return typeof e}:tv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tv(i)}function zpe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function IF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Hpe(i,t,e){return t&&IF(i.prototype,t),e&&IF(i,e),i}function Gpe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&NA(i,t)}function NA(i,t){return NA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},NA(i,t)}function qpe(i){var t=Kpe();return function(){var r=rv(i),a;if(t){var s=rv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Wpe(this,a)}}function Wpe(i,t){if(t&&(tv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $pe(i)}function $pe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function rv(i){return rv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rv(i)}var CA=function(i){Gpe(e,i);var t=qpe(e);function e(){return zpe(this,e),t.apply(this,arguments)}return Hpe(e,[{key:"delta",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DELTA"),function(o,l){return o===l?1:0})}}]),e}(Y);CA.implementedFunctions={DELTA:{method:"delta",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0}]}};var Cet=j(q());function nv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nv=function(e){return typeof e}:nv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nv(i)}function Xpe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function OF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ype(i,t,e){return t&&OF(i.prototype,t),e&&OF(i,e),i}function Zpe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&SA(i,t)}function SA(i,t){return SA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},SA(i,t)}function Jpe(i){var t=tme();return function(){var r=iv(i),a;if(t){var s=iv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Qpe(this,a)}}function Qpe(i,t){if(t&&(nv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eme(i)}function eme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function tme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function iv(i){return iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},iv(i)}var AA=function(i){Zpe(e,i);var t=Jpe(e);function e(){return Xpe(this,e),t.apply(this,arguments)}return Ype(e,[{key:"exp",value:function(a,s){return this.runFunction(a.args,s,this.metadata("EXP"),Math.exp)}}]),e}(Y);AA.implementedFunctions={EXP:{method:"exp",parameters:[{argumentType:N.NUMBER}]}};var Bet=j(q());function av(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?av=function(e){return typeof e}:av=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(i)}function Uf(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=rme(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function rme(i,t){if(!!i){if(typeof i=="string")return DF(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return DF(i,t)}}function DF(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function nme(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function PF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ime(i,t,e){return t&&PF(i.prototype,t),e&&PF(i,e),i}function ame(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&wA(i,t)}function wA(i,t){return wA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},wA(i,t)}function sme(i){var t=ume();return function(){var r=sv(i),a;if(t){var s=sv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return ome(this,a)}}function ome(i,t){if(t&&(av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lme(i)}function lme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ume(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function sv(i){return sv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},sv(i)}var xA=function(i){ame(e,i);var t=sme(e);function e(){return nme(this,e),t.apply(this,arguments)}return ime(e,[{key:"pmt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PMT"),EA)}},{key:"ipmt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IPMT"),RA)}},{key:"ppmt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PPMT"),_F)}},{key:"fv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FV"),VA)}},{key:"cumipmt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CUMIPMT"),function(o,l,u,c,p,m){if(c>p)return new x(R.NUM,D.EndStartPeriod);for(var f=0,d=c;d<=p;d++)f+=RA(o,d,l,u,0,m);return f})}},{key:"cumprinc",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CUMPRINC"),function(o,l,u,c,p,m){if(c>p)return new x(R.NUM,D.EndStartPeriod);for(var f=0,d=c;d<=p;d++)f+=_F(o,d,l,u,0,m);return f})}},{key:"db",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DB"),function(o,l,u,c,p){if(p===12&&c>u||c>u+1)return new x(R.NUM,D.PeriodLong);if(l>=o)return 0;var m=Math.round((1-Math.pow(l/o,1/u))*1e3)/1e3,f=o*m*p/12;if(c===1)return f;for(var d=f,h=0;h<c-2;h++)d+=(o-d)*m;return c===u+1?(o-d)*m*(12-p)/12:(o-d)*m})}},{key:"ddb",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DDB"),function(o,l,u,c,p){if(c>u)return new x(R.NUM);var m=p/u,f;m>=1?(m=1,c===1?f=o:f=0):f=o*Math.pow(1-m,c-1);var d=o*Math.pow(1-m,c);return Math.max(f-Math.max(l,d),0)})}},{key:"dollarde",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DOLLARDE"),function(o,l){if(l<1)return new x(R.DIV_BY_ZERO);for(l=Math.trunc(l);l>10;)l/=10;return Math.trunc(o)+(o-Math.trunc(o))*10/l})}},{key:"dollarfr",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DOLLARFR"),function(o,l){if(l<1)return new x(R.DIV_BY_ZERO);for(l=Math.trunc(l);l>10;)l/=10;return Math.trunc(o)+(o-Math.trunc(o))*l/10})}},{key:"effect",value:function(a,s){return this.runFunction(a.args,s,this.metadata("EFFECT"),function(o,l){return l=Math.trunc(l),Math.pow(1+o/l,l)-1})}},{key:"ispmt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISPMT"),function(o,l,u,c){return u===0?new x(R.DIV_BY_ZERO):c*o*(l/u-1)})}},{key:"nominal",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NOMINAL"),function(o,l){return l=Math.trunc(l),(Math.pow(o+1,1/l)-1)*l})}},{key:"nper",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NPER"),function(o,l,u,c,p){return o===0?l===0?new x(R.DIV_BY_ZERO):(-u-c)/l:(p&&(l*=1+o),Math.log((l-c*o)/(u*o+l))/Math.log(1+o))})}},{key:"rate",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RATE"),function(o,l,u,c,p,m){if(m<=-1)return new x(R.VALUE);var f=1e-10,d=20,h=m;p=p?1:0;for(var y=0;y<d;y++){if(h<=-1)return new x(R.NUM);var b=void 0;if(Math.abs(h)<f)b=u*(1+o*h)+l*(1+h*p)*o+c;else{var g=Math.pow(1+h,o);b=u*g+l*(1/h+p)*(g-1)+c}if(Math.abs(b)<f)return h;var v=void 0;if(Math.abs(h)<f)v=u*o+l*p*o;else{var C=Math.pow(1+h,o),w=o*Math.pow(1+h,o-1);v=u*w+l*(1/h+p)*w+l*(-1/(h*h))*(C-1)}h-=b/v}return new x(R.NUM)})}},{key:"pv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PV"),function(o,l,u,c,p){return p=p?1:0,o===-1?l===0?new x(R.NUM):new x(R.DIV_BY_ZERO):o===0?-u*l-c:((1-Math.pow(1+o,l))*u*(1+o*p)/o-c)/Math.pow(1+o,l)})}},{key:"rri",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RRI"),function(o,l,u){return l===0||u<0&&l>0||u>0&&l<0?new x(R.NUM):Math.pow(u/l,1/o)-1})}},{key:"sln",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SLN"),function(o,l,u){return u===0?new x(R.DIV_BY_ZERO):(o-l)/u})}},{key:"syd",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SYD"),function(o,l,u,c){return c>u?new x(R.NUM):(o-l)*(u-c+1)*2/(u*(u+1))})}},{key:"tbilleq",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("TBILLEQ"),function(l,u,c){if(l=Math.round(l),u=Math.round(u),l>=u)return new x(R.NUM);var p=o.dateTimeHelper.numberToSimpleDate(l),m=o.dateTimeHelper.numberToSimpleDate(u);if(m.year>p.year+1||m.year===p.year+1&&(m.month>p.month||m.month===p.month&&m.day>p.day))return new x(R.NUM);var f=360-c*(u-l);return f===0?0:f<0?new x(R.NUM):365*c/f})}},{key:"tbillprice",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("TBILLPRICE"),function(l,u,c){if(l=Math.round(l),u=Math.round(u),l>=u)return new x(R.NUM);var p=o.dateTimeHelper.numberToSimpleDate(l),m=o.dateTimeHelper.numberToSimpleDate(u);if(m.year>p.year+1||m.year===p.year+1&&(m.month>p.month||m.month===p.month&&m.day>p.day))return new x(R.NUM);var f=360-c*(u-l);return f===0?0:f<0?new x(R.NUM):100*(1-c*(u-l)/360)})}},{key:"tbillyield",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("TBILLYIELD"),function(l,u,c){if(l=Math.round(l),u=Math.round(u),l>=u)return new x(R.NUM);var p=o.dateTimeHelper.numberToSimpleDate(l),m=o.dateTimeHelper.numberToSimpleDate(u);return m.year>p.year+1||m.year===p.year+1&&(m.month>p.month||m.month===p.month&&m.day>p.day)?new x(R.NUM):(100-c)*360/(c*(u-l))})}},{key:"fvschedule",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FVSCHEDULE"),function(o,l){var u=l.valuesFromTopLeftCorner(),c=Uf(u),p;try{for(c.s();!(p=c.n()).done;){var m=p.value;if(m instanceof x)return m}}catch(y){c.e(y)}finally{c.f()}var f=Uf(u),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;if(he(h))o*=1+W(h);else if(h!==se)return new x(R.VALUE,D.NumberExpected)}}catch(y){f.e(y)}finally{f.f()}return o})}},{key:"npv",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("NPV"),function(l){for(var u=arguments.length,c=new Array(u>1?u-1:0),p=1;p<u;p++)c[p-1]=arguments[p];var m=o.arithmeticHelper.coerceNumbersExactRanges(c);return m instanceof x?m:IA(l,m)})}},{key:"mirr",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MIRR"),function(l,u,c){var p=o.arithmeticHelper.manyToExactNumbers(l.valuesFromTopLeftCorner());if(p instanceof x)return p;var m=!1,f=!1,d=[],h=[],y=Uf(p),b;try{for(y.s();!(b=y.n()).done;){var g=b.value;g>0?(m=!0,d.push(g),h.push(0)):g<0?(f=!0,h.push(g),d.push(0)):(h.push(0),d.push(0))}}catch(S){y.e(S)}finally{y.f()}if(!m||!f)return new x(R.DIV_BY_ZERO);var v=p.length,C=IA(c,d);if(C instanceof x)return C;var w=IA(u,h);return w instanceof x?w:Math.pow(-C*Math.pow(1+c,v)/w/(1+u),1/(v-1))-1})}},{key:"pduration",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PDURATION"),function(o,l,u){return(Math.log(u)-Math.log(l))/Math.log(1+o)})}},{key:"xnpv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("XNPV"),function(o,l,u){var c=l.valuesFromTopLeftCorner(),p=Uf(c),m;try{for(p.s();!(m=p.n()).done;){var f=m.value;if(typeof f!="number")return new x(R.VALUE,D.NumberExpected)}}catch(A){p.e(A)}finally{p.f()}var d=c,h=u.valuesFromTopLeftCorner(),y=Uf(h),b;try{for(y.s();!(b=y.n()).done;){var g=b.value;if(typeof g!="number")return new x(R.VALUE,D.NumberExpected)}}catch(A){y.e(A)}finally{y.f()}var v=h;if(v.length!==d.length)return new x(R.NUM,D.EqualLength);var C=v.length,w=0;if(v[0]<0)return new x(R.NUM,D.ValueSmall);for(var S=0;S<C;S++){if(v[S]=Math.floor(v[S]),v[S]<v[0])return new x(R.NUM,D.ValueSmall);w+=d[S]/Math.pow(1+o,(v[S]-v[0])/365)}return w})}}]),e}(Y);xA.implementedFunctions={PMT:{method:"pmt",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0}],returnNumberType:te.NUMBER_CURRENCY},IPMT:{method:"ipmt",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0}],returnNumberType:te.NUMBER_CURRENCY},PPMT:{method:"ppmt",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0}],returnNumberType:te.NUMBER_CURRENCY},FV:{method:"fv",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0}],returnNumberType:te.NUMBER_CURRENCY},CUMIPMT:{method:"cumipmt",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.INTEGER,minValue:1},{argumentType:N.INTEGER,minValue:1},{argumentType:N.INTEGER,minValue:0,maxValue:1}],returnNumberType:te.NUMBER_CURRENCY},CUMPRINC:{method:"cumprinc",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.INTEGER,minValue:1},{argumentType:N.INTEGER,minValue:1},{argumentType:N.INTEGER,minValue:0,maxValue:1}],returnNumberType:te.NUMBER_CURRENCY},DB:{method:"db",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:0},{argumentType:N.INTEGER,minValue:1,maxValue:12,defaultValue:12}],returnNumberType:te.NUMBER_CURRENCY},DDB:{method:"ddb",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.INTEGER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0,defaultValue:2}],returnNumberType:te.NUMBER_CURRENCY},DOLLARDE:{method:"dollarde",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:0}]},DOLLARFR:{method:"dollarfr",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:0}]},EFFECT:{method:"effect",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1}],returnNumberType:te.NUMBER_PERCENT},ISPMT:{method:"ispmt",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},NOMINAL:{method:"nominal",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1}],returnNumberType:te.NUMBER_PERCENT},NPER:{method:"nper",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0}]},PV:{method:"pv",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0}],returnNumberType:te.NUMBER_CURRENCY},RATE:{method:"rate",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:.1}],returnNumberType:te.NUMBER_PERCENT},RRI:{method:"rri",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_PERCENT},SLN:{method:"sln",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_CURRENCY},SYD:{method:"syd",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0}],returnNumberType:te.NUMBER_CURRENCY},TBILLEQ:{method:"tbilleq",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0}],returnNumberType:te.NUMBER_PERCENT},TBILLPRICE:{method:"tbillprice",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0}],returnNumberType:te.NUMBER_CURRENCY},TBILLYIELD:{method:"tbillyield",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0}],returnNumberType:te.NUMBER_PERCENT},FVSCHEDULE:{method:"fvschedule",parameters:[{argumentType:N.NUMBER},{argumentType:N.RANGE}],returnNumberType:te.NUMBER_CURRENCY},NPV:{method:"npv",parameters:[{argumentType:N.NUMBER},{argumentType:N.ANY}],repeatLastArgs:1,returnNumberType:te.NUMBER_CURRENCY},MIRR:{method:"mirr",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.NUMBER}],returnNumberType:te.NUMBER_PERCENT},PDURATION:{method:"pduration",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0}]},XNPV:{method:"xnpv",parameters:[{argumentType:N.NUMBER,greaterThan:-1},{argumentType:N.RANGE},{argumentType:N.RANGE}]}};function EA(i,t,e,r,a){if(i===0)return(-e-r)/t;var s=Math.pow(1+i,t);return(r*i+e*i*s)*(a?1/(1+i):1)/(1-s)}function RA(i,t,e,r,a,s){var o=EA(i,e,r,a,s);return t===1?i*(s?0:-r):i*(s?VA(i,t-2,o,r,s)-o:VA(i,t-1,o,r,s))}function VA(i,t,e,r,a){if(i===0)return-r-e*t;var s=Math.pow(1+i,t);return e*(a?1+i:1)*(1-s)/i-r*s}function _F(i,t,e,r,a,s){return EA(i,e,r,a,s)-RA(i,t,e,r,a,s)}function IA(i,t){for(var e=0,r=t.length-1;r>=0;r--){if(e+=t[r],i===-1){if(e===0)continue;return new x(R.DIV_BY_ZERO)}e/=1+i}return e}var Jet=j(q());function ov(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ov=function(e){return typeof e}:ov=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ov(i)}function cme(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function kF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function pme(i,t,e){return t&&kF(i.prototype,t),e&&kF(i,e),i}function mme(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&OA(i,t)}function OA(i,t){return OA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},OA(i,t)}function fme(i){var t=yme();return function(){var r=lv(i),a;if(t){var s=lv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return dme(this,a)}}function dme(i,t){if(t&&(ov(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hme(i)}function hme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function yme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function lv(i){return lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},lv(i)}var DA=function(i){mme(e,i);var t=fme(e);function e(){return cme(this,e),t.apply(this,arguments)}return pme(e,[{key:"formulatext",value:function(a,s){var o=this;return this.runFunctionWithReferenceArgument(a.args,s,this.metadata("FORMULATEXT"),function(){return new x(R.NA,D.WrongArgNumber)},function(l){var u;return(u=o.serialization.getCellFormula(l))!==null&&u!==void 0?u:new x(R.NA,D.Formula)})}}]),e}(Y);DA.implementedFunctions={FORMULATEXT:{method:"formulatext",parameters:[{argumentType:N.NOERROR}],doesNotNeedArgumentsToBeComputed:!0,isDependentOnSheetStructureChange:!0,vectorizationForbidden:!0}};var mtt=j(q());function uv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uv=function(e){return typeof e}:uv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(i)}function bme(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function FF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function gme(i,t,e){return t&&FF(i.prototype,t),e&&FF(i,e),i}function vme(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&PA(i,t)}function PA(i,t){return PA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},PA(i,t)}function Tme(i){var t=Sme();return function(){var r=cv(i),a;if(t){var s=cv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Nme(this,a)}}function Nme(i,t){if(t&&(uv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cme(i)}function Cme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Sme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function cv(i){return cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},cv(i)}var _A=function(i){vme(e,i);var t=Tme(e);function e(){return bme(this,e),t.apply(this,arguments)}return gme(e,[{key:"isbinary",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISBINARY"),function(o){return/^[01]{1,10}$/.test(o)})}},{key:"iserr",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISERR"),function(o){return o instanceof x&&o.type!==R.NA})}},{key:"iserror",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISERROR"),function(o){return o instanceof x})}},{key:"isformula",value:function(a,s){var o=this;return this.runFunctionWithReferenceArgument(a.args,s,this.metadata("ISFORMULA"),function(){return new x(R.NA,D.WrongArgNumber)},function(l){var u=o.dependencyGraph.addressMapping.getCell(l);return u instanceof lr})}},{key:"isblank",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISBLANK"),function(o){return o===se})}},{key:"isna",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISNA"),function(o){return o instanceof x&&o.type==R.NA})}},{key:"isnumber",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISNUMBER"),he)}},{key:"islogical",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISLOGICAL"),function(o){return typeof o=="boolean"})}},{key:"isref",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISREF"),function(o){return o instanceof x&&(o.type==R.REF||o.type==R.CYCLE)})}},{key:"istext",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISTEXT"),function(o){return typeof o=="string"})}},{key:"isnontext",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISNONTEXT"),function(o){return typeof o!="string"})}},{key:"column",value:function(a,s){return this.runFunctionWithReferenceArgument(a.args,s,this.metadata("COLUMN"),function(){return s.formulaAddress.col+1},function(o){return o.col+1})}},{key:"columns",value:function(a,s){if(a.args.length!==1)return new x(R.NA,D.WrongArgNumber);if(a.args.some(function(u){return u.type===P.EMPTY}))return new x(R.NUM,D.EmptyArg);for(var o=a.args[0];o.type===P.PARENTHESIS;)o=o.expression;if(o.type===P.CELL_RANGE||o.type===P.COLUMN_RANGE)return o.end.col-o.start.col+1;if(o.type===P.CELL_REFERENCE)return 1;if(o.type===P.ROW_RANGE)return this.config.maxColumns;var l=this.evaluateAst(o,s);return l instanceof J?l.width():l instanceof x?l:1}},{key:"row",value:function(a,s){return this.runFunctionWithReferenceArgument(a.args,s,this.metadata("ROW"),function(){return s.formulaAddress.row+1},function(o){return o.row+1})}},{key:"rows",value:function(a,s){if(a.args.length!==1)return new x(R.NA,D.WrongArgNumber);if(a.args.some(function(u){return u.type===P.EMPTY}))return new x(R.NUM,D.EmptyArg);for(var o=a.args[0];o.type===P.PARENTHESIS;)o=o.expression;if(o.type===P.CELL_RANGE||o.type===P.ROW_RANGE)return o.end.row-o.start.row+1;if(o.type===P.CELL_REFERENCE)return 1;if(o.type===P.COLUMN_RANGE)return this.config.maxRows;var l=this.evaluateAst(o,s);return l instanceof J?l.height():l instanceof x?l:1}},{key:"index",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("INDEX"),function(l,u,c){var p,m,f,d,h,y;if(c<1||u<1)return new x(R.VALUE,D.LessThanOne);if(c>l.width()||u>l.height())return new x(R.NUM,D.ValueLarge);return(y=(f=(m=(p=l==null?void 0:l.data)===null||p===void 0?void 0:p[u-1])===null||m===void 0?void 0:m[c-1])!==null&&f!==void 0?f:(h=(d=l==null?void 0:l.data)===null||d===void 0?void 0:d[0])===null||h===void 0?void 0:h[0])!==null&&y!==void 0?y:new x(R.VALUE,D.CellRangeExpected);var b})}},{key:"na",value:function(a,s){return new x(R.NA)}},{key:"sheet",value:function(a,s){var o=this;return this.runFunctionWithReferenceArgument(a.args,s,this.metadata("SHEET"),function(){return s.formulaAddress.sheet+1},function(l){return l.sheet+1},function(l){var u=o.dependencyGraph.sheetMapping.get(l);return u!==void 0?u+1:new x(R.NA,D.SheetRef)})}},{key:"sheets",value:function(a,s){var o=this;return this.runFunctionWithReferenceArgument(a.args,s,this.metadata("SHEETS"),function(){return o.dependencyGraph.sheetMapping.numberOfSheets()},function(){return 1},function(){return new x(R.VALUE,D.CellRefExpected)})}}]),e}(Y);_A.implementedFunctions={COLUMN:{method:"column",parameters:[{argumentType:N.NOERROR,optional:!0}],isDependentOnSheetStructureChange:!0,doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0},COLUMNS:{method:"columns",parameters:[{argumentType:N.RANGE}],isDependentOnSheetStructureChange:!0,doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0},ISBINARY:{method:"isbinary",parameters:[{argumentType:N.STRING}]},ISERR:{method:"iserr",parameters:[{argumentType:N.SCALAR}]},ISFORMULA:{method:"isformula",parameters:[{argumentType:N.NOERROR}],doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0},ISNA:{method:"isna",parameters:[{argumentType:N.SCALAR}]},ISREF:{method:"isref",parameters:[{argumentType:N.SCALAR}],vectorizationForbidden:!0},ISERROR:{method:"iserror",parameters:[{argumentType:N.SCALAR}]},ISBLANK:{method:"isblank",parameters:[{argumentType:N.SCALAR}]},ISNUMBER:{method:"isnumber",parameters:[{argumentType:N.SCALAR}]},ISLOGICAL:{method:"islogical",parameters:[{argumentType:N.SCALAR}]},ISTEXT:{method:"istext",parameters:[{argumentType:N.SCALAR}]},ISNONTEXT:{method:"isnontext",parameters:[{argumentType:N.SCALAR}]},INDEX:{method:"index",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:1}]},NA:{method:"na",parameters:[]},ROW:{method:"row",parameters:[{argumentType:N.NOERROR,optional:!0}],isDependentOnSheetStructureChange:!0,doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0},ROWS:{method:"rows",parameters:[{argumentType:N.RANGE}],isDependentOnSheetStructureChange:!0,doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0},SHEET:{method:"sheet",parameters:[{argumentType:N.STRING}],doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0},SHEETS:{method:"sheets",parameters:[{argumentType:N.STRING}],doesNotNeedArgumentsToBeComputed:!0,vectorizationForbidden:!0}};var Vtt=j(q());function pv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pv=function(e){return typeof e}:pv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pv(i)}function Ame(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function MF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function wme(i,t,e){return t&&MF(i.prototype,t),e&&MF(i,e),i}function xme(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&kA(i,t)}function kA(i,t){return kA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},kA(i,t)}function Eme(i){var t=Ime();return function(){var r=mv(i),a;if(t){var s=mv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Rme(this,a)}}function Rme(i,t){if(t&&(pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vme(i)}function Vme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ime(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function mv(i){return mv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mv(i)}var FA=function(i){xme(e,i);var t=Eme(e);function e(){return Ame(this,e),t.apply(this,arguments)}return wme(e,[{key:"iseven",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISEVEN"),function(o){return o%2==0})}}]),e}(Y);FA.implementedFunctions={ISEVEN:{method:"iseven",parameters:[{argumentType:N.NUMBER}]}};var Ltt=j(q());function fv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fv=function(e){return typeof e}:fv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fv(i)}function Ome(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function jF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Dme(i,t,e){return t&&jF(i.prototype,t),e&&jF(i,e),i}function Pme(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&MA(i,t)}function MA(i,t){return MA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},MA(i,t)}function _me(i){var t=Mme();return function(){var r=dv(i),a;if(t){var s=dv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return kme(this,a)}}function kme(i,t){if(t&&(fv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fme(i)}function Fme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Mme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function dv(i){return dv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dv(i)}var jA=function(i){Pme(e,i);var t=_me(e);function e(){return Ome(this,e),t.apply(this,arguments)}return Dme(e,[{key:"isodd",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ISODD"),function(o){return o%2==1})}}]),e}(Y);jA.implementedFunctions={ISODD:{method:"isodd",parameters:[{argumentType:N.NUMBER}]}};var Jtt=j(q());function hv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hv=function(e){return typeof e}:hv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hv(i)}function jme(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function BF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Bme(i,t,e){return t&&BF(i.prototype,t),e&&BF(i,e),i}function Lme(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&BA(i,t)}function BA(i,t){return BA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},BA(i,t)}function Ume(i){var t=Gme();return function(){var r=yv(i),a;if(t){var s=yv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return zme(this,a)}}function zme(i,t){if(t&&(hv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hme(i)}function Hme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Gme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function yv(i){return yv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yv(i)}var LA=function(i){Lme(e,i);var t=Ume(e);function e(){return jme(this,e),t.apply(this,arguments)}return Bme(e,[{key:"log10",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LOG10"),Math.log10)}},{key:"log",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LOG"),function(o,l){return Math.log(o)/Math.log(l)})}},{key:"ln",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LN"),Math.log)}}]),e}(Y);LA.implementedFunctions={LOG10:{method:"log10",parameters:[{argumentType:N.NUMBER}]},LOG:{method:"log",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,defaultValue:10,greaterThan:0}]},LN:{method:"ln",parameters:[{argumentType:N.NUMBER}]}};var crt=j(q());function bv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bv=function(e){return typeof e}:bv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bv(i)}function qme(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function LF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Wme(i,t,e){return t&&LF(i.prototype,t),e&&LF(i,e),i}function $me(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&UA(i,t)}function UA(i,t){return UA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},UA(i,t)}function Kme(i){var t=Zme();return function(){var r=gv(i),a;if(t){var s=gv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Xme(this,a)}}function Xme(i,t){if(t&&(bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yme(i)}function Yme(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function gv(i){return gv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gv(i)}var vv=parseFloat(Math.PI.toFixed(14)),zA=function(i){$me(e,i);var t=Kme(e);function e(){return qme(this,e),t.apply(this,arguments)}return Wme(e,[{key:"pi",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PI"),function(){return vv})}},{key:"sqrtpi",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SQRTPI"),function(o){return Math.sqrt(vv*o)})}}]),e}(Y);zA.implementedFunctions={PI:{method:"pi",parameters:[]},SQRTPI:{method:"sqrtpi",parameters:[{argumentType:N.NUMBER,minValue:0}]}};var Crt=j(q());function Tv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tv=function(e){return typeof e}:Tv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tv(i)}function UF(i,t){return tfe(i)||efe(i,t)||Qme(i,t)||Jme()}function Jme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qme(i,t){if(!!i){if(typeof i=="string")return zF(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zF(i,t)}}function zF(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function efe(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function tfe(i){if(Array.isArray(i))return i}function rfe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function HF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function nfe(i,t,e){return t&&HF(i.prototype,t),e&&HF(i,e),i}function ife(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&HA(i,t)}function HA(i,t){return HA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},HA(i,t)}function afe(i){var t=lfe();return function(){var r=Nv(i),a;if(t){var s=Nv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return sfe(this,a)}}function sfe(i,t){if(t&&(Tv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ofe(i)}function ofe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function lfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Nv(i){return Nv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nv(i)}function GF(i,t){return new be(t.width,i.height)}function GA(i,t,e){return new be(1+(i.width-t)/e,1+(i.height-t)/e)}var qA=function(i){ife(e,i);var t=afe(e);function e(r){var a;return rfe(this,e),a=t.call(this,r),a.createCpuKernel=function(s,o){return function(){for(var l=[],u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];for(var m=0;m<o.height;++m){l.push([]);for(var f=0;f<o.width;++f)l[m][f]=s.apply({thread:{x:f,y:m}},c)}return l}},a.createGpuJsKernel=function(s,o){return a.interpreter.getGpuInstance().createKernel(s).setPrecision("unsigned").setOutput([o.width,o.height])},a.config.gpujs===void 0?a.createKernel=a.createCpuKernel:a.createKernel=a.createGpuJsKernel,a}return nfe(e,[{key:"mmult",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MMULT"),function(l,u){if(!l.hasOnlyNumbers()||!u.hasOnlyNumbers())return new x(R.VALUE,D.NumberRange);if(u.height()!==l.width())return new x(R.VALUE,D.ArrayDimensions);var c=GF(l.size,u.size),p=o.createKernel(function(m,f,d){for(var h=0,y=0;y<d;++y)h+=m[this.thread.y][y]*f[y][this.thread.x];return h},c)(l.rawNumbers(),u.rawNumbers(),l.width());return J.onlyNumbers(p)})}},{key:"mmultArraySize",value:function(a,s){var o=this;if(a.args.length!==2)return be.error();var l=this.metadata("MMULT"),u=a.args.map(function(f){var d;return o.arraySizeForAst(f,new qr(s.formulaAddress,s.arraysFlag||((d=l==null?void 0:l.arrayFunction)!==null&&d!==void 0?d:!1)))}),c=UF(u,2),p=c[0],m=c[1];return GF(p,m)}},{key:"maxpool",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MAXPOOL"),function(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u;if(!l.hasOnlyNumbers())return new x(R.VALUE,D.NumberRange);var p=GA(l.size,u,c),m=o.createKernel(function(f,d,h){for(var y=this.thread.x*h,b=this.thread.y*h,g=f[b][y],v=0;v<d;v++)for(var C=0;C<d;C++)g=Math.max(g,f[b+v][y+C]);return g},p)(l.rawNumbers(),u,c);return J.onlyNumbers(m)})}},{key:"medianpool",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MEDIANPOOL"),function(l,u){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u;if(!l.hasOnlyNumbers())return new x(R.VALUE,D.NumberRange);var p=GA(l.size,u,c),m=o.createKernel(function(f,d,h){for(var y=this.thread.x*h,b=this.thread.y*h,g=f[b][y],v=0;v<d;v++)for(var C=0;C<d;C++)g=Math.max(g,f[b+v][y+C]);for(var w=f[b][y],S=0;S<d;S++)for(var A=0;A<d;A++)w=Math.min(w,f[b+S][y+A]);for(var E=d*d,I=w,V=g,O=42,k=0;k<32;k++){for(var M=(I+V)/2,L=0,G=0;G<d;G++)for(var K=0;K<d;K++)f[b+G][y+K]>M&&L++;if(d%2==0)if(L===E/2){O=M;break}else L>E/2?I=M:V=M;else if(L===(E-1)/2){O=M;break}else L>(E-1)/2?I=M:V=M}return O},p)(l.rawNumbers(),u,c);return J.onlyNumbers(m)})}},{key:"maxpoolArraySize",value:function(a,s){var o=this;if(a.args.length<2||a.args.length>3)return be.error();var l=this.metadata("MAXPOOL"),u=a.args.map(function(h){var y;return o.arraySizeForAst(h,new qr(s.formulaAddress,s.arraysFlag||((y=l==null?void 0:l.arrayFunction)!==null&&y!==void 0?y:!1)))}),c=u[0],p=a.args[1],m;p.type===P.NUMBER?m=p.value:m=1;var f=m;if(a.args.length===3){var d=a.args[2];d.type===P.NUMBER?f=d.value:f=1}return m>c.width||m>c.height||f>m||(c.width-m)%f!=0||(c.height-m)%f!=0?be.error():GA(c,m,f)}},{key:"medianpoolArraySize",value:function(a,s){return this.maxpoolArraySize(a,s)}},{key:"transpose",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TRANSPOSE"),function(o){for(var l=o.rawData(),u=o.size,c=[],p=0;p<u.width;++p){c[p]=[];for(var m=0;m<u.height;++m)c[p][m]=l[m][p]}return J.onlyValues(c)})}},{key:"transposeArraySize",value:function(a,s){var o=this;if(a.args.length!==1)return be.error();var l=this.metadata("MMULT"),u=a.args.map(function(m){var f;return o.arraySizeForAst(m,new qr(s.formulaAddress,s.arraysFlag||((f=l==null?void 0:l.arrayFunction)!==null&&f!==void 0?f:!1)))}),c=UF(u,1),p=c[0];return new be(p.height,p.width)}}]),e}(Y);qA.implementedFunctions={MMULT:{method:"mmult",arraySizeMethod:"mmultArraySize",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}],vectorizationForbidden:!0},TRANSPOSE:{method:"transpose",arraySizeMethod:"transposeArraySize",parameters:[{argumentType:N.RANGE}],vectorizationForbidden:!0},MAXPOOL:{method:"maxpool",arraySizeMethod:"maxpoolArraySize",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0}],vectorizationForbidden:!0},MEDIANPOOL:{method:"medianpool",arraySizeMethod:"medianpoolArraySize",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0}],vectorizationForbidden:!0}};var Grt=j(q());function Cv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cv=function(e){return typeof e}:Cv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cv(i)}function ufe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function qF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function cfe(i,t,e){return t&&qF(i.prototype,t),e&&qF(i,e),i}function pfe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&WA(i,t)}function WA(i,t){return WA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},WA(i,t)}function mfe(i){var t=hfe();return function(){var r=Sv(i),a;if(t){var s=Sv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return ffe(this,a)}}function ffe(i,t){if(t&&(Cv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dfe(i)}function dfe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function hfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Sv(i){return Sv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Sv(i)}var $A=function(i){pfe(e,i);var t=mfe(e);function e(){return ufe(this,e),t.apply(this,arguments)}return cfe(e,[{key:"median",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MEDIAN"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);return p instanceof x?p:p.length===0?new x(R.NUM,D.OneValue):(p.sort(function(m,f){return m-f}),p.length%2==0?(p[p.length/2-1]+p[p.length/2])/2:p[Math.floor(p.length/2)])})}},{key:"large",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("LARGE"),function(l,u){var c=o.arithmeticHelper.manyToExactNumbers(l.valuesFromTopLeftCorner());return c instanceof x?c:(c.sort(function(p,m){return p-m}),u=Math.trunc(u),u>c.length?new x(R.NUM,D.ValueLarge):c[c.length-u])})}},{key:"small",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SMALL"),function(l,u){var c=o.arithmeticHelper.manyToExactNumbers(l.valuesFromTopLeftCorner());return c instanceof x?c:(c.sort(function(p,m){return p-m}),u=Math.trunc(u),u>c.length?new x(R.NUM,D.ValueLarge):c[u-1])})}}]),e}(Y);$A.implementedFunctions={MEDIAN:{method:"median",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},LARGE:{method:"large",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER,minValue:1}]},SMALL:{method:"small",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER,minValue:1}]}};var nnt=j(q());function Av(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Av=function(e){return typeof e}:Av=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Av(i)}function yfe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function WF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function bfe(i,t,e){return t&&WF(i.prototype,t),e&&WF(i,e),i}function gfe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&KA(i,t)}function KA(i,t){return KA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},KA(i,t)}function vfe(i){var t=Cfe();return function(){var r=wv(i),a;if(t){var s=wv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Tfe(this,a)}}function Tfe(i,t){if(t&&(Av(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nfe(i)}function Nfe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function wv(i){return wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},wv(i)}var XA=function(i){gfe(e,i);var t=vfe(e);function e(){return yfe(this,e),t.apply(this,arguments)}return bfe(e,[{key:"mod",value:function(a,s){return this.runFunction(a.args,s,this.metadata("MOD"),function(o,l){return l===0?new x(R.DIV_BY_ZERO):o%l})}}]),e}(Y);XA.implementedFunctions={MOD:{method:"mod",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]}};var Ant=j(q());function xv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xv=function(e){return typeof e}:xv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xv(i)}function $F(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=Sfe(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function Sfe(i,t){if(!!i){if(typeof i=="string")return KF(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return KF(i,t)}}function KF(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Afe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&YA(i,t)}function YA(i,t){return YA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},YA(i,t)}function wfe(i){var t=Rfe();return function(){var r=Ev(i),a;if(t){var s=Ev(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return xfe(this,a)}}function xfe(i,t){if(t&&(xv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Efe(i)}function Efe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Rfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Ev(i){return Ev=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ev(i)}function XF(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function YF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ZF(i,t,e){return t&&YF(i.prototype,t),e&&YF(i,e),i}function Rv(i){return he(i)&&!Number.isFinite(W(i))?0:i}var js=function(){function i(t,e,r){XF(this,i),this.sumsq=t,this.sum=e,this.count=r}return ZF(i,[{key:"compose",value:function(e){return new i(this.sumsq+e.sumsq,this.sum+e.sum,this.count+e.count)}},{key:"averageValue",value:function(){if(this.count>0)return this.sum/this.count}},{key:"varSValue",value:function(){if(this.count>1)return(this.sumsq-this.sum*this.sum/this.count)/(this.count-1)}},{key:"varPValue",value:function(){if(this.count>0)return(this.sumsq-this.sum*this.sum/this.count)/this.count}}],[{key:"single",value:function(e){return new i(e*e,e,1)}}]),i}();js.empty=new js(0,0,0);var Vv=function(i){Afe(e,i);var t=wfe(e);function e(){var r;return XF(this,e),r=t.apply(this,arguments),r.addWithEpsilonRaw=function(a,s){return r.arithmeticHelper.addWithEpsilonRaw(a,s)},r}return ZF(e,[{key:"sum",value:function(a,s){return this.doSum(a.args,s)}},{key:"sumsq",value:function(a,s){return this.reduce(a.args,s,0,"SUMSQ",this.addWithEpsilonRaw,function(o){return Math.pow(W(o),2)},Ac)}},{key:"max",value:function(a,s){return this.doMax(a.args,s)}},{key:"maxa",value:function(a,s){var o=this.reduce(a.args,s,Number.NEGATIVE_INFINITY,"MAXA",function(l,u){return Math.max(l,u)},W,Iv);return Rv(o)}},{key:"min",value:function(a,s){return this.doMin(a.args,s)}},{key:"mina",value:function(a,s){var o=this.reduce(a.args,s,Number.POSITIVE_INFINITY,"MINA",function(l,u){return Math.min(l,u)},W,Iv);return Rv(o)}},{key:"count",value:function(a,s){return this.doCount(a.args,s)}},{key:"counta",value:function(a,s){return this.doCounta(a.args,s)}},{key:"average",value:function(a,s){return this.doAverage(a.args,s)}},{key:"averagea",value:function(a,s){var o,l=this.reduce(a.args,s,js.empty,"_AGGREGATE_A",function(u,c){return u.compose(c)},function(u){return js.single(W(u))},Iv);return l instanceof x?l:(o=l.averageValue())!==null&&o!==void 0?o:new x(R.DIV_BY_ZERO)}},{key:"vars",value:function(a,s){return this.doVarS(a.args,s)}},{key:"varp",value:function(a,s){return this.doVarP(a.args,s)}},{key:"vara",value:function(a,s){var o,l=this.reduceAggregateA(a.args,s);return l instanceof x?l:(o=l.varSValue())!==null&&o!==void 0?o:new x(R.DIV_BY_ZERO)}},{key:"varpa",value:function(a,s){var o,l=this.reduceAggregateA(a.args,s);return l instanceof x?l:(o=l.varPValue())!==null&&o!==void 0?o:new x(R.DIV_BY_ZERO)}},{key:"stdevs",value:function(a,s){return this.doStdevS(a.args,s)}},{key:"stdevp",value:function(a,s){return this.doStdevP(a.args,s)}},{key:"stdeva",value:function(a,s){var o=this.reduceAggregateA(a.args,s);if(o instanceof x)return o;var l=o.varSValue();return l===void 0?new x(R.DIV_BY_ZERO):Math.sqrt(l)}},{key:"stdevpa",value:function(a,s){var o=this.reduceAggregateA(a.args,s);if(o instanceof x)return o;var l=o.varPValue();return l===void 0?new x(R.DIV_BY_ZERO):Math.sqrt(l)}},{key:"product",value:function(a,s){return this.doProduct(a.args,s)}},{key:"subtotal",value:function(a,s){if(a.args.length<2)return new x(R.NA,D.WrongArgNumber);var o=this.coerceToType(this.evaluateAst(a.args[0],s),{argumentType:N.NUMBER},s),l=a.args.slice(1);switch(o){case 1:case 101:return this.doAverage(l,s);case 2:case 102:return this.doCount(l,s);case 3:case 103:return this.doCounta(l,s);case 4:case 104:return this.doMax(l,s);case 5:case 105:return this.doMin(l,s);case 6:case 106:return this.doProduct(l,s);case 7:case 107:return this.doStdevS(l,s);case 8:case 108:return this.doStdevP(l,s);case 9:case 109:return this.doSum(l,s);case 10:case 110:return this.doVarS(l,s);case 11:case 111:return this.doVarP(l,s);default:return new x(R.VALUE,D.BadMode)}}},{key:"reduceAggregate",value:function(a,s){return this.reduce(a,s,js.empty,"_AGGREGATE",function(o,l){return o.compose(l)},function(o){return js.single(W(o))},Ac)}},{key:"reduceAggregateA",value:function(a,s){return this.reduce(a,s,js.empty,"_AGGREGATE_A",function(o,l){return o.compose(l)},function(o){return js.single(W(o))},Iv)}},{key:"doAverage",value:function(a,s){var o,l=this.reduceAggregate(a,s);return l instanceof x?l:(o=l.averageValue())!==null&&o!==void 0?o:new x(R.DIV_BY_ZERO)}},{key:"doVarS",value:function(a,s){var o,l=this.reduceAggregate(a,s);return l instanceof x?l:(o=l.varSValue())!==null&&o!==void 0?o:new x(R.DIV_BY_ZERO)}},{key:"doVarP",value:function(a,s){var o,l=this.reduceAggregate(a,s);return l instanceof x?l:(o=l.varPValue())!==null&&o!==void 0?o:new x(R.DIV_BY_ZERO)}},{key:"doStdevS",value:function(a,s){var o=this.reduceAggregate(a,s);if(o instanceof x)return o;var l=o.varSValue();return l===void 0?new x(R.DIV_BY_ZERO):Math.sqrt(l)}},{key:"doStdevP",value:function(a,s){var o=this.reduceAggregate(a,s);if(o instanceof x)return o;var l=o.varPValue();return l===void 0?new x(R.DIV_BY_ZERO):Math.sqrt(l)}},{key:"doCount",value:function(a,s){return this.reduce(a,s,0,"COUNT",function(o,l){return o+l},W,function(o){return he(o)?1:0})}},{key:"doCounta",value:function(a,s){return this.reduce(a,s,0,"COUNTA",function(o,l){return o+l},W,function(o){return o===se?0:1})}},{key:"doMax",value:function(a,s){var o=this.reduce(a,s,Number.NEGATIVE_INFINITY,"MAX",function(l,u){return Math.max(l,u)},W,Ac);return Rv(o)}},{key:"doMin",value:function(a,s){var o=this.reduce(a,s,Number.POSITIVE_INFINITY,"MIN",function(l,u){return Math.min(l,u)},W,Ac);return Rv(o)}},{key:"doSum",value:function(a,s){return this.reduce(a,s,0,"SUM",this.addWithEpsilonRaw,W,Ac)}},{key:"doProduct",value:function(a,s){return this.reduce(a,s,1,"PRODUCT",function(o,l){return o*l},W,Ac)}},{key:"reduce",value:function(a,s,o,l,u,c,p){var m=this;return a.length<1?new x(R.NA,D.WrongArgNumber):a.reduce(function(f,d){if(f instanceof x)return f;if(d.type===P.CELL_RANGE||d.type===P.COLUMN_RANGE||d.type===P.ROW_RANGE){var h=m.evaluateRange(d,s,o,l,u,c,p);return h instanceof x?h:u(h,f)}var y;if(y=m.evaluateAst(d,s),y instanceof J){var b=Array.from(y.valuesFromTopLeftCorner()).map(p).filter(function(g){return g!==void 0});return b.map(function(g){return g instanceof x?g:c(g)}).reduce(function(g,v){return g instanceof x?g:v instanceof x?v:u(g,v)},f)}else if(d.type===P.CELL_REFERENCE){if(y=p(y),y===void 0)return f}else if(y=m.coerceScalarToNumberOrError(y),y=p(y),y===void 0)return f;return y instanceof x?y:u(f,c(y))},o)}},{key:"evaluateRange",value:function(a,s,o,l,u,c,p){var m;try{m=ae.fromAst(a,s.formulaAddress)}catch(g){if(g instanceof Cs)return new x(R.REF,D.RangeManySheets);throw g}var f=m.start,d=m.end,h=this.dependencyGraph.getRange(f,d);if(h===void 0)throw new Error("Range does not exists in graph");var y=h.getFunctionValue(l);if(y===void 0){var b=this.getRangeValues(l,m,c,p);y=b.reduce(function(g,v){return g instanceof x?g:v instanceof x?v:u(g,v)},o),h.setFunctionValue(l,y)}return y}},{key:"getRangeValues",value:function(a,s,o,l){var u=[],c=this.dependencyGraph.rangeMapping.findSmallerRange(s),p=c.smallerRangeVertex,m=c.restRange,f=this.dependencyGraph.getRange(s.start,s.end),d;if(p!==void 0&&this.dependencyGraph.existsEdge(p,f)){var h=p.getFunctionValue(a);if(h!==void 0)u.push(h);else{var y=$F(p.range.addresses(this.dependencyGraph)),b;try{for(y.s();!(b=y.n()).done;){var g=b.value,v=l(this.dependencyGraph.getScalarValue(g));v instanceof x?u.push(v):v!==void 0&&u.push(o(v))}}catch(E){y.e(E)}finally{y.f()}}d=m}else d=s;var C=$F(d.addresses(this.dependencyGraph)),w;try{for(C.s();!(w=C.n()).done;){var S=w.value,A=l(this.dependencyGraph.getScalarValue(S));A instanceof x?u.push(A):A!==void 0&&u.push(o(A))}}catch(E){C.e(E)}finally{C.f()}return u}}]),e}(Y);Vv.implementedFunctions={SUM:{method:"sum",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},SUMSQ:{method:"sumsq",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},MAX:{method:"max",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},MIN:{method:"min",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},MAXA:{method:"maxa",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},MINA:{method:"mina",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},COUNT:{method:"count",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},COUNTA:{method:"counta",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},AVERAGE:{method:"average",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},AVERAGEA:{method:"averagea",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},PRODUCT:{method:"product",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},"VAR.S":{method:"vars",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},"VAR.P":{method:"varp",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},VARA:{method:"vara",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},VARPA:{method:"varpa",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},"STDEV.S":{method:"stdevs",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},"STDEV.P":{method:"stdevp",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},STDEVA:{method:"stdeva",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},STDEVPA:{method:"stdevpa",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},SUBTOTAL:{method:"subtotal",parameters:[{argumentType:N.NUMBER},{argumentType:N.ANY}],repeatLastArgs:1}};Vv.aliases={VAR:"VAR.S",VARP:"VAR.P",STDEV:"STDEV.S",STDEVP:"STDEV.P",VARS:"VAR.S",STDEVS:"STDEV.S"};function Ac(i){if(he(i)||i instanceof x)return i}function Iv(i){return typeof i=="boolean"?yb(i):he(i)||i instanceof x?i:typeof i=="string"?0:void 0}var znt=j(q());function Ov(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ov=function(e){return typeof e}:Ov=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ov(i)}function Vfe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function JF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ife(i,t,e){return t&&JF(i.prototype,t),e&&JF(i,e),i}function Ofe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&ZA(i,t)}function ZA(i,t){return ZA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},ZA(i,t)}function Dfe(i){var t=kfe();return function(){var r=Dv(i),a;if(t){var s=Dv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Pfe(this,a)}}function Pfe(i,t){if(t&&(Ov(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _fe(i)}function _fe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function kfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Dv(i){return Dv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Dv(i)}var JA=function(i){Ofe(e,i);var t=Dfe(e);function e(){return Vfe(this,e),t.apply(this,arguments)}return Ife(e,[{key:"power",value:function(a,s){return this.runFunction(a.args,s,this.metadata("POWER"),Math.pow)}}]),e}(Y);JA.implementedFunctions={POWER:{method:"power",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]}};var Qnt=j(q());function Pv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pv=function(e){return typeof e}:Pv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pv(i)}function Ffe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function QF(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Mfe(i,t,e){return t&&QF(i.prototype,t),e&&QF(i,e),i}function jfe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&QA(i,t)}function QA(i,t){return QA=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},QA(i,t)}function Bfe(i){var t=zfe();return function(){var r=_v(i),a;if(t){var s=_v(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Lfe(this,a)}}function Lfe(i,t){if(t&&(Pv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ufe(i)}function Ufe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function zfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function _v(i){return _v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_v(i)}var e5=function(i){jfe(e,i);var t=Bfe(e);function e(){return Ffe(this,e),t.apply(this,arguments)}return Mfe(e,[{key:"radians",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RADIANS"),function(o){return o*(Math.PI/180)})}}]),e}(Y);e5.implementedFunctions={RADIANS:{method:"radians",parameters:[{argumentType:N.NUMBER}]}};var ait=j(ar());var fit=j(q());function kv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kv=function(e){return typeof e}:kv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kv(i)}function Hfe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function eM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Gfe(i,t,e){return t&&eM(i.prototype,t),e&&eM(i,e),i}function qfe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&t5(i,t)}function t5(i,t){return t5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},t5(i,t)}function Wfe(i){var t=Xfe();return function(){var r=Fv(i),a;if(t){var s=Fv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return $fe(this,a)}}function $fe(i,t){if(t&&(kv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kfe(i)}function Kfe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Fv(i){return Fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fv(i)}var pr=10,tM=255,rM=2,nM=36,Yfe="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",r5=function(i){qfe(e,i);var t=Wfe(e);function e(){return Hfe(this,e),t.apply(this,arguments)}return Gfe(e,[{key:"dec2bin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DEC2BIN"),function(o,l){return La(o,2,l)})}},{key:"dec2oct",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DEC2OCT"),function(o,l){return La(o,8,l)})}},{key:"dec2hex",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DEC2HEX"),function(o,l){return La(o,16,l)})}},{key:"bin2dec",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BIN2DEC"),function(o){var l=$i(o,2,pr);return l===void 0?new x(R.NUM,D.NotBinary):Ua(l,2)})}},{key:"bin2oct",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BIN2OCT"),function(o,l){var u=$i(o,2,pr);return u===void 0?new x(R.NUM,D.NotBinary):La(Ua(u,2),8,l)})}},{key:"bin2hex",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BIN2HEX"),function(o,l){var u=$i(o,2,pr);return u===void 0?new x(R.NUM,D.NotBinary):La(Ua(u,2),16,l)})}},{key:"oct2dec",value:function(a,s){return this.runFunction(a.args,s,this.metadata("OCT2DEC"),function(o){var l=$i(o,8,pr);return l===void 0?new x(R.NUM,D.NotOctal):Ua(l,8)})}},{key:"oct2bin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("OCT2BIN"),function(o,l){var u=$i(o,8,pr);return u===void 0?new x(R.NUM,D.NotOctal):La(Ua(u,8),2,l)})}},{key:"oct2hex",value:function(a,s){return this.runFunction(a.args,s,this.metadata("OCT2HEX"),function(o,l){var u=$i(o,8,pr);return u===void 0?new x(R.NUM,D.NotOctal):La(Ua(u,8),16,l)})}},{key:"hex2dec",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HEX2DEC"),function(o){var l=$i(o,16,pr);return l===void 0?new x(R.NUM,D.NotHex):Ua(l,16)})}},{key:"hex2bin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HEX2BIN"),function(o,l){var u=$i(o,16,pr);return u===void 0?new x(R.NUM,D.NotHex):La(Ua(u,16),2,l)})}},{key:"hex2oct",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HEX2OCT"),function(o,l){var u=$i(o,16,pr);return u===void 0?new x(R.NUM,D.NotHex):La(Ua(u,16),8,l)})}},{key:"base",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BASE"),Jfe)}},{key:"decimal",value:function(a,s){return this.runFunction(a.args,s,this.metadata("DECIMAL"),function(o,l){var u=$i(o,l,tM);return u===void 0?new x(R.NUM,D.NotHex):parseInt(u,l)})}}]),e}(Y);r5.implementedFunctions={DEC2BIN:{method:"dec2bin",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0,minValue:1,maxValue:10}]},DEC2OCT:{method:"dec2oct",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0,minValue:1,maxValue:10}]},DEC2HEX:{method:"dec2hex",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0,minValue:1,maxValue:10}]},BIN2DEC:{method:"bin2dec",parameters:[{argumentType:N.STRING}]},BIN2OCT:{method:"bin2oct",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:pr}]},BIN2HEX:{method:"bin2hex",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:pr}]},OCT2DEC:{method:"oct2dec",parameters:[{argumentType:N.STRING}]},OCT2BIN:{method:"oct2bin",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:pr}]},OCT2HEX:{method:"oct2hex",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:pr}]},HEX2DEC:{method:"hex2dec",parameters:[{argumentType:N.STRING}]},HEX2BIN:{method:"hex2bin",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:pr}]},HEX2OCT:{method:"hex2oct",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:pr}]},DECIMAL:{method:"decimal",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,minValue:rM,maxValue:nM}]},BASE:{method:"base",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:rM,maxValue:nM},{argumentType:N.NUMBER,optionalArg:!0,minValue:0,maxValue:tM}]}};function $i(i,t,e){var r=Yfe.substr(0,t),a=new RegExp("^[".concat(r,"]+$"));if(!(i.length>e||!a.test(i)))return i}function La(i,t,e){if(i>Zfe(t))return new x(R.NUM,D.ValueBaseLarge);if(i<iM(t))return new x(R.NUM,D.ValueBaseSmall);var r=aM(i,t);return e===void 0||i<0?r:r.length>e?new x(R.NUM,D.ValueBaseLong):Kr(r,e)}function iM(i){return-Math.pow(i,pr)/2}function Zfe(i){return-iM(i)-1}function Jfe(i,t,e){var r=aM(i,t);return e!==void 0&&e>r.length?Kr(r,e):r}function aM(i,t){var e=i<0?Math.pow(t,pr):0;return(i+e).toString(t).toUpperCase()}function Ua(i,t){var e=parseInt(i,t),r=Math.pow(t,pr);return e>=r/2?e-r:e}var Eit=j(q());function Mv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mv=function(e){return typeof e}:Mv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mv(i)}function Qfe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function sM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ede(i,t,e){return t&&sM(i.prototype,t),e&&sM(i,e),i}function tde(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&n5(i,t)}function n5(i,t){return n5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},n5(i,t)}function rde(i){var t=ade();return function(){var r=jv(i),a;if(t){var s=jv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return nde(this,a)}}function nde(i,t){if(t&&(Mv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ide(i)}function ide(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function ade(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function jv(i){return jv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jv(i)}var i5=function(i){tde(e,i);var t=rde(e);function e(){return Qfe(this,e),t.apply(this,arguments)}return ede(e,[{key:"rand",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RAND"),Math.random)}},{key:"randbetween",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RANDBETWEEN"),function(o,l){return l<o?new x(R.NUM,D.WrongOrder):(o=Math.ceil(o),l=Math.floor(l)+1,o===l&&(l+=1),o+Math.floor(Math.random()*(l-o)))})}}]),e}(Y);i5.implementedFunctions={RAND:{method:"rand",parameters:[],isVolatile:!0},RANDBETWEEN:{method:"randbetween",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}],isVolatile:!0}};var Lit=j(q());function Bv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Bv=function(e){return typeof e}:Bv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bv(i)}function sde(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function oM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function ode(i,t,e){return t&&oM(i.prototype,t),e&&oM(i,e),i}function lde(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&a5(i,t)}function a5(i,t){return a5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},a5(i,t)}function ude(i){var t=mde();return function(){var r=Lv(i),a;if(t){var s=Lv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return cde(this,a)}}function cde(i,t){if(t&&(Bv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pde(i)}function pde(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function mde(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Lv(i){return Lv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Lv(i)}function lM(i){var t=Math.ceil(i);return t%2==1?t:t+1}function uM(i){var t=Math.ceil(i);return t%2==0?t:t+1}var Uv=function(i){lde(e,i);var t=ude(e);function e(){return sde(this,e),t.apply(this,arguments)}return ode(e,[{key:"roundup",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ROUNDDOWN"),function(o,l){var u=Math.pow(10,l);return o<0?-Math.ceil(-o*u)/u:Math.ceil(o*u)/u})}},{key:"rounddown",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ROUNDDOWN"),function(o,l){var u=Math.pow(10,l);return o<0?-Math.floor(-o*u)/u:Math.floor(o*u)/u})}},{key:"round",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ROUND"),function(o,l){var u=Math.pow(10,l);return o<0?-Math.round(-o*u)/u:Math.round(o*u)/u})}},{key:"intFunc",value:function(a,s){return this.runFunction(a.args,s,this.metadata("INT"),function(o){return o<0?-Math.floor(-o):Math.floor(o)})}},{key:"even",value:function(a,s){return this.runFunction(a.args,s,this.metadata("EVEN"),function(o){return o<0?-uM(-o):uM(o)})}},{key:"odd",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ODD"),function(o){return o<0?-lM(-o):lM(o)})}},{key:"ceilingmath",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CEILING.MATH"),function(o,l,u){return l===0||o===0?0:(l=Math.abs(l),u===1&&o<0&&(l=-l),Math.ceil(o/l)*l)})}},{key:"ceiling",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CEILING"),function(o,l){return o===0?0:l===0?new x(R.DIV_BY_ZERO):o>0&&l<0?new x(R.NUM,D.DistinctSigns):Math.ceil(o/l)*l})}},{key:"ceilingprecise",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CEILING.PRECISE"),function(o,l){return l===0||o===0?0:(l=Math.abs(l),Math.ceil(o/l)*l)})}},{key:"floormath",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FLOOR.MATH"),function(o,l,u){return l===0||o===0?0:(l=Math.abs(l),u===1&&o<0&&(l*=-1),Math.floor(o/l)*l)})}},{key:"floor",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FLOOR"),function(o,l){return o===0?0:l===0?new x(R.DIV_BY_ZERO):o>0&&l<0?new x(R.NUM,D.DistinctSigns):Math.floor(o/l)*l})}},{key:"floorprecise",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FLOOR.PRECISE"),function(o,l){return l===0||o===0?0:(l=Math.abs(l),Math.floor(o/l)*l)})}}]),e}(Y);Uv.implementedFunctions={ROUNDUP:{method:"roundup",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0}]},ROUNDDOWN:{method:"rounddown",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0}]},ROUND:{method:"round",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:0}]},INT:{method:"intFunc",parameters:[{argumentType:N.NUMBER}]},EVEN:{method:"even",parameters:[{argumentType:N.NUMBER}]},ODD:{method:"odd",parameters:[{argumentType:N.NUMBER}]},"CEILING.MATH":{method:"ceilingmath",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:1},{argumentType:N.NUMBER,defaultValue:0}]},CEILING:{method:"ceiling",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},"CEILING.PRECISE":{method:"ceilingprecise",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:1}]},"FLOOR.MATH":{method:"floormath",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:1},{argumentType:N.NUMBER,defaultValue:0}]},FLOOR:{method:"floor",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},"FLOOR.PRECISE":{method:"floorprecise",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,defaultValue:1}]}};Uv.aliases={"ISO.CEILING":"CEILING.PRECISE",TRUNC:"ROUNDDOWN"};var Qit=j(q());function zv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zv=function(e){return typeof e}:zv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zv(i)}function fde(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function cM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function dde(i,t,e){return t&&cM(i.prototype,t),e&&cM(i,e),i}function hde(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&s5(i,t)}function s5(i,t){return s5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},s5(i,t)}function yde(i){var t=vde();return function(){var r=Hv(i),a;if(t){var s=Hv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return bde(this,a)}}function bde(i,t){if(t&&(zv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gde(i)}function gde(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function vde(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Hv(i){return Hv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Hv(i)}var o5=function(i){hde(e,i);var t=yde(e);function e(){return fde(this,e),t.apply(this,arguments)}return dde(e,[{key:"sqrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SQRT"),Math.sqrt)}}]),e}(Y);o5.implementedFunctions={SQRT:{method:"sqrt",parameters:[{argumentType:N.NUMBER}]}};var Lat=j(q());var fat=j(Nr());var Tat=j(q());var wat=j(Vt());var aat=j(q());var pat=j(Nr()),Tde=regeneratorRuntime.mark(pM);function pM(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},Tde)}function mM(i){var t=i[Symbol.iterator](),e=t.next(),r=e.done,a=e.value;return r?{rest:pM()}:{value:a,rest:t}}var Nde=regeneratorRuntime.mark(l5),Cde=regeneratorRuntime.mark(u5);function fM(i,t){return wde(i)||Ade(i,t)||dM(i,t)||Sde()}function Sde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ade(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function wde(i){if(Array.isArray(i))return i}function Gv(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=dM(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function dM(i,t){if(!!i){if(typeof i=="string")return hM(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hM(i,t)}}function hM(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function yM(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function bM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function xde(i,t,e){return t&&bM(i.prototype,t),e&&bM(i,e),i}var Ede=function(t,e,r){if(r.end.row>r.start.row){var a=$(r.end.sheet,r.end.col,r.end.row-1),s=t.getRange(r.start,a);if(s!==void 0)return{smallerRangeVertex:s,restValuesRange:r.withStart($(r.start.sheet,r.start.col,r.end.row)),restConditionRanges:e.map(function(o){return o.withStart($(o.start.sheet,o.start.col,o.end.row))})}}return{restValuesRange:r,restConditionRanges:e}},wc=function(){function i(t,e,r,a,s){yM(this,i),this.interpreter=t,this.cacheKey=e,this.reduceInitialValue=r,this.composeFunction=a,this.mapFunction=s,this.dependencyGraph=this.interpreter.dependencyGraph}return xde(i,[{key:"compute",value:function(e,r){var a=this,s=Gv(r),o;try{for(s.s();!(o=s.n()).done;){var l=o.value;if(!l.conditionRange.sameDimensionsAs(e))return new x(R.VALUE,D.EqualLength)}}catch(d){s.e(d)}finally{s.f()}var u=this.tryToGetRangeVertexForRangeValue(e),c=r.map(function(d){return a.tryToGetRangeVertexForRangeValue(d.conditionRange)});if(u&&c.every(function(d){return d!==void 0})){var p=r.map(function(d){return d.criterionPackage.raw}).join(","),m=this.findAlreadyComputedValueInCache(u,this.cacheKey(r),p);if(m!==void 0)return this.interpreter.stats.incrementCriterionFunctionFullCacheUsed(),m;var f=this.buildNewCriterionCache(this.cacheKey(r),r.map(function(d){return d.conditionRange.range}),e.range);return f.has(p)||f.set(p,[this.evaluateRangeValue(e,r),r.map(function(d){return d.criterionPackage.lambda})]),u.setCriterionFunctionValues(this.cacheKey(r),f),c.forEach(function(d){d!==void 0&&d.addDependentCacheRange(u)}),f.get(p)[0]}else return this.evaluateRangeValue(e,r)}},{key:"tryToGetRangeVertexForRangeValue",value:function(e){var r=e.range;if(r!==void 0)return this.dependencyGraph.getRange(r.start,r.end)}},{key:"reduceFunction",value:function(e){var r=this.reduceInitialValue,a=Gv(e),s;try{for(a.s();!(s=a.n()).done;){var o=s.value;r=this.composeFunction(r,o)}}catch(l){a.e(l)}finally{a.f()}return r}},{key:"findAlreadyComputedValueInCache",value:function(e,r,a){return e.getCriterionFunctionValue(r,a)}},{key:"evaluateRangeValue",value:function(e,r){var a=r.map(function(u){return u.criterionPackage.lambda}),s=Array.from(e.valuesFromTopLeftCorner()).map(this.mapFunction)[Symbol.iterator](),o=r.map(function(u){return u.conditionRange.iterateValuesFromTopLeftCorner()}),l=u5(a,o,s);return this.reduceFunction(l)}},{key:"buildNewCriterionCache",value:function(e,r,a){var s=this,o=this.dependencyGraph.getRange(a.start,a.end),l=Ede(this.dependencyGraph,r,a),u=l.smallerRangeVertex,c=l.restConditionRanges,p=l.restValuesRange,m;u!==void 0&&this.dependencyGraph.existsEdge(u,o)?m=u.getCriterionFunctionValues(e):m=new Map;var f=new Map;return m.forEach(function(d,h){var y=fM(d,2),b=y[0],g=y[1],v=u5(g,c.map(function(w){return l5(s.dependencyGraph,w)}),Array.from(l5(s.dependencyGraph,p)).map(s.mapFunction)[Symbol.iterator]()),C=s.composeFunction(b,s.reduceFunction(v));s.interpreter.stats.incrementCriterionFunctionPartialCacheUsed(),f.set(h,[C,g])}),f}}]),i}(),xc=function i(t,e){yM(this,i),this.conditionRange=t,this.criterionPackage=e};function l5(i,t){var e,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:e=Gv(t.addresses(i)),o.prev=1,e.s();case 3:if((r=e.n()).done){o.next=9;break}return a=r.value,o.next=7,W(i.getScalarValue(a));case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),e.e(o.t0);case 14:return o.prev=14,e.f(),o.finish(14);case 17:case"end":return o.stop()}},Nde,null,[[1,11,14,17]])}function u5(i,t,e){var r,a,s,o,l;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:r=Gv(e),c.prev=1,r.s();case 3:if((a=r.n()).done){c.next=15;break}if(s=a.value,o=t.map(function(p){return mM(p)}),o.every(function(p){return Object.prototype.hasOwnProperty.call(p,"value")})){c.next=8;break}return c.abrupt("return");case 8:if(l=o.map(function(p){return p.value}),!Rde(l,i).every(function(p){var m=fM(p,2),f=m[0],d=m[1];return d(f)})){c.next=12;break}return c.next=12,s;case 12:t=o.map(function(p){return p.rest});case 13:c.next=3;break;case 15:c.next=20;break;case 17:c.prev=17,c.t0=c.catch(1),r.e(c.t0);case 20:return c.prev=20,r.f(),c.finish(20);case 23:case"end":return c.stop()}},Cde,null,[[1,17,20,23]])}function Rde(i,t){for(var e=[],r=0;r<Math.min(i.length,t.length);r++)e.push([i[r],t[r]]);return e}function qv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?qv=function(e){return typeof e}:qv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qv(i)}function Vde(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&c5(i,t)}function c5(i,t){return c5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},c5(i,t)}function Ide(i){var t=Pde();return function(){var r=Wv(i),a;if(t){var s=Wv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Ode(this,a)}}function Ode(i,t){if(t&&(qv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dde(i)}function Dde(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Pde(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Wv(i){return Wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Wv(i)}function p5(i){return Mde(i)||Fde(i)||kde(i)||_de()}function _de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kde(i,t){if(!!i){if(typeof i=="string")return m5(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return m5(i,t)}}function Fde(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Mde(i){if(Array.isArray(i))return m5(i)}function m5(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function gM(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function vM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function TM(i,t,e){return t&&vM(i.prototype,t),e&&vM(i,e),i}var zf=function(){function i(t,e){gM(this,i),this.sum=t,this.count=e}return TM(i,[{key:"compose",value:function(e){return new i(this.sum+e.sum,this.count+e.count)}},{key:"averageValue",value:function(){if(this.count>0)return this.sum/this.count}}],[{key:"single",value:function(e){return new i(e,1)}}]),i}();zf.empty=new zf(0,0);function NM(i){var t=i.map(function(e){return"".concat(e.conditionRange.range.sheet,",").concat(e.conditionRange.range.start.col,",").concat(e.conditionRange.range.start.row)});return["SUMIF"].concat(p5(t)).join(",")}function jde(i){var t=i.map(function(e){return"".concat(e.conditionRange.range.sheet,",").concat(e.conditionRange.range.start.col,",").concat(e.conditionRange.range.start.row)});return["AVERAGEIF"].concat(p5(t)).join(",")}function Bde(i){var t=i.map(function(e){return"".concat(e.conditionRange.range.sheet,",").concat(e.conditionRange.range.start.col,",").concat(e.conditionRange.range.start.row)});return["COUNTIFS"].concat(p5(t)).join(",")}var f5=function(i){Vde(e,i);var t=Ide(e);function e(){return gM(this,e),t.apply(this,arguments)}return TM(e,[{key:"sumif",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SUMIF"),function(l,u,c){var p=o.interpreter.criterionBuilder.fromCellValue(u,o.arithmeticHelper);return p===void 0?new x(R.VALUE,D.BadCriterion):(c=c??l,new wc(o.interpreter,NM,0,function(m,f){return o.arithmeticHelper.nonstrictadd(m,f)},function(m){return W(m)}).compute(c,[new xc(l,p)]))})}},{key:"sumifs",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SUMIFS"),function(l){for(var u=[],c=0;c<(arguments.length<=1?0:arguments.length-1);c+=2){var p=c+1<1||arguments.length<=c+1?void 0:arguments[c+1],m=o.interpreter.criterionBuilder.fromCellValue(c+1+1<1||arguments.length<=c+1+1?void 0:arguments[c+1+1],o.arithmeticHelper);if(m===void 0)return new x(R.VALUE,D.BadCriterion);u.push(new xc(p,m))}return new wc(o.interpreter,NM,0,function(f,d){return o.arithmeticHelper.nonstrictadd(f,d)},function(f){return W(f)}).compute(l,u)})}},{key:"averageif",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("AVERAGEIF"),function(l,u,c){var p=o.interpreter.criterionBuilder.fromCellValue(u,o.arithmeticHelper);if(p===void 0)return new x(R.VALUE,D.BadCriterion);c=c??l;var m=new wc(o.interpreter,jde,zf.empty,function(f,d){return f.compose(d)},function(f){return he(f)?zf.single(W(f)):zf.empty}).compute(c,[new xc(l,p)]);return m instanceof x?m:m.averageValue()||new x(R.DIV_BY_ZERO)})}},{key:"countif",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("COUNTIF"),function(l,u){var c=o.interpreter.criterionBuilder.fromCellValue(u,o.arithmeticHelper);return c===void 0?new x(R.VALUE,D.BadCriterion):new wc(o.interpreter,function(){return"COUNTIF"},0,function(p,m){return p+m},function(){return 1}).compute(l,[new xc(l,c)])})}},{key:"countifs",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("COUNTIFS"),function(){for(var l=[],u=0;u<arguments.length;u+=2){var c=u<0||arguments.length<=u?void 0:arguments[u],p=o.interpreter.criterionBuilder.fromCellValue(u+1<0||arguments.length<=u+1?void 0:arguments[u+1],o.arithmeticHelper);if(p===void 0)return new x(R.VALUE,D.BadCriterion);l.push(new xc(c,p))}return new wc(o.interpreter,Bde,0,function(m,f){return m+f},function(){return 1}).compute(l[0].conditionRange,l)})}}]),e}(Y);f5.implementedFunctions={SUMIF:{method:"sumif",parameters:[{argumentType:N.RANGE},{argumentType:N.NOERROR},{argumentType:N.RANGE,optionalArg:!0}]},COUNTIF:{method:"countif",parameters:[{argumentType:N.RANGE},{argumentType:N.NOERROR}]},AVERAGEIF:{method:"averageif",parameters:[{argumentType:N.RANGE},{argumentType:N.NOERROR},{argumentType:N.RANGE,optionalArg:!0}]},SUMIFS:{method:"sumifs",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE},{argumentType:N.NOERROR}],repeatLastArgs:2},COUNTIFS:{method:"countifs",parameters:[{argumentType:N.RANGE},{argumentType:N.NOERROR}],repeatLastArgs:2}};var sst=j(q());function $v(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$v=function(e){return typeof e}:$v=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$v(i)}function Lde(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function CM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ude(i,t,e){return t&&CM(i.prototype,t),e&&CM(i,e),i}function zde(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&d5(i,t)}function d5(i,t){return d5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},d5(i,t)}function Hde(i){var t=Wde();return function(){var r=Kv(i),a;if(t){var s=Kv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Gde(this,a)}}function Gde(i,t){if(t&&($v(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qde(i)}function qde(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Wde(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Kv(i){return Kv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kv(i)}var h5=function(i){zde(e,i);var t=Hde(e);function e(){return Lde(this,e),t.apply(this,arguments)}return Ude(e,[{key:"sumproduct",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SUMPRODUCT"),function(l,u){if(l.numberOfElements()!==u.numberOfElements())return new x(R.VALUE,D.EqualLength);for(var c=0,p=l.iterateValuesFromTopLeftCorner(),m=u.iterateValuesFromTopLeftCorner(),f,d;f=p.next(),d=m.next(),!f.done&&!d.done;){if(f.value instanceof x)return f.value;if(d.value instanceof x)return d.value;var h=o.coerceScalarToNumberOrError(f.value),y=o.coerceScalarToNumberOrError(d.value);he(h)&&he(y)&&(c+=W(h)*W(y))}return c})}}]),e}(Y);h5.implementedFunctions={SUMPRODUCT:{method:"sumproduct",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]}};var yst=j(ar());var $de=ce(),Kde=Lb();$de({target:"String",proto:!0},{repeat:Kde});var Vst=j(q());function Xv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xv=function(e){return typeof e}:Xv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xv(i)}function Xde(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function SM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Yde(i,t,e){return t&&SM(i.prototype,t),e&&SM(i,e),i}function Zde(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&y5(i,t)}function y5(i,t){return y5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},y5(i,t)}function Jde(i){var t=the();return function(){var r=Yv(i),a;if(t){var s=Yv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Qde(this,a)}}function Qde(i,t){if(t&&(Xv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ehe(i)}function ehe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function the(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Yv(i){return Yv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yv(i)}var b5=function(i){Zde(e,i);var t=Jde(e);function e(){return Xde(this,e),t.apply(this,arguments)}return Yde(e,[{key:"concatenate",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CONCATENATE"),function(){var o;return(o="").concat.apply(o,arguments)})}},{key:"split",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SPLIT"),function(o,l){var u=o.split(" ");return l>=u.length||l<0?new x(R.VALUE,D.IndexBounds):u[l]})}},{key:"len",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LEN"),function(o){return o.length})}},{key:"lower",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LOWER"),function(o){return o.toLowerCase()})}},{key:"trim",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TRIM"),function(o){return o.replace(/^ +| +$/g,"").replace(/ +/g," ")})}},{key:"proper",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PROPER"),function(o){return o.replace(/\w\S*/g,function(l){return l.charAt(0).toUpperCase()+l.substring(1).toLowerCase()})})}},{key:"clean",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CLEAN"),function(o){return o.replace(/[\u0000-\u001F]/g,"")})}},{key:"exact",value:function(a,s){return this.runFunction(a.args,s,this.metadata("EXACT"),function(o,l){return o===l})}},{key:"rept",value:function(a,s){return this.runFunction(a.args,s,this.metadata("REPT"),function(o,l){return l<0?new x(R.VALUE,D.NegativeCount):o.repeat(l)})}},{key:"right",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RIGHT"),function(o,l){return l<0?new x(R.VALUE,D.NegativeLength):l===0?"":o.slice(-l)})}},{key:"left",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LEFT"),function(o,l){return l<0?new x(R.VALUE,D.NegativeLength):o.slice(0,l)})}},{key:"mid",value:function(a,s){return this.runFunction(a.args,s,this.metadata("MID"),function(o,l,u){return l<1?new x(R.VALUE,D.LessThanOne):u<0?new x(R.VALUE,D.NegativeLength):o.substring(l-1,l+u-1)})}},{key:"replace",value:function(a,s){return this.runFunction(a.args,s,this.metadata("REPLACE"),function(o,l,u,c){return l<1?new x(R.VALUE,D.LessThanOne):u<0?new x(R.VALUE,D.NegativeLength):o.substring(0,l-1)+c+o.substring(l+u-1)})}},{key:"search",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SEARCH"),function(l,u,c){if(c<1||c>u.length)return new x(R.VALUE,D.LengthBounds);var p=u.substring(c-1).toLowerCase(),m;return o.arithmeticHelper.requiresRegex(l)?m=o.arithmeticHelper.searchString(l,p):m=p.indexOf(l.toLowerCase()),m=m+c,m>0?m:new x(R.VALUE,D.PatternNotFound)})}},{key:"substitute",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SUBSTITUTE"),function(o,l,u,c){var p=new RegExp(l,"g");if(c===void 0)return o.replace(p,u);if(c<1)return new x(R.VALUE,D.LessThanOne);for(var m,f=0;(m=p.exec(o))!==null;)if(c===++f)return o.substring(0,m.index)+u+o.substring(p.lastIndex);return o})}},{key:"find",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FIND"),function(o,l,u){if(u<1||u>l.length)return new x(R.VALUE,D.IndexBounds);var c=l.substring(u-1),p=c.indexOf(o)+u;return p>0?p:new x(R.VALUE,D.PatternNotFound)})}},{key:"t",value:function(a,s){return this.runFunction(a.args,s,this.metadata("T"),function(o){return o instanceof x||typeof o=="string"?o:""})}},{key:"upper",value:function(a,s){return this.runFunction(a.args,s,this.metadata("UPPER"),function(o){return o.toUpperCase()})}}]),e}(Y);b5.implementedFunctions={CONCATENATE:{method:"concatenate",parameters:[{argumentType:N.STRING}],repeatLastArgs:1,expandRanges:!0},EXACT:{method:"exact",parameters:[{argumentType:N.STRING},{argumentType:N.STRING}]},SPLIT:{method:"split",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER}]},LEN:{method:"len",parameters:[{argumentType:N.STRING}]},LOWER:{method:"lower",parameters:[{argumentType:N.STRING}]},MID:{method:"mid",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},TRIM:{method:"trim",parameters:[{argumentType:N.STRING}]},T:{method:"t",parameters:[{argumentType:N.SCALAR}]},PROPER:{method:"proper",parameters:[{argumentType:N.STRING}]},CLEAN:{method:"clean",parameters:[{argumentType:N.STRING}]},REPT:{method:"rept",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER}]},RIGHT:{method:"right",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,defaultValue:1}]},LEFT:{method:"left",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER,defaultValue:1}]},REPLACE:{method:"replace",parameters:[{argumentType:N.STRING},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.STRING}]},SEARCH:{method:"search",parameters:[{argumentType:N.STRING},{argumentType:N.STRING},{argumentType:N.NUMBER,defaultValue:1}]},SUBSTITUTE:{method:"substitute",parameters:[{argumentType:N.STRING},{argumentType:N.STRING},{argumentType:N.STRING},{argumentType:N.NUMBER,optionalArg:!0}]},FIND:{method:"find",parameters:[{argumentType:N.STRING},{argumentType:N.STRING},{argumentType:N.NUMBER,defaultValue:1}]},UPPER:{method:"upper",parameters:[{argumentType:N.STRING}]}};var nhe=ce(),ihe=De(),wM=Zv(),ahe=Math.abs,xM=Math.exp,she=Math.E,ohe=ihe(function(){return Math.sinh(-2e-17)!=-2e-17});nhe({target:"Math",stat:!0,forced:ohe},{sinh:function(t){return ahe(t=+t)<1?(wM(t)-wM(-t))/2:(xM(t-1)-xM(-t-1))*(she/2)}});var lhe=ce(),EM=Math.asinh,uhe=Math.log,che=Math.sqrt;function RM(i){return!isFinite(i=+i)||i==0?i:i<0?-RM(-i):uhe(i+che(i*i+1))}lhe({target:"Math",stat:!0,forced:!(EM&&1/EM(0)>0)},{asinh:RM});var phe=ce(),mhe=Zv(),VM=Math.cosh,fhe=Math.abs,g5=Math.E;phe({target:"Math",stat:!0,forced:!VM||VM(710)===1/0},{cosh:function(t){var e=mhe(fhe(t)-1)+1;return(e+1/(e*g5*g5))*(g5/2)}});var hhe=ce(),yhe=OM(),v5=Math.acosh,bhe=Math.log,DM=Math.sqrt,ghe=Math.LN2,vhe=!v5||Math.floor(v5(Number.MAX_VALUE))!=710||v5(1/0)!=1/0;hhe({target:"Math",stat:!0,forced:vhe},{acosh:function(t){return(t=+t)<1?NaN:t>9490626562425156e-8?bhe(t)+ghe:yhe(t-1+DM(t-1)*DM(t+1))}});var The=ce(),PM=Zv(),_M=Math.exp;The({target:"Math",stat:!0},{tanh:function(t){var e=PM(t=+t),r=PM(-t);return e==1/0?1:r==1/0?-1:(e-r)/(_M(t)+_M(-t))}});var Nhe=ce(),kM=Math.atanh,Che=Math.log;Nhe({target:"Math",stat:!0,forced:!(kM&&1/kM(-0)<0)},{atanh:function(t){return(t=+t)==0?t:Che((1+t)/(1-t))/2}});var rot=j(q());function Jv(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Jv=function(e){return typeof e}:Jv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jv(i)}function She(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function FM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ahe(i,t,e){return t&&FM(i.prototype,t),e&&FM(i,e),i}function whe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&T5(i,t)}function T5(i,t){return T5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},T5(i,t)}function xhe(i){var t=Vhe();return function(){var r=Qv(i),a;if(t){var s=Qv(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Ehe(this,a)}}function Ehe(i,t){if(t&&(Jv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rhe(i)}function Rhe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Vhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function Qv(i){return Qv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qv(i)}var N5=function(i){whe(e,i);var t=xhe(e);function e(){return She(this,e),t.apply(this,arguments)}return Ahe(e,[{key:"acos",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ACOS"),Math.acos)}},{key:"asin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ASIN"),Math.asin)}},{key:"cos",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COS"),Math.cos)}},{key:"sin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SIN"),Math.sin)}},{key:"tan",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TAN"),Math.tan)}},{key:"atan",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ATAN"),Math.atan)}},{key:"atan2",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ATAN2"),function(o,l){return o===0&&l===0?new x(R.DIV_BY_ZERO):Math.atan2(l,o)})}},{key:"cot",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COT"),function(o){return o===0?new x(R.DIV_BY_ZERO):1/Math.tan(o)})}},{key:"acot",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ACOT"),function(o){return o===0?vv/2:Math.atan(1/o)})}},{key:"sec",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SEC"),function(o){return 1/Math.cos(o)})}},{key:"csc",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CSC"),function(o){return o===0?new x(R.DIV_BY_ZERO):1/Math.sin(o)})}},{key:"sinh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SINH"),Math.sinh)}},{key:"asinh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ASINH"),Math.asinh)}},{key:"cosh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COSH"),Math.cosh)}},{key:"acosh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ACOSH"),Math.acosh)}},{key:"tanh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TANH"),Math.tanh)}},{key:"atanh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ATANH"),Math.atanh)}},{key:"coth",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COTH"),function(o){return o===0?new x(R.DIV_BY_ZERO):1/Math.tanh(o)})}},{key:"acoth",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ACOTH"),function(o){return o===0?new x(R.NUM,D.NonZero):Math.atanh(1/o)})}},{key:"sech",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SECH"),function(o){return 1/Math.cosh(o)})}},{key:"csch",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CSCH"),function(o){return o===0?new x(R.DIV_BY_ZERO):1/Math.sinh(o)})}}]),e}(Y);N5.implementedFunctions={ACOS:{method:"acos",parameters:[{argumentType:N.NUMBER}]},ASIN:{method:"asin",parameters:[{argumentType:N.NUMBER}]},COS:{method:"cos",parameters:[{argumentType:N.NUMBER}]},SIN:{method:"sin",parameters:[{argumentType:N.NUMBER}]},TAN:{method:"tan",parameters:[{argumentType:N.NUMBER}]},ATAN:{method:"atan",parameters:[{argumentType:N.NUMBER}]},ATAN2:{method:"atan2",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},COT:{method:"cot",parameters:[{argumentType:N.NUMBER}]},SEC:{method:"sec",parameters:[{argumentType:N.NUMBER}]},CSC:{method:"csc",parameters:[{argumentType:N.NUMBER}]},SINH:{method:"sinh",parameters:[{argumentType:N.NUMBER}]},COSH:{method:"cosh",parameters:[{argumentType:N.NUMBER}]},TANH:{method:"tanh",parameters:[{argumentType:N.NUMBER}]},COTH:{method:"coth",parameters:[{argumentType:N.NUMBER}]},SECH:{method:"sech",parameters:[{argumentType:N.NUMBER}]},CSCH:{method:"csch",parameters:[{argumentType:N.NUMBER}]},ACOT:{method:"acot",parameters:[{argumentType:N.NUMBER}]},ASINH:{method:"asinh",parameters:[{argumentType:N.NUMBER}]},ACOSH:{method:"acosh",parameters:[{argumentType:N.NUMBER}]},ATANH:{method:"atanh",parameters:[{argumentType:N.NUMBER}]},ACOTH:{method:"acoth",parameters:[{argumentType:N.NUMBER}]}};var _ot=j(q());var got=j(q());function e1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e1=function(e){return typeof e}:e1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e1(i)}function Ihe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function MM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Ohe(i,t,e){return t&&MM(i.prototype,t),e&&MM(i,e),i}function Dhe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&C5(i,t)}function C5(i,t){return C5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},C5(i,t)}function Phe(i){var t=Fhe();return function(){var r=t1(i),a;if(t){var s=t1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return _he(this,a)}}function _he(i,t){if(t&&(e1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return khe(i)}function khe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Fhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function t1(i){return t1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t1(i)}var jM=function(i){Dhe(e,i);var t=Phe(e);function e(r,a){var s;return Ihe(this,e),s=t.call(this,a),s.config=r,s.dependencyGraph=a,s}return Ohe(e,[{key:"find",value:function(a,s,o){typeof a=="string"&&(a=li(a));var l=s.range;return l===void 0?s.valuesFromTopLeftCorner().map(W).indexOf(a):o?Cg(l,a,this.dependencyGraph,"col"):this.dependencyGraph.computeListOfValuesInRange(l).findIndex(function(u){return u=W(u),u=typeof u=="string"?li(u):u,u===a})}}]),e}(Sg);function r1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r1=function(e){return typeof e}:r1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r1(i)}function Mhe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function BM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jhe(i,t,e){return t&&BM(i.prototype,t),e&&BM(i,e),i}function Bhe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&S5(i,t)}function S5(i,t){return S5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},S5(i,t)}function Lhe(i){var t=Hhe();return function(){var r=n1(i),a;if(t){var s=n1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Uhe(this,a)}}function Uhe(i,t){if(t&&(r1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zhe(i)}function zhe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function n1(i){return n1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n1(i)}var A5=function(i){Bhe(e,i);var t=Lhe(e);function e(){var r;return Mhe(this,e),r=t.apply(this,arguments),r.rowSearch=new jM(r.config,r.dependencyGraph),r}return jhe(e,[{key:"vlookup",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("VLOOKUP"),function(l,u,c,p){var m=u.range;return m===void 0?new x(R.VALUE,D.WrongType):c<1?new x(R.VALUE,D.LessThanOne):c>m.width()?new x(R.REF,D.IndexLarge):o.doVlookup(gb(l),u,c-1,p)})}},{key:"hlookup",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("HLOOKUP"),function(l,u,c,p){var m=u.range;return m===void 0?new x(R.VALUE,D.WrongType):c<1?new x(R.VALUE,D.LessThanOne):c>m.height()?new x(R.REF,D.IndexLarge):o.doHlookup(gb(l),u,c-1,p)})}},{key:"match",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("MATCH"),function(l,u,c){return o.doMatch(gb(l),u,c)})}},{key:"doVlookup",value:function(a,s,o,l){this.dependencyGraph.stats.start(oe.VLOOKUP);var u=s.range,c;u===void 0?c=J.onlyValues(s.data.map(function(d){return[d[0]]})):c=J.onlyRange(ae.spanFrom(u.start,1,u.height()),this.dependencyGraph);var p=this.searchInRange(a,c,l,this.columnSearch);if(this.dependencyGraph.stats.end(oe.VLOOKUP),p===-1)return new x(R.NA,D.ValueNotFound);var m;if(u===void 0)m=s.data[p][o];else{var f=$(u.sheet,u.start.col+o,u.start.row+p);m=this.dependencyGraph.getCellValue(f)}return m instanceof J?new x(R.VALUE,D.WrongType):m}},{key:"doHlookup",value:function(a,s,o,l){var u=s.range,c;u===void 0?c=J.onlyValues([s.data[0]]):c=J.onlyRange(ae.spanFrom(u.start,u.width(),1),this.dependencyGraph);var p=this.searchInRange(a,c,l,this.rowSearch);if(p===-1)return new x(R.NA,D.ValueNotFound);var m;if(u===void 0)m=s.data[o][p];else{var f=$(u.sheet,u.start.col+p,u.start.row+o);m=this.dependencyGraph.getCellValue(f)}return m instanceof J?new x(R.VALUE,D.WrongType):m}},{key:"doMatch",value:function(a,s,o){if(s.width()>1&&s.height()>1)return new x(R.NA);if(s.width()===1){var l=this.columnSearch.find(a,s,o!==0);return l===-1?new x(R.NA,D.ValueNotFound):l+1}else{var u=this.rowSearch.find(a,s,o!==0);return u===-1?new x(R.NA,D.ValueNotFound):u+1}}},{key:"searchInRange",value:function(a,s,o,l){return!o&&typeof a=="string"&&this.arithmeticHelper.requiresRegex(a)?l.advancedFind(this.arithmeticHelper.eqMatcherFunction(a),s):l.find(a,s,o)}}]),e}(Y);A5.implementedFunctions={VLOOKUP:{method:"vlookup",parameters:[{argumentType:N.NOERROR},{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.BOOLEAN,defaultValue:!0}]},HLOOKUP:{method:"hlookup",parameters:[{argumentType:N.NOERROR},{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.BOOLEAN,defaultValue:!0}]},MATCH:{method:"match",parameters:[{argumentType:N.NOERROR},{argumentType:N.RANGE},{argumentType:N.NUMBER,defaultValue:1}]}};var nlt=j(q());function i1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?i1=function(e){return typeof e}:i1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i1(i)}function Ghe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function LM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function qhe(i,t,e){return t&&LM(i.prototype,t),e&&LM(i,e),i}function Whe(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&w5(i,t)}function w5(i,t){return w5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},w5(i,t)}function $he(i){var t=Yhe();return function(){var r=a1(i),a;if(t){var s=a1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Khe(this,a)}}function Khe(i,t){if(t&&(i1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xhe(i)}function Xhe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Yhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function a1(i){return a1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},a1(i)}var x5=function(i){Whe(e,i);var t=$he(e);function e(){return Ghe(this,e),t.apply(this,arguments)}return qhe(e,[{key:"roman",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("ROMAN"),function(l,u){return l=Math.trunc(l),u===!1?u=4:u===!0&&(u=0),u=W(o.coerceScalarToNumberOrError(u)),u instanceof x?u:(u=Math.trunc(u),u<0?new x(R.VALUE,D.ValueSmall):u>4?new x(R.VALUE,D.ValueLarge):Zhe(l,u))})}},{key:"arabic",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ARABIC"),function(o){o=o.trim().toUpperCase();var l=!1;if(o.startsWith("-")&&(o=o.slice(1),l=!0,o===""))return new x(R.VALUE,D.InvalidRoman);var u={input:o,acc:0};return Ki(u,{token:"MMM",val:3e3},{token:"MM",val:2e3},{token:"M",val:1e3}),Ki(u,{token:"IM",val:999},{token:"VM",val:995},{token:"XM",val:990},{token:"LM",val:950},{token:"CM",val:900}),Ki(u,{token:"D",val:500},{token:"ID",val:499},{token:"VD",val:495},{token:"XD",val:490},{token:"LD",val:450},{token:"CD",val:400}),Ki(u,{token:"CCC",val:300},{token:"CC",val:200},{token:"C",val:100}),Ki(u,{token:"IC",val:99},{token:"VC",val:95},{token:"XC",val:90}),Ki(u,{token:"L",val:50},{token:"IL",val:49},{token:"VL",val:45},{token:"XL",val:40}),Ki(u,{token:"XXX",val:30},{token:"XX",val:20},{token:"X",val:10}),Ki(u,{token:"IX",val:9}),Ki(u,{token:"V",val:5},{token:"IV",val:4}),Ki(u,{token:"III",val:3},{token:"II",val:2},{token:"I",val:1}),u.input!==""?new x(R.VALUE,D.InvalidRoman):l?-u.acc:u.acc})}}]),e}(Y);x5.implementedFunctions={ROMAN:{method:"roman",parameters:[{argumentType:N.NUMBER,minValue:1,lessThan:4e3},{argumentType:N.NOERROR,optionalArg:!0,defaultValue:0}]},ARABIC:{method:"arabic",parameters:[{argumentType:N.STRING}]}};function Ki(i){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];for(var a=0,s=e;a<s.length;a++){var o=s[a];if(i.input.startsWith(o.token)){i.input=i.input.slice(o.token.length),i.acc+=o.val;break}}}function Zhe(i,t){var e={val:i%1e3,acc:"M".repeat(Math.floor(i/1e3))};return t===4&&(Bt(e,"IM",999,1e3),Bt(e,"ID",499,500)),t>=3&&(Bt(e,"VM",995,1e3),Bt(e,"VD",495,500)),t>=2&&(Bt(e,"XM",990,1e3),Bt(e,"XD",490,500)),t>=1&&(Bt(e,"LM",950,1e3),Bt(e,"LD",450,500)),Bt(e,"CM",900,1e3),Bt(e,"CD",400,500),Bt(e,"D",500,900),e.acc+="C".repeat(Math.floor(e.val/100)),e.val%=100,t>=2&&(Bt(e,"IC",99,100),Bt(e,"IL",49,50)),t>=1&&(Bt(e,"VC",95,100),Bt(e,"VL",45,50)),Bt(e,"XC",90,100),Bt(e,"XL",40,50),Bt(e,"L",50,90),e.acc+="X".repeat(Math.floor(e.val/10)),e.val%=10,Bt(e,"IX",9,10),Bt(e,"IV",4,5),Bt(e,"V",5,9),e.acc+="I".repeat(e.val),e.acc}function Bt(i,t,e,r){i.val>=e&&i.val<r&&(i.val-=e,i.acc+=t)}var glt=j(q());function s1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s1=function(e){return typeof e}:s1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s1(i)}function Jhe(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function UM(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Qhe(i,t,e){return t&&UM(i.prototype,t),e&&UM(i,e),i}function eye(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&E5(i,t)}function E5(i,t){return E5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},E5(i,t)}function tye(i){var t=iye();return function(){var r=o1(i),a;if(t){var s=o1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return rye(this,a)}}function rye(i,t){if(t&&(s1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nye(i)}function nye(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function iye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function o1(i){return o1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o1(i)}var R5=function(i){eye(e,i);var t=tye(e);function e(){return Jhe(this,e),t.apply(this,arguments)}return Qhe(e,[{key:"add",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.ADD"),this.arithmeticHelper.addWithEpsilon)}},{key:"concat",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.CONCAT"),this.arithmeticHelper.concat)}},{key:"divide",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.DIVIDE"),this.arithmeticHelper.divide)}},{key:"eq",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.EQ"),this.arithmeticHelper.eq)}},{key:"gt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.GT"),this.arithmeticHelper.gt)}},{key:"gte",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.GTE"),this.arithmeticHelper.geq)}},{key:"lt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.LT"),this.arithmeticHelper.lt)}},{key:"lte",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.LTE"),this.arithmeticHelper.leq)}},{key:"minus",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.MINUS"),this.arithmeticHelper.subtract)}},{key:"multiply",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.MULTIPLY"),this.arithmeticHelper.multiply)}},{key:"ne",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.NE"),this.arithmeticHelper.neq)}},{key:"pow",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.POW"),this.arithmeticHelper.pow)}},{key:"uminus",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.UMINUS"),this.arithmeticHelper.unaryMinus)}},{key:"upercent",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.UNARY_PERCENT"),this.arithmeticHelper.unaryPercent)}},{key:"uplus",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HF.UPLUS"),this.arithmeticHelper.unaryPlus)}}]),e}(Y);R5.implementedFunctions={"HF.ADD":{method:"add",parameters:[{argumentType:N.NUMBER,passSubtype:!0},{argumentType:N.NUMBER,passSubtype:!0}]},"HF.CONCAT":{method:"concat",parameters:[{argumentType:N.STRING,passSubtype:!0},{argumentType:N.STRING,passSubtype:!0}]},"HF.DIVIDE":{method:"divide",parameters:[{argumentType:N.NUMBER,passSubtype:!0},{argumentType:N.NUMBER,passSubtype:!0}]},"HF.EQ":{method:"eq",parameters:[{argumentType:N.NOERROR,passSubtype:!0},{argumentType:N.NOERROR,passSubtype:!0}]},"HF.GT":{method:"gt",parameters:[{argumentType:N.NOERROR,passSubtype:!0},{argumentType:N.NOERROR,passSubtype:!0}]},"HF.GTE":{method:"gte",parameters:[{argumentType:N.NOERROR,passSubtype:!0},{argumentType:N.NOERROR,passSubtype:!0}]},"HF.LT":{method:"lt",parameters:[{argumentType:N.NOERROR,passSubtype:!0},{argumentType:N.NOERROR,passSubtype:!0}]},"HF.LTE":{method:"lte",parameters:[{argumentType:N.NOERROR,passSubtype:!0},{argumentType:N.NOERROR,passSubtype:!0}]},"HF.MINUS":{method:"minus",parameters:[{argumentType:N.NUMBER,passSubtype:!0},{argumentType:N.NUMBER,passSubtype:!0}]},"HF.MULTIPLY":{method:"multiply",parameters:[{argumentType:N.NUMBER,passSubtype:!0},{argumentType:N.NUMBER,passSubtype:!0}]},"HF.NE":{method:"ne",parameters:[{argumentType:N.NOERROR,passSubtype:!0},{argumentType:N.NOERROR,passSubtype:!0}]},"HF.POW":{method:"pow",parameters:[{argumentType:N.NUMBER,passSubtype:!0},{argumentType:N.NUMBER,passSubtype:!0}]},"HF.UMINUS":{method:"uminus",parameters:[{argumentType:N.NUMBER,passSubtype:!0}]},"HF.UNARY_PERCENT":{method:"upercent",parameters:[{argumentType:N.NUMBER,passSubtype:!0}]},"HF.UPLUS":{method:"uplus",parameters:[{argumentType:N.NUMBER,passSubtype:!0}]}};var _lt=j(q());var ge=Math;function dt(i,t){for(var e=0,r=0;e<i.length;++e)r=t*r+i[e];return r}function zM(i,t,e,r,a){if(t===0)return e;if(t===1)return r;for(var s=2/i,o=r,l=1;l<t;++l)o=r*l*s+a*e,e=r,r=o;return o}function HM(i,t,e,r,a){return function(o,l){if(r){if(o===0)return r==1?-1/0:1/0;if(o<0)return NaN}if(l===0)return i(o);if(l===1)return t(o);if(l<0)return NaN;l|=0;var u=i(o),c=t(o);return zM(o,l,u,c,a)}}var l1=function(){var i=.636619772,t=[57568490574,-13362590354,6516196407e-1,-1121442418e-2,77392.33017,-184.9052456].reverse(),e=[57568490411,1029532985,9494680718e-3,59272.64853,267.8532712,1].reverse(),r=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),a=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934935152e-16].reverse();function s(m){var f=0,d=0,h=0,y=m*m;if(m<8)d=dt(t,y),h=dt(e,y),f=d/h;else{var b=m-.785398164;y=64/y,d=dt(r,y),h=dt(a,y),f=ge.sqrt(i/m)*(ge.cos(b)*d-ge.sin(b)*h*8/m)}return f}var o=[72362614232,-7895059235,2423968531e-1,-2972611439e-3,15704.4826,-30.16036606].reverse(),l=[144725228442,2300535178,1858330474e-2,99447.43394,376.9991397,1].reverse(),u=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),c=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function p(m){var f=0,d=0,h=0,y=m*m,b=ge.abs(m)-2.356194491;return Math.abs(m)<8?(d=m*dt(o,y),h=dt(l,y),f=d/h):(y=64/y,d=dt(u,y),h=dt(c,y),f=ge.sqrt(i/ge.abs(m))*(ge.cos(b)*d-ge.sin(b)*h*8/ge.abs(m)),m<0&&(f=-f)),f}return function m(f,d){if(d=Math.round(d),!isFinite(f))return isNaN(f)?f:0;if(d<0)return(d%2?-1:1)*m(f,-d);if(f<0)return(d%2?-1:1)*m(-f,d);if(d===0)return s(f);if(d===1)return p(f);if(f===0)return 0;var h=0;if(f>d)h=zM(f,d,s(f),p(f),-1);else{for(var y=2*ge.floor((d+ge.floor(ge.sqrt(40*d)))/2),b=!1,g=0,v=0,C=1,w=0,S=2/f,A=y;A>0;A--)w=A*S*C-g,g=C,C=w,ge.abs(C)>1e10&&(C*=1e-10,g*=1e-10,h*=1e-10,v*=1e-10),b&&(v+=C),b=!b,A==d&&(h=g);v=2*v-C,h/=v}return h}}(),GM=function(){var i=.636619772,t=[-2957821389,7062834065,-5123598036e-1,1087988129e-2,-86327.92757,228.4622733].reverse(),e=[40076544269,7452499648e-1,7189466438e-3,47447.2647,226.1030244,1].reverse(),r=[1,-.001098628627,2734510407e-14,-2073370639e-15,2093887211e-16].reverse(),a=[-.01562499995,.0001430488765,-6911147651e-15,7621095161e-16,-934945152e-16].reverse();function s(m){var f=0,d=0,h=0,y=m*m,b=m-.785398164;return m<8?(d=dt(t,y),h=dt(e,y),f=d/h+i*l1(m,0)*ge.log(m)):(y=64/y,d=dt(r,y),h=dt(a,y),f=ge.sqrt(i/m)*(ge.sin(b)*d+ge.cos(b)*h*8/m)),f}var o=[-4900604943e3,127527439e4,-51534381390,7349264551e-1,-4237922726e-3,8511.937935].reverse(),l=[249958057e5,424441966400,3733650367,2245904002e-2,102042.605,354.9632885,1].reverse(),u=[1,.00183105,-3516396496e-14,2457520174e-15,-240337019e-15].reverse(),c=[.04687499995,-.0002002690873,8449199096e-15,-88228987e-14,105787412e-15].reverse();function p(m){var f=0,d=0,h=0,y=m*m,b=m-2.356194491;return m<8?(d=m*dt(o,y),h=dt(l,y),f=d/h+i*(l1(m,1)*ge.log(m)-1/m)):(y=64/y,d=dt(u,y),h=dt(c,y),f=ge.sqrt(i/m)*(ge.sin(b)*d+ge.cos(b)*h*8/m)),f}return HM(s,p,"BESSELY",1,-1)}(),u1=function(){var i=[1,3.5156229,3.0899424,1.2067492,.2659732,.0360768,.0045813].reverse(),t=[.39894228,.01328592,.00225319,-.00157565,.00916281,-.02057706,.02635537,-.01647633,.00392377].reverse();function e(o){return o<=3.75?dt(i,o*o/(3.75*3.75)):ge.exp(ge.abs(o))/ge.sqrt(ge.abs(o))*dt(t,3.75/ge.abs(o))}var r=[.5,.87890594,.51498869,.15084934,.02658733,.00301532,32411e-8].reverse(),a=[.39894228,-.03988024,-.00362018,.00163801,-.01031555,.02282967,-.02895312,.01787654,-.00420059].reverse();function s(o){return o<3.75?o*dt(r,o*o/(3.75*3.75)):(o<0?-1:1)*ge.exp(ge.abs(o))/ge.sqrt(ge.abs(o))*dt(a,3.75/ge.abs(o))}return function o(l,u){if(u=Math.round(u),u===0)return e(l);if(u===1)return s(l);if(u<0)return NaN;if(ge.abs(l)===0)return 0;if(l==1/0)return 1/0;var c=0,p,m=2/ge.abs(l),f=0,d=1,h=0,y=2*ge.round((u+ge.round(ge.sqrt(40*u)))/2);for(p=y;p>0;p--)h=p*m*d+f,f=d,d=h,ge.abs(d)>1e10&&(d*=1e-10,f*=1e-10,c*=1e-10),p==u&&(c=f);return c*=o(l,0)/d,l<0&&u%2?-c:c}}(),qM=function(){var i=[-.57721566,.4227842,.23069756,.0348859,.00262698,1075e-7,74e-7].reverse(),t=[1.25331414,-.07832358,.02189568,-.01062446,.00587872,-.0025154,53208e-8].reverse();function e(o){return o<=2?-ge.log(o/2)*u1(o,0)+dt(i,o*o/4):ge.exp(-o)/ge.sqrt(o)*dt(t,2/o)}var r=[1,.15443144,-.67278579,-.18156897,-.01919402,-.00110404,-4686e-8].reverse(),a=[1.25331414,.23498619,-.0365562,.01504268,-.00780353,.00325614,-68245e-8].reverse();function s(o){return o<=2?ge.log(o/2)*u1(o,1)+1/o*dt(r,o*o/4):ge.exp(-o)/ge.sqrt(o)*dt(a,2/o)}return HM(e,s,"BESSELK",2,1)}();function Zo(i){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],e=t.length-1,r=!1,a=0,s=0,o,l,u,c;if(i===0)return 0;for(i<0&&(i=-i,r=!0),o=2/(2+i),l=4*o-2;e>0;e--)u=a,a=l*a-s+t[e],s=u;return c=o*Math.exp(-i*i+.5*(t[0]+l*a)-s),r?c-1:1-c}function V5(i){return 1-Zo(i)}function WM(i){var t=0,e,r,a,s;if(i>=2)return-100;if(i<=0)return 100;for(s=i<1?i:2-i,a=Math.sqrt(-2*Math.log(s/2)),e=-.70711*((2.30753+a*.27061)/(1+a*(.99229+a*.04481))-a);t<2;t++)r=V5(e)-s,e+=r/(1.1283791670955126*Math.exp(-e*e)-e*r);return i<1?e:-e}var I5={pdf:function(t,e){return t<0?0:e*Math.exp(-e*t)},cdf:function(t,e){return t<0?0:1-Math.exp(-e*t)}};function Ec(i){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],e=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],r=!1,a=0,s=0,o=0,l=i,u,c,p,m;if(i>171.6243769536076)return 1/0;if(l<=0)if(m=l%1,m)r=(l&1?-1:1)*Math.PI/Math.sin(Math.PI*m),l=1-l;else return 1/0;for(p=l,l<1?c=l++:c=(l-=a=(l|0)-1)-1,u=0;u<8;++u)o=(o+t[u])*c,s=s*c+e[u];if(m=o/s+1,p<l)m/=p;else if(p>l)for(u=0;u<a;++u)m*=l,l++;return r&&(m=r/m),m}var c1={pdf:function(t,e,r){return t<0?0:t===0&&e===1?1/r:Math.exp((e-1)*Math.log(t)-t/r-nr(e)-e*Math.log(r))},cdf:function(t,e,r){return t<0?0:O5(e,t/r)},inv:function(t,e,r){return $M(t,e)*r}};function nr(i){var t=0,e=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],r=1.000000000190015,a,s,o;for(o=(s=a=i)+5.5,o-=(a+.5)*Math.log(o);t<6;t++)r+=e[t]/++s;return Math.log(2.5066282746310007*r/a)-o}function O5(i,t){var e=nr(i),r=i,a=1/i,s=a,o=t+1-i,l=1/1e-30,u=1/o,c=u,p=1,m=-~(Math.log(i>=1?i:1/i)*8.5+i*.4+17),f;if(t<0||i<=0)return NaN;if(t<i+1){for(;p<=m;p++)a+=s*=t/++r;return a*Math.exp(-t+i*Math.log(t)-e)}for(;p<=m;p++)f=-p*(p-i),o+=2,u=f*u+o,l=o+f/l,u=1/u,c*=u*l;return 1-c*Math.exp(-t+i*Math.log(t)-e)}function $M(i,t){var e=0,r=t-1,a=1e-8,s=nr(t),o,l,u,c,p,m,f;if(i>=1)return Math.max(100,t+100*Math.sqrt(t));if(i<=0)return 0;for(t>1?(m=Math.log(r),f=Math.exp(r*(m-1)-s),p=i<.5?i:1-i,u=Math.sqrt(-2*Math.log(p)),o=(2.30753+u*.27061)/(1+u*(.99229+u*.04481))-u,i<.5&&(o=-o),o=Math.max(.001,t*Math.pow(1-1/(9*t)-o/(3*Math.sqrt(t)),3))):(u=1-t*(.253+t*.12),i<u?o=Math.pow(i/u,1/t):o=1-Math.log(1-(i-u)/(1-u)));e<12;e++){if(o<=0)return 0;if(l=O5(t,o)-i,t>1?u=f*Math.exp(-(o-r)+r*(Math.log(o)-m)):u=Math.exp(-o+r*Math.log(o)-s),c=l/u,o-=u=c/(1-.5*Math.min(1,c*((t-1)/o-1))),o<=0&&(o=.5*(o+u)),Math.abs(u)<a*o)break}return o}var En={pdf:function(t,e,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(t-e,2)/(2*r*r))},cdf:function(t,e,r){return .5*(1+Zo((t-e)/Math.sqrt(2*r*r)))},inv:function(t,e,r){return-1.4142135623730951*r*WM(2*t)+e}},p1={pdf:function(t,e,r){return t>1||t<0?0:e==1&&r==1?1:e<512&&r<512?Math.pow(t,e-1)*Math.pow(1-t,r-1)/D5(e,r):Math.exp((e-1)*Math.log(t)+(r-1)*Math.log(1-t)-KM(e,r))},cdf:function(t,e,r){return t>1||t<0?+(t>1):m1(t,e,r)},inv:function(t,e,r){return P5(t,e,r)}};function D5(i,t){if(!(i<=0||t<=0))return i+t>170?Math.exp(KM(i,t)):Ec(i)*Ec(t)/Ec(i+t)}function KM(i,t){return nr(i)+nr(t)-nr(i+t)}function P5(i,t,e){var r=1e-8,a=t-1,s=e-1,o=0,l,u,c,p,m,f,d,h,y,b,g;if(i<=0)return 0;if(i>=1)return 1;for(t>=1&&e>=1?(c=i<.5?i:1-i,p=Math.sqrt(-2*Math.log(c)),d=(2.30753+p*.27061)/(1+p*(.99229+p*.04481))-p,i<.5&&(d=-d),h=(d*d-3)/6,y=2/(1/(2*t-1)+1/(2*e-1)),b=d*Math.sqrt(h+y)/y-(1/(2*e-1)-1/(2*t-1))*(h+5/6-2/(3*y)),d=t/(t+e*Math.exp(2*b))):(l=Math.log(t/(t+e)),u=Math.log(e/(t+e)),p=Math.exp(t*l)/t,m=Math.exp(e*u)/e,b=p+m,i<p/b?d=Math.pow(t*b*i,1/t):d=1-Math.pow(e*b*(1-i),1/e)),g=-nr(t)-nr(e)+nr(t+e);o<10;o++){if(d===0||d===1)return d;if(f=m1(d,t,e)-i,p=Math.exp(a*Math.log(d)+s*Math.log(1-d)+g),m=f/p,d-=p=m/(1-.5*Math.min(1,m*(a/d-s/(1-d)))),d<=0&&(d=.5*(d+p)),d>=1&&(d=.5*(d+p+1)),Math.abs(p)<r*d&&o>0)break}return d}function m1(i,t,e){var r=i===0||i===1?0:Math.exp(nr(t+e)-nr(t)-nr(e)+t*Math.log(i)+e*Math.log(1-i));return i<0||i>1?!1:i<(t+1)/(t+e+2)?r*XM(i,t,e)/t:1-r*XM(1-i,e,t)/e}function XM(i,t,e){var r=1e-30,a=1,s=t+e,o=t+1,l=t-1,u=1,c=1-s*i/o,p,m,f,d;for(Math.abs(c)<r&&(c=r),c=1/c,d=c;a<=100&&(p=2*a,m=a*(e-a)*i/((l+p)*(t+p)),c=1+m*c,Math.abs(c)<r&&(c=r),u=1+m/u,Math.abs(u)<r&&(u=r),c=1/c,d*=c*u,m=-(t+a)*(s+a)*i/((t+p)*(o+p)),c=1+m*c,Math.abs(c)<r&&(c=r),u=1+m/u,Math.abs(u)<r&&(u=r),c=1/c,f=c*u,d*=f,!(Math.abs(f-1)<3e-7));a++);return d}var Gf={pdf:function(t,e,r){return r===0||r===1?e*r===t?1:0:ZM(e,t)*Math.pow(r,t)*Math.pow(1-r,e-t)},cdf:function(t,e,r){var a,s=1e-10;if(t<0)return 0;if(t>=e)return 1;if(r<0||r>1||e<=0)return NaN;t=Math.floor(t);var o=r,l=t+1,u=e-t,c=l+u,p=Math.exp(nr(c)-nr(u)-nr(l)+l*Math.log(o)+u*Math.log(1-o));return o<(l+1)/(c+2)?a=p*YM(o,l,u,s):a=1-p*YM(1-o,u,l,s),Math.round((1-a)*(1/s))/(1/s)}};function YM(i,t,e,r){for(var a=0,s=1,o=1,l=1,u=0,c=0,p;Math.abs((o-c)/o)>r;)c=o,p=-(t+u)*(t+e+u)*i/(t+2*u)/(t+2*u+1),a=o+p*a,s=l+p*s,u=u+1,p=u*(e-u)*i/(t+2*u-1)/(t+2*u),o=a+p*o,l=s+p*l,a=a/l,s=s/l,o=o/l,l=1;return o/t}function ZM(i,t){return i>170||t>170?Math.exp(aye(i,t)):f1(i)/f1(t)/f1(i-t)}function aye(i,t){return _5(i)-_5(t)-_5(i-t)}function _5(i){return i<0?NaN:nr(i+1)}function f1(i){return i<0?NaN:Ec(i+1)}var Bs={pdf:function(t,e){return t<0?0:t===0&&e===2?.5:Math.exp((e/2-1)*Math.log(t)-t/2-e/2*Math.log(2)-nr(e/2))},cdf:function(t,e){return t<0?0:O5(e/2,t/2)},inv:function(t,e){return 2*$M(t,.5*e)}},Ls={pdf:function(t,e,r){var a,s,o;return t<0?0:e<=2?t===0&&e<2?1/0:t===0&&e===2?1:1/D5(e/2,r/2)*Math.pow(e/r,e/2)*Math.pow(t,e/2-1)*Math.pow(1+e/r*t,-(e+r)/2):(a=e*t/(r+t*e),s=r/(r+t*e),o=e*s/2,o*Gf.pdf((e-2)/2,(e+r-2)/2,a))},cdf:function(t,e,r){return t<0?0:m1(e*t/(e*t+r),e/2,r/2)},inv:function(t,e,r){return r/(e*(1/P5(t,e/2,r/2)-1))}},k5={pdf:function(t,e,r){return t<0||e<0||r<0?0:r/e*Math.pow(t/e,r-1)*Math.exp(-Math.pow(t/e,r))},cdf:function(t,e,r){return t<0?0:1-Math.exp(-Math.pow(t/e,r))}},d1={pdf:function(t,e){return e<0||t%1!=0||t<0?0:Math.pow(e,t)*Math.exp(-e)/f1(t)},cdf:function(t,e){var r=0;if(t<0)return 0;for(var a=0;r<=t;r++)a+=d1.pdf(r,e);return a}},Xi={pdf:function(t,e,r,a){if(t<0||t<r-(e-a))return 0;if(t>a||t>r)return 0;if(r*2>e)return a*2>e?Xi.pdf(e-r-a+t,e,e-r,e-a):Xi.pdf(a-t,e,e-r,a);if(a*2>e)return Xi.pdf(r-t,e,r,e-a);if(r<a)return Xi.pdf(t,e,a,r);for(var s=1,o=0,l=0;l<t;l++){for(;s>1&&o<a;)s*=1-r/(e-o),o++;s*=(a-l)*(r-l)/((l+1)*(e-r-a+l+1))}for(;o<a;o++)s*=1-r/(e-o);return Math.min(1,Math.max(0,s))},cdf:function i(t,e,r,a){if(t<0||t<r-(e-a))return 0;if(t>=a||t>=r)return 1;if(r*2>e)return a*2>e?i(e-r-a+t,e,e-r,e-a):1-Xi.cdf(a-t-1,e,e-r,a);if(a*2>e)return 1-Xi.cdf(r-t-1,e,r,e-a);if(r<a)return Xi.cdf(t,e,a,r);for(var s=1,o=1,l=0,u=0;u<t;u++){for(;s>1&&l<a;){var c=1-r/(e-l);o*=c,s*=c,l++}o*=(a-u)*(r-u)/((u+1)*(e-r-a+u+1)),s+=o}for(;l<a;l++)s*=1-r/(e-l);return Math.min(1,Math.max(0,s))}},dn={pdf:function(t,e){return e=e>1e100?1e100:e,1/(Math.sqrt(e)*D5(.5,e/2))*Math.pow(1+t*t/e,-((e+1)/2))},cdf:function(t,e){var r=e/2;return m1((t+Math.sqrt(t*t+e))/(2*Math.sqrt(t*t+e)),r,r)},inv:function(t,e){var r=P5(2*Math.min(t,1-t),.5*e,.5);return r=Math.sqrt(e*(1-r)/r),t>.5?r:-r}},h1={pdf:function(t,e,r){return t<=0?0:Math.exp(-Math.log(t)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(t)-e,2)/(2*r*r))},cdf:function(t,e,r){return t<0?0:.5+.5*Zo((Math.log(t)-e)/Math.sqrt(2*r*r))},inv:function(t,e,r){return Math.exp(-1.4142135623730951*r*WM(2*t)+e)}},y1={pdf:function(t,e,r){return t!==t>>>0?!1:t<0?0:ZM(t+e-1,e-1)*Math.pow(1-r,t)*Math.pow(r,e)},cdf:function(t,e,r){var a=0,s=0;if(t<0)return 0;for(;s<=t;s++)a+=y1.pdf(s,e,r);return a}};function JM(i){for(var t=0,e=i.length;--e>=0;)t+=i[e];return t}function Rn(i){return JM(i)/i.length}function Us(i){for(var t=Rn(i),e=0,r=i.length,a;--r>=0;)a=i[r]-t,e+=a*a;return e}function Rc(i,t){return Us(i)/(i.length-(t?1:0))}function za(i,t){return Math.sqrt(Rc(i,t))}function QM(){var i=[].slice.call(arguments),t=new Array(2),e;return i.length===4?e=Math.abs(En.inv(i[1]/2,0,1)*i[2]/Math.sqrt(i[3])):e=Math.abs(En.inv(i[1]/2,0,1)*za(i[2])/Math.sqrt(i[2].length)),t[0]=i[0]-e,t[1]=i[0]+e,t}function ej(){var i=[].slice.call(arguments),t=new Array(2),e;return i.length===4?e=Math.abs(dn.inv(i[1]/2,i[3]-1)*i[2]/Math.sqrt(i[3])):e=Math.abs(dn.inv(i[1]/2,i[2].length-1)*za(i[2],!0)/Math.sqrt(i[2].length)),t[0]=i[0]-e,t[1]=i[0]+e,t}function sye(i){for(var t=1,e=i.length;--e>=0;)t*=i[e];return t}function tj(i){return Math.pow(sye(i),1/i.length)}function Vc(i,t){var e=Rn(i),r=Rn(t),a=i.length,s=new Array(a),o;for(o=0;o<a;o++)s[o]=(i[o]-e)*(t[o]-r);return JM(s)/(a-1)}function F5(i,t){return Vc(i,t)/za(i,1)/za(t,1)}function b1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b1=function(e){return typeof e}:b1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b1(i)}function oye(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function rj(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function lye(i,t,e){return t&&rj(i.prototype,t),e&&rj(i,e),i}function uye(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&M5(i,t)}function M5(i,t){return M5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},M5(i,t)}function cye(i){var t=fye();return function(){var r=g1(i),a;if(t){var s=g1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return pye(this,a)}}function pye(i,t){if(t&&(b1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mye(i)}function mye(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function fye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function g1(i){return g1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g1(i)}var v1=function(i){uye(e,i);var t=cye(e);function e(){return oye(this,e),t.apply(this,arguments)}return lye(e,[{key:"erf",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ERF"),function(o,l){return l===void 0?Zo(o):Zo(l)-Zo(o)})}},{key:"erfc",value:function(a,s){return this.runFunction(a.args,s,this.metadata("ERFC"),V5)}},{key:"expondist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("EXPON.DIST"),function(o,l,u){return u?I5.cdf(o,l):I5.pdf(o,l)})}},{key:"fisher",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FISHER"),function(o){return Math.log((1+o)/(1-o))/2})}},{key:"fisherinv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FISHERINV"),function(o){return 1-2/(Math.exp(2*o)+1)})}},{key:"gamma",value:function(a,s){return this.runFunction(a.args,s,this.metadata("GAMMA"),Ec)}},{key:"gammadist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("GAMMA.DIST"),function(o,l,u,c){return c?c1.cdf(o,l,u):c1.pdf(o,l,u)})}},{key:"gammaln",value:function(a,s){return this.runFunction(a.args,s,this.metadata("GAMMALN"),nr)}},{key:"gammainv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("GAMMA.INV"),c1.inv)}},{key:"gauss",value:function(a,s){return this.runFunction(a.args,s,this.metadata("GAUSS"),function(o){return En.cdf(o,0,1)-.5})}},{key:"betadist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BETA.DIST"),function(o,l,u,c,p,m){return o<=p?new x(R.NUM,D.ValueSmall):o>=m?new x(R.NUM,D.ValueLarge):(o=(o-p)/(m-p),c?p1.cdf(o,l,u):p1.pdf(o,l,u))})}},{key:"betainv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BETA.INV"),function(o,l,u,c,p){return c>=p?new x(R.NUM,D.WrongOrder):p1.inv(o,l,u)*(p-c)+c})}},{key:"binomialdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BINOM.DIST"),function(o,l,u,c){return o>l?new x(R.NUM,D.WrongOrder):(o=Math.trunc(o),l=Math.trunc(l),c?Gf.cdf(o,l,u):Gf.pdf(o,l,u))})}},{key:"binomialinv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BINOM.INV"),function(o,l,u){o=Math.trunc(o);for(var c=-1,p=o;p>c+1;){var m=Math.trunc((c+p)/2);Gf.cdf(m,o,l)>=u?p=m:c=m}return p})}},{key:"besselifn",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BESSELI"),function(o,l){return u1(o,Math.trunc(l))})}},{key:"besseljfn",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BESSELJ"),function(o,l){return l1(o,Math.trunc(l))})}},{key:"besselkfn",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BESSELK"),function(o,l){return qM(o,Math.trunc(l))})}},{key:"besselyfn",value:function(a,s){return this.runFunction(a.args,s,this.metadata("BESSELY"),function(o,l){return GM(o,Math.trunc(l))})}},{key:"chisqdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHISQ.DIST"),function(o,l,u){return l=Math.trunc(l),u?Bs.cdf(o,l):Bs.pdf(o,l)})}},{key:"chisqdistrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHISQ.DIST.RT"),function(o,l){return 1-Bs.cdf(o,Math.trunc(l))})}},{key:"chisqinv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHISQ.INV"),function(o,l){return Bs.inv(o,Math.trunc(l))})}},{key:"chisqinvrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHISQ.INV.RT"),function(o,l){return Bs.inv(1-o,Math.trunc(l))})}},{key:"fdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("F.DIST"),function(o,l,u,c){return l=Math.trunc(l),u=Math.trunc(u),c?Ls.cdf(o,l,u):Ls.pdf(o,l,u)})}},{key:"fdistrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("F.DIST.RT"),function(o,l,u){return 1-Ls.cdf(o,Math.trunc(l),Math.trunc(u))})}},{key:"finv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("F.INV"),function(o,l,u){return Ls.inv(o,Math.trunc(l),Math.trunc(u))})}},{key:"finvrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("F.INV.RT"),function(o,l,u){return Ls.inv(1-o,Math.trunc(l),Math.trunc(u))})}},{key:"weibulldist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("WEIBULL.DIST"),function(o,l,u,c){return c?k5.cdf(o,u,l):k5.pdf(o,u,l)})}},{key:"poissondist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("POISSON.DIST"),function(o,l,u){return o=Math.trunc(o),u?d1.cdf(o,l):d1.pdf(o,l)})}},{key:"hypgeomdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("HYPGEOM.DIST"),function(o,l,u,c,p){return o>l||o>u||l>c||u>c?new x(R.NUM,D.ValueLarge):o+c<u+l?new x(R.NUM,D.ValueLarge):(o=Math.trunc(o),l=Math.trunc(l),u=Math.trunc(u),c=Math.trunc(c),p?Xi.cdf(o,c,u,l):Xi.pdf(o,c,u,l))})}},{key:"tdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("T.DIST"),function(o,l,u){return l=Math.trunc(l),u?dn.cdf(o,l):dn.pdf(o,l)})}},{key:"tdist2t",value:function(a,s){return this.runFunction(a.args,s,this.metadata("T.DIST.2T"),function(o,l){return(1-dn.cdf(o,Math.trunc(l)))*2})}},{key:"tdistrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("T.DIST.RT"),function(o,l){return 1-dn.cdf(o,Math.trunc(l))})}},{key:"tdistold",value:function(a,s){return this.runFunction(a.args,s,this.metadata("TDIST"),function(o,l,u){return u*(1-dn.cdf(o,Math.trunc(l)))})}},{key:"tinv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("T.INV"),function(o,l){return dn.inv(o,Math.trunc(l))})}},{key:"tinv2t",value:function(a,s){return this.runFunction(a.args,s,this.metadata("T.INV.2T"),function(o,l){return dn.inv(1-o/2,Math.trunc(l))})}},{key:"lognormdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LOGNORM.DIST"),function(o,l,u,c){return c?h1.cdf(o,l,u):h1.pdf(o,l,u)})}},{key:"lognorminv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("LOGNORM.INV"),function(o,l,u){return h1.inv(o,l,u)})}},{key:"normdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NORM.DIST"),function(o,l,u,c){return c?En.cdf(o,l,u):En.pdf(o,l,u)})}},{key:"norminv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NORM.INV"),function(o,l,u){return En.inv(o,l,u)})}},{key:"normsdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NORM.S.DIST"),function(o,l){return l?En.cdf(o,0,1):En.pdf(o,0,1)})}},{key:"normsinv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NORM.S.INV"),function(o){return En.inv(o,0,1)})}},{key:"phi",value:function(a,s){return this.runFunction(a.args,s,this.metadata("PHI"),function(o){return En.pdf(o,0,1)})}},{key:"negbinomdist",value:function(a,s){return this.runFunction(a.args,s,this.metadata("NEGBINOM.DIST"),function(o,l,u,c){return o=Math.trunc(o),l=Math.trunc(l),c?y1.cdf(o,l,u):y1.pdf(o,l,u)})}},{key:"confidencenorm",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CONFIDENCE.NORM"),function(o,l,u){return QM(1,o,l,Math.trunc(u))[1]-1})}},{key:"confidencet",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CONFIDENCE.T"),function(o,l,u){return u=Math.trunc(u),u===1?new x(R.DIV_BY_ZERO):ej(1,o,l,u)[1]-1})}},{key:"standardize",value:function(a,s){return this.runFunction(a.args,s,this.metadata("STANDARDIZE"),function(o,l,u){return(o-l)/u})}}]),e}(Y);v1.implementedFunctions={ERF:{method:"erf",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0}]},ERFC:{method:"erfc",parameters:[{argumentType:N.NUMBER}]},"EXPON.DIST":{method:"expondist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN}]},FISHER:{method:"fisher",parameters:[{argumentType:N.NUMBER,greaterThan:-1,lessThan:1}]},FISHERINV:{method:"fisherinv",parameters:[{argumentType:N.NUMBER}]},GAMMA:{method:"gamma",parameters:[{argumentType:N.NUMBER}]},"GAMMA.DIST":{method:"gammadist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN}]},GAMMALN:{method:"gammaln",parameters:[{argumentType:N.NUMBER,greaterThan:0}]},"GAMMA.INV":{method:"gammainv",parameters:[{argumentType:N.NUMBER,minValue:0,lessThan:1},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0}]},GAUSS:{method:"gauss",parameters:[{argumentType:N.NUMBER}]},"BETA.DIST":{method:"betadist",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:1}]},"BETA.INV":{method:"betainv",parameters:[{argumentType:N.NUMBER,greaterThan:0,maxValue:1},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,defaultValue:0},{argumentType:N.NUMBER,defaultValue:1}]},"BINOM.DIST":{method:"binomialdist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.BOOLEAN}]},"BINOM.INV":{method:"binomialinv",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.NUMBER,greaterThan:0,lessThan:1}]},BESSELI:{method:"besselifn",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:0}]},BESSELJ:{method:"besseljfn",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:0}]},BESSELK:{method:"besselkfn",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:0}]},BESSELY:{method:"besselyfn",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:0}]},"CHISQ.DIST":{method:"chisqdist",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:1,maxValue:1e10},{argumentType:N.BOOLEAN}]},"CHISQ.DIST.RT":{method:"chisqdistrt",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:1,maxValue:1e10}]},"CHISQ.INV":{method:"chisqinv",parameters:[{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.NUMBER,minValue:1,maxValue:1e10}]},"CHISQ.INV.RT":{method:"chisqinvrt",parameters:[{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.NUMBER,minValue:1}]},"F.DIST":{method:"fdist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1},{argumentType:N.NUMBER,minValue:1},{argumentType:N.BOOLEAN}]},"F.DIST.RT":{method:"fdistrt",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1},{argumentType:N.NUMBER,minValue:1}]},"F.INV":{method:"finv",parameters:[{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.NUMBER,minValue:1},{argumentType:N.NUMBER,minValue:1}]},"F.INV.RT":{method:"finvrt",parameters:[{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.NUMBER,minValue:1},{argumentType:N.NUMBER,minValue:1}]},"WEIBULL.DIST":{method:"weibulldist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN}]},"POISSON.DIST":{method:"poissondist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0},{argumentType:N.BOOLEAN}]},"HYPGEOM.DIST":{method:"hypgeomdist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN}]},"T.DIST":{method:"tdist",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:1},{argumentType:N.BOOLEAN}]},"T.DIST.2T":{method:"tdist2t",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1}]},"T.DIST.RT":{method:"tdistrt",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER,minValue:1}]},TDIST:{method:"tdistold",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1},{argumentType:N.INTEGER,minValue:1,maxValue:2}]},"T.INV":{method:"tinv",parameters:[{argumentType:N.NUMBER,greaterThan:0,lessThan:1},{argumentType:N.NUMBER,minValue:1}]},"T.INV.2T":{method:"tinv2t",parameters:[{argumentType:N.NUMBER,greaterThan:0,maxValue:1},{argumentType:N.NUMBER,minValue:1}]},"LOGNORM.DIST":{method:"lognormdist",parameters:[{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN}]},"LOGNORM.INV":{method:"lognorminv",parameters:[{argumentType:N.NUMBER,greaterThan:0,lessThan:1},{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0}]},"NORM.DIST":{method:"normdist",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.BOOLEAN}]},"NORM.INV":{method:"norminv",parameters:[{argumentType:N.NUMBER,greaterThan:0,lessThan:1},{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0}]},"NORM.S.DIST":{method:"normsdist",parameters:[{argumentType:N.NUMBER},{argumentType:N.BOOLEAN}]},"NORM.S.INV":{method:"normsinv",parameters:[{argumentType:N.NUMBER,greaterThan:0,lessThan:1}]},PHI:{method:"phi",parameters:[{argumentType:N.NUMBER}]},"NEGBINOM.DIST":{method:"negbinomdist",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:1},{argumentType:N.NUMBER,minValue:0,maxValue:1},{argumentType:N.BOOLEAN}]},"CONFIDENCE.NORM":{method:"confidencenorm",parameters:[{argumentType:N.NUMBER,greaterThan:0,lessThan:1},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,minValue:1}]},"CONFIDENCE.T":{method:"confidencet",parameters:[{argumentType:N.NUMBER,greaterThan:0,lessThan:1},{argumentType:N.NUMBER,greaterThan:0},{argumentType:N.NUMBER,minValue:1}]},STANDARDIZE:{method:"standardize",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER,greaterThan:0}]}};v1.aliases={NEGBINOMDIST:"NEGBINOM.DIST",EXPONDIST:"EXPON.DIST",BETADIST:"BETA.DIST",NORMDIST:"NORM.DIST",NORMINV:"NORM.INV",NORMSDIST:"NORM.S.DIST",NORMSINV:"NORM.S.INV",LOGNORMDIST:"LOGNORM.DIST",LOGINV:"LOGNORM.INV",TINV:"T.INV.2T",HYPGEOMDIST:"HYPGEOM.DIST",POISSON:"POISSON.DIST",WEIBULL:"WEIBULL.DIST",FINV:"F.INV.RT",FDIST:"F.DIST.RT",CHIDIST:"CHISQ.DIST.RT",CHIINV:"CHISQ.INV.RT",GAMMADIST:"GAMMA.DIST","GAMMALN.PRECISE":"GAMMALN",GAMMAINV:"GAMMA.INV",BETAINV:"BETA.INV",BINOMDIST:"BINOM.DIST",CONFIDENCE:"CONFIDENCE.NORM",CRITBINOM:"BINOM.INV",WEIBULLDIST:"WEIBULL.DIST",TINV2T:"T.INV.2T",TDISTRT:"T.DIST.RT",TDIST2T:"T.DIST.2T",FINVRT:"F.INV.RT",FDISTRT:"F.DIST.RT",CHIDISTRT:"CHISQ.DIST.RT",CHIINVRT:"CHISQ.INV.RT",LOGNORMINV:"LOGNORM.INV",POISSONDIST:"POISSON.DIST"};var dye=ce();dye({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991});var iut=j(q());function T1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T1=function(e){return typeof e}:T1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T1(i)}function j5(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=hye(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function hye(i,t){if(!!i){if(typeof i=="string")return nj(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nj(i,t)}}function nj(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function yye(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function ij(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function bye(i,t,e){return t&&ij(i.prototype,t),e&&ij(i,e),i}function gye(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&B5(i,t)}function B5(i,t){return B5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},B5(i,t)}function vye(i){var t=Cye();return function(){var r=N1(i),a;if(t){var s=N1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Tye(this,a)}}function Tye(i,t){if(t&&(T1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nye(i)}function Nye(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Cye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function N1(i){return N1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N1(i)}var L5=function(i){gye(e,i);var t=vye(e);function e(){return yye(this,e),t.apply(this,arguments)}return bye(e,[{key:"fact",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FACT"),function(o){o=Math.trunc(o);for(var l=1,u=1;u<=o;u++)l*=u;return l})}},{key:"factdouble",value:function(a,s){return this.runFunction(a.args,s,this.metadata("FACTDOUBLE"),function(o){o=Math.trunc(o);for(var l=1,u=o;u>=1;u-=2)l*=u;return l})}},{key:"combin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COMBIN"),function(o,l){return l>o?new x(R.NUM,D.WrongOrder):(o=Math.trunc(o),l=Math.trunc(l),aj(o,l))})}},{key:"combina",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COMBINA"),function(o,l){return o=Math.trunc(o),l=Math.trunc(l),o+l-1>=1030?new x(R.NUM,D.ValueLarge):o===0&&l===0?1:aj(o+l-1,l)})}},{key:"gcd",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("GCD"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersCoerceRangesDropNulls(u);if(p instanceof x)return p;var m=0,f=j5(p),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;if(h<0)return new x(R.NUM,D.ValueSmall);m=sj(m,Math.trunc(h))}}catch(y){f.e(y)}finally{f.f()}return m>Number.MAX_SAFE_INTEGER?new x(R.NUM,D.ValueLarge):m})}},{key:"lcm",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("LCM"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersCoerceRangesDropNulls(u);if(p instanceof x)return p;var m=1,f=j5(p),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;if(h<0)return new x(R.NUM,D.ValueSmall);m=Sye(m,Math.trunc(h))}}catch(y){f.e(y)}finally{f.f()}return m>Number.MAX_SAFE_INTEGER?new x(R.NUM,D.ValueLarge):m})}},{key:"mround",value:function(a,s){return this.runFunction(a.args,s,this.metadata("MROUND"),function(o,l){return l===0?0:o>0&&l<0||o<0&&l>0?new x(R.NUM,D.DistinctSigns):Math.round(o/l)*l})}},{key:"multinomial",value:function(a,s){return this.runFunction(a.args,s,this.metadata("MULTINOMIAL"),function(){for(var o=0,l=1,u=arguments.length,c=new Array(u),p=0;p<u;p++)c[p]=arguments[p];for(var m=0,f=c;m<f.length;m++){var d=f[m];if(d<0)return new x(R.NUM,D.ValueSmall);d=Math.trunc(d);for(var h=1;h<=d;h++)l*=(o+h)/h;o+=d}return Math.round(l)})}},{key:"quotient",value:function(a,s){return this.runFunction(a.args,s,this.metadata("QUOTIENT"),function(o,l){return l===0?new x(R.DIV_BY_ZERO):Math.trunc(o/l)})}},{key:"seriessum",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SERIESSUM"),function(l,u,c,p){var m=o.arithmeticHelper.manyToOnlyNumbersDropNulls(p.valuesFromTopLeftCorner());if(m instanceof x)return m;var f=0;m.reverse();var d=j5(m),h;try{for(d.s();!(h=d.n()).done;){var y=h.value;f*=Math.pow(l,c),f+=y}}catch(b){d.e(b)}finally{d.f()}return f*Math.pow(l,u)})}},{key:"sign",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SIGN"),function(o){return o>0?1:o<0?-1:0})}},{key:"sumx2my2",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SUMX2MY2"),function(o,l){var u=o.valuesFromTopLeftCorner(),c=l.valuesFromTopLeftCorner();if(u.length!==c.length)return new x(R.NA,D.EqualLength);for(var p=u.length,m=0,f=0;f<p;f++){var d=u[f],h=c[f];if(d instanceof x)return d;if(h instanceof x)return h;typeof d=="number"&&typeof h=="number"&&(m+=Math.pow(d,2)-Math.pow(h,2))}return m})}},{key:"sumx2py2",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SUMX2PY2"),function(o,l){var u=o.valuesFromTopLeftCorner(),c=l.valuesFromTopLeftCorner();if(u.length!==c.length)return new x(R.NA,D.EqualLength);for(var p=u.length,m=0,f=0;f<p;f++){var d=u[f],h=c[f];if(d instanceof x)return d;if(h instanceof x)return h;typeof d=="number"&&typeof h=="number"&&(m+=Math.pow(d,2)+Math.pow(h,2))}return m})}},{key:"sumxmy2",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SUMXMY2"),function(o,l){var u=o.valuesFromTopLeftCorner(),c=l.valuesFromTopLeftCorner();if(u.length!==c.length)return new x(R.NA,D.EqualLength);for(var p=u.length,m=0,f=0;f<p;f++){var d=u[f],h=c[f];if(d instanceof x)return d;if(h instanceof x)return h;typeof d=="number"&&typeof h=="number"&&(m+=Math.pow(d-h,2))}return m})}}]),e}(Y);L5.implementedFunctions={FACT:{method:"fact",parameters:[{argumentType:N.NUMBER,minValue:0,maxValue:170}]},FACTDOUBLE:{method:"factdouble",parameters:[{argumentType:N.NUMBER,minValue:0,maxValue:288}]},COMBIN:{method:"combin",parameters:[{argumentType:N.NUMBER,minValue:0,lessThan:1030},{argumentType:N.NUMBER,minValue:0}]},COMBINA:{method:"combina",parameters:[{argumentType:N.NUMBER,minValue:0},{argumentType:N.NUMBER,minValue:0}]},GCD:{method:"gcd",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},LCM:{method:"lcm",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},MROUND:{method:"mround",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},MULTINOMIAL:{method:"multinomial",parameters:[{argumentType:N.NUMBER}],repeatLastArgs:1,expandRanges:!0},QUOTIENT:{method:"quotient",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER}]},SERIESSUM:{method:"seriessum",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.RANGE}]},SIGN:{method:"sign",parameters:[{argumentType:N.NUMBER}]},SUMX2MY2:{method:"sumx2my2",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},SUMX2PY2:{method:"sumx2py2",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},SUMXMY2:{method:"sumxmy2",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]}};function aj(i,t){2*t>i&&(t=i-t);for(var e=1,r=1;r<=t;r++)e*=(i-t+r)/r;return Math.round(e)}function sj(i,t){if(i<t){var e=[t,i];i=e[0],t=e[1]}for(;t>0;){var r=[t,i%t];i=r[0],t=r[1]}return i}function Sye(i,t){return i===0||t===0?0:i*(t/sj(i,t))}var gut=j(q());function C1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C1=function(e){return typeof e}:C1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C1(i)}function oj(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=lj(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function wt(i,t){return xye(i)||wye(i,t)||lj(i,t)||Aye()}function Aye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lj(i,t){if(!!i){if(typeof i=="string")return uj(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return uj(i,t)}}function uj(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function wye(i,t){var e=i==null?null:typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(e!=null){var r=[],a=!0,s=!1,o,l;try{for(e=e.call(i);!(a=(o=e.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(u){s=!0,l=u}finally{try{!a&&e.return!=null&&e.return()}finally{if(s)throw l}}return r}}function xye(i){if(Array.isArray(i))return i}function Eye(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function cj(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function Rye(i,t,e){return t&&cj(i.prototype,t),e&&cj(i,e),i}function Vye(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&U5(i,t)}function U5(i,t){return U5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},U5(i,t)}function Iye(i){var t=Pye();return function(){var r=S1(i),a;if(t){var s=S1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Oye(this,a)}}function Oye(i,t){if(t&&(C1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dye(i)}function Dye(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Pye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function S1(i){return S1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S1(i)}var z5=function(i){Vye(e,i);var t=Iye(e);function e(){return Eye(this,e),t.apply(this,arguments)}return Rye(e,[{key:"complex",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COMPLEX"),function(o,l,u){return u!=="i"&&u!=="j"?new x(R.VALUE,D.ShouldBeIorJ):At([o,l],u)})}},{key:"imabs",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMABS"),hj)}},{key:"imaginary",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMAGINARY"),function(o){var l=wt(o,2),u=l[0],c=l[1];return c})}},{key:"imreal",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMREAL"),function(o){var l=wt(o,2),u=l[0],c=l[1];return u})}},{key:"imargument",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMARGUMENT"),function(o){var l=wt(o,2),u=l[0],c=l[1];return u===0&&c===0?new x(R.DIV_BY_ZERO):Math.atan2(c,u)})}},{key:"imconjugate",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMCONJUGATE"),function(o){var l=wt(o,2),u=l[0],c=l[1];return At([u,-c])})}},{key:"imcos",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMCOS"),function(o){return At(A1(o))})}},{key:"imcosh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMCOSH"),function(o){return At(mj(o))})}},{key:"imcot",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMCOT"),function(o){return At(Jo(A1(o),w1(o)))})}},{key:"imcsc",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMCSC"),function(o){return At(Jo([1,0],w1(o)))})}},{key:"imcsch",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMCSCH"),function(o){return At(Jo([1,0],fj(o)))})}},{key:"imsec",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMSEC"),function(o){return At(Jo([1,0],A1(o)))})}},{key:"imsech",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMSECH"),function(o){return At(Jo([1,0],mj(o)))})}},{key:"imsin",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMSIN"),function(o){return At(w1(o))})}},{key:"imsinh",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMSINH"),function(o){return At(fj(o))})}},{key:"imtan",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMTAN"),function(o){return At(Jo(w1(o),A1(o)))})}},{key:"imdiv",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMDIV"),function(o,l){return At(Jo(o,l))})}},{key:"improduct",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("IMPRODUCT"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceComplexExactRanges(u);if(p instanceof x)return p;var m=[1,0],f=oj(p),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;m=pj(m,h)}}catch(y){f.e(y)}finally{f.f()}return At(m)})}},{key:"imsum",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("IMSUM"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceComplexExactRanges(u);if(p instanceof x)return p;var m=[0,0],f=oj(p),d;try{for(f.s();!(d=f.n()).done;){var h=d.value;m=_ye(m,h)}}catch(y){f.e(y)}finally{f.f()}return At(m)})}},{key:"imsub",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMSUB"),function(o,l){return At(kye(o,l))})}},{key:"imexp",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMEXP"),function(o){return At(dj(o))})}},{key:"imln",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMLN"),function(o){return At(x1(o))})}},{key:"imlog10",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMLOG10"),function(o){var l=x1(o),u=wt(l,2),c=u[0],p=u[1],m=Math.log(10);return At([c/m,p/m])})}},{key:"imlog2",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMLOG2"),function(o){var l=x1(o),u=wt(l,2),c=u[0],p=u[1],m=Math.log(2);return At([c/m,p/m])})}},{key:"impower",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMPOWER"),function(o,l){return At(yj(o,l))})}},{key:"imsqrt",value:function(a,s){return this.runFunction(a.args,s,this.metadata("IMSQRT"),function(o){return At(yj(o,.5))})}}]),e}(Y);z5.implementedFunctions={COMPLEX:{method:"complex",parameters:[{argumentType:N.NUMBER},{argumentType:N.NUMBER},{argumentType:N.STRING,defaultValue:"i"}]},IMABS:{method:"imabs",parameters:[{argumentType:N.COMPLEX}]},IMAGINARY:{method:"imaginary",parameters:[{argumentType:N.COMPLEX}]},IMREAL:{method:"imreal",parameters:[{argumentType:N.COMPLEX}]},IMARGUMENT:{method:"imargument",parameters:[{argumentType:N.COMPLEX}]},IMCONJUGATE:{method:"imconjugate",parameters:[{argumentType:N.COMPLEX}]},IMCOS:{method:"imcos",parameters:[{argumentType:N.COMPLEX}]},IMCOSH:{method:"imcosh",parameters:[{argumentType:N.COMPLEX}]},IMCOT:{method:"imcot",parameters:[{argumentType:N.COMPLEX}]},IMCSC:{method:"imcsc",parameters:[{argumentType:N.COMPLEX}]},IMCSCH:{method:"imcsch",parameters:[{argumentType:N.COMPLEX}]},IMSEC:{method:"imsec",parameters:[{argumentType:N.COMPLEX}]},IMSECH:{method:"imsech",parameters:[{argumentType:N.COMPLEX}]},IMSIN:{method:"imsin",parameters:[{argumentType:N.COMPLEX}]},IMSINH:{method:"imsinh",parameters:[{argumentType:N.COMPLEX}]},IMTAN:{method:"imtan",parameters:[{argumentType:N.COMPLEX}]},IMDIV:{method:"imdiv",parameters:[{argumentType:N.COMPLEX},{argumentType:N.COMPLEX}]},IMPRODUCT:{method:"improduct",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},IMSUM:{method:"imsum",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},IMSUB:{method:"imsub",parameters:[{argumentType:N.COMPLEX},{argumentType:N.COMPLEX}]},IMEXP:{method:"imexp",parameters:[{argumentType:N.COMPLEX}]},IMLN:{method:"imln",parameters:[{argumentType:N.COMPLEX}]},IMLOG10:{method:"imlog10",parameters:[{argumentType:N.COMPLEX}]},IMLOG2:{method:"imlog2",parameters:[{argumentType:N.COMPLEX}]},IMPOWER:{method:"impower",parameters:[{argumentType:N.COMPLEX},{argumentType:N.NUMBER}]},IMSQRT:{method:"imsqrt",parameters:[{argumentType:N.COMPLEX}]}};function _ye(i,t){var e=wt(i,2),r=e[0],a=e[1],s=wt(t,2),o=s[0],l=s[1];return[r+o,a+l]}function kye(i,t){var e=wt(i,2),r=e[0],a=e[1],s=wt(t,2),o=s[0],l=s[1];return[r-o,a-l]}function pj(i,t){var e=wt(i,2),r=e[0],a=e[1],s=wt(t,2),o=s[0],l=s[1];return[r*o-a*l,r*l+o*a]}function Jo(i,t){var e=wt(i,2),r=e[0],a=e[1],s=wt(t,2),o=s[0],l=s[1],u=Math.pow(o,2)+Math.pow(l,2),c=pj([r,a],[o,-l]),p=wt(c,2),m=p[0],f=p[1];return[m/u,f/u]}function A1(i){var t=wt(i,2),e=t[0],r=t[1];return[Math.cos(e)*Math.cosh(r),-Math.sin(e)*Math.sinh(r)]}function mj(i){var t=wt(i,2),e=t[0],r=t[1];return[Math.cosh(e)*Math.cos(r),Math.sinh(e)*Math.sin(r)]}function w1(i){var t=wt(i,2),e=t[0],r=t[1];return[Math.sin(e)*Math.cosh(r),Math.cos(e)*Math.sinh(r)]}function fj(i){var t=wt(i,2),e=t[0],r=t[1];return[Math.sinh(e)*Math.cos(r),Math.cosh(e)*Math.sin(r)]}function dj(i){var t=wt(i,2),e=t[0],r=t[1];return[Math.exp(e)*Math.cos(r),Math.exp(e)*Math.sin(r)]}function hj(i){var t=wt(i,2),e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function x1(i){var t=wt(i,2),e=t[0],r=t[1];return[Math.log(hj([e,r])),Math.atan2(r,e)]}function yj(i,t){var e=x1(i),r=wt(e,2),a=r[0],s=r[1];return dj([t*a,t*s])}var Lut=j(q());function E1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E1=function(e){return typeof e}:E1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E1(i)}function bj(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=Fye(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function Fye(i,t){if(!!i){if(typeof i=="string")return gj(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return gj(i,t)}}function gj(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Mye(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function vj(i,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(i,r.key,r)}}function jye(i,t,e){return t&&vj(i.prototype,t),e&&vj(i,e),i}function Bye(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&H5(i,t)}function H5(i,t){return H5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},H5(i,t)}function Lye(i){var t=Hye();return function(){var r=R1(i),a;if(t){var s=R1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Uye(this,a)}}function Uye(i,t){if(t&&(E1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zye(i)}function zye(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Hye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function R1(i){return R1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R1(i)}var V1=function(i){Bye(e,i);var t=Lye(e);function e(){return Mye(this,e),t.apply(this,arguments)}return jye(e,[{key:"avedev",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("AVEDEV"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);if(p instanceof x)return p;if(p.length===0)return new x(R.DIV_BY_ZERO);var m=Rn(p);return p.reduce(function(f,d){return f+Math.abs(d-m)},0)/p.length})}},{key:"devsq",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("DEVSQ"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);return p instanceof x?p:p.length===0?0:Us(p)})}},{key:"geomean",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("GEOMEAN"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);if(p instanceof x)return p;if(p.length===0)return new x(R.NUM,D.OneValue);var m=bj(p),f;try{for(m.s();!(f=m.n()).done;){var d=f.value;if(d<=0)return new x(R.NUM,D.ValueSmall)}}catch(h){m.e(h)}finally{m.f()}return tj(p)})}},{key:"harmean",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("HARMEAN"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);if(p instanceof x)return p;if(p.length===0)return new x(R.NUM,D.OneValue);var m=bj(p),f;try{for(m.s();!(f=m.n()).done;){var d=f.value;if(d<=0)return new x(R.NUM,D.ValueSmall)}}catch(h){m.e(h)}finally{m.f()}return p.length/p.reduce(function(h,y){return h+1/y},0)})}},{key:"correl",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CORREL"),function(o,l){if(o.numberOfElements()!==l.numberOfElements())return new x(R.NA,D.EqualLength);var u=Qo(o,l);if(u instanceof x)return u;var c=u[0].length;return c<=1?new x(R.DIV_BY_ZERO,D.TwoValues):F5(u[0],u[1])})}},{key:"rsq",value:function(a,s){return this.runFunction(a.args,s,this.metadata("RSQ"),function(o,l){if(o.numberOfElements()!==l.numberOfElements())return new x(R.NA,D.EqualLength);var u=Qo(o,l);if(u instanceof x)return u;var c=u[0].length;return c<=1?new x(R.DIV_BY_ZERO,D.TwoValues):Math.pow(F5(u[0],u[1]),2)})}},{key:"covariancep",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COVARIANCE.P"),function(o,l){if(o.numberOfElements()!==l.numberOfElements())return new x(R.NA,D.EqualLength);var u=Qo(o,l);if(u instanceof x)return u;var c=u[0].length;return c<1?new x(R.DIV_BY_ZERO,D.OneValue):c===1?0:Vc(u[0],u[1])*(c-1)/c})}},{key:"covariances",value:function(a,s){return this.runFunction(a.args,s,this.metadata("COVARIANCE.S"),function(o,l){if(o.numberOfElements()!==l.numberOfElements())return new x(R.NA,D.EqualLength);var u=Qo(o,l);if(u instanceof x)return u;var c=u[0].length;return c<=1?new x(R.DIV_BY_ZERO,D.TwoValues):Vc(u[0],u[1])})}},{key:"ztest",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("Z.TEST"),function(l,u,c){var p=o.arithmeticHelper.manyToExactNumbers(l.valuesFromTopLeftCorner());if(p instanceof x)return p;var m=p.length;if(c===void 0){if(m<2)return new x(R.DIV_BY_ZERO,D.TwoValues);c=za(p,!0)}return m<1?new x(R.NA,D.OneValue):c===0?new x(R.DIV_BY_ZERO):1-En.cdf((Rn(p)-u)/(c/Math.sqrt(m)),0,1)})}},{key:"ftest",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("F.TEST"),function(l,u){var c=o.arithmeticHelper.manyToExactNumbers(l.valuesFromTopLeftCorner()),p=o.arithmeticHelper.manyToExactNumbers(u.valuesFromTopLeftCorner());if(c instanceof x)return c;if(p instanceof x)return p;if(c.length<=1||p.length<=1)return new x(R.DIV_BY_ZERO);var m=Rc(c,!0),f=Rc(p,!0);if(m===0||f===0)return new x(R.DIV_BY_ZERO);var d=m/f,h=Ls.cdf(d,c.length-1,p.length-1);return 2*Math.min(h,1-h)})}},{key:"steyx",value:function(a,s){return this.runFunction(a.args,s,this.metadata("STEYX"),function(o,l){if(o.numberOfElements()!==l.numberOfElements())return new x(R.NA,D.EqualLength);var u=Qo(o,l);if(u instanceof x)return u;var c=u[0].length;return c<=2?new x(R.DIV_BY_ZERO,D.ThreeValues):Math.sqrt((Us(u[0])-Math.pow(Vc(u[0],u[1])*(c-1),2)/Us(u[1]))/(c-2))})}},{key:"slope",value:function(a,s){return this.runFunction(a.args,s,this.metadata("SLOPE"),function(o,l){if(o.numberOfElements()!==l.numberOfElements())return new x(R.NA,D.EqualLength);var u=Qo(o,l);if(u instanceof x)return u;var c=u[0].length;return c<=1?new x(R.DIV_BY_ZERO,D.TwoValues):Vc(u[0],u[1])*(c-1)/Us(u[1])})}},{key:"chisqtest",value:function(a,s){return this.runFunction(a.args,s,this.metadata("CHISQ.TEST"),function(o,l){var u=o.height(),c=o.width();if(l.height()!==u||l.width()!==c)return new x(R.NA,D.EqualLength);var p=Qo(o,l);if(p instanceof x)return p;if(p[0].length<=1)return new x(R.DIV_BY_ZERO,D.TwoValues);for(var m=0,f=0;f<p[0].length;f++){if(p[1][f]===0)return new x(R.DIV_BY_ZERO);m+=Math.pow(p[0][f]-p[1][f],2)/p[1][f]}return m<0?new x(R.NUM,D.NaN):1-Bs.cdf(m,u>1&&c>1?(u-1)*(c-1):u*c-1)})}},{key:"ttest",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("T.TEST"),function(l,u,c,p){var m=o.arithmeticHelper.manyToExactNumbers(l.valuesFromTopLeftCorner()),f=o.arithmeticHelper.manyToExactNumbers(u.valuesFromTopLeftCorner());if(m instanceof x)return m;if(f instanceof x)return f;var d=m.length,h=f.length;if(p===1){if(h!==d)return new x(R.NA,D.EqualLength);if(d<=1)return new x(R.DIV_BY_ZERO,D.TwoValues);for(var y=Array(d),b=0;b<d;b++)y[b]=m[b]-f[b];var g=za(y,!0);if(g===0)return new x(R.DIV_BY_ZERO);var v=Math.abs(Math.sqrt(d)*Rn(y)/g);return c*(1-dn.cdf(v,d-1))}else if(p===2){if(d<=1||h<=1)return new x(R.DIV_BY_ZERO,D.TwoValues);var C=(Us(m)+Us(f))/(d+h-2);if(C===0)return new x(R.DIV_BY_ZERO);var w=Math.abs((Rn(m)-Rn(f))/Math.sqrt(C*(1/d+1/h)));return c*(1-dn.cdf(w,d+h-2))}else{if(d<=1||h<=1)return new x(R.DIV_BY_ZERO,D.TwoValues);var S=Rc(m,!0),A=Rc(f,!0);if(S===0&&A===0)return new x(R.DIV_BY_ZERO);var E=Math.abs((Rn(m)-Rn(f))/Math.sqrt(S/d+A/h)),I=Math.pow(S/d+A/h,2)/(Math.pow(S/d,2)/(d-1)+Math.pow(A/h,2)/(h-1));return c*(1-dn.cdf(E,I))}})}},{key:"skew",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SKEW"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);if(p instanceof x)return p;var m=p.length;if(m<3)return new x(R.DIV_BY_ZERO,D.ThreeValues);var f=Rn(p),d=za(p,!0);return d===0?new x(R.DIV_BY_ZERO):p.reduce(function(h,y){return h+Math.pow((y-f)/d,3)},0)*m/(m-1)/(m-2)})}},{key:"skewp",value:function(a,s){var o=this;return this.runFunction(a.args,s,this.metadata("SKEW.P"),function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var p=o.arithmeticHelper.coerceNumbersExactRanges(u);if(p instanceof x)return p;var m=p.length;if(m<3)return new x(R.DIV_BY_ZERO,D.ThreeValues);var f=Rn(p),d=za(p,!1);return d===0?new x(R.DIV_BY_ZERO):p.reduce(function(h,y){return h+Math.pow((y-f)/d,3)},0)/m})}}]),e}(Y);V1.implementedFunctions={AVEDEV:{method:"avedev",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},DEVSQ:{method:"devsq",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},GEOMEAN:{method:"geomean",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},HARMEAN:{method:"harmean",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},CORREL:{method:"correl",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},RSQ:{method:"rsq",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},"COVARIANCE.P":{method:"covariancep",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},"COVARIANCE.S":{method:"covariances",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},"Z.TEST":{method:"ztest",parameters:[{argumentType:N.RANGE},{argumentType:N.NUMBER},{argumentType:N.NUMBER,optionalArg:!0}]},"F.TEST":{method:"ftest",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},STEYX:{method:"steyx",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},SLOPE:{method:"slope",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},"CHISQ.TEST":{method:"chisqtest",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE}]},"T.TEST":{method:"ttest",parameters:[{argumentType:N.RANGE},{argumentType:N.RANGE},{argumentType:N.INTEGER,minValue:1,maxValue:2},{argumentType:N.INTEGER,minValue:1,maxValue:3}]},SKEW:{method:"skew",parameters:[{argumentType:N.ANY}],repeatLastArgs:1},"SKEW.P":{method:"skewp",parameters:[{argumentType:N.ANY}],repeatLastArgs:1}};V1.aliases={COVAR:"COVARIANCE.P",FTEST:"F.TEST",PEARSON:"CORREL",ZTEST:"Z.TEST",CHITEST:"CHISQ.TEST",TTEST:"T.TEST",COVARIANCEP:"COVARIANCE.P",COVARIANCES:"COVARIANCE.S",SKEWP:"SKEW.P"};function Qo(i,t){for(var e=i.iterateValuesFromTopLeftCorner(),r=t.iterateValuesFromTopLeftCorner(),a,s,o=[],l=[];a=e.next(),s=r.next(),!a.done&&!s.done;){var u=a.value,c=s.value;if(u instanceof x)return u;if(c instanceof x)return c;he(u)&&he(c)&&(o.push(W(u)),l.push(W(c)))}return[o,l]}function O1(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O1=function(e){return typeof e}:O1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O1(i)}function Gye(i,t){var e=typeof Symbol!="undefined"&&i[Symbol.iterator]||i["@@iterator"];if(!e){if(Array.isArray(i)||(e=qye(i))||t&&i&&typeof i.length=="number"){e&&(i=e);var r=0,a=function(){};return{s:a,n:function(){return r>=i.length?{done:!0}:{done:!1,value:i[r++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,l;return{s:function(){e=e.call(i)},n:function(){var c=e.next();return s=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!s&&e.return!=null&&e.return()}finally{if(o)throw l}}}}function qye(i,t){if(!!i){if(typeof i=="string")return Tj(i,t);var e=Object.prototype.toString.call(i).slice(8,-1);if(e==="Object"&&i.constructor&&(e=i.constructor.name),e==="Map"||e==="Set")return Array.from(i);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Tj(i,t)}}function Tj(i,t){(t==null||t>i.length)&&(t=i.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=i[e];return r}function Wye(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function $ye(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(t&&t.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),t&&G5(i,t)}function G5(i,t){return G5=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},G5(i,t)}function Kye(i){var t=Zye();return function(){var r=D1(i),a;if(t){var s=D1(this).constructor;a=Reflect.construct(r,arguments,s)}else a=r.apply(this,arguments);return Xye(this,a)}}function Xye(i,t){if(t&&(O1(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yye(i)}function Yye(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Zye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function D1(i){return D1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},D1(i)}var Ie=function(i){$ye(e,i);var t=Kye(e);function e(){return Wye(this,e),t.apply(this,arguments)}return e}(Jt);Ie.HyperFormula=Jt;Ie.ErrorType=R;Ie.CellType=Fr;Ie.CellValueType=Kn;Ie.CellValueDetailedType=q9;Ie.DetailedCellError=Db;Ie.ExportedCellChange=bg;Ie.ExportedNamedExpressionChange=DS;Ie.ConfigValueTooBigError=fy;Ie.ConfigValueTooSmallError=my;Ie.EvaluationSuspendedError=hy;Ie.ExpectedOneOfValuesError=dy;Ie.ExpectedValueOfTypeError=Re;Ie.FunctionPlugin=Y;Ie.FunctionPluginValidationError=Um;Ie.InvalidAddressError=ay;Ie.InvalidArgumentsError=ot;Ie.LanguageNotRegisteredError=Lm;Ie.LanguageAlreadyRegisteredError=by;Ie.MissingTranslationError=As;Ie.NamedExpressionDoesNotExistError=Ss;Ie.NamedExpressionNameIsAlreadyTakenError=sy;Ie.NamedExpressionNameIsInvalidError=oy;Ie.NoOperationToRedoError=uy;Ie.NoOperationToUndoError=ly;Ie.NoRelativeAddressesAllowedError=_u;Ie.NoSheetWithIdError=$e;Ie.NoSheetWithNameError=iy;Ie.NotAFormulaError=Bm;Ie.NothingToPasteError=cy;Ie.ProtectedFunctionTranslationError=yy;Ie.SheetNameAlreadyTakenError=Ns;Ie.SheetSizeLimitExceededError=Ln;Ie.SourceLocationHasArrayError=Na;Ie.TargetLocationHasArrayError=Eo;Ie.UnableToParseError=py;var Jye=qi.defaultConfig.language;Jt.registerLanguage(Jye,Dg);Jt.languages[Dg.langCode]=Dg;var P1=Gye(Object.getOwnPropertyNames(I1)),Nj;try{for(P1.s();!(Nj=P1.n()).done;)q5=Nj.value,q5.startsWith("_")||Jt.registerFunctionPlugin(I1[q5])}catch(i){P1.e(i)}finally{P1.f()}var q5;var Ic=class extends ue{static get stateVariablesShadowedForReference(){return["cells","height"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:100,isAbsolute:!1},public:!0,forRenderer:!0},e.minNumRows={createComponentOfType:"number",createStateVariable:"minNumRows",defaultValue:4,public:!0,forRenderer:!0},e.minNumColumns={createComponentOfType:"number",createStateVariable:"minNumColumns",defaultValue:4,public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize"},e.columnHeaders={createComponentOfType:"boolean",createStateVariable:"columnHeaders",defaultValue:!0,public:!0,forRenderer:!0},e.rowHeaders={createComponentOfType:"boolean",createStateVariable:"rowHeaders",defaultValue:!0,public:!0,forRenderer:!0},e.fixedRowsTop={createComponentOfType:"integer",createStateVariable:"fixedRowsTop",defaultValue:0,clamp:[0,1/0],public:!0,forRenderer:!0},e.fixedColumnsLeft={createComponentOfType:"integer",createStateVariable:"fixedColumnsLeft",defaultValue:0,clamp:[0,1/0],public:!0,forRenderer:!0},e.hiddenColumns={createComponentOfType:"numberList",createStateVariable:"hiddenColumns",defaultValue:[],public:!0,forRenderer:!0},e.hiddenRows={createComponentOfType:"numberList",createStateVariable:"hiddenRows",defaultValue:[],public:!0,forRenderer:!0},e}static returnChildGroups(){return[{group:"cells",componentTypes:["cell"]},{group:"rows",componentTypes:["row"]},{group:"columns",componentTypes:["column"]},{group:"cellBlocks",componentTypes:["cellBlock"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.cellNameToRowCol={additionalStateVariablesDefined:["cellNamesByRowCol"],returnDependencies:()=>({cellRelatedChildren:{dependencyType:"child",childGroups:["cells","rows","columns","cellBlocks"],variableNames:["rowNum","colNum","prescribedCellsWithColNum","prescribedCellsWithRowNum","prescribedCellsRowsColumnsBlocks"],variablesOptional:!0}}),definition({dependencyValues:e,componentInfoObjects:r}){let a=Cj({cellRelatedChildren:e.cellRelatedChildren,componentInfoObjects:r});return{newValues:{cellNameToRowCol:a.cellNameToRowCol,cellNamesByRowCol:a.cellNamesByRowCol}}}},t.numRows={public:!0,componentType:"number",returnDependencies:()=>({minNumRows:{dependencyType:"stateVariable",variableName:"minNumRows"},cellNamesByRowCol:{dependencyType:"stateVariable",variableName:"cellNamesByRowCol"}}),definition({dependencyValues:e}){let r=e.minNumRows;return Number.isFinite(r)||(r=4),r=Math.max(r,e.cellNamesByRowCol.length),{newValues:{numRows:r}}}},t.numColumns={public:!0,componentType:"number",returnDependencies:()=>({minNumColumns:{dependencyType:"stateVariable",variableName:"minNumColumns"},cellNamesByRowCol:{dependencyType:"stateVariable",variableName:"cellNamesByRowCol"}}),definition({dependencyValues:e}){let r=e.minNumColumns;Number.isFinite(r)||(r=4);for(let a of e.cellNamesByRowCol)a&&(r=Math.max(r,a.length));return{newValues:{numColumns:r}}}},t.height={public:!0,componentType:"_componentSize",forRenderer:!0,returnDependencies:()=>({heightAttr:{dependencyType:"attributeComponent",attributeName:"height",variableNames:["componentSize"]},numRows:{dependencyType:"stateVariable",variableName:"numRows"}}),definition({dependencyValues:e}){if(e.heightAttr===null){let r;return Number.isFinite(e.numRows)&&e.numRows>=0?r=40+e.numRows*23:r=132,{newValues:{height:{size:r,isAbsolute:!0}}}}return{newValues:{height:e.heightAttr.stateValues.componentSize}}}},t.cells={public:!0,componentType:"cell",forRenderer:!0,isArray:!0,entryPrefixes:["cell","row","column","range"],nDimensions:2,defaultEntryValue:"",stateVariablesDeterminingDependencies:["cellNamesByRowCol"],returnArraySizeDependencies:()=>({numRows:{dependencyType:"stateVariable",variableName:"numRows"},numColumns:{dependencyType:"stateVariable",variableName:"numColumns"}}),returnArraySize({dependencyValues:e}){return[e.numRows,e.numColumns]},returnEntryDimensions:e=>e==="range"?2:1,returnWrappingComponents(e){return e==="cell"?[]:e==="row"?[["row"]]:e==="column"?[["column"]]:[["row"],["cellBlock"]]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="cell"){let s,o,l=/^([a-zA-Z]+)([1-9]\d*)$/,u=r.match(l);if(u)o=u[1],s=u[2];else{let m=/^\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\)$/;if(u=r.match(m),u)s=u[1],o=u[2];else return[]}let c=ye(s),p=ye(o);return c>=0&&c<a[0]&&p>=0&&p<a[1]?[String(c)+","+String(p)]:[]}else if(e==="row"){let s=ye(r);if(!(s>=0&&s<a[0]))return[];let o=[],l=String(s)+",";for(let u=0;u<a[1];u++)o.push(l+u);return o}else if(e==="column"){let s=ye(r);if(!(s>=0&&s<a[1]))return[];let o=[],l=","+String(s);for(let u=0;u<a[0];u++)o.push(u+l);return o}else{let s,o,l,u,c=/^([a-zA-Z]+)([1-9]\d*)([a-zA-Z]+)([1-9]\d*)$/,p=r.match(c);if(p)o=ye(p[1]),s=ye(p[2]),u=ye(p[3]),l=ye(p[4]);else{let b=/^\(\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\),\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\)\)$/;if(p=r.match(b),p)s=ye(p[1]),o=ye(p[2]),l=ye(p[3]),u=ye(p[4]);else return[]}if(!(s>=0&&l>=0&&o>=0&&u>=0))return[];let m=Math.min(Math.min(s,l),a[0]-1),f=Math.min(Math.max(s,l),a[0]-1),d=Math.min(Math.min(o,u),a[1]-1),h=Math.min(Math.max(o,u),a[1]-1),y=[];for(let b=m;b<=f;b++){let g=[],v=String(b)+",";for(let C=d;C<=h;C++)g.push(v+C);y.push(g)}return y}},arrayVarNameFromArrayKey(e){return"cell("+e.split(",").map(r=>Number(r)+1).join(",")+")"},returnArrayDependenciesByKey({stateValues:e,arrayKeys:r}){let a={},s=e.cellNamesByRowCol;for(let o of r){let[l,u]=o.split(",");s[l]&&s[l][u]&&(a[o]={cellText:{dependencyType:"stateVariable",componentName:s[l][u],variableName:"text",variablesOptional:!0}})}return{dependenciesByKey:a}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={},s={};for(let l of r)e[l].cellText!==void 0?a[l]=e[l].cellText:s[l]={};let o={};return Object.keys(a).length>0&&(o.newValues={cells:a}),Object.keys(s).length>0&&(o.useEssentialOrDefaultValue={cells:s}),o},inverseArrayDefinitionByKey({desiredStateVariableValues:e,dependencyNamesByKey:r}){let a=[];for(let s in e.cells)if(r[s].cellText!==void 0)a.push({setDependency:r[s].cellText,desiredValue:e.cells[s]});else{let o=e.cells[s];a.push({setStateVariable:"cells",value:{[s]:o===null?"":String(o)}})}return{success:!0,instructions:a}}},t.evaluatedCells={isArray:!0,public:!0,componentType:"cell",entryPrefixes:["evaluatedCell","evaluatedRow","evaluatedColumn","evaluatedRange"],nDimensions:2,defaultEntryValue:null,stateVariablesDeterminingDependencies:["cellNamesByRowCol"],returnArraySizeDependencies:()=>({numRows:{dependencyType:"stateVariable",variableName:"numRows"},numColumns:{dependencyType:"stateVariable",variableName:"numColumns"}}),returnArraySize({dependencyValues:e}){return[e.numRows,e.numColumns]},returnArrayDependenciesByKey:()=>({globalDependencies:{cells:{dependencyType:"stateVariable",variableName:"cells"}}}),getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="evaluatedCell"){let s,o,l=/^([a-zA-Z]+)([1-9]\d*)$/,u=r.match(l);if(u)o=u[1],s=u[2];else{let m=/^\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\)$/;if(u=r.match(m),u)s=u[1],o=u[2];else return[]}let c=ye(s),p=ye(o);return c>=0&&c<a[0]&&p>=0&&p<a[1]?[String(c)+","+String(p)]:[]}else if(e==="evaluatedRow"){let s=ye(r);if(!(s>=0&&s<a[0]))return[];let o=[],l=String(s)+",";for(let u=0;u<a[1];u++)o.push(l+u);return o}else if(e==="evaluatedColumn"){let s=ye(r);if(!(s>=0&&s<a[1]))return[];let o=[],l=","+String(s);for(let u=0;u<a[0];u++)o.push(u+l);return o}else{let s,o,l,u,c=/^([a-zA-Z]+)([1-9]\d*)([a-zA-Z]+)([1-9]\d*)$/,p=r.match(c);if(p)o=ye(p[1]),s=ye(p[2]),u=ye(p[3]),l=ye(p[4]);else{let b=/^\(\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\),\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\)\)$/;if(p=r.match(b),p)s=ye(p[1]),o=ye(p[2]),l=ye(p[3]),u=ye(p[4]);else return[]}if(!(s>=0&&l>=0&&o>=0&&u>=0))return[];let m=Math.min(Math.min(s,l),a[0]-1),f=Math.min(Math.max(s,l),a[0]-1),d=Math.min(Math.min(o,u),a[1]-1),h=Math.min(Math.max(o,u),a[1]-1),y=[];for(let b=m;b<=f;b++){let g=[],v=String(b)+",";for(let C=d;C<=h;C++)g.push(v+C);y.push(g)}return y}},arrayVarNameFromArrayKey(e){return"evaluatedCell("+e.split(",").map(r=>Number(r)+1).join(",")+")"},arrayDefinitionByKey({globalDependencyValues:e}){let a=Jt.buildFromArray(e.cells,{licenseKey:"gpl-v3"}).getSheetValues(0),s={};for(let o in a){let l=a[o];for(let u in l)s[[o,u]]=l[u]}return{newValues:{evaluatedCells:s}}}},t.pointsInCells={isArray:!0,nDimensions:2,public:!0,componentType:"point",entryPrefixes:["pointsInCell","pointsInRow","pointsInColumn","pointsInRange"],returnArraySizeDependencies:()=>({numRows:{dependencyType:"stateVariable",variableName:"numRows"},numColumns:{dependencyType:"stateVariable",variableName:"numColumns"}}),returnArraySize({dependencyValues:e}){return[e.numRows,e.numColumns]},returnEntryDimensions:e=>e==="pointsInRange"?2:1,getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="pointsInCell"){let s,o,l=/^([a-zA-Z]+)([1-9]\d*)$/,u=r.match(l);if(u)o=u[1],s=u[2];else{let m=/^\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\)$/;if(u=r.match(m),u)s=u[1],o=u[2];else return[]}let c=ye(s),p=ye(o);return c>=0&&c<a[0]&&p>=0&&p<a[1]?[String(c)+","+String(p)]:[]}else if(e==="pointsInRow"){let s=ye(r);if(!(s>=0&&s<a[0]))return[];let o=[],l=String(s)+",";for(let u=0;u<a[1];u++)o.push(l+u);return o}else if(e==="pointsInColumn"){let s=ye(r);if(!(s>=0&&s<a[1]))return[];let o=[],l=","+String(s);for(let u=0;u<a[0];u++)o.push(u+l);return o}else{let s,o,l,u,c=/^([a-zA-Z]+)([1-9]\d*)([a-zA-Z]+)([1-9]\d*)$/,p=r.match(c);if(p)o=ye(p[1]),s=ye(p[2]),u=ye(p[3]),l=ye(p[4]);else{let b=/^\(\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\),\(([a-zA-Z]+|\d+),([a-zA-Z]+|\d+)\)\)$/;if(p=r.match(b),p)s=ye(p[1]),o=ye(p[2]),l=ye(p[3]),u=ye(p[4]);else return[]}if(!(s>=0&&l>=0&&o>=0&&u>=0))return[];let m=Math.min(Math.min(s,l),a[0]-1),f=Math.min(Math.max(s,l),a[0]-1),d=Math.min(Math.min(o,u),a[1]-1),h=Math.min(Math.max(o,u),a[1]-1),y=[];for(let b=m;b<=f;b++){let g=[],v=String(b)+",";for(let C=d;C<=h;C++)g.push(v+C);y.push(g)}return y}},arrayVarNameFromArrayKey(e){return"pointsInCell("+e.split(",").map(r=>Number(r)+1).join(",")+")"},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e){let s=a.split(",").map(o=>Number(o)+1).join(",");r[a]={cellText:{dependencyType:"stateVariable",variableName:`evaluatedCell(${s})`,variablesOptional:!0}}}return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].cellText;if(!o){a[s]=null;continue}let l;try{l=Qye.fromAst(fr.convert(o))}catch(u){a[s]=null;continue}Array.isArray(l.tree)&&(l.tree[0]==="tuple"||l.tree[0]==="vector")?a[s]=l:a[s]=null}return{newValues:{pointsInCells:a}}}},t}onChange({changes:t,source:e}){if(e!=="loadData"){let r={};for(let a of t){let[s,o,l,u]=a;r[[s,o]]=u===null?"":u}return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"cells",value:r}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:r}})}}actions={onChange:this.onChange.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(Ic,"componentType","spreadsheet"),T(Ic,"useChildrenForReference",!1);function Cj({cellRelatedChildren:i,rowOffset:t=0,colOffset:e=0,cellNameToRowCol:r={},cellNamesByRowCol:a=[],componentInfoObjects:s}){var o=t,l=e,u=e,c=t,p=e,m=t,f=e;for(let d of i)if(s.isInheritedComponentType({inheritedComponentType:d.componentType,baseComponentType:"cell"})){let h=d,y=ye(h.stateValues.rowNum),b=ye(h.stateValues.colNum);y===void 0?(y=o,b===void 0?b=u:b=b+e):(y=y+t,b===void 0?b=l:b=b+e),W5({cell:h,rowIndex:y,colIndex:b,cellNameToRowCol:r,cellNamesByRowCol:a}),m=Math.max(y,m),f=Math.max(b,f),o=y,l=b,u=b+1}else if(s.isInheritedComponentType({inheritedComponentType:d.componentType,baseComponentType:"row"})){let h=d,y=ye(h.stateValues.rowNum);y===void 0?y=c:y=y+t;let b=h.stateValues.prescribedCellsWithColNum,g=e;for(let v of b){let C=ye(v.stateValues.colNum);C===void 0?C=g:C=C+e,W5({cell:v,rowIndex:y,colIndex:C,cellNameToRowCol:r,cellNamesByRowCol:a}),g=C+1,m=Math.max(y,m),f=Math.max(C,f)}c=y+1,o=y+1,l=e,u=l}else if(s.isInheritedComponentType({inheritedComponentType:d.componentType,baseComponentType:"column"})){let h=d,y=ye(h.stateValues.colNum);y===void 0?y=p:y=y+e;let b=h.stateValues.prescribedCellsWithRowNum,g=t;for(let v of b){let C=ye(v.stateValues.rowNum);C===void 0?C=g:C=C+t,W5({cell:v,rowIndex:C,colIndex:y,cellNameToRowCol:r,cellNamesByRowCol:a}),g=C+1,m=Math.max(C,m),f=Math.max(y,f)}p=y+1,o=t,l=y+1,u=l}else if(s.isInheritedComponentType({inheritedComponentType:d.componentType,baseComponentType:"cellBlock"})){let h=d,y=ye(h.stateValues.rowNum),b=ye(h.stateValues.colNum);y===void 0?(y=o,b===void 0?b=u:b=b+e):(y=y+t,b===void 0?b=l:b=b+e);let g=Cj({cellRelatedChildren:h.stateValues.prescribedCellsRowsColumnsBlocks,rowOffset:y,colOffset:b,cellNameToRowCol:r,cellNamesByRowCol:a,componentInfoObjects:s});m=Math.max(g.maxRowIndex,m),f=Math.max(g.maxColIndex,f),o=y,l=b,u=g.maxColIndex+1}return{maxRowIndex:m,maxColIndex:f,cellNameToRowCol:r,cellNamesByRowCol:a}}function W5({cell:i,rowIndex:t,colIndex:e,cellNameToRowCol:r,cellNamesByRowCol:a}){if(r[i.componentName]=[t,e],a[t]===void 0&&(a[t]=[]),a[t][e]!==void 0){console.warn(`Cell is overwriting previous cell at rowNum=${t+1}, colNum=${e+1}`);let s=a[t][e];r[s]=null}a[t][e]=i.componentName}var el=class extends ue{static get stateVariablesShadowedForReference(){return["cells","height"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:100,isAbsolute:!1},public:!0,forRenderer:!0},e.minNumRows={createComponentOfType:"number",createStateVariable:"minNumRows",defaultValue:1,public:!0,forRenderer:!0},e.minNumColumns={createComponentOfType:"number",createStateVariable:"minNumColumns",defaultValue:1,public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize"},e.columnHeaders={createComponentOfType:"boolean",createStateVariable:"columnHeaders",defaultValue:!0,public:!0,forRenderer:!0},e.rowHeaders={createComponentOfType:"boolean",createStateVariable:"rowHeaders",defaultValue:!0,public:!0,forRenderer:!0},e.fixedRowsTop={createComponentOfType:"integer",createStateVariable:"fixedRowsTop",defaultValue:0,clamp:[0,1/0],public:!0,forRenderer:!0},e.fixedColumnsLeft={createComponentOfType:"integer",createStateVariable:"fixedColumnsLeft",defaultValue:0,clamp:[0,1/0],public:!0,forRenderer:!0},e.hiddenColumns={createComponentOfType:"numberList",createStateVariable:"hiddenColumns",defaultValue:[],public:!0,forRenderer:!0},e.hiddenRows={createComponentOfType:"numberList",createStateVariable:"hiddenRows",defaultValue:[],public:!0,forRenderer:!0},e.allIterates={createComponentOfType:"mathList",createStateVariable:"allIterates",defaultValue:[]},e.headerRow={createComponentOfType:"textList",createStateVariable:"headerRow",defaultValue:null},e.displayDigits={createComponentOfType:"integer",createStateVariable:"displayDigits",defaultValue:10,public:!0},e.displayDecimals={createComponentOfType:"integer",createStateVariable:"displayDecimals",defaultValue:null,public:!0},e.displaySmallAsZero={createComponentOfType:"number",createStateVariable:"displaySmallAsZero",valueForTrue:1e-14,valueForFalse:0,defaultValue:0,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.cells={forRenderer:!0,returnDependencies:()=>({allIterates:{dependencyType:"stateVariable",variableName:"allIterates"},headerRow:{dependencyType:"stateVariable",variableName:"headerRow"},displayDigits:{dependencyType:"stateVariable",variableName:"displayDigits"},displayDecimals:{dependencyType:"stateVariable",variableName:"displayDecimals"},displaySmallAsZero:{dependencyType:"stateVariable",variableName:"displaySmallAsZero"}}),definition({dependencyValues:e,usedDefault:r}){let a=[],s=1,o=!1;if(e.allIterates.length>0&&Array.isArray(e.allIterates[0].tree)&&["vector","tuple"].includes(e.allIterates[0].tree[0])&&(s=e.allIterates[0].tree.length-1,o=!0),e.headerRow){let l=[],u=Math.min(e.headerRow.length,s+1);for(let c=0;c<u;c++)l.push(e.headerRow[c]);a.push(l)}for(let[l,u]of e.allIterates.entries()){let c=[l.toString()];for(let p=0;p<s;p++){let m=u;o&&(m=m.get_component(p));let f=dr({value:m,dependencyValues:e,usedDefault:r});try{c.push(f.toString())}catch(d){c.push("")}}a.push(c)}return{newValues:{cells:a}}}},t.numRows={public:!0,componentType:"number",returnDependencies:()=>({minNumRows:{dependencyType:"stateVariable",variableName:"minNumRows"},cells:{dependencyType:"stateVariable",variableName:"cells"}}),definition({dependencyValues:e}){let r=e.minNumRows;return Number.isFinite(r)||(r=4),r=Math.max(r,e.cells.length),{newValues:{numRows:r}}}},t.numColumns={public:!0,componentType:"number",returnDependencies:()=>({minNumColumns:{dependencyType:"stateVariable",variableName:"minNumColumns"},cells:{dependencyType:"stateVariable",variableName:"cells"}}),definition({dependencyValues:e}){let r=e.minNumColumns;Number.isFinite(r)||(r=4);for(let a of e.cells)a&&(r=Math.max(r,a.length));return{newValues:{numColumns:r}}}},t.height={public:!0,componentType:"_componentSize",forRenderer:!0,returnDependencies:()=>({heightAttr:{dependencyType:"attributeComponent",attributeName:"height",variableNames:["componentSize"]},numRows:{dependencyType:"stateVariable",variableName:"numRows"}}),definition({dependencyValues:e}){if(e.heightAttr===null){let r;return Number.isFinite(e.numRows)&&e.numRows>=0?r=50+e.numRows*20:r=130,{newValues:{height:{size:r,isAbsolute:!0}}}}return{newValues:{height:e.heightAttr.stateValues.componentSize}}}},t}onChange({changes:t,source:e}){if(e!=="loadData"){let r={};for(let a of t){let[s,o,l,u]=a;r[[s,o]]=u===null?"":u}return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"cells",value:r}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:r}})}}actions={onChange:this.onChange.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(el,"componentType","DiscreteSimulationResultList"),T(el,"rendererType","spreadsheet"),T(el,"useChildrenForReference",!1);import $5 from"math-expressions";var tl=class extends Qe{actions={movePolyline:this.movePolyline.bind(new Proxy(this,this.readOnlyProxyHandler)),finalizePolylinePosition:this.finalizePolylinePosition.bind(new Proxy(this,this.readOnlyProxyHandler))};static get stateVariablesShadowedForReference(){return["vertices","nVertices"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.draggable={createComponentOfType:"boolean",createStateVariable:"draggable",defaultValue:!0,public:!0,forRenderer:!0},e.allIterates={createComponentOfType:"mathList",createStateVariable:"allIterates",defaultValue:[]},e.seriesNumber={createComponentOfType:"number",createStateVariable:"seriesNumber",defaultValue:null},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.styleDescription={public:!0,componentType:"text",returnDependencies:()=>({selectedStyle:{dependencyType:"stateVariable",variableName:"selectedStyle"}}),definition:function({dependencyValues:e}){let r="";return e.selectedStyle.lineWidth>=4?r+="thick ":e.selectedStyle.lineWidth<=1&&(r+="thin "),e.selectedStyle.lineStyle==="dashed"?r+="dashed ":e.selectedStyle.lineStyle==="dotted"&&(r+="dotted "),r+=e.selectedStyle.lineColor,{newValues:{styleDescription:r}}}},t.nVertices={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({allIterates:{dependencyType:"stateVariable",variableName:"allIterates"}}),definition:function({dependencyValues:e}){return{newValues:{nVertices:e.allIterates.length}}}},t.nDimensions={public:!0,componentType:"number",forRenderer:!0,returnDependencies:()=>({}),definition:function({dependencyValues:e}){return{newValues:{nDimensions:2}}}},t.vertices={public:!0,componentType:"math",isArray:!0,nDimensions:2,entryPrefixes:["vertexX","vertex"],returnWrappingComponents(e){return e==="vertexX"?[]:[["point",{componentType:"mathList",isAttribute:"xs"}]]},getArrayKeysFromVarName({arrayEntryPrefix:e,varEnding:r,arraySize:a}){if(e==="vertexX"){let s=r.split("_").map(o=>Number(o)-1);return s.length===2&&s.every((o,l)=>Number.isInteger(o)&&o>=0)?a?s.every((o,l)=>o<a[l])?[String(s)]:[]:[String(s)]:[]}else{if(!a)return[];let s=Number(r)-1;return Number.isInteger(s)&&s>=0&&s<a[0]?Array.from(Array(a[1]),(o,l)=>s+","+l):[]}},getAllArrayKeys(e,r=!0,a){function s(o){if(o.length===1)return Array.from(Array(o[0]),(l,u)=>String(u));{let l=o[0],u=s(o.slice(1)),c=[];for(let p=0;p<l;p++)r?c.push(...u.map(m=>p+","+m)):c.push(u.map(m=>p+","+m));return c}}if(a){if(a.length===0||!e)return[];{let o=[...e];return o[0]=a[0],s(o)}}else return!e||e.length===0?[]:s(e)},returnArraySizeDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"}}),returnArraySize({dependencyValues:e}){return[e.nVertices,2]},returnArrayDependenciesByKey(){return{globalDependencies:{seriesNumber:{dependencyType:"stateVariable",variableName:"seriesNumber"},allIterates:{dependencyType:"stateVariable",variableName:"allIterates"}}}},arrayDefinitionByKey({globalDependencyValues:e,arraySize:r}){let a={};for(let s=0;s<r[0];s++){a[`${s},0`]=$5.fromAst(s);let o=e.allIterates[s];e.seriesNumber!==null&&(o=o.get_component(e.seriesNumber-1)),a[`${s},1`]=o}return{newValues:{vertices:a}}}},t.numericalVertices={isArray:!0,entryPrefixes:["numericalVertex"],forRenderer:!0,returnArraySizeDependencies:()=>({nVertices:{dependencyType:"stateVariable",variableName:"nVertices"}}),returnArraySize({dependencyValues:e}){return[e.nVertices]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={vertex:{dependencyType:"stateVariable",variableName:"vertex"+(Number(a)+1)}};return{dependenciesByKey:r}},arrayDefinitionByKey({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r){let o=e[s].vertex.map(l=>l.evaluate_to_constant());o.every(l=>Number.isFinite(l))||(o=Array(o.length).fill(NaN)),a[s]=o}return{newValues:{numericalVertices:a}}}},t.graphXmin={forRenderer:!0,additionalStateVariablesDefined:[{variableName:"graphXmax",forRenderer:!0},{variableName:"graphYmin",forRenderer:!0},{variableName:"graphYmax",forRenderer:!0}],returnDependencies:()=>({graphAncestor:{dependencyType:"ancestor",componentType:"graph",variableNames:["xmin","xmax","ymin","ymax"]}}),definition({dependencyValues:e}){return e.graphAncestor?{newValues:{graphXmin:e.graphAncestor.stateValues.xmin,graphXmax:e.graphAncestor.stateValues.xmax,graphYmin:e.graphAncestor.stateValues.ymin,graphYmax:e.graphAncestor.stateValues.ymax}}:{newValues:{graphXmin:null,graphXmax:null,graphYmin:null,graphYmax:null}}}},t.nearestPoint={returnDependencies:()=>({nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},numericalVertices:{dependencyType:"stateVariable",variableName:"numericalVertices"},nVertices:{dependencyType:"stateVariable",variableName:"nVertices"},graphXmin:{dependencyType:"stateVariable",variableName:"graphXmin"},graphXmax:{dependencyType:"stateVariable",variableName:"graphXmax"},graphYmin:{dependencyType:"stateVariable",variableName:"graphYmin"},graphYmax:{dependencyType:"stateVariable",variableName:"graphYmax"}}),definition({dependencyValues:e}){let r=e.nDimensions,a=e.nVertices,s=e.numericalVertices,o=1,l=1;e.graphXmin!==null&&e.graphXmax!==null&&e.graphYmin!==null&&e.graphYmax!==null&&(o=e.graphXmax-e.graphXmin,l=e.graphYmax-e.graphYmin);let u=[],c,p,m=s[0][0],f=s[0][1];for(let d=1;d<a;d++)if(c=m,p=f,m=s[d][0],f=s[d][1],!(Number.isFinite(c)&&Number.isFinite(p)&&Number.isFinite(m)&&Number.isFinite(f)))u.push(null);else{let h=(m-c)/o,y=(f-p)/l,b=h*h+y*y;b===0?u.push(null):u.push([h,y,b])}return{newValues:{nearestPoint:function(d){if(r!==2||a===0)return{};let h=1/0,y={},b=d.x1.evaluate_to_constant(),g=d.x2.evaluate_to_constant(),v,C,w=s[0][0],S=s[0][1];for(let A=1;A<a;A++){v=w,C=S,w=s[A][0],S=s[A][1];let E=u[A-1];if(E===null)continue;let[I,V,O]=E,k=((b-v)/o*I+(g-C)/l*V)/O,M;k<=0?M={x1:v,x2:C}:k>=1?M={x1:w,x2:S}:M={x1:v+k*I*o,x2:C+k*V*l};let L=Math.pow((b-M.x1)/o,2)+Math.pow((g-M.x2)/l,2);L<h&&(h=L,y=M)}return d.x3!==void 0&&Object.keys(y).length>0&&(y.x3=0),y}}}}},t}movePolyline({pointCoords:t,transient:e,sourceInformation:r}){let a={};for(let s in t)a[s+",0"]=$5.fromAst(t[s][0]),a[s+",1"]=$5.fromAst(t[s][1]);return e?this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"vertices",value:a,sourceInformation:r}],transient:!0}):this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"vertices",value:a,sourceInformation:r}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{pointCoordinates:t}}})}finalizePolylinePosition(){return this.actions.movePolyline({pointCoords:this.stateValues.numericalVertices,transient:!1})}};T(tl,"componentType","discreteSimulationResultPolyline"),T(tl,"rendererType","polyline"),T(tl,"useChildrenForReference",!1);import K5 from"math-expressions";var Yi=class extends Q{static get stateVariablesShadowedForReference(){return["halign","bottom","right"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.rowNum={createComponentOfType:"text",createStateVariable:"rowNum",defaultValue:null,public:!0},e.colNum={createComponentOfType:"text",createStateVariable:"colNum",defaultValue:null,public:!0},e.colSpan={createComponentOfType:"integer",createStateVariable:"colSpan",defaultValue:1,public:!0,forRenderer:!0},e.halign={createComponentOfType:"text"},e.bottom={createComponentOfType:"text"},e.right={createComponentOfType:"text"},e.prefill={createComponentOfType:"text",createStateVariable:"prefill",defaultValue:"",public:!0},e}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.halign={public:!0,componentType:"text",forRenderer:!0,defaultValue:"left",returnDependencies:()=>({halignAttr:{dependencyType:"attributeComponent",attributeName:"halign",variableNames:["value"]},parentHalign:{dependencyType:"parentStateVariable",variableName:"halign"},tabularHalign:{dependencyType:"ancestor",componentType:"tabular",variableNames:["halign"]}}),definition({dependencyValues:e,usedDefault:r}){if(e.halignAttr!==null){let a=e.halignAttr.stateValues.value;return["left","center","right","justify"].includes(a)||(a="left"),{newValues:{halign:a}}}else return!r.parentHalign&&e.parentHalign?{newValues:{halign:e.parentHalign}}:!r.tabularHalign&&e.tabularHalign?{newValues:{halign:e.tabularHalign.stateValues.halign}}:{useEssentialOrDefaultValue:{halign:{}}}}},t.bottom={public:!0,componentType:"text",forRenderer:!0,defaultValue:"none",returnDependencies:()=>({bottomAttr:{dependencyType:"attributeComponent",attributeName:"bottom",variableNames:["value"]},parentBottom:{dependencyType:"parentStateVariable",variableName:"bottom"},tabularBottom:{dependencyType:"ancestor",componentType:"tabular",variableNames:["bottom"]}}),definition({dependencyValues:e,usedDefault:r}){if(e.bottomAttr!==null){let a=e.bottomAttr.stateValues.value;return["none","minor","medium","major"].includes(a)||(a="none"),{newValues:{bottom:a}}}else return!r.parentBottom&&e.parentBottom?{newValues:{bottom:e.parentBottom}}:!r.tabularBottom&&e.tabularBottom?{newValues:{bottom:e.tabularBottom.stateValues.bottom}}:{useEssentialOrDefaultValue:{bottom:{}}}}},t.right={public:!0,componentType:"text",forRenderer:!0,defaultValue:"none",returnDependencies:()=>({rightAttr:{dependencyType:"attributeComponent",attributeName:"right",variableNames:["value"]},tabularRight:{dependencyType:"ancestor",componentType:"tabular",variableNames:["right"]}}),definition({dependencyValues:e,usedDefault:r}){if(e.rightAttr!==null){let a=e.rightAttr.stateValues.value;return["none","minor","medium","major"].includes(a)||(a="none"),{newValues:{right:a}}}else return!r.tabularRight&&e.tabularRight?{newValues:{right:e.tabularRight.stateValues.right}}:{useEssentialOrDefaultValue:{right:{}}}}},t.inHeader={public:!0,componentType:"booloean",forRenderer:!0,defaultValue:!1,returnDependencies:()=>({parentHeader:{dependencyType:"parentStateVariable",variableName:"header"}}),definition({dependencyValues:e}){return{newValues:{inHeader:e.parentHeader===!0}}}},t.onlyMathChild={returnDependencies:()=>({mathChild:{dependencyType:"child",childGroups:["maths"]},otherChildren:{dependencyType:"child",childGroups:["anything"]}}),definition:({dependencyValues:e})=>({newValues:{onlyMathChild:e.mathChild.length===1&&e.otherChildren.length===0}})},t.text={public:!0,componentType:"text",defaultValue:"",forRenderer:!0,returnDependencies:()=>({children:{dependencyType:"child",childGroups:["maths","anything"],variableNames:["text"],variablesOptional:!0},prefill:{dependencyType:"stateVariable",variableName:"prefill"}}),definition({dependencyValues:e}){if(e.children.length===0)return{useEssentialOrDefaultValue:{text:{variablesToCheck:["text"],defaultValue:e.prefill}}};let r="";for(let a of e.children)a.stateValues.text&&(r+=a.stateValues.text);return{newValues:{text:r}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.children.length===0?{success:!0,instructions:[{setStateVariable:"text",value:e.text===null?"":String(e.text)}]}:r.children.length===1?r.children[0].stateValues.text===void 0?{success:!1}:{success:!0,instructions:[{setDependency:"children",desiredValue:e.text,childIndex:0,variableIndex:0}]}:{success:!1}}},t.math={public:!0,componentType:"math",stateVariablesDeterminingDependencies:["onlyMathChild"],returnDependencies({stateValues:e}){return e.onlyMathChild?{mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]}}:{text:{dependencyType:"stateVariable",variableName:"text"}}},definition({dependencyValues:e}){if(e.mathChild)return{newValues:{math:e.mathChild[0].stateValues.value}};{let r;try{r=K5.fromAst(fr.convert(e.text))}catch(a){r=K5.fromAst("\uFF3F")}return{newValues:{math:r}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.mathChild?{success:!0,instructions:[{setDependency:"mathChild",desiredValue:e.math,childIndex:0,variableIndex:0}]}:{success:!0,instructions:[{setDependency:"text",desiredValue:e.math.toString()}]}}},t.number={public:!0,componentType:"number",returnDependencies:()=>({math:{dependencyType:"stateVariable",variableName:"math"}}),definition({dependencyValues:e}){let r=e.math.evaluate_to_constant();return Number.isFinite(r)||(r=NaN),{newValues:{number:r}}},inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setDependency:"math",desiredValue:K5.fromAst(e.number)}]}}},t}};T(Yi,"componentType","cell"),T(Yi,"rendererType","cell"),T(Yi,"renderChildren",!0),T(Yi,"includeBlankStringChildren",!0),T(Yi,"primaryStateVariableForDefinition","text"),T(Yi,"adapters",["text","math","number"]);var rl=class extends Q{static get stateVariablesShadowedForReference(){return["halign","valign","left","bottom"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.rowNum={createComponentOfType:"text",createStateVariable:"rowNum",defaultValue:null,public:!0},e.header={createComponentOfType:"boolean",createStateVariable:"header",defaultValue:!1,public:!0,forRenderer:!0},e.halign={createComponentOfType:"text"},e.valign={createComponentOfType:"text"},e.left={createComponentOfType:"text"},e.bottom={createComponentOfType:"text"},e}static returnChildGroups(){return[{group:"cells",componentTypes:["cell"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.halign={public:!0,componentType:"text",defaultValue:"left",returnDependencies:()=>({halignAttr:{dependencyType:"attributeComponent",attributeName:"halign",variableNames:["value"]},parentHalign:{dependencyType:"parentStateVariable",variableName:"halign"}}),definition({dependencyValues:e,usedDefault:r}){if(e.halignAttr!==null){let a=e.halignAttr.stateValues.value;return["left","center","right","justify"].includes(a)||(a="left"),{newValues:{halign:a}}}else return e.parentHalign!==null&&!r.parentHalign?{newValues:{halign:e.parentHalign}}:{useEssentialOrDefaultValue:{halign:{}}}}},t.valign={public:!0,componentType:"text",forRenderer:!0,defaultValue:"middle",returnDependencies:()=>({valignAttr:{dependencyType:"attributeComponent",attributeName:"valign",variableNames:["value"]},parentValign:{dependencyType:"parentStateVariable",variableName:"valign"}}),definition({dependencyValues:e,usedDefault:r}){if(e.valignAttr!==null){let a=e.valignAttr.stateValues.value;return["top","middle","bottom"].includes(a)||(a="middle"),{newValues:{valign:a}}}else return e.parentValign!==null&&!r.parentValign?{newValues:{valign:e.parentValign}}:{useEssentialOrDefaultValue:{valign:{}}}}},t.left={public:!0,componentType:"text",forRenderer:!0,defaultValue:"none",returnDependencies:()=>({leftAttr:{dependencyType:"attributeComponent",attributeName:"left",variableNames:["value"]},parentLeft:{dependencyType:"parentStateVariable",variableName:"left"}}),definition({dependencyValues:e,usedDefault:r}){if(e.leftAttr!==null){let a=e.leftAttr.stateValues.value;return["none","minor","medium","major"].includes(a)||(a="none"),{newValues:{left:a}}}else return e.parentLeft!==null&&!r.parentLeft?{newValues:{left:e.parentLeft}}:{useEssentialOrDefaultValue:{left:{}}}}},t.bottom={public:!0,componentType:"text",defaultValue:"none",returnDependencies:()=>({bottomAttr:{dependencyType:"attributeComponent",attributeName:"bottom",variableNames:["value"]},parentBottom:{dependencyType:"parentStateVariable",variableName:"bottom"}}),definition({dependencyValues:e,usedDefault:r}){if(e.bottomAttr!==null){let a=e.bottomAttr.stateValues.value;return["none","minor","medium","major"].includes(a)||(a="none"),{newValues:{bottom:a}}}else return e.parentBottom!==null&&!r.parentBottom?{newValues:{bottom:e.parentBottom}}:{useEssentialOrDefaultValue:{bottom:{}}}}},t.prescribedCellsWithColNum={returnDependencies:()=>({cellChildren:{dependencyType:"child",childGroups:["cells"],variableNames:["colNum"]}}),definition({dependencyValues:e}){return{newValues:{prescribedCellsWithColNum:e.cellChildren}}}},t}};T(rl,"componentType","row"),T(rl,"rendererType","row"),T(rl,"renderChildren",!0);var nl=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.colNum={createComponentOfType:"text",createStateVariable:"colNum",defaultValue:null,public:!0},e}static returnChildGroups(){return[{group:"cells",componentTypes:["cell"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.prescribedCellsWithRowNum={returnDependencies:()=>({cellChildren:{dependencyType:"child",childGroups:["cells"],variableNames:["rowNum"]}}),definition({dependencyValues:e}){return{newValues:{prescribedCellsWithRowNum:e.cellChildren}}}},t}};T(nl,"componentType","column"),T(nl,"rendererType","container"),T(nl,"renderChildren",!0);var Oc=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.rowNum={createComponentOfType:"text",createStateVariable:"rowNum",defaultValue:null,public:!0},e.colNum={createComponentOfType:"text",createStateVariable:"colNum",defaultValue:null,public:!0},e}static returnChildGroups(){return[{group:"children",componentTypes:["cell","row","column","cellblock"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.prescribedCellsRowsColumnsBlocks={returnDependencies:()=>({cellRelatedChildren:{dependencyType:"child",childGroups:["children"],variableNames:["rowNum","colNum","prescribedCellsWithColNum","prescribedCellsWithRowNum","prescribedCellsRowsColumnsBlocks"],variablesOptional:!0}}),definition({dependencyValues:e}){return{newValues:{prescribedCellsRowsColumnsBlocks:e.cellRelatedChildren}}}},t}};T(Oc,"componentType","cellBlock"),T(Oc,"rendererType","container");var il=class extends ue{static get stateVariablesShadowedForReference(){return["height"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:100,isAbsolute:!1},public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:null,public:!0,forRenderer:!0},e.halign={createComponentOfType:"text",createStateVariable:"halign",defaultValue:"left",public:!0,validValues:["left","center","right","justify"]},e.valign={createComponentOfType:"text",createStateVariable:"valign",defaultValue:"middle",public:!0,validValues:["top","middle","bottom"]},e.top={createComponentOfType:"text",createStateVariable:"top",defaultValue:"none",public:!0,validValues:["none","minor","medium","major"],forRenderer:!0},e.left={createComponentOfType:"text",createStateVariable:"left",defaultValue:"none",public:!0,validValues:["none","minor","medium","major"]},e.bottom={createComponentOfType:"text",createStateVariable:"bottom",defaultValue:"none",public:!0,validValues:["none","minor","medium","major"]},e.right={createComponentOfType:"text",createStateVariable:"right",defaultValue:"none",public:!0,validValues:["none","minor","medium","major"]},e}static returnChildGroups(){return[{group:"rows",componentTypes:["row"]}]}static returnStateVariableDefinitions(){return super.returnStateVariableDefinitions()}};T(il,"componentType","tabular"),T(il,"rendererType","tabular"),T(il,"renderChildren",!0);var Dc=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.suppressTableNameInTitle={createComponentOfType:"boolean",createStateVariable:"suppressTableNameInTitle",defaultValue:!1,forRenderer:!0},e.number={createComponentOfType:"boolean",createStateVariable:"number",defaultValue:!0,forRenderer:!0},e}static returnChildGroups(){return[{group:"titles",componentTypes:["title"]},{group:"inlinesBlocks",componentTypes:["_inline","_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.tableEnumeration={public:!0,componentType:"text",forRenderer:!0,stateVariablesDeterminingDependencies:["number"],additionalStateVariablesDefined:[{variableName:"tableName",public:!0,componentType:"text",forRenderer:!0}],returnDependencies({stateValues:e}){let r={};return e.number&&(r.tableCounter={dependencyType:"counter",counterName:"table"}),r},definition({dependencyValues:e}){if(e.tableCounter===void 0)return{newValues:{tableEnumeration:null,tableName:"Table"}};let r=String(e.tableCounter),a="Table "+r;return{newValues:{tableEnumeration:r,tableName:a}}}},t.titleChildName={forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["titles"]}}),definition({dependencyValues:e}){let r=null;return e.titleChild.length>0&&(r=e.titleChild[0].componentName),{newValues:{titleChildName:r}}}},t.title={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["titles"],variableNames:["text"]}}),definition({dependencyValues:e}){let r=null;return e.titleChild.length>0&&(r=e.titleChild[0].stateValues.text),{newValues:{title:r}}}},t}};T(Dc,"componentType","table"),T(Dc,"renderChildren",!0);var Pc=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.suppressFigureNameInCaption={createComponentOfType:"boolean",createStateVariable:"suppressFigureNameInCaption",defaultValue:!1,forRenderer:!0},e.number={createComponentOfType:"boolean",createStateVariable:"number",defaultValue:!0,forRenderer:!0},e}static returnChildGroups(){return[{group:"captions",componentTypes:["caption"]},{group:"inlinesBlocks",componentTypes:["_inline","_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.figureEnumeration={public:!0,componentType:"text",forRenderer:!0,stateVariablesDeterminingDependencies:["number"],additionalStateVariablesDefined:[{variableName:"figureName",public:!0,componentType:"text",forRenderer:!0}],returnDependencies({stateValues:e}){let r={};return e.number&&(r.figureCounter={dependencyType:"counter",counterName:"figure"}),r},definition({dependencyValues:e}){if(e.figureCounter===void 0)return{newValues:{figureEnumeration:null,figureName:"Figure"}};let r=String(e.figureCounter),a="Figure "+r;return{newValues:{figureEnumeration:r,figureName:a}}}},t.captionChildName={forRenderer:!0,returnDependencies:()=>({captionChild:{dependencyType:"child",childGroups:["captions"]}}),definition({dependencyValues:e}){let r=null;return e.captionChild.length>0&&(r=e.captionChild[0].componentName),{newValues:{captionChildName:r}}}},t.caption={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({captionChild:{dependencyType:"child",childGroups:["captions"],variableNames:["text"]}}),definition({dependencyValues:e}){let r=null;return e.captionChild.length>0&&(r=e.captionChild[0].stateValues.text),{newValues:{caption:r}}}},t}};T(Pc,"componentType","figure"),T(Pc,"renderChildren",!0);var al=class extends Q{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=r.reduce(function(s,o){return o.componentType==="string"?[...s,...o.state.value.split(/\s+/).filter(l=>l).map(l=>({componentType:"string",state:{value:l}}))]:[...s,o]},[]);return{success:!0,newChildren:a}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"strings",componentTypes:["string"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nVariants={public:!0,componentType:"number",returnDependencies:()=>({stringChildren:{dependencyType:"child",childGroups:["strings"]}}),definition:function({dependencyValues:e}){return{newValues:{nVariants:e.stringChildren.length}}}},t.variantNames={public:!0,componentType:"variantName",isArray:!0,entryPrefixes:["variantName"],returnArraySizeDependencies:()=>({nVariants:{dependencyType:"stateVariable",variableName:"nVariants"}}),returnArraySize({dependencyValues:e}){return[e.nVariants]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={stringChild:{dependencyType:"child",childGroups:["strings"],variableNames:["value"],childIndices:[a]}};return{dependenciesByKey:r}},arrayDefinitionByKey:function({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)e[s].stringChild.length===1&&(a[s]=e[s].stringChild[0].stateValues.value.toLowerCase().substring(0,1e3));return{newValues:{variantNames:a}}}},t}};T(al,"componentType","variantNames"),T(al,"rendererType"),T(al,"stateVariableForAttributeValue","variantNames");var _c=class extends re{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=r.reduce(function(s,o){return o.componentType==="string"?[...s,...o.state.value.split(/\s+/).filter(l=>l).map(l=>({componentType:"string",state:{value:l}}))]:[...s,o]},[]);return{success:!0,newChildren:a}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"strings",componentTypes:["string"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nSeeds={public:!0,componentType:"number",returnDependencies:()=>({stringChildren:{dependencyType:"child",childGroups:["strings"]}}),definition:function({dependencyValues:e}){return{newValues:{nSeeds:e.stringChildren.length}}}},t.seeds={public:!0,componentType:"seed",isArray:!0,entryPrefixes:["seed"],returnArraySizeDependencies:()=>({nSeeds:{dependencyType:"stateVariable",variableName:"nSeeds"}}),returnArraySize({dependencyValues:e}){return[e.nSeeds]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={stringChild:{dependencyType:"child",childGroups:["strings"],variableNames:["value"],childIndices:[a]}};return{dependenciesByKey:r}},arrayDefinitionByKey:function({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)e[s].stringChild.length===1&&(a[s]=e[s].stringChild[0].stateValues.value);return{newValues:{seeds:a}}}},t}};T(_c,"componentType","seeds"),T(_c,"rendererType");var kc=class extends Q{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.nVariants={createPrimitiveOfType:"integer",createStateVariable:"nVariants",defaultValue:100,clamp:[1,999],public:!0},e.uniqueVariants={createPrimitiveOfType:"boolean",createStateVariable:"uniqueVariants",defaultValue:!1,public:!0},e.variantNames={createComponentOfType:"variantNames"},e.seeds={createComponentOfType:"seeds"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nVariantsSpecified={returnDependencies:({sharedParameters:e})=>({uniqueVariants:{dependencyType:"stateVariable",variableName:"uniqueVariants"},numberOfVariantsFromSharedParameters:{dependencyType:"value",value:e.numberOfVariantsFromSharedParameters},nVariants:{dependencyType:"stateVariable",variableName:"nVariants"}}),definition:function({dependencyValues:e}){let r=e.nVariants;return r<1&&(r=1),e.uniqueVariants&&(e.numberOfVariantsFromSharedParameters!==void 0?r=e.numberOfVariantsFromSharedParameters:console.log("Restricting to unique variants was not successful")),{newValues:{nVariantsSpecified:r}}}},t.nSeeds={public:!0,componentType:"number",returnDependencies:()=>({seedsAttr:{dependencyType:"attributeComponent",attributeName:"seeds",variableNames:["nSeeds"]}}),definition:function({dependencyValues:e}){return e.seedsAttr!==null?{newValues:{nSeeds:e.seedsAttr.stateValues.nSeeds}}:{newValues:{nSeeds:0}}}},t.seeds={public:!0,componentType:"seed",isArray:!0,entryPrefixes:["seed"],returnArraySizeDependencies:()=>({nSeeds:{dependencyType:"stateVariable",variableName:"nSeeds"}}),returnArraySize({dependencyValues:e}){return[e.nSeeds]},returnArrayDependenciesByKey({arrayKeys:e}){let r={};for(let a of e)r[a]={seedsAttr:{dependencyType:"attributeComponent",attributeName:"seeds",variableNames:["seed"+(Number(a)+1)]}};return{dependenciesByKey:r}},arrayDefinitionByKey:function({dependencyValuesByKey:e,arrayKeys:r}){let a={};for(let s of r)e[s].seedsAttr!==null&&(a[s]=e[s].seedsAttr.stateValues["seed"+(Number(s)+1)]);return{newValues:{seeds:a}}}},t.originalVariantNames={returnDependencies:()=>({variantNamesAttr:{dependencyType:"attributeComponent",attributeName:"variantNames",variableNames:["variantNames"]}}),definition:function({dependencyValues:e}){let r=[];return e.variantNamesAttr!==null&&(r=e.variantNamesAttr.stateValues.variantNames),{newValues:{originalVariantNames:r}}}},t.variantNames={public:!0,componentType:"variantName",isArray:!0,entryPrefixes:["variantName"],returnArraySizeDependencies:()=>({nVariantsSpecified:{dependencyType:"stateVariable",variableName:"nVariantsSpecified"}}),returnArraySize({dependencyValues:e}){return[e.nVariantsSpecified]},returnArrayDependenciesByKey({arrayKeys:e}){return{globalDependencies:{originalVariantNames:{dependencyType:"stateVariable",variableName:"originalVariantNames"},nVariantsSpecified:{dependencyType:"stateVariable",variableName:"nVariantsSpecified"}}}},arrayDefinitionByKey:function({globalDependencyValues:e,arrayKeys:r}){let a=[...e.originalVariantNames],s=a.length,o=s,l;for(;s<e.nVariantsSpecified;){for(s++,o++,l=Sj(o);e.originalVariantNames.includes(l);)o++,l=Sj(o);a.push(l)}return{newValues:{variantNames:a}}}},t.selectedVariantIndex={public:!0,componentType:"number",immutable:!0,returnDependencies:({sharedParameters:e})=>({variantsObject:{dependencyType:"variants"},originalVariantNames:{dependencyType:"stateVariable",variableName:"originalVariantNames"},variantNames:{dependencyType:"stateVariable",variableName:"variantNames"},nVariantsSpecified:{dependencyType:"stateVariable",variableName:"nVariantsSpecified"},selectRng:{dependencyType:"value",value:e.selectRng,doNotProxy:!0}}),definition:function({dependencyValues:e}){if(e.variantsObject!==void 0){if(e.variantsObject.desiredVariantIndex!==void 0){let a=Number(e.variantsObject.desiredVariantIndex);if(Number.isFinite(a)){Number.isInteger(a)||(console.warn("Variant index "+e.variantsObject.desiredVariantIndex+" must be an integer"),a=Math.round(a));let s=(a-1)%e.nVariantsSpecified;s<0&&(s+=e.nVariantsSpecified);let o=s+1;return{makeEssential:{selectedVariantIndex:!0},newValues:{selectedVariantIndex:o}}}else return console.warn("Variant index "+e.variantsObject.desiredVariantIndex+" must be a number"),{makeEssential:{selectedVariantIndex:!0},newValues:{selectedVariantIndex:1}}}if(e.variantsObject.desiredVariantName!==void 0){if(typeof e.variantsObject.desiredVariantName=="string"){let a=e.originalVariantNames.map(l=>l.toLowerCase()),o=[...a,...e.variantNames.slice(a.length)].indexOf(e.variantsObject.desiredVariantName.toLowerCase());if(o!==-1)return{makeEssential:{selectedVariantIndex:!0},newValues:{selectedVariantIndex:o+1}}}return console.warn("Variant name "+e.variantsObject.desiredVariantName+" is not valid"),{makeEssential:{selectedVariantIndex:!0},newValues:{selectedVariantIndex:1}}}}let r;if(e.selectRng){let a=e.selectRng();r=Math.floor(a*e.nVariantsSpecified)+1}else r=1;return{makeEssential:{selectedVariantIndex:!0},newValues:{selectedVariantIndex:r}}}},t.selectedVariantName={public:!0,componentType:"text",returnDependencies:()=>({variantNames:{dependencyType:"stateVariable",variableName:"variantNames"},selectedVariantIndex:{dependencyType:"stateVariable",variableName:"selectedVariantIndex"}}),definition:function({dependencyValues:e}){return{newValues:{selectedVariantName:e.variantNames[e.selectedVariantIndex-1]}}}},t.selectedSeed={returnDependencies:()=>({selectedVariantIndex:{dependencyType:"stateVariable",variableName:"selectedVariantIndex"},seeds:{dependencyType:"stateVariable",variableName:"seeds"}}),definition:function({dependencyValues:e}){if(e.selectedVariantIndex<=e.seeds.length)return{newValues:{selectedSeed:e.seeds[e.selectedVariantIndex-1]}};let r=e.seeds.length,a=r,s;for(;r<e.selectedVariantIndex;)for(r++,a++,s=a.toString();e.seeds.includes(s);)a++,s=a.toString();return{newValues:{selectedSeed:s}}}},t.selectRng={returnDependencies:({sharedParameters:e})=>({selectedSeed:{dependencyType:"stateVariable",variableName:"selectedSeed"},rngClass:{dependencyType:"value",value:e.rngClass,doNotProxy:!0}}),definition:({dependencyValues:e})=>({newValues:{selectRng:new e.rngClass(e.selectedSeed)}})},t}};T(kc,"componentType","variantControl"),T(kc,"rendererType");function Sj(i){return Pn(i,!0)}import Fc from"math-expressions";var sl=class extends ca{static get stateVariablesShadowedForReference(){return[...super.stateVariablesShadowedForReference,"excludedCombinations"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.numberToSelect={createComponentOfType:"integer",createStateVariable:"numberToSelect",defaultValue:1,public:!0},e.withReplacement={createComponentOfType:"boolean",createStateVariable:"withReplacement",defaultValue:!1,public:!0},e.sortResults={createComponentOfType:"boolean",createStateVariable:"sortResults",defaultValue:!1,public:!0},e.excludeCombinations={createComponentOfType:"_componentListOfListsWithSelectableType"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();t.excludedCombinations={returnDependencies:()=>({excludeCombinations:{dependencyType:"attributeComponent",attributeName:"excludeCombinations",variableNames:["lists"]}}),definition:function({dependencyValues:r}){return r.excludeCombinations!==null?{newValues:{excludedCombinations:r.excludeCombinations.stateValues.lists}}:{newValues:{excludedCombinations:[]}}}},t.variants={returnDependencies:()=>({variants:{dependencyType:"variants"}}),definition:function({dependencyValues:r}){return{newValues:{variants:r.variants}}}},t.selectedValues={immutable:!0,additionalStateVariablesDefined:["selectedIndices"],returnDependencies:({sharedParameters:r})=>({numberToSelect:{dependencyType:"stateVariable",variableName:"numberToSelect"},withReplacement:{dependencyType:"stateVariable",variableName:"withReplacement"},length:{dependencyType:"stateVariable",variableName:"length"},from:{dependencyType:"stateVariable",variableName:"from"},step:{dependencyType:"stateVariable",variableName:"step"},exclude:{dependencyType:"stateVariable",variableName:"exclude"},excludedCombinations:{dependencyType:"stateVariable",variableName:"excludedCombinations"},type:{dependencyType:"stateVariable",variableName:"type"},lowercase:{dependencyType:"stateVariable",variableName:"lowercase"},sortResults:{dependencyType:"stateVariable",variableName:"sortResults"},variants:{dependencyType:"stateVariable",variableName:"variants"},selectRng:{dependencyType:"value",value:r.selectRng,doNotProxy:!0}}),definition:ebe},t.isVariantComponent={returnDependencies:()=>({}),definition:()=>({newValues:{isVariantComponent:!0}})},t.generatedVariantInfo={returnDependencies:()=>({selectedIndices:{dependencyType:"stateVariable",variableName:"selectedIndices"}}),definition({dependencyValues:r,componentName:a}){return{newValues:{generatedVariantInfo:{indices:r.selectedIndices,meta:{createdBy:a}}}}}};let e=t.readyToExpandWhenResolved.returnDependencies;return t.readyToExpandWhenResolved.returnDependencies=function(){let r=e();return r.selectedValues={dependencyType:"stateVariable",variableName:"selectedValues"},r},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){let r=t.stateValues.type;t.stateValues.type==="letters"&&(r="text");let a=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,s={};"fixed"in t.attributes&&(s=Ye({attributes:{fixed:t.attributes.fixed},componentType:r,componentInfoObjects:e,compositeCreatesNewNamespace:a}));let o=[];for(let u of t.stateValues.selectedValues)o.push({componentType:r,attributes:s,state:{value:u,fixed:!0}});return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:o,parentName:t.componentName,parentCreatesNewNamespace:a,componentInfoObjects:e}).serializedComponents}}static calculateReplacementChanges(){return[]}static determineNumberOfUniqueVariants({serializedComponent:t}){let e=1,r=!1;if(t.state!==void 0&&(t.state.numberToSelect!==void 0&&(e=t.state.numberToSelect),t.state.withReplacement!==void 0&&(r=t.state.withReplacement),t.state.type!==void 0&&(sequenceType=t.state.type)),t.children===void 0)return{succes:!1};let a,s={},o=[];for(let m of t.children){let f=m.componentType;if(f==="numberToSelect"){let d=!1;if(m.state!==void 0&&m.state.value!==void 0&&(e=Math.round(Number(m.state.value)),d=!0),m.children!==void 0){for(let h of m.children)if(h.componentType==="string"){e=Math.round(Number(h.state.value)),d=!0;break}}if(!d)return{success:!1}}else if(f==="withReplacement"){let d=!1;if(m.state!==void 0&&m.state.value!==void 0&&(r=m.state.value,d=!0),m.children!==void 0){for(let h of m.children)if(h.componentType==="string"){d=!0,h.state.value.trim().toLowerCase()==="true"?r=!0:r=!1;break}}if(!d)return{success:!1}}else if(["type","to","from","step","length"].includes(f)){let d=!1;if(m.state!==void 0&&m.state.value!==void 0&&(s[f]=m.state.value,d=!0),m.children!==void 0){for(let h of m.children)if(h.componentType==="string"){s[f]=h.state.value,d=!0;break}}if(!d)return{success:!1}}else if(f==="exclude"){let d=!1;if(m.children!==void 0){for(let h of m.children)if(h.componentType==="string"){d=!0;let y=h.state.value.split(",").map(b=>b.trim());o.push(...y);break}}if(!d)return{success:!1}}else f==="string"&&(a=m)}if(a!==void 0){if(s.to!==void 0||s.from!==void 0)return{success:!1};let m=a.state.value.split(",");if(m.length===1)s.to=m[0].trim();else if(m.length===2)s.from=m[0].trim(),s.to=m[1].trim();else return{success:!1}}for(let m of["to","from","step"])if(s[m]!==void 0){if(s.type==="math"){if(typeof s[m]=="string")s[m]=Fc.fromAst(fr.convert(s[m]));else if(s[m].tree===void 0)return{success:!1}}else if(s.type==="letters"&&m!=="step"){if(s[m]=ts(s[m]),s[m]===void 0)return{success:!1}}else if(s[m]=Number(s[m]),!Number.isFinite(s[m]))return{success:!1}}if(s.length!==void 0&&(typeof s.length=="string"&&(s.length=Number(s.length)),!Number.isInteger(s.length)||s.length<0))return{success:!1};for(let[m,f]of o.entries()){if(s.type==="math"){if(typeof f=="string")f=Fc.fromAst(fr.convert(f));else if(f.tree===void 0)return{success:!1}}else if(s.type==="letters"&&par!=="step"){if(f=ts(f),f===void 0)return{success:!1}}else if(f=Number(f),!Number.isFinite(f))return{success:!1};o[m]=f}q2(s);let l=s.length,u=[];if(o.length>0&&s.type!==math){o.sort(),o=o.filter((m,f,d)=>m!=d[f-1]);for(let m of o){if(m<s.from)continue;let f=(m-s.from)/s.step;if(f>s.length-1+1e-10)break;Math.abs(f-Math.round(f))<1e-10&&(l--,u.push(f))}}if(l<=0)return{success:!1};let c={excludeIndices:u,nOptions:l,numberToSelect:e,withReplacement:r};if(r||e===1){let m=Math.pow(l,e);return{success:!0,numberOfVariants:m,uniqueVariantData:c}}let p=l;for(let m=l-1;m>l-e;m--)p*=m;return{success:!0,numberOfVariants:p,uniqueVariantData:c}}static getUniqueVariant({serializedComponent:t,variantIndex:e}){if(t.variants===void 0)return{succes:!1};let r=t.variants.numberOfVariants;if(r===void 0)return{success:!1};if(!Number.isInteger(e)||e<0||e>=r)return{success:!1};let a=t.variants.uniqueVariantData,s=a.excludeIndices,o=a.nOptions,l=a.numberToSelect,u=a.withReplacement,c=function(f){let d=f;for(let h of s)d===h&&d++;return d};if(l===1)return{success:!0,desiredVariant:{indices:[c(e)]}};let m=Dp({numberOfIndices:l,numberOfOptions:o,maxNumber:e+1,withReplacement:u})[e].map(c);return{success:!0,desiredVariant:{indices:m}}}};T(sl,"componentType","selectFromSequence"),T(sl,"assignNamesToReplacements",!0),T(sl,"createsVariants",!0);function ebe({dependencyValues:i}){if(i.numberToSelect<1)return{makeEssential:{selectedValues:!0,selectedIndices:!0},newValues:{selectedValues:[],selectedIndices:[]}};let t=1;if(i.withReplacement||(t=i.numberToSelect),t>i.length)throw Error("Cannot select "+t+" values from a sequence of length "+i.length);if(i.variants&&i.variants.desiredVariant!==void 0){let s=i.variants.desiredVariant.indices;if(s!==void 0){if(s.length!==i.numberToSelect)throw Error("Number of indices specified for select must match number to select");if(s=s.map(Number),!s.every(Number.isInteger))throw Error("All indices specified for select must be integers");let o=i.length;s=s.map(c=>((c-1)%o+o)%o+1);let l=!0,u=[];for(let[c,p]of s.entries()){let m=p-1,f=i.from;if(m>0&&(i.type==="math"?f=f.add(i.step.multiply(Fc.fromAst(m))).expand().simplify():f+=i.step*m),i.type==="letters"&&(f=Pn(f,i.lowercase)),i.type==="math"){if(i.exclude.some(h=>h.equals(f)))throw Error("Specified index of selectfromsequence that was excluded")}else if(i.type==="number"){if(i.exclude.some(h=>Math.abs(h-f)<=1e-14*Math.max(Math.abs(h),Math.abs(f))))throw Error("Specified index of selectfromsequence that was excluded")}else if(i.exclude.includes(f))throw Error("Specified index of selectfromsequence that was excluded");let d=!1;i.type==="math"?i.excludedCombinations.some(h=>h[c].equals(f))&&(d=!0):i.type==="number"?i.excludedCombinations.some(h=>Math.abs(h[c]-f)<=1e-14*Math.max(Math.abs(h[c]),Math.abs(f)))&&(d=!0):i.excludedCombinations.some(h=>h[c]===f)&&(d=!0),d||(l=!1),u.push(f)}if(l)throw Error("Specified indices of selectfromsequence that was an excluded combination");return{makeEssential:{selectedValues:!0,selectedIndices:!0},newValues:{selectedValues:u,selectedIndices:s}}}}let e=i.excludedCombinations.length,r,a;if(e===0){let s=Aj({stateValues:i,numberUniqueRequired:t,numberToSelect:i.numberToSelect,withReplacement:i.withReplacement,rng:i.selectRng});r=s.selectedValues,a=s.selectedIndices}else{let s=i.length-i.exclude.length;if(i.withReplacement)s=Math.pow(s,i.numberToSelect);else{let l=s;for(let u=1;u<i.numberToSelect;u++)s*=l-u}if(e>.7*s){let l=0;for(let u=0;u<i.length;u++){let c=i.from;if(u>0&&(i.type==="math"?c=c.add(i.step.multiply(Fc.fromAst(u))).expand().simplify():c+=i.step*u),i.type==="math"){if(i.exclude.some(p=>p.equals(c)))continue}else if(i.type==="number"){if(i.exclude.some(p=>Math.abs(p-c)<=1e-14*Math.max(Math.abs(p),Math.abs(c))))continue}else if(i.exclude.includes(c))continue;l++}if(i.withReplacement)l=Math.pow(l,i.numberToSelect);else{let u=l;for(let c=1;c<i.numberToSelect;c++)l*=u-c}if(e>.7*l)throw Error("Excluded over 70% of combinations in selectFromSequence")}let o=!1;for(let l=0;l<200;l++){let u=Aj({stateValues:i,numberUniqueRequired:t,numberToSelect:i.numberToSelect,withReplacement:i.withReplacement,rng:i.selectRng});if(r=u.selectedValues,a=u.selectedIndices,i.type==="math"){if(i.excludedCombinations.some(c=>c.every((p,m)=>p.equals(r[m]))))continue}else if(i.type==="number"){if(i.excludedCombinations.some(c=>c.every((p,m)=>Math.abs(p-r[m])<=1e-14*Math.max(Math.abs(p),Math.abs(r[m])))))continue}else if(i.excludedCombinations.some(c=>c.every((p,m)=>p===r[m])))continue;o=!0;break}if(!o)throw Error("By extremely unlikely fluke, couldn't select combination of random values")}if(i.sortResults){let s=[];for(let[o,l]of r.entries())s.push({value:l,index:a[o]});i.type==="number"?s.sort((o,l)=>o.value-l.value):i.type==="letters"&&s.sort((o,l)=>ts(o.value)-ts(l.value)),r=s.map(o=>o.value),a=s.map(o=>o.index)}return{makeEssential:{selectedValues:!0,selectedIndices:!0},newValues:{selectedValues:r,selectedIndices:a}}}function Aj({stateValues:i,numberUniqueRequired:t=1,numberToSelect:e=1,withReplacement:r=!1,rng:a}){let s=[],o=[];if(i.exclude.length+t<.5*i.length){for(let p=0;p<e;p++){let m=!1,f,d;for(let h=0;h<100;h++){let y=a();if(d=Math.floor(y*i.length)+1,!(!r&&o.includes(d))){if(f=i.from,d>1&&(i.type==="math"?f=f.add(i.step.multiply(Fc.fromAst(d-1))).expand().simplify():f+=i.step*(d-1)),i.type==="math"){if(i.exclude.some(b=>b.equals(f)))continue}else if(i.type==="number"){if(i.exclude.some(b=>Math.abs(b-f)<=1e-14*Math.max(Math.abs(b),Math.abs(f))))continue}else if(i.exclude.includes(f))continue;m=!0;break}}if(!m)throw Error("By extremely unlikely fluke, couldn't select random value");i.type==="letters"&&(f=Pn(f,i.lowercase)),s.push(f),o.push(d)}return{selectedValues:s,selectedIndices:o}}let l=[];for(let p=0;p<i.length;p++){let m=i.from;if(p>0&&(i.type==="math"?m=m.add(i.step.multiply(Fc.fromAst(p))).expand().simplify():m+=i.step*p),i.type==="math"){if(i.exclude.some(f=>f.equals(m)))continue}else if(i.type==="number"){if(i.exclude.some(f=>Math.abs(f-m)<=1e-14*Math.abs(Math.max(f),Math.abs(m))))continue}else if(i.exclude.includes(m))continue;i.type==="letters"&&(m=Pn(m,i.lowercase)),l.push(m)}let u=l.length;if(t>u)throw Error("Cannot select "+t+" unique values from sequence of length "+u);if(t===1){for(let p=0;p<e;p++){let m=a(),f=Math.floor(m*u+1);o.push(f),s.push(l[f-1])}return{selectedValues:s,selectedIndices:o}}let c=[...Array(l.length).keys()].map(p=>p+1);for(let p=l.length-1;p>0;p--){let m=a(),f=Math.floor(m*(p+1));[l[p],l[f]]=[l[f],l[p]],[c[p],c[f]]=[c[f],c[p]]}return s=l.slice(0,e),o=c.slice(0,e),{selectedValues:s,selectedIndices:o}}import"math-expressions";var Zi=class extends Ee{static get stateVariablesShadowedForReference(){return["selectedIndices"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.numberToSelect={createComponentOfType:"integer",createStateVariable:"numberToSelect",defaultValue:1,public:!0},e.withReplacement={createComponentOfType:"boolean",createStateVariable:"withReplacement",defaultValue:!1,public:!0},e.type={createPrimitiveOfType:"string"},e.skipOptionsInAssignNames={createPrimitiveOfType:"boolean",createStateVariable:"skipOptionsInAssignNames",defaultValue:!1},e}static returnSugarInstructions(){let t=super.returnSugarInstructions();function e({matchedChildren:r,componentAttributes:a,componentInfoObjects:s}){if(!r.every(c=>c.componentType==="string"||c.doenetAttributes&&c.doenetAttributes.createdFromMacro))return{success:!1};let o;a.type?o=a.type:o="math",["math","text","number","boolean"].includes(o)||(console.warn(`Invalid type ${o}`),o="math");let u=_n({componentType:o,forceComponentType:!0})({matchedChildren:r,componentInfoObjects:s});if(u.success){let c=u.newChildren.map(m=>({componentType:"option",children:[m]}));return{success:!0,newChildren:c,newAttributes:{skipOptionsInAssignNames:{primitive:!0}}}}else return{success:!1}}return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"options",componentTypes:["option"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.variants={returnDependencies:()=>({variants:{dependencyType:"variants"}}),definition:function({dependencyValues:e}){return{newValues:{variants:e.variants}}}},t.currentVariantName={returnDependencies:({sharedParameters:e})=>({variantName:{dependencyType:"value",value:e.variantName}}),definition:({dependencyValues:e})=>({newValues:{currentVariantName:e.variantName}})},t.allPossibleVariants={returnDependencies:({sharedParameters:e})=>({allPossibleVariants:{dependencyType:"value",value:e.allPossibleVariants}}),definition:({dependencyValues:e})=>({newValues:{allPossibleVariants:e.allPossibleVariants}})},t.nOptions={additionalStateVariablesDefined:["optionChildren"],returnDependencies:()=>({optionChildren:{dependencyType:"child",childGroups:["options"],variableNames:["selectForVariantNames","selectWeight"]}}),definition({dependencyValues:e}){return{newValues:{optionChildren:e.optionChildren,nOptions:e.optionChildren.length}}}},t.availableVariants={returnDependencies:()=>({optionChildren:{dependencyType:"stateVariable",variableName:"optionChildren"},numberToSelect:{dependencyType:"stateVariable",variableName:"numberToSelect"},allPossibleVariants:{dependencyType:"stateVariable",variableName:"allPossibleVariants"}}),definition:function({dependencyValues:e}){let r={};for(let[a,s]of e.optionChildren.entries())for(let o of s.stateValues.selectForVariantNames){let l=o.toLowerCase();r[l]===void 0&&(r[l]=[]),r[l].push(a+1)}for(let a in r)if(r[a].length!==e.numberToSelect)throw Error("Invalid variant name for select.  Variant name "+a+" appears in "+r[a].length+" options but number to select is "+numberToSelect);if(Object.keys(r).length>0){for(let a of e.allPossibleVariants)if(!(a in r))throw Error("Some variants are specified for select but no options are specified for possible variant name: "+a);for(let a in r)if(!e.allPossibleVariants.includes(a))throw Error("Variant name "+a+" that is specified for select is not a possible variant name.")}return{newValues:{availableVariants:r}}}},t.selectedIndices={immutable:!0,returnDependencies:({sharedParameters:e})=>({numberToSelect:{dependencyType:"stateVariable",variableName:"numberToSelect"},withReplacement:{dependencyType:"stateVariable",variableName:"withReplacement"},optionChildren:{dependencyType:"stateVariable",variableName:"optionChildren"},nOptions:{dependencyType:"stateVariable",variableName:"nOptions"},currentVariantName:{dependencyType:"stateVariable",variableName:"currentVariantName"},variants:{dependencyType:"stateVariable",variableName:"variants"},availableVariants:{dependencyType:"stateVariable",variableName:"availableVariants"},selectRng:{dependencyType:"value",value:e.selectRng,doNotProxy:!0}}),definition:function({dependencyValues:e}){if(!(e.numberToSelect>=1)||e.nOptions===0)return{makeEssential:{selectedIndices:!0},newValues:{selectedIndices:[]}};if(e.variants&&e.variants.desiredVariant!==void 0){let p=e.variants.desiredVariant.indices;if(p!==void 0){if(p.length!==e.numberToSelect)throw Error("Number of indices specified for select must match number to select");if(p=p.map(Number),!p.every(Number.isInteger))throw Error("All indices specified for select must be integers");let m=e.nOptions;return p=p.map(f=>((f-1)%m+m)%m+1),{makeEssential:{selectedIndices:!0},newValues:{selectedIndices:p}}}}let r=e.availableVariants[e.currentVariantName];if(r!==void 0){if(e.numberToSelect>1){r=[...r];for(let p=e.numberToSelect-1;p>0;p--){let m=e.selectRng(),f=Math.floor(m*(p+1));[r[p],r[f]]=[r[f],r[p]]}}return{makeEssential:{selectedIndices:!0},newValues:{selectedIndices:r}}}let a=[],s=1;if(e.withReplacement||(s=e.numberToSelect),s>e.nOptions)throw Error("Cannot select "+s+" components from only "+e.nOptions);let o=e.optionChildren.map(p=>p.stateValues.selectWeight),l=o.reduce((p,m)=>p+m);o=o.map(p=>p/l);let u=o.reduce((p,m,f)=>[...p,m+(p[f-1]||0)],[]),c=[...Array(u.length).keys()].map(p=>p+1);for(let p=0;p<e.numberToSelect;p++){let m=e.selectRng(),f=-1,d=u.length-1;for(;f<d-1;){let y=Math.floor((f+d)/2);u[y]>m?d=y:f=y}let h=c[d];a.push(h),!e.withReplacement&&p<e.numberToSelect-1&&(o.splice(d,1),c.splice(d,1),l=o.reduce((y,b)=>y+b),o=o.map(y=>y/l),u=o.reduce((y,b,g)=>[...y,b+(y[g-1]||0)],[]))}return{makeEssential:{selectedIndices:!0},newValues:{selectedIndices:a}}}},t.isVariantComponent={returnDependencies:()=>({}),definition:()=>({newValues:{isVariantComponent:!0}})},t.generatedVariantInfo={providePreviousValuesInDefinition:!0,returnDependencies:({componentInfoObjects:e})=>({selectedIndices:{dependencyType:"stateVariable",variableName:"selectedIndices"},variantDescendants:{dependencyType:"descendant",componentTypes:Object.keys(e.componentTypeWithPotentialVariants),variableNames:["isVariantComponent","generatedVariantInfo"],useReplacementsForComposites:!0,recurseToMatchedChildren:!1,variablesOptional:!0,includeNonActiveChildren:!0,ignoreReplacementsOfMatchedComposites:!0}}),definition({dependencyValues:e,componentName:r,previousValues:a}){let s={indices:e.selectedIndices,meta:{createdBy:r}},o=s.subvariants=[];for(let l of e.variantDescendants)l.stateValues.isVariantComponent?o.push(l.stateValues.generatedVariantInfo):l.stateValues.generatedVariantInfo&&o.push(...l.stateValues.generatedVariantInfo.subvariants);for(let[l,u]of o.entries())if(!u.subvariants&&a.generatedVariantInfo){let c=a.generatedVariantInfo.subvariants;c[l].subvariants&&(o[l]=Object.assign({},o[l]),o[l].subvariants=c[l].subvariants)}return{newValues:{generatedVariantInfo:s}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({selectedIndices:{dependencyType:"stateVariable",variableName:"selectedIndices"}}),definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,components:e,componentInfoObjects:r}){let a=[];for(let c of t.stateValues.selectedIndices){let p=t.stateValues.optionChildren[c-1].componentName,m=e[p],f=xe(m.stateValues.serializedChildren),d={componentType:"option",state:{rendered:!0},doenetAttributes:Object.assign({},m.doenetAttributes),children:f,originalName:p};m.attributes.newNamespace&&(d.attributes={newNamespace:{primitive:!0}}),a.push(d)}let s=Np({serializedComponents:a,componentInfoObjects:r});if(t.variants&&t.variants.desiredVariant!==void 0){let c=t.variants.desiredVariant;if(c!==void 0&&c.subvariants!==void 0)for(let p in c.subvariants){let m=c.subvariants[p],f=s[p];if(f===void 0)break;f.variants.desiredVariant=m}}let o=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,l=t.doenetAttributes.assignNames;return l&&t.stateValues.skipOptionsInAssignNames&&(l=l.map(c=>[c])),{replacements:de({assignNames:l,serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:o,componentInfoObjects:r}).serializedComponents}}static calculateReplacementChanges(){return[]}static determineNumberOfUniqueVariants({serializedComponent:t}){let e=1,r=!1,a=[],s=[];if(t.state!==void 0&&(t.state.numberToSelect!==void 0&&(e=t.state.numberToSelect),t.state.withReplacement!==void 0&&(r=t.state.withReplacement)),t.children===void 0)return{succes:!1};let o;for(let f of t.children){let d=f.componentType;if(d==="numberToSelect"){let h=!1;if(f.state!==void 0&&f.state.value!==void 0&&(e=Math.round(Number(f.state.value)),h=!0),f.children!==void 0){for(let y of f.children)if(y.componentType==="string"){e=Math.round(Number(y.state.value)),h=!0;break}}if(!h)return{success:!1}}else if(d==="withReplacement"){let h=!1;if(f.state!==void 0&&f.state.value!==void 0&&(r=f.state.value,h=!0),f.children!==void 0){for(let y of f.children)if(y.componentType==="string"){h=!0,y.state.value.trim().toLowerCase()==="true"?r=!0:r=!1;break}}if(!h)return{success:!1}}else{if(d==="selectWeight")return{succes:!1};if(d!=="hide"&&d!=="modifyIndirectly"){d==="string"&&(o=f);let h=1;f.variants!==void 0&&f.variants.numberOfVariants!==void 0&&(h=f.variants.numberOfVariants),a.push(h),s.push(f)}}}if(a.length===0)return{success:!1};if(o!==void 0&&a.length===1){let f=o.state.value.split(/s+/).length;a=Array(f).fill(1)}let l={numberOfVariantsByChild:a,numberToSelect:e,withReplacement:r,childrenToSelect:s};if(r||e===1){let f=a.reduce((h,y)=>h+y),d=Math.pow(f,e);return{success:!0,numberOfVariants:d,uniqueVariantData:l}}let u=a.length;if(e>u)return{success:!1};let c=a[0];if(a.slice(1).every(f=>f===c)){let f=u;for(let h=u-1;h>u-e;h--)f*=h;let d=f*Math.pow(c,e);return{success:!0,numberOfVariants:d,uniqueVariantData:l}}let m=wj(a,e);return{success:!0,numberOfVariants:m,uniqueVariantData:l}}static getUniqueVariant({serializedComponent:t,variantIndex:e,allComponentClasses:r}){if(t.variants===void 0)return{succes:!1};let a=t.variants.numberOfVariants;if(a===void 0)return{success:!1};if(!Number.isInteger(e)||e<0||e>=a)return{success:!1};let s=t.variants.uniqueVariantData,o=s.numberOfVariantsByChild,l=s.numberToSelect,u=s.withReplacement,c=o.length,p=s.childrenToSelect,m=Dp({numberOfIndices:l,numberOfOptions:c,maxNumber:e+1,withReplacement:u}),f=m.length,d=m.map(V=>({combination:V,numberOfPossibilities:V.reduce((O,k)=>O*o[k],1)})),h=[...Array(f).keys()],y=0,b=h.length,g,v,C=e;for(;b>0;){let O=h.map(k=>d[k]).reduce((k,M)=>Math.min(k,M.numberOfPossibilities),1/0)-y;if(C<O*b){g=h[C%b],v=y+Math.floor(C/b);break}else y+=O,C-=O*b,h=h.filter(k=>d[k].numberOfPossibilities>y),b=h.length}let w=m[g],S=Ul({numberOfOptionsByIndex:w.map(V=>o[V]),maxNumber:v+1})[v],A=[],E=!1;for(let[V,O]of w.entries())if(o[O]>1){let k=p[O];if(k.variants.isVariantComponent){let L=r[k.componentType].getUniqueVariant({serializedComponent:k,variantIndex:S[V],allComponentClasses:r});if(!L.success)return{success:!1};A.push(L.desiredVariant)}else{let M=zl({variantIndex:S[V],serializedComponent:k,allComponentClasses:r});if(!M.success)return{success:!1};A.push(...M.desiredVariants)}E=!0}else A.push({});let I={indices:w};return E&&(I.subvariants=A),{success:!0,desiredVariant:I}}};T(Zi,"componentType","select"),T(Zi,"assignNamesToReplacements",!0),T(Zi,"createsVariants",!0),T(Zi,"includeBlankStringChildren",!0),T(Zi,"removeBlankStringChildrenPostSugar",!0),T(Zi,"useChildrenForReference",!1);var wj=function(i,t){if(t===0)return 0;if(t===1)return i.reduce((r,a)=>r+a);let e=0;for(let r in i){let a=i[r],s=[...i];s.splice(r,1),e+=a*wj(s,t-1)}return e};import qf from"math-expressions";var ol=class extends Q{constructor(t){super(t);this.advanceAnimation=this.advanceAnimation.bind(this)}static get stateVariablesShadowedForReference(){return Kd()}static createAttributesObject(t){let e=super.createAttributesObject(t),r=Xd();return Object.assign(e,r),e.prop={createPrimitiveOfType:"string"},e.componentIndex={createComponentOfType:"number",createStateVariable:"componentIndex",defaultValue:null,public:!0},e.animationOn={createComponentOfType:"boolean",createStateVariable:"animationOn",defaultValue:!1,public:!0,triggerActionOnChange:"startStopAnimation"},e.animationMode={createComponentOfType:"text",createStateVariable:"animationMode",defaultValue:"increase",validValues:["increase","decrease","increase once","decrease once","oscillate"],toLowerCase:!0,public:!0},e.animationInterval={createComponentOfType:"number",createStateVariable:"animationInterval",defaultValue:1e3,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions(),e=Yd();return Object.assign(t,e),t.possibleValues={additionalStateVariablesDefined:["numberValues"],returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},length:{dependencyType:"stateVariable",variableName:"length"},from:{dependencyType:"stateVariable",variableName:"from"},step:{dependencyType:"stateVariable",variableName:"step"},exclude:{dependencyType:"stateVariable",variableName:"exclude"},lowercase:{dependencyType:"stateVariable",variableName:"lowercase"}}),definition({dependencyValues:r}){let a=Pp(r);return{newValues:{possibleValues:a,numberValues:a.length}}}},t.selectedIndex={public:!0,componentType:"number",defaultValue:1,returnDependencies:()=>({}),definition(){return{useEssentialOrDefaultValue:{selectedIndex:{variablesToCheck:["selectedIndex"]}}}},inverseDefinition({desiredStateVariableValues:r,stateValues:a}){return{success:!0,instructions:[{setStateVariable:"selectedIndex",value:qf.math.mod(r.selectedIndex-1,a.numberValues)+1}]}}},t.value={public:!0,hasVariableComponentType:!0,returnDependencies:()=>({possibleValues:{dependencyType:"stateVariable",variableName:"possibleValues"},selectedIndex:{dependencyType:"stateVariable",variableName:"selectedIndex"},type:{dependencyType:"stateVariable",variableName:"type"}}),definition({dependencyValues:r}){return{newValues:{value:r.possibleValues[r.selectedIndex-1]},setComponentType:{value:r.type}}},inverseDefinition({desiredStateVariableValues:r,dependencyValues:a,stateValues:s}){if(a.type==="number"){let o=r.value;if(o instanceof qf.class&&(o=o.evaluate_to_constant()),!Number.isFinite(o))return{success:!1};let l=-1,u=a.possibleValues.length-1;for(;l<u-1;){let p=Math.floor((l+u)/2);s.step*(a.possibleValues[p]-o)>0?u=p:l=p}let c=u;return l!==-1&&Math.abs(o-a.possibleValues[l])<Math.abs(o-a.possibleValues[u])&&(c=l),{success:!0,instructions:[{setDependency:"selectedIndex",desiredValue:c+1}]}}else{let o=stateVariablesToUpdate.value,l=a.possibleValues.indexOf(o);return l===-1?{success:!1}:{success:!0,instructions:[{setDependency:"selectedIndex",desiredValue:l+1}]}}}},t.currentAnimationDirection={public:!0,componentType:"text",returnDependencies:()=>({animationMode:{dependencyType:"stateVariable",variableName:"animationMode"}}),definition({dependencyValues:r}){return{useEssentialOrDefaultValue:{currentAnimationDirection:{variablesToCheck:["currentAnimationDirection"],get defaultValue(){return r.animationMode.substring(0,8)==="decrease"?"decrease":"increase"}}}}},inverseDefinition({desiredStateVariableValues:r}){let a=r.currentAnimationDirection.toLowerCase();return["increase","decrease"].includes(a)||(a="increase"),{success:!0,instructions:[{setStateVariable:"currentAnimationDirection",value:a}]}}},t.tName={returnDependencies:()=>({tName:{dependencyType:"doenetAttribute",attributeName:"tName"}}),definition:({dependencyValues:r})=>({newValues:{tName:r.tName}})},t.targetComponent={returnDependencies(){return{targetComponent:{dependencyType:"targetComponent"}}},definition:function({dependencyValues:r}){let a=null;return r.targetComponent&&(a=r.targetComponent),{newValues:{targetComponent:a}}}},t.propName={returnDependencies:()=>({propName:{dependencyType:"attributePrimitive",attributeName:"prop"}}),definition:function({dependencyValues:r}){return{newValues:{propName:r.propName}}}},t.targetIdentities={stateVariablesDeterminingDependencies:["targetComponent","componentIndex"],returnDependencies:function({stateValues:r,componentInfoObjects:a}){let s={};return r.targetComponent!==null&&(a.isCompositeComponent({componentType:r.targetComponent.componentType,includeNonStandard:!1})?s.targets={dependencyType:"replacement",compositeName:r.targetComponent.componentName,recursive:!0,componentIndex:r.componentIndex}:(r.componentIndex===null||r.componentIndex===1)&&(s.targets={dependencyType:"stateVariable",variableName:"targetComponent"})),s},definition({dependencyValues:r}){let a=null;return r.targets&&(a=r.targets,Array.isArray(a)||(a=[a])),{newValues:{targetIdentities:a}}}},t.targets={stateVariablesDeterminingDependencies:["targetIdentities","propName"],returnDependencies:function({stateValues:r}){let a={targetIdentities:{dependencyType:"stateVariable",variableName:"targetIdentities"}};if(r.targetIdentities!==null)for(let[s,o]of r.targetIdentities.entries()){let l;r.propName?l={dependencyType:"stateVariable",componentName:o.componentName,variableName:r.propName,returnAsComponentObject:!0,variablesOptional:!0,propIndex:r.propIndex,caseInsensitiveVariableMatch:!0,publicStateVariablesOnly:!0,useMappedVariableNames:!0}:l={dependencyType:"stateVariable",componentName:o.componentName,variableName:"value",returnAsComponentObject:!0,variablesOptional:!0},a["target"+s]=l}return a},definition({dependencyValues:r}){let a=null;if(r.targetIdentities!==null){a=[];for(let s in r.targetIdentities)r["target"+s]&&a.push(r["target"+s])}return{newValues:{targets:a}}}},t.valueToIndex={returnDependencies:()=>({possibleValues:{dependencyType:"stateVariable",variableName:"possibleValues"}}),definition:function({dependencyValues:r}){let a={};for(let[s,o]of r.possibleValues.entries())a[o]=s;return{newValues:{valueToIndex:a}}}},t}async startStopAnimation({stateValues:t,previousValues:e}){let r=[];if(t.animationOn){if(!e.animationOn){let a=this.stateValues.currentAnimationDirection,s=this.findIndexFromTarget();this.stateValues.currentAnimationDirection==="increase"?s===this.stateValues.numberValues&&(this.stateValues.animationMode==="increase once"?s=1:this.stateValues.animationMode==="oscillate"&&(a="decrease",r.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"currentAnimationDirection",value:a}))):this.stateValues.currentAnimationDirection==="decrease"&&s===1&&(this.stateValues.animationMode==="decrease once"?s=this.stateValues.numberValues:this.stateValues.animationMode==="oscillate"&&(a="increase",r.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"currentAnimationDirection",value:a}))),s!==this.stateValues.selectedIndex&&r.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"selectedIndex",value:s});let o=this.getUpdateInstructionsToSetTargetsToValue(this.stateValues.possibleValues[qf.math.mod(s-1,this.stateValues.numberValues)]);r.push(...o),await this.coreFunctions.performUpdate({updateInstructions:r,event:{verb:"played",object:{componentName:this.componentName,componentType:this.componentType},context:{startIndex:s,animationDirection:a,animationMode:this.stateValues.animationMode}}}),await this.coreFunctions.triggerChainedActions({componentName:this.componentName}),this.animationID=this.coreFunctions.requestAnimationFrame(this.advanceAnimation,this.stateValues.animationInterval)}}else e.animationOn&&(await this.coreFunctions.cancelAnimationFrame(this.animationID).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName})),this.coreFunctions.requestRecordEvent({verb:"paused",object:{componentName:this.componentName,componentType:this.componentType},context:{endIndex:this.stateValues.selectedIndex}}))}findIndexFromTarget(){if(this.stateValues.targets===null)return this.stateValues.selectedIndex;let t=this.stateValues.targets[0],e=Object.keys(t.stateValues)[0];if(!e)return this.stateValues.selectedIndex;let r=t.stateValues[e];if(this.stateValues.type==="number"&&r instanceof qf.class&&(r=r.evaluate_to_constant(),!Number.isFinite(r)))return this.stateValues.selectedIndex;let a=this.stateValues.valueToIndex[r];if(a!==void 0)return a+1;if(this.stateValues.type!=="number")return this.stateValues.selectedIndex;let s=this.stateValues.possibleValues,o=function(u=0,c=s.length-1){if(c<=u+1)return r>s[u]?c:u;let p=Math.round((c+u)/2);return r>s[p]?o(p,c):o(u,p)},l=o();if(l!==0){let u=s[l-1],c=s[l],p=Math.abs(r-u),m=Math.abs(r-c);p<m&&l--}return l+1}actions={startStopAnimation:this.startStopAnimation.bind(this)};advanceAnimation(){let t,e=!0,r;this.stateValues.currentAnimationDirection==="decrease"?(t=this.stateValues.selectedIndex-1,t<=1&&(this.stateValues.animationMode==="decrease once"?e=!1:this.stateValues.animationMode==="oscillate"&&(r="increase"))):(t=this.stateValues.selectedIndex+1,t>=this.stateValues.numberValues&&(this.stateValues.animationMode==="increase once"?e=!1:this.stateValues.animationMode==="oscillate"&&(r="decrease")));let a=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"selectedIndex",value:t}],s=this.getUpdateInstructionsToSetTargetsToValue(this.stateValues.possibleValues[qf.math.mod(t-1,this.stateValues.numberValues)]);a.push(...s),e||a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"animationOn",value:!1}),r&&a.push({updateType:"updateValue",componentName:this.componentName,stateVariable:"currentAnimationDirection",value:r}),this.coreFunctions.performUpdate({updateInstructions:a}),e&&(this.animationID=this.coreFunctions.requestAnimationFrame(this.advanceAnimation,this.stateValues.animationInterval))}getUpdateInstructionsToSetTargetsToValue(t){if(this.stateValues.targets==null)return[];let e=[];for(let r of this.stateValues.targets){let a=Object.keys(r.stateValues)[0];if(a===void 0){this.stateValues.propName?console.warn(`Cannot animate prop="${this.stateValues.propName}" of ${this.stateValues.tName} as could not find prop ${this.stateValues.propName} on a component of type ${r.componentType}`):console.warn(`Cannot animate ${this.stateValues.tName} as could not find a value state variable on a component of type ${r.componentType}`);continue}e.push({updateType:"updateValue",componentName:r.componentName,stateVariable:a,value:t})}return e}};T(ol,"componentType","animateFromSequence"),T(ol,"rendererType"),T(ol,"acceptTname",!0);import Wf from"math-expressions";var Mc=class extends rt{static get stateVariablesShadowedForReference(){return[...super.stateVariablesShadowedForReference,"displayDigits","displayDecimals","displaySmallAsZero"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.forceSymbolic={createComponentOfType:"boolean",createStateVariable:"forceSymbolic",defaultValue:!1,public:!0},e.forceNumeric={createComponentOfType:"boolean",createStateVariable:"forceNumeric",defaultValue:!1,public:!0},e.function={createComponentOfType:"function"},e.input={createComponentOfType:"mathList"},e.displayDigits={createComponentOfType:"integer"},e.displayDecimals={createComponentOfType:"integer"},e.displaySmallAsZero={createComponentOfType:"number",valueForTrue:1e-14,valueForFalse:0},e.unordered={createComponentOfType:"boolean",createStateVariable:"unordered",defaultValue:!1,public:!0},e}static returnChildGroups(){return[]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return delete t.codePre,delete t.expressionWithCodes,delete t.mathChildrenFunctionSymbols,delete t.codesAdjacentToStrings,delete t.mathChildrenByArrayComponent,delete t.mathChildrenWithCanBeModified,delete t.unordered,t.canBeModified={returnDependencies:()=>({}),definition:()=>({newValues:{canBeModified:!1}})},t.displayDigits={public:!0,componentType:"integer",defaultValue:10,returnDependencies:()=>({displayDecimalsAttr:{dependencyType:"attributeComponent",attributeName:"displayDigits",variableNames:["value"]},functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["displayDigits"]}}),definition({dependencyValues:e,usedDefault:r}){return e.displayDecimalsAttr!==null?{newValues:{displayDigits:e.displayDecimalsAttr.stateValues.value}}:e.functionAttr&&!r.functionAttr?{newValues:{displayDigits:e.functionAttr.stateValues.displayDigits}}:{useEssentialOrDefaultValue:{displayDigits:{variablesToCheck:["displayDigits"]}}}}},t.displayDecimals={public:!0,componentType:"integer",defaultValue:10,returnDependencies:()=>({displayDecimalsAttr:{dependencyType:"attributeComponent",attributeName:"displayDecimals",variableNames:["value"]},functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["displayDecimals"]}}),definition({dependencyValues:e,usedDefault:r}){return e.displayDecimalsAttr!==null?{newValues:{displayDecimals:e.displayDecimalsAttr.stateValues.value}}:e.functionAttr&&!r.functionAttr?{newValues:{displayDecimals:e.functionAttr.stateValues.displayDecimals}}:{useEssentialOrDefaultValue:{displayDecimals:{variablesToCheck:["displayDecimals"]}}}}},t.displaySmallAsZero={public:!0,componentType:"number",defaultValue:0,returnDependencies:()=>({displayDecimalsAttr:{dependencyType:"attributeComponent",attributeName:"displaySmallAsZero",variableNames:["value"]},functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["displaySmallAsZero"]}}),definition({dependencyValues:e,usedDefault:r}){return e.displayDecimalsAttr!==null?{newValues:{displaySmallAsZero:e.displayDecimalsAttr.stateValues.value}}:e.functionAttr&&!r.functionAttr?{newValues:{displaySmallAsZero:e.functionAttr.stateValues.displaySmallAsZero}}:{useEssentialOrDefaultValue:{displaySmallAsZero:{variablesToCheck:["displaySmallAsZero"]}}}}},t.unnormalizedValue={public:!0,componentType:"math",returnDependencies(){return{inputAttr:{dependencyType:"attributeComponent",attributeName:"input",variableNames:["nComponents","maths"]},functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["symbolicfs","numericalfs","symbolic","nInputs","nOutputs"]},forceSymbolic:{dependencyType:"stateVariable",variableName:"forceSymbolic"},forceNumeric:{dependencyType:"stateVariable",variableName:"forceNumeric"}}},definition({dependencyValues:e}){if(!(e.functionAttr&&e.inputAttr))return{newValues:{unnormalizedValue:Wf.fromAst("\uFF3F")}};let r=e.inputAttr.stateValues.maths;if(r.length===1){let u=r[0].tree;Array.isArray(u)&&["vector","tuple"].includes(u[0])&&(r=u.slice(1).map(c=>Wf.fromAst(c)))}if(r.length!==e.functionAttr.stateValues.nInputs)return{newValues:{unnormalizedValue:Wf.fromAst("\uFF3F")}};let a=[],s=e.functionAttr,o=s.stateValues.nOutputs;if(!e.forceNumeric&&(s.stateValues.symbolic||e.forceSymbolic))for(let u=0;u<o;u++)a.push(s.stateValues.symbolicfs[u](...r).tree);else{let u=r.map(c=>c.evaluate_to_constant()).map(c=>c===null?NaN:c);for(let c=0;c<o;c++)a.push(s.stateValues.numericalfs[c](...u))}let l;return o===1?l=Wf.fromAst(a[0]):l=Wf.fromAst(["vector",...a]),{newValues:{unnormalizedValue:l}}}},t}};T(Mc,"componentType","evaluate"),T(Mc,"rendererType","math");function $f({type:i,numberOfSamples:t,standardDeviation:e,mean:r,to:a,from:s,step:o,nDiscreteValues:l,rng:u}){if(i==="gaussian"){if(!(e>=0)||!Number.isFinite(r)){let p="Invalid mean ("+r+") or standard deviation ("+e+") for a gaussian random variable.";return console.warn(p),Array(t).fill(NaN)}let c=[];for(let p=0;p<t;p++){let m=0,f=0;for(;m===0;)m=u();for(;f===0;)f=u();let d=Math.sqrt(-2*Math.log(m))*Math.cos(2*Math.PI*f);c.push(r+e*d)}return c}else if(i==="uniform"){let c=[],p=a-s;for(let m=0;m<t;m++)c.push(s+u()*p);return c}else{let c=[];if(l>0)for(let p=0;p<t;p++){let m=Math.floor(u()*l);c.push(s+o*m)}return c}}var Ha=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.numberOfSamples={createComponentOfType:"number",createStateVariable:"numberOfSamples",defaultValue:1,public:!0},e.type={createComponentOfType:"text",createStateVariable:"type",defaultValue:"uniform",public:!0,toLowerCase:!0,validValues:["uniform","discreteuniform","gaussian"]},e.mean={createComponentOfType:"number",createStateVariable:"specifiedMean",defaultValue:0},e.standardDeviation={createComponentOfType:"number",createStateVariable:"specifiedStandardDeviation",defaultValue:1},e.variance={createComponentOfType:"number",createStateVariable:"specifiedVariance",defaultValue:1},e.from={createComponentOfType:"number",createStateVariable:"specifiedFrom",defaultValue:null},e.to={createComponentOfType:"number",createStateVariable:"specifiedTo",defaultValue:null},e.step={createComponentOfType:"number",createStateVariable:"specifiedStep",defaultValue:1},e.displayDigits={leaveRaw:!0},e.displayDecimals={leaveRaw:!0},e.displaySmallAsZero={leaveRaw:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.step={public:!0,componentType:"number",returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},specifiedStep:{dependencyType:"stateVariable",variableName:"specifiedStep"}}),definition({dependencyValues:e}){let r;return e.type==="discreteuniform"?r=e.specifiedStep:r=null,{newValues:{step:r}}}},t.from={public:!0,componentType:"number",additionalStateVariablesDefined:[{variableName:"to",public:!0,componentType:"number"},{variableName:"nDiscreteValues"}],returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},specifiedFrom:{dependencyType:"stateVariable",variableName:"specifiedFrom"},specifiedTo:{dependencyType:"stateVariable",variableName:"specifiedTo"},step:{dependencyType:"stateVariable",variableName:"step"}}),definition({dependencyValues:e}){if(!["discreteuniform","uniform"].includes(e.type))return{newValues:{from:null,to:null,nDiscreteValues:null}};let r=e.step,a=e.specifiedFrom,s=e.specifiedTo,o=null;return s===null?(a===null&&(a=0),e.type==="uniform"?s=a+1:(s=a+r,o=2)):a===null?e.type==="uniform"?a=0:(o=Math.floor((s-0)/r+1),o<1?(o=0,a=null):a=s-(o-1)*r):e.type==="discreteuniform"&&(o=Math.floor((s-a)/r+1),o<1?o=0:s=a+(o-1)*r),{newValues:{from:a,to:s,nDiscreteValues:o}}}},t.mean={stateVariablesDeterminingDependencies:["type"],public:!0,componentType:"number",returnDependencies({stateValues:e}){let r={type:{dependencyType:"stateVariable",variableName:"type"}};return e.type==="gaussian"?r.specifiedMean={dependencyType:"stateVariable",variableName:"specifiedMean"}:(r.from={dependencyType:"stateVariable",variableName:"from"},r.to={dependencyType:"stateVariable",variableName:"to"}),r},definition({dependencyValues:e}){let r;return e.type==="gaussian"?r=e.specifiedMean:r=(e.from+e.to)/2,{newValues:{mean:r}}}},t.variance={stateVariablesDeterminingDependencies:["type"],public:!0,componentType:"number",returnDependencies({stateValues:e}){let r={type:{dependencyType:"stateVariable",variableName:"type"}};return e.type==="gaussian"?(r.specifiedVariance={dependencyType:"stateVariable",variableName:"specifiedVariance"},r.specifiedStandardDeviation={dependencyType:"stateVariable",variableName:"specifiedStandardDeviation"}):(r.from={dependencyType:"stateVariable",variableName:"from"},r.to={dependencyType:"stateVariable",variableName:"to"},e.type==="discreteuniform"&&(r.step={dependencyType:"stateVariable",variableName:"step"},r.nDiscreteValues={dependencyType:"stateVariable",variableName:"nDiscreteValues"})),r},definition({dependencyValues:e,usedDefault:r}){let a;return e.type==="gaussian"?r.specifiedVariance&&!r.specifiedStandardDeviation?a=e.specifiedStandardDeviation**2:a=e.specifiedVariance:e.type==="discreteuniform"?a=(e.nDiscreteValues**2-1)*e.step**2/12:a=(e.to-e.from)**2/12,{newValues:{variance:a}}}},t.standardDeviation={public:!0,componentType:"number",returnDependencies:()=>({variance:{dependencyType:"stateVariable",variableName:"variance"}}),definition:({dependencyValues:e})=>({newValues:{standardDeviation:Math.sqrt(e.variance)}})},t.sampledValues={returnDependencies:({sharedParameters:e})=>({numberOfSamples:{dependencyType:"stateVariable",variableName:"numberOfSamples"},type:{dependencyType:"stateVariable",variableName:"type"},from:{dependencyType:"stateVariable",variableName:"from"},to:{dependencyType:"stateVariable",variableName:"to"},step:{dependencyType:"stateVariable",variableName:"step"},nDiscreteValues:{dependencyType:"stateVariable",variableName:"nDiscreteValues"},mean:{dependencyType:"stateVariable",variableName:"mean"},standardDeviation:{dependencyType:"stateVariable",variableName:"standardDeviation"},rng:{dependencyType:"value",value:e.rng,doNotProxy:!0}}),definition({dependencyValues:e}){if(e.numberOfSamples<1)return{makeEssential:{sampledValues:!0},newValues:{sampledValues:[]}};let r=$f(e);return{makeEssential:{sampledValues:!0},newValues:{sampledValues:r}}},inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"sampledValues",value:e.sampledValues}]}}},t.readyToExpandWhenResolved={returnDependencies:()=>({sampledValues:{dependencyType:"stateVariable",variableName:"sampledValues"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e,startNum:r=0}){let a=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,s={};for(let u of["displayDigits","displaySmallAsZero","displayDecimals"])u in t.attributes&&(s[u]=t.attributes[u]);let o=[];for(let u of t.stateValues.sampledValues.slice(r)){let c={};Object.keys(s).length>0&&(c=Ye({attributes:s,componentType:"number",componentInfoObjects:e,compositeCreatesNewNamespace:a})),o.push({componentType:"number",attributes:c,state:{value:u}})}return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:o,parentName:t.componentName,parentCreatesNewNamespace:a,indOffset:r,componentInfoObjects:e}).serializedComponents}}static calculateReplacementChanges({component:t,componentInfoObjects:e}){let r=[];if(t.stateValues.sampledValues.length<t.replacements.length){let s=t.replacements.length-t.stateValues.sampledValues.length;if(s!==t.replacementsToWithhold){let o={changeType:"changeReplacementsToWithhold",replacementsToWithhold:s};r.push(o)}}else{if(t.replacementsToWithhold>0){let s={changeType:"changeReplacementsToWithhold",replacementsToWithhold:0};r.push(s)}if(t.stateValues.sampledValues.length>t.replacements.length){let s=this.createSerializedReplacements({component:t,componentInfoObjects:e,startNum:t.replacements.length}),o={changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:t.replacements.length,numberReplacementsToReplace:0,serializedReplacements:s.replacements,assignNamesOffset:t.replacements.length};r.push(o)}}let a=Math.min(t.replacements.length,t.stateValues.sampledValues.length);for(let s=0;s<a;s++){let o={changeType:"updateStateVariables",component:t.replacements[s],stateChanges:{value:t.stateValues.sampledValues[s]}};r.push(o)}return r}resample(){let t=$f({type:this.stateValues.type,numberOfSamples:this.stateValues.numberOfSamples,standardDeviation:this.stateValues.standardDeviation,mean:this.stateValues.mean,to:this.stateValues.to,from:this.stateValues.from,step:this.stateValues.step,nDiscreteValues:this.stateValues.nDiscreteValues,rng:this.sharedParameters.rng});return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"sampledValues",value:t}]})}actions={resample:this.resample.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(Ha,"componentType","sampleRandomNumbers"),T(Ha,"assignNamesToReplacements",!0),T(Ha,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");var zs=class extends Ha{static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.numberOfSamples,e.assignNamesSkip={createPrimitiveOfType:"number"},e.numberToSelect={createComponentOfType:"integer",createStateVariable:"numberToSelect",defaultValue:1,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.variants={returnDependencies:()=>({variants:{dependencyType:"variants"}}),definition:function({dependencyValues:e}){return{newValues:{variants:e.variants}}}},t.step.immutable=!0,t.from.immutable=!0,t.from.additionalStateVariablesDefined[0].immutable=!0,t.from.additionalStateVariablesDefined[1].immutable=!0,t.mean.immutable=!0,t.variance.immutable=!0,t.standardDeviation.immutable=!0,delete t.sampledValues,t.selectedValues={immutable:!0,returnDependencies:({sharedParameters:e})=>({numberOfSamples:{dependencyType:"stateVariable",variableName:"numberToSelect"},type:{dependencyType:"stateVariable",variableName:"type"},from:{dependencyType:"stateVariable",variableName:"from"},to:{dependencyType:"stateVariable",variableName:"to"},step:{dependencyType:"stateVariable",variableName:"step"},nDiscreteValues:{dependencyType:"stateVariable",variableName:"nDiscreteValues"},mean:{dependencyType:"stateVariable",variableName:"mean"},standardDeviation:{dependencyType:"stateVariable",variableName:"standardDeviation"},variants:{dependencyType:"stateVariable",variableName:"variants"},rng:{dependencyType:"value",value:e.selectRng,doNotProxy:!0}}),definition({dependencyValues:e}){if(e.numberOfSamples<1)return{makeEssential:{selectedValues:!0},newValues:{selectedValues:[]}};if(e.variants&&e.variants.desiredVariant){let a=e.variants.desiredVariant.values;if(a){if(a.length!==e.numberOfSamples)throw Error("Number of values specified for selectRandomNumber must match number to select");return{makeEssential:{selectedValues:!0},newValues:{selectedValues:a}}}}let r=$f(e);return{makeEssential:{selectedValues:!0},newValues:{selectedValues:r}}}},t.isVariantComponent={returnDependencies:()=>({}),definition:()=>({newValues:{isVariantComponent:!0}})},t.generatedVariantInfo={returnDependencies:()=>({selectedValues:{dependencyType:"stateVariable",variableName:"selectedValues"}}),definition({dependencyValues:e,componentName:r}){return{newValues:{generatedVariantInfo:{values:e.selectedValues,meta:{createdBy:r}}}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({selectedValues:{dependencyType:"stateVariable",variableName:"selectedValues"}}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){let r=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,a={};for(let l of["displayDigits","displaySmallAsZero","displayDecimals"])l in t.attributes&&(a[l]=t.attributes[l]);let s=[];for(let l of t.stateValues.selectedValues){let u={};Object.keys(a).length>0&&(u=Ye({attributes:a,componentType:"number",componentInfoObjects:e,compositeCreatesNewNamespace:r})),s.push({componentType:"number",attributes:u,state:{value:l}})}return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:s,parentName:t.componentName,parentCreatesNewNamespace:r,componentInfoObjects:e}).serializedComponents}}};T(zs,"componentType","selectRandomNumbers"),T(zs,"createsVariants",!0);delete zs.stateVariableToEvaluateAfterReplacements;delete zs.calculateReplacementChanges;var ll=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.type={createPrimitiveOfType:"string",createStateVariable:"type",defaultPrimitiveValue:"math",toLowerCase:!0,validValues:["math","text"]},e.match={createComponentOfType:"_componentWithSelectableType",createStateVariable:"match",defaultValue:null},e.replacement={createComponentOfType:"_componentWithSelectableType",createStateVariable:"replacement",defaultValue:null},e.simplify={createComponentOfType:"text",createStateVariable:"simplify",defaultValue:"none",public:!0,toLowerCase:!0,valueTransformations:{true:"full"},validValues:["none","full","numbers","numberspreserveorder"]},e.displayDigits={leaveRaw:!0},e.displayDecimals={leaveRaw:!0},e.displaySmallAsZero={leaveRaw:!0},e.matchWholeWord={createComponentOfType:"boolean",createStateVariable:"matchWholeWord",defaultValue:!1,public:!0},e.matchCase={createComponentOfType:"boolean",createStateVariable:"matchCase",defaultValue:!1,public:!0},e.preserveCase={createComponentOfType:"boolean",createStateVariable:"preserveCase",defaultValue:!1,public:!0},e}static returnSugarInstructions(){let t=[];function e({matchedChildren:r,componentAttributes:a}){let s=a.type;return["math","text"].includes(s)||(s="math"),{success:!0,newChildren:[{componentType:s,children:r}]}}return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.originalValue={returnDependencies:()=>({child:{dependencyType:"child",childGroups:["anything"],variableNames:["value"]}}),definition({dependencyValues:e}){return e.child.length>0?{newValues:{originalValue:e.child[0].stateValues.value}}:{newValues:{originalValue:null}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.child.length>0?{success:!0,instructions:[{setDependency:"child",desiredValue:e.originalValue,childIndex:0,variableIndex:0}]}:{success:!1}}},t.value={returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},originalValue:{dependencyType:"stateVariable",variableName:"originalValue"},match:{dependencyType:"stateVariable",variableName:"match"},replacement:{dependencyType:"stateVariable",variableName:"replacement"},simplify:{dependencyType:"stateVariable",variableName:"simplify"},matchWholeWord:{dependencyType:"stateVariable",variableName:"matchWholeWord"},matchCase:{dependencyType:"stateVariable",variableName:"matchCase"},preserveCase:{dependencyType:"stateVariable",variableName:"preserveCase"}}),definition({dependencyValues:e}){if(e.originalValue===null)return{newValues:{value:null}};if(e.match===null||e.replacement===null)return{newValues:{value:e.originalValue}};if(e.type==="text"){let r=e.originalValue,a,s="g";e.matchCase||(s="gi"),e.matchWholeWord?a=new RegExp("\\b"+Hs(e.match)+"\\b",s):a=new RegExp(Hs(e.match),s);let o=e.replacement;if(e.preserveCase){let l=X5(o);r=r.replace(a,l)}else r=r.replace(a,o);return{newValues:{value:r}}}else{let r=e.originalValue.subscripts_to_strings();return r=r.substitute({[e.match.subscripts_to_strings().tree]:e.replacement.subscripts_to_strings()}),r=r.strings_to_subscripts(),r=Lr({value:r,simplify:e.simplify}),{newValues:{value:r}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){if(r.type==="text"){let a=e.value,s,o,l="g";r.matchCase||(l="gi");let u=r.match,c=r.replacement;if(r.matchWholeWord)if(s=new RegExp("\\b"+Hs(u)+"\\b",l),r.matchCase&&r.preserveCase){let p=X5(c);o=new RegExp("\\b"+Hs(p(u))+"\\b",l)}else o=new RegExp("\\b"+Hs(c)+"\\b",l);else if(s=new RegExp(Hs(u),l),r.matchCase&&r.preserveCase){let p=X5(c);o=new RegExp(Hs(p(u)),l)}else o=new RegExp(Hs(c),l);return r.originalValue.search(o)!==-1||a.search(s)!==-1?{success:!1}:(a=a.replace(o,u),{success:!0,instructions:[{setDependency:"originalValue",desiredValue:a}]})}else{let a=e.value.subscripts_to_strings(),s=r.match.subscripts_to_strings(),o=r.replacement.subscripts_to_strings();return typeof s.tree=="string"&&typeof o.tree=="string"?r.originalValue.variables(!0).includes(o.tree)?{success:!1}:a.variables().includes(s.tree)?{success:!1}:(a=a.substitute({[o.tree]:s}),a=a.strings_to_subscripts(),{success:!0,instructions:[{setDependency:"originalValue",desiredValue:a}]}):{success:!1}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){let r=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,a={componentType:t.stateValues.type,state:{value:t.stateValues.value},downstreamDependencies:{[t.componentName]:[{dependencyType:"referenceShadow",compositeName:t.componentName,propVariable:"value"}]}};if(t.stateValues.type==="math"){let o={},l=!1;for(let u of["displayDigits","displaySmallAsZero","displayDecimals"])u in t.attributes&&(o[u]=t.attributes[u],l=!0);l&&(a.attributes=convertAttributesForComponentType({attributes:o,componentType:"math",componentInfoObjects:e,compositeCreatesNewNamespace:r}))}return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:[a],parentName:t.componentName,parentCreatesNewNamespace:r,componentInfoObjects:e}).serializedComponents}}};T(ll,"componentType","substitute"),T(ll,"assignNamesToReplacements",!0),T(ll,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");function Hs(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function X5(i){return function(t){return t.toUpperCase()===t?i.toUpperCase():t.toLowerCase()===t?i.toLowerCase():t[0].match(/[a-z]/)?i[0].toLowerCase()+i.substring(1):t[0].match(/[A-Z]/)?i[0].toUpperCase()+i.substring(1):i}}import _1 from"math-expressions";var jc=class extends rt{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.minIndex={createComponentOfType:"integer",createStateVariable:"minIndex",defaultValue:-1/0,public:!0},e.maxIndex={createComponentOfType:"integer",createStateVariable:"maxIndex",defaultValue:1/0,public:!0},e.offsets={createComponentOfType:"mathList",createStateVariable:"offsets",defaultValue:null,public:!0},e.period={createComponentOfType:"math",createStateVariable:"period",defaultValue:null,public:!0},e.minIndexAsList={createComponentOfType:"integer",createStateVariable:"minIndexAsList",defaultValue:-1,public:!0},e.maxIndexAsList={createComponentOfType:"integer",createStateVariable:"maxIndexAsList",defaultValue:1,public:!0},e}static returnChildGroups(){return[]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return delete t.codePre,delete t.expressionWithCodes,delete t.mathChildrenFunctionSymbols,delete t.codesAdjacentToStrings,delete t.mathChildrenByArrayComponent,delete t.mathChildrenWithCanBeModified,delete t.unordered,t.canBeModified={returnDependencies:()=>({}),definition:()=>({newValues:{canBeModified:!1}})},t.nOffsets={public:!0,componentType:"integer",returnDependencies:()=>({offsets:{dependencyType:"stateVariable",variableName:"offsets"}}),definition({dependencyValues:e}){let r=0;return e.offsets!==null&&(r=e.offsets.length),{newValues:{nOffsets:r}}}},t.unnormalizedValue={returnDependencies:()=>({offsets:{dependencyType:"stateVariable",variableName:"offsets"},period:{dependencyType:"stateVariable",variableName:"period"},minIndex:{dependencyType:"stateVariable",variableName:"minIndex"},maxIndex:{dependencyType:"stateVariable",variableName:"maxIndex"}}),definition({dependencyValues:e}){if(e.offsets===null||e.offsets.length===0||e.offsets.length===1&&e.offsets[0].tree==="\uFF3F"||e.period===null||e.period.tree==="\uFF3F")return{newValues:{unnormalizedValue:_1.fromAst("\uFF3F")}};let r=[],a=e.period.tree,s=e.minIndex,o=e.maxIndex;for(let u of e.offsets)r.push(["tuple",u.tree,a,s,o]);return{newValues:{unnormalizedValue:_1.fromAst(["periodic_set",...r])}}}},t.redundantOffsets={additionalStateVariablesDefined:["uniqueOffsets"],public:!0,componentType:"boolean",returnDependencies:()=>({nOffsets:{dependencyType:"stateVariable",variableName:"nOffsets"},offsets:{dependencyType:"stateVariable",variableName:"offsets"},period:{dependencyType:"stateVariable",variableName:"period"}}),definition({dependencyValues:e}){let r=!1,a=[];if(e.period!==null){let s=e.period.evaluate_to_constant();if(s!==null)for(let o=0;o<e.nOffsets;o++){let l=!0;for(let u=0;u<o;u++){let c=e.offsets[o].subtract(e.offsets[u]).evaluate_to_constant();if(c!==null&&Math.abs(c%s)<1e-10*s){r=!0,l=!1;break}}l&&a.push(e.offsets[o])}}return{newValues:{redundantOffsets:r,uniqueOffsets:a}}}},t.asList={public:!0,componentType:"mathList",returnDependencies:()=>({uniqueOffsets:{dependencyType:"stateVariable",variableName:"uniqueOffsets"},period:{dependencyType:"stateVariable",variableName:"period"},minIndexAsList:{dependencyType:"stateVariable",variableName:"minIndexAsList"},maxIndexAsList:{dependencyType:"stateVariable",variableName:"maxIndexAsList"}}),definition({dependencyValues:e}){let r=[];if(e.period!==null){let a=e.period.evaluate_to_constant();if(a!==null){let s=e.period.simplify(),o=!0,l=[];for(let u of e.uniqueOffsets){let c=u.evaluate_to_constant();if(c===null){o=!1;break}else{let p=u.subtract(s.multiply(Math.floor(c/a))).simplify(),m=p.evaluate_to_constant();l.push({num:m,offset:p})}}if(o){r.push(_1.fromAst(["ldots"])),l.sort((p,m)=>p.num-m.num);let u=-1,c=1;Number.isFinite(e.minIndexAsList)&&(u=e.minIndexAsList),Number.isFinite(e.maxIndexAsList)&&(c=e.maxIndexAsList);for(let p=u;p<=c;p++)for(let m of l)r.push(m.offset.add(s.multiply(p)).simplify());r.push(_1.fromAst(["ldots"]))}}}return{newValues:{asList:r}}}},t}};T(jc,"componentType","periodicSet"),T(jc,"rendererType");var Kf=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:null,public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:null,public:!0,forRenderer:!0},e.description={createComponentOfType:"text",createStateVariable:"description",defaultValue:null,public:!0,forRenderer:!0},e.source={createComponentOfType:"text",createStateVariable:"source",required:!0,public:!0,forRenderer:!0},e}};T(Kf,"componentType","image");var Xf=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:null,public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:null,public:!0,forRenderer:!0},e.youtube={createComponentOfType:"text",createStateVariable:"youtube",defaultValue:null,public:!0,forRenderer:!0},e.source={createComponentOfType:"text",createStateVariable:"source",defaultValue:null,public:!0,forRenderer:!0},e}actions={recordVideoStarted:this.recordVideoStarted.bind(this),recordVideoWatched:this.recordVideoWatched.bind(this),recordVideoPaused:this.recordVideoPaused.bind(this),recordVideoSkipped:this.recordVideoSkipped.bind(this),recordVideoCompleted:this.recordVideoCompleted.bind(this)};recordVideoStarted({beginTime:t,duration:e,rate:r}){this.coreFunctions.requestRecordEvent({verb:"played",object:{componentName:this.componentName,componentType:this.componentType,duration:e},context:{startingPoint:t,rate:r}})}recordVideoWatched({beginTime:t,endTime:e,duration:r,rates:a}){this.coreFunctions.requestRecordEvent({verb:"watched",object:{componentName:this.componentName,componentType:this.componentType,duration:r},context:{startingPoint:t,endingPoint:e,rates:a}})}recordVideoPaused({endTime:t,duration:e}){this.coreFunctions.requestRecordEvent({verb:"paused",object:{componentName:this.componentName,componentType:this.componentType,duration:e},context:{endingPoint:t}})}recordVideoSkipped({beginTime:t,endTime:e,duration:r}){this.coreFunctions.requestRecordEvent({verb:"skipped",object:{componentName:this.componentName,componentType:this.componentType,duration:r},context:{startingPoint:t,endingPoint:e}})}recordVideoCompleted({duration:t}){this.coreFunctions.requestRecordEvent({verb:"completed",object:{componentName:this.componentName,componentType:this.componentType,duration:t}})}};T(Xf,"componentType","video");var Yf=class extends ue{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:{size:500,isAbsolute:!0},public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:{size:500,isAbsolute:!0},public:!0,forRenderer:!0},e.geogebra={createComponentOfType:"text",createStateVariable:"geogebra",defaultValue:null,public:!0,forRenderer:!0},e.encodedGeogebraContent={createComponentOfType:"text",createStateVariable:"encodedGeogebraContent",defaultValue:null,public:!0,forRenderer:!0},e.fromMathInsight={createComponentOfType:"text",createStateVariable:"fromMathInsight",defaultValue:null,public:!0,forRenderer:!0},e}};T(Yf,"componentType","embed");var ul=class extends ue{static returnChildGroups(){return[{group:"titles",componentTypes:["title"]},{group:"inlinesBlocks",componentTypes:["_inline","_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.showHints={forRenderer:!0,returnDependencies:()=>({hide:{dependencyType:"stateVariable",variableName:"hide"},showHintsFlag:{dependencyType:"flag",flagName:"showHints"}}),definition({dependencyValues:e}){return{newValues:{showHints:e.showHintsFlag&&!e.hide}}}},t.open={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!1,returnDependencies:()=>({}),definition(){return{useEssentialOrDefaultValue:{open:{variablesToCheck:["open"]}}}},inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"open",value:e.open}]}}},t.titleDefinedByChildren={forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["titles"]}}),definition({dependencyValues:e}){return{newValues:{titleDefinedByChildren:e.titleChild.length>0}}}},t.title={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({titleChild:{dependencyType:"child",childGroups:["titles"],variableNames:["text"]}}),definition({dependencyValues:e}){return e.titleChild.length===0?{newValues:{title:"Hint"}}:{newValues:{title:e.titleChild[0].stateValues.text}}}},t}revealHint(){return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"open",value:!0}],event:{verb:"viewed",object:{componentName:this.componentName,componentType:this.componentType}}})}closeHint(){return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"open",value:!1}],event:{verb:"closed",object:{componentName:this.componentName,componentType:this.componentType}}})}actions={revealHint:this.revealHint.bind(this),closeHint:this.closeHint.bind(this)}};T(ul,"componentType","hint"),T(ul,"renderChildren",!0),T(ul,"includeBlankStringChildren",!0);var cl=class extends ue{constructor(t){super(t);this.revealSolution=this.revealSolution.bind(this),this.finishRevealSolution=this.finishRevealSolution.bind(this)}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.hide={createComponentOfType:"boolean"},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){return{success:!0,newChildren:[{componentType:"_solutionContainer",children:r}]}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"inlinesBlocks",componentTypes:["_inline","_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.hide={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!1,returnDependencies:()=>({hideAttr:{dependencyType:"attributeComponent",attributeName:"hide",variableNames:["value"]},displayMode:{dependencyType:"flag",flagName:"solutionDisplayMode"}}),definition({dependencyValues:e}){return e.displayMode==="none"?{newValues:{hide:!0}}:e.hideAttr!==null?{newValues:{hide:e.hideAttr.stateValues.value}}:{useEssentialOrDefaultValue:{hide:{variablesToCheck:["hide"]}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.displayMode==="none"?{success:!1}:r.hideAttr!==null?{success:!0,instructions:[{setDependency:"hideAttr",desiredValue:e.hide,variableIndex:0}]}:{success:!0,instructions:[{setSetVariable:"hide",value:e.hide}]}}},t.open={public:!0,componentType:"boolean",forRenderer:!0,defaultValue:!1,returnDependencies:()=>({displayMode:{dependencyType:"flag",flagName:"solutionDisplayMode"}}),definition({dependencyValues:e}){return e.displayMode==="displayed"?{newValues:{open:!0}}:e.displayMode==="none"?{newValues:{open:!1}}:{useEssentialOrDefaultValue:{open:{variablesToCheck:["open"]}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.displayMode==="displayed"||r.displayMode==="none"?{success:!1}:{success:!0,instructions:[{setStateVariable:"open",value:e.open}]}}},t.canBeClosed={forRenderer:!0,returnDependencies:()=>({displayMode:{dependencyType:"flag",flagName:"solutionDisplayMode"}}),definition({dependencyValues:e}){return e.displayMode==="button"?{newValues:{canBeClosed:!0}}:{newValues:{canBeClosed:!1}}}},t.message={public:!0,componentType:"text",forRenderer:!0,defaultValue:"",returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{message:{variablesToCheck:["message"]}}}),inverseDefinition({desiredStateVariableValues:e}){return{success:!0,instructions:[{setStateVariable:"message",value:e.message}]}}},t}finishRevealSolution({allowView:t,message:e,scoredComponent:r}){let a=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"open",value:t},{updateType:"updateValue",componentName:this.componentName,stateVariable:"message",value:e}],s;return t&&(a.push({updateType:"updateValue",componentName:r,stateVariable:"viewedSolution",value:!0}),s={verb:"viewed",object:{componentName:this.componentName,componentType:this.componentType}}),this.coreFunctions.requestUpdate({updateInstructions:a,event:s,overrideReadOnly:!0})}revealSolution(){let{scoredItemNumber:t,scoredComponent:e}=this.coreFunctions.calculateScoredItemNumberOfContainer(this.componentName);return this.coreFunctions.recordSolutionView({itemNumber:t,scoredComponent:e}).then(this.finishRevealSolution)}closeSolution(){return this.coreFunctions.performUpdate({updateInstructions:[{updateType:"updateValue",componentName:this.componentName,stateVariable:"open",value:!1}],event:{verb:"closed",object:{componentName:this.componentName,componentType:this.componentType}}})}actions={revealSolution:this.revealSolution.bind(this),closeSolution:this.closeSolution.bind(this)}};T(cl,"componentType","solution"),T(cl,"renderChildren",!0),T(cl,"includeBlankStringChildren",!0);var Bc=class extends mr{static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return yr({stateVariableDefinitions:t,oldName:"value",newName:"originalValue"}),t.value={public:!0,componentType:this.componentType,returnDependencies:()=>({originalValue:{dependencyType:"stateVariable",variableName:"originalValue"}}),definition:function({dependencyValues:e}){let r=e.originalValue,a=/^(-?\d+)(\d{3})/,s=r.match(a);for(;s!==null;)r=r.replace(a,"$1,$2"),s=r.match(a);return{newValues:{value:r}}}},t.text={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:({dependencyValues:e})=>({newValues:{text:e.value}})},t}};T(Bc,"componentType","intcomma"),T(Bc,"rendererType","text");var xj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ej=function(i){let t=(i=i||"_")+"-";for(let e=0;e<7;e++)t+=xj[Math.floor(Math.random()*xj.length)];return t},Rj={"!":"\xA1","?":"\xBF\u0241",'"':'\u201C\u201D"\u275D\u275E',"'":"\u2018\u201B\u275B\u275C","-":"\u2014\u2013",a:"\xAA\xC0\xC1\xC2\xC3\xC4\xC5\xE0\xE1\xE2\xE3\xE4\xE5\u0100\u0101\u0102\u0103\u0104\u0105\u01CD\u01CE\u01DE\u01DF\u01E0\u01E1\u01FA\u01FB\u0200\u0201\u0202\u0203\u0226\u0227\u023A\u0386\u0391\u0394\u039B\u03AC\u03B1\u03BB\u0410\u0430\u0434\u0466\u0467\u04D0\u04D1\u04D2\u04D3\u019B\u0245\xE6",b:"\xDF\xFE\u0180\u0181\u0182\u0183\u0184\u0185\u0243\u0392\u03B2\u03D0\u03E6\u0411\u0412\u042A\u042C\u0432\u044A\u044C\u0462\u0463\u048C\u048D",c:"\xA2\xA9\xC7\xE7\u0106\u0107\u0108\u0109\u010A\u010B\u010C\u010D\u0186\u0187\u0188\u023B\u023C\u037B\u037C\u037D\u03F2\u03F9\u03FD\u03FE\u0421\u0441\u0454\u0480\u0481\u04AA\u04AB",d:"\xD0\u010E\u010F\u0110\u0111\u0189\u018A\u0221\u018B\u018C\u01F7",e:"\xC8\xC9\xCA\xCB\xE8\xE9\xEA\xEB\u0112\u0113\u0114\u0115\u0116\u0117\u0118\u0119\u011A\u011B\u018E\u018F\u0190\u01DD\u0204\u0205\u0206\u0207\u0228\u0229\u0246\u0247\u0388\u0395\u039E\u03A3\u03AD\u03B5\u03BE\u03F1\u03F5\u03F6\u0400\u0401\u0415\u042D\u0435\u0450\u0451\u04BC\u04BD\u04BE\u04BF\u04D6\u04D7\u04D8\u04D9\u04DA\u04DB\u04EC\u04ED",f:"\u0191\u0192\u03DC\u03DD\u04FA\u04FB\u0492\u0493\u017F",g:"\u011C\u011D\u011E\u011F\u0120\u0121\u0122\u0123\u0193\u01E4\u01E5\u01E6\u01E7\u01F4\u01F5",h:"\u0124\u0125\u0126\u0127\u0195\u01F6\u021E\u021F\u0389\u0397\u0402\u040A\u040B\u041D\u043D\u0452\u045B\u04A2\u04A3\u04A4\u04A5\u04BA\u04BB\u04C9\u04CA",I:"\xCC\xCD\xCE\xCF",i:"\xEC\xED\xEE\xEF\u0128\u0129\u012A\u012B\u012C\u012D\u012E\u012F\u0130\u0131\u0196\u0197\u0208\u0209\u020A\u020B\u038A\u0390\u03AA\u03AF\u03B9\u03CA\u0406\u0407\u0456\u0457",j:"\u0134\u0135\u01F0\u0237\u0248\u0249\u03F3\u0408\u0458",k:"\u0136\u0137\u0138\u0198\u0199\u01E8\u01E9\u039A\u03BA\u040C\u0416\u041A\u0436\u043A\u045C\u049A\u049B\u049C\u049D\u049E\u049F\u04A0\u04A1",l:"\u0139\u013A\u013B\u013C\u013D\u013E\u013F\u0140\u0141\u0142\u019A\u01AA\u01C0\u01CF\u01D0\u0234\u023D\u0399\u04C0\u04CF",m:"\u039C\u03FA\u03FB\u041C\u043C\u04CD\u04CE",n:"\xD1\xF1\u0143\u0144\u0145\u0146\u0147\u0148\u0149\u014A\u014B\u019D\u019E\u01F8\u01F9\u0220\u0235\u039D\u03A0\u03AE\u03B7\u03DE\u040D\u0418\u0419\u041B\u041F\u0438\u0439\u043B\u043F\u045D\u048A\u048B\u04C5\u04C6\u04E2\u04E3\u04E4\u04E5\u03C0",o:"\xD2\xD3\xD4\xD5\xD6\xD8\xF0\xF2\xF3\xF4\xF5\xF6\xF8\u014C\u014D\u014E\u014F\u0150\u0151\u019F\u01A0\u01A1\u01D1\u01D2\u01EA\u01EB\u01EC\u01ED\u01FE\u01FF\u020C\u020D\u020E\u020F\u022A\u022B\u022C\u022D\u022E\u022F\u0230\u0231\u038C\u0398\u039F\u03B8\u03BF\u03C3\u03CC\u03D5\u03D8\u03D9\u03EC\u03ED\u03F4\u041E\u0424\u043E\u0472\u0473\u04E6\u04E7\u04E8\u04E9\u04EA\u04EB",p:"\u01A4\u01BF\u03A1\u03C1\u03F7\u03F8\u03FC\u0420\u0440\u048E\u048F\xDE",q:"\u024A\u024B",r:"\u0154\u0155\u0156\u0157\u0158\u0159\u01A6\u0210\u0211\u0212\u0213\u024C\u024D\u0403\u0413\u042F\u0433\u044F\u0453\u0490\u0491",s:"\u015A\u015B\u015C\u015D\u015E\u015F\u0160\u0161\u01A7\u01A8\u0218\u0219\u023F\u0405\u0455",t:"\u0162\u0163\u0164\u0165\u0166\u0167\u01AB\u01AC\u01AD\u01AE\u021A\u021B\u0236\u023E\u0393\u03A4\u03C4\u03EE\u0422\u0442",u:"\xB5\xD9\xDA\xDB\xDC\xF9\xFA\xFB\xFC\u0168\u0169\u016A\u016B\u016C\u016D\u016E\u016F\u0170\u0171\u0172\u0173\u01AF\u01B0\u01B1\u01B2\u01D3\u01D4\u01D5\u01D6\u01D7\u01D8\u01D9\u01DA\u01DB\u01DC\u0214\u0215\u0216\u0217\u0244\u03B0\u03BC\u03C5\u03CB\u03CD",v:"\u03BD\u0474\u0475\u0476\u0477",w:"\u0174\u0175\u019C\u03C9\u03CE\u03D6\u03E2\u03E3\u0428\u0429\u0448\u0449\u0461\u047F",x:"\xD7\u03A7\u03C7\u03D7\u03F0\u0425\u0445\u04B2\u04B3\u04FC\u04FD\u04FE\u04FF",y:"\xDD\xFD\xFF\u0176\u0177\u0178\u01B3\u01B4\u0232\u0233\u024E\u024F\u038E\u03A5\u03AB\u03B3\u03C8\u03D2\u03D3\u03D4\u040E\u0423\u0443\u0447\u045E\u0470\u0471\u04AE\u04AF\u04B0\u04B1\u04EE\u04EF\u04F0\u04F1\u04F2\u04F3",z:"\u0179\u017A\u017B\u017C\u017D\u017E\u01A9\u01B5\u01B6\u0224\u0225\u0240\u0396\u03B6"},Y5={};Object.keys(Rj).forEach(function(i){Rj[i].split("").forEach(function(t){Y5[t]=i})});var Z5=i=>{let t=i.split("");return t.forEach((e,r)=>{Y5[e]&&(t[r]=Y5[e])}),t.join("")},tbe=/([A-Z]\.)+[A-Z]?,?$/,rbe=/^[A-Z]\.,?$/,nbe=/[A-Z]{2,}('s|,)?$/,ibe=/([a-z]\.)+[a-z]\.?$/,Vj=function(i){return tbe.test(i)===!0||ibe.test(i)===!0||rbe.test(i)===!0||nbe.test(i)===!0},abe=Z5,sbe=Vj,obe=/[a-z\u00C0-\u00FF] ?\/ ?[a-z\u00C0-\u00FF]/,lbe=function(i){let t=i=(i=(i=i||"").toLowerCase()).trim();return i=abe(i),obe.test(i)===!0&&(i=i.replace(/\/.*/,"")),i=(i=(i=(i=(i=(i=(i=i.replace(/^[#@]/,"")).replace(/[,;.!?]+$/,"")).replace(/[\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u2032\u2035\u2039\u203A]+/g,"'")).replace(/[\u0022\u00AB\u00BB\u201C\u201D\u201E\u201F\u2033\u2034\u2036\u2037\u2E42\u301D\u301E\u301F\uFF02]+/g,'"')).replace(/\u2026/g,"...")).replace(/\u2013/g,"-")).replace(/([aeiou][ktrp])in$/,"$1ing"),/^(re|un)-?[^aeiou]./.test(i)===!0&&(i=i.replace("-","")),sbe(i)&&(i=i.replace(/\./g,"")),/^[:;]/.test(i)===!1&&(i=(i=(i=i.replace(/\.{3,}$/g,"")).replace(/[",\.!:;\?\)]+$/g,"")).replace(/^['"\(]+/g,"")),(i=(i=i.replace(/[\u200B-\u200D\uFEFF]/g,"")).trim())===""&&(i=t),i=i.replace(/([0-9]),([0-9])/g,"$1$2")},ube=function(i){return i=(i=i.replace(/['’]s$/,"")).replace(/s['’]$/,"s")},cbe=/^[ \n\t\.\[\](){}⟨⟩:,،、‒–—―…!‹›«»‐\-?‘’;\/⁄·&*•^†‡°¡¿※№÷×ºª%‰+−=‱¶′″‴§~\|‖¦©℗®℠™¤₳฿\u0022\uFF02\u0027\u201C\u201F\u201B\u201E\u2E42\u201A\u2035\u2036\u2037\u301D\u0060\u301F]+/,pbe=/[ \n\t\.'\[\](){}⟨⟩:,،、‒–—―…!‹›«»‐\-?‘’;\/⁄·&*@•^†‡°¡¿※#№÷×ºª‰+−=‱¶′″‴§~\|‖¦©℗®℠™¤₳฿\u0022\uFF02\u201D\u00B4\u301E]+$/,Ij=/\//,J5=/['’]/,mbe=/^[a-z]\.([a-z]\.)+/i,fbe=/^[-+\.][0-9]/,dbe=/^'[0-9]{2}/,hbe=i=>{let t=i,e="",r="";(i=(i=i.replace(cbe,o=>(e=o,e!=="-"&&e!=="+"&&e!=="."||!fbe.test(i)?e==="'"&&dbe.test(i)?(e="",o):"":(e="",o)))).replace(pbe,o=>(r=o,J5.test(o)&&/[sn]['’]$/.test(t)&&J5.test(e)===!1?(r=r.replace(J5,""),"'"):mbe.test(i)===!0?(r=r.replace(/\./,""),"."):"")))===""&&(t=t.replace(/ *$/,o=>(r=o||"","")),i=t,e="",r=r);let a=lbe(i),s={text:i,clean:a,reduced:ube(a),pre:e,post:r};return Ij.test(i)&&i.split(Ij).forEach(o=>{s.alias=s.alias||{},s.alias[o.trim()]=!0}),s},Oj={};(function(i){let t=/^[A-Z][a-z'\u00C0-\u00FF]/,e=/^[A-Z]+s?$/;i.toUpperCase=function(){return this.text=this.text.toUpperCase(),this},i.toLowerCase=function(){return this.text=this.text.toLowerCase(),this},i.toTitleCase=function(){return this.text=this.text.replace(/^ *[a-z\u00C0-\u00FF]/,r=>r.toUpperCase()),this},i.isUpperCase=function(){return e.test(this.text)},i.isTitleCase=function(){return t.test(this.text)},i.titleCase=i.isTitleCase})(Oj);var Dj={};(function(i){let t=/(\u0022|\uFF02|\u0027|\u201C|\u2018|\u201F|\u201B|\u201E|\u2E42|\u201A|\u00AB|\u2039|\u2035|\u2036|\u2037|\u301D|\u0060|\u301F)/,e=/(\u0022|\uFF02|\u0027|\u201D|\u2019|\u201D|\u2019|\u201D|\u201D|\u2019|\u00BB|\u203A|\u2032|\u2033|\u2034|\u301E|\u00B4|\u301E)/;i.hasPost=function(r){return this.post.indexOf(r)!==-1},i.hasPre=function(r){return this.pre.indexOf(r)!==-1},i.hasQuote=function(){return t.test(this.pre)||e.test(this.post)},i.hasQuotation=i.hasQuote,i.hasComma=function(){return this.hasPost(",")},i.hasPeriod=function(){return this.hasPost(".")===!0&&this.hasPost("...")===!1},i.hasExclamation=function(){return this.hasPost("!")},i.hasQuestionMark=function(){return this.hasPost("?")||this.hasPost("\xBF")},i.hasEllipses=function(){return this.hasPost("..")||this.hasPost("\u2026")||this.hasPre("..")||this.hasPre("\u2026")},i.hasSemicolon=function(){return this.hasPost(";")},i.hasSlash=function(){return/\//.test(this.text)},i.hasHyphen=function(){let r=/^(-|–|—)$/;return r.test(this.post)||r.test(this.pre)},i.hasDash=function(){let r=/ (-|–|—) /;return r.test(this.post)||r.test(this.pre)},i.hasContraction=function(){return Boolean(this.implicit)},i.addPunctuation=function(r){return r!==","&&r!==";"||(this.post=this.post.replace(r,"")),this.post=r+this.post,this}})(Dj);var Lc={},Pj=function(i,t,e=3){if(i===t)return 1;if(i.length<e||t.length<e)return 0;let r=function(s,o){let l=s.length,u=o.length;if(l===0)return u;if(u===0)return l;let c=(u>l?u:l)+1;if(Math.abs(l-u)>(c||100))return c||100;let p,m,f,d,h,y,b=[];for(let g=0;g<c;g++)b[g]=[g],b[g].length=c;for(let g=0;g<c;g++)b[0][g]=g;for(let g=1;g<=l;++g)for(m=s[g-1],p=1;p<=u;++p){if(g===p&&b[g][p]>4)return l;f=o[p-1],d=m===f?0:1,h=b[g-1][p]+1,(y=b[g][p-1]+1)<h&&(h=y),(y=b[g-1][p-1]+d)<h&&(h=y);let v=g>1&&p>1&&m===o[p-2]&&s[g-2]===f&&(y=b[g-2][p-2]+d)<h;b[g][p]=v?y:h}return b[l][u]}(i,t),a=Math.max(i.length,t.length);return 1-(a===0?0:r/a)},k1=function(){};k1=function(i,t,e,r){let a=function(s,o,l,u){if(o.id===s.id||o.anything===!0)return!0;if(o.start===!0&&l!==0||o.end===!0&&l!==u-1)return!1;if(o.word!==void 0){if(s.implicit!==null&&s.implicit===o.word||s.alias!==void 0&&s.alias.hasOwnProperty(o.word)||o.soft===!0&&o.word===s.root)return!0;if(o.fuzzy!==void 0){let c=Pj(o.word,s.reduced);if(c>o.fuzzy||o.soft===!0&&(c=Pj(o.word,s.root),c>o.fuzzy))return!0}return o.word===s.clean||o.word===s.text||o.word===s.reduced}return o.tag!==void 0?s.tags[o.tag]===!0:o.method!==void 0?typeof s[o.method]=="function"&&s[o.method]()===!0:o.regex!==void 0?o.regex.test(s.clean):o.fastOr!==void 0?!(!s.implicit||o.fastOr.hasOwnProperty(s.implicit)!==!0)||o.fastOr.hasOwnProperty(s.reduced)||o.fastOr.hasOwnProperty(s.text):o.choices!==void 0&&(o.operator==="and"?o.choices.every(c=>k1(s,c,l,u)):o.choices.some(c=>k1(s,c,l,u)))}(i,t,e,r);return t.negative===!0?!a:a};var ybe=k1,bbe=Vj,gbe={};Lc.doesMatch=function(i,t,e){return ybe(this,i,t,e)},Lc.isAcronym=function(){return bbe(this.text)},Lc.isImplicit=function(){return this.text===""&&Boolean(this.implicit)},Lc.isKnown=function(){return Object.keys(this.tags).some(i=>gbe[i]!==!0)},Lc.setRoot=function(i){let t=i.transforms,e=this.implicit||this.clean;if(this.tags.Plural&&(e=t.toSingular(e,i)),this.tags.Verb&&!this.tags.Negative&&!this.tags.Infinitive){let r=null;this.tags.PastTense?r="PastTense":this.tags.Gerund?r="Gerund":this.tags.PresentTense?r="PresentTense":this.tags.Participle?r="Participle":this.tags.Actor&&(r="Actor"),e=t.toInfinitive(e,i,r)}this.root=e};var _j={},vbe=Z5,Tbe=/[\s-]/,Nbe=/^[A-Z-]+$/;_j.textOut=function(i,t,e){i=i||{};let r=this.text,a=this.pre,s=this.post;return i.reduced===!0&&(r=this.reduced||""),i.root===!0&&(r=this.root||""),i.implicit===!0&&this.implicit&&(r=this.implicit||""),i.normal===!0&&(r=this.clean||this.text||""),i.root===!0&&(r=this.root||this.reduced||""),i.unicode===!0&&(r=vbe(r)),i.titlecase===!0&&(this.tags.ProperNoun&&!this.titleCase()||(this.tags.Acronym?r=r.toUpperCase():Nbe.test(r)&&!this.tags.Acronym&&(r=r.toLowerCase()))),i.lowercase===!0&&(r=r.toLowerCase()),i.acronyms===!0&&this.tags.Acronym&&(r=r.replace(/\./g,"")),i.whitespace!==!0&&i.root!==!0||(a="",s=" ",Tbe.test(this.post)!==!1&&!i.last||this.implicit||(s="")),i.punctuation!==!0||i.root||(this.hasPost(".")===!0?s="."+s:this.hasPost("?")===!0?s="?"+s:this.hasPost("!")===!0?s="!"+s:this.hasPost(",")===!0?s=","+s:this.hasEllipses()===!0&&(s="..."+s)),t!==!0&&(a=""),e!==!0&&(s=""),i.abbreviations===!0&&this.tags.Abbreviation&&(s=s.replace(/^\./,"")),a+r+s};var kj={},Cbe={Auxiliary:1,Possessive:1},Sbe=function(i,t){let e=Object.keys(i.tags),r=t.tags;return e=e.sort((a,s)=>Cbe[s]||!r[s]?-1:r[s]?r[a]?r[a].lineage.length>r[s].lineage.length?1:r[a].isA.length>r[s].isA.length?-1:0:0:1),e},Abe={text:!0,tags:!0,implicit:!0,whitespace:!0,clean:!1,id:!1,index:!1,offset:!1,bestTag:!1};kj.json=function(i,t){i=i||{};let e={};return(i=Object.assign({},Abe,i)).text&&(e.text=this.text),i.normal&&(e.normal=this.clean),i.tags&&(e.tags=Object.keys(this.tags)),i.clean&&(e.clean=this.clean),(i.id||i.offset)&&(e.id=this.id),i.implicit&&this.implicit!==null&&(e.implicit=this.implicit),i.whitespace&&(e.pre=this.pre,e.post=this.post),i.bestTag&&(e.bestTag=Sbe(this,t)[0]),e};var wbe=Object.assign({},Oj,Dj,Lc,_j,kj),Zf={},Uc={};function Fj(){return typeof window!="undefined"&&window.document}var zc=function(i,t){for(i=i.toString();i.length<t;)i+=" ";return i};Uc.logTag=function(i,t,e){if(Fj())return void console.log("%c"+zc(i.clean,3)+"  + "+t+" ","color: #6accb2;");let r="[33m"+zc(i.clean,15)+"[0m + [32m"+t+"[0m ";e&&(r=zc(r,35)+" "+e),console.log(r)},Uc.logUntag=function(i,t,e){if(Fj())return void console.log("%c"+zc(i.clean,3)+"  - "+t+" ","color: #AB5850;");let r="[33m"+zc(i.clean,3)+" [31m - #"+t+"[0m ";e&&(r=zc(r,35)+" "+e),console.log(r)},Uc.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"},Uc.titleCase=i=>i.charAt(0).toUpperCase()+i.substr(1);var Q5=Uc,Mj=function(i,t,e,r){let a=r.tags;if(t===""||t==="."||t==="-"||(t[0]==="#"&&(t=t.replace(/^#/,"")),t=Q5.titleCase(t),i.tags[t]===!0))return;let s=r.isVerbose();s===!0&&Q5.logTag(i,t,e),i.tags[t]=!0,a.hasOwnProperty(t)===!0&&(a[t].isA.forEach(o=>{i.tags[o]=!0,s===!0&&Q5.logTag(i,"\u2192 "+o)}),i.unTag(a[t].notA,"\u2190",r))},jj=Uc,xbe=/^[a-z]/,Bj=function(i,t,e,r){let a=r.isVerbose();if(t==="*")return i.tags={},i;var s;t=t.replace(/^#/,""),xbe.test(t)===!0&&(t=(s=t).charAt(0).toUpperCase()+s.substr(1)),i.tags[t]===!0&&(delete i.tags[t],a===!0&&jj.logUntag(i,t,e));let o=r.tags;if(o[t]){let l=o[t].lineage;for(let u=0;u<l.length;u++)i.tags[l[u]]===!0&&(delete i.tags[l[u]],a===!0&&jj.logUntag(i," - "+l[u]))}return i},Lj=function(i,t,e){let r=e.tags;if(t[0]==="#"&&(t=t.replace(/^#/,"")),r[t]===void 0)return!0;let a=r[t].notA||[];for(let s=0;s<a.length;s++)if(i.tags[a[s]]===!0)return!1;return r[t].isA===void 0||Lj(i,r[t].isA,e)},Uj=function(i,t,e,r){if(typeof t!="string")for(let a=0;a<t.length;a++)Mj(i,t[a],e,r);else Mj(i,t,e,r)},Ebe=function(i,t,e,r){if(typeof t!="string"&&t)for(let a=0;a<t.length;a++)Bj(i,t[a],e,r);else Bj(i,t,e,r)},zj=Lj;Zf.tag=function(i,t,e){return Uj(this,i,t,e),this},Zf.tagSafe=function(i,t,e){return zj(this,i,e)&&Uj(this,i,t,e),this},Zf.unTag=function(i,t,e){return Ebe(this,i,t,e),this},Zf.canBe=function(i,t){return zj(this,i,t)};var Rbe=Ej,Hj=hbe,Vbe=wbe,Ibe=Zf,Hc=class{constructor(t=""){t=String(t);let e=Hj(t);this.text=e.text||"",this.clean=e.clean,this.reduced=e.reduced,this.root=null,this.implicit=null,this.pre=e.pre||"",this.post=e.post||"",this.tags={},this.prev=null,this.next=null,this.id=Rbe(e.clean),this.isA="Term",e.alias&&(this.alias=e.alias)}set(t){let e=Hj(t);return this.text=e.text,this.clean=e.clean,this.reduced=e.reduced,this.root=null,this.implicit=null,this}};Hc.prototype.clone=function(){let i=new Hc(this.text);return i.pre=this.pre,i.post=this.post,i.clean=this.clean,i.reduced=this.reduced,i.root=this.root,i.implicit=this.implicit,i.tags=Object.assign({},this.tags),i},Object.assign(Hc.prototype,Vbe),Object.assign(Hc.prototype,Ibe);var ew=Hc,Obe={terms:function(i){if(this.length===0)return[];if(this.cache.terms)return i!==void 0?this.cache.terms[i]:this.cache.terms;let t=[this.pool.get(this.start)];for(let e=0;e<this.length-1;e+=1){let r=t[t.length-1].next;if(r===null){console.error("Compromise error: Linked list broken in phrase '"+this.start+"'");break}let a=this.pool.get(r);if(t.push(a),i!==void 0&&i===e)return t[i]}return i===void 0&&(this.cache.terms=t),i!==void 0?t[i]:t},clone:function(i){if(i){let e=this.buildFrom(this.start,this.length);return e.cache=this.cache,e}let t=this.terms().map(e=>e.clone());return t.forEach((e,r)=>{this.pool.add(e),t[r+1]&&(e.next=t[r+1].id),t[r-1]&&(e.prev=t[r-1].id)}),this.buildFrom(t[0].id,t.length)},lastTerm:function(){let i=this.terms();return i[i.length-1]},hasId:function(i){if(this.length===0||!i)return!1;if(this.start===i)return!0;if(this.cache.terms){let e=this.cache.terms;for(let r=0;r<e.length;r++)if(e[r].id===i)return!0;return!1}let t=this.start;for(let e=0;e<this.length-1;e+=1){let r=this.pool.get(t);if(r===void 0)return console.error(`Compromise error: Linked list broken. Missing term '${t}' in phrase '${this.start}'
`),!1;if(r.next===i)return!0;t=r.next}return!1},wordCount:function(){return this.terms().filter(i=>i.text!=="").length},fullSentence:function(){let i=this.terms(0);for(;i.prev;)i=this.pool.get(i.prev);let t=i.id,e=1;for(;i.next;)i=this.pool.get(i.next),e+=1;return this.buildFrom(t,e)}},Gj={};Gj.text=function(i={},t,e){typeof i=="string"&&(i=i==="normal"?{whitespace:!0,unicode:!0,lowercase:!0,punctuation:!0,acronyms:!0,abbreviations:!0,implicit:!0,normal:!0}:i==="clean"?{titlecase:!1,lowercase:!0,punctuation:!0,whitespace:!0,unicode:!0,implicit:!0,normal:!0}:i==="reduced"?{punctuation:!1,titlecase:!1,lowercase:!0,whitespace:!0,unicode:!0,implicit:!0,reduced:!0}:i==="implicit"?{punctuation:!0,implicit:!0,whitespace:!0,trim:!0}:i==="root"?{titlecase:!1,lowercase:!0,punctuation:!0,whitespace:!0,unicode:!0,implicit:!0,root:!0}:{});let r=this.terms(),a=!1;r[0]&&r[0].prev===null&&r[r.length-1].next===null&&(a=!0);let s=r.reduce((o,l,u)=>{if(u===0&&l.text===""&&l.implicit!==null&&!i.implicit)return o;i.last=e&&u===r.length-1;let c=!0,p=!0;return a===!1&&(u===0&&t&&(c=!1),u===r.length-1&&e&&(p=!1)),o+l.textOut(i,c,p)},"");return a===!0&&e&&(s=s.replace(/ +$/,"")),i.trim===!0&&(s=s.trim()),s};var Dbe={trim:function(){let i=this.terms();if(i.length>0){i[0].pre=i[0].pre.replace(/^\s+/,"");let t=i[i.length-1];t.post=t.post.replace(/\s+$/,"")}return this}},Gc={},Pbe=/[.?!]\s*$/,_be=function(i,t){t[0].pre=i[0].pre;let e=i[i.length-1],r=t[t.length-1];r.post=function(a,s){return Pbe.test(s)?s+a.match(/\s*$/):a}(e.post,r.post),e.post="",e.post===""&&(e.post+=" ")},kbe=/ /,qj=function(i,t,e){let r=i.terms(),a=t.terms();_be(r,a),function(u,c,p){let m=u[u.length-1],f=c[c.length-1],d=m.next;m.next=c[0].id,f.next=d,d&&(p.get(d).prev=f.id);let h=u[0].id;h&&(c[0].prev=h)}(r,a,i.pool);let s=[i],o=i.start,l=[e];return l=l.concat(e.parents()),l.forEach(u=>{let c=u.list.filter(p=>p.hasId(o));s=s.concat(c)}),s=function(u){return u.filter((c,p)=>u.indexOf(c)===p)}(s),s.forEach(u=>{u.length+=t.length}),i.cache={},i},Fbe=function(i,t,e){let r=i.start,a=t.terms();(function(l){let u=l[l.length-1];kbe.test(u.post)===!1&&(u.post+=" ")})(a),function(l,u,c){let p=c[c.length-1];p.next=l.start;let m=l.pool,f=m.get(l.start);f.prev&&(m.get(f.prev).next=u.start),c[0].prev=l.terms(0).prev,l.terms(0).prev=p.id}(i,t,a);let s=[i],o=[e];return o=o.concat(e.parents()),o.forEach(l=>{let u=l.list.filter(c=>c.hasId(r)||c.hasId(t.start));s=s.concat(u)}),s=function(l){return l.filter((u,c)=>l.indexOf(u)===c)}(s),s.forEach(l=>{l.length+=t.length,l.start===r&&(l.start=t.start),l.cache={}}),i},Wj=function(i,t){let e=t.pool(),r=i.terms(),a=e.get(r[0].prev)||{},s=e.get(r[r.length-1].next)||{};r[0].implicit&&a.implicit&&(a.set(a.implicit),a.post+=" "),function(o,l,u,c){let p=o.parents();p.push(o),p.forEach(m=>{let f=m.list.find(d=>d.hasId(l));f&&(f.length-=u,f.start===l&&(f.start=c.id),f.cache={})}),o.list=o.list.filter(m=>!(!m.start||!m.length))}(t,i.start,i.length,s),a&&(a.next=s.id),s&&(s.prev=a.id)};Gc.append=function(i,t){return qj(this,i,t),this},Gc.prepend=function(i,t){return Fbe(this,i,t),this},Gc.delete=function(i){return Wj(this,i),this},Gc.replace=function(i,t){let e=this.length;qj(this,i,t);let r=this.buildFrom(this.start,this.length);r.length=e,Wj(r,t)},Gc.splitOn=function(i){let t=this.terms(),e={before:null,match:null,after:null},r=t.findIndex(l=>l.id===i.start);if(r===-1)return e;let a=t.slice(0,r);a.length>0&&(e.before=this.buildFrom(a[0].id,a.length));let s=t.slice(r,r+i.length);s.length>0&&(e.match=this.buildFrom(s[0].id,s.length));let o=t.slice(r+i.length,t.length);return o.length>0&&(e.after=this.buildFrom(o[0].id,o.length,this.pool)),e};var Mbe={json:function(i={},t){let e={};return i.text&&(e.text=this.text()),i.normal&&(e.normal=this.text("normal")),i.clean&&(e.clean=this.text("clean")),i.reduced&&(e.reduced=this.text("reduced")),i.implicit&&(e.implicit=this.text("implicit")),i.root&&(e.root=this.text("root")),i.trim&&(e.text&&(e.text=e.text.trim()),e.normal&&(e.normal=e.normal.trim()),e.reduced&&(e.reduced=e.reduced.trim())),i.terms&&(i.terms===!0&&(i.terms={}),e.terms=this.terms().map(r=>r.json(i.terms,t))),e}},jbe={lookAhead:function(i){i||(i=".*");let t=this.pool,e=[],r=function(o){let l=t.get(o);l&&(e.push(l),l.prev&&r(l.next))},a=this.terms(),s=a[a.length-1];return r(s.next),e.length===0?[]:this.buildFrom(e[0].id,e.length).match(i)},lookBehind:function(i){i||(i=".*");let t=this.pool,e=[],r=function(s){let o=t.get(s);o&&(e.push(o),o.prev&&r(o.prev))},a=t.get(this.start);return r(a.prev),e.length===0?[]:this.buildFrom(e[e.length-1].id,e.length).match(i)}},Bbe=Object.assign({},Obe,Gj,Dbe,Gc,Mbe,jbe),Jf={},pl,Lbe=function(i,t){if(t.length===0)return!0;for(let e=0;e<t.length;e+=1){let r=t[e];if(r.optional!==!0&&r.negative!==!0&&r.start===!0&&e>0||r.anything===!0&&r.negative===!0)return!0}return!1},$j={};(pl=$j).getGreedy=function(i,t){let e=Object.assign({},i.regs[i.r],{start:!1,end:!1}),r=i.t;for(;i.t<i.terms.length;i.t+=1){if(t&&i.terms[i.t].doesMatch(t,i.start_i+i.t,i.phrase_length))return i.t;let a=i.t-r+1;if(e.max!==void 0&&a===e.max)return i.t;if(i.terms[i.t].doesMatch(e,i.start_i+i.t,i.phrase_length)===!1)return e.min!==void 0&&a<e.min?null:i.t}return i.t},pl.greedyTo=function(i,t){let e=i.t;if(!t)return i.terms.length;for(;e<i.terms.length;e+=1)if(i.terms[e].doesMatch(t,i.start_i+e,i.phrase_length)===!0)return e;return null},pl.isEndGreedy=function(i,t){if(i.end===!0&&i.greedy===!0&&t.start_i+t.t<t.phrase_length-1){let e=Object.assign({},i,{end:!1});if(t.terms[t.t].doesMatch(e,t.start_i+t.t,t.phrase_length)===!0)return!0}return!1},pl.doOrBlock=function(i,t=0){let e=i.regs[i.r],r=!1;for(let a=0;a<e.choices.length;a+=1){let s=e.choices[a];if(r=s.every((o,l)=>{let u=0,c=i.t+l+t+u;if(i.terms[c]===void 0)return!1;let p=i.terms[c].doesMatch(o,c+i.start_i,i.phrase_length);if(p===!0&&o.greedy===!0)for(let m=1;m<i.terms.length;m+=1){let f=i.terms[c+m];if(f){if(f.doesMatch(o,i.start_i+m,i.phrase_length)!==!0)break;u+=1}}return t+=u,p}),r){t+=s.length;break}}return r&&e.greedy===!0?pl.doOrBlock(i,t):t},pl.doAndBlock=function(i){let t=0;return i.regs[i.r].choices.every(e=>{let r=e.every((a,s)=>{let o=i.t+s;return i.terms[o]!==void 0&&i.terms[o].doesMatch(a,o,i.phrase_length)});return r===!0&&e.length>t&&(t=e.length),r})===!0&&t},pl.getGroup=function(i,t,e){if(i.groups[i.groupId])return i.groups[i.groupId];let r=i.terms[t].id;return i.groups[i.groupId]={group:String(e),start:r,length:0},i.groups[i.groupId]};var Ube=Ej,Ga=$j,zbe=function(i,t,e,r){let a={t:0,terms:i,r:0,regs:t,groups:{},start_i:e,phrase_length:r,hasGroup:!1,groupId:null,previousGroup:null};for(;a.r<t.length;a.r+=1){let s=t[a.r];if(a.hasGroup=typeof s.named=="string"||typeof s.named=="number",a.hasGroup===!0){let u=t[a.r-1];u&&u.named===s.named&&a.previousGroup?a.groupId=a.previousGroup:(a.groupId=Ube(s.named),a.previousGroup=a.groupId)}if(!a.terms[a.t]){if(t.slice(a.r).some(u=>!u.optional)===!1)break;return null}if(s.anything===!0&&s.greedy===!0){let u=Ga.greedyTo(a,t[a.r+1]);if(u===null||u===0||s.min!==void 0&&u-a.t<s.min)return null;if(s.max!==void 0&&u-a.t>s.max){a.t=a.t+s.max;continue}a.hasGroup===!0&&(Ga.getGroup(a,a.t,s.named).length=u-a.t),a.t=u;continue}if(s.choices!==void 0&&s.operator==="or"){let u=Ga.doOrBlock(a);if(u){if(s.negative===!0)return null;a.hasGroup===!0&&(Ga.getGroup(a,a.t,s.named).length+=u),a.t+=u;continue}if(!s.optional)return null}if(s.choices!==void 0&&s.operator==="and"){let u=Ga.doAndBlock(a);if(u){if(s.negative===!0)return null;a.hasGroup===!0&&(Ga.getGroup(a,a.t,s.named).length+=u),a.t+=u;continue}if(!s.optional)return null}let o=a.terms[a.t],l=o.doesMatch(s,a.start_i+a.t,a.phrase_length);if(s.anything===!0||l===!0||Ga.isEndGreedy(s,a)){let u=a.t;if(s.optional&&t[a.r+1]&&s.negative)continue;if(s.optional&&t[a.r+1]){let c=o.doesMatch(t[a.r+1],a.start_i+a.t,a.phrase_length);if(s.negative||c){let p=a.terms[a.t+1];p&&p.doesMatch(t[a.r+1],a.start_i+a.t,a.phrase_length)||(a.r+=1)}}if(a.t+=1,s.end===!0&&a.t!==a.terms.length&&s.greedy!==!0||s.greedy===!0&&(a.t=Ga.getGreedy(a,t[a.r+1]),a.t===null||s.min&&s.min>a.t||s.end===!0&&a.start_i+a.t!==r))return null;if(a.hasGroup===!0){let c=Ga.getGroup(a,u,s.named);a.t>1&&s.greedy?c.length+=a.t-u:c.length++}}else{if(s.negative){let u=Object.assign({},s);if(u.negative=!1,a.terms[a.t].doesMatch(u,a.start_i+a.t,a.phrase_length)===!0)return null}if(s.optional!==!0){if(a.terms[a.t].isImplicit()&&t[a.r-1]&&a.terms[a.t+1]){if(a.terms[a.t-1]&&a.terms[a.t-1].implicit===t[a.r-1].word)return null;if(a.terms[a.t+1].doesMatch(s,a.start_i+a.t,a.phrase_length)){a.t+=2;continue}}return null}}}return{match:a.terms.slice(0,a.t),groups:a.groups}},Hbe=function(i,t,e){if(!e||e.length===0)return e;if(t.some(r=>r.end)){let r=i[i.length-1];e=e.filter(({match:a})=>a.indexOf(r)!==-1)}return e},Gbe=/(?:^|\s)([\!\[\^]*(?:<[^<]*>)?\/.*?[^\\\/]\/[\?\]\+\*\$~]*)(?:\s|$)/,qbe=/([\!\[\^]*(?:<[^<]*>)?\([^\)]+[^\\\)]\)[\?\]\+\*\$~]*)(?:\s|$)/,Wbe=/ /g,Kj=i=>/^[\!\[\^]*(<[^<]*>)?\//.test(i)&&/\/[\?\]\+\*\$~]*$/.test(i),Xj=function(i){return i=(i=i.map(t=>t.trim())).filter(t=>t)},$be=function(i){let t=i.split(Gbe),e=[];t.forEach(a=>{Kj(a)?e.push(a):e=e.concat(a.split(qbe))}),e=Xj(e);let r=[];return e.forEach(a=>{(s=>/^[\!\[\^]*(<[^<]*>)?\(/.test(s)&&/\)[\?\]\+\*\$~]*$/.test(s))(a)||Kj(a)?r.push(a):r=r.concat(a.split(Wbe))}),r=Xj(r),r},Yj=/\{([0-9]+,?[0-9]*)\}/,Zj=/&&/,Kbe=new RegExp(/^<\s*?(\S+)\s*?>/),qa=function(i){return i[i.length-1]},Ji=function(i){return i[0]},qc=function(i){return i.substr(1)},Wc=function(i){return i.substr(0,i.length-1)},Jj=function(i){return i=qc(i),i=Wc(i)},Qj=function(i){let t={};for(let r=0;r<2;r+=1){if(qa(i)==="$"&&(t.end=!0,i=Wc(i)),Ji(i)==="^"&&(t.start=!0,i=qc(i)),(Ji(i)==="["||qa(i)==="]")&&(t.named=!0,Ji(i)==="["?t.groupType=qa(i)==="]"?"single":"start":t.groupType="end",i=(i=i.replace(/^\[/,"")).replace(/\]$/,""),Ji(i)==="<")){let a=Kbe.exec(i);a.length>=2&&(t.named=a[1],i=i.replace(a[0],""))}if(qa(i)==="+"&&(t.greedy=!0,i=Wc(i)),i!=="*"&&qa(i)==="*"&&i!=="\\*"&&(t.greedy=!0,i=Wc(i)),qa(i)==="?"&&(t.optional=!0,i=Wc(i)),Ji(i)==="!"&&(t.negative=!0,i=qc(i)),Ji(i)==="("&&qa(i)===")"){Zj.test(i)?(t.choices=i.split(Zj),t.operator="and"):(t.choices=i.split("|"),t.operator="or"),t.choices[0]=qc(t.choices[0]);let a=t.choices.length-1;t.choices[a]=Wc(t.choices[a]),t.choices=t.choices.map(s=>s.trim()),t.choices=t.choices.filter(s=>s),t.choices=t.choices.map(s=>s.split(/ /g).map(Qj)),i=""}if(Ji(i)==="/"&&qa(i)==="/")return i=Jj(i),t.regex=new RegExp(i),t;if(Ji(i)==="~"&&qa(i)==="~")return i=Jj(i),t.soft=!0,t.word=i,t}return Yj.test(i)===!0&&(i=i.replace(Yj,(r,a)=>{let s=a.split(/,/g);return s.length===1?(t.min=Number(s[0]),t.max=Number(s[0])):(t.min=Number(s[0]),t.max=Number(s[1]||999)),t.greedy=!0,t.optional=!0,""})),Ji(i)==="#"?(t.tag=qc(i),t.tag=(e=t.tag).charAt(0).toUpperCase()+e.substr(1),t):Ji(i)==="@"?(t.method=qc(i),t):i==="."?(t.anything=!0,t):i==="*"?(t.anything=!0,t.greedy=!0,t.optional=!0,t):(i&&(i=(i=i.replace("\\*","*")).replace("\\.","."),t.word=i.toLowerCase()),t);var e},Xbe=$be,Ybe=Qj,Zbe=function(i,t={}){return i.filter(e=>e.groupType).length>0&&(i=function(e){let r,a=!1,s=-1;for(let o=0;o<e.length;o++){let l=e[o];l.groupType!=="single"||l.named!==!0?(l.groupType==="start"&&(a=!0,typeof l.named=="string"||typeof l.named=="number"?r=l.named:(s+=1,r=s)),a&&(l.named=r),l.groupType==="end"&&(a=!1)):(s+=1,l.named=s)}return e}(i)),t.fuzzy||(i=function(e){return e.map(r=>{if(r.choices!==void 0&&r.choices.every(a=>{if(a.length!==1)return!1;let s=a[0];return s.word!==void 0&&s.negative!==!0&&s.optional!==!0&&s.method!==!0})===!0){let a={};r.choices.forEach(s=>{a[s[0].word]=!0}),r.fastOr=a,delete r.choices}return r})}(i)),i},Qf=function(i,t={}){if(i==null||i==="")return[];if(typeof i=="object"){if(function(r){return Object.prototype.toString.call(r)==="[object Array]"}(i)){if(i.length===0||!i[0])return[];if(typeof i[0]=="object")return i;if(typeof i[0]=="string")return function(r){return[{choices:r.map(a=>[{word:a}]),operator:"or"}]}(i)}return i&&i.isA==="Doc"?function(r){if(!r||!r.list||!r.list[0])return[];let a=[];return r.list.forEach(s=>{let o=[];s.terms().forEach(l=>{o.push(l.id)}),a.push(o)}),[{idBlocks:a}]}(i):[]}typeof i=="number"&&(i=String(i));let e=Xbe(i);return e=e.map(r=>Ybe(r)),e=Zbe(e,t),e=function(r,a){return a.fuzzy===!0&&(a.fuzzy=.85),typeof a.fuzzy=="number"&&(r=r.map(s=>(a.fuzzy>0&&s.word&&(s.fuzzy=a.fuzzy),s.choices&&s.choices.forEach(o=>{o.forEach(l=>{l.fuzzy=a.fuzzy})}),s))),r}(e,t),e},Jbe=Lbe,eB=zbe,F1=Hbe,Qbe=Qf,ege=function(i,t){let e=[],r=t[0].idBlocks;for(let a=0;a<i.length;a+=1)r.forEach(s=>{s.length!==0&&s.every((o,l)=>i[a+l].id===o)&&(e.push({match:i.slice(a,a+s.length)}),a+=s.length-1)});return e},tB=function(i,t,e=!1){if(typeof t=="string"&&(t=Qbe(t)),Jbe(i,t)===!0)return[];let r=t.filter(o=>o.optional!==!0&&o.negative!==!0).length,a=i.terms(),s=[];if(t[0].idBlocks){let o=ege(a,t);if(o&&o.length>0)return F1(a,t,o)}if(t[0].start===!0){let o=eB(a,t,0,a.length);return o&&o.match&&o.match.length>0&&(o.match=o.match.filter(l=>l),s.push(o)),F1(a,t,s)}for(let o=0;o<a.length&&!(o+r>a.length);o+=1){let l=eB(a.slice(o),t,o,a.length);if(l&&l.match&&l.match.length>0&&(o+=l.match.length-1,l.match=l.match.filter(u=>u),s.push(l),e===!0))return F1(a,t,s)}return F1(a,t,s)},tge=tB,rB=tB,rge=function(i,t){let e={};tge(i,t).forEach(({match:o})=>{o.forEach(l=>{e[l.id]=!0})});let r=i.terms(),a=[],s=[];return r.forEach(o=>{e[o.id]!==!0?s.push(o):s.length>0&&(a.push(s),s=[])}),s.length>0&&a.push(s),a};Jf.match=function(i,t=!1){let e=rB(this,i,t);return e=e.map(({match:r,groups:a})=>{let s=this.buildFrom(r[0].id,r.length,a);return s.cache.terms=r,s}),e},Jf.has=function(i){return rB(this,i,!0).length>0},Jf.not=function(i){let t=rge(this,i);return t=t.map(e=>this.buildFrom(e[0].id,e.length)),t},Jf.canBe=function(i,t){let e=[],r=this.terms(),a=!1;for(let s=0;s<r.length;s+=1){let o=r[s].canBe(i,t);o===!0&&(a===!0?e[e.length-1].push(r[s]):e.push([r[s]]),a=o)}return e=e.filter(s=>s.length>0).map(s=>this.buildFrom(s[0].id,s.length)),e};var nge=Bbe,ige=Jf,Gs=class{constructor(t,e,r){this.start=t,this.length=e,this.isA="Phrase",Object.defineProperty(this,"pool",{enumerable:!1,writable:!0,value:r}),Object.defineProperty(this,"cache",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"groups",{enumerable:!1,writable:!0,value:{}})}};Gs.prototype.buildFrom=function(i,t,e){let r=new Gs(i,t,this.pool);return e&&Object.keys(e).length>0?r.groups=e:r.groups=this.groups,r},Object.assign(Gs.prototype,ige),Object.assign(Gs.prototype,nge);var nB={term:"terms"};Object.keys(nB).forEach(i=>Gs.prototype[i]=Gs.prototype[nB[i]]);var tw=Gs,M1=class{constructor(t={}){Object.defineProperty(this,"words",{enumerable:!1,value:t})}add(t){return this.words[t.id]=t,this}get(t){return this.words[t]}remove(t){delete this.words[t]}merge(t){return Object.assign(this.words,t.words),this}stats(){return{words:Object.keys(this.words).length}}};M1.prototype.clone=function(){let i=Object.keys(this.words).reduce((t,e)=>{let r=this.words[e].clone();return t[r.id]=r,t},{});return new M1(i)};var rw=M1,iB=i=>{i.forEach((t,e)=>{e>0&&(t.prev=i[e-1].id),i[e+1]&&(t.next=i[e+1].id)})},age=/(\S.+?[.!?\u203D\u2E18\u203C\u2047-\u2049])(?=\s+|$)/g,aB=/\S/,sge=/[ .][A-Z]\.? *$/i,oge=/(?:\u2026|\.{2,}) *$/,lge=/((?:\r?\n|\r)+)/,uge=/[a-z0-9\u00C0-\u00FF\u00a9\u00ae\u2000-\u3300\ud000-\udfff]/i,sB=/^\s+/,cge=function(i,t,e,r){if(r.hasLetter=function(o,l){return l||uge.test(o)}(t,r.hasLetter),!r.hasLetter||function(o,l){return l.indexOf(".")!==-1&&sge.test(o)}(i,t)||function(o,l){return l.indexOf(".")!==-1&&oge.test(o)}(i,t))return!1;let a=i.replace(/[.!?\u203D\u2E18\u203C\u2047-\u2049] *$/,"").split(" "),s=a[a.length-1].toLowerCase();return!e.hasOwnProperty(s)},pge=function(i,t){let e=t.cache.abbreviations;i=i||"";let r=[],a=[];if(!(i=String(i))||typeof i!="string"||aB.test(i)===!1)return r;let s=function(u){let c=[],p=u.split(lge);for(let m=0;m<p.length;m++){let f=p[m].split(age);for(let d=0;d<f.length;d++)c.push(f[d])}return c}(i=i.replace("\xA0"," "));for(let u=0;u<s.length;u++){let c=s[u];if(c!==void 0&&c!==""){if(aB.test(c)===!1){if(a[a.length-1]){a[a.length-1]+=c;continue}if(s[u+1]){s[u+1]=c+s[u+1];continue}}a.push(c)}}let o=a[0]||"",l={hasLetter:!1};for(let u=0;u<a.length;u++){let c=a[u];a[u+1]&&cge(c,o,e,l)===!1?(o=a[u+1]||"",a[u+1]=c+o):c&&c.length>0&&(r.push(c),o=a[u+1]||"",l.hasLetter=!1),a[u]=""}if(r.length===0)return[i];for(let u=1;u<r.length;u+=1){let c=r[u].match(sB);c!==null&&(r[u-1]+=c[0],r[u]=r[u].replace(sB,""))}return r},mge=/\S/,fge=/^[!?.]+$/,dge=/(\S+)/,hge=/[a-z] ?\/ ?[a-z]*$/,nw=[".","?","!",":",";","-","\u2013","\u2014","--","...","(",")","[","]",'"',"'","`"];nw=nw.reduce((i,t)=>(i[t]=!0,i),{});var yge=function(i){return/^(re|un|micro|macro|trans|bi|mono|over)-?[^aeiou]./.test(i)===!0||/^([a-z\u00C0-\u00FF/]+)(-|–|—)(like|ish|less|able)/i.test(i)===!0?!1:/^([a-z\u00C0-\u00FF`"'/]+)(-|–|—)([a-z0-9\u00C0-\u00FF].*)/i.test(i)===!0?!0:/^([0-9]{1,4})(-|–|—)([a-z\u00C0-\u00FF`"'/-]+$)/i.test(i)===!0},bge=function(i){let t=[],e=i.split(/[-–—]/),r="-",a=i.match(/[-–—]/);a&&a[0]&&(r=a);for(let s=0;s<e.length;s++)s===e.length-1?t.push(e[s]):t.push(e[s]+r);return t},gge=ew,vge=tw,Tge=rw,Nge=iB,Cge=pge,Sge=function(i){let t=[],e=[];if(typeof(i=i||"")=="number"&&(i=String(i)),function(s){return Object.prototype.toString.call(s)==="[object Array]"}(i))return i;let r=i.split(dge);for(let s=0;s<r.length;s++)yge(r[s])!==!0?e.push(r[s]):e=e.concat(bge(r[s]));let a="";for(let s=0;s<e.length;s++){let o=e[s];mge.test(o)===!0&&nw.hasOwnProperty(o)===!1&&fge.test(o)===!1?(t.length>0?(t[t.length-1]+=a,t.push(o)):t.push(a+o),a=""):a+=o}return a&&(t.length===0&&(t[0]=""),t[t.length-1]+=a),t=function(s){for(let o=1;o<s.length-1;o++)hge.test(s[o])&&(s[o-1]+=s[o]+s[o+1],s[o]=null,s[o+1]=null);return s}(t),t=function(s){let o=/^[0-9]{1,4}(:[0-9][0-9])?([a-z]{1,2})? ?(-|–|—) ?$/,l=/^[0-9]{1,4}([a-z]{1,2})? ?$/;for(let u=0;u<s.length-1;u+=1)s[u+1]&&o.test(s[u])&&l.test(s[u+1])&&(s[u]=s[u]+s[u+1],s[u+1]=null);return s}(t),t=t.filter(s=>s),t},ed=function(i="",t,e){let r=null;return typeof i!="string"&&(typeof i=="number"?i=String(i):function(a){return Object.prototype.toString.call(a)==="[object Array]"}(i)&&(r=i)),r=r||Cge(i,t),r=r.map(a=>Sge(a)),e=e||new Tge,r.map(a=>{a=a.map(o=>{let l=new gge(o);return e.add(l),l}),Nge(a);let s=new vge(a[0].id,a.length,e);return s.cache.terms=a,s})},Age=ew,wge=tw,xge=rw,Ege=iB,Rge=function(i,t){let e=new xge;return i.map((r,a)=>{let s=r.terms.map((o,l)=>{let u=new Age(o.text);return u.pre=o.pre!==void 0?o.pre:"",o.post===void 0&&(o.post=" ",l>=r.terms.length-1&&(o.post=". ",a>=r.terms.length-1&&(o.post="."))),u.post=o.post!==void 0?o.post:" ",o.tags&&o.tags.forEach(c=>u.tag(c,"",t)),e.add(u),u});return Ege(s),new wge(s[0].id,s.length,e)})},j1=["Person","Place","Organization"],iw=["Noun","Verb","Adjective","Adverb","Value","QuestionWord"],B1={Noun:"blue",Verb:"green",Negative:"green",Date:"red",Value:"red",Adjective:"magenta",Preposition:"cyan",Conjunction:"cyan",Determiner:"cyan",Adverb:"cyan"},Vge=function(i){return Object.keys(i).forEach(t=>{i[t].color?i[t].color=i[t].color:B1[t]?i[t].color=B1[t]:i[t].isA.some(e=>!!B1[e]&&(i[t].color=B1[e],!0))}),i},Ige=function(i){return Object.keys(i).forEach(t=>{let e=i[t],r=e.isA.length;for(let a=0;a<r;a++){let s=e.isA[a];i[s]&&(e.isA=e.isA.concat(i[s].isA))}e.isA=function(a){return a.filter((s,o,l)=>l.indexOf(s)===o)}(e.isA)}),i},Oge=function(i){let t=Object.keys(i);return t.forEach(e=>{let r=i[e];r.notA=r.notA||[],r.isA.forEach(a=>{if(i[a]&&i[a].notA){let s=typeof i[a].notA=="string"?[i[a].isA]:i[a].notA||[];r.notA=r.notA.concat(s)}});for(let a=0;a<t.length;a++){let s=t[a];i[s].notA.indexOf(e)!==-1&&r.notA.push(s)}r.notA=function(a){return a.filter((s,o,l)=>l.indexOf(s)===o)}(r.notA)}),i},Dge=function(i){let t=Object.keys(i);return t.forEach(e=>{let r=i[e];r.lineage=[];for(let a=0;a<t.length;a++)i[t[a]].isA.indexOf(e)!==-1&&r.lineage.push(t[a])}),i},oB=function(i){return i=function(t){return Object.keys(t).forEach(e=>{let r=t[e];r.isA=r.isA||[],typeof r.isA=="string"&&(r.isA=[r.isA]),r.notA=r.notA||[],typeof r.notA=="string"&&(r.notA=[r.notA])}),t}(i),i=Ige(i),i=Oge(i),i=Vge(i),i=Dge(i)},Pge={Noun:{notA:["Verb","Adjective","Adverb"]},Singular:{isA:"Noun",notA:"Plural"},ProperNoun:{isA:"Noun"},Person:{isA:["ProperNoun","Singular"],notA:["Place","Organization","Date"]},FirstName:{isA:"Person"},MaleName:{isA:"FirstName",notA:["FemaleName","LastName"]},FemaleName:{isA:"FirstName",notA:["MaleName","LastName"]},LastName:{isA:"Person",notA:["FirstName"]},NickName:{isA:"Person",notA:["FirstName","LastName"]},Honorific:{isA:"Noun",notA:["FirstName","LastName","Value"]},Place:{isA:"Singular",notA:["Person","Organization"]},Country:{isA:["Place","ProperNoun"],notA:["City"]},City:{isA:["Place","ProperNoun"],notA:["Country"]},Region:{isA:["Place","ProperNoun"]},Address:{isA:"Place"},Organization:{isA:["Singular","ProperNoun"],notA:["Person","Place"]},SportsTeam:{isA:"Organization"},School:{isA:"Organization"},Company:{isA:"Organization"},Plural:{isA:"Noun",notA:["Singular"]},Uncountable:{isA:"Noun"},Pronoun:{isA:"Noun",notA:j1},Actor:{isA:"Noun",notA:j1},Activity:{isA:"Noun",notA:["Person","Place"]},Unit:{isA:"Noun",notA:j1},Demonym:{isA:["Noun","ProperNoun"],notA:j1},Possessive:{isA:"Noun"}},_ge={Verb:{notA:["Noun","Adjective","Adverb","Value","Expression"]},PresentTense:{isA:"Verb",notA:["PastTense","FutureTense"]},Infinitive:{isA:"PresentTense",notA:["PastTense","Gerund"]},Imperative:{isA:"Infinitive"},Gerund:{isA:"PresentTense",notA:["PastTense","Copula","FutureTense"]},PastTense:{isA:"Verb",notA:["FutureTense"]},FutureTense:{isA:"Verb"},Copula:{isA:"Verb"},Modal:{isA:"Verb",notA:["Infinitive"]},PerfectTense:{isA:"Verb",notA:"Gerund"},Pluperfect:{isA:"Verb"},Participle:{isA:"PastTense"},PhrasalVerb:{isA:"Verb"},Particle:{isA:"PhrasalVerb"},Auxiliary:{notA:["Noun","Adjective","Value"]}},kge={Value:{notA:["Verb","Adjective","Adverb"]},Ordinal:{isA:"Value",notA:["Cardinal"]},Cardinal:{isA:"Value",notA:["Ordinal"]},Fraction:{isA:"Value",notA:["Noun"]},RomanNumeral:{isA:"Cardinal",notA:["Ordinal","TextValue"]},TextValue:{isA:"Value",notA:["NumericValue"]},NumericValue:{isA:"Value",notA:["TextValue"]},Money:{isA:"Cardinal"},Percent:{isA:"Value"}},Fge={Adjective:{notA:["Noun","Verb","Adverb","Value"]},Comparable:{isA:["Adjective"]},Comparative:{isA:["Adjective"]},Superlative:{isA:["Adjective"],notA:["Comparative"]},NumberRange:{},Adverb:{notA:["Noun","Verb","Adjective","Value"]},Date:{notA:["Verb","Adverb","Preposition","Adjective"]},Month:{isA:["Date","Singular"],notA:["Year","WeekDay","Time"]},WeekDay:{isA:["Date","Noun"]},Timezone:{isA:["Date","Noun"],notA:["Adjective","ProperNoun"]},Time:{isA:["Date"],notA:["AtMention"]},Determiner:{notA:iw},Conjunction:{notA:iw},Preposition:{notA:iw},QuestionWord:{notA:["Determiner"]},Currency:{isA:["Noun"]},Expression:{notA:["Noun","Adjective","Verb","Adverb"]},Abbreviation:{},Url:{notA:["HashTag","PhoneNumber","Verb","Adjective","Value","AtMention","Email"]},PhoneNumber:{notA:["HashTag","Verb","Adjective","Value","AtMention","Email"]},HashTag:{},AtMention:{isA:["Noun"],notA:["HashTag","Verb","Adjective","Value","Email"]},Emoji:{notA:["HashTag","Verb","Adjective","Value","AtMention"]},Emoticon:{notA:["HashTag","Verb","Adjective","Value","AtMention"]},Email:{notA:["HashTag","Verb","Adjective","Value","AtMention"]},Acronym:{notA:["Plural","RomanNumeral"]},Negative:{notA:["Noun","Adjective","Value"]},Condition:{notA:["Verb","Adjective","Noun","Value"]}},Mge=oB,L1=function(i,t){Object.keys(i).forEach(e=>{t[e]=i[e]})},jge=(()=>{let i={};return L1(Pge,i),L1(_ge,i),L1(kge,i),L1(Fge,i),i=Mge(i),i})(),Bge="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",lB=Bge.split("").reduce(function(i,t,e){return i[t]=e,i},{}),aw=function(i){if(lB[i]!==void 0)return lB[i];let t=0,e=1,r=36,a=1;for(;e<i.length;t+=r,e++,r*=36);for(let s=i.length-1;s>=0;s--,a*=36){let o=i.charCodeAt(s)-48;o>10&&(o-=7),t+=o*a}return t},Lge=function(i,t,e){let r=aw(t);return r<i.symCount?i.syms[r]:e+r+1-i.symCount},Uge=function(i){let t={nodes:i.split(";"),syms:[],symCount:0};return i.match(":")&&function(e){let r=new RegExp("([0-9A-Z]+):([0-9A-Z]+)");for(let a=0;a<e.nodes.length;a++){let s=r.exec(e.nodes[a]);if(!s){e.symCount=a;break}e.syms[aw(s[1])]=aw(s[2])}e.nodes=e.nodes.slice(e.symCount,e.nodes.length)}(t),function(e){let r=[],a=(s,o)=>{let l=e.nodes[s];l[0]==="!"&&(r.push(o),l=l.slice(1));let u=l.split(/([A-Z0-9,]+)/g);for(let c=0;c<u.length;c+=2){let p=u[c],m=u[c+1];if(!p)continue;let f=o+p;if(m===","||m===void 0){r.push(f);continue}let d=Lge(e,m,s);a(d,f)}};return a(0,""),r}(t)},uB={Comparative:"true\xA6better",Superlative:"true\xA6earlier",PresentTense:"true\xA6is,sounds",Value:"true\xA6a few",Noun:"true\xA6a5b4c2f1here,ie,lit,m0no doubt,pd,tce;a,d;t,y;a,ca,o0;l,rp;a,l;d,l,rc",Copula:"true\xA6a1is,w0;as,ere;m,re",PastTense:"true\xA6be3came,d2had,lied,meant,sa2taken,w0;as,e0;nt,re;id;en,gan",Condition:"true\xA6if,lest,unless",Preposition:"true\xA6'o,-,aLbIcHdGexcept,fFiDmidQnotwithstandiRoBpSqua,sAt6u3vi2w0;/o,hereNith0;!in,oR;a,s-a-vis;n1p0;!on;like,til;h0ill,owards;an,r0;ough0u;!oJ;ans,ince,o that;',f0n2ut;!f;f,n0;!to;or,rom;espite,own,u3;hez,irca;ar1e0oAy;sides,tween;ri6;',bo7cross,ft6lo5m3propos,round,s1t0;!op;! long 0;as;id0ong0;!st;ng;er;ut",Gerund:"true\xA6accord0be0develop0go0result0stain0;ing",Negative:"true\xA6n0;ever,o0;!n,t",QuestionWord:"true\xA6how3wh0;at,e1ich,o0y;!m,se;n,re; come,'s",Plural:"true\xA6records",Conjunction:"true\xA6&,aFbBcuz,how9in caEno8o7p5supposing,t2v1wh0yet;eth9ile;ers4s;h0o;eref9o0;!uC;l0rovided that;us;r,therwi6; matt1r;!ev0;er;e0ut;cau1f0;ore;se;lthou1nd,s 0;far as,if;gh",Abbreviation:"true\xA6a0Jb0Gc0Ad08e05f02g01h00iYjWkanVlTmNnKoJpFque,rDs8t6u5v2w0;is0r,y0B;!c;a,b,e1i0ol,s,t;tro,vo;r,t;niv,safa,t;ce,e0;l,mp,nn,x;ask,e2fc,gt,i1q,r,s,t,u0;pt,rg;r,tu;c,nJp0;!t;b,d,e0;pGs,v;a,d,ennNhd,l,p,r1s0vt;!eud;ef,o0;b,f,n;ct,kla,nt;e0ov;b0e;!r;a4d,essrs,i1lle,me,r7s0t;!tr;n1s0;c,ter;!n;!j,r,sc;at,it,lb,ng,t0;!d;!s;an,d,r,u0;l,n;a,da,e,n0;c,f;on,wy;a,en,ov;e1ig,l0m,r,t,y;!a;b,m;a,g,ng,s1tc,x0;!p;p,q,t;ak,e0ist,r;c,f,pt,t;a3ca,l,m2o0pl,res,yn;!l0m1nn,rp;!o;dr;!l0pt;!if;a,c,l1r0;ig,os;!dg,vd;d4l3p2r1ss0tty,ug,ve;n,t;c,iz;prox,r,t;!ta;!j,m,v",Pronoun:"true\xA6'em,elle,h4i3me,ourselves,she5th1us,we,you0;!rself;e0ou;m,y;!l,t;e0im;!'s",Singular:"true\xA60:16;1:13;2:19;a16b0Tc0Kd0De0Af05g00hWiVjel0kitty,lTmPnOoNpHquestionGrEs9t6u4w3;ay,om03;nc10s 3;doll0Lst0N; rex,a4h3ic,ragedy,v show;ere,i2;l0x return;i6ky,omeoNt3uper bowl,yst15;ep4ri2u3;de0Yff;faTmoT;st1ze;al0i2o3;om,se;! mark;a7i1la6r4u3;dQrpoI;e3ie0Hobl0V;roga00ss releaG;te,y1;rt,te0N;bjWceJthers,verview;othi2umb1;a5ee08o3;del,m3nopo0rni2th1;!my;n,yf0;i3unch;ne;ci2nsect;ead start,o3uman right;l0me4u3;se;! run;adf0entlem6irl02laci1od,rand4u3;l0y; slam,fa3mo3;th1;an;a6ella,ly,ol0r4un3;di2;ee market,iWo3;nti1sP;mi0th1;conomy,gg,ner7ven4x3;ampTecu9;i2t;ad8e5inn1o3ragonf0ude;cumentGg3i0l0or;gy;ath,t3;ec3;tive;!dy;a9eili2h7i5o3redit card;ttage,u3;ri1sin;ty,vil w3;ar;andeli1ocol3;ate;n3rF;ary;aCel0lesJo8r5u3;n3tterf0;ti2;eakfa4o3;!th1;st;dy,tt5y3;!fri3;end;le;nki2r3;ri1;er;d5l0noma0u3;nt;ly; homin5verti3;si2;ng;em",FemaleName:"true\xA60:J3;1:J7;2:IG;3:IF;4:IX;5:IK;6:JO;7:H0;8:JG;9:JK;A:HN;B:HY;C:IT;D:IP;E:JD;F:HC;G:I0;aGRbFLcDPdCYeBOfB4gADh9Ti9Gj8Gk7Gl60m49n3No3Jp37qu36r2Ds16t0Eu0Cv02wVxiTyOzH;aLeIineb,oHsof2;e3Uf2la,ra;h3iKlIna,ynH;ab,ep;da,ma;da,h3iHra;nab;aKeJi0Fol5BuIvH;etAonDO;i0na;le0sen2;el,gm3Jn,rGJs8W;aoHme0nyi;m62yAE;aMendDYhiDFiH;dele8lJnH;if48niHo0;e,f47;a,helmi0lHma;a,ow;ka0nB;aNeKiHusa5;cIktoriBMlAole7viH;anC3enJ0;kF9tor2;da,lA9nus,rHs0;a,nHoniH4;a,iFQ;leHnesH4;nIHrH;i1y;g8rHxH5;su5te;aYeUhRiNoLrIuHy3;i,la;acIZiHu0L;c2na,sH;hBPta;nHr0H;iBNya;aJffaEOnHs6;a,gtiH;ng;!nFQra;aIeHomasi0;a,l9Po8Ares1;l2ndolwethu;g9Go88rIssH;!a,ie;eHi,ri9;sa,za;bPlNmLnJrIs6tHwa0;ia0um;a63yn;iHya;a,ka,s6;arB6e3iHmEDra;!ka;a,iH;a,t6;at6it6;a0Fcarlet3We0BhXiTkye,neza0oRtNuIyH;bIBlvi1;e,ha,mayIEni7sIzH;an3MetAie,y;anHi9;!a,e,nH;aDe;aJeH;fHl5GphH;an4;cHZr5;b2fiA8m0OnHphi1;d3ia,ja,ya;er3lJmon1nIobh8PtH;a,i;dy;lEPv2;aMeIirHo0risF7y5;a,lDK;ba,e0i5lJrH;iHrDOyl;!d8Hfa;ia,lDX;hd,iMki3nJrIu0w0yH;la,ma,na;i,le8on,ron;aIda,ia,nHon;a,on;!ya;k6mH;!aa;lJrItaye81vH;da,inj;e0ife;en1i0ma;anA5bNd3Nh1RiBkMlLmJndIrHs6vannaD;aDi0;ra,y;aHi3;nt6ra;lDKma,ome;ee0in8Ru3;in1ri0;a05e00hYiVoIuH;by,thDH;bScRghQl2KnPsJwIxH;anAXie,y;an,e0;aIeHie,lE; merBLann9ll1marDBt7;!lHnn1;iHyn;e,nH;a,d9K;da,i,na;ayy8D;hel62io;bDKer7yn;a,cIkHmas,n9Fta,ya;ki,o;helGki;ea,iannGDoH;da,n1K;an0bJem9Agi0iInHta,y0;a88ee;han83na;a,eH;cEAkaD;bi0chIe,i0mo0nHquEKvCy0;di,ia;aEIelHiB;!e,le;een4ia0;aNeMhKipaluk,oJrHute66;iHudenCQ;scil3LyamvaB;lly,rt2;ilome0oebe,ylH;is,lis;arl,ggy,nelope,r5t3;ige,m0TnKo5rvaDGtIulH;a,etAin1;ricHsy,tBY;a,e,ia;do3i06;ctav2dIfCZis6lHphCZumC3yunbileg;a,ga,iv2;eHvAC;l2tA;aWeUiMoIurHy5;!ay,ul;a,eJor,rIuH;f,r;aDeCma;ll1mi;aNcLhariBOkKlaJna,sHta,vi;anHha;ur;!y;a,iDTki;hoGk9VolH;a,eDJ;!mh;hir,lHna,risFsreC;!a,lBT;asuLdKh2i6CnJomi9rgEPtHzanin zah3;aHhal4;li1s6;cy,etA;a,e8iEV;nngu30;a09ckenz4e01iMoJrignayani,uriDDyH;a,rH;a,lNna,tG;bi0i3llBInH;a,iH;ca,ka,qD3;a,cTkaSlNmi,nLrItzi,yH;ar;aIiam,lH;anEO;!l,nB;dy,eHh,n4;nhGrva;aKdJiCPlH;iHy;cent,e;red;!gros;!e5;ae5hH;ae5el3Z;ag5EgNi,lKrH;edi79iIjem,on,yH;em,l;em,sF;an4iHliF;nHsCE;a,da;!an,han;b0DcASd0Be,g09ha,i08ja,l06n04rLsoum60tKuIv82x9IyHz4;a,bell,ra,soB9;de,rH;a,eC;h8Fild1t4;a,cYgUiKjor4l7Sn4s6tJwa,yH;!aHbe6Wja8lAE;m,nBH;a,ha,in1;!aJbCBeIja,lEna,sHt64;!a,ol,sa;!l1H;! Jh,mInH;!a,e,n1;!awit,i;aliAHcJeduarBfernIjHlui5Y;o6Ful2;anB;ecil2la3;arJeIie,oHr44ueriA;!t;!ry;et42i37;el4Ui76y;dHon,ue5;akran7y;ak,en,iHk,lo3O;a,ka,nB;a,re,s4te;daHg4;!l3A;alEd4elHge,isDBon0;ei8in1yn;el,le;a0Ne0CiYoQuLyH;d2la,nH;!a,dIeBGnHsCL;!a,eBF;a,sCJ;aCWcJel0PiFlIna,pHz;e,i7;a,u,wa;iHy;a0Se,ja,l2JnB;is,l1SrJttIuHvel4;el5is1;e,ie;aKeIi9na,rH;a86i9;lHn1t7;ei;!in1;aSbb9CdRepa,lMnJsIv2zH;!a,be5LetAz4;a,etA;!a,dH;a,sHy;ay,ey,i,y;a,iJja,lHy;iHy;aA0e;!aH;!n5F;ia,ya;!nH;!a,ne;aPda,e0iNjYla,nMoKsJtHx4y5;iHt4;c2t2;e2LlCG;la,nHra;a,ie,o3;a,or1;a,gh,laH;!ni;!h,nH;a,d3e,n5P;cOdon97iNkes6mi9Ana,rMtJurIvHxmi,y5;ern1in2;a,e54ie,yn;as6iIoH;nya,ya;fa,s6;a,isF;a,la;ey,ie,y;a04eZhXiOlAKoNrJyH;lHra;a,ee,ie;istHy6D;a,en,iIyH;!na;!e,n59;nul,ri,urtnB0;aOerNlAZmJrHzzy;a,stH;en,in;!berlImernH;aq;eHi,y;e,y;a,stC;!na,ra;aHei3ongordzol;dij1w5;el7QiKjsi,lJnIrH;a,i,ri;d3na,za;ey,i,lBDs4y;ra,s6;bi7cAJdiat7IeB2iRlQmPnyakuma19rNss6KtKvi7yH;!e,lH;a,eH;e,i8L;a6DeIhHi4NlEri0y;ar6Ber6Bie,leCrB2y;!lyn8Gri0;a,en,iHl5Soli0yn;!ma,n3VsF;a5il1;ei8Ei,l4;a,tl6L;a07eYiVoNuH;anLdKliHst63;a8HeHsF;!n8tH;!a,te;e5Ji3Jy;a,i7;!anNcelEd6RelGhan7RlLni,sIva0yH;a,ce;eHie;fHlEph5U;a,in1;eHie;en,n1;!a,e,n41;lHng;!i1ClH;!i1B;anMle0nJrIsH;i8Csi8C;i,ri;!a,elGif2CnH;a,etAiHy;!e,f2A;a,e8EiInH;a,e8DiH;e,n1;cMd1mi,nIque4Xsmin3Ovie3y8zH;min9;a9eIiH;ce,e,n1s;!lHsFt0F;e,le;inIk4lEquelH;in1yn;da,ta;lRmPnOo0rNsIvaHzaro;!a0lu,na;aJiIlaHob84;!n9N;do3;!belHdo3;!a,e,l39;a77en1i0ma;a,di3es,gr6Yji;a8elBogH;en1;a,e8iHo0se;a0na;aSeOiJoHusFyacin2B;da,ll4rten23snH;a,i9Q;lImaH;ri;aIdHlaI;a,egard;ry;ath1CiJlInriet7rmi8sH;sa,t1B;en2Sga,mi;di;bi2Dil8IlNnMrJsItHwa,yl8Iz7H;i5St4;n5Yti;iHmo51ri52;etH;!te;aDnaD;a,ey,l4;a03eXiSlQoOrKunJwH;enHyne1Q;!dolE;ay,el;acIetHiselB;a,chC;e,ieH;!la;ld1AogooH;sh;adys,enHor2yn2H;a,da,na;aKgi,lIna,ov89selHta;a,e,le;da,liH;an;!n0;mLnJorgIrH;ald3Pi,m3Ctru8B;etAi4W;a,eHna;s26vieve;ma;bIil,le,mHrnet,yG;al5Ni5;i5FrielH;a,l1;aVeSiRloOoz2rH;anJeIiH;da,eB;da,ja;!cH;esIiHoi0O;n1s61;!ca;!rH;a,encH;e,ia;en,o0;lIn0rnH;!anB;ec2ic2;jr,n7rKtHy9;emIiHma,ouma7;ha,ma,n;eh;ah,iBrah,za0;cr4Nd0Ne0Mi0Lk7l04mWn4YrTsNtMuLvH;aJelIiH;!e,ta;in0Gyn;!ngel2S;geni1la,ni45;h5Sta;mLperanKtH;eIhHrel5;er;l30r9;za;a,eralB;iHma,nest2Jyn;cHka,n;a,ka;a,eMiJmH;aHie,y;!li8;lHn1;ee,iHy;a,e,ja;lHrald;da,y;aWeUiNlMma,no3oKsJvH;a,iH;na,ra;a,ie;iHuiH;se;a,en,ie,y;a0c2da,f,nMsJzaH;!betHve7;e,h;aHe,ka;!beH;th;!a,or;anor,nH;!a;!in1na;leCs6;vi;eIiHna,wi0;e,th;l,n;aYeMh2iLjeneKoHul30;lor5Tminiq4In3FrHtt4;a,eCis,la,othHthy;ea,y;ba;an0AnaDon8x4ya;anQbPde,eOiMja,lJmetr2nHsir5K;a,iH;ce,se;a,iIla,orHphi8;es,is;a,l6D;dHrdH;re;!d5Cna;!b2HoraDra;a,d3nH;!a,e;hl2i0l0HmNnLphn1rIvi1XyH;le,na;a,by,cIia,lH;a,en1;ey,ie;a,etAiH;!ca,el1Cka,z;arHia;is;a0Se0Oh05i03lVoKrIynH;di,th2;istHy05;al,i0;lPnMrIurH;tn1E;aJd2NiHn2Nri8;!nH;a,e,n1;!l1X;cepci59n4sH;tanHuelo;ce,za;eHleC;en,tA;aJeoIotH;il51;!pat3;ir9rJudH;etAiH;a,ne;a,e,iH;ce,sZ;a3er3ndH;i,y;aReNloe,rH;isJyH;stH;al;sy,tH;a1Ren,iHy;!an1e,n1;deJlseIrH;!i9yl;a,y;li8;nMrH;isKlImH;ai8;a,eHotA;n1tA;!sa;d3elGtH;al,elG;cIlH;esAi44;el2ilH;e,ia,y;itlZlYmilXndWrOsMtHy5;aKeJhHri0;erHleCrEy;in1;ri0;li0ri0;a33sH;a32ie;a,iNlLmeJolIrH;ie,ol;!e,in1yn;lHn;!a,la;a,eHie,o7y;ne,y;na,sF;a0Hi0H;a,e,l1;is7l4;in,yn;a0Ie02iZlXoUrH;andSeQiJoIyH;an0nn;nwEok9;an3DdgLg0XtH;n2XtH;!aInH;ey,i,y;ny;etH;!t9;an0e,nH;da,na;i9y;bbi9glarIlo05nH;i7n4;ka;ancHossom,ythe;a,he;an17lja0nHsm3I;i7tH;ou;aUcky,linTni7rPssOtJulaDvH;!erlH;ey,y;hJsy,tH;e,iHy9;e,na;!anH;ie,y;!ie;nHt6yl;adIiH;ce;etAi8;ay,da;!triH;ce,z;rbJyaH;rmH;aa;a3ie,o3ra;a2Sb2Md23g1Zi1Qj5l16m0Xn09oi,r04sUtTuPvOwa,yIzH;ra,u0;aKes6gJlIseH;!l;in;un;!nH;a,na;a,i2Ir2J;drJgus1RrIsteH;ja;el2;a,ey,i,y;aahua,he0;hIi2Gja,mi7s2DtrH;id;aMlIraqHt21;at;eIi9yH;!n;e,iHy;gh;!nH;ti;iJleIo6pi7;ta;en,n1tA;aHelG;!n1J;a00dje5eYgUiSjQnJohito,toHya;inetAnH;el5ia;!aKeIiHmJ;e,ka;!mHtA;ar4;!belIliFmU;sa;!le;a,eliH;ca;ka,sHta;a,sa;elHie;a,iH;a,ca,n1qH;ue;!tA;te;! JbImHstasiNya;ar2;el;cla3jul2pau5;aLberKeliJiHy;e,l2naH;!ta;a,ja;!ly;hGiIl2nB;da;a,ra;le;aWba,ePiMlKma,thJyH;a,c2sH;a,on,sa;ea;iHys0N;e,s0M;a,cIn1sHza;a,e,ha,on,sa;e,ia,ja;c2is6jaKksaKna,sJxH;aHia;!nd3;ia,saH;nd3;ra;ia;i0nIyH;ah,na;a,is,naDoud;la;c6da,leCmNnLsH;haDlH;inHyY;g,n;!h;a,o,slH;ey;ee;en;at6g4nIusH;ti0;es;ie;aWdiTelMrH;eJiH;anMenH;a,e,ne;an0;na;!aLeKiIyH;nn;a,n1;a,e;!ne;!iH;de;e,lEsH;on;yn;!lH;i8yn;ne;aKbIiHrL;!gaK;ey,i9y;!e;gaH;il;dKliyJradhIs6;ha;ya;ah;a,ya",Actor:"true\xA6aJbGcFdCengineIfAgardenIh9instructPjournalLlawyIm8nurse,opeOp5r3s1t0;echnCherapK;ailNcientJecretary,oldiGu0;pervKrgeon;e0oofE;ceptionGsearC;hotographClumbColi1r0sychologF;actitionBogrammB;cem6t5;echanic,inist9us4;airdress8ousekeep8;arm7ire0;fight6m2;eputy,iet0;ici0;an;arpent2lerk;ricklay1ut0;ch0;er;ccoun6d2ge7r0ssis6ttenda7;chitect,t0;ist;minist1v0;is1;rat0;or;ta0;nt",Honorific:"true\xA6a01bYcQdPeOfiJgIhon,jr,king,lHmCoffic00p7queen,r3s0taoiseach,vice6;e1fc,gt,ir,r,u0;ltRpt,rg;cond liInBrgeaJ;abbi,e0;ar1p9s,v0;!erend; admirX;astOhd,r0vt;esideDi1of0;!essM;me mini4nce0;!ss;a3essrs,i2lle,me,r1s0;!tr;!s;stK;gistrate,j,r6yF;i3lb,t;en,ov;eld mar3rst l0;ady,i0;eutena0;nt;shG;sq,xcellency;et,oct6r,utchess;apt6hance4mdr,o0pl;lonel,m2ngress0unci3;m0wom0;an;dr,mand5;ll0;or;!ain;ldg,rig0;!adi0;er;d0sst,tty,yatullah;j,m0v;!ir0;al",SportsTeam:"true\xA60:1A;1:1H;2:1G;a1Eb16c0Td0Kfc dallas,g0Ihouston 0Hindiana0Gjacksonville jagua0k0El0Bm01newToQpJqueens parkIreal salt lake,sAt5utah jazz,vancouver whitecaps,w3yW;ashington 3est ham0Rh10;natio1Oredski2wizar0W;ampa bay 6e5o3;ronto 3ttenham hotspur;blue ja0Mrapto0;nnessee tita2xasC;buccanee0ra0K;a7eattle 5heffield0Kporting kansas0Wt3;. louis 3oke0V;c1Frams;marine0s3;eah15ounG;cramento Rn 3;antonio spu0diego 3francisco gJjose earthquak1;char08paA; ran07;a8h5ittsburgh 4ortland t3;imbe0rail blaze0;pirat1steele0;il3oenix su2;adelphia 3li1;eagl1philNunE;dr1;akland 3klahoma city thunder,rlando magic;athle0Mrai3;de0; 3castle01;england 7orleans 6york 3;city fc,g4je0FknXme0Fred bul0Yy3;anke1;ian0D;pelica2sain0C;patrio0Brevolut3;ion;anchester Be9i3ontreal impact;ami 7lwaukee b6nnesota 3;t4u0Fvi3;kings;imberwolv1wi2;rewe0uc0K;dolphi2heat,marli2;mphis grizz3ts;li1;cXu08;a4eicesterVos angeles 3;clippe0dodDla9; galaxy,ke0;ansas city 3nE;chiefs,roya0E; pace0polis colU;astr06dynamo,rockeTtexa2;olden state warrio0reen bay pac3;ke0;.c.Aallas 7e3i05od5;nver 5troit 3;lio2pisto2ti3;ge0;broncZnuggeM;cowbo4maver3;ic00;ys; uQ;arCelKh8incinnati 6leveland 5ol3;orado r3umbus crew sc;api5ocki1;brow2cavalie0india2;bengaWre3;ds;arlotte horAicago 3;b4cubs,fire,wh3;iteB;ea0ulR;diff3olina panthe0; c3;ity;altimore 9lackburn rove0oston 5rooklyn 3uffalo bilN;ne3;ts;cel4red3; sox;tics;rs;oriol1rave2;rizona Ast8tlanta 3;brav1falco2h4u3;nited;aw9;ns;es;on villa,r3;os;c5di3;amondbac3;ks;ardi3;na3;ls",Uncountable:"true\xA60:1J;a1Qb1Ic19d16e0Zf0Tg0Mh0Hi0Dj0Cknowled1Pl07mXnWoVpRrMsBt6vi5w1;a3ea0Ai2oo1;d,l;ldlife,ne;rmth,t0;neg16ol0Btae;e4h3oothpaste,r1una;affSou1;ble,sers,t;ermod1Lund0;a,nnis;a9cene09eri0Wh8il7kittl0Wnow,o6p4t2u1;g0Znshi0P;ati1Ke1;am,el;ace1De1;ci0Red;ap,cc0;k,v0;eep,ingl0O;d0Cfe17l1nd,tish;m10t;a4e2ic1;e,ke0L;c1laxa0Hsearch;ogni0Grea0G;bi0Hin;aOe3hys17last8o1ress03;l1rk,w0;it15y9;a11trY;bstetr13il,xygen;ational securi0Vews;a8e6ilk,o3u1;mps,s1;ic;n1o0G;ey,o1;gamy;a1chan0V;sl03t;chine1il,themat0T; learn09ry;aught0e3i2ogi0Qu1;ck,g0G;ce,ghtn06ngui0OteratL;a1isK;th0;ewel8usti0J;ce,mp1nformaStself;a1ortan0H;ti1;en0F;a4isto3o1;ck1mework,n1spitali09;ey;ry;ir,libut,ppiB;ene4o2r1um,ymna0B;aAound;l1ssip;d,f; 1t08;editOpo1;ol;i5lour,o2urnit1;ure;od,rgive1uri0wl;ne1;ss;c7sh;conomZduca6lectr5n3quip4thZvery1;body,o1thF;ne;joy1tertain1;ment;iciNonU;tiG;ar2iabet1raugh2;es;ts;a8elcius,h4ivPl3o1urrency;al,ld w1nfusiBttB;ar;assMoth3;aos,e1;e2w1;ing;se;r5sh;a5eef,i2lood,owls,read,utt0;er;lliar2s1;on;ds;g1ss;ga1;ge;c6dvi5ero3ir2mnes1rt,thlet8;ty;craft;b5d1naut5;ynam4;ce;id,ou1;st1;ics",Infinitive:"true\xA60:6S;1:76;2:5C;3:74;4:73;5:67;6:6F;7:6Y;8:6Q;9:72;A:70;B:5X;C:6X;D:6L;E:77;F:5B;a6Kb66c57d4De3Xf3Jg3Dh37i2Uj2Sk2Ql2Hm26n23o1Yp1Jr0Rs06tYuTvOwHyG;awn,e31ield;aJe1Zhist6iIoGre6D;nd0rG;k,ry;pe,sh,th0;lk,nHrGsh,tDve;n,raE;d0t;aJiHoG;te,w;eGsC;!w;l6Jry;nHpGr4se;gra4Pli41;dGi9lo5Zpub3Q;erGo;mi5Cw1I;aMeLhKig5SoJrHuGwi7;ne,rn;aGe0Mi5Uu7y;de,in,nsf0p,v5J;r2ZuD;ank,reatB;nd,st;ke pa53lk,rg1Qs9;aZcWeVhTi4Dkip,lSmRnee3Lo52pQtJuGwitD;bmCck,ff0gge7ppHrGspe5;ge,pri1rou4Zvi3;ly,o36;aLeKoJrHuG;dy,mb6;aFeGi3;ngthBss,tD;p,re;m,p;in,ke,r0Qy;la58oil,rink6;e1Zi6o3J;am,ip;a2iv0oG;ck,rtBut;arDem,le5n1r3tt6;aHo2rG;atDew;le,re;il,ve;a05eIisk,oHuG;in,le,sh;am,ll;a01cZdu8fYgXje5lUmTnt,pQquPsKtJvGwa5V;eGiew,o36;al,l,rG;se,t;aFi2u44;eJi7oItG;!o2rG;i5uc20;l3rt;mb6nt,r3;e7i2;air,eHlGo43r0K;a8y;at;aFemb0i3Zo3;aHeGi3y;a1nt;te,x;a5Dr0J;act1Yer,le5u1;a13ei3k5PoGyc6;gni2Cnci6rd;ch,li2Bs5N;i1nG;ge,k;aTerSiRlOoMrIuG;b21ll,mp,rGsh;cha1s4Q;ai1eIiEoG;cGdu8greAhibCmi1te7vi2W;eAlaim;di5pa2ss,veE;iEp,rtr46sGur;e,t;aHead,uG;g,n4;n,y;ck,le;fo34mCsi7;ck,iErt4Mss,u1;bJccur,ff0pera9utweIverGwe;co47lap,ta22u1wG;helm;igh;ser3taF;eHotG;e,i8;ed,gle5;aMeLiIoHuG;ltip3Grd0;nit13ve;nHrr12sreprG;eseE;d,g6us;asu2lt,n0Nr4;intaFna4rHtG;ch,t0;ch,kGry;et;aMeLiJoGu1C;aHck,oGve;k,sB;d,n;ft,g35ke,mCnk,st2YveG;!n;a2Fc0Et;b0Nck,uG;gh,nD;iGno34;ck,ll,ss;am,oFuG;d4mp;gno2mQnGss3H;cOdica9flu0MhNsKtIvG;eGol3;nt,st;erGrodu8;a5fe2;i7tG;aGru5;ll;abCibC;lu1Fr1D;agi24pG;lemeEo22ro3;aKeIi2oHuG;nt,rry;n02pe,st;aGlp;d,t;nd6ppBrm,te;aKloAove1PrIuG;arGeAi15;ant39d;aGip,ow,umb6;b,sp;in,th0ze;aReaQiOlMoJrHuncG;ti3J;acGeshB;tu2;cus,lHrG;ce,eca7m,s30;d,l24;a1ZoG;at,od,w;gu2lGni1Xt,x;e,l;r,tu2;il,stBvG;or;a15cho,le5mSnPstNvalua9xG;a0AcLerKi7pGte19;a18eHi2laFoGreA;rt,se;ct,riG;en8;ci1t;el,han4;abGima9;li1J;ab6couXdHfor8ga4han8j03riDsu2t0vG;isi2Vy;!u2;body,er4pG;hasiGow0;ze;a07eUiLoKrHuG;mp;aHeAiG;ft;g,in;d4ubt;ff0p,re5sHvG;iZor8;aKcHliGmiApl1Btingui14;ke;oGuA;uGv0;ra4;gr1YppG;ear,ro3;cOeNfLliv0ma0Fny,pKsHterG;mi0G;cribe,er3iHtrG;oy;gn,re;a0Be0Ai5osC;eGi0By;at,ct;m,pB;iIlHrG;ea1;a2i06;de;ma4n8rGte;e,kB;a0Ae09h06i9l04oJrG;aHeGoAu0Hy;a9dC;ck,ve;llZmSnHok,py,uGv0;gh,nt;cePdu5fMsKtIvG;eGin8;rt,y;aFin0VrG;a7ibu9ol;iGtitu9;d0st;iHoGroE;rm;gu2rm;rn;biLfoKmaJpG;a2laF;in;re;nd;rt;ne;ap1e5;aGip,o1;im,w;aHeG;at,ck,w;llen4n4r4se;a1nt0;ll,ncIrGt0u1;eGry;!en;el;aSePloOoMrIuG;lGry;ly;igHuG;sh;htB;en;a7mb,o7rrGth0un8;ow;ck;ar,lHnefCtrG;ay;ie3ong;ng,se;band0Jc0Bd06ffo05gr04id,l01mu1nYppTrQsKttGvoid,waC;acIeHra5;ct;m0Fnd;h,k;k,sG;eIiHocia9uG;me;gn,st;mb6rt;le;chHgGri3;ue;!i3;eaJlIroG;aDve;ch;aud,y;l,r;noun8sw0tG;icipa9;ce;lHt0;er;e4ow;ee;rd;aRdIju7mCoR;it;st;!reA;ss;cJhie3knowled4tiva9;te;ge;ve;eIouEu1;se;nt;pt;on",Unit:"true\xA60:19;a14b12c0Od0Ne0Lf0Gg0Ch09in0Hjoule0k02l00mNnMoLpIqHsqCt7volts,w6y4z3\xB02\xB51;g,s;c,f,n;b,e2;a0Nb,d0Dears old,o1;tt0H;att0b;able4b3d,e2on1sp;!ne0;a2r0D;!l,sp;spo04; ft,uare 1;c0Id0Hf3i0Fkilo0Jm1ya0E;e0Mil1;e0li0H;eet0o0D;t,uart0;ascals,e2i1ou0Pt;c0Mnt0;rcent,t02;hms,uYz;an0JewtT;/s,b,e9g,i3l,m2p1\xB2,\xB3;h,s;!\xB2;!/h,cro5l1;e1li08;! pFs1\xB2;! 1;anEpD;g06s0B;gQter1;! 2s1;! 1;per second;b,i00m,u1x;men0x0;b,elvin0g,ilo2m1nR;!/h,ph,\xB2;byZgXmeter1;! p2s1;! p1;er1; hour;e1g,r0z;ct1rtz0;aXogQ;al2b,igAra1;in0m0;!l1;on0;a4emtPl2t1;\xB2,\xB3; oz,uid ou1;nce0;hrenheit0rad0;b,x1;abyH;eciCg,l,mA;arat0eAg,m9oulomb0u1;bic 1p0;c5d4fo3i2meAya1;rd0;nch0;ot0;eci2;enti1;me4;!\xB2,\xB3;lsius0nti1;g2li1me1;ter0;ram0;bl,y1;te0;c4tt1;os1;eco1;nd0;re0;!s",Organization:"true\xA60:46;a3Ab2Qc2Ad21e1Xf1Tg1Lh1Gi1Dj19k17l13m0Sn0Go0Dp07qu06rZsStFuBv8w3y1;amaha,m0Xou1w0X;gov,tu2S;a3e1orld trade organizati41;lls fargo,st1;fie22inghou16;l1rner br3D;-m11gree31l street journ25m11;an halNeriz3Wisa,o1;dafo2Gl1;kswagLvo;bs,kip,n2ps,s1;a tod2Rps;es35i1;lev2Xted natio2Uv; mobi2Kaco bePd bMeAgi frida9h3im horto2Tmz,o1witt2W;shiba,y1;ota,s r Y;e 1in lizzy;b3carpen33daily ma2Xguess w2holli0rolling st1Ms1w2;mashing pumpki2Ouprem0;ho;ea1lack eyed pe3Fyrds;ch bo1tl0;ys;l2s1;co,la m12;efoni07us;a6e4ieme2Gnp,o2pice gir5ta1ubaru;rbucks,to2N;ny,undgard1;en;a2Rx pisto1;ls;few25insbu26msu1X;.e.m.,adiohead,b6e3oyal 1yan2X;b1dutch she4;ank;/max,aders dige1Ed 1vl32;bu1c1Uhot chili peppe2Klobst28;ll;c,s;ant2Vizno2F;an5bs,e3fiz24hilip morrBi2r1;emier27octer & gamb1Rudenti14;nk floyd,zza hut;psi28tro1uge08;br2Qchina,n2Q; 2ason1Xda2G;ld navy,pec,range juli2xf1;am;us;a9b8e5fl,h4i3o1sa,wa;kia,tre dame,vart1;is;ke,ntendo,ss0K;l,s;c,st1Etflix,w1; 1sweek;kids on the block,york08;a,c;nd1Us2t1;ional aca2Fo,we0Q;a,cYd0O;aAcdonald9e5i3lb,o1tv,yspace;b1Nnsanto,ody blu0t1;ley crue,or0O;crosoft,t1;as,subisO;dica3rcedes2talli1;ca;!-benz;id,re;'s,s;c's milk,tt13z1Y;'ore09a3e1g,ittle caesa1Ktd;novo,x1;is,mark; pres5-z-boy,bour party;atv,fc,kk,m1od1K;art;iffy lu0Lo3pmorgan1sa;! cha1;se;hnson & johns1Sy d1R;bm,hop,n1tv;c,g,te1;l,rpol; & m,asbro,ewlett-packaTi3o1sbc,yundai;me dep1n1J;ot;tac1zbollah;hi;eneral 6hq,l5mb,o2reen d0Iu1;cci,ns n ros0;ldman sachs,o1;dye1g0B;ar;axo smith kliZencore;electr0Im1;oto0V;a3bi,da,edex,i1leetwood mac,oGrito-l0A;at,nancial1restoV; tim0;cebook,nnie mae;b06sa,u3xxon1; m1m1;ob0H;!rosceptics;aiml0Ae5isney,o3u1;nkin donuts,po0Wran dur1;an;j,w j1;on0;a,f leppa3ll,p2r spiegZstiny's chi1;ld;eche mode,t;rd;aEbc,hBi9nn,o3r1;aigsli5eedence clearwater reviv1ossra05;al;!ca c5l4m1o0Ast05;ca2p1;aq;st;dplMgate;ola;a,sco1tigroup;! systems;ev2i1;ck fil-a,na daily;r0Hy;dbury,pital o1rl's jr;ne;aGbc,eCfAl6mw,ni,o2p,r1;exiteeWos;ei3mbardiJston 1;glo1pizza;be;ng;ack & deckFo2ue c1;roX;ckbuster video,omingda1;le; g1g1;oodriN;cht3e ge0n & jer2rkshire hathaw1;ay;ryH;el;nana republ3s1xt5y5;f,kin robbi1;ns;ic;bXcSdidRerosmith,ig,lLmFnheuser-busEol,ppleAr7s3t&t,v2y1;er;is,on;hland2s1;n,ociated F; o1;il;by4g2m1;co;os; compu2bee1;'s;te1;rs;ch;c,d,erican3t1;!r1;ak; ex1;pre1;ss; 4catel2t1;air;!-luce1;nt;jazeera,qae1;da;as;/dc,a3er,t1;ivisi1;on;demy of scienc0;es;ba,c",Demonym:"true\xA60:16;1:13;a0Wb0Nc0Cd0Ae09f07g04h02iYjVkTlPmLnIomHpDqatari,rBs7t5u4v3wel0Rz2;am0Fimbabwe0;enezuel0ietnam0H;g9krai1;aiwThai,rinida0Iu2;ni0Qrkmen;a4cot0Ke3ingapoOlovak,oma0Tpa05udRw2y0X;edi0Kiss;negal0Br08;mo0uU;o6us0Lw2;and0;a3eru0Hhilipp0Po2;li0Ertugu06;kist3lesti1na2raguay0;ma1;ani;amiZi2orweP;caragu0geri2;an,en;a3ex0Mo2;ngo0Erocc0;cedo1la2;gasy,y08;a4eb9i2;b2thua1;e0Dy0;o,t02;azakh,eny0o2uwaiti;re0;a2orda1;ma0Bp2;anN;celandic,nd4r2sraeli,ta02vo06;a2iT;ni0qi;i0oneV;aiDin2ondur0unN;di;amDe2hanai0reek,uatemal0;or2rm0;gi0;i2ren7;lipino,n4;cuadoVgyp6ngliJsto1thiopi0urope0;a2ominXut4;niH;a9h6o4roa3ub0ze2;ch;ti0;lom2ngol5;bi0;a6i2;le0n2;ese;lifor1m2na3;bo2eroo1;di0;angladeshi,el8o6r3ul2;gaG;aziBi2;ti2;sh;li2s1;vi0;aru2gi0;si0;fAl7merBngol0r5si0us2;sie,tr2;a2i0;li0;gent2me1;ine;ba1ge2;ri0;ni0;gh0r2;ic0;an",Possessive:"true\xA6anyAh5its,m3noCo1sometBthe0yo1;ir1mselves;ur0;!s;i8y0;!se4;er1i0;mse2s;!s0;!e0;lf;o1t0;hing;ne",Currency:"true\xA6$,aud,bScQdLeurKfJgbp,hkd,iIjpy,kGlEp8r7s3usd,x2y1z0\xA2,\xA3,\xA5,\u0434\u0435\u043D,\u043B\u0432,\u0440\u0443\u0431,\u0E3F,\u20A1,\u20A8,\u20AC,\u20AD,\uFDFC;lotyS\u0142;en,uanR;af,of;h0t5;e0il5;k0q0;elM;iel,oubleLp,upeeL;e2ound st0;er0;lingI;n0soH;ceGn0;ies,y;e0i8;i,mpi7;n,r0wanzaCyatC;!onaBw;ls,nr;ori7ranc9;!o8;en3i2kk,o0;b0ll2;ra5;me4n0rham4;ar3;ad,e0ny;nt1;aht,itcoin0;!s",City:"true\xA60:73;1:61;2:6G;3:5U;4:5R;a68b54c4Id4Ae46f3Yg3Jh38i2Zj2Uk2Dl22m1Kn19o16p0Uq0Sr0Ls01tPuOvLwDxiBy9z5;a7h5i4Muri4O;a5e5ongsh0;ng3J;greb,nzib5G;ang2e5okoha3Uunfu;katerin3Jrev0;a5n0O;m5Hn;arsBeAi6roclBu5;h0xi,zh5P;c7n5;d5nipeg,terth4;hoek,s1K;hi5Zkl3C;l63xford;aw;a6ern2i5ladivost5Molgogr6K;en3lni6R;lenc6Dncouv2Yr3ughn;lan bat1Drumqi,trecht;aDbilisi,eCheBi9o8r7u5;l21n63r5;in,ku;ipoli,ondh62;kyo,m34ron1QulouS;an5jua3l2Zmisoa6Era3;j4Xshui; hag65ssaloni2L;gucigal28hr0l av1W;briz,i6llinn,mpe5Ang5rtu,shk2X;i2Msh0;an,chu1n0p2Iyu0;aEeDh8kopje,owe1It7u5ydney;ra5zh51;ba0Jt;aten is59ockholm,rasbou6Auttga31;an8e6i5;jiazhua1llo1m60y0;f54n5;ya1zh4L;gh3Ot4U;att4Ao1Yv49;cramen18int DlBn5o paulo,ppo3Wrajevo; 7aa,t5;a 5ia3Io domin3I;a3fe,m1O;antonCdie3Gfrancisco,j5ped3Ssalv8;o5u0;se;em,v5z2B;ad0I;lou59peters29;aAe9i7o5;me,sar5t5A;io;ga,o5yadh;! de janei3I;cife,ykjavik;b4Uip4lei2Mnc2Swalpindi;ingdao,u5;ez2i0Q;aEeDhCiBo8r7u6yong5;ya1;eb5Aya1;ag54etor53;rt5zn0; 5la4Fo;au prin0Nelizabe29sa05;ls3Srae5Ctts2B;iladelph4Ynom pe1Doenix;r26tah tik3I;ler00naji,r4Pt5;na,r36;ak47des0Lm1Rr6s5ttawa;a3Ylo;an,d07;a8ew6i5ovosibir1Oyc;ng2Hs; 5cast39;del27orlea46taip16york;g8iro4Xn5pl2Zshv36v0;ch6ji1t5;es,o1;a1o1;a6o5p4;ya;no,sa0Y;aFeCi9o6u5;mb2Cni28sc40;gadishu,nt6s5;c17ul;evideo,re31;ami,l6n18s5;kolc,sissauga;an,waukee;cca,d5lbour2Pmph41;an,ell5i3;in,\xEDn;cau,drAkass2Tl9n8r5shh4A;aca6ib5rakesh,se2N;or;i1Ty;a4EchEdal12i47;mo;id;aCeiAi8o6u5vRy2;anLckn0Rdhia3;n5s angel28;d2g bea1O;brev2De3Kma5nz,sb2verpo2A;!ss29;c5pzig;est0C; p6g5ho2Yn0Gusan27;os;az,la35;aHharFiClaipeBo9rak0Hu7y5;iv,o5;to;ala lump4n5;mi1sh0;be,hi0Llka2Zpavog4si5wlo2;ce;da;ev,n5rkuk;gSsha5;sa;k5toum;iv;bIdu3llakuric0Tmpa3Gn6ohsiu1ra5un1Lwaguc0T;c0Sj;d5o,p4;ah1Vy;a7e6i5ohannesZ;l1Xn0;dd37rusalem;ip4k5;ar2J;bad0mph1QnBrkutYs8ta01z5\u0307zm7;m6tapala5;pa;ir;fah0l6tanb5;ul;am2Zi2I;che2d5;ianap2Lo21;aBe8o5yder2W; chi mi6ms,nolulu,u5;st2;nh;f6lsin5rakli2;ki;ei;ifa,lifax,m7n5rb1Dva3;gAnov5oi;er;bu2Wilt2;aFdanEenDhCiPlasgBo9raz,u5;a5jr21;dal6ng5yaquil;zh1H;aja2Lupe;ld coa18then5;bu2P;ow;ent;e0Toa;sk;lw7n5za;dhi5gt1C;nag0S;ay;aisal26es,o8r6ukuya5;ma;ankfu5esno;rt;rt5sh0; wor6ale5;za;th;d5indhov0Nl paso;in5mont2;bur5;gh;aAe8ha0Visp4o7resd0Ju5;b5esseldorf,rb0shanbe;ai,l0G;ha,nggu0rtmu11;hradRl5troit;hi;donghHe5k08li0masc1Xr es sala1HugavpiY;gu,je2;aKebu,hAo5raio03uriti1P;lo7n6penhag0Ar5;do1Nk;akLst0V;gVm5;bo;aBen8i6ongqi1ristchur5;ch;ang m7ca5ttago1;go;g6n5;ai;du,zho1;n5ttogr12;digarh,g5;ch8sha,zh06;i9lga8mayenJn6pe town,r5;acCdiff;ber18c5;un;ry;ro;aUeMhJirmingh0ToIr9u5;chareRdapeRenos air7r5s0tu0;g5sa;as;es;a9is6usse5;ls;ba6t5;ol;ne;sil0Mtisla7zzav5;il5;le;va;goZst2;op6ubaneshw5;ar;al;iBl9ng8r5;g6l5n;in;en;aluru,hazi;fa5grade,o horizonte;st;ji1rut;ghd0BkGnAot9r7s6yan n4;ur;el,r07;celo3ranquil09;na;ou;du1g6ja lu5;ka;alo6k5;ok;re;ng;ers5u;field;a04b01cc00ddis abaZgartaYhmedWizawl,lQmNnHqaZrEsBt7uck5;la5;nd;he7l5;an5;ta;ns;h5unci2;dod,gab5;at;li5;ngt2;on;a6chora5kaNtwerp;ge;h7p5;ol5;is;eim;aravati,m0s5;terd5;am; 8buquerq7e5giers,maty;ppo,xandr5;ia;ue;basrah al qadim5mawsil al jadid5;ah;ab5;ad;la;ba;ra;idj0u dha5;bi;an;lbo6rh5;us;rg",Country:"true\xA60:39;1:2M;a2Xb2Ec22d1Ye1Sf1Mg1Ch1Ai14j12k0Zl0Um0Gn05om3DpZqat1KrXsKtCu6v4wal3yemTz2;a25imbabwe;es,lis and futu2Y;a2enezue32ietnam;nuatu,tican city;.5gTkraiZnited 3ruXs2zbeE;a,sr;arab emirat0Kkingdom,states2;! of am2Y;k.,s.2; 28a.;a7haBimor-les0Bo6rinidad4u2;nis0rk2valu;ey,me2Ys and caic1U; and 2-2;toba1K;go,kel0Znga;iw2Wji2nz2S;ki2U;aCcotl1eBi8lov7o5pa2Cri lanka,u4w2yr0;az2ed9itzerl1;il1;d2Rriname;lomon1Wmal0uth 2;afr2JkLsud2P;ak0en0;erra leoEn2;gapo1Xt maart2;en;negKrb0ychellY;int 2moa,n marino,udi arab0;hele25luc0mart20;epublic of ir0Dom2Duss0w2;an26;a3eHhilippinTitcairn1Lo2uerto riM;l1rtugE;ki2Cl3nama,pua new0Ura2;gu6;au,esti2;ne;aAe8i6or2;folk1Hth3w2;ay; k2ern mariana1C;or0N;caragua,ger2ue;!ia;p2ther19w zeal1;al;mib0u2;ru;a6exi5icro0Ao2yanm05;ldova,n2roc4zamb9;a3gol0t2;enegro,serrat;co;c9dagasc00l6r4urit3yot2;te;an0i15;shall0Wtin2;ique;a3div2i,ta;es;wi,ys0;ao,ed01;a5e4i2uxembourg;b2echtenste11thu1F;er0ya;ban0Hsotho;os,tv0;azakh1Ee3iriba03o2uwait,yrgyz1E;rWsovo;eling0Jnya;a2erF;ma15p1B;c6nd5r3s2taly,vory coast;le of m19rael;a2el1;n,q;ia,oI;el1;aiSon2ungary;dur0Mg kong;aAermany,ha0Pibralt9re7u2;a5ern4inea2ya0O;!-biss2;au;sey;deloupe,m,tema0P;e2na0M;ce,nl1;ar;bTmb0;a6i5r2;ance,ench 2;guia0Dpoly2;nes0;ji,nl1;lklandTroeT;ast tim6cu5gypt,l salv5ngl1quatorial3ritr4st2thiop0;on0; guin2;ea;ad2;or;enmark,jibou4ominica3r con2;go;!n B;ti;aAentral african 9h7o4roat0u3yprQzech2; 8ia;ba,racao;c3lo2morPngo-brazzaville,okFsta r03te d'ivoiK;mb0;osD;i2ristmasF;le,na;republic;m2naTpe verde,yman9;bod0ero2;on;aFeChut00o8r4u2;lgar0r2;kina faso,ma,undi;azil,itish 2unei;virgin2; is2;lands;liv0nai4snia and herzegoviGtswaGuvet2; isl1;and;re;l2n7rmuF;ar2gium,ize;us;h3ngladesh,rbad2;os;am3ra2;in;as;fghaFlCmAn5r3ustr2zerbaijH;al0ia;genti2men0uba;na;dorra,g4t2;arct6igua and barbu2;da;o2uil2;la;er2;ica;b2ger0;an0;ia;ni2;st2;an",Region:"true\xA60:2M;1:2S;2:2J;a2Pb2Cc1Yd1Tes1Sf1Qg1Kh1Gi1Bj17k12l0Zm0On07o05pZqWrTsKtFuCv9w5y3zacatec2T;akut0o0Du3;cat2k07;a4est 3isconsin,yomi1L;bengal,vi6;rwick2Ashington3;! dc;er4i3;rgin0;acruz,mont;dmurt0t3;ah,tar3; 2Ka0W;a5e4laxca1Qripu1Wu3;scaDva;langa1nnessee,x2E;bas0Um3smNtar24;aulip2Cil nadu;a8i6o4taf10u3ylh1E;ffYrr03s19;me1Bno1Puth 3;cVdU;ber0c3kkim,naloa;hu2ily;n4skatchew2xo3;ny; luis potosi,ta catari1;a3hode9;j3ngp06;asth2shahi;ingh24u3;e3intana roo;bec,en5reta0Q;ara7e5rince edward3unjab; i3;sl0A;i,nnsylv3rnambu0A;an0;!na;axa0Xdisha,h3klaho1Zntar3reg6ss0Ax0F;io;aIeDo5u3;evo le3nav0V;on;r3tt16va scot0;f8mandy,th3; 3ampton15;c5d4yo3;rk13;ako1M;aroli1;olk;bras1Lva0Bw3; 4foundland3;! and labrador;brunswick,hamp0Wjers3mexiRyork state;ey;galOyarit;a9eghala0Mi5o3;nta1r3;dov0elos;ch5dlanCn4ss3zor11;issippi,ouri;as geraOneso18;ig2oac2;dhy12harasht0Gine,ni4r3ssachusetts;anhao,i el,ylF;p3toba;ur;anca0Ie3incoln0IouisH;e3iR;ds;a5e4h3omi;aka06ul1;ntucky,ra01;bardino,lmyk0ns0Qr3;achay,el0nata0X;alis5har3iangxi;kh3;and;co;daho,llino6n3owa;d4gush3;et0;ia1;is;a5ert4i3un2;dalFm0D;fordZ;mpYrya1waii;ansu,eorg0lou7oa,u3;an4erre3izhou,jarat;ro;ajuato,gdo3;ng;cesterS;lori3uji2;da;sex;ageTe6o4uran3;go;rs3;et;lawaLrbyK;aEeaDh8o3rimea ,umbr0;ahui6l5nnectic4rsi3ventry;ca;ut;i02orado;la;e4hattisgarh,i3uvash0;apQhuahua;chn4rke3;ss0;ya;ra;lFm3;bridge6peche;a8ihar,r7u3;ck3ryat0;ingham3;shi3;re;emen,itish columb0;h0ja cal7lk6s3v6;hkorto3que;st2;an;ar0;iforn0;ia;dygea,guascalientes,lAndhr8r4ss3;am;izo1kans4un3;achal 6;as;na;a 3;pradesh;a5ber4t3;ai;ta;ba4s3;ka;ma",Place:"true\xA6a0Eb0Bc04d03e02f00gVhUiRjfk,kOlMmJneGoFpBque,rd,s9t6u5v4w1y0;akutOyz;ake isFis1y0;!o;!c;a,ostok,t;laanbaatar,p02safa,t;ahiti,e1he 0;bronx,hamptons;nn,x;a0fo,oho,t,under7yd;khalNsk;a2e1h0itcairn;l,x;k,nnN;!cif04;kla,nt,rd;b1w eng0;land;!r;a1co,i0t,uc;dNnn;gadZlibu,nhattZ;a0gw,hr;s,x;an1osrae,rasnoyar0ul;sk;!s;a1cn,da,nd0st;ianRochina;!x;arlem,kg,nd,oHwy;a3re0;at 0enwich;brita0lakH;in;!y village;co,l0ra;!a;urope,vergladC;ak,en,fw,ist,own4xb;al5dg,gk,h2l1o0rA;lo,nn;!t;a1ina0uuk;town;morro,tham;!if;cn,e1kk,l0rooklyn;vd;l air,verly hills;frica,lta,m7n3r2sia,tl1ve,zor0;es;!ant2;ct1iz;adyr,tarct0;ic0; oce0;an;ericas,s",MaleName:"true\xA60:E4;1:D5;2:DN;3:AX;4:D1;5:CF;6:B5;7:CV;8:C7;9:DJ;A:DK;B:A5;C:C1;aCNbBKcAId9Ge8Mf84g7Hh6Ti6Dj5Dk51l4Cm34n2So2Mp2Equ2Cr1Ls11t0Eu0Dv07wTxSyIzD;aDor0;cDh9Skaria,n5V;hEkD;!aCL;ar5VeCK;aLoFuD;sDu2JvBX;if,uf;nFsEusD;ouf,sD;ef;aDg;s,tD;an,h0;hli,nBLssX;avi3ho4;aMeKiFoDyaC1;jcie8Blfgang,odrow,utD;!er;lDnst1;bFey,frD0lD;aBCiD;am,e,s;e9Eur;i,nde6sD;!l8t1;de,lErrAyD;l1ne;lDt3;aA9y;aGiDladimir,ojte7Y;cEha0kt68nceDrgAIva0;!nt;e3Ut66;lentDnA4;in4X;ghBUlyss5Bnax,sm0;aXeShOiMoHrFuEyD;!l3ro7s1;n9r5B;avAVeDist0oy,um0;ntANv5Yy;bGdFmDny;!as,mDoharu;aCSie,y;!d;iBy;mDt5;!my,othy;adFeoEia8FomD;!as;!do8O;!de5;dGrD;en9KrD;an9JeDy;ll,n9I;!dy;dgh,ha,iDnn3req,tsu4S;cB4ka;aTcotRePhLiJoHpenc3tDur1Uylve9Jzym1;anFeDua8C;f0phBSvDwa8B;e61ie;!islaw,l8;lom1nBEuD;leyma7ta;dDlBm1yabonga;!dhart7An8;aFeD;lDrm0;d1t1;h7Tne,qu0Zun,wn,y7;aDbasti0k29l4Qrg4Nth,ymoAT;m5n;!tD;!ie,y;lEmDnti2Dq5Aul;!ke5LmCu4;ik,vato7W;aXeTheA9iPoHuEyD;an,ou;b7MdEf5pe7RssD;!elBY;ol3Ey;an,bJc66dIel,geHh0landBPmGnFry,sEyD;!ce;coe,s;!aAGnC;an,eo;l46r;e5Ng3n8olfo,ri79;bCeB7;cDl8;ar6Pc6OhEkDo;!ey,ie,y;a99ie;gEid,ubAx,yDza;an1InY;gA8iD;naA4s;ch70fa4lHmGndFpha4sEul,wi2HyD;an,mo82;h7Vm5;alBDol2Uy;iATon;f,ph;ent2inD;cy,t1;aIeGhilFier72ol,rD;aka16eD;m,st1;!ip,lip;dALrcy,tD;ar,e3Gr1X;b4Kdra7Ft4ZulD;!o17;ctav3Fi3liv3mAFndrej,rHsEtDum9wA;is,to;aEc9k9m0vD;al5Z;ma;i,l53vL;aLeJiFoDu3A;aDel,j5l0ma0r3K;h,m;cEg4i49kD;!au,h7Uola;holBkDolB;!olB;al,d,il,ls1vD;il8Y;hom,thD;anDy;!a4i4;aZeWiMoHuEyD;l2Jr1;hamEr6XstaD;fa,p5C;ed,mH;di0We,hamFis2FntEsDussa;es,he;e,y;ad,ed,mD;ad,ed;cIgu4hai,kGlFnEtchD;!e6;a8Aik;house,o0Bt1;ae5YeA4olD;aj;ah,hDk8;aEeD;al,l;el,l;hElv2rD;le,ri6v2;di,met;ay0ck,hTjd,ks2DlRmadWnQrKs1tFuricExD;!imilian9Nwe6;e,io;eGhEiBtDus,yB;!eo,hew,ia;eDis;us,w;j,o;cHio,kGlFqu7Dsha6tDv2;iDy;!m,n;in,on;!el,oPus;!el9IoOus;iGu4;achDcolm,ik;ai,y;amEdi,eDmoud;sh;adDm5T;ou;aXeQiOlo3EoKuEyD;le,nd1;cGiFkDth3uk;aDe;!s;gi,s,z;as,iaD;no;g0nn7SrenFuDv8Jwe6;!iD;e,s;!zo;am,oD;n4r;a8Cevi,la5JnIoGst3thaFvD;eDi;nte;bo;!nD;!a6Sel;!ny;mFnErDur5Hwr5H;ry,s;ce,d1;ar,o5A;aLeGhaled,iDrist5Iu4Vy6X;er0p,rD;by,k,ollD;os;en0iGnDrmit,v44;!dEnDt5Z;e1Ay;a6ri59;r,th;cp3j5m66na73rEsp9them,uD;ri;im,l;a02eUiSoGuD;an,lDst2;en,iD;an,en,o,us;aNeLhnKkubBnIrGsD;eEhDi8Bue;!ua;!ph;dDge;an,i,on;!aDny;h,s,th5I;!ath5Hie,nC;!l,sDy;ph;o,qu2;an,mD;!mC;d,ffIrFsD;sDus;!e;a6BemEmai7oDry;me,ni0Y;i7Ty;!e60rD;ey,y;cKdAkImHrFsEvi3yD;!dAs1;on,p3;ed,od,rDv56;e5Nod;al,es4Xis1;a,e,oDub;b,v;k,ob,quD;es;aWbQchiPgNkeMlija,nuLonut,rJsFtDv0;ai,suD;ki;aEha0i7DmaDsac;el,il;ac,iaD;h,s;a,vinDw2;!g;k,nngu5S;!r;nacDor;io;ka;ai,rahD;im;aPeJoIuDyd9;be2KgGmber4WsD;eyEsD;a2e2;in,n;h,o;m3ra3Gsse2wa4B;aHctGitGnrErD;be2Dm0;iDy;!q11;or;th;bMlLmza,nKo,rFsEyD;a4JdA;an,s0;lGo50rFuDv8;hi4Gki,tD;a,o;is1y;an,ey;k,s;!im;ib;aVeRiPlenOoLrHuD;ilEsD;!tavo;herme,lerD;mo;aFegDov3;!g,orD;io,y;dy,h5Wnt;nzaErD;an,d1;lo;!n;lbe5Ano,oD;rg3Hvan5A;ne,oFrD;aDry;ld,rd5H;ffr8rge;brElArDv2;la28r3Sth,y;e3EielD;!i5;aTePiNlLorr0NrD;anFedDitz;!dCeDri2B;ri2A;cFkD;!ie,lD;in,yn;esLisD;!co,z36;etch3oD;yd;d4lDnn,onn;ip;deriFliEng,rnD;an06;pe,x;co;bi0di,hd;ar04dZfrYit0lSmKnHo2rFsteb0th0uge7vDymAzra;an,eD;ns,re36;gi,i0DnDrol,v2w2;est4Pie;oEriqDzo;ue;ch;aJerIiEmD;aIe2Z;lErD;!h0;!iD;o,s;s1y;nu4;be0Cd1iGliFmEt1viDwood;n,s;er,o;ot1Ys;!as,j4NsD;ha;a2en;!dCg9mGoEuEwD;a2Din;arD;do;o0Wu0W;l,nD;est;a01eRiOoHrGuFwEylD;an,l0;ay7ight;a7dl8nc0st2;ag0ew;minGnEri0ugDvydBy2D;!lB;!a2MnDov0;e6ie,y;go,iDykB;cDk;!k;armuEeDll1on,rk;go;id;anKj0lbeJmetri5nHon,rGsFvEwDxt3;ay7ey;en,in;hawn,mo0B;ek,ri0I;is,nDv3;is,y;rt;!dD;re;an,lNmLnKrGvD;e,iD;! lucDd;as,ca;en,iFne6rDyl;eDin,yl;l3Bn;n,o,us;!e,i4ny;iDon;an,en,on;e,lB;as;a09e07hYiar0lNoIrGuEyrD;il,us;rtD;!is;aDistob0U;ig;dy,lGnErD;ey,neli5y;or,rD;ad;by,e,in,l2t1;aIeFiDyK;fDnt;fo0Ft1;meEt5velaD;nd;nt;rFuEyD;!t1;de;enD;ce;aIeGrisEuD;ck;!tD;i0oph3;st3;er;d,rDs;b4leD;s,y;cDdric,s9;il;lGmer1rD;ey,lEro6y;ll;!os,t1;eb,v2;a07eZiVlaUoRrEuDyr1;ddy,rtK;aLeGiFuEyD;an,ce,on;ce,no;an,ce;nEtD;!t;dEtD;!on;an,on;dEndD;en,on;!foDl8y;rd;bErDyd;is;!by;i7ke;bFlEshD;al;al,lC;ek;nHrDshoi;at,nEtD;!r1C;aDie;rd14;!edict,iEjam2nC;ie,y;to;kaMlazs,nHrD;n8rDt;eDy;tt;ey;dDeE;ar,iD;le;ar17b0Vd0Rf0Pgust2hm0Mi0Jja0Il04m00nSputsiRrIsaHuFveEyDziz;a0kh0;ry;gust5st2;us;hi;aKchJiIjun,maHnFon,tDy0;hDu09;ur;av,oD;ld;an,nd0H;!el,ki;ie;ta;aq;as,dIgel0CtD;hoGoD;i7nD;!i09y;ne;ny;er,reDy;!as,i,s,w;iFmaDos;nu4r;el;ne,r,t;an,bePdAeJfHi,lGonFphXt1vD;aNin;on;so,zo;an,en;onTrD;edU;c,jaGksandFssaGxD;!andD;er,ru;ar,er;ndD;ro;rtN;ni;dAm9;ar;en;ad,eD;d,t;in;onD;so;aEi,olfDri0vik;!o;mDn;!a;dHeGraEuD;!bakr,lfazl;hDm;am;!l;allIelFoulaye,ulD;!lDrF;ah,o;! rD;ahm0;an;ah;av,on",LastName:"true\xA60:9F;1:9V;2:9H;3:9X;4:9N;5:8J;6:9K;7:A0;8:9E;9:88;A:6E;B:77;C:6J;a9Ub8Lc7Kd6Xe6Rf6Dg5Vh58i54j4Pk45l3Nm2Rn2Eo26p1Nquispe,r17s0Ft05vVwOxNyGzD;aytsADhD;aDou,u;ng,o;aGeun7ZiDoshiA9un;!lD;diDmaz;rim,z;maDng;da,guc97mo6UsDzaB;aBhiA7;iao,u;aHeGiEoDright,u;jc8Sng;lDmm0nkl0sniewsB;liA1s3;b0iss,lt0;a5Rgn0lDng,tanabe;k0sh;aHeGiEoDukA;lk5roby5;dAllalDnogr2Zr0Zss0val37;ba,obos;lasEsel7N;lGn dFrg8EsEzD;qu7;ily9Oqu7silj9O;en b35ijk,yk;enzue95verde;aLeix1JhHi4j6ka3IoGrFsui,uD;om4ZrD;c4n0un1;an,embl8TynisB;dor95lst31m2rr9th;at5Mi7LoD;mErD;are6Ylaci64;ps3s0Y;hirAkah8Dnaka;a00chWeThPiNmKoItFuEvDzabo;en8Aobod34;ar7bot2lliv4zuB;aEein0oD;i67j3Lyan8V;l6rm0;kol5lovy5re6Psa,to,uD;ng,sa;iDy5Z;rn5tD;!h;l5YmDngh,rbu;mo6Do6J;aFeDimizu;hu,vchD;en7Cuk;la,r17;gu8mDoh,pulve8Trra4R;jDyD;on5;evi6Filtz,miDneid0roed0ulz,warz;dEtD;!z;!t;ar42h6ito,lFnDr2saBto,v2;ch7d0AtDz;a4Pe,os;as,ihAm3Zo0Q;aOeNiKoGuEyD;a66oo,u;bio,iz,sD;so,u;bEc7Bdrigue57g03j73mDosevelt,ssi,ta7Nux,w3Z;a4Be0O;ertsDins3;!on;bei0LcEes,vDzzo;as,e8;ci,hards3;ag4es,it0ut0y9;dFmEnDsmu7Zv5F;tan1;ir7os;ic,u;aSeLhJiGoErDut6;asad,if5Zochazk1W;lishc24pDrti62u55we66;e2Tov48;cEe09nD;as,to;as60hl0;aDillips;k,m,n5K;de3AetIna,rGtD;ersErovDtersC;!a,ic;en,on;eDic,ry,ss3;i8ra,tz,z;ers;h71k,rk0tEvD;ic,l3T;el,t2O;bJconnor,g2ClGnei5PrEzD;demir,turk;ella3MtDwe5N;ega,iz;iDof6GsC;vDyn1F;ei8;aPri1;aLeJguy1iFoDune44ym4;rodahl,vDwak;ak3Uik5otn56;eEkolDlsCx3;ic,ov6X;ls1miD;!n1;ils3mD;co42ec;gy,kaEray4varD;ro;jiDmu8shiD;ma;aXcVeQiPoIuD;lGnFrDssoli5T;atDpUr68;i,ov2;oz,te4B;d0l0;h4lIo0HrEsDza0Z;er,s;aFeEiDoz5r3Ete4B;!n6F;au,i8no,t4M;!l9;i2Rl0;crac5Ohhail5kke3Qll0;hmeGij0j2ElFndErci0ssiDyer19;!er;e3Bo2Z;n0Io;dAti;cartDlaughl6;hy;dMe6Dgnu5Ei0jer34kLmJnci59rFtEyD;er,r;ei,ic,su1N;iEkAqu9roqu6tinD;ez,s;a54c,nD;!o;a52mD;ad5;e5Oin1;rig4Ns1;aSeMiIoGuEyD;!nch;k2nDo;d,gu;mbarDpe2Rvr2;di;!nDu,yana1R;coln,dD;bDholm;erg;bed5TfeGhtFitn0kaEn6rDw2G;oy;!j;in1on1;bvDvD;re;iDmmy,rsCu,voie;ne,t11;aTennedy,h4iSlQnez46oJrGuEvar4woD;k,n;cerDmar58znets5;a,o2G;aDem0i2Zyeziu;sni3PvD;ch3U;bay4Frh0Jsk0TvaFwalDzl5;czDsB;yk;cFlD;!cDen3Q;huk;!ev2ic,s;e6uiveD;rt;eff0l2mu8nnun1;hn,lloe,minsBrEstra31to,ur,yDzl5;a,s0;j0GlsC;aMenLha2Pim0QoEuD;ng,r2;e2JhFnErge2Ju2NvD;anA;es,ss3;anEnsD;en,on,t3;nesDsC;en,s1;ki26s1;cGkob3RnsDrv06;en,sD;enDon;!s;ks3obs1;brahimAglesi3Ake4Ll0CnoZoneFshikEto,vanoD;u,v4A;awa;scu;aPeIitchcock,jaltal6oFrist46uD;!aDb0gh9ynh;m4ng;a23dz2fEjga2Sk,rDx3B;ak0Yvat;er,fm3B;iGmingw3NnErD;nand7re8;dDriks1;ers3;kkiEnD;on1;la,n1;dz2g1lvoLmJnsCqIrr0SsFuEyD;as36es;g1ng;anEhiD;mo0Q;i,ov08;ue;alaD;in1;rs1;aMeorgLheorghe,iJjonIoGrEuDw3;o,staf2Utierr7zm4;ayDg2iffitUub0;li1G;lub3Rme0JnD;calv9zale0I;aj,i;l,mDordaL;en7;iev3B;gnJlGmaFnd2No,rDs2Nuthi0;cDza;ia;ge;eaElD;agh0i,o;no;e,on;ab0erMiIjeldsted,lor9oGrFuD;cDent9ji3F;hs;an1Wiedm4;ntaDrt6st0urni0;na;lipEsD;ch0;ovD;!ic;hatAnandeVrD;arDei8;a,i;ov2;dHinste6riksCsDva0D;cob2ZpDtra2X;inoDosiM;za;en,s3;er,is3wards;aUeMiKjurhuJoHrisco0YuEvorakD;!oQ;arte,boEmitru,rDt2U;and,ic;is;g4he0Hmingu7n2Ord19tD;to;us;aDmitr29ssanayake;s,z; GbnaFlEmirDrvis1Lvi,w4;!ov2;gado,ic;th;bo0groot,jo03lEsilDvri9;va;a cruz,e3uD;ca;hl,mcevsBnErw6t2EviD;d5es,s;ieDku1S;ls1;ki;a05e00hNiobMlarkLoFrD;ivDuz;elli;h1lGntFop0rDs26x;byn,reD;a,ia;i,rer0O;em4liD;ns;!e;anu;aLeIiu,oGriDuJwe;stD;eDiaD;ns1;i,ng,uFwDy;!dhury;!n,onEuD;ng;!g;kEnDtterjee,v7;!d,g;ma,raboD;rty;bGl09ng2rD;eghetEnD;a,y;ti;an,ota0M;cer9lder3mpbeIrFstDvadi08;iDro;llo;doEt0uDvalho;so;so,zo;ll;es;a09eXhUiSlNoGrFyD;rne,tyD;qi;ank5iem,ooks,yant;gdan5nFruya,su,uchEyHziD;c,n5;ard;darDik;enD;ko;ov;aEondD;al;nEzD;ev2;co;ancRshwD;as;a01oDuiy4;umDwmD;ik;ckNethov1gu,ktLnJrD;gGisFnD;ascoDds1;ni;ha;er,mD;ann;gtDit7nett;ss3;asD;hi;er,ham;b2ch,ez,hMiley,kk0nHrDu0;bEnDua;es,i0;ieDosa;ri;dDik;a8yopadhyD;ay;ra;er;k,ng;ic;cosZdYguilXkhtXlSnJrGsl4yD;aEd6;in;la;aEsl4;an;ujo,ya;dFgelD;ovD;!a;ersGov,reD;aDjL;ss1;en;en,on,s3;on;eksejGiyGmeiFvD;ar7es;ez;da;ev;ar;ams;ta",WeekDay:"true\xA6fri2mon2s1t0wednesd3;hurs1ues1;aturd1und1;!d0;ay0;!s",Month:"true\xA6aBdec9feb7j2mar,nov9oct1sep0;!t8;!o8;an3u0;l1n0;!e;!y;!u1;!ru0;ary;!em0;ber;pr1ug0;!ust;!il",Date:"true\xA6ago,t2week0yesterd4; e0e0;nd;mr2o0;d0morrow;ay;!w",FirstName:"true\xA6aKblair,cGdevFgabrieEhinaDjBk8l7m3nelly,quinn,re2sh0;ay,e0iloh;a,lby;g6ne;a1el0ina,org5;!okuh9;naia,r0;ion,lo;ashawn,uca;asCe1ir0rE;an;lsAnyat2rry;am0ess6ie,ude;ie,m5;ta;le;an,on;as2h0;arl0eyenne;ie;ey,sidy;lex2ndr1ubr0;ey;a,ea;is",Person:"true\xA6ashton kutchTbScNdLeJgastOhHinez,jFkEleDmCnettKoBp9r4s3t2v0;a0irgin maH;lentino rossi,n go3;aylor,heresa may,iger woods,yra banks;addam hussain,carlett johanssKlobodan milosevic,uC;ay romano,e3o1ush limbau0;gh;d stewart,nald0;inho,o;ese witherspoFilly;a0ipJ;lmIris hiltD;prah winfrFra;essiaen,itt romnEubarek;bron james,e;anye west,iefer sutherland,obe bryant;aime,effers8k rowli0;ng;alle ber0itlBulk hogan;ry;ff0meril lagasse,zekiel;ie;a0enzel washingt2ick wolf;lt1nte;ar1lint0;on;dinal wols1son0;! palm2;ey;arack obama,rock;er",Verb:"true\xA6awak9born,cannot,fr8g7h5k3le2m1s0wors9;e8h3;ake sure,sg;ngth6ss6;eep tabs,n0;own;as0e2;!t2;iv1onna;ight0;en",PhrasalVerb:"true\xA60:7L;1:79;2:7X;3:7N;4:72;5:80;6:7P;7:6V;8:78;9:7J;A:6W;B:5Z;C:7S;D:7K;a81b6Lc5Rd5Me5Lf4Kg41h3Kiron0j3Gk3Bl2Vm2Jn2Ho2Fp1Wquiet7Ar1Js0CtSuQvacuum 1wHyammer9zE;eroBip FonE;e0k0;by,up;aLeHhGiForErit5G;d 1k33;mp0n2Vpe0r7s7;eel Dip 85;aFiEn2J;gh 09rd0;n Dr E;d2in,o5J;it 61k7lk6rm 6Csh 7Nt6Qv51;rge9sE;e AherB;aTeRhPiLoJrGuEype 69;ckBrn E;d2in,o3Sup;aFiEot0y 2I;ckle6Rp 7T;ck6Qde Y;ne6Pp Es4O;d2o73up;ck GdFe Egh6Bme0p o0Gre0;aw3ba4d2in,up;e 61y 1;by,o7D;ink Erow 6D;ba4ov8up;aEe 5Zll53;m 1r X;ck9ke Flk E;ov8u54;aEba4d2in,o3Cup;ba4ft8p59w3;a0Jc0Ie0Ch08i05l01m00nZoYpTquare StKuIwE;earGiE;ngFtch E;aw3ba4o77; by;ck Eit 1m 1ss0;in,up;aJe0WiIoGrEuc3G;aigh1WiE;ke 6Gn3A;p Erm1Z;by,in,o6T;n3Br 1tc3T;c3Amp0nd Er6Zve6y 1;ba4d2up;d2o6Pup;ar37eHiGlFrEur9;ing9uc7;a3Fit 5B;l13n 1;e5Sll0;be2Wrt0;ap 4Sow D;ash 5Foke0;eep FiEow A;c3Wp 1;in,oE;ff,v8;gn 4XngFt Ez7;d2o5up; al54le0;aGoEu4T;ot Eut0w 6D;aw3ba4f3Go67;c2PdeBk58ve6;e Ill1And HtE; Etl4H;d2in,o5upE;!on;aw3ba4d2in,o27up;o5Mto;al51out0rap51;il6v7;aPeMiLoHuE;b 4Ule0n Estl7;aEba4d2in5Jo3Ut39u3S;c26w3;ll Got FuE;g2Tnd6;a27f30o5;arCin,o5;ng 53p6;aEel6inBnt0;c5Dd E;o31u0I;c24t0;aSeRiPlNoLrIsyc2HuE;ll Gt E;aEba4d2in,o1Ot3Gup;p3Lw3;ap3Kd2in,o5t3Eup;attle9ess FiHoE;p 1;ah1Oon;iEp 5Hr3Yur4Jwer 5H;nt0;ay4DuE;gBmp A;ck Eg0le9n Ap4A;o2Yup;el 4KncilB;c42ir 3Un0ss GtFy E;ba4o54; d2c24;aw3ba4o18;pEw3X;e3Wt D;arrow46erd0oE;d6te45;aMeJiIoGuE;ddl7lE;l 3I;c1Dp 1uth6ve E;al3Nd2in,o5up;ss0x 1;asur7lFss E;a1Gup;t A;ke Fn ArEs1Px0;k Ary6;do,o48up;aRePiKoEuck0;aIc3Hg HoEse0;k Ese3F;aft8ba4d2forw2Jin46ov8uE;nd8p;in,o0M;d A;e HghtGnFsEv1V;ten 4M;e 1k 1; 1e37;arCd2;av1Jt 37velE; o3U;c7p 1sh Etch9ugh6y20;in3Uo5;eFick6nock E;d2o3Q;eEyB;l 2Pp E;aw3ba4d2fTin,o07to,up;aGoFuE;ic7mpB;ke31t35;c3Azz 1;aQeLiIoFuE;nker32rry 1s0W;lEneBrse2X;d Ee 1;ba4d2fast,o01up;de Ft E;ba4on,up;aw3o5;aElp0;d Gl 2Ar Et 1;fEof;rom;in,oTu1H;c02m 1nFve Ez25;it,to;d Eg 2FkerG;d2in,o5;aTeMive Kloss 22oGrFunE; f0N;in3How 2B; Eof 21;aFb1Dit,oErCt0Pu18;ff,n,v8;bo5ft8hKw3;aw3ba4d2in,oEup,w3;ff,n,ut;aJek0t E;aFb17d2oErCup;ff,n,ut,v8;cFhEl1XrCt,w3;ead;ross;r 1;d aFnE;g 1;bo5;a08e01iSlOoKrGuE;cEel 1;k 1;eFighten Eown9y 1;aw3o2S;eEshe1N; 1z7;lGol E;aEwi1G;bo5rC;d Alow 1;aFeEip0;sh0;g Ake0mErE;e 2R;gLlJnHrFsEzzle0;h 2P;e Em 1;aw3ba4up;d0isE;h 1;e El 19;aw3fJ;ht ba4ure0;eJnFsE;s 1;cGd E;fEo25;or;e D;dVl 1;cIll Erm0t0W;ap04bGd2in,oFtE;hrough;ff,ut,v8;a4ehi20;e 0L;at0dge0nd 0Ky7;oHrE;aFess Aop E;aw3bUin,o1E;g9w9; 0Dubl7;aXhUlean AoHrEut 10;ack9eep Eoss D;by,d2oEup;n,ut;me HoFuntE; o1Q;k 1l E;d2o1I;aKbJforHin,oGtFuE;nd8;ogeth8;ut,v8;th,wE;ard;a4y;pErCw3;art;eEipB;ck Der E;on,up;lKncel0rHsGtch FveB; in;o19up;h Dt6;ry FvE;e Y;aw3o15;l Em05;aEba4d2o13up;rCw3;a0Ke0Bl04oVrJuE;bblGcklWil02lk AndlWrn 08st FtEy 13zz6;t D;in,o5up;e E;ov8;anOeaMiFush E;o0Oup;ghIng E;aFba4d2forEin,o5up;th;bo5lErCw3;ong;teE;n 1;k E;d2in,o5up;ch0;arLgKil An7oHssGttlFunce Ex D;aw3ba4;e A; arC;k Dt 1;e 1;d2up; d2;d 1;aJeed0oEurt0;cGw E;aw3ba4d2o5up;ck;k E;in,oL;ck0nk0st6; oKaHef 1nd E;d2ov8up;er;up;r0t E;d2in,oEup;ff,ut;ff,nE;to;ck Kil0nGrgFsE;h D;ain9e D;g Dk9; on;in,o5; o5;aw3d2o5up;ay;cNdJsk Guction6; oE;ff;arCo5;ouE;nd;d E;d2oEup;ff,n;own;t E;o5up;ut",Modal:"true\xA6c5lets,m4ought3sh1w0;ill,o5;a0o4;ll,nt;! to,a;ay,ight,ust;an,o0;uld",Adjective:"true\xA60:7P;1:84;2:83;3:8A;4:7W;5:5S;6:4N;7:4O;8:58;9:6I;A:81;a6Wb6Gc63d5Je54f4Hg49h3Wi39j37k36l2Vm2Ln2Bo1Wp1Dquack,r12s0Ft07uMvJwByear5;arp0eFholeEiDoB;man5oBu6P;d6Rzy;despr7Ls5S;!sa7;eClBste2A;co1Nl o4W;!k5;aCiBola4M;b89ce versa,ol5H;ca3gabo6Gnilla;ltUnHpCrb5Msu4tterB;!mo7G; Eb1SpDsBti1M;ca7etBide dKtairs;!ti2;er,i3U;f36to da1;aLbeco75convin29deIeHfair,ivers4knGprecedVrEsCwB;iel3Nritt6A;i1XuB;pervis0spec3Y;eBu5;cognHgul6Tl6T;own;ndi2v64xpect0;cid0rB;!grou5ZsB;iz0tood;b7pp0Dssu6UuthorB;iz0;i26ra;aGeEhDi6AoCrB;i1oubl0us3M;geth8p,rp6Vuc67;ough4Wril33;en60l32mpBrr2X;o6Ati2;boo,lBn;ent0;aWcVeThSiQmug,nobbi3LoOpNqueami3LtFuBymb6H;bDi gener5DpBrpri6D;erBre0N;! dup8b,i2C;du0seq52;anda77eGiFrBunni2y3F;aightCiB;ki2p0; fBfB;or5K;ll,r5S;aBreotyp0;dfa6Cmi2;a55ec2Gir1Hlend6Cot on; call0le,mb8phist1XrBu0Vvi48;d6Ary;gnifica3nB;ce51g7;am2Re8ocki2ut;cBda1em5lfi32ni1Wpa6Jre6;o1Er42;at5Gient28reec5G;cr0me;aJeEiCoB;bu60tt51uQy4;ghtBv4;!-2Bf9;ar,bel,condi1du6Dfres5AlEpublic42sCtard0vB;ea26;is4CoB;lu1na3;aQe1Cuc4A;b5TciBllyi2;al,st;aOeLicayu6lac5Ropuli5QrCuB;bl5Jmp0n51;eGiDoB;!b07fu5RmiBp8;ne3si2;mCor,sBva1;ti6;a53e;ci5MmB;a0EiB;er,um;ac20rBti1;feAma2XpleBv38;xi2;rBst;allelDtB;-tiBi4;me;!ed;bLffJkIld fashion0nHpGrg1Eth8utFvB;al,erB;!all,niCt,wB;eiBrouB;ght;do0Ter,g2Qsi4B;en,posi1; boa5Og2Oli6;!ay; gua5MbBli6;eat;eDsB;cBer0Eole1;e6u3O;d2Xse;aJeIiHoBua4X;nFrCtB;ab7;thB;!eB;rn;chala3descri58stop;ght5;arby,cessa44ighbor5xt;k0usia1A;aIeGiDoBultip7;bi7derBl0Vnth5ot,st;a1n;nBx0;dblo0RiaBor;tu37;ande3Qdi4NnaBre;ci2;cBgenta,in,j01keshift,le,mmoth,ny,sculi6;ab33ho;aKeFiCoBu15;uti14vi2;mCteraB;l,te;it0;ftEgBth4;al,eCitiB;ma1;nda3K;!-0C;ngu3Zst,tt8;ap1Xind5no0A;agg0uB;niMstifi0veni7;de4gno4Klleg4mQnEpso 20rB;a1rB;eleBita0J;va3; KaJbr0corIdGfluenQiQnFsEtCviB;go0Fti2;aAen3SoxB;ic3B;a6i2Vul0D;a1er,oce3;iCoB;or;reA;deq3Qppr33;fBsitu,vitro;ro3;mFpB;arDerfeAoBrop8;li1rtB;a3ed;ti4;eBi0S;d2Vn3C;aIeFiDoBumdr3I;ne36ok0rrBs08ur5;if2Z;ghfalut1QspB;an2X;aClB;liYpf9;li2;lEnDrB;d04roB;wi2;dy;f,low0;ainf9ener2Oiga24lHoGraDuB;ilBng ho;ty;cCtB;ef9is;ef9;ne,od;ea2Iob4;aTeNinMlKoFrB;a1VeDoz1MustB;raB;ti2;e2Gq10tf9;oDrB; keeps,eBm8tuna1;g03ign;liB;sh;aBue3;g31tte1P;al,i1;dFmCrB;ti7;a7ini6;ne;le; up;bl0i3l27r Cux,voB;ri1uri1;oBreac1E;ff;aLfficie3lKmHnFreAthere4veExB;aAcess,pe1QtraCuB;be2Nl0E;!va1E;n,ryday; BcouraEti0O;rou1sui1;erCiB;ne3;gi2;abo23dMe17i1;g8sB;t,ygB;oi2;er;aReJiDoBrea14ue;mina3ne,ubB;le,tf9;dact1Bfficu1OsCvB;er1K;creDeas0gruntl0hone1FordCtB;a3ressM;er5;et; HadpGfFgene1PliDrang0spe1PtCvoB;ut;ail0ermin0;be1Mca1ghB;tf9;ia3;an;facto;i5magBngeroUs0G;ed,i2;ly;ertaMhief,ivil,oDrB;aBowd0u0G;mp0vZz0;loImGnCrrBve0P;eAu1I;cre1fu0LgrDsCtB;empo0Dra0E;ta3;ue3;mer08pleB;te,x;ni4ss4;in;aNeIizarHlFoCrB;and new,isk,okN;gCna fiUttom,urgeoB;is;us;ank,indB;!i2;re;autif9hiDloCnBst,yoD;eUt;v0w;nd;ul;ckCnkru0WrrB;en;!wards; priori,b0Mc0Jd09fra08g04h03lYmWntiquVppSrMsIttracti06utheHvEwB;aCkB;wa0T;ke,re;ant garCerB;age;de;ntU;leep,piDsuDtonB;isB;hi2;ri2;ab,bitEroDtiB;fiB;ci4;ga3;raB;ry;are3etiNrB;oprB;ia1;at0;aJuB;si2;arEcohCeBiIl,oof;rt;olB;ic;mi2;ead;ainDgressiConiB;zi2;ve;st;id; IeGuFvB;aCerB;se;nc0;ed;lt;pt,qB;ua1;hoc,infinitB;um;cuCtu4u1;al;ra1;erLlKoIruHsCuB;nda3;e3oCtraA;ct;lu1rbi2;ng;te;pt;aBve;rd;aze,e;ra3;nt",Comparable:"true\xA60:41;1:4I;2:45;3:2Y;4:4B;5:3X;a4Ob44c3Od3De35f2Rg2Fh24i1Vj1Uk1Rl1Jm1Dn17o15p0Vqu0Tr0KsTtMuIvFw7y6za13;ell27ou4;aBe9hi1Yi7r6;o4y;ck0Ode,l6n1ry,se;d,y;a6i4Mt;k,ry;n1Tr6sK;m,y;a7e6ulgar;nge5rda2xi4;g9in,st;g0n6pco3Mse5;like0t6;i1r6;ue;aAen9hi8i7ough,r6;anqu2Oen1ue;dy,g3Sme0ny,r09;ck,n,rs2P;d40se;ll,me,rt,s6wd45;te5;aVcarUeThRiQkin0FlMmKoHpGqua1FtAu7w6;eet,ift;b7dd13per0Gr6;e,re2H;sta2Ft3;aAe9iff,r7u6;pXr1;a6ict,o4;ig3Fn0U;a1ep,rn;le,rk;e22i3Fright0;ci28ft,l7o6re,ur;n,thi4;emn,id;a6el0ooth;ll,rt;e8i6ow,y;ck,g35m6;!y;ek,nd3D;ck,l0mp3;a6iTort,rill,y;dy,ll0Xrp;cu0Rve0Rxy;ce,ed,y;d,fe,int0l1Vv14;aBe9i8o6ude;mantic,o1Isy,u6;gh,nd;ch,pe,tzy;a6d,mo0H;dy,l;gg7ndom,p6re,w;id;ed;ai2i6;ck,et;aEhoDi1QlCoBr8u6;ny,r6;e,p3;egna2ic7o6;fouYud;ey,k0;li04or,te1B;ain,easa2;ny;in5le;dd,f6i0ld,ranQ;fi10;aAe8i7o6;b3isy,rm15sy;ce,mb3;a6w;r,t;ive,rr01;aAe8ild,o7u6;nda19te;ist,o1;a6ek,llX;n,s0ty;d,tuQ;aBeAi9o6ucky;f0Un7o1Du6ve0w17y0T;d,sy;e0g;g1Tke0tt3ve0;an,wd;me,r6te;ge;e7i6;nd;en;ol0ui1P;cy,ll,n6;sBt6;e6ima8;llege2r6;es7media6;te;ti4;ecu6ta2;re;aEeBiAo8u6;ge,m6ng1R;b3id;ll6me0t;ow;gh,l0;a6f04sita2;dy,v6;en0y;nd1Hppy,r6te5;d,sh;aGenFhDiClBoofy,r6;a9e8is0o6ue1E;o6ss;vy;at,en,y;nd,y;ad,ib,ooI;a2d1;a6o6;st0;t3uiY;u1y;aIeeb3iDlat,oAr8u6;ll,n6r14;!ny;aHe6iend0;e,sh;a7r6ul;get5mG;my;erce8n6rm;an6e;ciC;! ;le;ir,ke,n0Fr,st,t,ulA;aAerie,mp9sse7v6xtre0Q;il;nti6;al;ty;r7s6;tern,y;ly,th0;aFeCi9r7u6;ll,mb;u6y;nk;r7vi6;ne;e,ty;a6ep,nD;d6f,r;!ly;mp,pp03rk;aHhDlAo8r7u6;dd0r0te;isp,uel;ar6ld,mmon,ol,st0ward0zy;se;e6ou1;a6vW;n,r;ar8e6il0;ap,e6;sy;mi4;gey,lm8r6;e5i4;ful;!i4;aNiLlIoEr8u6;r0sy;ly;aAi7o6;ad,wn;ef,g7llia2;nt;ht;sh,ve;ld,r7un6;cy;ed,i4;ng;a7o6ue;nd,o1;ck,nd;g,tt6;er;d,ld,w1;dy;bsu9ng8we6;so6;me;ry;rd",TextOrdinal:"true\xA6bGeDf9hundredHmGnin7qu6s4t0zeroH;enGh1rFwe0;lfFn9;ir0ousandE;d,t4;e0ixt9;cond,ptAvent8xtA;adr9int9;et0th;e6ie8;i2o0;r0urt3;tie5;ft1rst;ight0lev1;e0h,ie2;en1;illion0;th",Cardinal:"true\xA6bHeEf8hundred,mHnineAone,qu6s4t0zero;en,h2rGw0;e0o;lve,n8;irt9ousandEree;e0ix5;pt1ven4xt1;adr0int0;illion;i3o0;r1ur0;!t2;ty;ft0ve;e2y;ight0lev1;!e0y;en;illion0;!s",Expression:"true\xA6a02b01dXeVfuck,gShLlImHnGoDpBshAtsk,u7voi04w3y0;a1eLu0;ck,p;!a,hoo,y;h1ow,t0;af,f;e0oa;e,w;gh,h0;! 0h,m;huh,oh;eesh,hh,it;ff,hew,l0sst;ease,z;h1o0w,y;h,o,ps;!h;ah,ope;eh,mm;m1ol0;!s;ao,fao;a4e2i,mm,oly1urr0;ah;! mo6;e,ll0y;!o;ha0i;!ha;ah,ee,o0rr;l0odbye;ly;e0h,t cetera,ww;k,p;'oh,a0uh;m0ng;mit,n0;!it;ah,oo,ye; 1h0rgh;!em;la",Adverb:"true\xA6a08by 06d02eYfShQinPjustOkinda,mMnJoEpCquite,r9s5t2up1very,well,ye0;p,s; to,wards5;h1iny bit,o0wiO;o,t6ward;en,us;eldom,o0uch;!me1rt0; of;hYtimes,w09;a1e0;alT;ndomSthN;ar excellDer0oint blank; Nhaps;f3n0;ce0ly;! 0;ag02moW; courIten;ewKo0; longEt 0;onIwithstanding;aybe,eanwhiAore0;!ovB;! aboU;deed,steV;en0;ce;or2u0;lArther0;!moJ; 0ev3;examp0good,suH;le;n1v0;er; mas0ough;se;e0irect1; 1finite0;ly;ju8trop;far,n0;ow; DbroCd nauseam,gBl6ny3part,s2t 0w4;be6l0mo6wor6;arge,ea5; soon,ide;mo1w0;ay;re;l 1mo0one,ready,so,ways;st;b1t0;hat;ut;ain;ad;lot,posteriori",Determiner:"true\xA6aBboth,d9e6few,l4mu8neiDown,plenty,s3th2various,wh0;at0ich0;evC;at,e4is,ose;everal,ome;a,e0;!ast,s;a1i6l0very;!se;ch;e0u;!s;!n0;!o0y;th0;er"},zge=function(i){let t=i.split("|").reduce((r,a)=>{let s=a.split("\xA6");return r[s[0]]=s[1],r},{}),e={};return Object.keys(t).forEach(function(r){let a=Uge(t[r]);r==="true"&&(r=!0);for(let s=0;s<a.length;s++){let o=a[s];e.hasOwnProperty(o)===!0?Array.isArray(e[o])===!1?e[o]=[e[o],r]:e[o].push(r):e[o]=r}}),e},Hge={"20th century fox":"Organization","7 eleven":"Organization","motel 6":"Organization",g8:"Organization",vh1:"Organization",q1:"Date",q2:"Date",q3:"Date",q4:"Date",her:["Possessive","Pronoun"],his:["Possessive","Pronoun"],their:["Possessive","Pronoun"],themselves:["Possessive","Pronoun"],your:["Possessive","Pronoun"],our:["Possessive","Pronoun"],my:["Possessive","Pronoun"],its:["Possessive","Pronoun"]},cB={Unit:(i,t)=>{i[t]=["Abbreviation","Unit"]},Cardinal:(i,t)=>{i[t]=["TextValue","Cardinal"]},TextOrdinal:(i,t)=>{i[t]=["Ordinal","TextValue"],i[t+"s"]=["TextValue","Fraction"]},Singular:(i,t,e)=>{i[t]="Singular";let r=e.transforms.toPlural(t,e);i[r]=i[r]||"Plural"},Infinitive:(i,t,e)=>{i[t]="Infinitive";let r=e.transforms.conjugate(t,e),a=Object.keys(r);for(let s=0;s<a.length;s++){let o=r[a[s]];i[o]=i[o]||a[s]}},Comparable:(i,t,e)=>{i[t]="Comparable";let r=e.transforms.adjectives(t),a=Object.keys(r);for(let s=0;s<a.length;s++){let o=r[a[s]];i[o]=i[o]||a[s]}},PhrasalVerb:(i,t,e)=>{i[t]=["PhrasalVerb","Infinitive"];let r=t.split(" "),a=e.transforms.conjugate(r[0],e),s=Object.keys(a);for(let o=0;o<s.length;o++){let l=a[s[o]]+" "+r[1];i[l]=i[l]||["PhrasalVerb",s[o]],e.hasCompound[a[s[o]]]=!0}},Demonym:(i,t,e)=>{i[t]="Demonym";let r=e.transforms.toPlural(t,e);i[r]=i[r]||["Demonym","Plural"]}},pB=function(i,t,e){Object.keys(i).forEach(r=>{let a=i[r];a!=="Abbreviation"&&a!=="Unit"||(e.cache.abbreviations[r]=!0);let s=r.split(" ");s.length>1&&(e.hasCompound[s[0]]=!0),cB[a]===void 0?t[r]!==void 0?(typeof t[r]=="string"&&(t[r]=[t[r]]),typeof a=="string"?t[r].push(a):t[r]=t[r].concat(a)):t[r]=a:cB[a](t,r,e)})},Gge={buildOut:function(i){let t=Object.assign({},Hge);return Object.keys(uB).forEach(e=>{let r=zge(uB[e]);Object.keys(r).forEach(a=>{r[a]=e}),pB(r,t,i)}),t},addWords:pB},qge=function(i){let t=i.irregulars.nouns,e=Object.keys(t);for(let s=0;s<e.length;s++){let o=e[s];i.words[o]="Singular",i.words[t[o]]="Plural"}let r=i.irregulars.verbs,a=Object.keys(r);for(let s=0;s<a.length;s++){let o=a[s];i.words[o]=i.words[o]||"Infinitive";let l=i.transforms.conjugate(o,i);l=Object.assign(l,r[o]),Object.keys(l).forEach(u=>{i.words[l[u]]=i.words[l[u]]||u,i.words[l[u]]==="Participle"&&(i.words[l[u]]=u)})}},Wge={g:"Gerund",prt:"Participle",perf:"PerfectTense",pst:"PastTense",fut:"FuturePerfect",pres:"PresentTense",pluperf:"Pluperfect",a:"Actor"},td={act:{a:"_or"},ache:{pst:"ached",g:"aching"},age:{g:"ageing",pst:"aged",pres:"ages"},aim:{a:"_er",g:"_ing",pst:"_ed"},arise:{prt:"_n",pst:"arose"},babysit:{a:"_ter",pst:"babysat"},ban:{a:"",g:"_ning",pst:"_ned"},be:{a:"",g:"am",prt:"been",pst:"was",pres:"is"},beat:{a:"_er",g:"_ing",prt:"_en"},become:{prt:"_"},begin:{g:"_ning",prt:"begun",pst:"began"},being:{g:"are",pst:"were",pres:"are"},bend:{prt:"bent"},bet:{a:"_ter",prt:"_"},bind:{pst:"bound"},bite:{g:"biting",prt:"bitten",pst:"bit"},bleed:{pst:"bled",prt:"bled"},blow:{prt:"_n",pst:"blew"},boil:{a:"_er"},brake:{prt:"broken"},break:{pst:"broke"},breed:{pst:"bred"},bring:{pst:"brought",prt:"brought"},broadcast:{pst:"_"},budget:{pst:"_ed"},build:{pst:"built",prt:"built"},burn:{prt:"_ed"},burst:{prt:"_"},buy:{pst:"bought",prt:"bought"},can:{a:"",fut:"_",g:"",pst:"could",perf:"could",pluperf:"could",pres:"_"},catch:{pst:"caught"},choose:{g:"choosing",prt:"chosen",pst:"chose"},cling:{prt:"clung"},come:{prt:"_",pst:"came",g:"coming"},compete:{a:"competitor",g:"competing",pst:"_d"},cost:{pst:"_"},creep:{prt:"crept"},cut:{prt:"_"},deal:{pst:"_t",prt:"_t"},develop:{a:"_er",g:"_ing",pst:"_ed"},die:{g:"dying",pst:"_d"},dig:{g:"_ging",pst:"dug",prt:"dug"},dive:{prt:"_d"},do:{pst:"did",pres:"_es"},draw:{prt:"_n",pst:"drew"},dream:{prt:"_t"},drink:{prt:"drunk",pst:"drank"},drive:{g:"driving",prt:"_n",pst:"drove"},drop:{g:"_ping",pst:"_ped"},eat:{a:"_er",g:"_ing",prt:"_en",pst:"ate"},edit:{pst:"_ed",g:"_ing"},egg:{pst:"_ed"},fall:{prt:"_en",pst:"fell"},feed:{prt:"fed",pst:"fed"},feel:{a:"_er",pst:"felt"},fight:{pst:"fought",prt:"fought"},find:{pst:"found"},flee:{g:"_ing",prt:"fled"},fling:{prt:"flung"},fly:{prt:"flown",pst:"flew"},forbid:{pst:"forbade"},forget:{g:"_ing",prt:"forgotten",pst:"forgot"},forgive:{g:"forgiving",prt:"_n",pst:"forgave"},free:{a:"",g:"_ing"},freeze:{g:"freezing",prt:"frozen",pst:"froze"},get:{pst:"got",prt:"gotten"},give:{g:"giving",prt:"_n",pst:"gave"},go:{prt:"_ne",pst:"went",pres:"goes"},grow:{prt:"_n"},guide:{pst:"_d"},hang:{pst:"hung",prt:"hung"},have:{g:"having",pst:"had",prt:"had",pres:"has"},hear:{pst:"_d",prt:"_d"},hide:{prt:"hidden",pst:"hid"},hit:{prt:"_"},hold:{pst:"held",prt:"held"},hurt:{pst:"_",prt:"_"},ice:{g:"icing",pst:"_d"},imply:{pst:"implied",pres:"implies"},is:{a:"",g:"being",pst:"was",pres:"_"},keep:{prt:"kept"},kneel:{prt:"knelt"},know:{prt:"_n"},lay:{pst:"laid",prt:"laid"},lead:{pst:"led",prt:"led"},leap:{prt:"_t"},leave:{pst:"left",prt:"left"},lend:{prt:"lent"},lie:{g:"lying",pst:"lay"},light:{pst:"lit",prt:"lit"},log:{g:"_ging",pst:"_ged"},loose:{prt:"lost"},lose:{g:"losing",pst:"lost"},make:{pst:"made",prt:"made"},mean:{pst:"_t",prt:"_t"},meet:{a:"_er",g:"_ing",pst:"met",prt:"met"},miss:{pres:"_"},name:{g:"naming"},patrol:{g:"_ling",pst:"_led"},pay:{pst:"paid",prt:"paid"},prove:{prt:"_n"},puke:{g:"puking"},put:{prt:"_"},quit:{prt:"_"},read:{pst:"_",prt:"_"},ride:{prt:"ridden"},reside:{pst:"_d"},ring:{pst:"rang",prt:"rung"},rise:{fut:"will have _n",g:"rising",prt:"_n",pst:"rose",pluperf:"had _n"},rub:{g:"_bing",pst:"_bed"},run:{g:"_ning",prt:"_",pst:"ran"},say:{pst:"said",prt:"said",pres:"_s"},seat:{pst:"sat",prt:"sat"},see:{g:"_ing",prt:"_n",pst:"saw"},seek:{prt:"sought"},sell:{pst:"sold",prt:"sold"},send:{prt:"sent"},set:{prt:"_"},sew:{prt:"_n"},shake:{prt:"_n"},shave:{prt:"_d"},shed:{g:"_ding",pst:"_",pres:"_s"},shine:{pst:"shone",prt:"shone"},shoot:{pst:"shot",prt:"shot"},show:{pst:"_ed"},shut:{prt:"_"},sing:{prt:"sung",pst:"sang"},sink:{pst:"sank",pluperf:"had sunk"},sit:{pst:"sat"},ski:{pst:"_ied"},slay:{prt:"slain"},sleep:{prt:"slept"},slide:{pst:"slid",prt:"slid"},smash:{pres:"_es"},sneak:{prt:"snuck"},speak:{fut:"will have spoken",prt:"spoken",pst:"spoke",perf:"have spoken",pluperf:"had spoken"},speed:{prt:"sped"},spend:{prt:"spent"},spill:{prt:"_ed",pst:"spilt"},spin:{g:"_ning",pst:"spun",prt:"spun"},spit:{prt:"spat"},split:{prt:"_"},spread:{pst:"_"},spring:{prt:"sprung"},stand:{pst:"stood"},steal:{a:"_er",pst:"stole"},stick:{pst:"stuck"},sting:{pst:"stung"},stink:{pst:"stunk",prt:"stunk"},stream:{a:"_er"},strew:{prt:"_n"},strike:{g:"striking",pst:"struck"},suit:{a:"_er",g:"_ing",pst:"_ed"},sware:{prt:"sworn"},swear:{pst:"swore"},sweep:{prt:"swept"},swim:{g:"_ming",pst:"swam"},swing:{pst:"swung"},take:{fut:"will have _n",pst:"took",perf:"have _n",pluperf:"had _n"},teach:{pst:"taught",pres:"_es"},tear:{pst:"tore"},tell:{pst:"told"},think:{pst:"thought"},thrive:{prt:"_d"},tie:{g:"tying",pst:"_d"},undergo:{prt:"_ne"},understand:{pst:"understood"},upset:{prt:"_"},wait:{a:"_er",g:"_ing",pst:"_ed"},wake:{pst:"woke"},wear:{pst:"wore"},weave:{prt:"woven"},wed:{pst:"wed"},weep:{prt:"wept"},win:{g:"_ning",pst:"won"},wind:{prt:"wound"},withdraw:{pst:"withdrew"},wring:{prt:"wrung"},write:{g:"writing",prt:"written",pst:"wrote"}},mB=Object.keys(td);for(let i=0;i<mB.length;i++){let t=mB[i],e={};Object.keys(td[t]).forEach(r=>{let a=td[t][r];a=a.replace("_",t),e[Wge[r]]=a}),td[t]=e}var $ge=td,U1={b:[{reg:/([^aeiou][aeiou])b$/i,repl:{pr:"$1bs",pa:"$1bbed",gr:"$1bbing"}}],d:[{reg:/(end)$/i,repl:{pr:"$1s",pa:"ent",gr:"$1ing",ar:"$1er"}},{reg:/(eed)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing",ar:"$1er"}},{reg:/(ed)$/i,repl:{pr:"$1s",pa:"$1ded",ar:"$1der",gr:"$1ding"}},{reg:/([^aeiou][ou])d$/i,repl:{pr:"$1ds",pa:"$1dded",gr:"$1dding"}}],e:[{reg:/(eave)$/i,repl:{pr:"$1s",pa:"$1d",gr:"eaving",ar:"$1r"}},{reg:/(ide)$/i,repl:{pr:"$1s",pa:"ode",gr:"iding",ar:"ider"}},{reg:/(t|sh?)(ake)$/i,repl:{pr:"$1$2s",pa:"$1ook",gr:"$1aking",ar:"$1$2r"}},{reg:/w(ake)$/i,repl:{pr:"w$1s",pa:"woke",gr:"waking",ar:"w$1r"}},{reg:/m(ake)$/i,repl:{pr:"m$1s",pa:"made",gr:"making",ar:"m$1r"}},{reg:/(a[tg]|i[zn]|ur|nc|gl|is)e$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}},{reg:/([bd]l)e$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}},{reg:/(om)e$/i,repl:{pr:"$1es",pa:"ame",gr:"$1ing"}}],g:[{reg:/([^aeiou][aou])g$/i,repl:{pr:"$1gs",pa:"$1gged",gr:"$1gging"}}],h:[{reg:/(..)([cs]h)$/i,repl:{pr:"$1$2es",pa:"$1$2ed",gr:"$1$2ing"}}],k:[{reg:/(ink)$/i,repl:{pr:"$1s",pa:"unk",gr:"$1ing",ar:"$1er"}}],m:[{reg:/([^aeiou][aeiou])m$/i,repl:{pr:"$1ms",pa:"$1mmed",gr:"$1mming"}}],n:[{reg:/(en)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}}],p:[{reg:/(e)(ep)$/i,repl:{pr:"$1$2s",pa:"$1pt",gr:"$1$2ing",ar:"$1$2er"}},{reg:/([^aeiou][aeiou])p$/i,repl:{pr:"$1ps",pa:"$1pped",gr:"$1pping"}},{reg:/([aeiu])p$/i,repl:{pr:"$1ps",pa:"$1p",gr:"$1pping"}}],r:[{reg:/([td]er)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}},{reg:/(er)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}}],s:[{reg:/(ish|tch|ess)$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}}],t:[{reg:/(ion|end|e[nc]t)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}},{reg:/(.eat)$/i,repl:{pr:"$1s",pa:"$1ed",gr:"$1ing"}},{reg:/([aeiu])t$/i,repl:{pr:"$1ts",pa:"$1t",gr:"$1tting"}},{reg:/([^aeiou][aeiou])t$/i,repl:{pr:"$1ts",pa:"$1tted",gr:"$1tting"}}],w:[{reg:/(.llow)$/i,repl:{pr:"$1s",pa:"$1ed"}},{reg:/(..)(ow)$/i,repl:{pr:"$1$2s",pa:"$1ew",gr:"$1$2ing",prt:"$1$2n"}}],y:[{reg:/(i|f|rr)y$/i,repl:{pr:"$1ies",pa:"$1ied",gr:"$1ying"}}],z:[{reg:/([aeiou]zz)$/i,repl:{pr:"$1es",pa:"$1ed",gr:"$1ing"}}]},Kge={pr:"PresentTense",pa:"PastTense",gr:"Gerund",prt:"Participle",ar:"Actor"},Xge=function(i,t){let e={},r=Object.keys(t.repl);for(let a=0;a<r.length;a+=1){let s=r[a];e[Kge[s]]=i.replace(t.reg,t.repl[s])}return e},fB=/[bcdfghjklmnpqrstvwxz]y$/,Yge=function(i=""){let t=i[i.length-1];if(U1.hasOwnProperty(t)===!0){for(let e=0;e<U1[t].length;e+=1)if(U1[t][e].reg.test(i)===!0)return Xge(i,U1[t][e])}return{}},sw={Gerund:i=>i.charAt(i.length-1)==="e"?i.replace(/e$/,"ing"):i+"ing",PresentTense:i=>i.charAt(i.length-1)==="s"?i+"es":fB.test(i)===!0?i.slice(0,-1)+"ies":i+"s",PastTense:i=>i.charAt(i.length-1)==="e"?i+"d":i.substr(-2)==="ed"?i:fB.test(i)===!0?i.slice(0,-1)+"ied":i+"ed"},Zge=function(i="",t){let e={};return t&&t.irregulars&&t.irregulars.verbs.hasOwnProperty(i)===!0&&(e=Object.assign({},t.irregulars.verbs[i])),e=Object.assign({},Yge(i),e),e.Gerund===void 0&&(e.Gerund=sw.Gerund(i)),e.PastTense===void 0&&(e.PastTense=sw.PastTense(i)),e.PresentTense===void 0&&(e.PresentTense=sw.PresentTense(i)),e},dB=[/ght$/,/nge$/,/ough$/,/ain$/,/uel$/,/[au]ll$/,/ow$/,/oud$/,/...p$/],hB=[/ary$/],yB={nice:"nicest",late:"latest",hard:"hardest",inner:"innermost",outer:"outermost",far:"furthest",worse:"worst",bad:"worst",good:"best",big:"biggest",large:"largest"},z1=[{reg:/y$/i,repl:"iest"},{reg:/([aeiou])t$/i,repl:"$1ttest"},{reg:/([aeou])de$/i,repl:"$1dest"},{reg:/nge$/i,repl:"ngest"},{reg:/([aeiou])te$/i,repl:"$1test"}],bB=[/ght$/,/nge$/,/ough$/,/ain$/,/uel$/,/[au]ll$/,/ow$/,/old$/,/oud$/,/e[ae]p$/],gB=[/ary$/,/ous$/],vB={grey:"greyer",gray:"grayer",green:"greener",yellow:"yellower",red:"redder",good:"better",well:"better",bad:"worse",sad:"sadder",big:"bigger"},H1=[{reg:/y$/i,repl:"ier"},{reg:/([aeiou])t$/i,repl:"$1tter"},{reg:/([aeou])de$/i,repl:"$1der"},{reg:/nge$/i,repl:"nger"}],TB={toSuperlative:function(i){if(yB.hasOwnProperty(i))return yB[i];for(let t=0;t<z1.length;t++)if(z1[t].reg.test(i))return i.replace(z1[t].reg,z1[t].repl);for(let t=0;t<hB.length;t++)if(hB[t].test(i)===!0)return null;for(let t=0;t<dB.length;t++)if(dB[t].test(i)===!0)return i.charAt(i.length-1)==="e"?i+"st":i+"est";return i+"est"},toComparative:function(i){if(vB.hasOwnProperty(i))return vB[i];for(let t=0;t<H1.length;t++)if(H1[t].reg.test(i)===!0)return i.replace(H1[t].reg,H1[t].repl);for(let t=0;t<gB.length;t++)if(gB[t].test(i)===!0)return null;for(let t=0;t<bB.length;t++)if(bB[t].test(i)===!0)return i+"er";return/e$/.test(i)===!0?i+"r":i+"er"}},Jge=function(i){let t={},e=TB.toSuperlative(i);e&&(t.Superlative=e);let r=TB.toComparative(i);return r&&(t.Comparative=r),t},G1={a:[[/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"],[/([ti])a$/i,"$1a"]],e:[[/(kn|l|w)ife$/i,"$1ives"],[/(hive)$/i,"$1s"],[/([m|l])ouse$/i,"$1ice"],[/([m|l])ice$/i,"$1ice"]],f:[[/^(dwar|handkerchie|hoo|scar|whar)f$/i,"$1ves"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)f$/i,"$1ves"]],i:[[/(octop|vir)i$/i,"$1i"]],m:[[/([ti])um$/i,"$1a"]],n:[[/^(oxen)$/i,"$1"]],o:[[/(al|ad|at|er|et|ed|ad)o$/i,"$1oes"]],s:[[/(ax|test)is$/i,"$1es"],[/(alias|status)$/i,"$1es"],[/sis$/i,"ses"],[/(bu)s$/i,"$1ses"],[/(sis)$/i,"ses"],[/^(?!talis|.*hu)(.*)man$/i,"$1men"],[/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]],x:[[/(matr|vert|ind|cort)(ix|ex)$/i,"$1ices"],[/^(ox)$/i,"$1en"]],y:[[/([^aeiouy]|qu)y$/i,"$1ies"]],z:[[/(quiz)$/i,"$1zes"]]},Qge=/(x|ch|sh|s|z)$/,eve=function(i="",t){let e=t.irregulars.nouns;if(e.hasOwnProperty(i))return e[i];let r=function(a){let s=a[a.length-1];if(G1.hasOwnProperty(s)===!0)for(let o=0;o<G1[s].length;o+=1){let l=G1[s][o][0];if(l.test(a)===!0)return a.replace(l,G1[s][o][1])}return null}(i);return r!==null?r:Qge.test(i)?i+"es":i+"s"},q1=[[/([^v])ies$/i,"$1y"],[/ises$/i,"isis"],[/(kn|[^o]l|w)ives$/i,"$1ife"],[/^((?:ca|e|ha|(?:our|them|your)?se|she|wo)l|lea|loa|shea|thie)ves$/i,"$1f"],[/^(dwar|handkerchie|hoo|scar|whar)ves$/i,"$1f"],[/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"],[/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"],[/(buffal|tomat|tornad)(oes)$/i,"$1o"],[/(eas)es$/i,"$1e"],[/(..[aeiou]s)es$/i,"$1"],[/(vert|ind|cort)(ices)$/i,"$1ex"],[/(matr|append)(ices)$/i,"$1ix"],[/(x|ch|ss|sh|z|o)es$/i,"$1"],[/men$/i,"man"],[/(n)ews$/i,"$1ews"],[/([ti])a$/i,"$1um"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/(s)eries$/i,"$1eries"],[/(m)ovies$/i,"$1ovie"],[/([m|l])ice$/i,"$1ouse"],[/(cris|ax|test)es$/i,"$1is"],[/(alias|status)es$/i,"$1"],[/(ss)$/i,"$1"],[/(ics)$/i,"$1"],[/s$/i,""]],tve=function(i,t){let e=t.irregulars.nouns,r=(a=e,Object.keys(a).reduce((s,o)=>(s[a[o]]=o,s),{}));var a;if(r.hasOwnProperty(i))return r[i];for(let s=0;s<q1.length;s++)if(q1[s][0].test(i)===!0)return i=i.replace(q1[s][0],q1[s][1]);return i},rve={Participle:[{reg:/own$/i,to:"ow"},{reg:/(.)un([g|k])$/i,to:"$1in$2"}],Actor:[{reg:/(er)er$/i,to:"$1"}],PresentTense:[{reg:/(..)(ies)$/i,to:"$1y"},{reg:/(tch|sh)es$/i,to:"$1"},{reg:/(ss|zz)es$/i,to:"$1"},{reg:/([tzlshicgrvdnkmu])es$/i,to:"$1e"},{reg:/(n[dtk]|c[kt]|[eo]n|i[nl]|er|a[ytrl])s$/i,to:"$1"},{reg:/(ow)s$/i,to:"$1"},{reg:/(op)s$/i,to:"$1"},{reg:/([eirs])ts$/i,to:"$1t"},{reg:/(ll)s$/i,to:"$1"},{reg:/(el)s$/i,to:"$1"},{reg:/(ip)es$/i,to:"$1e"},{reg:/ss$/i,to:"ss"},{reg:/s$/i,to:""}],Gerund:[{reg:/(..)(p|d|t|g){2}ing$/i,to:"$1$2"},{reg:/(ll|ss|zz)ing$/i,to:"$1"},{reg:/([^aeiou])ying$/i,to:"$1y"},{reg:/([^ae]i.)ing$/i,to:"$1e"},{reg:/(ea[dklnrtv])ing$/i,to:"$1"},{reg:/(ch|sh)ing$/i,to:"$1"},{reg:/(z)ing$/i,to:"$1e"},{reg:/(a[gdkvtc])ing$/i,to:"$1e"},{reg:/(u[rtcbn])ing$/i,to:"$1e"},{reg:/([^o]o[bdknprv])ing$/i,to:"$1e"},{reg:/([tbckg]l)ing$/i,to:"$1e"},{reg:/(c|s)ing$/i,to:"$1e"},{reg:/(..)ing$/i,to:"$1"}],PastTense:[{reg:/(ued)$/i,to:"ue"},{reg:/ea(rn|l|m)ed$/i,to:"ea$1"},{reg:/a([^aeiouy])ed$/i,to:"a$1e"},{reg:/([aeiou]zz)ed$/i,to:"$1"},{reg:/(e|i)lled$/i,to:"$1ll"},{reg:/(.)(sh|ch)ed$/i,to:"$1$2"},{reg:/(tl|gl)ed$/i,to:"$1e"},{reg:/(um?pt?)ed$/i,to:"$1"},{reg:/(ss)ed$/i,to:"$1"},{reg:/pped$/i,to:"p"},{reg:/tted$/i,to:"t"},{reg:/(..)gged$/i,to:"$1g"},{reg:/(..)lked$/i,to:"$1lk"},{reg:/([^aeiouy][aeiou])ked$/i,to:"$1ke"},{reg:/(.[aeiou])led$/i,to:"$1l"},{reg:/(..)(h|ion|n[dt]|ai.|[cs]t|pp|all|ss|tt|int|ail|ld|en|oo.|er|k|pp|w|ou.|rt|ght|rm)ed$/i,to:"$1$2"},{reg:/(.ut)ed$/i,to:"$1e"},{reg:/(.pt)ed$/i,to:"$1"},{reg:/(us)ed$/i,to:"$1e"},{reg:/(dd)ed$/i,to:"$1"},{reg:/(..[^aeiouy])ed$/i,to:"$1e"},{reg:/(..)ied$/i,to:"$1y"},{reg:/(.o)ed$/i,to:"$1o"},{reg:/(..i)ed$/i,to:"$1"},{reg:/(.a[^aeiou])ed$/i,to:"$1"},{reg:/([aeiou][^aeiou])ed$/i,to:"$1e"},{reg:/([rl])ew$/i,to:"$1ow"},{reg:/([pl])t$/i,to:"$1t"}]},W1={Gerund:["ing"],Actor:["erer"],Infinitive:["ate","ize","tion","rify","then","ress","ify","age","nce","ect","ise","ine","ish","ace","ash","ure","tch","end","ack","and","ute","ade","ock","ite","ase","ose","use","ive","int","nge","lay","est","ain","ant","ent","eed","er","le","own","unk","ung","en"],PastTense:["ed","lt","nt","pt","ew","ld"],PresentTense:["rks","cks","nks","ngs","mps","tes","zes","ers","les","acks","ends","ands","ocks","lays","eads","lls","els","ils","ows","nds","ays","ams","ars","ops","ffs","als","urs","lds","ews","ips","es","ts","ns"]};W1=Object.keys(W1).reduce((i,t)=>(W1[t].forEach(e=>i[e]=t),i),{});var ow=rve,$1=W1,nve=jge,NB=Gge,ive=qge,ave=oB,sve={nouns:{addendum:"addenda",alga:"algae",alumna:"alumnae",alumnus:"alumni",analysis:"analyses",antenna:"antennae",appendix:"appendices",avocado:"avocados",axis:"axes",bacillus:"bacilli",barracks:"barracks",beau:"beaux",bus:"buses",cactus:"cacti",chateau:"chateaux",child:"children",circus:"circuses",clothes:"clothes",corpus:"corpora",criterion:"criteria",curriculum:"curricula",database:"databases",deer:"deer",diagnosis:"diagnoses",echo:"echoes",embargo:"embargoes",epoch:"epochs",foot:"feet",formula:"formulae",fungus:"fungi",genus:"genera",goose:"geese",halo:"halos",hippopotamus:"hippopotami",index:"indices",larva:"larvae",leaf:"leaves",libretto:"libretti",loaf:"loaves",man:"men",matrix:"matrices",memorandum:"memoranda",modulus:"moduli",mosquito:"mosquitoes",mouse:"mice",nebula:"nebulae",nucleus:"nuclei",octopus:"octopi",opus:"opera",ovum:"ova",ox:"oxen",parenthesis:"parentheses",person:"people",phenomenon:"phenomena",prognosis:"prognoses",quiz:"quizzes",radius:"radii",referendum:"referenda",rodeo:"rodeos",sex:"sexes",shoe:"shoes",sombrero:"sombreros",stimulus:"stimuli",stomach:"stomachs",syllabus:"syllabi",synopsis:"synopses",tableau:"tableaux",thesis:"theses",thief:"thieves",tooth:"teeth",tornado:"tornados",tuxedo:"tuxedos",vertebra:"vertebrae"},verbs:$ge},ove={conjugate:Zge,adjectives:Jge,toPlural:eve,toSingular:tve,toInfinitive:function(i,t,e){if(!i)return"";if(t.words.hasOwnProperty(i)===!0){let r=t.irregulars.verbs,a=Object.keys(r);for(let s=0;s<a.length;s++){let o=Object.keys(r[a[s]]);for(let l=0;l<o.length;l++)if(i===r[a[s]][o[l]])return a[s]}}if((e=e||function(r){let a=r.substr(r.length-3);if($1.hasOwnProperty(a)===!0)return $1[a];let s=r.substr(r.length-2);return $1.hasOwnProperty(s)===!0?$1[s]:r.substr(r.length-1)==="s"?"PresentTense":null}(i))&&ow[e])for(let r=0;r<ow[e].length;r++){let a=ow[e][r];if(a.reg.test(i)===!0)return i.replace(a.reg,a.to)}return i}},CB=!1,K1=class{constructor(){Object.defineProperty(this,"words",{enumerable:!1,value:{},writable:!0}),Object.defineProperty(this,"hasCompound",{enumerable:!1,value:{},writable:!0}),Object.defineProperty(this,"irregulars",{enumerable:!1,value:sve,writable:!0}),Object.defineProperty(this,"tags",{enumerable:!1,value:Object.assign({},nve),writable:!0}),Object.defineProperty(this,"transforms",{enumerable:!1,value:ove,writable:!0}),Object.defineProperty(this,"taggers",{enumerable:!1,value:[],writable:!0}),Object.defineProperty(this,"cache",{enumerable:!1,value:{abbreviations:{}}}),this.words=NB.buildOut(this),ive(this)}verbose(t){return CB=t,this}isVerbose(){return CB}addWords(t){let e={};Object.keys(t).forEach(r=>{let a=t[r];r=r.toLowerCase().trim(),e[r]=a}),NB.addWords(e,this.words,this)}addConjugations(t){return Object.assign(this.irregulars.verbs,t),this}addPlurals(t){return Object.assign(this.irregulars.nouns,t),this}addTags(t){return t=Object.assign({},t),this.tags=Object.assign(this.tags,t),this.tags=ave(this.tags),this}postProcess(t){return this.taggers.push(t),this}stats(){return{words:Object.keys(this.words).length,plurals:Object.keys(this.irregulars.nouns).length,conjugations:Object.keys(this.irregulars.verbs).length,compounds:Object.keys(this.hasCompound).length,postProcessors:this.taggers.length}}},SB=function(i){return JSON.parse(JSON.stringify(i))};K1.prototype.clone=function(){let i=new K1;return i.words=Object.assign({},this.words),i.hasCompound=Object.assign({},this.hasCompound),i.irregulars=SB(this.irregulars),i.tags=SB(this.tags),i.transforms=this.transforms,i.taggers=this.taggers,i};var lve=K1,AB={};(function(i){i.all=function(){return this.parents()[0]||this},i.parent=function(){return this.from?this.from:this},i.parents=function(t){let e=[],r=function(a){a.from&&(e.push(a.from),r(a.from))};return r(this),e=e.reverse(),typeof t=="number"?e[t]:e},i.clone=function(t){let e=this.list.map(r=>r.clone(t));return this.buildFrom(e)},i.wordCount=function(){return this.list.reduce((t,e)=>t+=e.wordCount(),0)},i.wordcount=i.wordCount})(AB);var wB={};(function(i){i.first=function(t){return t===void 0?this.get(0):this.slice(0,t)},i.last=function(t){if(t===void 0)return this.get(this.list.length-1);let e=this.list.length;return this.slice(e-t,e)},i.slice=function(t,e){let r=this.list.slice(t,e);return this.buildFrom(r)},i.eq=function(t){let e=this.list[t];return e===void 0?this.buildFrom([]):this.buildFrom([e])},i.get=i.eq,i.firstTerms=function(){return this.match("^.")},i.firstTerm=i.firstTerms,i.lastTerms=function(){return this.match(".$")},i.lastTerm=i.lastTerms,i.termList=function(t){let e=[];for(let r=0;r<this.list.length;r++){let a=this.list[r].terms();for(let s=0;s<a.length;s++)if(e.push(a[s]),t!==void 0&&e[t]!==void 0)return e[t]}return e},i.groups=function(t){return t===void 0?function(e){let r={},a={};for(let o=0;o<e.list.length;o++){let l=e.list[o],u=Object.keys(l.groups).map(c=>l.groups[c]);for(let c=0;c<u.length;c++){let{group:p,start:m,length:f}=u[c];a[p]||(a[p]=[]),a[p].push(l.buildFrom(m,f))}}let s=Object.keys(a);for(let o=0;o<s.length;o++){let l=s[o];r[l]=e.buildFrom(a[l])}return r}(this):(typeof t=="number"&&(t=String(t)),function(e,r){let a=[];for(let s=0;s<e.list.length;s++){let o=e.list[s],l=Object.keys(o.groups);l=l.filter(u=>o.groups[u].group===r),l.forEach(u=>{a.push(o.buildFrom(o.groups[u].start,o.groups[u].length))})}return e.buildFrom(a)}(this,t)||this.buildFrom([]))},i.group=i.groups,i.sentences=function(t){let e=[];return this.list.forEach(r=>{e.push(r.fullSentence())}),typeof t=="number"?this.buildFrom([e[t]]):this.buildFrom(e)},i.sentence=i.sentences})(wB);var xB={},uve=function(i,t){if(i._cache&&i._cache.set===!0){let{words:e,tags:r}=function(a){let s=[],o=[];return a.forEach(l=>{l.optional!==!0&&l.negative!==!0&&(l.tag!==void 0&&s.push(l.tag),l.word!==void 0&&o.push(l.word))}),{tags:s,words:o}}(t);for(let a=0;a<e.length;a++)if(i._cache.words[e[a]]===void 0)return!1;for(let a=0;a<r.length;a++)if(i._cache.tags[r[a]]===void 0)return!1}return!0};(function(i){let t=Qf,e=uve;i.match=function(r,a={}){typeof a!="string"&&typeof a!="number"&&a!==null||(a={group:a});let s=t(r,a);if(s.length===0)return this.buildFrom([]);if(e(this,s)===!1)return this.buildFrom([]);let o=this.list.reduce((l,u)=>l.concat(u.match(s)),[]);return a.group!==void 0&&a.group!==null&&a.group!==""?this.buildFrom(o).groups(a.group):this.buildFrom(o)},i.not=function(r,a={}){let s=t(r,a);if(s.length===0||e(this,s)===!1)return this;let o=this.list.reduce((l,u)=>l.concat(u.not(s)),[]);return this.buildFrom(o)},i.matchOne=function(r,a={}){let s=t(r,a);if(e(this,s)===!1)return this.buildFrom([]);for(let o=0;o<this.list.length;o++){let l=this.list[o].match(s,!0);return this.buildFrom(l)}return this.buildFrom([])},i.if=function(r,a={}){let s=t(r,a);if(e(this,s)===!1)return this.buildFrom([]);let o=this.list.filter(l=>l.has(s)===!0);return this.buildFrom(o)},i.ifNo=function(r,a={}){let s=t(r,a),o=this.list.filter(l=>l.has(s)===!1);return this.buildFrom(o)},i.has=function(r,a={}){let s=t(r,a);return e(this,s)!==!1&&this.list.some(o=>o.has(s)===!0)},i.lookAhead=function(r,a={}){r||(r=".*");let s=t(r,a),o=[];return this.list.forEach(l=>{o=o.concat(l.lookAhead(s))}),o=o.filter(l=>l),this.buildFrom(o)},i.lookAfter=i.lookAhead,i.lookBehind=function(r,a={}){r||(r=".*");let s=t(r,a),o=[];return this.list.forEach(l=>{o=o.concat(l.lookBehind(s))}),o=o.filter(l=>l),this.buildFrom(o)},i.lookBefore=i.lookBehind,i.before=function(r,a={}){let s=t(r,a),o=this.if(s).list.map(l=>{let u=l.terms().map(m=>m.id),c=l.match(s)[0],p=u.indexOf(c.start);return p===0||p===-1?null:l.buildFrom(l.start,p)});return o=o.filter(l=>l!==null),this.buildFrom(o)},i.after=function(r,a={}){let s=t(r,a),o=this.if(s).list.map(l=>{let u=l.terms(),c=u.map(h=>h.id),p=l.match(s)[0],m=c.indexOf(p.start);if(m===-1||!u[m+p.length])return null;let f=u[m+p.length].id,d=l.length-m-p.length;return l.buildFrom(f,d)});return o=o.filter(l=>l!==null),this.buildFrom(o)},i.hasAfter=function(r,a={}){return this.filter(s=>s.lookAfter(r,a).found)},i.hasBefore=function(r,a={}){return this.filter(s=>s.lookBefore(r,a).found)}})(xB);var rd={},EB=function(i,t,e,r){let a=[];typeof i=="string"&&(a=i.split(" ")),t.list.forEach(s=>{let o=s.terms();e===!0&&(o=o.filter(l=>l.canBe(i,t.world))),o.forEach((l,u)=>{a.length>1?a[u]&&a[u]!=="."&&l.tag(a[u],r,t.world):l.tag(i,r,t.world)})})};rd.tag=function(i,t){return i?(EB(i,this,!1,t),this):this},rd.tagSafe=function(i,t){return i?(EB(i,this,!0,t),this):this},rd.unTag=function(i,t){return this.list.forEach(e=>{e.terms().forEach(r=>r.unTag(i,t,this.world))}),this},rd.canBe=function(i){if(!i)return this;let t=this.world,e=this.list.reduce((r,a)=>r.concat(a.canBe(i,t)),[]);return this.buildFrom(e)};var cve={map:function(i){if(!i)return this;let t=this.list.map((e,r)=>{let a=this.buildFrom([e]);a.from=null;let s=i(a,r);return s&&s.list&&s.list[0]?s.list[0]:s});return t=t.filter(e=>e),t.length===0?this.buildFrom(t):typeof t[0]!="object"||t[0].isA!=="Phrase"?t:this.buildFrom(t)},forEach:function(i,t){return i?(this.list.forEach((e,r)=>{let a=this.buildFrom([e]);t===!0&&(a.from=null),i(a,r)}),this):this},filter:function(i){if(!i)return this;let t=this.list.filter((e,r)=>{let a=this.buildFrom([e]);return a.from=null,i(a,r)});return this.buildFrom(t)},find:function(i){if(!i)return this;let t=this.list.find((e,r)=>{let a=this.buildFrom([e]);return a.from=null,i(a,r)});return t?this.buildFrom([t]):void 0},some:function(i){return i?this.list.some((t,e)=>{let r=this.buildFrom([t]);return r.from=null,i(r,e)}):this},random:function(i){if(!this.found)return this;let t=Math.floor(Math.random()*this.list.length);if(i===void 0){let e=[this.list[t]];return this.buildFrom(e)}return t+i>this.length&&(t=this.length-i,t=t<0?0:t),this.slice(t,t+i)}},RB={},pve=function(i,t,e){let r=function(s,o=[]){let l={};return s.forEach((u,c)=>{let p=!0;o[c]!==void 0&&(p=o[c]);let m=function(f){return f.split(/[ -]/g)}(u=(u=(u||"").toLowerCase()).replace(/[,;.!?]+$/,"")).map(f=>f.trim());l[m[0]]=l[m[0]]||{},m.length===1?l[m[0]].value=p:(l[m[0]].more=l[m[0]].more||[],l[m[0]].more.push({rest:m.slice(1),value:p}))}),l}(i,t),a=[];for(let s=0;s<e.list.length;s++){let o=e.list[s],l=o.terms().map(u=>u.reduced);for(let u=0;u<l.length;u++)r[l[u]]!==void 0&&(r[l[u]].more!==void 0&&r[l[u]].more.forEach(c=>{l[u+c.rest.length]!==void 0&&c.rest.every((p,m)=>p===l[u+m+1])===!0&&a.push({id:o.terms()[u].id,value:c.value,length:c.rest.length+1})}),r[l[u]].value!==void 0&&a.push({id:o.terms()[u].id,value:r[l[u]].value,length:1}))}return a};(function(i){let t=pve;i.lookup=function(e){let r=[],a=(s=e)&&Object.prototype.toString.call(s)==="[object Object]";var s;a===!0&&(e=Object.keys(e).map(u=>(r.push(e[u]),u))),typeof e=="string"&&(e=[e]),this._cache.set!==!0&&this.cache();let o=t(e,r,this),l=this.list[0];if(a===!0){let u={};return o.forEach(c=>{u[c.value]=u[c.value]||[],u[c.value].push(l.buildFrom(c.id,c.length))}),Object.keys(u).forEach(c=>{u[c]=this.buildFrom(u[c])}),u}return o=o.map(u=>l.buildFrom(u.id,u.length)),this.buildFrom(o)},i.lookUp=i.lookup})(RB);var mve={cache:function(i){i=i||{};let t={},e={};return this._cache.words=t,this._cache.tags=e,this._cache.set=!0,this.list.forEach((r,a)=>{r.cache=r.cache||{},r.terms().forEach(s=>{t[s.reduced]&&!t.hasOwnProperty(s.reduced)||(t[s.reduced]=t[s.reduced]||[],t[s.reduced].push(a),Object.keys(s.tags).forEach(o=>{e[o]=e[o]||[],e[o].push(a)}),i.root&&(s.setRoot(this.world),t[s.root]=[a]))})}),this},uncache:function(){return this._cache={},this.list.forEach(i=>{i.cache={}}),this.parents().forEach(i=>{i._cache={},i.list.forEach(t=>{t.cache={}})}),this}},lw={},fve=ed;lw.replaceWith=function(i,t={}){return i?(t===!0&&(t={keepTags:!0}),t===!1&&(t={keepTags:!1}),t=t||{},this.uncache(),this.list.forEach(e=>{let r,a=i;if(typeof i=="function"&&(a=i(e)),a&&typeof a=="object"&&a.isA==="Doc")r=a.list,this.pool().merge(a.pool());else{if(typeof a!="string")return;{t.keepCase!==!1&&e.terms(0).isTitleCase()&&(a=(s=a).charAt(0).toUpperCase()+s.substr(1)),r=fve(a,this.world,this.pool());let o=this.buildFrom(r);o.tagger(),r=o.list}}var s;if(t.keepTags===!0){let o=e.json({terms:{tags:!0}}).terms;r[0].terms().forEach((l,u)=>{o[u]&&l.tagSafe(o[u].tags,"keptTag",this.world)})}e.replace(r[0],this)}),this):this.delete()},lw.replace=function(i,t,e){return t===void 0?this.replaceWith(i,e):(this.match(i).replaceWith(t,e),this)};var VB={};(function(i){let t=ed,e=function(a){return a&&Object.prototype.toString.call(a)==="[object Object]"},r=function(a,s){let o=t(a,s.world)[0],l=s.buildFrom([o]);return l.tagger(),s.list=l.list,s};i.append=function(a=""){return a?this.found?(this.uncache(),this.list.forEach(s=>{let o;e(a)&&a.isA==="Doc"?o=a.list[0].clone():typeof a=="string"&&(o=t(a,this.world,this.pool())[0]),this.buildFrom([o]).tagger(),s.append(o,this)}),this):r(a,this):this},i.insertAfter=i.append,i.insertAt=i.append,i.prepend=function(a){return a?this.found?(this.uncache(),this.list.forEach(s=>{let o;e(a)&&a.isA==="Doc"?o=a.list[0].clone():typeof a=="string"&&(o=t(a,this.world,this.pool())[0]),this.buildFrom([o]).tagger(),s.prepend(o,this)}),this):r(a,this):this},i.insertBefore=i.prepend,i.concat=function(){this.uncache();let a=this.list.slice(0);for(let s=0;s<arguments.length;s++){let o=arguments[s];if(typeof o=="string"){let l=t(o,this.world);a=a.concat(l)}else o.isA==="Doc"?a=a.concat(o.list):o.isA==="Phrase"&&a.push(o)}return this.buildFrom(a)},i.delete=function(a){this.uncache();let s=this;return a&&(s=this.match(a)),s.list.forEach(o=>o.delete(this)),this},i.remove=i.delete})(VB);var IB={},dve={clean:!0,reduced:!0,root:!0};IB.text=function(i){i=i||{};let t=!1;this.parents().length===0&&(t=!0),(i==="root"||typeof i=="object"&&i.root)&&this.list.forEach(r=>{r.terms().forEach(a=>{a.root===null&&a.setRoot(this.world)})});let e=this.list.reduce((r,a,s)=>{let o=!t&&s===0,l=!t&&s===this.list.length-1;return r+a.text(i,o,l)},"");return dve[i]!==!0&&i.reduced!==!0&&i.clean!==!0&&i.root!==!0||(e=e.trim()),e};var OB={},hve=function(i,t,e){let r=function(a){let s=0,o=0,l={};return a.termList().forEach(u=>{l[u.id]={index:o,start:s+u.pre.length,length:u.text.length},s+=u.pre.length+u.text.length+u.post.length,o+=1}),l}(i.all());(e.terms.index||e.index)&&t.forEach(a=>{a.terms.forEach(s=>{s.index=r[s.id].index}),a.index=a.terms[0].index}),(e.terms.offset||e.offset)&&t.forEach(a=>{a.terms.forEach(s=>{s.offset=r[s.id]||{}}),a.offset={index:a.terms[0].offset.index,start:a.terms[0].offset.start-a.text.indexOf(a.terms[0].text),length:a.text.length}})};(function(i){let t=hve,e={text:!0,terms:!0,trim:!0};i.json=function(r={}){if(typeof r=="number"&&this.list[r])return this.list[r].json(e);(r=function(s){return(s=Object.assign({},e,s)).unique&&(s.reduced=!0),s.offset&&(s.text=!0,s.terms&&s.terms!==!0||(s.terms={}),s.terms.offset=!0),(s.index||s.terms.index)&&(s.terms=s.terms===!0?{}:s.terms,s.terms.id=!0),s}(r)).root===!0&&this.list.forEach(s=>{s.terms().forEach(o=>{o.root===null&&o.setRoot(this.world)})});let a=this.list.map(s=>s.json(r,this.world));if((r.terms.offset||r.offset||r.terms.index||r.index)&&t(this,a,r),r.frequency||r.freq||r.count){let s={};this.list.forEach(o=>{let l=o.text("reduced");s[l]=s[l]||0,s[l]+=1}),this.list.forEach((o,l)=>{a[l].count=s[o.text("reduced")]})}if(r.unique){let s={};a=a.filter(o=>s[o.reduced]!==!0&&(s[o.reduced]=!0,!0))}return a},i.data=i.json})(OB);var uw={},DB={exports:{}};(function(i){let t="[0m",e=function(s,o){for(s=s.toString();s.length<o;)s+=" ";return s},r={green:"#7f9c6c",red:"#914045",blue:"#6699cc",magenta:"#6D5685",cyan:"#2D85A8",yellow:"#e6d7b3",black:"#303b50"},a={green:function(s){return"[32m"+s+t},red:function(s){return"[31m"+s+t},blue:function(s){return"[34m"+s+t},magenta:function(s){return"[35m"+s+t},cyan:function(s){return"[36m"+s+t},yellow:function(s){return"[33m"+s+t},black:function(s){return"[30m"+s+t}};DB.exports=function(s){return typeof window!="undefined"&&window.document?(function(o){let l=o.world.tags;o.list.forEach(u=>{console.log(`
%c"`+u.text()+'"',"color: #e6d7b3;"),u.terms().forEach(c=>{let p=Object.keys(c.tags),m=c.text||"-";c.implicit&&(m="["+c.implicit+"]");let f="'"+m+"'";f=e(f,8);let d=p.find(y=>l[y]&&l[y].color),h="steelblue";l[d]&&(h=l[d].color,h=r[h]),console.log(`   ${f}  -  %c${p.join(", ")}`,`color: ${h||"steelblue"};`)})})}(s),s):(console.log(a.blue("=====")),s.list.forEach(o=>{console.log(a.blue("  -----")),o.terms().forEach(l=>{let u=Object.keys(l.tags),c=l.text||"-";l.implicit&&(c="["+l.implicit+"]"),c=a.yellow(c);let p="'"+c+"'";p=e(p,18);let m=a.blue("  \uFF5C ")+p+"  - "+function(f,d){return(f=f.map(h=>{if(!d.tags.hasOwnProperty(h))return h;let y=d.tags[h].color||"blue";return a[y](h)})).join(", ")}(u,s.world);console.log(m)})}),console.log(""),s)}})();var PB=DB.exports,yve=function(i){let t=i.json({text:!1,terms:!1,reduced:!0}),e={};t.forEach(a=>{e[a.reduced]||(a.count=0,e[a.reduced]=a),e[a.reduced].count+=1});let r=Object.keys(e).map(a=>e[a]);return r.sort((a,s)=>a.count>s.count?-1:a.count<s.count?1:0),r};uw.debug=function(){return PB(this),this},uw.out=function(i){if(i==="text")return this.text();if(i==="normal")return this.text("normal");if(i==="json")return this.json();if(i==="offset"||i==="offsets")return this.json({offset:!0});if(i==="array")return this.json({terms:!1}).map(t=>t.text).filter(t=>t);if(i==="freq"||i==="frequency")return yve(this);if(i==="terms"){let t=[];return this.json({text:!1,terms:{text:!0}}).forEach(e=>{let r=e.terms.map(a=>a.text);r=r.filter(a=>a),t=t.concat(r)}),t}return i==="tags"?this.list.map(t=>t.terms().reduce((e,r)=>(e[r.clean||r.implicit]=Object.keys(r.tags),e),{})):i==="debug"?(PB(this),this):this.text()};var X1={},nd={alpha:(i,t)=>{let e=i.text("clean"),r=t.text("clean");return e<r?-1:e>r?1:0},length:(i,t)=>{let e=i.text().trim().length,r=t.text().trim().length;return e<r?1:e>r?-1:0},wordCount:(i,t)=>{let e=i.wordCount(),r=t.wordCount();return e<r?1:e>r?-1:0}};nd.alphabetical=nd.alpha,nd.wordcount=nd.wordCount;var bve={index:!0,sequence:!0,seq:!0,sequential:!0,chron:!0,chronological:!0};X1.sort=function(i){return(i=i||"alpha")==="freq"||i==="frequency"||i==="topk"?function(t){let e={},r={case:!0,punctuation:!1,whitespace:!0,unicode:!0};return t.list.forEach(a=>{let s=a.text(r);e[s]=e[s]||0,e[s]+=1}),t.list.sort((a,s)=>{let o=e[a.text(r)],l=e[s.text(r)];return o<l?1:o>l?-1:0}),t}(this):bve.hasOwnProperty(i)?function(t){let e={};return t.json({terms:{offset:!0}}).forEach(r=>{e[r.terms[0].id]=r.terms[0].offset.start}),t.list=t.list.sort((r,a)=>e[r.start]>e[a.start]?1:e[r.start]<e[a.start]?-1:0),t}(this):typeof(i=nd[i]||i)=="function"?(this.list=this.list.sort(i),this):this},X1.reverse=function(){let i=[].concat(this.list);return i=i.reverse(),this.buildFrom(i)},X1.unique=function(){let i=[].concat(this.list),t={};return i=i.filter(e=>{let r=e.text("reduced").trim()||e.text("implicit").trim();return t.hasOwnProperty(r)!==!0&&(t[r]=!0,!0)}),this.buildFrom(i)};var _B={},gve=Z5,kB=/[\[\]{}⟨⟩:,،、‒–—―…‹›«»‐\-;\/⁄·*\•^†‡°¡¿※№÷×ºª%‰=‱¶§~|‖¦©℗®℠™¤₳฿]/g,FB=/['‘’“”"′″‴]+/g,$c={whitespace:function(i){let t=i.list.map(e=>e.terms());t.forEach((e,r)=>{e.forEach((a,s)=>{a.hasDash()!==!0?(a.pre=a.pre.replace(/\s/g,""),a.post=a.post.replace(/\s/g,""),(e.length-1!==s||t[r+1])&&(a.implicit&&Boolean(a.text)===!0||a.hasHyphen()!==!0&&(a.post+=" "))):a.post=" - "})})},punctuation:function(i){i.forEach(t=>{t.hasHyphen()===!0&&(t.post=" "),t.pre=t.pre.replace(kB,""),t.post=t.post.replace(kB,""),t.post=t.post.replace(/\.\.\./,""),/!/.test(t.post)===!0&&(t.post=t.post.replace(/!/g,""),t.post="!"+t.post),/\?/.test(t.post)===!0&&(t.post=t.post.replace(/[\?!]*/,""),t.post="?"+t.post)})},unicode:function(i){i.forEach(t=>{t.isImplicit()!==!0&&(t.text=gve(t.text))})},quotations:function(i){i.forEach(t=>{t.post=t.post.replace(FB,""),t.pre=t.pre.replace(FB,"")})},adverbs:function(i){i.match("#Adverb").not("(not|nary|seldom|never|barely|almost|basically|so)").remove()},abbreviations:function(i){i.list.forEach(t=>{let e=t.terms();e.forEach((r,a)=>{r.tags.Abbreviation===!0&&e[a+1]&&(r.post=r.post.replace(/^\./,""))})})}},vve={whitespace:!0,unicode:!0,punctuation:!0,emoji:!0,acronyms:!0,abbreviations:!0,case:!1,contractions:!1,parentheses:!1,quotations:!1,adverbs:!1,possessives:!1,verbs:!1,nouns:!1,honorifics:!1},cw={light:{},medium:{case:!0,contractions:!0,parentheses:!0,quotations:!0,adverbs:!0}};cw.heavy=Object.assign({},cw.medium,{possessives:!0,verbs:!0,nouns:!0,honorifics:!0}),_B.normalize=function(i){typeof(i=i||{})=="string"&&(i=cw[i]||{}),i=Object.assign({},vve,i),this.uncache();let t=this.termList();return i.case&&this.toLowerCase(),i.whitespace&&$c.whitespace(this),i.unicode&&$c.unicode(t),i.punctuation&&$c.punctuation(t),i.emoji&&this.remove("(#Emoji|#Emoticon)"),i.acronyms&&this.acronyms().strip(),i.abbreviations&&$c.abbreviations(this),(i.contraction||i.contractions)&&this.contractions().expand(),i.parentheses&&this.parentheses().unwrap(),(i.quotations||i.quotes)&&$c.quotations(t),i.adverbs&&$c.adverbs(this),(i.possessive||i.possessives)&&this.possessives().strip(),i.verbs&&this.verbs().toInfinitive(),(i.nouns||i.plurals)&&this.nouns().toSingular(),i.honorifics&&this.remove("#Honorific"),this};var MB={};(function(i){let t=Qf;i.splitOn=function(e){if(!e)return this.parent().splitOn(this);let r=t(e),a=[];return this.list.forEach(s=>{let o=s.match(r);if(o.length===0)return void a.push(s);let l=s;o.forEach(u=>{let c=l.splitOn(u);c.before&&a.push(c.before),c.match&&a.push(c.match),l=c.after}),l&&a.push(l)}),this.buildFrom(a)},i.splitAfter=function(e){if(!e)return this.parent().splitAfter(this);let r=t(e),a=[];return this.list.forEach(s=>{let o=s.match(r);if(o.length===0)return void a.push(s);let l=s;o.forEach(u=>{let c=l.splitOn(u);c.before&&c.match?(c.before.length+=c.match.length,a.push(c.before)):c.match&&a.push(c.match),l=c.after}),l&&a.push(l)}),this.buildFrom(a)},i.split=i.splitAfter,i.splitBefore=function(e){if(!e)return this.parent().splitBefore(this);let r=t(e),a=[];return this.list.forEach(s=>{let o=s.match(r);if(o.length===0)return void a.push(s);let l=s;o.forEach(u=>{let c=l.splitOn(u);c.before&&a.push(c.before),c.match&&c.after&&(c.match.length+=c.after.length),l=c.match}),l&&a.push(l)}),this.buildFrom(a)},i.segment=function(e,r){e=e||{},r=r||{text:!0};let a=this,s=Object.keys(e);return s.forEach(o=>{a=a.splitOn(o)}),a.list.forEach(o=>{for(let l=0;l<s.length;l+=1)if(o.has(s[l]))return void(o.segment=e[s[l]])}),a.list.map(o=>{let l=o.json(r);return l.segment=o.segment||null,l})}})(MB);var id={},pw=function(i,t){let e=i.world;return i.list.forEach(r=>{r.terms().forEach(a=>a[t](e))}),i};id.toLowerCase=function(){return pw(this,"toLowerCase")},id.toUpperCase=function(){return pw(this,"toUpperCase")},id.toTitleCase=function(){return pw(this,"toTitleCase")},id.toCamelCase=function(){return this.list.forEach(i=>{let t=i.terms();t.forEach((e,r)=>{r!==0&&e.toTitleCase(),r!==t.length-1&&(e.post="")})}),this};var jB={};(function(i){i.pre=function(t,e){return t===void 0?this.list[0].terms(0).pre:(this.list.forEach(r=>{let a=r.terms(0);e===!0?a.pre+=t:a.pre=t}),this)},i.post=function(t,e){return t===void 0?this.list.map(r=>{let a=r.terms();return a[a.length-1].post}):(this.list.forEach(r=>{let a=r.terms(),s=a[a.length-1];e===!0?s.post+=t:s.post=t}),this)},i.trim=function(){return this.list=this.list.map(t=>t.trim()),this},i.hyphenate=function(){return this.list.forEach(t=>{let e=t.terms();e.forEach((r,a)=>{a!==0&&(r.pre=""),e[a+1]&&(r.post="-")})}),this},i.dehyphenate=function(){let t=/(-|–|—)/;return this.list.forEach(e=>{e.terms().forEach(r=>{t.test(r.post)&&(r.post=" ")})}),this},i.deHyphenate=i.dehyphenate,i.toQuotations=function(t,e){return t=t||'"',e=e||'"',this.list.forEach(r=>{let a=r.terms();a[0].pre=t+a[0].pre;let s=a[a.length-1];s.post=e+s.post}),this},i.toQuotation=i.toQuotations,i.toParentheses=function(t,e){return t=t||"(",e=e||")",this.list.forEach(r=>{let a=r.terms();a[0].pre=t+a[0].pre;let s=a[a.length-1];s.post=e+s.post}),this}})(jB);var Tve={join:function(i){this.uncache();let t=this.list[0],e=t.length,r={};for(let s=1;s<this.list.length;s++){let o=this.list[s];r[o.start]=!0;let l=t.lastTerm();i&&(l.post+=i),l.next=o.start,o.terms(0).prev=l.id,t.length+=o.length,t.cache={}}let a=t.length-e;return this.parents().forEach(s=>{s.list.forEach(o=>{let l=o.terms();for(let u=0;u<l.length;u++)if(l[u].id===t.start){o.length+=a;break}o.cache={}}),s.list=s.list.filter(o=>r[o.start]!==!0)}),this.buildFrom([t])}},BB={},Nve=/[,\)"';:\-–—\.…]/,Wa=function(i,t){if(!i.found)return;let e=i.termList();for(let r=0;r<e.length-1;r++){let a=e[r];if(Nve.test(a.post))return}e.forEach(r=>{r.implicit=r.clean}),e[0].text+=t,e.slice(1).forEach(r=>{r.text=""});for(let r=0;r<e.length-1;r++){let a=e[r];a.post=a.post.replace(/ /,"")}};BB.contract=function(){let i=this.not("@hasContraction"),t=i.match("(we|they|you) are");return Wa(t,"'re"),t=i.match("(he|she|they|it|we|you) will"),Wa(t,"'ll"),t=i.match("(he|she|they|it|we) is"),Wa(t,"'s"),t=i.match("#Person is"),Wa(t,"'s"),t=i.match("#Person would"),Wa(t,"'d"),t=i.match("(is|was|had|would|should|could|do|does|have|has|can) not"),Wa(t,"n't"),t=i.match("(i|we|they) have"),Wa(t,"'ve"),t=i.match("(would|should|could) have"),Wa(t,"'ve"),t=i.match("i am"),Wa(t,"'m"),t=i.match("going to"),this};var Cve=Object.assign({},AB,wB,xB,rd,cve,RB,mve,lw,VB,IB,OB,uw,X1,_B,MB,id,jB,Tve,BB),wr={};[["terms","."],["hyphenated","@hasHyphen ."],["adjectives","#Adjective"],["hashTags","#HashTag"],["emails","#Email"],["emoji","#Emoji"],["emoticons","#Emoticon"],["atMentions","#AtMention"],["urls","#Url"],["adverbs","#Adverb"],["pronouns","#Pronoun"],["conjunctions","#Conjunction"],["prepositions","#Preposition"]].forEach(i=>{wr[i[0]]=function(t){let e=this.match(i[1]);return typeof t=="number"&&(e=e.get(t)),e}}),wr.emojis=wr.emoji,wr.atmentions=wr.atMentions,wr.words=wr.terms,wr.phoneNumbers=function(i){let t=this.splitAfter("@hasComma");return t=t.match("#PhoneNumber+"),typeof i=="number"&&(t=t.get(i)),t},wr.money=function(i){let t=this.match("#Money #Currency?");return typeof i=="number"&&(t=t.get(i)),t},wr.places=function(i){let t=this.match("(#City && @hasComma) (#Region|#Country)"),e=this.not(t).splitAfter("@hasComma");return e=e.concat(t),e.sort("index"),e=e.match("#Place+"),typeof i=="number"&&(e=e.get(i)),e},wr.organizations=function(i){let t=this.clauses();return t=t.match("#Organization+"),typeof i=="number"&&(t=t.get(i)),t},wr.entities=function(i){let t=this.clauses(),e=t.people();return e=e.concat(t.places()),e=e.concat(t.organizations()),e=e.not(["someone","man","woman","mother","brother","sister","father"]),e.sort("sequence"),typeof i=="number"&&(e=e.get(i)),e},wr.things=wr.entities,wr.topics=wr.entities;var LB=wr,Sve=/^(under|over)-?.{3}/,Ave=function(i,t,e){let r=e.words,a=i[t].reduced+" "+i[t+1].reduced;return r[a]!==void 0&&r.hasOwnProperty(a)===!0?(i[t].tag(r[a],"lexicon-two",e),i[t+1].tag(r[a],"lexicon-two",e),1):t+2<i.length&&(a+=" "+i[t+2].reduced,r[a]!==void 0&&r.hasOwnProperty(a)===!0)?(i[t].tag(r[a],"lexicon-three",e),i[t+1].tag(r[a],"lexicon-three",e),i[t+2].tag(r[a],"lexicon-three",e),2):t+3<i.length&&(a+=" "+i[t+3].reduced,r[a]!==void 0&&r.hasOwnProperty(a)===!0)?(i[t].tag(r[a],"lexicon-four",e),i[t+1].tag(r[a],"lexicon-four",e),i[t+2].tag(r[a],"lexicon-four",e),i[t+3].tag(r[a],"lexicon-four",e),3):0},mw=function(i,t){let e=t.words,r=t.hasCompound;for(let a=0;a<i.length;a+=1){let s=i[a].clean;if(r[s]===!0&&a+1<i.length){let o=Ave(i,a,t);if(o>0){a+=o;continue}}if(e[s]===void 0||e.hasOwnProperty(s)!==!0)if(s===i[a].reduced||e.hasOwnProperty(i[a].reduced)!==!0){if(Sve.test(s)===!0){let o=s.replace(/^(under|over)-?/,"");e.hasOwnProperty(o)===!0&&i[a].tag(e[o],"noprefix-lexicon",t)}}else i[a].tag(e[i[a].reduced],"lexicon",t);else i[a].tag(e[s],"lexicon",t)}return i},fw=/[\'‘’‛‵′`´]$/,wve=/^(m|k|cm|km|m)\/(s|h|hr)$/,dw=[[/^[\w\.]+@[\w\.]+\.[a-z]{2,3}$/,"Email"],[/^#[a-z0-9_\u00C0-\u00FF]{2,}$/,"HashTag"],[/^@1?[0-9](am|pm)$/i,"Time"],[/^@1?[0-9]:[0-9]{2}(am|pm)?$/i,"Time"],[/^@\w{2,}$/,"AtMention"],[/^(https?:\/\/|www\.)+\w+\.[a-z]{2,3}/,"Url"],[/^[a-z0-9./].+\.(com|net|gov|org|ly|edu|info|biz|dev|ru|jp|de|in|uk|br|io|ai)/,"Url"],[/^'[0-9]{2}$/,"Year"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])$/,"Time"],[/^[012]?[0-9](:[0-5][0-9])?(:[0-5][0-9])? ?(am|pm)$/i,"Time"],[/^[012]?[0-9](:[0-5][0-9])(:[0-5][0-9])? ?(am|pm)?$/i,"Time"],[/^[PMCE]ST$/,"Time"],[/^utc ?[+-]?[0-9]+?$/,"Time"],[/^[a-z0-9]*? o\'?clock$/,"Time"],[/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}/i,"Date"],[/^[0-9]{1,4}-[0-9]{1,2}-[0-9]{1,4}$/,"Date"],[/^[0-9]{1,4}\/[0-9]{1,2}\/[0-9]{1,4}$/,"Date"],[/^[0-9]{1,4}-[a-z]{2,9}-[0-9]{1,4}$/i,"Date"],[/^gmt[+-][0-9][0-9]?$/i,"Timezone"],[/^utc[+-][0-9][0-9]?$/i,"Timezone"],[/^ma?c\'.*/,"LastName"],[/^o\'[drlkn].*/,"LastName"],[/^ma?cd[aeiou]/,"LastName"],[/^(lol)+[sz]$/,"Expression"],[/^woo+a*?h?$/,"Expression"],[/^(un|de|re)\\-[a-z\u00C0-\u00FF]{2}/,"Verb"],[/^[0-9]{1,4}\.[0-9]{1,2}\.[0-9]{1,4}$/,"Date"],[/^[0-9]{3}-[0-9]{4}$/,"PhoneNumber"],[/^(\+?[0-9][ -])?[0-9]{3}[ -]?[0-9]{3}-[0-9]{4}$/,"PhoneNumber"],[/^[-+]?[\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6][-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?(k|m|b|bn)?\+?$/,["Money","Value"]],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?[\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6]\+?$/,["Money","Value"]],[/^[-+]?[\$£]?[0-9]([0-9,.])+?(usd|eur|jpy|gbp|cad|aud|chf|cny|hkd|nzd|kr|rub)$/i,["Money","Value"]],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?\+?$/,["Cardinal","NumericValue"]],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?(st|nd|rd|r?th)$/,["Ordinal","NumericValue"]],[/^\.[0-9]+\+?$/,["Cardinal","NumericValue"]],[/^[-+]?[0-9]+(,[0-9]{3})*(\.[0-9]+)?%\+?$/,["Percent","Cardinal","NumericValue"]],[/^\.[0-9]+%$/,["Percent","Cardinal","NumericValue"]],[/^[0-9]{1,4}\/[0-9]{1,4}(st|nd|rd|th)?s?$/,["Fraction","NumericValue"]],[/^[0-9.]{1,3}[a-z]{0,2}[-–—][0-9]{1,3}[a-z]{0,2}$/,["Value","NumberRange"]],[/^[0-9][0-9]?(:[0-9][0-9])?(am|pm)? ?[-–—] ?[0-9][0-9]?(:[0-9][0-9])?(am|pm)?$/,["Time","NumberRange"]],[/^[0-9.]+([a-z]{1,4})$/,"Value"]],xve=/^[IVXLCDM]{2,}$/,Eve=/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/,ht="Adjective",Y1="Infinitive",Z1="PresentTense",$a="Singular",Jr="PastTense",Ka="Expression",Mr="Adjective",ad="Infinitive",ml="PresentTense",Kc="Singular",hn="PastTense",fl="Adverb",Xa="Plural",J1="Verb",di="LastName",UB={a:[[/.[aeiou]na$/,"Noun"],[/.[oau][wvl]ska$/,"LastName"],[/.[^aeiou]ica$/,$a],[/^([hyj]a)+$/,Ka]],c:[[/.[^aeiou]ic$/,ht]],d:[[/[aeiou](pp|ll|ss|ff|gg|tt|rr|bb|nn|mm)ed$/,Jr],[/.[aeo]{2}[bdgmnprvz]ed$/,Jr],[/.[aeiou][sg]hed$/,Jr],[/.[aeiou]red$/,Jr],[/.[aeiou]r?ried$/,Jr],[/.[bcdgtr]led$/,Jr],[/.[aoui]f?led$/,Jr],[/.[iao]sed$/,Jr],[/[aeiou]n?[cs]ed$/,Jr],[/[aeiou][rl]?[mnf]ed$/,Jr],[/[aeiou][ns]?c?ked$/,Jr],[/[aeiou][nl]?ged$/,Jr],[/.[tdbwxz]ed$/,Jr],[/[^aeiou][aeiou][tvx]ed$/,Jr],[/.[cdlmnprstv]ied$/,Jr],[/[^aeiou]ard$/,$a],[/[aeiou][^aeiou]id$/,ht],[/.[vrl]id$/,ht]],e:[[/.[lnr]ize$/,Y1],[/.[^aeiou]ise$/,Y1],[/.[aeiou]te$/,Y1],[/.[^aeiou][ai]ble$/,ht],[/.[^aeiou]eable$/,ht],[/.[ts]ive$/,ht],[/[a-z]-like$/,ht]],h:[[/.[^aeiouf]ish$/,ht],[/.v[iy]ch$/,"LastName"],[/^ug?h+$/,Ka],[/^uh[ -]?oh$/,Ka],[/[a-z]-ish$/,ht]],i:[[/.[oau][wvl]ski$/,"LastName"]],k:[[/^(k){2}$/,Ka]],l:[[/.[gl]ial$/,ht],[/.[^aeiou]ful$/,ht],[/.[nrtumcd]al$/,ht],[/.[^aeiou][ei]al$/,ht]],m:[[/.[^aeiou]ium$/,$a],[/[^aeiou]ism$/,$a],[/^h*u*m+$/,Ka],[/^\d+ ?[ap]m$/,"Date"]],n:[[/.[lsrnpb]ian$/,ht],[/[^aeiou]ician$/,"Actor"],[/[aeiou][ktrp]in$/,"Gerund"]],o:[[/^no+$/,Ka],[/^(yo)+$/,Ka],[/^woo+[pt]?$/,Ka]],r:[[/.[bdfklmst]ler$/,"Noun"],[/[aeiou][pns]er$/,$a],[/[^i]fer$/,Y1],[/.[^aeiou][ao]pher$/,"Actor"],[/.[lk]er$/,"Noun"],[/.ier$/,"Comparative"]],t:[[/.[di]est$/,"Superlative"],[/.[icldtgrv]ent$/,ht],[/[aeiou].*ist$/,ht],[/^[a-z]et$/,"Verb"]],s:[[/.[^aeiou]ises$/,Z1],[/.[rln]ates$/,Z1],[/.[^z]ens$/,"Verb"],[/.[lstrn]us$/,$a],[/.[aeiou]sks$/,Z1],[/.[aeiou]kes$/,Z1],[/[aeiou][^aeiou]is$/,$a],[/[a-z]\'s$/,"Noun"],[/^yes+$/,Ka]],v:[[/.[^aeiou][ai][kln]ov$/,"LastName"]],y:[[/.[cts]hy$/,ht],[/.[st]ty$/,ht],[/.[gk]y$/,ht],[/.[tnl]ary$/,ht],[/.[oe]ry$/,$a],[/[rdntkbhs]ly$/,"Adverb"],[/...lly$/,"Adverb"],[/[bszmp]{2}y$/,ht],[/.(gg|bb|zz)ly$/,ht],[/.[ai]my$/,ht],[/[ea]{2}zy$/,ht],[/.[^aeiou]ity$/,$a]]},zB=[null,null,{ea:Kc,ia:"Noun",ic:Mr,ly:fl,"'n":J1,"'t":J1},{oed:hn,ued:hn,xed:hn," so":fl,"'ll":"Modal","'re":"Copula",azy:Mr,eer:"Noun",end:J1,ped:hn,ffy:Mr,ify:ad,ing:"Gerund",ize:ad,lar:Mr,mum:Mr,nes:ml,nny:Mr,oid:Mr,ous:Mr,que:Mr,rol:Kc,sis:Kc,zes:ml},{amed:hn,aped:hn,ched:hn,lked:hn,nded:hn,cted:hn,dged:hn,akis:di,cede:ad,chuk:di,czyk:di,ects:ml,ends:J1,enko:di,ette:Kc,fies:ml,fore:fl,gate:ad,gone:Mr,ices:Xa,ints:Xa,ines:Xa,ions:Xa,less:fl,llen:Mr,made:Mr,nsen:di,oses:ml,ould:"Modal",some:Mr,sson:di,tage:ad,teen:"Value",tion:Kc,tive:Mr,tors:"Noun",vice:Kc},{tized:hn,urned:hn,eased:hn,ances:Xa,bound:Mr,ettes:Xa,fully:fl,ishes:ml,ities:Xa,marek:di,nssen:di,ology:"Noun",ports:Xa,rough:Mr,tches:ml,tieth:"Ordinal",tures:Xa,wards:fl,where:fl},{auskas:di,keeper:"Actor",logist:"Actor",teenth:"Value"},{opoulos:di,borough:"Place",sdottir:di}],Rve=/^(\u00a9|\u00ae|[\u2319-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/,Vve={":(":!0,":)":!0,":P":!0,":p":!0,":O":!0,":3":!0,":|":!0,":/":!0,":\\":!0,":$":!0,":*":!0,":@":!0,":-(":!0,":-)":!0,":-P":!0,":-p":!0,":-O":!0,":-3":!0,":-|":!0,":-/":!0,":-\\":!0,":-$":!0,":-*":!0,":-@":!0,":^(":!0,":^)":!0,":^P":!0,":^p":!0,":^O":!0,":^3":!0,":^|":!0,":^/":!0,":^\\":!0,":^$":!0,":^*":!0,":^@":!0,"):":!0,"(:":!0,"$:":!0,"*:":!0,")-:":!0,"(-:":!0,"$-:":!0,"*-:":!0,")^:":!0,"(^:":!0,"$^:":!0,"*^:":!0,"<3":!0,"</3":!0,"<\\3":!0},sd={lexicon:mw,punctuation:function(i,t,e){let r=i[t];if(fw.test(r.text)&&!fw.test(r.pre)&&!fw.test(r.post)&&r.clean.length>2){let a=r.clean[r.clean.length-2];if(a==="s")return void r.tag(["Possessive","Noun"],"end-tick",e);a==="n"&&r.tag(["Gerund"],"chillin",e)}wve.test(r.text)&&r.tag("Unit","per-sec",e)},regex:function(i,t){let e=i.text;for(let r=0;r<dw.length;r+=1)if(dw[r][0].test(e)===!0){i.tagSafe(dw[r][1],"prefix #"+r,t);break}i.text.length>=2&&xve.test(e)&&Eve.test(e)&&i.tag("RomanNumeral","xvii",t)},suffix:function(i,t){(function(e,r){let a=e.clean.length,s=7;a<=s&&(s=a-1);for(let o=s;o>1;o-=1){let l=e.clean.substr(a-o,a);if(zB[l.length].hasOwnProperty(l)===!0){let u=zB[l.length][l];e.tagSafe(u,"suffix -"+l,r);break}}})(i,t),function(e,r){let a=e.clean,s=a[a.length-1];if(UB.hasOwnProperty(s)===!0){let o=UB[s];for(let l=0;l<o.length;l+=1)if(o[l][0].test(a)===!0){e.tagSafe(o[l][1],`endReg ${s} #${l}`,r);break}}}(i,t)},emoji:(i,t)=>{let e=i.pre+i.text+i.post;var r;e=e.trim(),e=e.replace(/[.!?,]$/,""),(a=>!(a.charAt(0)!==":"||a.match(/:.?$/)===null||a.match(" ")||a.length>35))(e)===!0&&(i.tag("Emoji","comma-emoji",t),i.text=e,i.pre=i.pre.replace(":",""),i.post=i.post.replace(":","")),i.text.match(Rve)&&(i.tag("Emoji","unicode-emoji",t),i.text=e),r=(r=e).replace(/^[:;]/,":"),Vve.hasOwnProperty(r)===!0&&(i.tag("Emoticon","emoticon-emoji",t),i.text=e)}},Ive=function(i,t){let e=i.world;sd.lexicon(t,e);for(let r=0;r<t.length;r+=1){let a=t[r];sd.punctuation(t,r,e),sd.regex(a,e),sd.suffix(a,e),sd.emoji(a,e)}return i},qs={beforeThisWord:{there:"Verb",me:"Verb",man:"Adjective",only:"Verb",him:"Verb",were:"Noun",took:"Noun",himself:"Verb",went:"Noun",who:"Noun",jr:"Person"},afterThisWord:{i:"Verb",first:"Noun",it:"Verb",there:"Verb",not:"Verb",because:"Noun",if:"Noun",but:"Noun",who:"Verb",this:"Noun",his:"Noun",when:"Noun",you:"Verb",very:"Adjective",old:"Noun",never:"Verb",before:"Noun"},beforeThisPos:{Copula:"Noun",PastTense:"Noun",Conjunction:"Noun",Modal:"Noun",Pluperfect:"Noun",PerfectTense:"Verb"},afterThisPos:{Adjective:"Noun",Possessive:"Noun",Determiner:"Noun",Adverb:"Verb",Pronoun:"Verb",Value:"Noun",Ordinal:"Noun",Modal:"Verb",Superlative:"Noun",Demonym:"Noun",Honorific:"Person"}},Ove=Object.keys(qs.afterThisPos),Dve=Object.keys(qs.beforeThisPos),Pve=function(i,t){for(let e=0;e<i.length;e+=1){let r=i[e];if(r.isKnown()===!0)continue;let a=i[e-1];if(a){if(qs.afterThisWord.hasOwnProperty(a.clean)===!0){let l=qs.afterThisWord[a.clean];r.tag(l,"after-"+a.clean,t);continue}let o=Ove.find(l=>a.tags[l]);if(o!==void 0){let l=qs.afterThisPos[o];r.tag(l,"after-"+o,t);continue}}let s=i[e+1];if(s){if(qs.beforeThisWord.hasOwnProperty(s.clean)===!0){let l=qs.beforeThisWord[s.clean];r.tag(l,"before-"+s.clean,t);continue}let o=Dve.find(l=>s.tags[l]);if(o!==void 0){let l=qs.beforeThisPos[o];r.tag(l,"before-"+o,t);continue}}}},_ve=/^[A-Z][a-z'\u00C0-\u00FF]/,kve=/[0-9]/,Fve=function(i){let t=i.world;i.list.forEach(e=>{let r=e.terms();for(let a=1;a<r.length;a++){let s=r[a];_ve.test(s.text)===!0&&kve.test(s.text)===!1&&s.tags.Date===void 0&&s.tag("ProperNoun","titlecase-noun",t)}})},Mve=/^(re|un)-?[a-z\u00C0-\u00FF]/,jve=/^(re|un)-?/,Bve=function(i,t){let e=t.words;i.forEach(r=>{if(r.isKnown()!==!0&&Mve.test(r.clean)===!0){let a=r.clean.replace(jve,"");a&&a.length>3&&e[a]!==void 0&&e.hasOwnProperty(a)===!0&&r.tag(e[a],"stem-"+a,t)}})},Lve=["Uncountable","Pronoun","Place","Value","Person","Month","WeekDay","Holiday"],HB={isSingular:[/(ax|test)is$/i,/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,/(octop|vir)i$/i,/(rl)f$/i,/(alias|status)$/i,/(bu)s$/i,/(al|ad|at|er|et|ed|ad)o$/i,/(ti)um$/i,/(ti)a$/i,/sis$/i,/(?:(^f)fe|(lr)f)$/i,/hive$/i,/s[aeiou]+ns$/i,/(^aeiouy|qu)y$/i,/(x|ch|ss|sh|z)$/i,/(matr|vert|ind|cort)(ix|ex)$/i,/(m|l)ouse$/i,/(m|l)ice$/i,/(antenn|formul|nebul|vertebr|vit)a$/i,/.sis$/i,/^(?!talis|.*hu)(.*)man$/i],isPlural:[/(^v)ies$/i,/ises$/i,/ives$/i,/(antenn|formul|nebul|vertebr|vit)ae$/i,/(octop|vir|radi|nucle|fung|cact|stimul)i$/i,/(buffal|tomat|tornad)oes$/i,/(analy|ba|diagno|parenthe|progno|synop|the)ses$/i,/(vert|ind|cort)ices$/i,/(matr|append)ices$/i,/(x|ch|ss|sh|s|z|o)es$/i,/is$/i,/men$/i,/news$/i,/.tia$/i,/(^f)ves$/i,/(lr)ves$/i,/(^aeiouy|qu)ies$/i,/(m|l)ice$/i,/(cris|ax|test)es$/i,/(alias|status)es$/i,/ics$/i]},Uve=[/ss$/,/sis$/,/[^aeiou][uo]s$/,/'s$/],zve=[/i$/,/ae$/],Hve=function(i,t){if(i.tags.Noun&&!i.tags.Acronym){let e=i.clean;if(i.tags.Singular||i.tags.Plural)return;if(e.length<=3)return void i.tag("Singular","short-singular",t);if(Lve.find(r=>i.tags[r]))return;if(HB.isPlural.find(r=>r.test(e)))return void i.tag("Plural","plural-rules",t);if(HB.isSingular.find(r=>r.test(e)))return void i.tag("Singular","singular-rules",t);if(/s$/.test(e)===!0)return Uve.find(r=>r.test(e))?void 0:void i.tag("Plural","plural-fallback",t);if(zve.find(r=>r.test(e)))return;i.tag("Singular","singular-fallback",t)}},GB=["academy","administration","agence","agences","agencies","agency","airlines","airways","army","assoc","associates","association","assurance","authority","autorite","aviation","bank","banque","board","boys","brands","brewery","brotherhood","brothers","building society","bureau","cafe","caisse","capital","care","cathedral","center","central bank","centre","chemicals","choir","chronicle","church","circus","clinic","clinique","club","co","coalition","coffee","collective","college","commission","committee","communications","community","company","comprehensive","computers","confederation","conference","conseil","consulting","containers","corporation","corps","corp","council","crew","daily news","data","departement","department","department store","departments","design","development","directorate","division","drilling","education","eglise","electric","electricity","energy","ensemble","enterprise","enterprises","entertainment","estate","etat","evening news","faculty","federation","financial","fm","foundation","fund","gas","gazette","girls","government","group","guild","health authority","herald","holdings","hospital","hotel","hotels","inc","industries","institut","institute","institute of technology","institutes","insurance","international","interstate","investment","investments","investors","journal","laboratory","labs","liberation army","limited","local authority","local health authority","machines","magazine","management","marine","marketing","markets","media","memorial","mercantile exchange","ministere","ministry","military","mobile","motor","motors","musee","museum","news","news service","observatory","office","oil","optical","orchestra","organization","partners","partnership","people's party","petrol","petroleum","pharmacare","pharmaceutical","pharmaceuticals","pizza","plc","police","polytechnic","post","power","press","productions","quartet","radio","regional authority","regional health authority","reserve","resources","restaurant","restaurants","savings","school","securities","service","services","social club","societe","society","sons","standard","state police","state university","stock exchange","subcommittee","syndicat","systems","telecommunications","telegraph","television","times","tribunal","tv","union","university","utilities","workers"].reduce(function(i,t){return i[t]="Noun",i},{}),qB=function(i){return!!i.tags.Noun&&!(i.tags.Pronoun||i.tags.Comma||i.tags.Possessive)&&!!(i.tags.Organization||i.tags.Acronym||i.tags.Place||i.titleCase())},Gve=/^[A-Z]('s|,)?$/,qve=/([A-Z]\.){2}[A-Z]?/i,Wve={I:!0,A:!0},Xc={neighbours:Pve,case:Fve,stem:Bve,plural:Hve,organizations:function(i,t){for(let e=0;e<i.length;e+=1){let r=i[e];if(GB[r.clean]!==void 0&&GB.hasOwnProperty(r.clean)===!0){let a=i[e-1];if(a!==void 0&&qB(a)===!0){a.tagSafe("Organization","org-word-1",t),r.tagSafe("Organization","org-word-2",t);continue}let s=i[e+1];if(s!==void 0&&s.clean==="of"&&i[e+2]&&qB(i[e+2])){r.tagSafe("Organization","org-of-word-1",t),s.tagSafe("Organization","org-of-word-2",t),i[e+2].tagSafe("Organization","org-of-word-3",t);continue}}}},acronyms:function(i,t){i.forEach(e=>{e.tags.RomanNumeral!==!0&&(qve.test(e.text)===!0&&e.tag("Acronym","period-acronym",t),e.isUpperCase()&&function(r,a){let s=r.reduced;return!!r.tags.Acronym||!a.words[s]&&!(s.length>5)&&r.isAcronym()}(e,t)?(e.tag("Acronym","acronym-step",t),e.tag("Noun","acronym-infer",t)):!Wve.hasOwnProperty(e.text)&&Gve.test(e.text)&&(e.tag("Acronym","one-letter-acronym",t),e.tag("Noun","one-letter-infer",t)),e.tags.Organization&&e.text.length<=3&&e.tag("Acronym","acronym-org",t),e.tags.Organization&&e.isUpperCase()&&e.text.length<=6&&e.tag("Acronym","acronym-org-case",t))})}},$ve=function(i,t){let e=i.world;return Xc.neighbours(t,e),Xc.case(i),Xc.stem(t,e),t.forEach(r=>{r.isKnown()===!1&&r.tag("Noun","noun-fallback",i.world)}),Xc.organizations(t,e),Xc.acronyms(t,e),t.forEach(r=>{Xc.plural(r,i.world)}),i},WB=/n't$/,$B={"won't":["will","not"],wont:["will","not"],"can't":["can","not"],cant:["can","not"],cannot:["can","not"],"shan't":["should","not"],dont:["do","not"],dun:["do","not"]},Kve=/([a-z\u00C0-\u00FF]+)[\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u2032\u2035\u2039\u203A]([a-z]{1,2})$/i,KB={ll:"will",ve:"have",re:"are",m:"am","n't":"not"},XB={wanna:["want","to"],gonna:["going","to"],im:["i","am"],alot:["a","lot"],ive:["i","have"],imma:["I","will"],"where'd":["where","did"],whered:["where","did"],"when'd":["when","did"],whend:["when","did"],howd:["how","did"],whatd:["what","did"],dunno:["do","not","know"],brb:["be","right","back"],gtg:["got","to","go"],irl:["in","real","life"],tbh:["to","be","honest"],imo:["in","my","opinion"],til:["today","i","learned"],rn:["right","now"],twas:["it","was"],"@":["at"]},Xve=/([a-z\u00C0-\u00FF]+)[\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u2032\u2035\u2039\u203A]s$/i,Yve={that:!0,there:!0},Zve={here:!0,there:!0,everywhere:!0},Jve=/[a-z\u00C0-\u00FF]'d$/,Qve={how:!0,what:!0},e1e=/^([0-9.]{1,3}[a-z]{0,2}) ?[-–—] ?([0-9]{1,3}[a-z]{0,2})$/i,t1e=/^([0-9][0-9]?(:[0-9][0-9])?(am|pm)?) ?[-–—] ?([0-9][0-9]?(:[0-9][0-9])?(am|pm)?)$/i,r1e=/^(l|c|d|j|m|n|qu|s|t)[\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u2032\u2035\u2039\u203A]([a-z\u00C0-\u00FF]+)$/i,YB={l:"le",c:"ce",d:"de",j:"je",m:"me",n:"ne",qu:"que",s:"se",t:"tu"},n1e=mw,i1e=ed,a1e=function(i,t){return $B.hasOwnProperty(i.clean)===!0?$B[i.clean]:i.clean==="ain't"||i.clean==="aint"?function(e,r){let a=r.terms(),s=a.indexOf(e),o=a.slice(0,s).find(l=>l.tags.Noun);return o&&o.tags.Plural?["are","not"]:["is","not"]}(i,t):WB.test(i.clean)===!0?[i.clean.replace(WB,""),"not"]:null},s1e=function(i){let t=i.text.match(Kve);return t===null?null:KB.hasOwnProperty(t[2])?[t[1],KB[t[2]]]:null},o1e=function(i){return XB.hasOwnProperty(i.clean)?XB[i.clean]:null},l1e=function(i,t,e){let r=i.text.match(Xve);if(r!==null){if(((a,s)=>{if(a.tags.Possessive)return!0;if(a.tags.Pronoun||a.tags.QuestionWord||Yve.hasOwnProperty(a.reduced))return!1;let o=s.get(a.next);if(!o)return!0;if(o.tags.Verb)return!!o.tags.Infinitive||!!o.tags.PresentTense;if(o.tags.Noun)return Zve.hasOwnProperty(o.reduced)!==!0;let l=s.get(o.next);return!(!l||!l.tags.Noun||l.tags.Pronoun)||(o.tags.Adjective||o.tags.Adverb||o.tags.Verb,!1)})(i,t.pool)===!0)return i.tag("#Possessive","isPossessive",e),null;if(r!==null)return((a,s)=>{let o=s.terms(),l=o.indexOf(a);return o.slice(l+1,l+3).find(u=>u.tags.PastTense)})(i,t)?[r[1],"has"]:[r[1],"is"]}return null},u1e=function(i,t){if(Jve.test(i.clean)){let e=i.clean.replace(/'d$/,""),r=t.terms(),a=r.indexOf(i),s=r.slice(a+1,a+4);for(let o=0;o<s.length;o++){let l=s[o];if(l.tags.Verb)return l.tags.PastTense?[e,"had"]:Qve[e]===!0?[e,"did"]:[e,"would"]}return[e,"would"]}return null},c1e=function(i){if(i.tags.PhoneNumber===!0)return null;let t=i.text.match(e1e);return t!==null?[t[1],"to",t[2]]:(t=i.text.match(t1e),t!==null?[t[1],"to",t[4]]:null)},p1e=function(i){let t=i.text.match(r1e);if(t===null||YB.hasOwnProperty(t[1])===!1)return null;let e=[YB[t[1]],t[2]];return e[0]&&e[1]?e:null},m1e=/^[0-9]+$/,f1e=/^[0-9]+(st|nd|rd|th)$/,d1e=/^[0-9:]+(am|pm)?$/,h1e=function(i,t){let e=i1e(i.join(" "),t.world,t.pool())[0],r=e.terms();n1e(r,t.world);let a=r[0];return f1e.test(a.text)?(r[0].tag("Ordinal","ord-range",t.world),r[2].tag("Ordinal","ord-range",t.world)):m1e.test(a.text)?(r[0].tag("Cardinal","num-range",t.world),r[2].tag("Cardinal","num-range",t.world)):d1e.test(a.text)&&(r[0].tag("Time","time-range",t.world),r[1].tag("Date","time-range",t.world),r[2].tag("Time","time-range",t.world)),r.forEach(s=>{s.implicit=s.text,s.text="",s.clean="",s.pre="",s.post="",Object.keys(s.tags).length===0&&(s.tags.Noun=!0)}),e},y1e=function(i){let t=i.world;return i.list.forEach(e=>{let r=e.terms();for(let a=0;a<r.length;a+=1){let s=r[a],o=a1e(s,e);if(o=o||s1e(s),o=o||o1e(s),o=o||l1e(s,e,t),o=o||u1e(s,e),o=o||c1e(s),o=o||p1e(s),o!==null){let l=h1e(o,i);e.has("#NumberRange")===!0&&i.buildFrom([l]).tag("NumberRange"),l.terms(0).text=s.text,e.buildFrom(s.id,1,i.pool()).replace(l,i,!0)}}}),i},Yc=function(i,t){let e=i._cache.tags[t]||[];return e=e.map(r=>i.list[r]),i.buildFrom(e)},b1e=function(i){let t=Yc(i,"Infinitive");return t.found&&(t=t.ifNo("@hasQuestionMark"),t=t.ifNo("(i|we|they)"),t.not("will be").match("[#Infinitive] (#Determiner|#Possessive) #Noun").notIf("(our|their)").match("#Infinitive").tag("Imperative","shut-the"),t.match("^[#Infinitive] #Adverb?$",0).tag("Imperative","go-fast"),t.match("[(do && #Infinitive)] not? #Verb",0).tag("Imperative","do-not"),t.match("[#Infinitive] (it|some) (#Comparative|#Preposition|please|now|again)",0).tag("Imperative","do-it")),t=function(e,r){let a=e._cache.words[r]||[];return a=a.map(s=>e.list[s]),e.buildFrom(a)}(i,"like"),t.match("#Adverb like").notIf("(really|generally|typically|usually|sometimes|often|just) [like]").tag("Adverb","adverb-like"),t=Yc(i,"Adjective"),t.match("#Determiner #Adjective$").notIf("(#Comparative|#Superlative)").terms(1).tag("Noun","the-adj-1"),t=Yc(i,"FirstName"),t.match("#FirstName (#Noun|@titleCase)").ifNo("^#Possessive").ifNo("(#Pronoun|#Plural)").ifNo("@hasComma .").lastTerm().tag("#LastName","firstname-noun"),t=Yc(i,"Value"),t=t.match("#Value #PresentTense").ifNo("#Copula"),t.found&&(t.has("(one|1)")===!0?t.terms(1).tag("Singular","one-presentTense"):t.terms(1).tag("Plural","value-presentTense")),i.match("^(well|so|okay)").tag("Expression","well-"),i.match("#Value [of a second]",0).unTag("Value","of-a-second"),i.match("#Value [seconds]",0).unTag("Value","30-seconds").tag(["Unit","Plural"]),t=Yc(i,"Gerund"),t.match("(be|been) (#Adverb|not)+? #Gerund").not("#Verb$").tag("Auxiliary","be-walking"),i.match("(try|use|attempt|build|make) #Verb").ifNo("(@hasComma|#Negative|#PhrasalVerb|#Copula|will|be)").lastTerm().tag("#Noun","do-verb"),t=Yc(i,"Possessive"),t=t.match("#Possessive [#Infinitive]",0),t.lookBehind("(let|made|make|force|ask)").found||t.tag("Noun","her-match"),i},ZB=function(i){let t={};for(let e=0;e<i.length;e++)t[i[e]]=!0;return Object.keys(t)},g1e=[{match:"too much",tag:"Adverb Adjective",reason:"bit-4"},{match:"u r",tag:"Pronoun Copula",reason:"u r"},{match:"#Copula (pretty|dead|full|well|sure) (#Adjective|#Noun)",tag:"#Copula #Adverb #Adjective",reason:"sometimes-adverb"},{match:"(#Pronoun|#Person) (had|#Adverb)? [better] #PresentTense",group:0,tag:"Modal",reason:"i-better"},{match:"[#Gerund] #Adverb? not? #Copula",group:0,tag:"Activity",reason:"gerund-copula"},{match:"[#Gerund] #Modal",group:0,tag:"Activity",reason:"gerund-modal"},{match:"holy (shit|fuck|hell)",tag:"Expression",reason:"swears-expression"},{match:"#Noun #Actor",tag:"Actor",reason:"thing-doer"},{match:"#Conjunction [u]",group:0,tag:"Pronoun",reason:"u-pronoun-2"},{match:"[u] #Verb",group:0,tag:"Pronoun",reason:"u-pronoun-1"},{match:"#Noun [(who|whom)]",group:0,tag:"Determiner",reason:"captain-who"},{match:"a bit much",tag:"Determiner Adverb Adjective",reason:"bit-3"},{match:"#Verb #Adverb? #Noun [(that|which)]",group:0,tag:"Preposition",reason:"that-prep"},{match:"@hasComma [which] (#Pronoun|#Verb)",group:0,tag:"Preposition",reason:"which-copula"},{match:"#Copula just [like]",group:0,tag:"Preposition",reason:"like-preposition"},{match:"#Noun [like] #Noun",group:0,tag:"Preposition",reason:"noun-like"},{match:"[had] #Noun+ #PastTense",group:0,tag:"Condition",reason:"had-he"},{match:"[were] #Noun+ to #Infinitive",group:0,tag:"Condition",reason:"were-he"},{match:"^how",tag:"QuestionWord",reason:"how-question"},{match:"[how] (#Determiner|#Copula|#Modal|#PastTense)",group:0,tag:"QuestionWord",reason:"how-is"},{match:"^which",tag:"QuestionWord",reason:"which-question"},{match:"[so] #Noun",group:0,tag:"Conjunction",reason:"so-conj"},{match:"[(who|what|where|why|how|when)] #Noun #Copula #Adverb? (#Verb|#Adjective)",group:0,tag:"Conjunction",reason:"how-he-is-x"}],od={adverbAdjective:["dark","bright","flat","light","soft","pale","dead","dim","faux","little","wee","sheer","most","near","good","extra","all"],personDate:["april","june","may","jan","august","eve"],personMonth:["january","april","may","june","jan","sep"],personAdjective:["misty","rusty","dusty","rich","randy","young"],personVerb:["pat","wade","ollie","will","rob","buck","bob","mark","jack"],personPlace:["darwin","hamilton","paris","alexandria","houston","kobe","santiago","salvador","sydney","victoria"],personNoun:["art","baker","berg","bill","brown","charity","chin","christian","cliff","daisy","dawn","dick","dolly","faith","franco","gene","green","hall","hill","holly","hope","jean","jewel","joy","kelvin","king","kitty","lane","lily","melody","mercedes","miles","olive","penny","ray","reed","robin","rod","rose","sky","summer","trinity","van","viola","violet","wang","white"]},Qi=`(${od.personDate.join("|")})`,v1e=[{match:"#Holiday (day|eve)",tag:"Holiday",reason:"holiday-day"},{match:"[sun] the #Ordinal",tag:"WeekDay",reason:"sun-the-5th"},{match:"[sun] #Date",group:0,tag:"WeekDay",reason:"sun-feb"},{match:"#Date (on|this|next|last|during)? [sun]",group:0,tag:"WeekDay",reason:"1pm-sun"},{match:"(in|by|before|during|on|until|after|of|within|all) [sat]",group:0,tag:"WeekDay",reason:"sat"},{match:"(in|by|before|during|on|until|after|of|within|all) [wed]",group:0,tag:"WeekDay",reason:"wed"},{match:"(in|by|before|during|on|until|after|of|within|all) [march]",group:0,tag:"Month",reason:"march"},{match:"[sat] #Date",group:0,tag:"WeekDay",reason:"sat-feb"},{match:"#Preposition [(march|may)]",group:0,tag:"Month",reason:"in-month"},{match:"this [(march|may)]",group:0,tag:"Month",reason:"this-month"},{match:"next [(march|may)]",group:0,tag:"Month",reason:"this-month"},{match:"last [(march|may)]",group:0,tag:"Month",reason:"this-month"},{match:"[(march|may)] the? #Value",group:0,tag:"Month",reason:"march-5th"},{match:"#Value of? [(march|may)]",group:0,tag:"Month",reason:"5th-of-march"},{match:"[(march|may)] .? #Date",group:0,tag:"Month",reason:"march-and-feb"},{match:"#Date .? [(march|may)]",group:0,tag:"Month",reason:"feb-and-march"},{match:"#Adverb [(march|may)]",group:0,tag:"Verb",reason:"quickly-march"},{match:"[(march|may)] #Adverb",group:0,tag:"Verb",reason:"march-quickly"},{match:"#Value of #Month",tag:"Date",reason:"value-of-month"},{match:"#Cardinal #Month",tag:"Date",reason:"cardinal-month"},{match:"#Month #Value to #Value",tag:"Date",reason:"value-to-value"},{match:"#Month the #Value",tag:"Date",reason:"month-the-value"},{match:"(#WeekDay|#Month) #Value",tag:"Date",reason:"date-value"},{match:"#Value (#WeekDay|#Month)",tag:"Date",reason:"value-date"},{match:"(#TextValue && #Date) #TextValue",tag:"Date",reason:"textvalue-date"},{match:`in [${Qi}]`,group:0,tag:"Date",reason:"in-june"},{match:`during [${Qi}]`,group:0,tag:"Date",reason:"in-june"},{match:`on [${Qi}]`,group:0,tag:"Date",reason:"in-june"},{match:`by [${Qi}]`,group:0,tag:"Date",reason:"by-june"},{match:`after [${Qi}]`,group:0,tag:"Date",reason:"after-june"},{match:`#Date [${Qi}]`,group:0,tag:"Date",reason:"in-june"},{match:Qi+" #Value",tag:"Date",reason:"june-5th"},{match:Qi+" #Date",tag:"Date",reason:"june-5th"},{match:Qi+" #ProperNoun",tag:"Person",reason:"june-smith",safe:!0},{match:Qi+" #Acronym? (#ProperNoun && !#Month)",tag:"Person",reason:"june-smith-jr"},{match:"#Cardinal [second]",tag:"Unit",reason:"one-second"},{match:"#Month #NumberRange",tag:"Date",reason:"aug 20-21"},{match:"(#Place|#Demonmym|#Time) (standard|daylight|central|mountain)? time",tag:"Timezone",reason:"std-time"},{match:"(eastern|mountain|pacific|central|atlantic) (standard|daylight|summer)? time",tag:"Timezone",reason:"eastern-time"},{match:"#Time [(eastern|mountain|pacific|central|est|pst|gmt)]",group:0,tag:"Timezone",reason:"5pm-central"},{match:"(central|western|eastern) european time",tag:"Timezone",reason:"cet"}],hw=`(${od.personAdjective.join("|")})`,T1e=[{match:"[all] #Determiner? #Noun",group:0,tag:"Adjective",reason:"all-noun"},{match:`#Adverb [${hw}]`,group:0,tag:"Adjective",reason:"really-rich"},{match:hw+" #Person",tag:"Person",reason:"randy-smith"},{match:hw+" #Acronym? #ProperNoun",tag:"Person",reason:"rusty-smith"},{match:"#Copula [(just|alone)]$",group:0,tag:"Adjective",reason:"not-adverb"},{match:"#Singular is #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"is-filled"},{match:"[#PastTense] #Singular is",group:0,tag:"Adjective",reason:"smoked-poutine"},{match:"[#PastTense] #Plural are",group:0,tag:"Adjective",reason:"baked-onions"},{match:"well [#PastTense]",group:0,tag:"Adjective",reason:"well-made"},{match:"#Copula [fucked up?]",tag:"Adjective",reason:"swears-adjective"},{match:"#Singular (seems|appears) #Adverb? [#PastTense$]",group:0,tag:"Adjective",reason:"seems-filled"},{match:"(a|an) [#Gerund]",group:0,tag:"Adjective",reason:"a|an"},{match:"as [#Gerund] as",group:0,tag:"Adjective",reason:"as-gerund-as"},{match:"more [#Gerund] than",group:0,tag:"Adjective",reason:"more-gerund-than"},{match:"(so|very|extremely) [#Gerund]",group:0,tag:"Adjective",reason:"so-gerund"},{match:"(it|he|she|everything|something) #Adverb? was #Adverb? [#Gerund]",group:0,tag:"Adjective",reason:"it-was-gerund"},{match:"(found|found) it #Adverb? [#Gerund]",group:0,tag:"Adjective",reason:"found-it-gerund"},{match:"a (little|bit|wee) bit? [#Gerund]",group:0,tag:"Adjective",reason:"a-bit-gerund"},{match:"#Copula #Adjective? [(out|in|through)]$",group:0,tag:"Adjective",reason:"still-out"},{match:"^[#Adjective] (the|your) #Noun",group:0,tag:"Infinitive",reason:"shut-the"},{match:"the [said] #Noun",group:0,tag:"Adjective",reason:"the-said-card"},{match:"#Noun (that|which|whose) [#PastTense && !#Copula] #Noun",group:0,tag:"Adjective",reason:"that-past-noun"}],N1e=[{match:"there (are|were) #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"there-are"},{match:"#Determiner [sun]",group:0,tag:"Singular",reason:"the-sun"},{match:"#Verb (a|an) [#Value]",group:0,tag:"Singular",reason:"did-a-value"},{match:"the [(can|will|may)]",group:0,tag:"Singular",reason:"the can"},{match:"#FirstName #Acronym? (#Possessive && #LastName)",tag:"Possessive",reason:"name-poss"},{match:"#Organization+ #Possessive",tag:"Possessive",reason:"org-possessive"},{match:"#Place+ #Possessive",tag:"Possessive",reason:"place-possessive"},{match:"(#Verb && !#Modal) (all|every|each|most|some|no) [#PresentTense]",group:0,tag:"Noun",reason:"all-presentTense"},{match:"#Determiner [#Adjective] #Copula",group:0,tag:"Noun",reason:"the-adj-is"},{match:"#Adjective [#Adjective] #Copula",group:0,tag:"Noun",reason:"adj-adj-is"},{match:"(had|have|#PastTense) #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"adj-presentTense"},{match:"^#Adjective [#PresentTense]",group:0,tag:"Noun",reason:"start adj-presentTense"},{match:"#Value #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"one-big-reason"},{match:"#PastTense #Adjective+ [#PresentTense]",group:0,tag:"Noun",reason:"won-wide-support"},{match:"(many|few|several|couple) [#PresentTense]",group:0,tag:"Noun",reason:"many-poses"},{match:"#Adverb #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"very-big-dream"},{match:"#Adjective [#Infinitive] #Noun",group:0,tag:"Noun",reason:"good-wait-staff"},{match:"#Adjective #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"adorable-little-store"},{match:"#Preposition #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"of-basic-training"},{match:"#Adjective [#Gerund]",group:0,tag:"Noun",reason:"early-warning"},{match:"#Gerund #Adverb? #Comparative [#PresentTense]",group:0,tag:"Noun",reason:"higher-costs"},{match:"#Infinitive (this|that|the) [#Infinitive]",group:0,tag:"Noun",reason:"do-this-dance"},{match:"(his|her|its) [#Adjective]",group:0,tag:"Noun",reason:"his-fine"},{match:"some [#Verb] #Plural",group:0,tag:"Noun",reason:"determiner6"},{match:"more #Noun",tag:"Noun",reason:"more-noun"},{match:"(#Noun && @hasComma) #Noun (and|or) [#PresentTense]",group:0,tag:"Noun",reason:"noun-list"},{match:"(right|rights) of .",tag:"Noun",reason:"right-of"},{match:"a [bit]",group:0,tag:"Noun",reason:"bit-2"},{match:"#Possessive #Ordinal [#PastTense]",group:0,tag:"Noun",reason:"first-thought"},{match:"#Gerund #Determiner [#Infinitive]",group:0,tag:"Noun",reason:"running-a-show"},{match:"#Determiner #Adverb [#Infinitive]",group:0,tag:"Noun",reason:"the-reason"},{match:"(the|this|those|these) #Adjective [#Verb]",group:0,tag:"Noun",reason:"the-adj-verb"},{match:"(the|this|those|these) #Adverb #Adjective [#Verb]",group:0,tag:"Noun",reason:"determiner4"},{match:"#Determiner [#Adjective] (#Copula|#PastTense|#Auxiliary)",group:0,tag:"Noun",reason:"the-adj-2"},{match:"(the|this|a|an) [#Infinitive] #Adverb? #Verb",group:0,tag:"Noun",reason:"determiner5"},{match:"#Determiner [#Infinitive] #Noun",group:0,tag:"Noun",reason:"determiner7"},{match:"#Determiner #Adjective #Adjective? [#Infinitive]",group:0,tag:"Noun",reason:"a-nice-inf"},{match:"the [#Verb] #Preposition .",group:0,tag:"Noun",reason:"determiner1"},{match:"#Determiner [#Verb] of",group:0,tag:"Noun",reason:"the-verb-of"},{match:"#Adjective #Noun+ [#Infinitive] #Copula",group:0,tag:"Noun",reason:"career-move"},{match:"#Determiner #Noun of [#Verb]",group:0,tag:"Noun",reason:"noun-of-noun"},{match:"#Determiner [(western|eastern|northern|southern|central)] #Noun",group:0,tag:"Noun",reason:"western-line"},{match:"#Possessive [#Gerund]",group:0,tag:"Noun",reason:"her-polling"},{match:"(his|her|its) [#PresentTense]",group:0,tag:"Noun",reason:"its-polling"},{match:"(#Determiner|#Value) [(linear|binary|mobile|lexical|technical|computer|scientific|formal)] #Noun",group:0,tag:"Noun",reason:"technical-noun"},{match:"(the|those|these|a|an) [#Participle] #Noun",group:0,tag:"Adjective",reason:"blown-motor"},{match:"(the|those|these|a|an) #Adjective? [#Infinitive]",group:0,tag:"Noun",reason:"det-inf"},{match:"(the|those|these|a|an) #Adjective? [#PresentTense]",group:0,tag:"Noun",reason:"det-pres"},{match:"(the|those|these|a|an) #Adjective? [#PastTense]",group:0,tag:"Noun",reason:"det-past"},{match:"(this|that) [#Gerund]",group:0,tag:"Noun",reason:"this-gerund"},{match:"at some [#Infinitive]",group:0,tag:"Noun",reason:"at-some-inf"},{match:"(#Noun && @hasHyphen) #Verb",tag:"Noun",reason:"hyphen-verb"},{match:"is no [#Verb]",group:0,tag:"Noun",reason:"is-no-verb"},{match:"[#Verb] than",group:0,tag:"Noun",reason:"correction"},{match:"(go|goes|went) to [#Infinitive]",group:0,tag:"Noun",reason:"goes-to-verb"},{match:"(a|an) #Noun [#Infinitive] (#Preposition|#Noun)",group:0,tag:"Noun",reason:"a-noun-inf"},{match:"(a|an) #Noun [#Infinitive]$",group:0,tag:"Noun",reason:"a-noun-inf2"},{match:"do [so]",group:0,tag:"Noun",reason:"so-noun"},{match:"#Copula [#Infinitive] #Noun",group:0,tag:"Noun",reason:"is-pres-noun"},{match:"#Determiner #Adverb? [close]",group:0,tag:"Adjective",reason:"a-close"},{match:"#Determiner [(shit|damn|hell)]",group:0,tag:"Noun",reason:"swears-noun"},{match:"(the|these) [#Singular] (were|are)",group:0,tag:"Plural",reason:"singular-were"},{match:"#Gerund #Adjective? for [#Infinitive]",group:0,tag:"Noun",reason:"running-for"},{match:"#Gerund #Adjective to [#Infinitive]",group:0,tag:"Noun",reason:"running-to"},{match:"(many|any|some|several) [#PresentTense] for",group:0,tag:"Noun",reason:"any-verbs-for"},{match:"(have|had) [#Adjective] #Preposition .",group:0,tag:"Noun",reason:"have-fun"},{match:"co #Noun",tag:"Actor",reason:"co-noun"},{match:"to #PresentTense #Noun [#PresentTense] #Preposition",group:0,tag:"Noun",reason:"gas-exchange"},{match:"a #Noun+ or #Adverb+? [#Verb]",group:0,tag:"Noun",reason:"noun-or-noun"},{match:"[#Gerund] system",group:0,tag:"Noun",reason:"operating-system"},{match:"#PastTense (until|as|through|without) [#PresentTense]",group:0,tag:"Noun",reason:"waited-until-release"},{match:"#Gerund like #Adjective? [#PresentTense]",group:0,tag:"Plural",reason:"like-hot-cakes"},{match:"some #Adjective [#PresentTense]",group:0,tag:"Noun",reason:"some-reason"},{match:"for some [#PresentTense]",group:0,tag:"Noun",reason:"for-some-reason"},{match:"(same|some|the|that|a) kind of [#PresentTense]",group:0,tag:"Noun",reason:"some-kind-of"},{match:"(same|some|the|that|a) type of [#PresentTense]",group:0,tag:"Noun",reason:"some-type-of"},{match:"#Gerund #Adjective #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"doing-better-for-x"},{match:"(get|got|have|had) #Comparative [#PresentTense]",group:0,tag:"Noun",reason:"got-better-aim"},{match:"#Pronoun #Infinitive [#Gerund] #PresentTense",group:0,tag:"Noun",reason:"tipping-sucks"}],C1e=[{match:"[still] #Adjective",group:0,tag:"Adverb",reason:"still-advb"},{match:"[still] #Verb",group:0,tag:"Adverb",reason:"still-verb"},{match:"[so] #Adjective",group:0,tag:"Adverb",reason:"so-adv"},{match:"[way] #Comparative",group:0,tag:"Adverb",reason:"way-adj"},{match:"[way] #Adverb #Adjective",group:0,tag:"Adverb",reason:"way-too-adj"},{match:"[all] #Verb",group:0,tag:"Adverb",reason:"all-verb"},{match:"(#Verb && !#Modal) [like]",group:0,tag:"Adverb",reason:"verb-like"},{match:"(barely|hardly) even",tag:"Adverb",reason:"barely-even"},{match:"[even] #Verb",group:0,tag:"Adverb",reason:"even-walk"},{match:"even left",tag:"#Adverb #Verb",reason:"even-left"},{match:"(#PresentTense && !#Copula) [(hard|quick|long|bright|slow|fast|backwards|forwards)]",group:0,tag:"Adverb",reason:"lazy-ly"},{match:"[much] #Adjective",group:0,tag:"Adverb",reason:"bit-1"},{match:"#Copula [#Adverb]$",group:0,tag:"Adjective",reason:"is-well"},{match:"a [(little|bit|wee) bit?] #Adjective",group:0,tag:"Adverb",reason:"a-bit-cold"},{match:`[${`(${od.adverbAdjective.join("|")})`}] #Adjective`,group:0,tag:"Adverb",reason:"dark-green"},{match:"#Adverb [#Adverb]$",group:0,tag:"Adjective",reason:"kinda-sparkly"},{match:"#Adverb [#Adverb] (and|or|then)",group:0,tag:"Adjective",reason:"kinda-sparkly-and"},{match:"[super] #Adjective #Noun",group:0,tag:"Adverb",reason:"super-strong"}],S1e=[{match:"1 #Value #PhoneNumber",tag:"PhoneNumber",reason:"1-800-Value"},{match:"#NumericValue #PhoneNumber",tag:"PhoneNumber",reason:"(800) PhoneNumber"},{match:"#Demonym #Currency",tag:"Currency",reason:"demonym-currency"},{match:"[second] #Noun",group:0,tag:"Ordinal",reason:"second-noun"},{match:"#Value+ [#Currency]",group:0,tag:"Unit",reason:"5-yan"},{match:"#Value [(foot|feet)]",group:0,tag:"Unit",reason:"foot-unit"},{match:"(minus|negative) #Value",tag:"Value",reason:"minus-value"},{match:"#Value [#Abbreviation]",group:0,tag:"Unit",reason:"value-abbr"},{match:"#Value [k]",group:0,tag:"Unit",reason:"value-k"},{match:"#Unit an hour",tag:"Unit",reason:"unit-an-hour"},{match:"#Value (point|decimal) #Value",tag:"Value",reason:"value-point-value"},{match:"(#Value|a) [(buck|bucks|grand)]",group:0,tag:"Currency",reason:"value-bucks"},{match:"#Determiner [(half|quarter)] #Ordinal",group:0,tag:"Value",reason:"half-ordinal"},{match:"a #Value",tag:"Value",reason:"a-value"},{match:"[#Value+] #Currency",group:0,tag:"Money",reason:"15 usd"},{match:"(hundred|thousand|million|billion|trillion|quadrillion)+ and #Value",tag:"Value",reason:"magnitude-and-value"},{match:"!once [(a|an)] (#Duration|hundred|thousand|million|billion|trillion)",group:0,tag:"Value",reason:"a-is-one"}],Q1=`(${od.personVerb.join("|")})`,A1e=[{match:"[#Adjective] #Possessive #Noun",group:0,tag:"Verb",reason:"gerund-his-noun"},{match:"[#Adjective] (us|you)",group:0,tag:"Gerund",reason:"loving-you"},{match:"(slowly|quickly) [#Adjective]",group:0,tag:"Gerund",reason:"slowly-adj"},{match:"(#Modal|i|they|we|do) not? [like]",group:0,tag:"PresentTense",reason:"modal-like"},{match:"do (simply|just|really|not)+ [(#Adjective|like)]",group:0,tag:"Verb",reason:"do-simply-like"},{match:"does (#Adverb|not)? [#Adjective]",group:0,tag:"PresentTense",reason:"does-mean"},{match:"i (#Adverb|do)? not? [mean]",group:0,tag:"PresentTense",reason:"i-mean"},{match:"#Noun #Adverb? [left]",group:0,tag:"PastTense",reason:"left-verb"},{match:"(this|that) [#Plural]",group:0,tag:"PresentTense",reason:"this-verbs"},{match:"[#Copula (#Adverb|not)+?] (#Gerund|#PastTense)",group:0,tag:"Auxiliary",reason:"copula-walking"},{match:"[(has|had) (#Adverb|not)+?] #PastTense",group:0,tag:"Auxiliary",reason:"had-walked"},{match:"#Adverb+? [(#Modal|did)+ (#Adverb|not)+?] #Verb",group:0,tag:"Auxiliary",reason:"modal-verb"},{match:"[#Modal (#Adverb|not)+? have (#Adverb|not)+? had (#Adverb|not)+?] #Verb",group:0,tag:"Auxiliary",reason:"would-have"},{match:"[(has|had) (#Adverb|not)+?] #PastTense",group:0,tag:"Auxiliary",reason:"had-walked"},{match:"[(do|does|will|have|had)] (not|#Adverb)+? #Verb",group:0,tag:"Auxiliary",reason:"have-had"},{match:"[about to] #Adverb? #Verb",group:0,tag:["Auxiliary","Verb"],reason:"about-to"},{match:"#Modal (#Adverb|not)+? be (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"would-be"},{match:"(were|was) being [#PresentTense]",group:0,tag:"PastTense",reason:"was-being"},{match:"[#Modal (#Adverb|not)+? have (#Adverb|not)+? had (#Adverb|not)+?] #Verb",group:0,tag:"Auxiliary",reason:"would-have"},{match:"(#Modal|had|has) (#Adverb|not)+? been (#Adverb|not)+? #Verb",group:0,tag:"Auxiliary",reason:"had-been"},{match:"[(be|being|been)] #Participle",group:0,tag:"Auxiliary",reason:"being-foo"},{match:"(#Verb && @hasHyphen) up",tag:"PhrasalVerb",reason:"foo-up"},{match:"(#Verb && @hasHyphen) off",tag:"PhrasalVerb",reason:"foo-off"},{match:"(#Verb && @hasHyphen) over",tag:"PhrasalVerb",reason:"foo-over"},{match:"(#Verb && @hasHyphen) out",tag:"PhrasalVerb",reason:"foo-out"},{match:"#PhrasalVerb [#PhrasalVerb]",group:0,tag:"Particle",reason:"phrasal-particle"},{match:"(lived|went|crept|go) [on] for",group:0,tag:"PhrasalVerb",reason:"went-on"},{match:"#Verb (him|her|it|us|himself|herself|itself|everything|something) [(up|down)]",group:0,tag:"Adverb",reason:"phrasal-pronoun-advb"},{match:"[will #Adverb? not? #Adverb? be] #Gerund",group:0,tag:"Copula",reason:"will-be-copula"},{match:"will #Adverb? not? #Adverb? [be] #Adjective",group:0,tag:"Copula",reason:"be-copula"},{match:"[march] (up|down|back|to|toward)",group:0,tag:"Infinitive",reason:"march-to"},{match:"#Modal [march]",group:0,tag:"Infinitive",reason:"must-march"},{match:"(let|make|made) (him|her|it|#Person|#Place|#Organization)+ [#Singular] (a|an|the|it)",group:0,tag:"Infinitive",reason:"let-him-glue"},{match:"will [#Adjective]",group:0,tag:"Verb",reason:"will-adj"},{match:"#Pronoun [#Adjective] #Determiner #Adjective? #Noun",group:0,tag:"Verb",reason:"he-adj-the"},{match:"#Copula [#Adjective] to #Verb",group:0,tag:"Verb",reason:"adj-to"},{match:"[open] #Determiner",group:0,tag:"Infinitive",reason:"open-the"},{match:"[#PresentTense] (are|were|was) #Adjective",group:0,tag:"Plural",reason:"compromises-are-possible"},{match:`#Modal [${Q1}]`,group:0,tag:"Verb",reason:"would-mark"},{match:`#Adverb [${Q1}]`,group:0,tag:"Verb",reason:"really-mark"},{match:"(to|#Modal) [mark]",group:0,tag:"PresentTense",reason:"to-mark"},{match:"^[#Infinitive] (is|was)",group:0,tag:"Noun",reason:"checkmate-is"},{match:Q1+" #Person",tag:"Person",reason:"rob-smith"},{match:Q1+" #Acronym #ProperNoun",tag:"Person",reason:"rob-a-smith"},{match:"[shit] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear1-verb"},{match:"[damn] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear2-verb"},{match:"[fuck] (#Determiner|#Possessive|them)",group:0,tag:"Verb",reason:"swear3-verb"},{match:"(become|fall|grow) #Adverb? [#PastTense]",group:0,tag:"Adjective",reason:"overly-weakened"},{match:"(a|an) #Adverb [#Participle] #Noun",group:0,tag:"Adjective",reason:"completely-beaten"},{match:"whose [#PresentTense] #Copula",group:0,tag:"Noun",reason:"whos-name-was"},{match:"#PhrasalVerb #PhrasalVerb #Preposition [#PresentTense]",group:0,tag:"Noun",reason:"given-up-on-x"}],w1e=[{match:"(west|north|south|east|western|northern|southern|eastern)+ #Place",tag:"Region",reason:"west-norfolk"},{match:"#City [(al|ak|az|ar|ca|ct|dc|fl|ga|id|il|nv|nh|nj|ny|oh|pa|sc|tn|tx|ut|vt|pr)]",group:0,tag:"Region",reason:"us-state"},{match:"portland [or]",group:0,tag:"Region",reason:"portland-or"},{match:"#ProperNoun+ (district|region|province|county|prefecture|municipality|territory|burough|reservation)",tag:"Region",reason:"foo-district"},{match:"(district|region|province|municipality|territory|burough|state) of #ProperNoun",tag:"Region",reason:"district-of-Foo"},{match:"in [#ProperNoun] #Place",group:0,tag:"Place",reason:"propernoun-place"},{match:"#Value #Noun (st|street|rd|road|crescent|cr|way|tr|terrace|avenue|ave)",tag:"Address",reason:"address-st"}],yw=od,JB=`(${yw.personNoun.join("|")})`,Qr=`(${yw.personMonth.join("|")})`,x1e=[{match:"[(1st|2nd|first|second)] #Honorific",group:0,tag:"Honorific",reason:"ordinal-honorific"},{match:"[(private|general|major|corporal|lord|lady|secretary|premier)] #Honorific? #Person",group:0,tag:"Honorific",reason:"ambg-honorifics"},{match:"#Copula [(#Noun|#PresentTense)] #LastName",group:0,tag:"FirstName",reason:"copula-noun-lastname"},{match:"(lady|queen|sister) #ProperNoun",tag:"FemaleName",reason:"lady-titlecase",safe:!0},{match:"(king|pope|father) #ProperNoun",tag:"MaleName",reason:"pope-titlecase",safe:!0},{match:"[(will|may|april|june|said|rob|wade|ray|rusty|drew|miles|jack|chuck|randy|jan|pat|cliff|bill)] #LastName",group:0,tag:"FirstName",reason:"maybe-lastname"},{match:"#FirstName [#Determiner #Noun] #LastName",group:0,tag:"NickName",reason:"first-noun-last"},{match:"#Possessive [#FirstName]",group:0,tag:"Person",reason:"possessive-name"},{match:"#ProperNoun (b|c|d|e|f|g|h|j|k|l|m|n|o|p|q|r|s|t|u|v|w|x|y|z) #ProperNoun",tag:"Person",reason:"titlecase-acronym-titlecase",safe:!0},{match:"#Acronym #LastName",tag:"Person",reason:"acronym-latname",safe:!0},{match:"#Person (jr|sr|md)",tag:"Person",reason:"person-honorific"},{match:"#Person #Person the? #RomanNumeral",tag:"Person",reason:"roman-numeral"},{match:"#FirstName [/^[^aiurck]$/]",group:0,tag:["Acronym","Person"],reason:"john-e"},{match:"#Honorific #Person",tag:"Person",reason:"honorific-person"},{match:"#Honorific #Acronym",tag:"Person",reason:"Honorific-TitleCase"},{match:"#Noun van der? #Noun",tag:"Person",reason:"van der noun",safe:!0},{match:"(king|queen|prince|saint|lady) of #Noun",tag:"Person",reason:"king-of-noun",safe:!0},{match:"(prince|lady) #Place",tag:"Person",reason:"lady-place"},{match:"(king|queen|prince|saint) #ProperNoun",tag:"Person",reason:"saint-foo"},{match:"[#ProperNoun] #Person",group:0,tag:"Person",reason:"proper-person",safe:!0},{match:"al (#Person|#ProperNoun)",tag:"Person",reason:"al-borlen",safe:!0},{match:"#FirstName de #Noun",tag:"Person",reason:"bill-de-noun"},{match:"#FirstName (bin|al) #Noun",tag:"Person",reason:"bill-al-noun"},{match:"#FirstName #Acronym #ProperNoun",tag:"Person",reason:"bill-acronym-title"},{match:"#FirstName #FirstName #ProperNoun",tag:"Person",reason:"bill-firstname-title"},{match:"#Honorific #FirstName? #ProperNoun",tag:"Person",reason:"dr-john-Title"},{match:"#FirstName the #Adjective",tag:"Person",reason:"name-the-great"},{match:"#FirstName (green|white|brown|hall|young|king|hill|cook|gray|price)",tag:"Person",reason:"bill-green"},{match:JB+" #Person",tag:"Person",reason:"ray-smith",safe:!0},{match:JB+" #Acronym? #ProperNoun",tag:"Person",reason:"ray-a-smith",safe:!0},{match:`#Infinitive #Determiner? #Adjective? #Noun? (to|for) [${Qr}]`,group:0,tag:"Person",reason:"ambig-person"},{match:`#Infinitive [${Qr}]`,group:0,tag:"Person",reason:"infinitive-person"},{match:`[${Qr}] #Modal`,group:0,tag:"Person",reason:"ambig-modal"},{match:"[may] be",group:0,tag:"Verb",reason:"may-be"},{match:`#Modal [${Qr}]`,group:0,tag:"Person",reason:"modal-ambig"},{match:`#Copula [${Qr}]`,group:0,tag:"Person",reason:"is-may"},{match:`[${Qr}] #Copula`,group:0,tag:"Person",reason:"may-is"},{match:`that [${Qr}]`,group:0,tag:"Person",reason:"that-month"},{match:`with [${Qr}]`,group:0,tag:"Person",reason:"with-month"},{match:`for [${Qr}]`,group:0,tag:"Person",reason:"for-month"},{match:`this [${Qr}]`,group:0,tag:"Month",reason:"this-may"},{match:`next [${Qr}]`,group:0,tag:"Month",reason:"next-may"},{match:`last [${Qr}]`,group:0,tag:"Month",reason:"last-may"},{match:`#Date [${Qr}]`,group:0,tag:"Month",reason:"date-may"},{match:`[${Qr}] the? #Value`,group:0,tag:"Month",reason:"may-5th"},{match:`#Value of [${Qr}]`,group:0,tag:"Month",reason:"5th-of-may"},{match:"#ProperNoun (van|al|bin) #ProperNoun",tag:"Person",reason:"title-van-title",safe:!0},{match:"#ProperNoun (de|du) la? #ProperNoun",tag:"Person",reason:"title-de-title",safe:!0},{match:"#Singular #Acronym #LastName",tag:"#Person",reason:"title-acro-noun",safe:!0},{match:"#FirstName (#Noun && #ProperNoun) #ProperNoun?",tag:"Person",reason:"firstname-titlecase"},{match:"#FirstName #Acronym #Noun",tag:"Person",reason:"n-acro-noun",safe:!0},{match:"#FirstName [(de|di|du|van|von) #Person]",group:0,tag:"LastName",reason:"de-firstname"},{match:`[${`(${yw.personPlace.join("|")})`}] (#ProperNoun && !#Place)`,group:0,tag:"FirstName",reason:"place-firstname"}],E1e=Qf,QB=ZB,Lt=[];Lt=Lt.concat(g1e),Lt=Lt.concat(v1e),Lt=Lt.concat(T1e),Lt=Lt.concat(N1e),Lt=Lt.concat(C1e),Lt=Lt.concat(S1e),Lt=Lt.concat(A1e),Lt=Lt.concat(w1e),Lt=Lt.concat([{match:"#Noun (&|n) #Noun",tag:"Organization",reason:"Noun-&-Noun"},{match:"#Organization of the? #ProperNoun",tag:"Organization",reason:"org-of-place",safe:!0},{match:"#Organization #Country",tag:"Organization",reason:"org-country"},{match:"#ProperNoun #Organization",tag:"Organization",reason:"titlecase-org"},{match:"#ProperNoun (ltd|co|inc|dept|assn|bros)",tag:"Organization",reason:"org-abbrv"},{match:"the [#Acronym]",group:0,tag:"Organization",reason:"the-acronym",safe:!0},{match:"(world|global|international|national|#Demonym) #Organization",tag:"Organization",reason:"global-org"},{match:"#Noun+ (public|private) school",tag:"School",reason:"noun-public-school"}]),Lt=Lt.concat(x1e);var ld=[];Lt.forEach(i=>{i.reg=E1e(i.match);let t=function(e){let r=[];if(e.reg.filter(a=>a.fastOr!==void 0).length===1){let a=e.reg.findIndex(s=>s.fastOr!==void 0);Object.keys(e.reg[a].fastOr).forEach(s=>{let o=Object.assign({},e);o.reg=o.reg.slice(0),o.reg[a]=Object.assign({},o.reg[a]),o.reg[a].word=s,delete o.reg[a].operator,delete o.reg[a].fastOr,r.push(o)})}return r}(i);t.length>0?ld=ld.concat(t):ld.push(i)}),ld.forEach(i=>(i.required=function(t){let e=[],r=[];return t.forEach(a=>{a.optional!==!0&&a.negative!==!0&&(a.tag!==void 0&&e.push(a.tag),a.word!==void 0&&r.push(a.word))}),{tags:QB(e),words:QB(r)}}(i.reg),i));var R1e=ld,V1e=ZB,I1e=b1e,O1e=function(i){R1e.forEach(t=>{let e=[];t.required.words.forEach(o=>{e.push(i._cache.words[o]||[])}),t.required.tags.forEach(o=>{e.push(i._cache.tags[o]||[])});let r=function(o){if(o.length===0)return[];let l={};o.forEach(c=>{c=V1e(c);for(let p=0;p<c.length;p++)l[c[p]]=l[c[p]]||0,l[c[p]]+=1});let u=Object.keys(l);return u=u.filter(c=>l[c]===o.length),u=u.map(c=>Number(c)),u}(e);if(r.length===0)return;let a=r.map(o=>i.list[o]),s=i.buildFrom(a).match(t.reg,t.group);s.found&&(t.safe===!0?s.tagSafe(t.tag,t.reason):s.tag(t.tag,t.reason))})},D1e=Ive,P1e=$ve,_1e=y1e,k1e=function(i){return O1e(i),I1e(i),i},F1e=function(i){let t=i.termList();return i=D1e(i,t),i=P1e(i,t),(i=_1e(i)).cache(),(i=k1e(i)).uncache(),i.world.taggers.forEach(e=>{e(i)}),i},M1e=function(i){class t extends i{stripPeriods(){return this.termList().forEach(r=>{r.tags.Abbreviation===!0&&r.next&&(r.post=r.post.replace(/^\./,""));let a=r.text.replace(/\./,"");r.set(a)}),this}addPeriods(){return this.termList().forEach(r=>{r.post=r.post.replace(/^\./,""),r.post="."+r.post}),this}}return t.prototype.unwrap=t.prototype.stripPeriods,i.prototype.abbreviations=function(e){let r=this.match("#Abbreviation");return typeof e=="number"&&(r=r.get(e)),new t(r.list,this,this.world)},i},j1e=/\./,B1e=function(i){class t extends i{stripPeriods(){return this.termList().forEach(r=>{let a=r.text.replace(/\./g,"");r.set(a)}),this}addPeriods(){return this.termList().forEach(r=>{let a=r.text.replace(/\./g,"");a=a.split("").join("."),j1e.test(r.post)===!1&&(a+="."),r.set(a)}),this}}return t.prototype.unwrap=t.prototype.stripPeriods,t.prototype.strip=t.prototype.stripPeriods,i.prototype.acronyms=function(e){let r=this.match("#Acronym");return typeof e=="number"&&(r=r.get(e)),new t(r.list,this,this.world)},i},L1e=function(i){return i.prototype.clauses=function(t){let e=this.if("@hasComma").notIf("@hasComma @hasComma").notIf("@hasComma . .? (and|or) .").notIf("(#City && @hasComma) #Country").notIf("(#WeekDay && @hasComma) #Date").notIf("(#Date && @hasComma) #Year").notIf("@hasComma (too|also)$").match("@hasComma"),r=this.splitAfter(e),a=r.quotations();r=r.splitOn(a);let s=r.parentheses();r=r.splitOn(s);let o=r.if("#Copula #Adjective #Conjunction (#Pronoun|#Determiner) #Verb").match("#Conjunction");r=r.splitBefore(o);let l=r.if("if .{2,9} then .").match("then");r=r.splitBefore(l),r=r.splitBefore("as well as ."),r=r.splitBefore("such as ."),r=r.splitBefore("in addition to ."),r=r.splitAfter("@hasSemicolon"),r=r.splitAfter("@hasDash");let u=r.filter(c=>c.wordCount()>5&&c.match("#Verb+").length>=2);if(u.found){let c=u.splitAfter("#Noun .* #Verb .* #Noun+");r=r.splitOn(c.eq(0))}return typeof t=="number"&&(r=r.get(t)),new i(r.list,this,this.world)},i},U1e=function(i){class t extends i{constructor(r,a,s){super(r,a,s),this.contracted=null}expand(){return this.list.forEach(r=>{let a=r.terms(),s=a[0].isTitleCase();a.forEach((o,l)=>{o.set(o.implicit||o.text),o.implicit=void 0,l<a.length-1&&o.post===""&&(o.post+=" ")}),s&&a[0].toTitleCase()}),this}}return i.prototype.contractions=function(e){let r=this.match("@hasContraction+");return typeof e=="number"&&(r=r.get(e)),new t(r.list,this,this.world)},i.prototype.expanded=i.prototype.isExpanded,i.prototype.contracted=i.prototype.isContracted,i},z1e=function(i){let t=function(r){let a=r.splitAfter("@hasComma").splitOn("(and|or) not?").not("(and|or) not?"),s=r.match("[.] (and|or)",0);return{things:a,conjunction:r.match("(and|or) not?"),beforeLast:s,hasOxford:s.has("@hasComma")}};class e extends i{conjunctions(){return this.match("(and|or)")}parts(){return this.splitAfter("@hasComma").splitOn("(and|or) not?")}items(){return t(this).things}add(a){return this.forEach(s=>{let o=t(s).beforeLast;o.append(a),o.termList(0).addPunctuation(",")}),this}remove(a){return this.items().if(a).remove()}hasOxfordComma(){return this.filter(a=>t(a).hasOxford)}addOxfordComma(){let a=this.items(),s=a.eq(a.length-2);return s.found&&s.has("@hasComma")===!1&&s.post(", "),this}removeOxfordComma(){let a=this.items(),s=a.eq(a.length-2);return s.found&&s.has("@hasComma")===!0&&s.post(" "),this}}return e.prototype.things=e.prototype.items,i.prototype.lists=function(r){let a=this.if("@hasComma+ .? (and|or) not? ."),s=a.match("(#Noun|#Adjective|#Determiner|#Article)+ #Conjunction not? (#Article|#Determiner)? #Adjective? #Noun+").if("#Noun"),o=a.match("(#Adjective|#Adverb)+ #Conjunction not? #Adverb? #Adjective+"),l=a.match("(#Verb|#Adverb)+ #Conjunction not? #Adverb? #Verb+"),u=s.concat(o);return u=u.concat(l),u=u.if("@hasComma"),typeof r=="number"&&(u=a.get(r)),new e(u.list,this,this.world)},i},eL={hour:"an",heir:"an",heirloom:"an",honest:"an",honour:"an",honor:"an",uber:"an"},H1e={a:!0,e:!0,f:!0,h:!0,i:!0,l:!0,m:!0,n:!0,o:!0,r:!0,s:!0,x:!0},tL=[/^onc?e/i,/^u[bcfhjkqrstn][aeiou]/i,/^eul/i],rL={isSingular:[/(ax|test)is$/i,/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,/(octop|vir)i$/i,/(rl)f$/i,/(alias|status)$/i,/(bu)s$/i,/(al|ad|at|er|et|ed|ad)o$/i,/(ti)um$/i,/(ti)a$/i,/sis$/i,/(?:(^f)fe|(lr)f)$/i,/hive$/i,/(^aeiouy|qu)y$/i,/(x|ch|ss|sh|z)$/i,/(matr|vert|ind|cort)(ix|ex)$/i,/(m|l)ouse$/i,/(m|l)ice$/i,/(antenn|formul|nebul|vertebr|vit)a$/i,/.sis$/i,/^(?!talis|.*hu)(.*)man$/i],isPlural:[/(antenn|formul|nebul|vertebr|vit)ae$/i,/(octop|vir|radi|nucle|fung|cact|stimul)i$/i,/men$/i,/.tia$/i,/(m|l)ice$/i]},G1e=/s$/,nL={he:"his",she:"hers",they:"theirs",we:"ours",i:"mine",you:"yours",her:"hers",their:"theirs",our:"ours",my:"mine",your:"yours"},bw=function(i){return i.has("#Plural")===!0||i.has("(#Pronoun|#Place|#Value|#Person|#Uncountable|#Month|#WeekDay|#Holiday|#Possessive)")!==!0},iL=function(i){if(i.has("#Person")||i.has("#Place"))return"";if(i.has("#Plural"))return"the";let t=i.text("normal").trim();if(eL.hasOwnProperty(t))return eL[t];let e=t.substr(0,1);if(i.has("^@isAcronym")&&H1e.hasOwnProperty(e))return"an";for(let r=0;r<tL.length;r++)if(tL[r].test(t))return"a";return/^[aeiou]/i.test(t)?"an":"a"},aL=function(i){return!rL.isSingular.find(t=>t.test(i))&&(G1e.test(i)===!0||!!rL.isPlural.find(t=>t.test(i))||null)},q1e=function(i){let t=i.text("text").trim();return nL.hasOwnProperty(t)?(i.replaceWith(nL[t],!0),void i.tag("Possessive","toPossessive")):/s$/.test(t)?(t+="'",i.replaceWith(t,!0),void i.tag("Possessive","toPossessive")):(t+="'s",i.replaceWith(t,!0),void i.tag("Possessive","toPossessive"))},sL=function(i){let t={main:i};if(i.has("#Noun (of|by|for) .")){let e=i.splitAfter("[#Noun+]",0);t.main=e.eq(0),t.post=e.eq(1)}return t},W1e={json:function(i){let t=null;typeof i=="number"&&(t=i,i=null),i=i||{text:!0,normal:!0,trim:!0,terms:!0};let e=[];return this.forEach(r=>{let a=r.json(i)[0];a.article=iL(r),e.push(a)}),t!==null?e[t]:e},adjectives:function(){let i=this.lookAhead("^(that|who|which)? (was|is|will)? be? #Adverb? #Adjective+");return i=i.concat(this.lookBehind("#Adjective+ #Adverb?$")),i=i.match("#Adjective"),i.sort("index")},isPlural:function(){return this.if("#Plural")},hasPlural:function(){return this.filter(i=>bw(i))},toPlural:function(i){let t=this.world.transforms.toPlural;return this.forEach(e=>{if(e.has("#Plural")||bw(e)===!1)return;let r=sL(e).main,a=r.text("reduced");if((r.has("#Singular")||aL(a)!==!0)&&(a=t(a,this.world),r.replace(a).tag("#Plural"),i)){let s=r.lookBefore("(an|a) #Adjective?$").not("#Adjective");s.found===!0&&s.remove()}}),this},toSingular:function(i){let t=this.world.transforms.toSingular;return this.forEach(e=>{if(e.has("^#Singular+$")||bw(e)===!1)return;let r=sL(e).main,a=r.text("reduced");if((r.has("#Plural")||aL(a)===!0)&&(a=t(a,this.world),r.replace(a).tag("#Singular"),i)){let s=e,o=e.lookBefore("#Adjective");o.found&&(s=o);let l=iL(s);s.insertBefore(l)}}),this},toPossessive:function(){return this.forEach(i=>{q1e(i)}),this}},$1e=function(i){class t extends i{}return Object.assign(t.prototype,W1e),i.prototype.nouns=function(e,r={}){let a=this.match("(#City && @hasComma) (#Region|#Country)"),s=this.not(a).splitAfter("@hasComma");s=s.concat(a);let o=s.quotations();return o.found&&(s=s.splitOn(o.eq(0))),s=s.match("#Noun+ (of|by)? the? #Noun+?"),r.keep_anaphora!==!0&&(s=s.not("#Pronoun"),s=s.not("(there|these)"),s=s.not("(#Month|#WeekDay)"),s=s.not("(my|our|your|their|her|his)")),s=s.not("(of|for|by|the)$"),typeof e=="number"&&(s=s.get(e)),new t(s.list,this,this.world)},i},oL=/\(/,lL=/\)/,K1e=function(i){class t extends i{unwrap(){return this.list.forEach(r=>{let a=r.terms(0);a.pre=a.pre.replace(oL,"");let s=r.lastTerm();s.post=s.post.replace(lL,"")}),this}}return i.prototype.parentheses=function(e){let r=[];return this.list.forEach(a=>{let s=a.terms();for(let o=0;o<s.length;o+=1){let l=s[o];if(oL.test(l.pre)){for(let u=o;u<s.length;u+=1)if(lL.test(s[u].post)){let c=u-o+1;r.push(a.buildFrom(l.id,c)),o=u;break}}}}),typeof e=="number"?(r=r[e]?[r[e]]:[],new t(r,this,this.world)):new t(r,this,this.world)},i},X1e=function(i){class t extends i{constructor(r,a,s){super(r,a,s),this.contracted=null}strip(){return this.list.forEach(r=>{r.terms().forEach(a=>{let s=a.text.replace(/'s$/,"");a.set(s||a.text)})}),this}}return i.prototype.possessives=function(e){let r=this.match("#Noun+? #Possessive");return typeof e=="number"&&(r=r.get(e)),new t(r.list,this,this.world)},i},uL={'"':'"',"\uFF02":"\uFF02","'":"'","\u201C":"\u201D","\u2018":"\u2019","\u201F":"\u201D","\u201B":"\u2019","\u201E":"\u201D","\u2E42":"\u201D","\u201A":"\u2019","\xAB":"\xBB","\u2039":"\u203A","\u2035":"\u2032","\u2036":"\u2033","\u2037":"\u2034","\u301D":"\u301E","`":"\xB4","\u301F":"\u301E"},cL=RegExp("("+Object.keys(uL).join("|")+")"),Y1e=function(i){class t extends i{unwrap(){return this}}return i.prototype.quotations=function(e){let r=[];return this.list.forEach(a=>{let s=a.terms();for(let o=0;o<s.length;o+=1){let l=s[o];if(cL.test(l.pre)){let u=(l.pre.match(cL)||[])[0],c=uL[u];for(let p=o;p<s.length;p+=1)if(s[p].post.indexOf(c)!==-1){let m=p-o+1;r.push(a.buildFrom(l.id,m)),o=p;break}}}}),typeof e=="number"?(r=r[e]?[r[e]]:[],new t(r,this,this.world)):new t(r,this,this.world)},i.prototype.quotes=i.prototype.quotations,i},pL=function(i,t){let e=i.verb,r=e.text("reduced");if(e.has("#Infinitive"))return r;let a=null;return e.has("#PastTense")?a="PastTense":e.has("#Gerund")?a="Gerund":e.has("#PresentTense")?a="PresentTense":e.has("#Participle")?a="Participle":e.has("#Actor")&&(a="Actor"),t.transforms.toInfinitive(r,t,a)},e0=function(i){let t=i.verb;if(t.has("(are|were|does)")||i.auxiliary.has("(are|were|does)"))return!0;let e=function(r){return r.lookBehind("#Noun+").last()}(t);return!e.has("(he|she|many|both)")&&(!!e.has("(we|they|you|i)")||!e.has("#Person")&&(!!e.has("#Plural")||!e.has("#Singular")&&!t.has("(is|am|do|was)")&&!(i.auxiliary.has("(is|am|do|was)")&&!i.negative.found)&&null))},gw=pL,mL=e0,fL=function(i){let t=i.lookBehind(),e=t.nouns(null,{keep_anaphora:!0}).last();return e.found||(e=t.match("(that|this|each)").last(),e=e.tag("#Noun").nouns()),e},Z1e=fL,J1e=e0,dL=pL,Q1e=i=>{let t=!1,e=J1e(i),r=i.negative.found;i.verb.lookBehind("i (#Adverb|#Verb)?$").found&&(t=!0);let a={PastTense:"was",PresentTense:"is",FutureTense:"will be",Infinitive:"is",Gerund:"being",Actor:"",PerfectTense:"been",Pluperfect:"been"};return e&&(a.PastTense="were",a.PresentTense="are",a.Infinitive="are"),t===!0&&(a.PastTense="was",a.PresentTense="am",a.Infinitive="am"),r&&(a.PastTense+=" not",a.PresentTense+=" not",a.FutureTense="will not be",a.Infinitive+=" not",a.PerfectTense="not "+a.PerfectTense,a.Pluperfect="not "+a.Pluperfect,a.Gerund="not "+a.Gerund),a},e0e=function(i){let t=i.verb.text();return{PastTense:t+" have",PresentTense:t,FutureTense:t,Infinitive:t}},t0e=e0,hL=function(i,t){let e=i.verb;if(e.has("#Copula")||e.out("normal")==="be"&&i.auxiliary.has("will"))return Q1e(i);if(i.auxiliary.has("are")&&e.has("#Gerund")){let u=i.original.clone(),c=u.clone().replace("are","were"),p=u.clone().replace("are","will be"),m=dL(i,t);return{PastTense:c.text(),PresentTense:u.text(),FutureTense:p.text(),Infinitive:m}}if(e.has("#Modal"))return e0e(i);let r=dL(i,t);if(!r)return{};let a=t.transforms.conjugate(r,t);a.Infinitive=r;let s=t0e(i);s===!0&&(a.PresentTense=a.Infinitive);let o=i.verb.termList(0).hasHyphen();if(i.particle.found){let u=i.particle.text(),c=o===!0?"-":" ";Object.keys(a).forEach(p=>a[p]+=c+u)}let l=i.negative.found;return a.FutureTense=a.FutureTense||"will "+a.Infinitive,l&&(a.PastTense="did not "+a.Infinitive,a.FutureTense="will not "+a.Infinitive,s?(a.PresentTense="do not "+a.Infinitive,a.Infinitive="do not "+a.Infinitive):(a.PresentTense="does not "+a.Infinitive,a.Infinitive="does not "+a.Infinitive),a.Gerund="not "+a.Gerund),a},r0e=hL,n0e={useParticiple:function(i){return!!i.auxiliary.has("(could|should|would|may|can|must)")||!!i.auxiliary.has("am .+? being")||!!i.auxiliary.has("had .+? been")},toParticiple:function(i,t){if(i.auxiliary.has("(have|had)")&&i.verb.has("#Participle"))return;let e=r0e(i,t),r=e.Participle||e.PastTense;r&&i.verb.replaceWith(r,!1),i.auxiliary.has("am .+? being")&&(i.auxiliary.remove("am"),i.auxiliary.replace("being","have been")),i.auxiliary.has("have")||i.auxiliary.append("have"),i.verb.tag("Participle","toParticiple"),i.auxiliary.replace("can","could"),i.auxiliary.replace("be have","have been"),i.auxiliary.replace("not have","have not"),i.auxiliary.tag("Auxiliary")}},i0e=function(i,t){let e=i.verb;if(!i.negative.found){if(i.auxiliary.found)return i.auxiliary.eq(0).append("not"),void(i.auxiliary.has("#Modal have not")&&i.auxiliary.replace("have not","not have"));if(e.has("(#Copula|will|has|had|do)"))e.append("not");else{if(e.has("#PastTense")){let r=gw(i,t);return e.replaceWith(r,!0),void e.prepend("did not")}if(e.has("#PresentTense")){let r=gw(i,t);return e.replaceWith(r,!0),void(mL(i)?e.prepend("do not"):e.prepend("does not"))}if(e.has("#Gerund")){let r=gw(i,t);return e.replaceWith(r,!0),void e.prepend("not")}mL(i)?e.prepend("does not"):e.prepend("do not")}}},Yn=function(i){let t={adverb:i.match("#Adverb+"),negative:i.match("#Negative"),auxiliary:i.match("#Auxiliary+").not("(#Negative|#Adverb)"),particle:i.match("#Particle"),verb:i.match("#Verb+").not("(#Adverb|#Negative|#Auxiliary|#Particle)"),original:i,subject:Z1e(i)};if(t.verb.has("(#PresentTense|#PastTense|#Infinitive) #Gerund$")&&(t.verb=t.verb.not("#Gerund$")),!t.verb.found)return Object.keys(t).forEach(e=>{t[e]=t[e].not(".")}),t.verb=i,t;if(t.adverb&&t.adverb.found){let e=t.adverb.text("reduced")+"$";i.has(e)&&(t.adverbAfter=!0)}return t},yL=e0,a0e=fL,dl=hL,{toParticiple:bL,useParticiple:gL}=n0e,vw=function(i){return i.auxiliary.remove("(will|are|am|being)"),i.auxiliary.remove("(did|does)"),i.auxiliary.remove("(had|has|have)"),i.particle.remove(),i.negative.remove(),i},s0e={json:function(i){let t=null;typeof i=="number"&&(t=i,i=null),i=i||{text:!0,normal:!0,trim:!0,terms:!0};let e=[];return this.forEach(r=>{let a=r.json(i)[0],s=Yn(r);a.parts={},Object.keys(s).forEach(o=>{s[o]&&s[o].isA==="Doc"?a.parts[o]=s[o].text("normal"):a.parts[o]=s[o]}),a.isNegative=r.has("#Negative"),a.conjugations=dl(s,this.world),e.push(a)}),t!==null?e[t]:e},adverbs:function(){let i=[];this.forEach(e=>{let r=Yn(e).adverb;r.found&&(i=i.concat(r.list))});let t=this.lookBehind("#Adverb+$");return t.found&&(i=t.list.concat(i)),t=this.lookAhead("^#Adverb+"),t.found&&(i=i.concat(t.list)),this.buildFrom(i)},isPlural:function(){let i=[];return this.forEach(t=>{let e=Yn(t);yL(e,this.world)===!0&&i.push(t.list[0])}),this.buildFrom(i)},isSingular:function(){let i=[];return this.forEach(t=>{let e=Yn(t);yL(e,this.world)===!1&&i.push(t.list[0])}),this.buildFrom(i)},conjugate:function(){let i=[];return this.forEach(t=>{let e=Yn(t),r=dl(e,this.world);i.push(r)}),i},toPastTense:function(){return this.forEach(i=>{let t=Yn(i);if(gL(t))return void bL(t,this.world);if(i.has("#Imperative")||i.has("be")&&i.lookBehind("to$").found)return;if(t.verb.has("#Gerund")&&t.auxiliary.has("(is|will|was)"))return void i.replace("is","was");let e=dl(t,this.world).PastTense;e&&(t=vw(t),t.verb.replaceWith(e,!1),t.auxiliary.remove("(do|did|will)"))}),this},toPresentTense:function(){return this.forEach(i=>{if(i.has("#Imperative"))return;let t=Yn(i),e=dl(t,this.world),r=e.PresentTense;if(i.lookBehind("(i|we) (#Adverb|#Verb)?$").found&&(r=e.Infinitive),r){if(t.auxiliary.has("(have|had) been"))return t.auxiliary.replace("(have|had) been","am being"),void(e.Particle&&(r=e.Particle||e.PastTense));t.verb.replaceWith(r,!1),t.verb.tag("PresentTense"),t=vw(t),t.auxiliary.remove("#Modal"),t.auxiliary.remove("(do|did|will)")}}),this},toFutureTense:function(){return this.forEach(i=>{let t=Yn(i);if(gL(t)||i.has("#Imperative"))return;let e=dl(t,this.world).FutureTense;e&&(t=vw(t),t.auxiliary.remove("#Modal"),t.verb.replaceWith(e,!1),t.verb.tag("FutureTense"),t.auxiliary.remove("(do|did|will)"))}),this},toInfinitive:function(){return this.forEach(i=>{let t=Yn(i),e=dl(t,this.world).Infinitive;e&&(i.replaceWith(e,!1),i.tag("Infinitive"))}),this},toGerund:function(){return this.forEach(i=>{let t=Yn(i),e=dl(t,this.world).Gerund;e&&(i.replaceWith(e,!1),i.tag("Gerund"))}),this},toParticiple:function(){return this.forEach(i=>{let t=Yn(i),e=!t.auxiliary.found;bL(t,this.world),e&&(t.verb.prepend(t.auxiliary.text()),t.auxiliary.remove())}),this},isNegative:function(){return this.if("#Negative")},isPositive:function(){return this.ifNo("#Negative")},isImperative:function(){return this.if("#Imperative")},toNegative:function(){return this.list.forEach(i=>{let t=this.buildFrom([i]),e=Yn(t);i0e(e,t.world)}),this},toPositive:function(){let i=this.match("do not #Verb");return i.found&&i.remove("do not"),this.remove("#Negative")},subject:function(){let i=[];return this.forEach(t=>{let e=a0e(t);e.list[0]&&i.push(e.list[0])}),this.buildFrom(i)}},vL=LB,o0e=[M1e,B1e,L1e,U1e,z1e,$1e,K1e,X1e,Y1e,function(i){class t extends i{}return Object.assign(t.prototype,s0e),t.prototype.negate=t.prototype.toNegative,i.prototype.verbs=function(e){let r=this.match("(#Adverb|#Auxiliary|#Verb|#Negative|#Particle)+");r=r.not("^#Adverb+"),r=r.not("#Adverb+$");let a=r.match("(#Adverb && @hasComma) #Adverb"),s=r.not(a).splitAfter("@hasComma");return s=s.concat(a),s.sort("index"),s=s.if("#Verb"),s.has("(is|was)$")&&(s=s.splitBefore("(is|was)$")),s.has("#PresentTense #Adverb #PresentTense")&&(s=s.splitBefore("#Adverb #PresentTense")),typeof e=="number"&&(s=s.get(e)),new t(s.list,this,this.world)},i},function(i){class t extends i{}return i.prototype.people=function(e){let r=this.splitAfter("@hasComma");return r=r.match("#Person+"),typeof e=="number"&&(r=r.get(e)),new t(r.list,this,this.world)},i}],TL={misc:Cve,selections:LB},l0e=F1e,u0e=ed,c0e=function(i){return Object.keys(vL).forEach(t=>i.prototype[t]=vL[t]),o0e.forEach(t=>t(i)),i},ea=class{constructor(t,e,r){this.list=t,Object.defineProperty(this,"from",{enumerable:!1,value:e,writable:!0}),r===void 0&&e!==void 0&&(r=e.world),Object.defineProperty(this,"world",{enumerable:!1,value:r,writable:!0}),Object.defineProperty(this,"_cache",{enumerable:!1,writable:!0,value:{}}),Object.defineProperty(this,"found",{get:()=>this.list.length>0}),Object.defineProperty(this,"length",{get:()=>this.list.length}),Object.defineProperty(this,"isA",{get:()=>"Doc"})}tagger(){return l0e(this)}pool(){return this.list.length>0?this.list[0].pool:this.all().list[0].pool}};ea.prototype.buildFrom=function(i){return i=i.map(t=>t.clone(!0)),new ea(i,this,this.world)},ea.prototype.fromText=function(i){let t=u0e(i,this.world,this.pool());return this.buildFrom(t)},Object.assign(ea.prototype,TL.misc),Object.assign(ea.prototype,TL.selections),c0e(ea);var NL={untag:"unTag",and:"match",notIf:"ifNo",only:"if",onlyIf:"if"};Object.keys(NL).forEach(i=>ea.prototype[i]=ea.prototype[NL[i]]);var p0e=mw,CL=ed,m0e=Rge,t0=ea,f0e=tw,d0e=ew,h0e=rw,y0e=function(i){let t=i.termList();return p0e(t,i.world),i.world.taggers.forEach(e=>{e(i)}),i},b0e=Qf,g0e=function i(t){let e=t,r=function(a="",s){s&&e.addWords(s);let o=CL(a,e),l=new t0(o,null,e);return l.tagger(),l};return r.tokenize=function(a="",s){let o=e;s&&(o=o.clone(),o.words={},o.addWords(s));let l=CL(a,o),u=new t0(l,null,o);return(s||u.world.taggers.length>0)&&y0e(u),u},r.extend=function(a){return a(t0,e,this,f0e,d0e,h0e),this},r.fromJSON=function(a){let s=m0e(a,e);return new t0(s,null,e)},r.clone=function(){return i(e.clone())},r.verbose=function(a=!0){return e.verbose(a),this},r.world=function(){return e},r.parseMatch=function(a,s){return b0e(a,s)},r.version="13.11.3",r.import=r.load,r.plugin=r.extend,r}(new lve),r0=g0e;var v0e=function(i,t){let e=i.match("#Value+? #Money+ #Currency+ (and #Money+ #Currency+)+?");return i.match("#Money").forEach(r=>{r.lookAfter("#Currency").found||(e=e.concat(r))}),typeof t=="number"&&(e=e.get(t)),e},Ws="twenty|thirty|forty|fifty|sixty|seventy|eighty|ninety|fourty",T0e=function(i,t){let e=i.match("#Value+");if(e.has("#NumericValue #NumericValue")&&(e.has("#Value @hasComma #Value")?e.splitAfter("@hasComma"):e.has("#NumericValue #Fraction")?e.splitAfter("#NumericValue #Fraction"):e=e.splitAfter("#NumericValue")),e.has("#Value #Value #Value")&&!e.has("#Multiple")&&e.has("("+Ws+") #Cardinal #Cardinal")&&(e=e.splitAfter("("+Ws+") #Cardinal")),e.has("#Value #Value")){e.has("#NumericValue #NumericValue")&&(e=e.splitOn("#Year")),e.has("("+Ws+") (eleven|twelve|thirteen|fourteen|fifteen|sixteen|seventeen|eighteen|nineteen)")&&(e=e.splitAfter("("+Ws+")"));let r=e.match("#Cardinal #Cardinal");if(r.found&&!e.has("(point|decimal|#Fraction)")&&!r.has("#Cardinal (#Multiple|point|decimal)")){let a=e.has(`(one|two|three|four|five|six|seven|eight|nine) (${Ws})`),s=r.has("("+Ws+") #Cardinal"),o=r.has("#Multiple #Value");a||s||o||r.terms().forEach(l=>{e=e.splitOn(l)})}e.match("#Ordinal #Ordinal").match("#TextValue").found&&!e.has("#Multiple")&&(e.has("("+Ws+") #Ordinal")||(e=e.splitAfter("#Ordinal"))),e.has("#Ordinal #Cardinal")&&(e=e.splitBefore("#Cardinal+")),e.has("#TextValue #NumericValue")&&!e.has("("+Ws+"|#Multiple)")&&(e=e.splitBefore("#NumericValue+"))}return e.has("#NumberRange")&&(e=e.splitAfter("#NumberRange")),typeof t=="number"&&(e=e.get(t)),e},N0e=function(i,t){let e=i.match("#Fraction+");return e=e.filter(r=>!r.lookBehind("#Value and$").found),typeof t=="number"&&(e=e.eq(t)),e},C0e=function(i,t){let e=i.match("#Percent+");return e=e.concat(i.match("[#Cardinal] percent",0)),typeof t=="number"&&(e=e.eq(t)),e},Tw={ones:{zeroth:0,first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},teens:{tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19},tens:{twentieth:20,thirtieth:30,fortieth:40,fourtieth:40,fiftieth:50,sixtieth:60,seventieth:70,eightieth:80,ninetieth:90,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90},multiples:{hundredth:100,thousandth:1e3,millionth:1e6,billionth:1e9,trillionth:1e12,quadrillionth:1e15,quintillionth:1e18,sextillionth:1e21,septillionth:1e24,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12,quadrillion:1e15,quintillion:1e18,sextillion:1e21,septillion:1e24,grand:1e3}},Nw=Tw,Zc=Tw,S0e=i=>{let t=[{reg:/^(minus|negative)[\s\-]/i,mult:-1},{reg:/^(a\s)?half[\s\-](of\s)?/i,mult:.5}];for(let e=0;e<t.length;e++)if(t[e].reg.test(i)===!0)return{amount:t[e].mult,str:i.replace(t[e].reg,"")};return{amount:1,str:i}},hi=Tw,A0e=(i,t)=>{if(Nw.ones.hasOwnProperty(i)){if(t.ones||t.teens)return!1}else if(Nw.teens.hasOwnProperty(i)){if(t.ones||t.teens||t.tens)return!1}else if(Nw.tens.hasOwnProperty(i)&&(t.ones||t.teens||t.tens))return!1;return!0},w0e=function(i){let t="0.";for(let e=0;e<i.length;e++){let r=i[e];if(Zc.ones.hasOwnProperty(r)===!0)t+=Zc.ones[r];else if(Zc.teens.hasOwnProperty(r)===!0)t+=Zc.teens[r];else if(Zc.tens.hasOwnProperty(r)===!0)t+=Zc.tens[r];else{if(/^[0-9]$/.test(r)!==!0)return 0;t+=r}}return parseFloat(t)},x0e=i=>i=(i=(i=(i=(i=(i=(i=(i=i.replace(/1st$/,"1")).replace(/2nd$/,"2")).replace(/3rd$/,"3")).replace(/([4567890])r?th$/,"$1")).replace(/^[$€¥£¢]/,"")).replace(/[%$€¥£¢]$/,"")).replace(/,/g,"")).replace(/([0-9])([a-z\u00C0-\u00FF]{1,2})$/,"$1"),E0e=/^([0-9,\. ]+)\/([0-9,\. ]+)$/,SL={"a few":3,"a couple":2,"a dozen":12,"two dozen":24,zero:0},n0=i=>Object.keys(i).reduce((t,e)=>t+=i[e],0),Cw=function(i){if(SL.hasOwnProperty(i)===!0)return SL[i];if(i==="a"||i==="an")return 1;let t=S0e(i),e=null,r={},a=0,s=!1,o=(i=t.str).split(/[ -]/);for(let l=0;l<o.length;l++){let u=o[l];if(u=x0e(u),!u||u==="and")continue;if(u==="-"||u==="negative"){s=!0;continue}if(u.charAt(0)==="-"&&(s=!0,u=u.substr(1)),u==="point")return a+=n0(r),a+=w0e(o.slice(l+1,o.length)),a*=t.amount,a;let c=u.match(E0e);if(c){let p=parseFloat(c[1].replace(/[, ]/g,"")),m=parseFloat(c[2].replace(/[, ]/g,""));m&&(a+=p/m||0)}else{if(hi.tens.hasOwnProperty(u)&&r.ones&&Object.keys(r).length===1&&(a=100*r.ones,r={}),A0e(u,r)===!1)return null;if(/^[0-9\.]+$/.test(u))r.ones=parseFloat(u);else if(hi.ones.hasOwnProperty(u)===!0)r.ones=hi.ones[u];else if(hi.teens.hasOwnProperty(u)===!0)r.teens=hi.teens[u];else if(hi.tens.hasOwnProperty(u)===!0)r.tens=hi.tens[u];else if(hi.multiples.hasOwnProperty(u)===!0){let p=hi.multiples[u];if(p===e)return null;if(p===100&&o[l+1]!==void 0){let m=o[l+1];hi.multiples[m]&&(p*=hi.multiples[m],l+=1)}e===null||p<e?(a+=(n0(r)||1)*p,e=p,r={}):(a+=n0(r),e=p,a=(a||1)*p,r={})}}}return a+=n0(r),a*=t.amount,a*=s?-1:1,a===0&&Object.keys(r).length===0?null:a},AL=/s$/,R0e=Cw,ud=function(i){let t=i.text("reduced");return R0e(t)},i0={half:2,halve:2,quarter:4},wL=function(i){let t=function(e){let r=e.text("reduced");return i0.hasOwnProperty(r)?{numerator:1,denominator:i0[r]}:null}(i=i.clone())||function(e){let r=e.text("reduced").match(/^([-+]?[0-9]+)\/([-+]?[0-9]+)(st|nd|rd|th)?s?$/);return r&&r[1]&&r[0]?{numerator:Number(r[1]),denominator:Number(r[2])}:null}(i)||function(e){let r=e.match("[<num>#Value+] out of every? [<den>#Value+]");if(r.found!==!0)return null;let{num:a,den:s}=r.groups();return a&&s?(a=ud(a),s=ud(s),typeof a=="number"&&typeof s=="number"?{numerator:a,denominator:s}:null):null}(i)||function(e){let r=e.match("[<num>(#Cardinal|a)+] [<dem>#Fraction+]");if(r.found!==!0)return null;let{num:a,dem:s}=r.groups();a=a.has("a")?1:ud(a);let o=s.text("reduced");return AL.test(o)&&(o=o.replace(AL,""),s.replaceWith(o)),s=i0.hasOwnProperty(o)?i0[o]:ud(s),typeof a=="number"&&typeof s=="number"?{numerator:a,denominator:s}:null}(i)||function(e){let r=e.match("^#Ordinal$");return r.found!==!0?null:e.lookAhead("^of .")?{numerator:1,denominator:ud(r)}:null}(i)||null;return t!==null&&t.numerator&&t.denominator&&(t.decimal=t.numerator/t.denominator,t.decimal=(e=>{let r=Math.round(1e3*e)/1e3;return r===0&&e!==0?e:r})(t.decimal)),t},V0e=Cw,I0e=wL,Sw=function(i){let t=i.text("reduced"),e=/[0-9],[0-9]/.test(i.text("text")),r=function(l,u,c){let p=(l=l.replace(/,/g,"")).split(/^([^0-9]*)([0-9.,]*)([^0-9]*)$/);if(p&&p[2]&&u.terms().length<2){let m=parseFloat(p[2]||l);typeof m!="number"&&(m=null);let f=p[3]||"";return f!=="st"&&f!=="nd"&&f!=="rd"&&f!=="th"||(f=""),f!=="m"&&f!=="M"||(m*=1e6,f=""),f!=="k"&&f!=="k"||(m*=1e3,f=""),m=c?1/m:m,{prefix:p[1]||"",num:m,suffix:f}}return null}(t,i);if(r!==null)return r.hasComma=e,r;let a=i.match("#Fraction #Fraction+$");a=a.found===!1?i.match("^#Fraction$"):a;let s=null;a.found&&(s=I0e(a),t=(i=(i=i.not(a)).not("and$")).text("reduced"));let o=0;return t&&(o=V0e(t)||0),s&&s.decimal&&(o+=s.decimal),{hasComma:e,prefix:"",num:o,suffix:""}},Aw=function(i){if(i<1e6)return String(i);let t;return t=typeof i=="number"?i.toFixed(0):i,t.indexOf("e+")===-1?t:t.replace(".","").split("e+").reduce(function(e,r){return e+Array(r-e.length+2).join(0)})},xL=Aw,a0=[["ninety",90],["eighty",80],["seventy",70],["sixty",60],["fifty",50],["forty",40],["thirty",30],["twenty",20]],EL=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],O0e=[[1e24,"septillion"],[1e20,"hundred sextillion"],[1e21,"sextillion"],[1e20,"hundred quintillion"],[1e18,"quintillion"],[1e17,"hundred quadrillion"],[1e15,"quadrillion"],[1e14,"hundred trillion"],[1e12,"trillion"],[1e11,"hundred billion"],[1e9,"billion"],[1e8,"hundred million"],[1e6,"million"],[1e5,"hundred thousand"],[1e3,"thousand"],[100,"hundred"],[1,"one"]],D0e=function(i){let t=[];if(i>100)return t;for(let e=0;e<a0.length;e++)i>=a0[e][1]&&(i-=a0[e][1],t.push(a0[e][0]));return EL[i]&&t.push(EL[i]),t},ww=function(i){if(i===0||i==="0")return"zero";i>1e21&&(i=xL(i));let t=[];i<0&&(t.push("minus"),i=Math.abs(i));let e=function(r){let a=r,s=[];return O0e.forEach(o=>{if(r>=o[0]){let l=Math.floor(a/o[0]);a-=l*o[0],l&&s.push({unit:o[1],count:l})}}),s}(i);for(let r=0;r<e.length;r++){let a=e[r].unit;a==="one"&&(a="",t.length>1&&t.push("and")),t=t.concat(D0e(e[r].count)),t.push(a)}return t=t.concat((r=>{let a=["zero","one","two","three","four","five","six","seven","eight","nine"],s=[],o=xL(r).match(/\.([0-9]+)/);if(!o||!o[0])return s;s.push("point");let l=o[0].split("");for(let u=0;u<l.length;u++)s.push(a[l[u]]);return s})(i)),t=t.filter(r=>r),t.length===0&&(t[0]=""),t.join(" ")},P0e=Aw,_0e=ww,RL={one:"first",two:"second",three:"third",five:"fifth",eight:"eighth",nine:"ninth",twelve:"twelfth",twenty:"twentieth",thirty:"thirtieth",forty:"fortieth",fourty:"fourtieth",fifty:"fiftieth",sixty:"sixtieth",seventy:"seventieth",eighty:"eightieth",ninety:"ninetieth"},VL=i=>{let t=_0e(i).split(" "),e=t[t.length-1];return RL.hasOwnProperty(e)?t[t.length-1]=RL[e]:t[t.length-1]=e.replace(/y$/,"i")+"th",t.join(" ")},IL={prefixes:{"\xA2":"cents",$:"dollars","\xA3":"pounds","\xA5":"yen","\u20AC":"euros","\u20A1":"col\xF3n","\u0E3F":"baht","\u20AD":"kip","\u20A9":"won","\u20B9":"rupees","\u20BD":"ruble","\u20BA":"liras"},suffixes:{"%":"percent",s:"seconds",cm:"centimetres",km:"kilometres"}},k0e=Aw,F0e=ww,M0e=function(i){if(!i&&i!==0)return null;let t=i%100;if(t>10&&t<20)return String(i)+"th";let e={0:"th",1:"st",2:"nd",3:"rd"},r=P0e(i),a=r.slice(r.length-1,r.length);return r+=e[a]?e[a]:"th",r},j0e=VL,OL=IL.prefixes,DL=IL.suffixes,B0e={usd:!0,eur:!0,jpy:!0,gbp:!0,cad:!0,aud:!0,chf:!0,cny:!0,hkd:!0,nzd:!0,kr:!0,rub:!0},PL=function(i){return OL.hasOwnProperty(i.prefix)&&(i.suffix+=OL[i.prefix],i.prefix=""),DL.hasOwnProperty(i.suffix)&&(i.suffix=DL[i.suffix]),B0e.hasOwnProperty(i.suffix)&&(i.suffix=i.suffix.toUpperCase()),i.suffix&&(i.suffix=" "+i.suffix),i},_L=function(i,t,e){let r=String(i.num);return t?(i=PL(i),e?(r=j0e(r),`${i.prefix||""}${r}${i.suffix||""}`):(r=F0e(r),`${i.prefix||""}${r}${i.suffix||""}`)):e?(r=M0e(r),`${(i=PL(i)).prefix||""}${r}${i.suffix||""}`):(i.hasComma===!0&&(r=i.num.toLocaleString()),r=k0e(r),`${i.prefix||""}${r}${i.suffix||""}`)},yn=Sw,xw=function(i,t,e){if(i===!1)return;let r=t.lookAhead("^(#Unit|#Noun)");r.has("(#Address|#Money|#Percent)")||t.has("#Ordinal")||(e.num===1?r.nouns().toSingular():r.has("#Singular")&&r.nouns().toPlural())},yi=_L,kL=Cw,bi={json:function(i){let t=null;typeof i=="number"&&(t=i,i=null),i=i||{text:!0,normal:!0,trim:!0,terms:!0};let e=[];return this.forEach(r=>{let a=r.json(i)[0],s=yn(r);a.prefix=s.prefix,a.number=s.num,a.suffix=s.suffix,a.cardinal=yi(s,!1,!1),a.ordinal=yi(s,!1,!0),a.textCardinal=yi(s,!0,!1),a.textOrdinal=yi(s,!0,!0),e.push(a)}),t!==null?e[t]:e},units:function(){let i=this.lookAhead("(#Unit|#Noun)+");return i=i.splitAfter("@hasComma").first(),i=i.not("#Pronoun"),i.first()},isOrdinal:function(){return this.if("#Ordinal")},isCardinal:function(){return this.if("#Cardinal")},toNumber:function(){return this.forEach(i=>{let t=yn(i);if(t.num===null)return;let e=yi(t,!1,i.has("#Ordinal"));i.replaceWith(e,!0),i.tag("NumericValue")}),this},toLocaleString:function(){return this.forEach(i=>{let t=yn(i);if(t.num===null)return;t.num=t.num.toLocaleString();let e=yi(t,!1,i.has("#Ordinal"));i.replaceWith(e,!0)}),this},toText:function(){return this.forEach(i=>{let t=yn(i);if(t.num===null)return;let e=yi(t,!0,i.has("#Ordinal"));i.replaceWith(e,!0),i.tag("TextValue")}),this},toCardinal:function(i){return this.if("#Ordinal").forEach(t=>{let e=yn(t);if(e.num===null)return;let r=yi(e,t.has("#TextValue"),!1);if(t.has("#NumberRange")){let a=t.termList()[0];a.text&&a.post===""&&(a.post=" ")}t.replaceWith(r,!0),t.tag("Cardinal"),xw(i,t,e)}),this},toOrdinal:function(){return this.if("#Cardinal").forEach(i=>{let t=yn(i);if(t.num===null)return;let e=yi(t,i.has("#TextValue"),!0);if(i.has("#NumberRange")){let a=i.termList()[0];a.text&&a.post===""&&(a.post=" ")}i.replaceWith(e,!0),i.tag("Ordinal");let r=this.lookAhead("^#Plural");r.found&&r.nouns().toSingular()}),this},isEqual:function(i){return this.filter(t=>yn(t).num===i)},greaterThan:function(i){return this.filter(t=>yn(t).num>i)},lessThan:function(i){return this.filter(t=>yn(t).num<i)},between:function(i,t){return this.filter(e=>{let r=yn(e).num;return r>i&&r<t})},set:function(i,t){return i===void 0||(typeof i=="string"&&(i=kL(i)),this.forEach(e=>{let r=yn(e);if(r.num=i,r.num===null)return;let a=yi(r,e.has("#TextValue"),e.has("#Ordinal"));(e=e.not("#Currency")).replaceWith(a,!0),xw(t,e,r)})),this},add:function(i,t){return i?(typeof i=="string"&&(i=kL(i)),this.forEach(e=>{let r=yn(e);if(r.num===null)return;r.num+=i;let a=yi(r,e.has("#TextValue"),e.has("#Ordinal"));(e=e.not("#Currency")).replaceWith(a,!0),xw(t,e,r)}),this):this},subtract:function(i,t){return this.add(-1*i,t)},increment:function(i){return this.add(1,i),this},decrement:function(i){return this.add(-1,i),this},romanNumerals:function(i){let t=this.match("#RomanNumeral").numbers();return typeof i=="number"&&(t=t.get(i)),t},normalize:function(){let i={"%":!0};return this.forEach(t=>{let e=yn(t);if(e.num!==null&&e.suffix&&i[e.suffix]!==!0){let r=e.prefix||"";t=t.replaceWith(r+e.num+" "+e.suffix)}}),this},get:function(i){let t=[];return this.forEach(e=>{t.push(yn(e).num)}),i!==void 0?t[i]||null:t||null}};bi.toNice=bi.toLocaleString,bi.isBetween=bi.between,bi.minus=bi.subtract,bi.plus=bi.add,bi.equals=bi.isEqual;var L0e=bi,U0e=Sw,Ew=function(i){let t=U0e(i).num;return typeof t=="number"?t/100:null},z0e={get:function(i){let t=[];return this.forEach(e=>{let r=Ew(e);r!==null&&t.push(r)}),i!==void 0?t[i]||null:t||null},json:function(i){let t=null;typeof i=="number"&&(t=i,i=null),i=i||{text:!0,normal:!0,trim:!0,terms:!0};let e=[];return this.forEach(r=>{let a=r.json(i)[0],s=Ew(r);if(a.number=s,s!==null){let o=100*s;a.textNumber=`${o} percent`,a.cardinal=`${o}%`}e.push(a)}),t!==null?e[t]||{}:e},toFraction:function(){return this.forEach(i=>{let t=Ew(i);if(t!==null){t*=100,t=Math.round(100*t)/100;let e=`${t}/100`;this.replace(i,e)}}),this}},FL=[{dem:"american",name:"dollar",iso:"usd",sub:"cent",sym:["$","US$","U$"]},{name:"euro",iso:"eur",sub:"cent",sym:["\u20AC"]},{dem:"british",name:"pound",iso:"gbp",sub:"penny",alias:{sterling:!0},sym:["\xA3"]},{name:"renminbi",iso:"cny",plural:"yu\xE1n",alias:{yuan:!0},sym:["\u5143"]},{dem:"japanese",name:"yen",iso:"jpy",sub:"sen",sym:["\xA5","\u5186","\u5713"]},{dem:"swedish",name:"krona",iso:"sek",sub:"\xF6re",alias:{ore:!0,kronor:!0},sym:["kr"]},{dem:"estonian",name:"kroon",iso:"eek",sub:"sent",sym:["kr"]},{dem:"norwegian",name:"krone",iso:"nok",sub:"\xF8re",sym:["kr"]},{dem:"icelandic",name:"kr\xF3na",iso:"isk",sym:["kr"]},{dem:"danish",name:"krone",iso:"dkk",sub:"\xF8re",sym:["kr."]},{dem:"zambian",name:"kwacha",iso:"zmw",sub:"ngwee",sym:["K"]},{dem:"malawian",name:"kwacha",iso:"mwk",sub:"tambala",sym:["K"]},{dem:"greek",name:"drachma",iso:"grd",sub:"lept\u03BFn",sym:["\u0394\u03C1\u03C7.","\u0394\u03C1.","\u20AF"]},{dem:"eastern caribbean",name:"dollar",iso:"xcd",sub:"cent",sym:["$"]},{dem:"finnish",name:"markka",iso:"fim",sub:"penni",sym:["mk"]},{dem:"polish",name:"z\u0142oty",iso:"pln",sub:"grosz",sym:["z\u0142"]},{dem:"slovenian",name:"tolar",iso:"sit",sub:"stotin",sym:[]},{dem:"australian",name:"dollar",iso:"aud",sub:"cent",sym:["$","A$","AU$"]},{dem:"deutsche",name:"mark",iso:"dem",sub:"pfennig",sym:["DM"]},{dem:"thai",name:"baht",iso:"thb",sub:"satang",sym:["\u0E3F"]},{dem:"canadian",name:"dollar",iso:"cad",sub:"cent",sym:["$","Can$","C$","CA$","CAD"]},{dem:"mexican",name:"peso",iso:"mxn",sub:"centavo",sym:["$","Mex$"]},{dem:"spanish",name:"peseta",iso:"esp",sub:"c\xE9ntimo",sym:["Pta"]},{dem:"new zealand",name:"dollar",iso:"nzd",sub:"cent",sym:["$","NZ$"]},{dem:"chilean",name:"peso",iso:"clp",sub:"centavo",sym:["Cifr\xE3o","$"]},{dem:"nigerian",name:"naira",iso:"ngn",sub:"kobo",sym:["\u20A6"]},{dem:"austrian",name:"schilling",iso:"ats",sub:"groschen",sym:["S","\xF6S"]},{dem:"guatemalan",name:"quetzal",iso:"gtq",sub:"centavo",sym:["Q"]},{dem:"philippine",name:"peso",iso:"php",sub:"sentimo",sym:["\u20B1"]},{dem:"hungarian",name:"forint",iso:"huf",sym:["Ft"]},{dem:"russian",name:"ruble",iso:"rub",sub:"kopeyka",sym:["\u20BD","\u0440\u0443\u0431","\u0440."]},{dem:"kuwaiti",name:"dinar",iso:"kwd",sub:"fils",sym:["\u062F.\u0643","KD"]},{dem:"israeli",name:"new shekel",iso:"ils",sub:"agora",sym:["\u20AA"]},{dem:"latvian",name:"lats",iso:"lvl",sub:"sant\u012Bms",sym:["Ls"]},{dem:"kazakhstani",name:"tenge",iso:"kzt",sub:"t\u0131yn",sym:["\u20B8"]},{dem:"iraqi",name:"dinar",iso:"iqd",sub:"fils",sym:["\u062F.\u0639"]},{dem:"bahamian",name:"dollar",iso:"bsd",sub:"cent",sym:["$","B$"]},{dem:"seychellois",name:"rupee",iso:"scr",sub:"cent",sym:["SCR","SR"]},{dem:"albanian",name:"lek",iso:"all",sub:"qindark\xEB",sym:["L"]},{dem:"bulgarian",name:"lev",iso:"bgn",sub:"stotinka",sym:["\u043B\u0432."]},{dem:"irish",name:"pound",iso:"iep",sym:["\xA3","IR\xA3"]},{name:"cfp franc",iso:"xpf",sym:["f"]},{dem:"south african",name:"rand",iso:"zar",sub:"cent",sym:["R"]},{dem:"south korean",name:"won",iso:"krw",sub:"jeon",plural:"won",sym:["\u20A9"]},{dem:"north korean",name:"won",iso:"kpw",sub:"chon",plural:"won",sym:["\u20A9"]},{dem:"portuguese",name:"escudo",iso:"pte",sub:"centavo",sym:[]},{dem:"ghanaian",name:"cedi",iso:"ghs",sub:"pesewa",sym:["GH\u20B5"]},{dem:"hong kong",name:"dollar",iso:"hkd",sub:"\u6BEB",sym:["$"]},{dem:"new taiwan",name:"dollar",iso:"twd",sub:"dime",sym:["NT$"]},{dem:"east german",name:"mark",iso:"ddm",sub:"pfennig",sym:["M"]},{dem:"namibian",name:"dollar",iso:"nad",sub:"cent",sym:["$"]},{dem:"malaysian",name:"ringgit",iso:"myr",sub:"sen",sym:["RM"]},{dem:"swiss",name:"franc",iso:"chf",sym:["Rp."]},{dem:"panamanian",name:"balboa",iso:"pab",sub:"cent\xE9simo",sym:["B/."]},{dem:"indonesian",name:"rupiah",iso:"idr",sub:"sen",sym:["Rp"]},{dem:"brunei",name:"dollar",iso:"bnd",sub:"sen",sym:["$","B$"]},{dem:"venezuelan",name:"bol\xEDvar",iso:"vef",sub:"c\xE9ntimo",sym:["Bs.F","Bs."]},{dem:"macedonian",name:"denar",iso:"mkd",sub:"deni",sym:["den"]},{dem:"mauritanian",name:"ouguiya",iso:"mru",sub:"khoums",sym:["UM"]},{dem:"argentine",name:"peso",iso:"ars",sub:"centavo",sym:["$"]},{dem:"libyan",name:"dinar",iso:"lyd",sub:"dirham",sym:["LD","\u0644.\u062F"]},{dem:"jordanian",name:"dinar",iso:"jod",sub:"dirham",sym:["\u062F.\u0623"]},{dem:"french",name:"franc",iso:"frf",sub:"centime",sym:["F","Fr","FF","\u20A3"]},{dem:"syrian",name:"pound",iso:"syp",sub:"piastre",sym:["LS","\xA3S"]},{dem:"belize",name:"dollar",iso:"bzd",sub:"cent",sym:["$"]},{dem:"saudi",name:"riyal",iso:"sar",sub:"halalah",sym:["SAR","\u0631.\u0633"," \uFDFC"]},{dem:"surinamese",name:"dollar",iso:"srd",sub:"cent",sym:["$"]},{dem:"singapore",name:"dollar",iso:"sgd",sub:"cent",sym:["S$","$"]},{dem:"nepalese",name:"rupee",iso:"npr",sub:"paisa",sym:["\u0930\u0941 \u20A8","Re"]},{dem:"nicaraguan",name:"c\xF3rdoba",iso:"nio",sub:"centavo",sym:["C$"]},{dem:"bangladeshi",name:"taka",iso:"bdt",sub:"poysha",sym:["\u09F3"]},{dem:"indian",name:"rupee",iso:"inr",sub:"paisa",sym:["\u20B9"]},{dem:"maldivian",name:"rufiyaa",iso:"mvr",sub:"laari",sym:["Rf","MRf","MVR",".\u0783 "]},{dem:"sri lankan",name:"rupee",iso:"lkr",sub:"cents",sym:["Rs","\u0DBB\u0DD4","\u0BB0\u0BC2"]},{dem:"bhutanese",name:"ngultrum",iso:"btn",sub:"chhertum",sym:["Nu."]},{dem:"turkish",name:"lira",iso:"try",sub:"kuru\u015F",sym:["YTL"]},{dem:"serbian",name:"dinar",iso:"rsd",sub:"para",sym:["din","\u0434\u0438\u043D"]},{dem:"bosnia and herzegovina",name:"convertible mark",iso:"bam",sub:"fening",sym:["KM"]},{dem:"botswana",name:"pula",iso:"bwp",sub:"thebe",sym:["p"]},{dem:"swazi",name:"lilangeni",iso:"szl",sub:"cent",sym:["L","E"]},{dem:"lithuanian",name:"litas",iso:"ltl",sub:"centas",sym:["Lt","ct"]},{dem:"mauritian",name:"rupee",iso:"mur",sub:"cent",sym:["\u20A8"]},{dem:"pakistani",name:"rupee",iso:"pkr",sub:"paisa",sym:["\u20A8"]},{dem:"maltese",name:"lira",iso:"mtl",sub:"cent",sym:["\u20A4","Lm"]},{dem:"cypriot",name:"pound",iso:"cyp",sub:"cent",sym:["\xA3"]},{dem:"moldovan",name:"leu",iso:"mdl",sym:["l"]},{dem:"croatian",name:"kuna",iso:"hrk",sub:"lipa",sym:["kn"]},{dem:"afghan",name:"afghani",iso:"afn",sub:"pul",sym:["\u060B","Af","Afs"]},{dem:"ecuadorian",name:"sucre",iso:"ecs",sub:"centavo",sym:["S/."]},{dem:"sierra leonean",name:"leone",iso:"sll",sub:"cent",sym:["Le"]}],s0=FL,ML=Sw,$s={},jL={};s0.forEach(i=>{i.sym.forEach(t=>{$s[t]=$s[t]||i.iso}),$s[i.iso]=$s[i.iso]||i.iso,i.sub&&(jL[i.sub]=!0)});var BL=`(${Object.keys(jL).join("|")})`,H0e=_L,Rw=function(i){let t=0,e=i.match(`and #Money+ ${BL}`);if(e.found){i=i.not(e);let u=ML(e.match("#Value+"));u&&u.num&&(t=u.num/100)}let r=ML(i),a=r.num||0;a+=t;let s=((o=r).suffix&&$s.hasOwnProperty(o.suffix)?s0.find(u=>u.iso===$s[o.suffix]):o.prefix&&$s.hasOwnProperty(o.prefix)?s0.find(u=>u.iso===$s[o.prefix]):null)||function(u){let c=u.match("#Currency+");c.nouns().toSingular();let p=c.text("reduced");return s0.find(m=>(p===`${m.dem} ${m.name}`||p===m.iso||p===m.sub||p===m.name||!(!m.alias||m.alias[p]!==!0))&&m)}(i)||{};var o;let l="";return s&&s.sym&&(l=s.sym[0],a&&i.has(`${BL}`)&&(a/=100)),{num:a,iso:s.iso,demonym:s.dem,currency:s.name,plural:s.plural,symbol:l}},LL=function(i=""){return i.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})},G0e={get:function(i){let t=[];return this.forEach(e=>{t.push(Rw(e))}),i!==void 0?t[i]||null:t||null},currency:function(i){let t=[];return this.forEach(e=>{let r=Rw(e);r&&t.push(r)}),typeof i=="number"?t[i]||null:t||null},json:function(i){let t=null;typeof i=="number"&&(t=i,i=null),i=i||{text:!0,normal:!0,trim:!0,terms:!0};let e=[];return this.forEach(r=>{let a=r.json(i)[0],s=Rw(r);if(a.number=s.num,s.iso&&(a.iso=s.iso.toUpperCase(),a.symbol=s.symbol,a.currency=LL(s.demonym)+" "+LL(s.currency)),a.textFmt=H0e(s,!0,!1),s.currency){let o=s.currency;s.num!==1&&(o=s.plural||o+"s"),a.textFmt+=" "+o}e.push(a)}),t!==null?e[t]||{}:e}},o0={},Vw=ww,q0e=VL;o0.toText=function(i){if(!i.numerator||!i.denominator)return"";let t=Vw(i.numerator),e=q0e(i.denominator);return i.denominator===2&&(e="half"),t&&e?(i.numerator!==1&&(e+="s"),`${t} ${e}`):""},o0.textCardinal=function(i){return!i.numerator||!i.denominator?"":`${Vw(i.numerator)} out of ${Vw(i.denominator)}`},o0.toDecimal=function(i){return i.decimal};var Jc=wL,cd=o0,Iw={get:function(i){let t=[];return this.forEach(e=>{t.push(Jc(e))}),i!==void 0?t[i]||null:t||null},toDecimal(){return this.forEach(i=>{let t=Jc(i);if(t){let e=cd.toDecimal(t);i.replaceWith(String(e),!0),i.tag("NumericValue"),i.unTag("Fraction")}}),this},json:function(i){let t=null;typeof i=="number"&&(t=i,i=null),i=i||{text:!0,normal:!0,trim:!0,terms:!0};let e=[];return this.forEach(r=>{let a=r.json(i)[0],s=Jc(r)||{},o=cd.toDecimal(s);a.numerator=s.numerator,a.denominator=s.denominator,a.number=o,a.textOrdinal=cd.toText(s),a.textCardinal=cd.textCardinal(s),e.push(a)}),t!==null?e[t]||{}:e},normalize:function(){return this.forEach(i=>{let t=Jc(i);if(t&&typeof t.numerator=="number"&&typeof t.denominator=="number"){let e=`${t.numerator}/${t.denominator}`;this.replace(i,e)}}),this},toText:function(i){let t=[];return this.forEach(e=>{let r=Jc(e)||{},a=cd.toText(r);e.replaceWith(a,!0),e.tag("Fraction")}),i!==void 0?t[i]:t},toPercentage:function(){return this.forEach(i=>{let t=Jc(i);if(t.decimal||t.decimal===0){let e=100*t.decimal;e=Math.round(100*e)/100,this.replace(i,`${e}%`)}}),this}};Iw.toNumber=Iw.toDecimal;var W0e=Iw,$0e=function(i){return i.match("(hundred|thousand|million|billion|trillion|quadrillion|quintillion|sextillion|septillion)").tag("#Multiple","fraction-tagger"),i.match("[(half|quarter)] of? (a|an)",0).tag("Fraction","millionth"),i.match("#Adverb [half]",0).tag("Fraction","nearly-half"),i.match("[half] the",0).tag("Fraction","half-the"),i.match("#Value (halves|halfs|quarters)").tag("Fraction","two-halves"),i.match("a #Ordinal").tag("Fraction","a-quarter"),i.match("(#Fraction && /s$/)").lookBefore("#Cardinal+$").tag("Fraction"),i.match("[#Cardinal+ #Ordinal] of .",0).tag("Fraction","ordinal-of"),i.match("[(#NumericValue && #Ordinal)] of .",0).tag("Fraction","num-ordinal-of"),i.match("(a|one) #Cardinal?+ #Ordinal").tag("Fraction","a-ordinal"),i.match("#Cardinal+ out? of every? #Cardinal").tag("Fraction","fraction-tagger"),i},K0e=function(i){let t="money-tagger";i.match("#Money and #Money #Currency?").tag("Money","money-and-money"),i.match("#Money").not("#TextValue").match("/\\.[0-9]{3}$/").unTag("#Money","three-decimal money"),i.ifNo("#Value").match("#Currency #Verb").unTag("Currency","no-currency"),i.match("#Value #Currency [and] #Value (cents|ore|centavos|sens)",0).tag("Money",t);let e=i.match("[<num>#Value] [<currency>(mark|rand|won|rub|ore)]");return e.group("num").tag("Money",t),e.group("currency").tag("Currency",t),i},X0e=function(i){(i=K0e(i)).match("the [/[0-9]+s$/]").tag("#Plural","number-tag"),i.match("half a? #Value").tag("Value","half-a-value"),i.match("#Value [and a (half|quarter)]",0).tag(["TextValue","#Fraction"],"value-and-a-half"),(i=$0e(i)).match("#Cardinal and #Fraction #Fraction").tag("Value","number-tag")},UL={mark:!0,sucre:!0,leone:!0,afghani:!0,rand:!0,try:!0,mop:!0,won:!0,all:!0,rub:!0,eek:!0,sit:!0,bam:!0,npr:!0,leu:!0},hl={kronor:"Currency"};FL.forEach(i=>{i.iso&&!UL[i.iso]&&(hl[i.iso]=["Acronym","Currency"]);let t=i.name;if(t&&!UL[t]&&(hl[t]="Currency",hl[t+"s"]="Currency"),i.dem){let e=i.dem;hl[`${e} ${t}`]="Currency",hl[`${e} ${t}s`]="Currency"}i.sub&&(hl[i.sub]="Currency")});var Y0e=v0e,Z0e=T0e,J0e=N0e,Q0e=C0e,e2e=L0e,t2e=z0e,r2e=G0e,n2e=W0e,i2e=X0e,a2e={Fraction:{isA:["Value"]},Multiple:{isA:"Value"}},s2e=hl,o2e=function(i,t){t.addWords(s2e),t.addTags(a2e),t.postProcess(i2e);class e extends i{}Object.assign(e.prototype,e2e);class r extends e{}Object.assign(r.prototype,r2e);class a extends e{}Object.assign(a.prototype,n2e);class s extends e{}Object.assign(s.prototype,t2e);let o={numbers:function(l){let u=Z0e(this,l);return new e(u.list,this,this.world)},percentages:function(l){let u=Q0e(this,l);return new s(u.list,this,this.world)},fractions:function(l){let u=J0e(this,l);return new a(u.list,this,this.world)},money:function(l){let u=Y0e(this,l);return new r(u.list,this,this.world)}};return o.values=o.numbers,o.percents=o.percentages,Object.assign(i.prototype,o),i},zL=o2e;r0.extend(zL);var Qc=class extends mr{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.pluralForm={createComponentOfType:"text",createStateVariable:"pluralForm",defaultValue:null,public:!0},e.basedOnNumber={createComponentOfType:"number",createStateVariable:"basedOnNumber",defaultValue:null,public:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return yr({stateVariableDefinitions:t,oldName:"value",newName:"valuePrePluralize"}),t.value={public:!0,componentType:"text",returnDependencies:()=>({valuePrePluralize:{dependencyType:"stateVariable",variableName:"valuePrePluralize"},pluralForm:{dependencyType:"stateVariable",variableName:"pluralForm"},basedOnNumber:{dependencyType:"stateVariable",variableName:"basedOnNumber"}}),definition:function({dependencyValues:e}){let r=r0(e.valuePrePluralize),a=r.values().toNumber().all().terms().json();if(a.length===0)return{newValues:{value:e.valuePrePluralize}};let s;if(e.basedOnNumber!==null&&(s=HL(e.basedOnNumber)),a.length===1)return s===void 0&&(s=!0),s?e.pluralForm!==null?{newValues:{value:e.pluralForm}}:{newValues:{value:r.nouns().toPlural().all().out("text")}}:{newValues:{value:e.valuePrePluralize}};if(s===void 0){let l=[],u=[],c=r.nouns().json();for(let[f,d]of a.entries()){let h=c[l.length];d.terms[0].tags.includes("Value")&&u.push(f),h!==void 0&&h.text===d.text&&l.push(f)}s=[];let p=r.values().numbers().json(),m=-1;for(let f of l){for(;Number(u[m+1])<Number(f);)m++;p[m]&&HL(Number(p[m].normal))?s.push(!0):s.push(!1)}}if(s===!1)return{newValues:{value:e.valuePrePluralize}};let o=r0(e.valuePrePluralize);if(e.pluralForm!==null)for(let[l,u]of r.nouns().data().entries())(s===!0||s[l]===!0)&&o.replace(u.text,e.pluralForm);else{let l=r.nouns().json().length;for(let u=0;u<l;u++)(s===!0||s[u]===!0)&&o.nouns(u).toPlural().all()}return{newValues:{value:o.out("text")}}}},t.text={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({value:{dependencyType:"stateVariable",variableName:"value"}}),definition:({dependencyValues:e})=>({newValues:{text:e.value}})},t}};T(Qc,"componentType","pluralize"),T(Qc,"rendererType","text");function HL(i){return i!==1}var yl=class extends ue{static get stateVariablesShadowedForReference(){return["hide"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.hide,e.condition={createComponentOfType:"boolean"},e.updateWithTname={createPrimitiveOfType:"string"},e}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.updateWithTname={returnDependencies:()=>({updateWithTnameAttr:{dependencyType:"attributePrimitive",attributeName:"updateWithTname"}}),definition({dependencyValues:e}){return{newValues:{updateWithTname:e.updateWithTnameAttr}}}},t.updateWithFullTnames={chainActionOnActionOfStateVariableTargets:{triggeredAction:"updateHide"},stateVariablesDeterminingDependencies:["updateWithTname"],returnDependencies({stateValues:e}){return e.updateWithTname?{updateWithFullTname:{dependencyType:"expandTargetName",tName:e.updateWithTname}}:{}},definition({dependencyValues:e}){return e.updateWithFullTname?{newValues:{updateWithFullTnames:[e.updateWithFullTname]}}:{newValues:{updateWithFullTnames:[]}}}},t.hideWhenUpdated={returnDependencies:()=>({condition:{dependencyType:"attributeComponent",attributeName:"condition",variableNames:["value"]},showFeedback:{dependencyType:"flag",flagName:"showFeedback"}}),definition:function({dependencyValues:e}){let r;return e.condition===null?r=!1:r=!(e.showFeedback&&e.condition.stateValues.value),{newValues:{hideWhenUpdated:r}}}},t.hide={forRenderer:!0,defaultValue:!0,stateVariablesDeterminingDependencies:["updateWithTname"],returnDependencies({stateValues:e}){return e.updateWithTname?{}:{condition:{dependencyType:"attributeComponent",attributeName:"condition",variableNames:["value"]},showFeedback:{dependencyType:"flag",flagName:"showFeedback"}}},definition:function({dependencyValues:e}){if(!("condition"in e))return{useEssentialOrDefaultValue:{hide:{variablesToCheck:["hide"]}}};let r;return e.condition===null?r=!1:r=!(e.showFeedback&&e.condition.stateValues.value),{newValues:{hide:r}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return"condition"in r?{success:!1}:{success:!0,instructions:[{setStateVariable:"hide",value:e.hide}]}}},t.feedbackText={forRenderer:!0,defaultValue:null,returnDependencies:()=>({}),definition:()=>({useEssentialOrDefaultValue:{feedbackText:{variablesToCheck:["feedbackText"]}}})},t}updateHide(){let t=[{updateType:"updateValue",componentName:this.componentName,stateVariable:"hide",value:this.stateValues.hideWhenUpdated}];return this.coreFunctions.performUpdate({updateInstructions:t})}actions={updateHide:this.updateHide.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(yl,"componentType","feedback"),T(yl,"renderChildren",!0),T(yl,"primaryStateVariableForDefinition","feedbackText");var bl=class extends Q{static returnChildLogic(t){let e=super.returnChildLogic(t),r=e.newLeaf({name:"atLeastZeroPoints",componentType:"point",comparison:"atLeast",number:0}),a=Ad(o=>({componentType:"point",children:[{componentType:"coords",children:o}]})),s=e.newLeaf({name:"exactlyOneString",componentType:"string",number:1,isSugar:!0,logicToWaitOnSugar:["atLeastZeroPoints"],replacementFunction:a});return e.newOperator({name:"pointsXorSugar",operator:"xor",propositions:[s,r],setAsBase:!0}),e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.collaborateGroups={returnDependencies:()=>({pointChildren:{dependencyType:"child",childLogicName:"atLeastZeroPoints",variableNames:["xs","coords","nDimensions"]}}),definition:function({dependencyValues:e}){let r={};for(let s of e.pointChildren)if(s.stateValues.nDimensions!==2)console.warn(`invalid collaborate group: ${s.stateValues.coords.toString()}`);else{let o=s.stateValues.xs[0].evaluate_to_constant(),l=s.stateValues.xs[1].evaluate_to_constant();Number.isInteger(o)&&o>0&&Number.isInteger(l)&&l>0?(r[o]===void 0&&(r[o]=[]),r[o].push(l)):console.warn(`invalid collaborate group: ${s.stateValues.coords.toString()}`)}return{newValues:{collaborateGroups:{groups:r,matchGroup:function({groupNumber:s,numberOfGroups:o}={}){if(o>1){let l=r[o];return l===void 0?!1:l.includes(s)}else return!0}}}}}},t}};T(bl,"componentType","collaborateGroups"),T(bl,"rendererType"),T(bl,"stateVariableForAttributeValue","collaborateGroups");var pd=class extends Q{static returnChildLogic(t){let e=super.returnChildLogic(t);return e.newLeaf({name:"atMostOnePossibleNumberOfGroups",componentType:"possibleNumberOfGroups",comparison:"atMost",number:1,setAsBase:!0}),e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.possibleNumberOfGroups={returnDependencies:()=>({pngChild:{dependencyType:"child",childLogicName:"atMostOnePossibleNumberOfGroups",variableNames:["numbers"]}}),definition:function({dependencyValues:e}){return e.pngChild.length===0?{newValues:{possibleNumberOfGroups:[1]}}:{newValues:{possibleNumberOfGroups:e.pngChild[0].stateValues.numbers}}}},t}};T(pd,"componentType","collaborateGroupSetup");var ep=class extends ue{static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.childrenWithNValues={returnDependencies:()=>({children:{dependencyType:"child",childGroups:["anything"],variableNames:["nValues"],variablesOptional:!0}}),definition:({dependencyValues:e})=>({newValues:{childrenWithNValues:e.children}})},t.childrenAsResponses={returnDependencies:()=>({children:{dependencyType:"child",childGroups:["anything"],variableNames:["value","values","componentType"],variablesOptional:!0}}),definition:({dependencyValues:e})=>({newValues:{childrenAsResponses:e.children}})},t}};T(ep,"componentType","considerAsResponses"),T(ep,"rendererType");var md=class extends nt{static get stateVariablesShadowedForReference(){return["conditionSatisfied"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.condition={createComponentOfType:"boolean"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.conditionSatisfied={public:!0,componentType:"boolean",returnDependencies:()=>({condition:{dependencyType:"attributeComponent",attributeName:"condition",variableNames:["value"]}}),definition:function({dependencyValues:e}){let r;return e.condition===null?r=!0:r=e.condition.stateValues.value,{newValues:{conditionSatisfied:r}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){return t.stateValues.conditionSatisfied?super.createSerializedReplacements({component:t,componentInfoObjects:e}):{replacements:[]}}};T(md,"componentType","case");var lU=j(oU());var gl=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.minSentencesPerParagraph={createComponentOfType:"number",createStateVariable:"minSentencesPerParagraph",defaultValue:4,public:!0},e.maxSentencesPerParagraph={createComponentOfType:"number",createStateVariable:"maxSentencesPerParagraph",defaultValue:8,public:!0},e.minWordsPerSentence={createComponentOfType:"number",createStateVariable:"minWordsPerSentence",defaultValue:4,public:!0},e.maxWordsPerSentence={createComponentOfType:"number",createStateVariable:"maxWordsPerSentence",defaultValue:8,public:!0},e.generateWords={createComponentOfType:"number",createStateVariable:"generateWords",defaultValue:null},e.generateSentences={createComponentOfType:"number",createStateVariable:"generateSentences",defaultValue:null},e.generateParagraphs={createComponentOfType:"number",createStateVariable:"generateParagraphs",defaultValue:null},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.readyToExpandWhenResolved={returnDependencies:()=>({minSentencesPerParagraph:{dependencyType:"stateVariable",variableName:"minSentencesPerParagraph"},maxSentencesPerParagraph:{dependencyType:"stateVariable",variableName:"maxSentencesPerParagraph"},minWordsPerSentence:{dependencyType:"stateVariable",variableName:"minWordsPerSentence"},maxWordsPerSentence:{dependencyType:"stateVariable",variableName:"maxWordsPerSentence"},generateWords:{dependencyType:"stateVariable",variableName:"generateWords"},generateSentences:{dependencyType:"stateVariable",variableName:"generateSentences"},generateParagraphs:{dependencyType:"stateVariable",variableName:"generateParagraphs"}}),markStale:()=>({updateReplacements:!0}),definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){let r=new lU.LoremIpsum({sentencesPerParagraph:{max:t.stateValues.maxSentencesPerParagraph,min:t.stateValues.minSentencesPerParagraph},wordsPerSentence:{max:t.stateValues.maxWordsPerSentence,min:t.stateValues.minWordsPerSentence},random:t.sharedParameters.rng}),a=[];if(t.stateValues.generateParagraphs!==null){let l=t.stateValues.generateParagraphs;Number.isInteger(l)&&l>0&&(a=r.generateParagraphs(l).split(`
`).map(c=>({componentType:"p",children:[{componentType:"string",state:{value:c}}]})))}else if(t.stateValues.generateSentences!==null){let l=t.stateValues.generateSentences;if(Number.isInteger(l)&&l>0){let u=r.generateSentences(l).split(". ");for(let c of u.slice(0,u.length-1))a.push({componentType:"text",children:[{componentType:"string",state:{value:c+"."}}]}),a.push({componentType:"string",state:{value:" "}});a.push({componentType:"text",children:[{componentType:"string",state:{value:u[u.length-1]}}]})}}else if(t.stateValues.generateWords!==null){let l=t.stateValues.generateWords;if(Number.isInteger(l)&&l>0){let u=r.generateWords(l).split(" ").map(c=>({componentType:"text",children:[{componentType:"string",state:{value:c}}]}));a.push(u[0]);for(let c of u.slice(1))a.push({componentType:"string",state:{value:" "}}),a.push(c)}}let s=t.attributes.newNamespace&&t.attributes.newNamespace.primitive;return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:s,componentInfoObjects:e}).serializedComponents}}static calculateReplacementChanges({component:t,componentInfoObjects:e}){let r=this.createSerializedReplacements({component:t,componentInfoObjects:e});return[{changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:t.replacements.length,serializedReplacements:r.replacements}]}};T(gl,"componentType","lorem"),T(gl,"assignNamesToReplacements",!0),T(gl,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");var rp=class extends re{static get stateVariablesShadowedForReference(){return["newValue"]}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:"update value",public:!0,forRenderer:!0},e.type={createPrimitiveOfType:"string",createStateVariable:"type",defaultPrimitiveValue:"math",toLowerCase:!0,validValues:["math","number","boolean","text"]},e.prop={createPrimitiveOfType:"string"},e.newValue={createComponentOfType:"_componentWithSelectableType"},e.componentIndex={createComponentOfType:"number",createStateVariable:"componentIndex",defaultValue:null,public:!0},e.triggerWhen={createComponentOfType:"boolean",createStateVariable:"triggerWhen",defaultValue:!1,triggerActionOnChange:"updateValueIfTriggerNewlyTrue"},e.triggerWithTnames={createPrimitiveOfType:"string"},e.simplify={createComponentOfType:"text",createStateVariable:"simplify",defaultValue:"none",public:!0,toLowerCase:!0,valueTransformations:{true:"full"},validValues:["none","full","numbers","numberspreserveorder"]},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();t.tName={returnDependencies:()=>({tName:{dependencyType:"doenetAttribute",attributeName:"tName"}}),definition:({dependencyValues:a})=>({newValues:{tName:a.tName}})},t.targetComponent={returnDependencies(){return{targetComponent:{dependencyType:"targetComponent"}}},definition:function({dependencyValues:a}){let s=null;return a.targetComponent&&(s=a.targetComponent),{newValues:{targetComponent:s}}}},t.propName={returnDependencies:()=>({propName:{dependencyType:"attributePrimitive",attributeName:"prop"}}),definition:function({dependencyValues:a}){return{newValues:{propName:a.propName}}}},t.targetIdentities={stateVariablesDeterminingDependencies:["targetComponent","componentIndex"],returnDependencies:function({stateValues:a,componentInfoObjects:s}){let o={};return a.targetComponent!==null&&(s.isCompositeComponent({componentType:a.targetComponent.componentType,includeNonStandard:!1})?o.targets={dependencyType:"replacement",compositeName:a.targetComponent.componentName,recursive:!0,componentIndex:a.componentIndex}:(a.componentIndex===null||a.componentIndex===1)&&(o.targets={dependencyType:"stateVariable",variableName:"targetComponent"})),o},definition({dependencyValues:a}){let s=null;return a.targets&&(s=a.targets,Array.isArray(s)||(s=[s])),{newValues:{targetIdentities:s}}}},t.targets={stateVariablesDeterminingDependencies:["targetIdentities","propName"],returnDependencies:function({stateValues:a}){let s={targetIdentities:{dependencyType:"stateVariable",variableName:"targetIdentities"}};if(a.targetIdentities!==null)for(let[o,l]of a.targetIdentities.entries()){let u;a.propName?u={dependencyType:"stateVariable",componentName:l.componentName,variableName:a.propName,returnAsComponentObject:!0,variablesOptional:!0,propIndex:a.propIndex,caseInsensitiveVariableMatch:!0,publicStateVariablesOnly:!0,useMappedVariableNames:!0}:u={dependencyType:"componentIdentity",componentName:l.componentName},s["target"+o]=u}return s},definition({dependencyValues:a}){let s=null;if(a.targetIdentities!==null){s=[];for(let o in a.targetIdentities)a["target"+o]&&s.push(a["target"+o])}return{newValues:{targets:s}}}},t.newValue={returnDependencies:()=>({newValueAttr:{dependencyType:"attributeComponent",attributeName:"newValue",variableNames:["value"]},type:{dependencyType:"stateVariable",variableName:"type"},simplify:{dependencyType:"stateVariable",variableName:"simplify"}}),definition:function({dependencyValues:a}){if(a.newValueAttr===null)return{newValues:{newValue:null}};let s=a.newValueAttr.stateValues.value;return a.type==="math"&&(s=Lr({value:s,simplify:a.simplify})),{newValues:{newValue:s}}}},t.insideTriggerSet={returnDependencies:()=>({parentTriggerSet:{dependencyType:"parentStateVariable",parentComponentType:"triggerSet",variableName:"updateValueAndActionsToTrigger"}}),definition({dependencyValues:a}){return{newValues:{insideTriggerSet:a.parentTriggerSet!==null}}}},t.triggerWithTnames={returnDependencies:()=>({triggerWithTnames:{dependencyType:"attributePrimitive",attributeName:"triggerWithTnames"},triggerWhen:{dependencyType:"attributeComponent",attributeName:"triggerWhen"},insideTriggerSet:{dependencyType:"stateVariable",variableName:"insideTriggerSet"}}),definition({dependencyValues:a}){return a.triggerWhen||a.insideTriggerSet||a.triggerWithTnames===null?{newValues:{triggerWithTnames:null}}:{newValues:{triggerWithTnames:a.triggerWithTnames.split(/\s+/).filter(s=>s)}}}},t.triggerWithFullTnames={chainActionOnActionOfStateVariableTargets:{triggeredAction:"updateValue"},stateVariablesDeterminingDependencies:["triggerWithTnames"],returnDependencies({stateValues:a}){let s={};if(a.triggerWithTnames)for(let[o,l]of a.triggerWithTnames.entries())s[`triggerWithFullTname${o}`]={dependencyType:"expandTargetName",tName:l};return s},definition({dependencyValues:a}){let s=[],o=Object.keys(a).length-1;for(let l=0;l<o;l++)s.push(a[`triggerWithFullTname${l}`]);return{newValues:{triggerWithFullTnames:s}}},markStale(){return{updateActionChaining:!0}}};let e=t.hidden.returnDependencies,r=t.hidden.definition;return t.hidden.returnDependencies=function(a){let s=e(a);return s.triggerWhen={dependencyType:"attributeComponent",attributeName:"triggerWhen"},s.triggerWithTnames={dependencyType:"stateVariable",variableName:"triggerWithTnames"},s.insideTriggerSet={dependencyType:"stateVariable",variableName:"insideTriggerSet"},s},t.hidden.definition=function(a){return a.dependencyValues.triggerWhen||a.dependencyValues.triggerWithTnames||a.dependencyValues.insideTriggerSet?{newValues:{hidden:!0}}:r(a)},t}updateValue(){if(this.stateValues.targets===null||this.stateValues.newValue===null)return;let t=[];for(let e of this.stateValues.targets){let r="value";if(e.stateValues&&(r=Object.keys(e.stateValues)[0],r===void 0)){console.warn(`Cannot update prop="${this.stateValues.propName}" of ${this.stateValues.tName} as could not find prop ${this.stateValues.propName} on a component of type ${e.componentType}`);continue}t.push({updateType:"updateValue",componentName:e.componentName,stateVariable:r,value:this.stateValues.newValue})}return this.coreFunctions.performUpdate({updateInstructions:t,event:{verb:"selected",object:{componentName:this.componentName,componentType:this.componentType},result:{response:this.stateValues.newValue,responseText:this.stateValues.newValue.toString()}}}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}updateValueIfTriggerNewlyTrue({stateValues:t,previousValues:e}){if(t.triggerWhen&&e.triggerWhen===!1&&!this.stateValues.insideTriggerSet)return this.updateValue()}actions={updateValue:this.updateValue.bind(new Proxy(this,this.readOnlyProxyHandler)),updateValueIfTriggerNewlyTrue:this.updateValueIfTriggerNewlyTrue.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(rp,"componentType","updateValue"),T(rp,"acceptTname",!0);var np=class extends re{static keepChildrenSerialized({serializedComponent:t}){return t.children===void 0?[]:Object.keys(t.children)}static createAttributesObject(t){let e=super.createAttributesObject(t);return e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:"call action",public:!0,forRenderer:!0},e.actionName={createComponentOfType:"text",createStateVariable:"actionName",defaultValue:null,public:!0},e.triggerWhen={createComponentOfType:"boolean",createStateVariable:"triggerWhen",defaultValue:!1,triggerActionOnChange:"callActionIfTriggerNewlyTrue"},e.triggerWithTnames={createPrimitiveOfType:"string"},e.numbers={createComponentOfType:"numberList"},e.number={createComponentOfType:"number"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();t.tName={returnDependencies:()=>({tName:{dependencyType:"doenetAttribute",attributeName:"tName"}}),definition:({dependencyValues:a})=>({newValues:{tName:a.tName}})},t.targetComponent={returnDependencies(){return{targetComponent:{dependencyType:"targetComponent"}}},definition:function({dependencyValues:a}){let s=null;return a.targetComponent&&(s=a.targetComponent),{newValues:{targetComponent:s}}}},t.targetName={returnDependencies:()=>({targetComponent:{dependencyType:"stateVariable",variableName:"targetComponent"}}),definition({dependencyValues:a}){let s=null;return a.targetComponent&&(s=a.targetComponent.componentName),{newValues:{targetName:s}}}},t.insideTriggerSet={returnDependencies:()=>({parentTriggerSet:{dependencyType:"parentStateVariable",parentComponentType:"triggerSet",variableName:"updateValueAndActionsToTrigger"}}),definition({dependencyValues:a}){return{newValues:{insideTriggerSet:a.parentTriggerSet!==null}}}},t.triggerWithTnames={returnDependencies:()=>({triggerWithTnames:{dependencyType:"attributePrimitive",attributeName:"triggerWithTnames"},triggerWhen:{dependencyType:"attributeComponent",attributeName:"triggerWhen"},insideTriggerSet:{dependencyType:"stateVariable",variableName:"insideTriggerSet"}}),definition({dependencyValues:a}){return a.triggerWhen||a.insideTriggerSet||a.triggerWithTnames===null?{newValues:{triggerWithTnames:null}}:{newValues:{triggerWithTnames:a.triggerWithTnames.split(/\s+/).filter(s=>s)}}}},t.triggerWithFullTnames={chainActionOnActionOfStateVariableTargets:{triggeredAction:"callAction"},stateVariablesDeterminingDependencies:["triggerWithTnames"],returnDependencies({stateValues:a}){let s={};if(a.triggerWithTnames)for(let[o,l]of a.triggerWithTnames.entries())s[`triggerWithFullTname${o}`]={dependencyType:"expandTargetName",tName:l};return s},definition({dependencyValues:a}){let s=[],o=Object.keys(a).length-1;for(let l=0;l<o;l++)s.push(a[`triggerWithFullTname${l}`]);return{newValues:{triggerWithFullTnames:s}}},markStale(){return{updateActionChaining:!0}}};let e=t.hidden.returnDependencies,r=t.hidden.definition;return t.hidden.returnDependencies=function(a){let s=e(a);return s.triggerWhen={dependencyType:"attributeComponent",attributeName:"triggerWhen"},s.triggerWithTnames={dependencyType:"stateVariable",variableName:"triggerWithTnames"},s.insideTriggerSet={dependencyType:"stateVariable",variableName:"insideTriggerSet"},s},t.hidden.definition=function(a){return a.dependencyValues.triggerWhen||a.dependencyValues.triggerWithTnames||a.dependencyValues.insideTriggerSet?{newValues:{hidden:!0}}:r(a)},t}callAction(){if(this.stateValues.targetName!==null&&this.stateValues.actionName!==null){let t={};return this.serializedChildren.length>0&&(t.serializedComponents=xe(this.serializedChildren)),this.attributes.number&&(t.number=this.attributes.number.component.stateValues.value),this.attributes.numbers&&(t.numbers=this.attributes.numbers.component.stateValues.numbers),this.coreFunctions.performAction({componentName:this.stateValues.targetName,actionName:this.stateValues.actionName,args:t,event:{verb:"selected",object:{componentName:this.componentName,componentType:this.componentType}}}).then(()=>this.coreFunctions.triggerChainedActions({componentName:this.componentName}))}}callActionIfTriggerNewlyTrue({stateValues:t,previousValues:e}){if(t.triggerWhen&&e.triggerWhen===!1&&!this.stateValues.insideTriggerSet)return this.callAction()}actions={callAction:this.callAction.bind(new Proxy(this,this.readOnlyProxyHandler)),callActionIfTriggerNewlyTrue:this.callActionIfTriggerNewlyTrue.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(np,"componentType","callAction"),T(np,"acceptTname",!0);var dd=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.label={createComponentOfType:"text",createStateVariable:"label",defaultValue:"update value",public:!0,forRenderer:!0},e.triggerWhen={createComponentOfType:"boolean",createStateVariable:"triggerWhen",defaultValue:!1,triggerActionOnChange:"triggerActionsIfTriggerNewlyTrue"},e.triggerWithTnames={createPrimitiveOfType:"string"},e}static returnChildGroups(){return[{group:"updateValuesCallActions",componentTypes:["updateValue","callAction"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();t.updateValueAndActionsToTrigger={returnDependencies:()=>({updateValueAndCallActionChildren:{dependencyType:"child",childGroups:["updateValuesCallActions"]}}),definition({dependencyValues:a}){return{newValues:{updateValueAndActionsToTrigger:a.updateValueAndCallActionChildren}}}},t.triggerWithTnames={returnDependencies:()=>({triggerWithTnames:{dependencyType:"attributePrimitive",attributeName:"triggerWithTnames"},triggerWhen:{dependencyType:"attributeComponent",attributeName:"triggerWhen"}}),definition({dependencyValues:a}){return a.triggerWhen||a.triggerWithTnames===null?{newValues:{triggerWithTnames:null}}:{newValues:{triggerWithTnames:a.triggerWithTnames.split(/\s+/).filter(s=>s)}}}},t.triggerWithFullTnames={chainActionOnActionOfStateVariableTargets:{triggeredAction:"triggerActions"},stateVariablesDeterminingDependencies:["triggerWithTnames"],returnDependencies({stateValues:a}){let s={};if(a.triggerWithTnames)for(let[o,l]of a.triggerWithTnames.entries())s[`triggerWithFullTname${o}`]={dependencyType:"expandTargetName",tName:l};return s},definition({dependencyValues:a}){let s=[],o=Object.keys(a).length-1;for(let l=0;l<o;l++)s.push(a[`triggerWithFullTname${l}`]);return{newValues:{triggerWithFullTnames:s}}},markStale(){return{updateActionChaining:!0}}};let e=t.hidden.returnDependencies,r=t.hidden.definition;return t.hidden.returnDependencies=function(a){let s=e(a);return s.triggerWhen={dependencyType:"attributeComponent",attributeName:"triggerWhen"},s.triggerWithTnames={dependencyType:"stateVariable",variableName:"triggerWithTnames"},s},t.hidden.definition=function(a){return a.dependencyValues.triggerWhen||a.dependencyValues.triggerWithTnames?{newValues:{hidden:!0}}:r(a)},t}async triggerActions(){for(let t of this.stateValues.updateValueAndActionsToTrigger)this.componentInfoObjects.isInheritedComponentType({inheritedComponentType:t.componentType,baseComponentType:"updateValue"})?await this.coreFunctions.performAction({componentName:t.componentName,actionName:"updateValue"}):this.componentInfoObjects.isInheritedComponentType({inheritedComponentType:t.componentType,baseComponentType:"callAction"})&&await this.coreFunctions.performAction({componentName:t.componentName,actionName:"callAction"});return this.coreFunctions.triggerChainedActions({componentName:this.componentName})}triggerActionsIfTriggerNewlyTrue({stateValues:t,previousValues:e}){if(t.triggerWhen&&e.triggerWhen===!1)return this.triggerActions()}actions={triggerActions:this.triggerActions.bind(new Proxy(this,this.readOnlyProxyHandler)),triggerActionsIfTriggerNewlyTrue:this.triggerActionsIfTriggerNewlyTrue.bind(new Proxy(this,this.readOnlyProxyHandler))}};T(dd,"componentType","triggerSet");import vl from"math-expressions";var ip=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.nIterates={createComponentOfType:"integer",createStateVariable:"nIterates",defaultValue:0,public:!0},e.forceSymbolic={createComponentOfType:"boolean",createStateVariable:"forceSymbolic",defaultValue:!1,public:!0},e.forceNumeric={createComponentOfType:"boolean",createStateVariable:"forceNumeric",defaultValue:!1,public:!0},e.initialValue={createComponentOfType:"math",createStateVariable:"initialValue",defaultValue:vl.fromAst("\uFF3F")},e.function={createComponentOfType:"function"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.nDimensions={public:!0,componentType:"integer",returnDependencies:()=>({functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["nInputs","nOutputs"]}}),definition({dependencyValues:e}){return e.functionAttr?e.functionAttr.stateValues.nInputs!==e.functionAttr.stateValues.nOutputs?(console.warn("Function iterates are possible only if the number of inputs is equal to the number of outputs"),{newValues:{nDimensions:0}}):{newValues:{nDimensions:e.functionAttr.stateValues.nInputs}}:{newValues:{nDimensions:0}}}},t.allIterates={public:!0,componentType:"mathList",returnDependencies:()=>({functionAttr:{dependencyType:"attributeComponent",attributeName:"function",variableNames:["symbolicfs","numericalfs","symbolic"]},forceSymbolic:{dependencyType:"stateVariable",variableName:"forceSymbolic"},forceNumeric:{dependencyType:"stateVariable",variableName:"forceNumeric"},nDimensions:{dependencyType:"stateVariable",variableName:"nDimensions"},initialValue:{dependencyType:"stateVariable",variableName:"initialValue"},nIterates:{dependencyType:"stateVariable",variableName:"nIterates"}}),definition({dependencyValues:e}){let r=[],a=e.functionAttr,s=e.initialValue,o=!e.forceNumeric&&(a.stateValues.symbolic||e.forceSymbolic),l=e.nIterates;if(!a||e.nDimensions===0||!(e.nDimensions===1||Array.isArray(s.tree)&&["vector","tuple"].includes(s.tree[0])&&s.tree.length===e.nDimensions+1))return r=Array(l).fill(vl.fromAst("\uFF3F")),{newValues:{allIterates:r}};if(o)if(e.nDimensions===1){let u=a.stateValues.symbolicfs[0],c=s;for(let p=0;p<l;p++)c=u(c),r.push(c)}else{let u=a.stateValues.symbolicfs,c=s.tree.slice(1);for(let p=0;p<l;p++){let m=[];for(let f=0;f<e.nDimensions;f++)m.push(u[f](...c).tree);r.push(vl.fromAst(["vector",...m])),c=m}}else if(e.nDimensions===1){let u=a.stateValues.numericalfs[0],c=s.evaluate_to_constant();if(c===null)r=Array(l).fill(vl.fromAst("\uFF3F"));else for(let p=0;p<l;p++)c=u(c),r.push(vl.fromAst(c))}else{let u=a.stateValues.numericalfs,c=s.tree.slice(1).map(p=>vl.fromAst(p).evaluate_to_constant()).map(p=>p??NaN);for(let p=0;p<l;p++){let m=[];for(let f=0;f<e.nDimensions;f++)m.push(u[f](...c));r.push(vl.fromAst(["vector",...m])),c=m}}return{newValues:{allIterates:r}}}},t.allIteratesWithInitial={public:!0,componentType:"mathList",returnDependencies:()=>({initialValue:{dependencyType:"stateVariable",variableName:"initialValue"},allIterates:{dependencyType:"stateVariable",variableName:"allIterates"}}),definition({dependencyValues:e}){return{newValues:{allIteratesWithInitial:[e.initialValue,...e.allIterates]}}}},t.iterates={isArray:!0,public:!0,componentType:"math",entryPrefixes:["iterate"],returnArraySizeDependencies:()=>({nIterates:{dependencyType:"stateVariable",variableName:"nIterates"}}),returnArraySize({dependencyValues:e}){return[e.nIterates]},returnArrayDependenciesByKey(){return{globalDependencies:{allIterates:{dependencyType:"stateVariable",variableName:"allIterates"}}}},arrayDefinitionByKey({globalDependencyValues:e,arraySize:r}){let a={};for(let s=0;s<r[0];s++)a[s]=e.allIterates[s];return{newValues:{iterates:a}}}},t.finalIterate={public:!0,componentType:"math",stateVariablesDeterminingDependencies:["nIterates"],returnDependencies({stateValues:e}){return!Number.isFinite(e.nIterates)||e.nIterates<0?{}:e.nIterates>0?{finalIterate:{dependencyType:"stateVariable",variableName:`iterate${e.nIterates}`}}:{finalIterate:{dependencyType:"stateVariable",variableName:"initialValue"}}},definition({dependencyValues:e}){return{newValues:{finalIterate:e.finalIterate}}}},t}};T(ip,"componentType","functionIterates"),T(ip,"rendererType");var Tl=class extends nt{static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.styleNumber,e}};T(Tl,"componentType","module"),T(Tl,"renderedDefault",!0),T(Tl,"acceptAnyAttribute",!0);var ap=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.componentType={createPrimitiveOfType:"string"},e.attribute={createPrimitiveOfType:"string"},e.defaultValue={leaveRaw:!0},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.componentNameForAttributes={returnDependencies:()=>({parentVariableContainingName:{dependencyType:"parentStateVariable",variableName:"componentNameForAttributes"}}),definition({dependencyValues:e}){return{newValues:{componentNameForAttributes:e.parentVariableContainingName}}}},t.attributeName={returnDependencies:()=>({attribute:{dependencyType:"attributePrimitive",attributeName:"attribute"}}),definition({dependencyValues:e}){return{newValues:{attributeName:e.attribute}}}},t.readyToExpandWhenResolved={stateVariablesDeterminingDependencies:["componentNameForAttributes"],returnDependencies:({stateValues:e})=>({componentIdentity:{dependencyType:"componentIdentity",componentName:e.componentNameForAttributes}}),definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,components:e,workspace:r,componentInfoObjects:a,flags:s}){let o=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,l={};for(let C in a.allComponentClasses)l[C.toLowerCase()]=C;let u=l[t.attributes.componentType.primitive.toLowerCase()];if(!a.allComponentClasses[u])return console.warn(`Could not find component type ${u}`),{replacements:[]};let p=e[t.stateValues.componentNameForAttributes],m={};for(let C in p.attributes)m[C.toLowerCase()]=C;let f=m[t.stateValues.attributeName.toLowerCase()],d=p.attributes[f];if(d===void 0){if(t.attributes.defaultValue===void 0)return console.warn("Cannot create component from attribute if neither attribute nor default value specified"),{replacements:[]};d=t.attributes.defaultValue}let h=p.constructor,y=Object.keys(h.createAttributesObject({flags:s})).map(C=>C.toLowerCase());if(y.push("name","tname","assignnames"),y.includes(t.stateValues.attributeName.toLowerCase()))return console.warn(`Cannot add attribute ${t.stateValues.attributeName} of a ${h.componentType} as it already exists in ${h.componentType} class`),{replacements:[]};let g=ro({attrObj:{createComponentOfType:u},value:d,componentInfoObjects:a}).component;if(g.children&&(g.children=Ai(g.children,a),o)){for(let C of g.children)if(C.componentType==="copy"){let w=C.doenetAttributes.tName;/[a-zA-Z_]/.test(w[0])&&(C.doenetAttributes.tName="../"+w)}}return Tp({serializedComponents:[g],isAttributeComponent:!0,componentInfoObjects:a}),Qa([g]),{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:[g],parentName:t.componentName,parentCreatesNewNamespace:o,componentInfoObjects:a}).serializedComponents}}};T(ap,"componentType","customAttribute"),T(ap,"assignNamesToReplacements",!0);var hd=class extends Ee{static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.componentNameForAttributes={returnDependencies:()=>({sourceCompositeIdentity:{dependencyType:"sourceCompositeIdentity"}}),definition({dependencyValues:e}){let r=null;return e.sourceCompositeIdentity&&(r=e.sourceCompositeIdentity.componentName),{newValues:{componentNameForAttributes:r}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({}),definition(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}};T(hd,"componentType","setup");var Nl=class extends re{static returnChildGroups(){return[{group:"inlines",componentTypes:["_inline"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.text={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["inlines"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r="";for(let a of e.inlineChildren)typeof a.stateValues.text=="string"?r+=a.stateValues.text:r+=" ";return{newValues:{text:r}}}},t.footnoteTag={public:!0,componentType:"text",forRenderer:!0,returnDependencies:()=>({footnoteCounter:{dependencyType:"counter",counterName:"footnote"}}),definition({dependencyValues:e}){return{newValues:{footnoteTag:String(e.footnoteCounter)}}}},t}};T(Nl,"componentType","footnote"),T(Nl,"renderChildren",!0),T(Nl,"includeBlankStringChildren",!0);var Ys=class extends ue{static returnChildGroups(){return[{group:"inlinesBlocks",componentTypes:["_inline","_block"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.text={public:!0,componentType:"text",returnDependencies:()=>({inlineChildren:{dependencyType:"child",childGroups:["inlinesBlocks"],variableNames:["text"],variablesOptional:!0}}),definition:function({dependencyValues:e}){let r="";for(let a of e.inlineChildren)typeof a.stateValues.text=="string"?r+=a.stateValues.text:r+=" ";return{newValues:{text:r}}}},t}};T(Ys,"componentType","caption"),T(Ys,"rendererType","container"),T(Ys,"renderChildren",!0),T(Ys,"includeBlankStringChildren",!0);var sp=class extends Qn{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.open={createComponentOfType:"boolean",createStateVariable:"open",defaultValue:!1,public:!0,forRenderer:!0},e}};T(sp,"componentType","endpoint"),T(sp,"rendererType","point");import"math-expressions";var Cl=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e}static returnChildGroups(){return[{group:"mathNumbers",componentTypes:["number","math","numberList","mathList","point"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.componentNamesForValues={returnDependencies:()=>({children:{dependencyType:"child",childGroups:["mathNumbers"],variableNames:["componentNamesInList"],variablesOptional:!0}}),definition({dependencyValues:e}){let r=[];for(let a of e.children)a.stateValues.componentNamesInList?r.push(...a.stateValues.componentNamesInList):r.push(a.componentName);return{newValues:{componentNamesForValues:r}}}},t.sortedValues={stateVariablesDeterminingDependencies:["componentNamesForValues"],returnDependencies({stateValues:e}){let r={};for(let[a,s]of e.componentNamesForValues.entries())r[`component${a}`]={dependencyType:"multipleStateVariables",componentName:s,variableNames:["value","xs"],variablesOptional:!0};return r},definition({dependencyValues:e,componentInfoObjects:r}){let a=[];for(let s in e){if(s.substring(0,9)!=="component")continue;let o=e[s];if(r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"number"}))a.push({componentName:o.componentName,numericalValue:o.stateValues.value});else if(r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"math"})){let l=o.stateValues.value.evaluate_to_constant();l===null&&(l=NaN),a.push({componentName:o.componentName,numericalValue:l})}else if(r.isInheritedComponentType({inheritedComponentType:o.componentType,baseComponentType:"point"})){let l;o.stateValues.xs.length>0?(l=o.stateValues.xs[0].evaluate_to_constant(),l===null&&(l=NaN)):l=NaN,a.push({componentName:o.componentName,numericalValue:l})}}return a.sort((s,o)=>s.numericalValue-o.numericalValue),{newValues:{sortedValues:a}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({sortedValues:{dependencyType:"stateVariable",variableName:"sortedValues"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,components:e,componentInfoObjects:r,workspace:a}){let s=[],o=[];for(let u of t.stateValues.sortedValues){let c;u.listInd===void 0?c=e[u.componentName]:c=e[u.componentName].activeChildren[u.listInd],c&&(o.push(c.componentName),s.push(c.serialize({forLink:!0})))}a.uniqueIdentifiersUsed=[],s=Rr({serializedComponents:s,componentName:t.componentName,uniqueIdentifiersUsed:a.uniqueIdentifiersUsed});let l=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:s,parentName:t.componentName,parentCreatesNewNamespace:t.stateValues.newNamespace,componentInfoObjects:r});return a.componentsCopied=o,{replacements:l.serializedComponents}}static calculateReplacementChanges({component:t,components:e,componentInfoObjects:r,workspace:a}){let s=[];for(let u of t.stateValues.sortedValues){let c;u.listInd===void 0?c=e[u.componentName]:c=e[u.componentName].activeChildren[u.listInd],c&&s.push(c.componentName)}if(s.length==a.componentsCopied.length&&a.componentsCopied.every((u,c)=>u===s[c]))return[];let o=this.createSerializedReplacements({component:t,components:e,componentInfoObjects:r,workspace:a}).replacements;return[{changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:t.replacements.length,serializedReplacements:o}]}};T(Cl,"componentType","sort"),T(Cl,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved"),T(Cl,"assignNamesToReplacements",!0);import uU from"math-expressions";var op=class extends re{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.variables={createComponentOfType:"variables"},e.nDiscretizationPoints={createComponentOfType:"number",createStateVariable:"nDiscretizationPoints",defaultValue:100,public:!0},e.minVar={createComponentOfType:"number",createStateVariable:"minVar",defaultValue:null},e.maxVar={createComponentOfType:"number",createStateVariable:"maxVar",defaultValue:null},e}static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){return r.every(a=>a.componentType==="string"||a.doenetAttributes&&a.doenetAttributes.createdFromMacro)?r.length===1&&r[0].componentType!=="string"?{success:!1}:{success:!0,newChildren:[{componentType:"math",children:r}]}:{success:!1}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"maths",componentTypes:["math"]},{group:"strings",componentTypes:["string"]}]}static returnStateVariableDefinitions({numerics:t}){let e=super.returnStateVariableDefinitions({numerics:t});return e.variables={isArray:!0,public:!0,componentType:"variable",entryPrefixes:["variable"],returnArraySizeDependencies:()=>({}),returnArraySize({dependencyValues:r}){return[1]},returnArrayDependenciesByKey({arrayKeys:r}){return{globalDependencies:{variablesAttr:{dependencyType:"attributeComponent",attributeName:"variables",variableNames:["variables"]}}}},arrayDefinitionByKey({globalDependencyValues:r,arraySize:a,arrayKeys:s,usedDefault:o}){let l=[];return r.variablesAttr!==null&&(l=r.variablesAttr.stateValues.variables),{newValues:{variables:vn(a[0],l)}}}},e.variable={isAlias:!0,targetVariableName:"variable1"},e.allSolutions={returnDependencies:()=>({mathChild:{dependencyType:"child",childGroups:["maths"],variableNames:["value"]},variables:{dependencyType:"stateVariable",variableName:"variables"},minVar:{dependencyType:"stateVariable",variableName:"minVar"},maxVar:{dependencyType:"stateVariable",variableName:"maxVar"},nDiscretizationPoints:{dependencyType:"stateVariable",variableName:"nDiscretizationPoints"}}),definition({dependencyValues:r}){if(r.mathChild.length===0)return{newValues:{allSolutions:[]}};let a=r.mathChild[0].stateValues.value;if(!(Array.isArray(a.tree)&&a.tree.length===3&&a.tree[0]==="="))return{newValues:{allSolutions:[]}};let s=r.minVar,o=r.maxVar,l=[],u=r.variables[0].subscripts_to_strings().tree,c=uU.fromAst(["+",a.tree[1],["-",a.tree[2]]]).subscripts_to_strings(),p=c.f(),m=E=>p({[u]:E}),f=E=>Lr({value:c.substitute({[u]:E}).strings_to_subscripts(),simplify:!0,expand:!0}).evaluate_to_constant(),d=function(E){try{return m(E)}catch(I){return NaN}},h=function(E){try{return m(E)}catch(I){let V=f(E);return V!==null?V:NaN}};if(Number.isFinite(s)||(s=-10),Number.isFinite(o)||(o=10),s>o)return{newValues:{allSolutions:[]}};let y=[s,o],b=[s];for(let E=0;E<y.length-1;E++){let I=y[E],V=y[E+1],O=r.nDiscretizationPoints,k=(V-I)/O;for(let M=1;M<O;M++)b.push(I+M*k);b.push(V)}let g=2*b[0]-b[1],v=2*b[b.length-1]-b[b.length-2];b=[g,...b,v];let C=b.map(h),w=b[0],S=C[0];for(let E=0;E<b.length;E++){let I=b[E],V=C[E];if(!Number.isFinite(V)||!Number.isFinite(S)){let O,k;if(Number.isFinite(V)?(O=I,k=w):Number.isFinite(S)&&(O=w,k=I),O!==void 0){for(;;){let M=(O+k)/2;if(M===O||M===k)break;Number.isFinite(d(M))?O=M:k=M}[I,w].includes(O)||(b.splice(E,0,O),C.splice(E,0,d(O)))}}w=I,S=V}l=[],w=b[0],S=C[0],S===0&&l.push(w);for(let E=1;E<b.length;E++){let I=b[E],V=C[E];if(V===0){let O=!1;if(E<b.length-1){let k=b[E+1],M=C[E+1],L=w,G=S;if(S*M>0){for(let K=0;K<10;K++)if(w=.1*w+.9*I,k=.1*k+.9*I,S=d(w),M=d(k),S*M<0){S*G<0?(l.push(t.fzero(d,[L,w])),l.push(I)):(l.includes(I)||l.push(I),I=k,V=M),O=!0;break}}}!O&&!l.includes(I)&&l.push(I)}else if(V*S<0)l.push(t.fzero(d,[w,I]));else if(S!==0&&E<b.length-1){let O=b[E+1],k=C[E+1];if((S-V)*(k-V)>0&&(V>0&&S>V||V<0&&S<V)){let M;S>V?M=d:M=G=>-d(G);let L=t.fminbr(M,[w,O],void 0,1e-10);if(L.success){let G=L.x,K=d(G);K*S<0?(l.push(t.fzero(d,[w,G])),I=G,V=K):K===0&&l.push(G)}}}w=I,S=V}return l=l.filter(E=>E>=s&&E<=o),{newValues:{allSolutions:l.map(E=>uU.fromAst(E))}}}},e.numberSolutions={public:!0,componentType:"integer",returnDependencies:()=>({allSolutions:{dependencyType:"stateVariable",variableName:"allSolutions"}}),definition({dependencyValues:r}){return{newValues:{numberSolutions:r.allSolutions.length}}}},e.solutions={public:!0,componentType:"math",isArray:!0,entryPrefixes:["solution"],returnArraySizeDependencies:()=>({numberSolutions:{dependencyType:"stateVariable",variableName:"numberSolutions"}}),returnArraySize({dependencyValues:r}){return[r.numberSolutions]},returnArrayDependenciesByKey(){return{globalDependencies:{allSolutions:{dependencyType:"stateVariable",variableName:"allSolutions"}}}},arrayDefinitionByKey({globalDependencyValues:r}){let a={};for(let s=0;s<r.__array_size[0];s++)a[s]=r.allSolutions[s];return{newValues:{solutions:a}}}},e}};T(op,"componentType","solveEquations"),T(op,"rendererType");var lp=class extends nt{static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.rendered,e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.rendered={returnDependencies:()=>({parentOpen:{dependencyType:"parentStateVariable",variableName:"open"}}),markStale:()=>({updateReplacements:!0}),definition({dependencyValues:e}){return{newValues:{rendered:Boolean(e.parentOpen)}}}},t}static calculateReplacementChanges({component:t,componentInfoObjects:e}){if(t.stateValues.rendered&&t.replacements.length===0){let r=this.createSerializedReplacements({component:t,componentInfoObjects:e}).replacements;return[{changeType:"add",changeTopLevelReplacements:!0,firstReplacementInd:0,numberReplacementsToReplace:0,serializedReplacements:r}]}else return[]}};T(lp,"componentType","_solutionContainer"),T(lp,"stateVariableToEvaluateAfterReplacements","open");import kw from"math-expressions";var up=class extends ue{actions={addPoint:this.addPoint.bind(new Proxy(this,this.readOnlyProxyHandler)),deletePoint:this.deletePoint.bind(new Proxy(this,this.readOnlyProxyHandler)),movePoint:this.movePoint.bind(new Proxy(this,this.readOnlyProxyHandler)),togglePoint:this.togglePoint.bind(new Proxy(this,this.readOnlyProxyHandler)),toggleInterval:this.toggleInterval.bind(new Proxy(this,this.readOnlyProxyHandler)),clear:this.clear.bind(new Proxy(this,this.readOnlyProxyHandler)),setToR:this.setToR.bind(new Proxy(this,this.readOnlyProxyHandler))};static createAttributesObject(t){let e=super.createAttributesObject(t);return e.xmin={createComponentOfType:"number",createStateVariable:"xmin",defaultValue:-10,public:!0,forRenderer:!0},e.xmax={createComponentOfType:"number",createStateVariable:"xmax",defaultValue:10,public:!0,forRenderer:!0},e.width={createComponentOfType:"_componentSize",createStateVariable:"width",defaultValue:800,public:!0,forRenderer:!0},e.height={createComponentOfType:"_componentSize",createStateVariable:"height",defaultValue:300,public:!0,forRenderer:!0},e.xlabel={createComponentOfType:"text",createStateVariable:"xlabel",defaultValue:"",public:!0,forRenderer:!0},e.dx={createComponentOfType:"number",createStateVariable:"dx",defaultValue:.5,public:!0},e.variable={createComponentOfType:"variable",createStateVariable:"variable",defaultValue:kw.fromAst("x")},e.format={createComponentOfType:"text",createStateVariable:"format",defaultValue:"text",public:!0},e.prefill={createComponentOfType:"text",createStateVariable:"prefill",defaultValue:"",public:!0},e.bindValueTo={createComponentOfType:"subsetOfReals"},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.subsetValue={public:!0,componentType:"subsetOfReals",returnDependencies:()=>({bindValueTo:{dependencyType:"attributeComponent",attributeName:"bindValueTo",variableNames:["subsetValue"]},prefill:{dependencyType:"stateVariable",variableName:"prefill"},variable:{dependencyType:"stateVariable",variableName:"variable"},format:{dependencyType:"stateVariable",variableName:"format"}}),definition:function({dependencyValues:e}){return e.bindValueTo?{newValues:{subsetValue:e.bindValueTo.stateValues.subsetValue}}:{useEssentialOrDefaultValue:{subsetValue:{variablesToCheck:"subsetValue",get defaultValue(){return W2e({inputString:e.prefill,format:e.format,variable:e.variable})}}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.bindValueTo?{success:!0,instructions:[{setDependency:"bindValueTo",desiredValue:e.subsetValue,variableIndex:0}]}:{success:!0,instructions:[{setStateVariable:"subsetValue",value:e.subsetValue}]}}},t.pointsFromSubset={additionalStateVariablesDefined:["intervalsFromSubset"],returnDependencies:()=>({subsetValue:{dependencyType:"stateVariable",variableName:"subsetValue"}}),definition({dependencyValues:e}){function r(c,p){let m=[],f=[];if(c.points&&(m=c.points),c.intervals&&(f=c.intervals),p.points){let d=m.map(h=>h.value);for(let h of p.points){let y=d.indexOf(h.value);y===-1?m.push(h):m[y].inSubset||=h.inSubset}}return p.intervals&&f.push(...p.intervals),{points:m,intervals:f}}function a(c){if(c===null||c.isEmpty())return{};if(c instanceof bt.Union){let p=[],m=[];for(let f of c.subsets){let d=a(f);({points:p,intervals:m}=r({points:p,intervals:m},d))}return{points:p,intervals:m}}else{if(c instanceof bt.RealLine)return{intervals:[[-1/0,1/0]]};if(c instanceof bt.Singleton)return{points:[{value:c.element,inSubset:!0}]};if(c instanceof bt.OpenInterval){let p=[[c.left,c.right]],m=[];return Number.isFinite(c.left)&&m.push({value:c.left,inSubset:!1}),Number.isFinite(c.right)&&m.push({value:c.right,inSubset:!1}),{intervals:p,points:m}}}return{}}let{points:s,intervals:o}=a(e.subsetValue),l=s||[],u=o||[];return l.sort((c,p)=>c.value-p.value),u.sort((c,p)=>c[0]-p[0]),{newValues:{pointsFromSubset:l,intervalsFromSubset:u}}}},t.additionalPoints={defaultValue:[],returnDependencies:()=>({}),definition(){return{useEssentialOrDefaultValue:{additionalPoints:{variablesToCheck:["additionalPoints"]}}}},inverseDefinition({desiredStateVariableValues:e}){return e.additionalPoints.every(Number.isFinite)?{success:!0,instructions:[{setStateVariable:"additionalPoints",value:[...e.additionalPoints].sort((r,a)=>r-a)}]}:{success:!1}}},t.points={additionalStateVariablesDefined:[{variableName:"intervals",forRenderer:!0}],forRenderer:!0,returnDependencies:()=>({pointsFromSubset:{dependencyType:"stateVariable",variableName:"pointsFromSubset"},intervalsFromSubset:{dependencyType:"stateVariable",variableName:"intervalsFromSubset"},additionalPoints:{dependencyType:"stateVariable",variableName:"additionalPoints"}}),definition({dependencyValues:e}){let r=[...e.pointsFromSubset],a=[...e.intervalsFromSubset],s=[...e.additionalPoints].sort((d,h)=>d-h),o=[],l=[],u=0,c=1/0,p=0;s.length>0&&(c=s[0]);let m=a[0],f=-1/0;r.push({value:1/0,inSubset:!1});for(let d of r){let h=!1;for(m&&m[0]<d.value&&(h=!0);c<d.value;)c!==f&&(o.push({value:c,inSubset:h,isAdditional:!0,additionalPointInd:p}),l.push({left:f,right:c,inSubset:h}),f=c),p++,c=s[p],c===void 0&&(c=1/0);o.push(d),l.push({left:f,right:d.value,inSubset:h}),f=d.value,h&&(u++,m=a[u])}return o=o.slice(0,o.length-1),{newValues:{points:o,intervals:l}}}},t}addPoint(t){let e=this.stateValues.dx,r=Math.round(Math.max(this.stateValues.xmin,Math.min(this.stateValues.xmax,t))/e)*e,a=[...this.stateValues.pointsFromSubset],s=[...this.stateValues.intervalsFromSubset],o=[...this.stateValues.additionalPoints];if(!o.includes(r)&&!a.map(u=>u.value).includes(r)){let u=!1;for(let c of s)if(c[0]<r&&c[1]>r){u=!0;break}if(u)return o.push(r),this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"additionalPoints",value:o}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{addedPoint:r,intervalsFromSubset:s,pointsFromSubset:a,additionalPoints:o}}});{a.push({value:r,inSubset:!0});let c=this.createUpdateInstructions({intervalsFromSubset:s,pointsFromSubset:a,modifiedAdditionalPoints:!1,additionalPoints:o});return this.coreFunctions.performUpdate({updateInstructions:c,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{addedPoint:r,intervalsFromSubset:s,pointsFromSubset:a,additionalPoints:o}}})}}return{success:!0,instructions:[]}}deletePoint(t){let e=this.stateValues.points[t],r=[...this.stateValues.additionalPoints],a=[...this.stateValues.pointsFromSubset],s=[...this.stateValues.intervalsFromSubset];if(e.isAdditional)return r.splice(e.additionalPointInd,1),this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"additionalPoints",value:r}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{deletedPoint:e.value,intervalsFromSubset:s,pointsFromSubset:a,additionalPoints:r}}});{let o=!1,l=a.map(m=>m.value).indexOf(e.value),u=s.map(m=>m[1]).indexOf(e.value),c=s.map(m=>m[0]).indexOf(e.value);if(u!==-1)if(c!==-1)s[u]=[s[u][0],s[c][1]],s.splice(c,1),a.splice(l,1);else{let m=this.stateValues.points[t-1];m&&m.isAdditional?(s[u]=[s[u][0],m.value],r.splice(e.additionalPointInd,1),o=!0,a.splice(l,1,m)):(s.splice(u,1),a.splice(l,1),m&&!m.inSubset&&s.map(d=>d[1]).indexOf(m.value)===-1&&(r.push(m.value),o=!0))}else if(c!==-1){let m=this.stateValues.points[t+1];m&&m.isAdditional?(s[c]=[m.value,s[c][1]],r.splice(e.additionalPointInd,1),o=!0,a.splice(l,1,m)):(s.splice(c,1),a.splice(l,1),m&&!m.inSubset&&s.map(d=>d[0]).indexOf(m.value)===-1&&(r.push(m.value),o=!0))}else a.splice(l,1);let p=this.createUpdateInstructions({intervalsFromSubset:s,pointsFromSubset:a,modifiedAdditionalPoints:o,additionalPoints:r});return this.coreFunctions.performUpdate({updateInstructions:p,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{deletedPoint:e.value,intervalsFromSubset:s,pointsFromSubset:a,additionalPoints:r}}})}}createUpdateInstructions({intervalsFromSubset:t,pointsFromSubset:e,modifiedAdditionalPoints:r,additionalPoints:a}){let s=this.stateValues.dx,o=p=>Math.round(p/s)*s,l=[];for(let p of t)l.push(new bt.OpenInterval(o(p[0]),o(p[1])));for(let p of e)p.inSubset&&l.push(new bt.Singleton(o(p.value)));let u;l.length===0?u=new bt.EmptySet:l.length===1?u=l[0]:u=new bt.Union(l);let c=[{componentName:this.componentName,updateType:"updateValue",stateVariable:"subsetValue",value:u}];return r&&c.push({componentName:this.componentName,updateType:"updateValue",stateVariable:"additionalPoints",value:a.map(o)}),c}movePoint({pointInd:t,value:e,transient:r}){let a=this.stateValues.dx,s=Math.round(Math.max(this.stateValues.xmin,Math.min(this.stateValues.xmax,e))/a)*a,o=this.stateValues.points[t],l=this.stateValues.points[t-1];l&&(s=Math.max(s,l.value+a));let u=this.stateValues.points[t+1];u&&(s=Math.min(s,u.value-a));let c=[...this.stateValues.additionalPoints],p=[...this.stateValues.pointsFromSubset],m=[...this.stateValues.intervalsFromSubset];if(o.isAdditional)return c[o.additionalPointInd]=s,r?this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"additionalPoints",value:c}],transient:!0}):this.coreFunctions.performUpdate({updateInstructions:[{componentName:this.componentName,updateType:"updateValue",stateVariable:"additionalPoints",value:c}],event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{movedPoint:s,intervalsFromSubset:m,pointsFromSubset:p,additionalPoints:c}}});{let f=p.map(b=>b.value).indexOf(o.value),d=m.map(b=>b[1]).indexOf(o.value),h=m.map(b=>b[0]).indexOf(o.value);p[f]={value:s,inSubset:p[f].inSubset},d!==-1&&(m[d]=[m[d][0],s]),h!==-1&&(m[h]=[s,m[h][1]]);let y=this.createUpdateInstructions({intervalsFromSubset:m,pointsFromSubset:p,modifiedAdditionalPoints:!1});return r?this.coreFunctions.performUpdate({updateInstructions:y,transient:!0}):this.coreFunctions.performUpdate({updateInstructions:y,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{movedPoint:s,intervalsFromSubset:m,pointsFromSubset:p,additionalPoints:c}}})}}togglePoint(t){let e=this.stateValues.points[t],r=[...this.stateValues.pointsFromSubset],a=[...this.stateValues.intervalsFromSubset],s=[...this.stateValues.additionalPoints],o=!1;if(e.isAdditional)if(s.splice(e.additionalPointInd,1),o=!0,e.inSubset){for(let[u,c]of a.entries())if(c[0]<e.value&&c[1]>e.value){let p=[[c[0],e.value],[e.value,c[1]]];a.splice(u,1,...p);break}}else r.push({value:e.value,inSubset:!0});else{let u=r.map(m=>m.value).indexOf(e.value),c=a.map(m=>m[1]).indexOf(e.value),p=a.map(m=>m[0]).indexOf(e.value);c!==-1?p!==-1?(a[c]=[a[c][0],a[p][1]],a.splice(p,1),r.splice(u,1),s.push(e.value),o=!0):r[u]={value:e.value,inSubset:!e.inSubset}:p!==-1?r[u]={value:e.value,inSubset:!e.inSubset}:(r.splice(u,1),s.push(e.value),o=!0)}let l=this.createUpdateInstructions({intervalsFromSubset:a,pointsFromSubset:r,modifiedAdditionalPoints:o,additionalPoints:s});return this.coreFunctions.performUpdate({updateInstructions:l,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{toggledPoint:e.value,intervalsFromSubset:a,pointsFromSubset:r,additionalPoints:s}}})}toggleInterval(t){let e=this.stateValues.intervals[t],r=this.stateValues.points[t-1],a=this.stateValues.points[t],s=[...this.stateValues.pointsFromSubset],o=[...this.stateValues.intervalsFromSubset],l=[...this.stateValues.additionalPoints],u=!1;if(e.inSubset){let p,m;for(let[f,d]of o.entries())if(d[0]<=e.left&&d[1]>=e.right){m=d,p=f;break}if(e.left===m[0])if(e.right===m[1]){if(o.splice(p,1),r&&!r.inSubset&&o.map(d=>d[1]).indexOf(r.value)===-1){let d=s.map(h=>h.value).indexOf(r.value);s.splice(d,1),l.push(r.value),u=!0}if(a&&!a.inSubset&&o.map(d=>d[0]).indexOf(a.value)===-1){let d=s.map(h=>h.value).indexOf(a.value);s.splice(d,1),l.push(a.value),u=!0}}else{if(o[p]=[e.right,m[1]],r&&!r.inSubset&&o.map(d=>d[1]).indexOf(r.value)===-1){let d=s.map(h=>h.value).indexOf(r.value);s.splice(d,1),l.push(r.value),u=!0}s.push({value:a.value,inSubset:!0}),l.splice(a.additionalPointInd,1),u=!0}else if(e.right===m[1]){if(o[p]=[m[0],e.left],a&&!a.inSubset&&o.map(d=>d[0]).indexOf(a.value)===-1){let d=s.map(h=>h.value).indexOf(a.value);s.splice(d,1),l.push(a.value),u=!0}s.push({value:r.value,inSubset:!0}),l.splice(r.additionalPointInd,1),u=!0}else{let f=[[m[0],e.left],[e.right,m[1]]];o.splice(p,1,...f),s.push({value:r.value,inSubset:!0}),s.push({value:a.value,inSubset:!0}),l.splice(a.additionalPointInd,1),l.splice(r.additionalPointInd,1),u=!0}}else{let p=o.map(f=>f[1]).indexOf(e.left),m=o.map(f=>f[0]).indexOf(e.right);if(p===-1)m===-1?(o.push([e.left,e.right]),a&&a.isAdditional&&(l.splice(a.additionalPointInd,1),u=!0),r&&r.isAdditional&&(l.splice(r.additionalPointInd,1),u=!0)):(a.inSubset?(o[m]=[e.left,o[m][1]],l.push(a.value),u=!0):o.push([e.left,e.right]),r&&r.isAdditional&&(l.splice(r.additionalPointInd,1),u=!0));else if(m===-1)r.inSubset?(o[p]=[o[p][0],e.right],l.push(r.value),u=!0):o.push([e.left,e.right]),a&&a.isAdditional&&(l.splice(a.additionalPointInd,1),u=!0);else if(r.inSubset)if(a.inSubset){let f=[o[p][0],o[m][1]];o.splice(p,2,f),l.push(r.value),l.push(a.value),u=!0}else o[p]=[o[p][0],e.right],l.push(r.value),u=!0;else a.inSubset?(o[m]=[e.left,o[m][1]],l.push(a.value),u=!0):o.push([e.left,e.right])}let c=this.createUpdateInstructions({intervalsFromSubset:o,pointsFromSubset:s,modifiedAdditionalPoints:u,additionalPoints:l});return this.coreFunctions.performUpdate({updateInstructions:c,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{toggledInterval:[e.left,e.right],intervalsFromSubset:o,pointsFromSubset:s,additionalPoints:l}}})}clear(){let t=this.createUpdateInstructions({intervalsFromSubset:[],pointsFromSubset:[],modifiedAdditionalPoints:!0,additionalPoints:[]});return this.coreFunctions.performUpdate({updateInstructions:t,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{cleared:!0,intervalsFromSubset:[],pointsFromSubset:[],additionalPoints:[]}}})}setToR(){let t=this.createUpdateInstructions({intervalsFromSubset:[[-1/0,1/0]],pointsFromSubset:[],modifiedAdditionalPoints:!0,additionalPoints:[]});return this.coreFunctions.performUpdate({updateInstructions:t,event:{verb:"interacted",object:{componentName:this.componentName,componentType:this.componentType},result:{setToR:!0,intervalsFromSubset:[[-1/0,1/0]],pointsFromSubset:[],additionalPoints:[]}}})}};T(up,"componentType","subsetOfRealsInput"),T(up,"variableForPlainMacro","subsetValue");function W2e({inputString:i,format:t,variable:e}){if(!i)return new bt.EmptySet;let r;if(t==="latex")try{r=kw.fromLatex(i)}catch(a){return console.warn(`Invalid latex for subsetOfRealsInput: ${i}`),new bt.EmptySet}else if(t==="text")try{r=kw.fromText(i)}catch(a){return console.warn(`Invalid text for subsetOfRealsInput: ${i}`),new bt.EmptySet}return gp(r,e)}import yd from"math-expressions";var Sl=class extends rt{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.createIntervals.defaultValue=!0,e.variable={createComponentOfType:"variable",createStateVariable:"variable",defaultValue:yd.fromAst("x")},e.displayMode={createComponentOfType:"text",createStateVariable:"displayMode",defaultValue:"intervals",public:!0,toLowerCase:!0,validValues:["intervals","inequalities"]},e}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return yr({stateVariableDefinitions:t,oldName:"unnormalizedValue",newName:"unnormalizedValuePreliminary"}),t.value.componentType="math",t.haveSingleSubsetChild={returnDependencies:()=>({mathChildren:{dependencyType:"child",childGroups:["maths"]}}),definition({dependencyValues:e,componentInfoObjects:r}){return{newValues:{haveSingleSubsetChild:e.mathChildren.length===1&&e.mathChildren.filter(s=>r.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"subsetOfReals"})).length===1}}}},t.subsetValue={stateVariablesDeterminingDependencies:["haveSingleSubsetChild"],returnDependencies({stateValues:e}){let r={haveSingleSubsetChild:{dependencyType:"stateVariable",variableName:"haveSingleSubsetChild"}};return e.haveSingleSubsetChild?r.subsetChild={dependencyType:"child",childGroups:["maths"],variableNames:["subsetValue"]}:(r.unnormalizedValuePreliminary={dependencyType:"stateVariable",variableName:"unnormalizedValuePreliminary"},r.variable={dependencyType:"stateVariable",variableName:"variable"}),r},definition({dependencyValues:e}){let r;return e.haveSingleSubsetChild?r=e.subsetChild[0].stateValues.subsetValue:r=gp(e.unnormalizedValuePreliminary,e.variable),{newValues:{subsetValue:r}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r,stateValues:a}){if(r.haveSingleSubsetChild)return{success:!0,instructions:[{setDependency:"subsetChild",desiredValue:e.subsetValue,childIndex:0,variableIndex:0}]};{let s=cU({subsetValue:e.subsetValue,variable:r.variable,displayMode:a.displayMode});return{success:!0,instructions:[{setDependency:"unnormalizedValuePreliminary",desiredValue:s}]}}}},t.unnormalizedValue={returnDependencies:()=>({subsetValue:{dependencyType:"stateVariable",variableName:"subsetValue"},displayMode:{dependencyType:"stateVariable",variableName:"displayMode"},variable:{dependencyType:"stateVariable",variableName:"variable"}}),definition({dependencyValues:e}){return{newValues:{unnormalizedValue:cU(e)}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){let a=gp(e.unnormalizedValue,r.variable);return{success:!0,instructions:[{setDependency:"subsetValue",desiredValue:a}]}}},t}};T(Sl,"componentType","subsetOfReals"),T(Sl,"rendererType","math"),T(Sl,"primaryStateVariableForDefinition","subsetValue");function cU({subsetValue:i,variable:t,displayMode:e="intervals"}){function r(s){return s===null?"\uFF3F":e==="intervals"?s.closedInterval?["interval",["tuple",s.left,s.right],["tuple",!0,!0]]:s.openClosedInterval?["interval",["tuple",s.left,s.right],["tuple",!1,!0]]:s.closedOpenInterval?["interval",["tuple",s.left,s.right],["tuple",!0,!1]]:s.toMathExpression().tree:s.closedInterval?["lts",["tuple",s.left,t,s.right],["tuple",!1,!1]]:s.openClosedInterval?s.left===-1/0?["le",t,s.right]:["lts",["tuple",s.left,t,s.right],["tuple",!0,!1]]:s.closedOpenInterval?s.right===1/0?["ge",t,s.left]:["lts",["tuple",s.left,t,s.right],["tuple",!1,!0]]:s instanceof bt.OpenInterval?s.left===-1/0?["<",t,s.right]:s.right===1/0?[">",t,s.left]:["lts",["tuple",s.left,t,s.right],["tuple",!0,!0]]:s instanceof bt.Singleton?["=",t,s.element]:s.isEmpty()?["in",t,"\u2205"]:s instanceof bt.RealLine?["in",t,"R"]:null}let a;if(i instanceof bt.Union){let s=i.subsets.filter(u=>u instanceof bt.Singleton),o=i.subsets.filter(u=>u instanceof bt.OpenInterval);for(let u=0;u<s.length;u++){let c=s[u].element;for(let p=0;p<o.length;p++){let m=o[p];c===m.left?(m.openClosedInterval?(m.closedInterval=!0,delete m.openClosedInterval):(m={left:m.left,right:m.right,closedOpenInterval:!0},o.splice(p,1,m)),s.splice(u,1),u--):c===m.right&&(m.closedOpenInterval?(m.closedInterval=!0,delete m.closedOpenInterval):(m={left:m.left,right:m.right,openClosedInterval:!0},o.splice(p,1,m)),s.splice(u,1),u--)}}let l=[...o,...s].sort((u,c)=>(u.left===void 0?u.element:u.left)-(c.left===void 0?c.element:c.left)).map(u=>r(u));l.length>1?e==="intervals"?a=yd.fromAst(["union",...l]):a=yd.fromAst(["or",...l]):a=yd.fromAst(l[0])}else a=yd.fromAst(r(i));return a}var Al=class extends Ee{static createAttributesObject(t){let e=super.createAttributesObject(t);return e.assignNamesSkip={createPrimitiveOfType:"number"},e.type={createPrimitiveOfType:"string",createStateVariable:"type",defaultPrimitiveValue:"text",toLowerCase:!0,validValues:["text"]},e.splitBy={createComponentOfType:"text",createStateVariable:"splitBy",defaultValue:"letter",toLowerCase:!0,validValues:["letter","word","comma"]},e}static returnSugarInstructions(){let t=[];function e({matchedChildren:r,componentAttributes:a}){let s=a.type;return["text"].includes(s)||(s="text"),{success:!0,newChildren:[{componentType:s,children:r}]}}return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"anything",componentTypes:["_base"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.originalValue={returnDependencies:()=>({child:{dependencyType:"child",childGroups:["anything"],variableNames:["value"]}}),definition({dependencyValues:e}){return e.child.length>0?{newValues:{originalValue:e.child[0].stateValues.value}}:{newValues:{originalValue:null}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){return r.child.length>0?{success:!0,instructions:[{setDependency:"child",desiredValue:e.originalValue,childIndex:0,variableIndex:0}]}:{success:!1}}},t.splitValues={returnDependencies:()=>({type:{dependencyType:"stateVariable",variableName:"type"},originalValue:{dependencyType:"stateVariable",variableName:"originalValue"},splitBy:{dependencyType:"stateVariable",variableName:"splitBy"}}),definition({dependencyValues:e}){if(e.originalValue===null)return{newValues:{splitValues:[]}};let r=[];return e.splitBy==="letter"?r=[...e.originalValue]:e.splitBy==="word"?r=e.originalValue.split(/\s+/):e.splitBy==="comma"?r=e.originalValue.split(/\s*,\s*/):r=[e.originalValue],{newValues:{splitValues:r}}}},t.readyToExpandWhenResolved={returnDependencies:()=>({splitValues:{dependencyType:"stateVariable",variableName:"splitValues"}}),markStale:()=>({updateReplacements:!0}),definition:function(){return{newValues:{readyToExpandWhenResolved:!0}}}},t}static createSerializedReplacements({component:t,componentInfoObjects:e}){let r=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,a={componentType:"textList",state:{textsShadow:t.stateValues.splitValues},downstreamDependencies:{[t.componentName]:[{dependencyType:"referenceShadow",compositeName:t.componentName,propVariable:"splitValues"}]}};return{replacements:de({assignNames:t.doenetAttributes.assignNames,serializedComponents:[a],parentName:t.componentName,parentCreatesNewNamespace:r,componentInfoObjects:e}).serializedComponents}}};T(Al,"componentType","split"),T(Al,"assignNamesToReplacements",!0),T(Al,"stateVariableToEvaluateAfterReplacements","readyToExpandWhenResolved");import xr from"math-expressions";var cp=class extends aa{static createAttributesObject(t){let e=super.createAttributesObject(t);return delete e.draggable,delete e.equation,delete e.through,delete e.slope,e.points={createComponentOfType:"_pointListComponent"},e}static returnSugarInstructions(){return[]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.draggable={componentType:"boolean",public:!0,forRenderer:!0,returnDependencies:()=>({}),definition:()=>({newValues:{draggable:!1}})},t.nDimensions={public:!0,componentType:"number",returnDependencies:()=>({}),definition:()=>({newValues:{nDimensions:2}})},delete t.nPointsPrescribed,delete t.basedOnSlope,delete t.dForSlope,delete t.essentialPoint1x,delete t.essentialPoint1y,delete t.equationIdentity,delete t.equation.stateVariablesDeterminingDependencies,t.equation.returnDependencies=()=>({points:{dependencyType:"attributeComponent",attributeName:"points",variableNames:["points","nDimensions"]},variables:{dependencyType:"stateVariable",variableName:"variables"}}),t.equation.definition=function({dependencyValues:e}){if(!e.points||e.points.stateValues.nDimensions<2||e.points.stateValues.points.length<1){let y=xr.fromAst("\uFF3F");return{newValues:{equation:y,coeff0:y,coeffvar1:y,coeffvar2:y}}}let r=[],a=[];for(let y of e.points.stateValues.points){let b=y.slice(0,2).map(g=>g&&g.evaluate_to_constant());b.every(Number.isFinite)&&(r.push([1,b[0]]),a.push([b[1]]))}if(r.length===0){let y=xr.fromAst("\uFF3F");return{newValues:{equation:y,coeff0:y,coeffvar1:y,coeffvar2:y}}}r=xr.math.matrix(r),a=xr.math.matrix(a);let s=xr.math.transpose(r),o=xr.math.multiply(s,a),l=xr.math.multiply(s,r),u=xr.math.lusolve(l,o),c=xr.fromAst(xr.math.subset(u,xr.math.index(0,0))),p=xr.fromAst(xr.math.subset(u,xr.math.index(1,0))),m=xr.fromAst(-1),f=e.variables,d=xr.fromAst(["+",["*","a","x"],"c"]).substitute({a:p,c,x:f[0],y:f[1]}).simplify();return{newValues:{equation:xr.fromAst(["=","y","r"]).substitute({r:d}),coeff0:c,coeffvar1:p,coeffvar2:m}}},delete t.equation.inverseDefinition,delete t.points.stateVariablesDeterminingDependencies,t.points.returnArrayDependenciesByKey=function(){return{globalDependencies:{coeff0:{dependencyType:"stateVariable",variableName:"coeff0"},coeffvar1:{dependencyType:"stateVariable",variableName:"coeffvar1"},coeffvar2:{dependencyType:"stateVariable",variableName:"coeffvar2"},variables:{dependencyType:"stateVariable",variableName:"variables"},lastPointsFromInverting:{dependencyType:"stateVariable",variableName:"lastPointsFromInverting"}}}},t}};T(cp,"componentType","bestFitLine"),T(cp,"rendererType","line");var Mw={};lt(Mw,{ComponentSize:()=>wl,ComponentSizeList:()=>pp});var Fw={"":1,px:1,pixel:1,pixels:1,"%":1,em:100,in:96,inch:96,inches:96,pt:1.333333333333,mm:3.7795296,millimeter:3.7795296,millimeters:3.7795296,cm:37.795296,centimeter:37.795296,centimeters:37.795296},wl=class extends re{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=r[r.length-1];if(a.componentType==="string"){let s=/([a-zA-z]+|%)$/,o=a.state.value.trim(),l=o.match(s);if(l){let u=l[1];if(u in Fw){let c=o.slice(0,l.index),p=r.slice(0,r.length-1);return c.length>0&&p.push({componentType:"string",state:{value:c}}),{success:!0,newChildren:[{componentType:"number",children:p},{componentType:"string",state:{value:u}}]}}}}return{success:!0,newChildren:[{componentType:"number",children:r}]}};return t.push({childrenRegex:/..+/,replacementFunction:e}),t}static returnChildGroups(){return[{group:"strings",componentTypes:["string"]},{group:"numbers",componentTypes:["number"]},{group:"componentSizes",componentTypes:["_componentSize"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.componentSize={public:!0,componentType:"_componentSize",returnDependencies:()=>({componentSizeChild:{dependencyType:"child",childGroups:["componentSizes"],variableNames:["componentSize"]},numberChild:{dependencyType:"child",childGroups:["numbers"],variableNames:["value"]},stringChild:{dependencyType:"child",childGroups:["strings"],variableNames:["value"]},parentDefaultAbsoluteSize:{dependencyType:"parentStateVariable",variableName:"defaultAbsoluteSize"}}),definition({dependencyValues:e}){let r=e.parentDefaultAbsoluteSize===void 0?!1:e.parentDefaultAbsoluteSize;if(e.stringChild.length===0)return e.numberChild.length===0?e.componentSizeChild.length===0?{useEssentialOrDefaultValue:{componentSize:{variablesToCheck:"componentSize",defaultValue:{size:100,isAbsolute:r}}}}:{newValues:{componentSize:e.componentSizeChild[0].stateValues.componentSize}}:{newValues:{componentSize:{size:e.numberChild[0].stateValues.value,isAbsolute:!0}}};{let a,s;if(e.numberChild.length>0)a=e.numberChild[0].stateValues.value,s=e.stringChild[0].stateValues.value.trim();else{let c=e.stringChild[0].stateValues.value.trim().match(/^(-?[\d.]+)\s*(.*)$/);if(c===null)return{newValues:{componentSize:null}};a=c[1],s=c[2].trim()}if(a=Number(a),!Number.isFinite(a))return{newValues:{componentSize:null}};let o=!(s==="%"||s==="em"),l=Fw[s];return l===void 0&&(l=1),{newValues:{componentSize:{size:l*a,isAbsolute:o}}}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r,stateValues:a}){if(r.stringChild.length===0)return r.numberChild.length===0?r.componentSizeChild.length===0?{success:!0,instructions:[{setStateVariable:"componentSize",value:e.componentSize}]}:{success:!0,instructions:[{setDependency:"componentSizeChild",desiredValue:e.componentSize,childIndex:0,variableIndex:0}]}:e.componentSize.isAbsolute?{success:!0,instructions:[{setDependency:"numberChild",desiredValue:e.componentSize.size,childIndex:0,variableIndex:0}]}:{success:!1};if(r.numberChild.length>0){let s=r.stringChild[0].stateValues.value.trim(),o=!(s==="%"||s==="em");if(e.componentSize.isAbsolute!==o)return{success:!1};let l=Fw[s];l===void 0&&(l=1);let u=e.componentSize.size/l;return{success:!0,instructions:[{setDependency:"numberChild",desiredValue:u,childIndex:0,variableIndex:0}]}}else{let s=e.componentSize.size;return e.componentSize.isAbsolute?s+="px":s+="%",{success:!0,instructions:[{setDependency:"stringChild",desiredValue:s,childIndex:0,variableIndex:0}]}}}},t.number={public:!0,componentType:"number",returnDependencies:()=>({componentSize:{dependencyType:"stateVariable",variableName:"componentSize"}}),definition({dependencyValues:e}){let r=null;return e.componentSize&&(r=e.componentSize.size),{newValues:{number:r}}},inverseDefinition({desiredStateVariableValues:e,dependencyValues:r}){if(!r.componentSize)return{success:!1};let a={size:e.number,isAbsolute:r.componentSize.isAbsolute};return{success:!0,instructions:[{setDependency:"componentSize",desiredValue:a}]}}},t.math=_d({numberVariableName:"number",mathVariableName:"math",isPublic:!0}),t.isAbsolute={public:!0,componentType:"boolean",returnDependencies:()=>({componentSize:{dependencyType:"stateVariable",variableName:"componentSize"}}),definition({dependencyValues:e}){let r=null;return e.componentSize&&(r=e.componentSize.isAbsolute),{newValues:{isAbsolute:r}}}},t.text={forRenderer:!0,returnDependencies:()=>({componentSize:{dependencyType:"stateVariable",variableName:"componentSize"}}),definition({dependencyValues:e}){let r="";return e.componentSize&&(r=e.componentSize.size,e.componentSize.isAbsolute?r+="px":r+="%"),{newValues:{text:r}}}},t}};T(wl,"componentType","_componentSize"),T(wl,"rendererType","text"),T(wl,"primaryStateVariableForDefinition","componentSize"),T(wl,"stateVariableForAttributeValue","componentSize"),T(wl,"adapters",["number","math"]);var pp=class extends Q{static returnSugarInstructions(){let t=super.returnSugarInstructions(),e=function({matchedChildren:r}){let a=[],s=[],o=function(){s.length>0&&(a.push({componentType:"_componentSize",children:s}),s=[])};for(let l of r)if(l.componentType==="string"){let u=l.state.value.split(/\s+/);u[0].length===0&&(o(),u=u.slice(1));for(let[c,p]of u.entries())p.length>0?(s.push({componentType:"string",state:{value:p}}),c<u.length-1&&o()):o()}else s.push(l);return o(),{success:!0,newChildren:a}};return t.push({replacementFunction:e}),t}static returnChildGroups(){return[{group:"componentSizes",componentTypes:["_componentSize"]},{group:"componentSizeLists",componentTypes:["_componentSizeList"]}]}static returnStateVariableDefinitions(){let t=super.returnStateVariableDefinitions();return t.overrideChildHide={returnDependencies:()=>({}),definition:()=>({newValues:{overrideChildHide:!0}})},t.nComponents={public:!0,componentType:"number",additionalStateVariablesDefined:["childIndexByArrayKey"],returnDependencies(){return{componentSizeListChildren:{dependencyType:"child",childGroups:["componentSizeLists"],variableNames:["nComponents"]},componentSizeAndComponentSizeListChildren:{dependencyType:"child",childGroups:["componentSizes","componentSizeLists"],skipComponentNames:!0}}},definition:function({dependencyValues:e,componentInfoObjects:r}){let a=0,s=[],o=0;for(let[l,u]of e.componentSizeAndComponentSizeListChildren.entries())if(r.isInheritedComponentType({inheritedComponentType:u.componentType,baseComponentType:"_componentSizeList"})){let c=e.componentSizeListChildren[o];o++;for(let p=0;p<c.stateValues.nComponents;p++)s[a+p]=[l,p];a+=c.stateValues.nComponents}else s[a]=[l,0],a+=1;return{newValues:{nComponents:a,childIndexByArrayKey:s},checkForActualChange:{nComponents:!0}}}},t.componentSizes={public:!0,componentType:"_componentSize",isArray:!0,entryPrefixes:["componentSize"],stateVariablesDeterminingDependencies:["childIndexByArrayKey"],returnArraySizeDependencies:()=>({nComponents:{dependencyType:"stateVariable",variableName:"nComponents"}}),returnArraySize({dependencyValues:e}){return[e.nComponents]},returnArrayDependenciesByKey({arrayKeys:e,stateValues:r}){let a={},s={childIndexByArrayKey:{dependencyType:"stateVariable",variableName:"childIndexByArrayKey"}};for(let o of e){let l=[],u="1";r.childIndexByArrayKey[o]&&(l=[r.childIndexByArrayKey[o][0]],u=r.childIndexByArrayKey[o][1]+1),a[o]={componentSizeAndComponentSizeListChildren:{dependencyType:"child",childGroups:["componentSizes","componentSizeLists"],variableNames:["componentSize","componentSize"+u],variablesOptional:!0,childIndices:l}}}return{globalDependencies:s,dependenciesByKey:a}},arrayDefinitionByKey({globalDependencyValues:e,dependencyValuesByKey:r,arrayKeys:a,componentInfoObjects:s}){let o={};for(let l of a){let u=r[l].componentSizeAndComponentSizeListChildren[0];if(u)if(s.isInheritedComponentType({inheritedComponentType:u.componentType,baseComponentType:"_componentSizeList"})){let c=e.childIndexByArrayKey[l][1]+1;o[l]=u.stateValues["componentSize"+c]}else o[l]=u.stateValues.componentSize}return{newValues:{componentSizes:o}}},inverseArrayDefinitionByKey({desiredStateVariableValues:e,globalDependencyValues:r,dependencyValuesByKey:a,dependencyNamesByKey:s,arraySize:o,componentInfoObjects:l}){let u=[];for(let c in e.componentSizes){if(!a[c])continue;let p=a[c].componentSizeAndComponentSizeListChildren[0];p&&(l.isInheritedComponentType({inheritedComponentType:p.componentType,baseComponentType:"_componentSizeList"})?u.push({setDependency:s[c].componentSizeAndComponentSizeListChildren,desiredValue:e.componentSizes[c],childIndex:0,variableIndex:1}):u.push({setDependency:s[c].componentSizeAndComponentSizeListChildren,desiredValue:e.componentSizes[c],childIndex:0,variableIndex:0}))}return{success:!0,instructions:u}}},t.nValues={isAlias:!0,targetVariableName:"nComponents"},t.values={isAlias:!0,targetVariableName:"componentSizes"},t}};T(pp,"componentType","_componentSizeList"),T(pp,"rendererType","asList"),T(pp,"renderChildren",!0),T(pp,"stateVariableForAttributeValue","componentSizes");var S0=[...Object.values(X0),...Object.values(J0),...Object.values(t2),...Object.values(o2),...Object.values(p2),...Object.values(O2),...Object.values(k2),...Object.values(M2),...Object.values(j2),...Object.values(z2),...Object.values(H2),...Object.values(K2),...Object.values(X2),...Object.values(Z2),...Object.values(Q2),...Object.values(eT),...Object.values(iT),...Object.values(nT),...Object.values(aT),...Object.values(sT),...Object.values(oT),...Object.values(lT),Oi,Xl,mr,Di,Yl,oo,hr,_i,rt,kn,Pi,na,ns,ia,lo,Qn,Zl,aa,Ql,Hp,Vi,sa,eu,tu,co,ru,ei,nu,qp,as,iu,fo,os,ho,ls,Kp,au,su,us,la,ua,lu,uu,cu,pu,Ri,nt,mu,ca,fu,Ic,el,tl,Yi,rl,nl,Oc,il,Dc,Pc,Xp,go,yo,bo,du,Yp,Zp,Jp,Qp,em,tm,rm,hu,nm,im,pa,yu,_c,al,kc,sl,Zi,cs,ol,Mc,zs,Ha,ll,jc,Kf,Xf,Yf,ul,cl,Bc,Qc,yl,bl,pd,ep,md,gl,rp,np,dd,ip,Tl,ap,hd,Nl,Ys,sp,Cl,op,lp,up,Sl,Al,cp,Q,re,ue,Qe,ut,Tn,Ee,po,mo,oa,Wp,Zn,Ei,Ir,Or,ta,...Object.values(Mw),gr,Qt,Ti,Jn];function pU(){let i={},t=new Set;for(let e of S0){let r=e.componentType;if(r.substring(0,1)!=="_"){if(r===void 0)throw Error("Cannot create component as componentType is undefined for class "+e);let a=r.toLowerCase();if(t.has(a))throw Error("component type "+r+" defined in two classes");if(!/[a-zA-Z]/.test(r.substring(0,1)))throw Error("Invalid component type "+r+". Component types must begin with a letter.");i[r]=e,t.add(a)}}return i}function mU(){let i={},t=new Set;for(let e of S0){let r=e.componentType;if(r===void 0)throw Error("Cannot create component as componentType is undefined for class "+e);let a=r.toLowerCase();if(t.has(a))throw Error("component type "+r+" defined in two classes");i[r]=e,t.add(a)}return i}function fU(){let i={},t=new Set;for(let e of S0)if(e.createsVariants){let r=e.componentType;if(r===void 0)throw Error("Cannot create component as componentType is undefined for class "+e);let a=r.toLowerCase();if(t.has(a))throw Error("component type "+r+" defined in two classes");i[r]=e,t.add(a)}return i}function dU(){let i={},t=new Set;for(let e of S0)if(e.createsVariants||e.setUpVariantIfVariantControlChild||e.setUpVariantUnlessAttributePrimitive||e.alwaysSetUpVariant){let r=e.componentType;if(r===void 0)throw Error("Cannot create component as componentType is undefined for class "+e);let a=r.toLowerCase();if(t.has(a))throw Error("component type "+r+" defined in two classes");i[r]=e,t.add(a)}return i}var A0=class{constructor(t){this.stack=[{}],t!==void 0&&Object.assign(this.parameters,t)}get parameters(){return this.stack[this.stack.length-1]}push(t,e=!0){let r={};e?(Object.assign(r,this.parameters),t!==void 0&&Object.assign(r,t)):r=t,this.stack.push(r)}pop(){let t=this.stack.pop();return this.stack.length===0&&(this.stack=[{}]),t}};var w0=class{constructor({maxIterationsRoot:t=80,maxIterationsMinimize:e=500,eps:r=1e-6}={}){this.maxIterationsRoot=t,this.maxIterationsMinimize=e,this.eps=r}fzero(t,e,r){var a,s,o,l,u,c,p,m,f,d,h,y,b,g,v,C,w,S,A,E,I=this.eps,V=this.maxIterationsRoot,O=0,k=0;if(Array.isArray(e)){if(e.length<2)throw new Error("fzero: length of array x0 has to be at least two.");a=e[0],l=t.call(r,a),k+=1,s=e[1],u=t.call(r,s),k+=1}else{for(a=e,l=t.call(r,a),k+=1,a===0?p=1:p=a,m=[.9*p,1.1*p,p-1,p+1,.5*p,1.5*p,-p,2*p,-10*p,10*p],d=m.length,f=0;f<d&&(s=m[f],u=t.call(r,s),k+=1,!(l*u<=0));f++);s<a&&(h=a,a=s,s=h,y=l,l=u,u=y)}if(l*u>0)return Array.isArray(e)?this.fminbr(t,[a,s],r).x:this.Newton(t,a,r);for(o=a,c=l;O<V;){if(b=s-a,Math.abs(c)<Math.abs(u)&&(a=s,s=o,o=a,l=u,u=c,c=l),w=2*I*Math.abs(s)+I*.5,E=(o-s)*.5,Math.abs(E)<=w&&Math.abs(u)<=I)return s;Math.abs(b)>=w&&Math.abs(l)>Math.abs(u)&&(v=o-s,a===o?(g=u/l,S=v*g,A=1-g):(A=l/c,g=u/c,C=u/l,S=C*(v*A*(A-g)-(s-a)*(g-1)),A=(A-1)*(g-1)*(C-1)),S>0?A=-A:S=-S,S<.75*v*A-Math.abs(w*A)*.5&&S<Math.abs(b*A*.5)&&(E=S/A)),Math.abs(E)<w&&(E>0?E=w:E=-w),a=s,l=u,s+=E,u=t.call(r,s),k+=1,(u>0&&c>0||u<0&&c<0)&&(o=a,c=l),O++}return s}fminbr(t,e,r,a){let s=a!==void 0?a:this.eps;var o,l,u,c,p,m,f,d,h,y,b,g,v,C,w,S,A=(3-Math.sqrt(5))*.5,E=s,I=s,V=this.maxIterationsMinimize,O=0,k=0;if(!Array.isArray(e)||e.length<2)throw new Error("Numerics.fminbr: length of array x0 has to be at least two.");if(o=e[0],l=e[1],c=o+A*(l-o),f=t.call(r,c),Number.isNaN(f))return{success:!1};for(k+=1,u=c,p=c,m=f,d=f;O<V;){if(h=l-o,y=(o+l)*.5,b=I*Math.abs(u)+E/3,Math.abs(u-y)+h*.5<=2*b)return{success:!0,x:u,fx:m,tol:b};if(g=A*(u<y?l-u:o-u),Math.abs(u-p)>=b&&(w=(u-p)*(m-f),C=(u-c)*(m-d),v=(u-c)*C-(u-p)*w,C=2*(C-w),C>0?v=-v:C=-C,Math.abs(v)<Math.abs(g*C)&&v>C*(o-u+2*b)&&v<C*(l-u-2*b)&&(g=v/C)),Math.abs(g)<b&&(g>0?g=b:g=-b),w=u+g,S=t.call(r,w),Number.isNaN(S))return{success:!1};k+=1,S<=m?(w<u?l=u:o=u,c=p,p=u,u=w,f=d,d=m,m=S):(w<u?o=w:l=w,S<=d||p===u?(c=p,p=w,f=d,d=S):(S<=f||c===u||c===p)&&(c=w,f=S)),O+=1}return{success:!1,x:u,fx:m}}Newton(t,e,r){var a,s=0,o=this.eps,l=t.apply(r,[e]),u=1;for(Array.isArray(e)&&(e=e[0]);s<50&&Math.abs(l)>o;)a=this.D(t,r)(e),u+=2,Math.abs(a)>o?e-=l/a:e+=Math.random()*.2-1,l=t.apply(r,[e]),u+=1,s+=1;return e}D(t,e){return e!=null?function(r){var a=1e-5,s=a*2;return(t(r+a)-t(r-a))/s}:function(r){var a=1e-5,s=a*2;return(t.apply(e,[r+a])-t.apply(e,[r-a]))/s}}};function $2e(i,t,e){let r=e&&e.state;r&&(typeof r=="object"&&t.copy(r,t),i.state=()=>t.copy(t,{}))}function hU(i,t){let e=new yU(i),r=()=>e.next();return r.double=()=>r()+(r()*2097152|0)*11102230246251565e-32,r.int32=()=>e.next()*4294967296|0,r.quick=r,$2e(r,e,t),r}var yU=class{constructor(t){t==null&&(t=+new Date);let e=4022871197;this.c=1,this.s0=r(" "),this.s1=r(" "),this.s2=r(" "),this.s0-=r(t),this.s0<0&&(this.s0+=1),this.s1-=r(t),this.s1<0&&(this.s1+=1),this.s2-=r(t),this.s2<0&&(this.s2+=1);function r(a){a=String(a);for(let s=0;s<a.length;s++){e+=a.charCodeAt(s);let o=.02519603282416938*e;e=o>>>0,o-=e,o*=e,e=o>>>0,o-=e,e+=o*4294967296}return(e>>>0)*23283064365386963e-26}}next(){let{c:t,s0:e,s1:r,s2:a}=this,s=2091639*e+t*23283064365386963e-26;return this.s0=r,this.s1=a,this.s2=s-(this.c=s|0)}copy(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}};import K2e from"math-expressions";function jw({ancestor:i,descendantTypes:t,recurseToMatchedChildren:e=!0,useReplacementsForComposites:r=!1,includeNonActiveChildren:a=!1,skipOverAdapters:s=!1,ignoreReplacementsOfMatchedComposites:o=!1,init:l=!0,componentInfoObjects:u}){let c=d=>t.some(h=>u.isInheritedComponentType({inheritedComponentType:d.componentType,baseComponentType:h})),p=[];if(r&&u.isInheritedComponentType({inheritedComponentType:i.componentType,baseComponentType:"_composite"}))l&&p.push(...Bw({composite:i,componentInfoObjects:u,includeComposites:a}));else for(let d of i.allChildrenOrdered){let h=i.allChildren[d],y,b=!1,g=!1;if(h)y=h.component,y.adaptedFrom&&(g=!0),i.activeChildren.includes(y)&&(b=!0);else for(let v of i.activeChildren)if(v.placeholderInd===d){y=v,b=!0,typeof d=="string"&&d.substring(d.length-5,d.length)==="adapt"&&(g=!0);break}else if(v.adaptedFrom&&achild.adaptedFrom.placeholderInd===d){y=v.adaptedFrom;break}y&&(g&&s?p.includes(y.adaptedFrom)||p.push(y.adaptedFrom):(b||a)&&p.push(y))}if(o){let d=[];for(let h of p)c(h)&&u.isInheritedComponentType({inheritedComponentType:h.componentType,baseComponentType:"_composite"})&&(d=[...d,...Bw({composite:h,componentInfoObjects:u,includeComposites:!0}).map(b=>b.componentName?b.componentName:b.placeholderInd)]);d.length>0&&(p=p.filter(h=>!(d.includes(h.componentName)||d.includes(h.placeholderInd))))}let m=[],f=[];for(let d of p){let h=c(d);if(h&&m.push({componentName:d.componentName?d.componentName:d.placeholderInd,componentType:d.componentType}),(!h||e)&&d.placeholderInd===void 0){let y=jw({ancestor:d,descendantTypes:t,recurseToMatchedChildren:e,useReplacementsForComposites:r,includeNonActiveChildren:a,skipOverAdapters:s,ignoreReplacementsOfMatchedComposites:o,init:!1,componentInfoObjects:u});m.push(...y)}}return o&&(m=m.filter(d=>!f.includes(d))),m}function Bw({composite:i,includeComposites:t=!1,componentInfoObjects:e}){let r=[];if(i.replacements){let a;if(i.replacementsToWithhold){let s=i.replacements.length-i.replacementsToWithhold;a=i.replacements.slice(0,s)}else a=i.replacements;for(let s of a)e.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:"_composite"})?(t&&r.push(s),r.push(...Bw({composite:s,componentInfoObjects:e,includeComposites:t}))):r.push(s)}return r}function mp(i,t){if(i.ancestors===void 0||i.ancestors.length===0)return[];let e=[i.ancestors[0].componentName],r=t[i.ancestors[0].componentName];if(r&&e.push(...mp(r,t)),i.replacementOf){e.push(i.replacementOf.componentName);let a=mp(i.replacementOf,t);for(let s of a)e.includes(s)||e.push(s)}return e}var Xe=[],Lw=class{constructor({_components:t,componentInfoObjects:e,core:r}){this.upstreamDependencies={},this.downstreamDependencies={},this.switchDependencies={},this.circularCheckPassed={},this.circularResolveBlockedCheckPassed={},this.dependencyTypes={},Xe.forEach(a=>this.dependencyTypes[a.dependencyType]=a),this.core=r,this._components=t,this.componentInfoObjects=e,this.updateTriggers={descendantDependenciesByAncestor:{},ancestorDependenciesByPotentialAncestor:{},replacementDependenciesByComposite:{},childDependenciesByParent:{},parentDependenciesByParent:{},dependenciesMissingComponentBySpecifiedName:{},dependenciesBasedOnDependenciesOfStateVariables:{}},this.resolveBlockers={neededToResolve:{},resolveBlockedBy:{}}}setUpComponentDependencies(t){this.downstreamDependencies[t.componentName]&&this.deleteAllDownstreamDependencies({component:t}),this.downstreamDependencies[t.componentName]={},this.upstreamDependencies[t.componentName]||(this.upstreamDependencies[t.componentName]={});let e=[],r=[];for(let a in t.state)t.state[a].isArrayEntry||t.state[a].isAlias||r.includes(a)||(e.push(a),t.state[a].additionalStateVariablesDefined&&r.push(...t.state[a].additionalStateVariablesDefined));for(let a of e){let s=[a];t.state[a].additionalStateVariablesDefined&&s.push(...t.state[a].additionalStateVariablesDefined),this.setUpStateVariableDependencies({component:t,stateVariable:a,allStateVariablesAffected:s})}}setUpStateVariableDependencies({component:t,stateVariable:e,allStateVariablesAffected:r}){let a=t.state[e],s;a.stateVariablesDeterminingDependencies||a.determineIfShadowData?(s={},a.stateVariablesDeterminingDependencies&&(s.__determine_dependencies={dependencyType:"determineDependencies",variableNames:a.stateVariablesDeterminingDependencies}),a.determineIfShadowData&&(s.__determine_dependencies_shadow_data={dependencyType:"determineDependencies",componentName:a.determineIfShadowData.targetComponent.componentName,variableNames:r},a.determineIfShadowData.arraySizeStateVariableToResolve&&(s.__determine_dependencies_shadow_data_array_size={dependencyType:"determineDependencies",variableNames:[a.determineIfShadowData.arraySizeStateVariableToResolve]}))):s=a.returnDependencies({componentInfoObjects:this.componentInfoObjects,sharedParameters:t.sharedParameters});for(let o in s){let l=s[o];if(!(l.dependencyType in this.dependencyTypes))throw Error(`Unrecognized dependency type ${l.dependencyType} for ${o} of ${e} of ${t.componentName}`);new this.dependencyTypes[l.dependencyType]({component:t,stateVariable:e,allStateVariablesAffected:r,dependencyName:o,dependencyDefinition:l,dependencyHandler:this,expandComposites:!1,forceExpandComposites:!1}).checkForCircular()}}deleteAllDownstreamDependencies({component:t,stateVariables:e="__all__"}){let r=t.componentName,a;e==="__all__"?a=Object.keys(this.downstreamDependencies[r]):a=e;for(let s of a){let o=this.downstreamDependencies[r][s];for(let l in o)o[l].deleteDependency();delete this.downstreamDependencies[r][s]}Object.keys(this.downstreamDependencies[r]).length===0&&!this.components[r]&&delete this.downstreamDependencies[r]}deleteAllUpstreamDependencies({component:t,stateVariables:e="__all__",completelyDelete:r=!1}){let a=t.componentName,s;e==="__all__"?s=Object.keys(this.upstreamDependencies[a]):s=e;for(let o of s){if(this.upstreamDependencies[a][o])for(let l of[...this.upstreamDependencies[a][o]])if(r){for(let u of l.upstreamVariableNames)this._components[l.upstreamComponentName].state[u].initiallyResolved&&this.core.recordActualChangeInStateVariable({componentName:l.upstreamComponentName,varName:u});l.deleteDependency()}else l.removeDownstreamComponent({indexToRemove:l.downstreamComponentNames.indexOf(a)}),l.onDownstreamComponentChange();delete this.upstreamDependencies[a][o]}Object.keys(this.upstreamDependencies[a]).length===0&&!this._components[a]&&delete this.upstreamDependencies[a]}addBlockersFromChangedStateVariableDependencies({componentName:t,stateVariables:e}){let r=this.updateTriggers.dependenciesBasedOnDependenciesOfStateVariables[t];if(r)for(let a of e){let s=r[a];if(s)for(let o of s)if(o.gettingValue){let l=o.varsWithUpdatedDeps[t];l||(l=o.varsWithUpdatedDeps[t]=[]),l.includes(a)||l.push(a)}else for(let l of o.upstreamVariableNames)this.addBlocker({blockerComponentName:o.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:l,blockerDependency:o.dependencyName,componentNameBlocked:o.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:l})}}addBlockersFromChangedActiveChildren({parent:t}){if(this.collateCountersAndPropagateToAncestors(t),this.updateTriggers.childDependenciesByParent[t.componentName])for(let e of this.updateTriggers.childDependenciesByParent[t.componentName]){for(let r of e.upstreamVariableNames)this.addBlocker({blockerComponentName:e.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:e.dependencyName,componentNameBlocked:e.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});this.addBlockersFromChangedStateVariableDependencies({componentName:e.upstreamComponentName,stateVariables:e.upstreamVariableNames})}if(t.ancestors){if(this.updateTriggers.parentDependenciesByParent[t.componentName])for(let e of this.updateTriggers.parentDependenciesByParent[t.componentName]){for(let r of e.upstreamVariableNames)this.addBlocker({blockerComponentName:e.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:e.dependencyName,componentNameBlocked:e.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});this.addBlockersFromChangedStateVariableDependencies({componentName:e.upstreamComponentName,stateVariables:e.upstreamVariableNames})}for(let e of[t.componentName,...mp(t,this.components)])this.addDescendantBlockersToAncestor(e);if(this.updateTriggers.ancestorDependenciesByPotentialAncestor[t.componentName])for(let e of this.updateTriggers.ancestorDependenciesByPotentialAncestor[t.componentName]){for(let r of e.upstreamVariableNames)this.addBlocker({blockerComponentName:e.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:e.dependencyName,componentNameBlocked:e.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});this.addBlockersFromChangedStateVariableDependencies({componentName:e.upstreamComponentName,stateVariables:e.upstreamVariableNames})}}}resolveBlockersFromChangedActiveChildren(t,e=!1){if(this.collateCountersAndPropagateToAncestors(t),this.updateTriggers.childDependenciesByParent[t.componentName])for(let r of this.updateTriggers.childDependenciesByParent[t.componentName])this.resolveIfReady({componentName:r.upstreamComponentName,type:"recalculateDownstreamComponents",stateVariable:r.representativeStateVariable,dependency:r.dependencyName,force:e});if(t.ancestors){if(this.updateTriggers.parentDependenciesByParent[t.componentName])for(let r of this.updateTriggers.parentDependenciesByParent[t.componentName])this.resolveIfReady({componentName:r.upstreamComponentName,type:"recalculateDownstreamComponents",stateVariable:r.representativeStateVariable,dependency:r.dependencyName,force:e});for(let r of[t.componentName,...mp(t,this.components)])this.resolveDescendantBlockersToAncestor(r,e);if(this.updateTriggers.ancestorDependenciesByPotentialAncestor[t.componentName])for(let r of this.updateTriggers.ancestorDependenciesByPotentialAncestor[t.componentName])this.resolveIfReady({componentName:r.upstreamComponentName,type:"recalculateDownstreamComponents",stateVariable:r.representativeStateVariable,dependency:r.dependencyName,force:e})}}addDescendantBlockersToAncestor(t){if(this.updateTriggers.descendantDependenciesByAncestor[t])for(let e of this.updateTriggers.descendantDependenciesByAncestor[t]){for(let r of e.upstreamVariableNames)this.addBlocker({blockerComponentName:e.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:e.dependencyName,componentNameBlocked:e.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});this.addBlockersFromChangedStateVariableDependencies({componentName:e.upstreamComponentName,stateVariables:e.upstreamVariableNames})}}resolveDescendantBlockersToAncestor(t,e=!1){if(this.updateTriggers.descendantDependenciesByAncestor[t])for(let r of this.updateTriggers.descendantDependenciesByAncestor[t])this.resolveIfReady({componentName:r.upstreamComponentName,type:"recalculateDownstreamComponents",stateVariable:r.representativeStateVariable,dependency:r.dependencyName,force:e})}addBlockersFromChangedReplacements(t){if(this.updateTriggers.replacementDependenciesByComposite[t.componentName])for(let e of this.updateTriggers.replacementDependenciesByComposite[t.componentName])for(let r of e.upstreamVariableNames)this.addBlocker({blockerComponentName:e.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:e.dependencyName,componentNameBlocked:e.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});for(let e of[t.componentName,...mp(t,this.components)])this.addDescendantBlockersToAncestor(e)}checkForCircularDependency({componentName:t,varName:e,previouslyVisited:r=[]}){let a=t+":"+e;if(r.includes(a)){console.log("found circular",a,r);let s=/^(.*):/,o=r.map(c=>c.match(s)[1]),l=o.filter(c=>c.slice(0,2)!=="__").reduce((c,p)=>c.includes(p)?c:[...c,p],[]);l.length===0&&(l=[o[0]]);let u;throw l.length===1?u=l[0]:l.length===2?u=l.join(" and "):(l[l.length-2]=l.slice(l.length-2).join(", and "),l.pop(),u=l.join(", ")),Error(`Circular dependency involving ${u}`)}else r=[...r,a];if(!this.circularCheckPassed[a]&&(this.circularCheckPassed[a]=!0,t in this.downstreamDependencies)){let s=this.downstreamDependencies[t][e];for(let o in s){let l=s[o],u=l.downstreamComponentNames;if(!u)continue;let c=l.mappedDownstreamVariableNamesByComponent;if(!!c)for(let[p,m]of u.entries()){let f=c[p];for(let d of f)this.checkForCircularDependency({componentName:m,varName:d,previouslyVisited:r})}}}}resetCircularCheckPassed(t,e){let r=t+":"+e;if(this.circularCheckPassed[r]){delete this.circularCheckPassed[r];let a=this.upstreamDependencies[t][e];if(a)for(let s of a)for(let o of s.upstreamVariableNames)o!=="__identity"&&this.resetCircularCheckPassed(s.upstreamComponentName,o)}}updateDependencies({componentName:t,stateVariable:e,dependency:r}){let a=this._components[t],s=a.state[e],o=[e];if(s.additionalStateVariablesDefined&&o.push(...s.additionalStateVariablesDefined),s.determineIfShadowData){if(s.isArrayEntry){let g=s.arrayStateVariable;return a.state[g].determineIfShadowData&&!this.updateDependencies({componentName:t,stateVariable:g,dependency:"__determine_dependencies_shadow_data"}).success?{success:!1}:(delete s.determineIfShadowData,this.updateDependencies({componentName:t,stateVariable:e,dependency:r}))}let f=s.determineIfShadowData;delete s.determineIfShadowData;let d=[],h=[],y=!0;for(let g of o){let v=f.targetComponent.state[g],C=v.isResolved;if(C||(C=this.resolveItem({componentName:f.targetComponent.componentName,type:"stateVariable",stateVariable:g}).success),C)v.value,v.essential||v.alwaysShadow||v.isShadow||v.isArray&&v.getAllArrayKeys(v.arraySize).length>0&&v.getAllArrayKeys(v.arraySize).some(w=>v.essentialByArrayKey[w])?d.push(g):h.push(g);else{y=!1;for(let w of o)this.addBlocker({blockerComponentName:f.targetComponent.componentName,blockerType:"stateVariable",blockerStateVariable:g,componentNameBlocked:t,typeBlocked:"determineDependencies",stateVariableBlocked:w,dependencyBlocked:r})}}if(!y)return{success:!1};let b=!0;if(d.length>0){this.core.modifyStateDefsToBeShadows({stateVariablesToShadow:d,stateVariableDefinitions:a.state,foundReadyToExpandWhenResolved:f.foundReadyToExpandWhenResolved,targetComponent:f.targetComponent});for(let g of d)this.updateDependencies({componentName:t,stateVariable:g,dependency:r}).success||(b=!1)}return h.length>0&&(this.updateDependencies({componentName:t,stateVariable:h[0],dependency:r}).success||(b=!1)),{success:b}}let l=this.downstreamDependencies[t][e].__determine_dependencies,u;if(l){let f=!0;if(l.originalDownstreamVariableNames.length>0)for(let[d,h]of l.downstreamComponentNames.entries()){let y=this._components[h];for(let b of l.mappedDownstreamVariableNamesByComponent[d]){let g=y.state[b].isResolved;if(g||(g=this.resolveItem({componentName:h,type:"stateVariable",stateVariable:b}).success),!g){f=!1;for(let v of o)this.addBlocker({blockerComponentName:h,blockerType:"stateVariable",blockerStateVariable:b,componentNameBlocked:t,typeBlocked:"determineDependencies",stateVariableBlocked:v,dependencyBlocked:r})}}}if(f)u=l.getValue();else return{success:!1}}else u={changes:{},value:{stateValues:{}}};if(Object.keys(u.changes).length===0&&s._previousValue!==void 0)return{success:!0};let c={stateValues:Object.assign({},u.value.stateValues),componentInfoObjects:this.componentInfoObjects,sharedParameters:a.sharedParameters},p=s.returnDependencies(c);s.stateVariablesDeterminingDependencies&&(p.__determine_dependencies={dependencyType:"determineDependencies",variableNames:s.stateVariablesDeterminingDependencies});let m=this.replaceDependenciesIfChanged({component:a,stateVariable:e,newDependencies:p,allStateVariablesAffected:o});if(!(m.changedDependency||c.changedDependency))return{success:!0};for(let f of m.newlyCreatedDependencies)f.checkForCircular();for(let f of o)this.checkForCircularDependency({componentName:a.componentName,varName:f}),a.state[f].forceRecalculation=!0;s.initiallyResolved&&this.core.markStateVariableAndUpstreamDependentsStale({component:a,varName:e});for(let f of o)a.state[f].initiallyResolved&&this.recordActualChangeInUpstreamDependencies({component:a,varName:f});return this.addBlockersFromChangedStateVariableDependencies({componentName:t,stateVariables:o}),{success:!0}}replaceDependenciesIfChanged({component:t,stateVariable:e,newDependencies:r,allStateVariablesAffected:a}){let s=this.downstreamDependencies[t.componentName][e],o=!1,l=[];for(let u in s)u in r||(o=!0,s[u].deleteDependency());for(let u in r)if(u in s){let c=r[u],p=s[u];if(!rn(c,p.definition)){o=!0,s[u].deleteDependency();let m=r[u],f=new this.dependencyTypes[m.dependencyType]({component:t,stateVariable:e,allStateVariablesAffected:a,dependencyName:u,dependencyDefinition:m,dependencyHandler:this});l.push(f)}}else{o=!0;let c=r[u],p=new this.dependencyTypes[c.dependencyType]({component:t,stateVariable:e,allStateVariablesAffected:a,dependencyName:u,dependencyDefinition:c,dependencyHandler:this});l.push(p)}return{changedDependency:o,newlyCreatedDependencies:l}}checkForDependenciesOnNewComponent(t){let e=[],r={};if(this.updateTriggers.dependenciesMissingComponentBySpecifiedName[t]){for(let a of this.updateTriggers.dependenciesMissingComponentBySpecifiedName[t]){let s=this._components[a.upstreamComponentName];if(!s)continue;let o=!0;for(let u of a.upstreamVariableNames)if(!(u in s.state)){o=!1;break}if(!o)continue;for(let u of a.upstreamVariableNames)s.state[u].initiallyResolved&&(r[a.upstreamComponentName]&&r[a.upstreamComponentName][u]||e.push({componentName:a.upstreamComponentName,varName:u}));for(let u of a.upstreamVariableNames)this.deleteFromNeededToResolve({componentNameBlocked:a.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:u,dependencyBlocked:a.dependencyName,blockerComponentName:t,blockerType:"componentIdentity"});if(this.resolveIfReady({componentName:a.upstreamComponentName,type:"recalculateDownstreamComponents",stateVariable:a.representativeStateVariable,dependency:a.dependencyName,expandComposites:!1,recurseUpstream:!0}).success)for(let u of a.upstreamVariableNames)s.state[u].initiallyResolved||(r[a.upstreamComponentName]||(r[a.upstreamComponentName]={}),r[a.upstreamComponentName][u]=!0);else for(let u of a.upstreamVariableNames)this.addBlocker({blockerComponentName:a.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:u,blockerDependency:a.dependencyName,componentNameBlocked:a.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:u})}delete this.updateTriggers.dependenciesMissingComponentBySpecifiedName[t]}return e}getStateVariableDependencyValues({component:t,stateVariable:e}){let r={},a={},s={},o=this.downstreamDependencies[t.componentName][e];for(let l in o){let{value:u,changes:c,usedDefault:p}=o[l].getValue();r[l]=u,Object.keys(c).length>0&&(a[l]=c),p&&(s[l]=p)}return{dependencyValues:r,changes:a,usedDefault:s}}recordActualChangeInUpstreamDependencies({component:t,varName:e,changes:r}){let a=t.componentName,s=this.upstreamDependencies[a][e];if(s){for(let o of s)if(o.valuesChanged){let l=o.downstreamComponentNames.indexOf(a),u=o.valuesChanged[l][e];if(!u&&t.stateVarAliases)for(let c in t.stateVarAliases)t.stateVarAliases[c]===e&&c in upValuesChangedSub&&(u=upValuesChangedSub[c]);if(!u){if(!t.state[e].isArrayEntry)throw Error(`Something is wrong, as a variable ${e} of ${t.componentName} actually changed, but wasn't marked with a potential change`);u=upValuesChangedSub[e]={changed:{}}}t.state[e]&&t.state[e].isArray?(u.changed===void 0?u.changed={arrayKeysChanged:{}}:u.changed===!0&&(u.changed={allArrayKeysChanged:!0,arraySizeChanged:!0,arrayKeysChanged:{}}),r&&(r.allArrayKeysChanged&&(u.changed.allArrayKeysChanged=!0),r.arraySizeChanged&&(u.changed.arraySizeChanged=!0),Object.assign(u.changed.arrayKeysChanged,r.arrayKeysChanged))):u.changed=!0}}}collateCountersAndPropagateToAncestors(t){let e=Object.keys(t.counters);for(let o of t.allChildrenOrdered){let l=this._components[o];if(l)for(let u in l.counters)e.includes(u)||e.push(u)}let r=!1;for(let o of e){let l=t.counters[o];l||(l=t.counters[o]={dependencies:[],componentList:[]});let u=[];l.dependencies.length>0&&u.push(t.componentName);for(let c of t.allChildrenOrdered){let p=this._components[c];if(p){let m=p.counters[o];m&&u.push(...m.componentList)}}(u.length!==l.componentList.length||l.componentList.some((c,p)=>c!=u[p]))&&(r=!0,l.componentList=u)}if(!r)return{foundChange:!1};if(!t.ancestors[0]){for(let o of e){let l=t.counters[o];for(let[u,c]of l.componentList.entries()){let p=this._components[c],m=p.counters[o];m.value=u+1;for(let f of m.dependencies)if(p.state[f.representativeStateVariable].initiallyResolved){this.core.markStateVariableAndUpstreamDependentsStale({component:p,varName:f.representativeStateVariable});for(let d of f.upstreamVariableNames)p.state[d].forceRecalculation=!0,this.recordActualChangeInUpstreamDependencies({component:p,varName:d})}}}return{foundChange:!0,finishedPropagation:!0}}let a=this._components[t.ancestors[0].componentName];if(!(a&&a.allChildrenOrdered.includes(t.componentName)))return{foundChange:!0,finishedPropagation:!1};let s=this.collateCountersAndPropagateToAncestors(a);return s.foundChange||console.error(`we found a change in propagating counters for ${t.componentName}, but no change for ancestors!`),{foundChange:!0,finishedPropagation:s.finishedPropagation}}getNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a}){let s=this.resolveBlockers.neededToResolve[t];s||(s=this.resolveBlockers.neededToResolve[t]={});let o=s[e];if(o||(o=s[e]={}),r){let l=o;if(o=l[r],o||(o=l[r]={}),a){let u=o;o=u[a],o||(o=u[a]={})}}return o}deleteFromNeededToResolve({componentNameBlocked:t,typeBlocked:e,stateVariableBlocked:r,dependencyBlocked:a,blockerType:s,blockerCode:o,deleteFromReciprocal:l=!0}){let u=t;r&&(u+="|"+r,a&&(u+="|"+a));let c=function(m){if(s){if(m[s])if(o){let f=m[s].indexOf(o);if(f!==-1&&m[s].splice(f,1),m[s].length===0&&delete m[s],l){let[d,h,y]=o.split("|");this.deleteFromResolveBlockedBy({blockerComponentName:d,blockerType:s,blockerStateVariable:h,blockerDependency:y,typeBlocked:e,codeBlocked:u,deleteFromReciprocal:!1})}}else{if(l)for(let f of m[s]){let[d,h,y]=f.split("|");this.deleteFromResolveBlockedBy({blockerComponentName:d,blockerType:s,blockerStateVariable:h,blockerDependency:y,typeBlocked:e,codeBlocked:u,deleteFromReciprocal:!1})}delete m[s]}}else if(l)for(let f in m)for(let d of m[f]){let[h,y,b]=d.split("|");this.deleteFromResolveBlockedBy({blockerComponentName:h,blockerType:f,blockerStateVariable:y,blockerDependency:b,typeBlocked:e,codeBlocked:u,deleteFromReciprocal:!1})}}.bind(this),p=this.resolveBlockers.neededToResolve[t];if(p){let m=p[e];if(m)if(r){let f=m[r];if(f)if(a){let d=f[a];d&&(c(d),(!s||Object.keys(d).length===0)&&delete f[a]),Object.keys(f).length===0&&delete m[r]}else c(f),(!s||Object.keys(f).length===0)&&delete m[r];Object.keys(m).length===0&&delete p[e]}else c(m),(!s||Object.keys(m).length===0)&&delete p[e];Object.keys(p).length===0&&delete this.resolveBlockers.neededToResolve[t]}}checkIfHaveNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a}){let s=this.resolveBlockers.neededToResolve[t];if(!s)return!1;let o=s[e];return!o||r&&(o=o[r],!o||a&&(o=o[a],!o))?!1:Object.keys(o).length>0}getResolveBlockedBy({componentName:t,type:e,stateVariable:r,dependency:a}){let s=this.resolveBlockers.resolveBlockedBy[t];s||(s=this.resolveBlockers.resolveBlockedBy[t]={});let o=s[e];if(o||(o=s[e]={}),r){let l=o;if(o=l[r],o||(o=l[r]={}),a){let u=o;o=u[a],o||(o=u[a]={})}}return o}deleteFromResolveBlockedBy({blockerComponentName:t,blockerType:e,blockerStateVariable:r,blockerDependency:a,typeBlocked:s,codeBlocked:o,deleteFromReciprocal:l=!0}){let u=t;r&&(u+="|"+r,a&&(u+="|"+a));let c=function(m){if(s){if(m[s])if(o){let f=m[s].indexOf(o);if(f!==-1&&m[s].splice(f,1),m[s].length===0&&delete m[s],l){let[d,h,y]=o.split("|");this.deleteFromNeededToResolve({componentNameBlocked:d,typeBlocked:s,stateVariableBlocked:h,dependencyBlocked:y,blockerType:e,blockerCode:u,deleteFromReciprocal:!1})}}else{if(l)for(let f of m[s]){let[d,h,y]=f.split("|");this.deleteFromNeededToResolve({componentNameBlocked:d,typeBlocked:s,stateVariableBlocked:h,dependencyBlocked:y,blockerType:e,blockerCode:u,deleteFromReciprocal:!1})}delete m[s]}}else if(l)for(let f in m)for(let d of m[f]){let[h,y,b]=d.split("|");this.deleteFromNeededToResolve({componentNameBlocked:h,typeBlocked:f,stateVariableBlocked:y,dependencyBlocked:b,blockerType:e,blockerCode:u,deleteFromReciprocal:!1})}}.bind(this),p=this.resolveBlockers.resolveBlockedBy[t];if(p){let m=p[e];if(m)if(r){let f=m[r];if(f)if(a){let d=f[a];d&&(c(d),(!s||Object.keys(d).length===0)&&delete f[a]),Object.keys(f).length===0&&delete m[r]}else c(f),(!s||Object.keys(f).length===0)&&delete m[r];Object.keys(m).length===0&&delete p[e]}else c(m),(!s||Object.keys(m).length===0)&&delete p[e];Object.keys(p).length===0&&delete this.resolveBlockers.resolveBlockedBy[t]}}addBlocker({blockerComponentName:t,blockerType:e,blockerStateVariable:r,blockerDependency:a,componentNameBlocked:s,typeBlocked:o,stateVariableBlocked:l,dependencyBlocked:u}){let c=t;r&&(c+="|"+r,a&&(c+="|"+a));let p=s;l&&(p+="|"+l,u&&(p+="|"+u));let m=this.getNeededToResolve({componentName:s,type:o,stateVariable:l,dependency:u}),f=m[e];if(f||(f=m[e]=[]),f.includes(c))return;if(f.push(c),o==="stateVariable"){let y=this._components[s];if(y){let b=y.state[l];if(b.isResolved=!1,b.initiallyResolved){this.core.markStateVariableAndUpstreamDependentsStale({component:y,varName:l});let g=this.upstreamDependencies[s][l];if(g){for(let v of g)if(this._components[v.upstreamComponentName])for(let C of v.upstreamVariableNames)this.addBlocker({blockerComponentName:s,blockerType:"stateVariable",blockerStateVariable:l,componentNameBlocked:v.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:C})}}}}let d=this.getResolveBlockedBy({componentName:t,type:e,stateVariable:r,dependency:a}),h=d[o];h||(h=d[o]=[]),h.includes(p)||h.push(p),this.resetCircularResolveBlockerCheckPassed({componentName:s,type:o,stateVariable:l,dependency:u}),this.checkForCircularResolveBlocker({componentName:s,type:o,stateVariable:l,dependency:u})}processNewlyResolved({componentNameNewlyResolved:t,typeNewlyResolved:e,stateVariableNewlyResolved:r,dependencyNewlyResolved:a,expandComposites:s=!0,force:o=!1,recurseUpstream:l=!1}){if(e==="stateVariable"){let c=this._components[t];c&&c.state[r]&&(c.state[r].isResolved=!0,c.state[r].initiallyResolved=!0)}else if(e==="componentIdentity"){if(!(t in this._components||o))return{success:!1}}else if(e==="recalculateDownstreamComponents"){let c;try{c=this.downstreamDependencies[t][r][a]}catch(p){}if(c){let p=c.recalculateDownstreamComponents({force:o});if(!(p.success||o))return p;for(let m of c.upstreamVariableNames)this.deleteFromNeededToResolve({componentNameBlocked:c.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:m,blockerType:"recalculateDownstreamComponents",blockerCode:c.upstreamComponentName+"|"+m+"|"+a});for(let m of c.upstreamVariableNames)this.resolveIfReady({componentName:c.upstreamComponentName,type:"stateVariable",stateVariable:m,expandComposites:s,force:o,recurseUpstream:l});return{success:!0}}}else if(e==="determineDependencies"){let c;try{c=this.downstreamDependencies[t][r][a]}catch(p){}if(c){let p=this.getNeededToResolve({componentName:t,type:"stateVariable",stateVariable:r}),m=!1,f=[];if(p.determineDependencies)for(let h of p.determineDependencies){let[y,b,g]=h.split("|");if(this.checkIfHaveNeededToResolve({componentName:t,type:"determineDependency",stateVariable:r,dependency:g})){m=!0;break}f.push(g)}if(m)return{success:!0};if(!this.updateDependencies({componentName:t,stateVariable:r,dependency:a}).success)return{success:!1};for(let h of c.upstreamVariableNames){for(let y of f)this.deleteFromResolveBlockedBy({blockerComponentName:c.upstreamComponentName,blockerType:"determineDependencies",blockerStateVariable:h,blockerDependency:y});this.resolveIfReady({componentName:t,type:"stateVariable",stateVariable:h,expandComposites:s,force:o,recurseUpstream:l})}return{success:!0}}}else if(e==="childMatches"){let c=this._components[t];if(c&&!c.childrenMatched&&!this.core.deriveChildResultsFromDefiningChildren({parent:c,expandComposites:s,forceExpandComposites:o}).skipping&&!(c.childrenMatchedWithPlaceholders||o))return{success:!1}}else if(e==="expandComposite"){if(!this._components[t].isExpanded){if(this.core.updateInfo.compositesBeingExpanded.includes(t))return{success:!1};this.core.expandCompositeComponent(this._components[t])}}else throw Error(`Unrecognized type newly resolved: ${e}`);let u=this.getResolveBlockedBy({componentName:t,type:e,stateVariable:r,dependency:a});u=Object.assign({},u);for(let c in u)for(let p of[...u[c]])if(this.deleteFromResolveBlockedBy({blockerComponentName:t,blockerType:e,blockerStateVariable:r,blockerDependency:a,typeBlocked:c,codeBlocked:p}),l){let[m,f,d]=p.split("|");this.resolveIfReady({componentName:m,type:c,stateVariable:f,dependency:d,expandComposites:s,force:o,recurseUpstream:l})}return{success:!0}}resolveStateVariablesIfReady({component:t,stateVariables:e}){let r=t.componentName;e||(this.resolveIfReady({componentName:r,type:"componentIdentity",expandComposites:!1}),e=Object.keys(t.state));for(let a of e){let s=t.state[a];if(s&&s.determineDependenciesImmediately){let l=this.getNeededToResolve({componentName:r,type:"stateVariable",stateVariable:a}).determineDependencies;if(l)for(let u of l){let[c,p,m]=u.split("|");this.resolveIfReady({componentName:c,type:"determineDependencies",stateVariable:p,dependency:m,expandComposites:!0})}}this.resolveIfReady({componentName:r,type:"stateVariable",stateVariable:a,expandComposites:!1})}}resolveIfReady({componentName:t,type:e,stateVariable:r,dependency:a,expandComposites:s=!0,force:o=!1,recurseUpstream:l=!1}){return this.checkIfHaveNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a})?{success:!1}:(this.deleteFromNeededToResolve({componentNameBlocked:t,typeBlocked:e,stateVariableBlocked:r,dependencyBlocked:a}),this.processNewlyResolved({componentNameNewlyResolved:t,typeNewlyResolved:e,stateVariableNewlyResolved:r,dependencyNewlyResolved:a,expandComposites:s,force:o,recurseUpstream:l}))}resolveItem({componentName:t,type:e,stateVariable:r,dependency:a,force:s=!1,recurseUpstream:o=!1,expandComposites:l=!0,numPreviouslyNeeded:u}){let c=this.getNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a}),p=c.determineDependencies;if(p&&p.length>0)for(let y of[...p]){let[b,g,v]=y.split("|"),C=this.resolveItem({componentName:b,type:"determineDependencies",stateVariable:g,dependency:v,force:s,expandComposites:l});if(!C.success)return C}let m;e==="stateVariable"&&this._components[t]&&(m=this._components[t].state[r],m&&(m.currentlyResolving=!0));let f=1/0,d=1/0;for(;(Object.keys(c).length>0||d>0)&&!(Number.isFinite(d)&&d>=f);){d>0&&(c=this.getNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a})),f=d,d=0;for(let y in c){if(y==="determineDependencies")throw Error(`Shouldn't have determine dependencies blocker after determining dependencies: ${t}, ${e}, ${r}, ${a}`);for(let b of[...c[y]]){let[g,v,C]=b.split("|"),w=this.resolveItem({componentName:g,type:y,stateVariable:v,dependency:C,expandComposites:l});if(!w.success)if(s)d++;else return w}}}if(d>0)for(c=this.getNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a});Object.keys(c).length>0;)for(let y in c){if(y==="determineDependencies")throw Error(`Shouldn't have determine dependencies blocker after determining dependencies: ${t}, ${e}, ${r}, ${a}`);for(let b of[...c[y]]){let[g,v,C]=b.split("|"),w=this.resolveItem({componentName:g,type:y,stateVariable:v,dependency:C,force:s,expandComposites:l});if(!w.success)return w}}m&&(m.currentlyResolving=!1);let h=this.resolveIfReady({componentName:t,type:e,stateVariable:r,dependency:a,force:s,recurseUpstream:o,expandComposites:l});if(!h.success){let y=this.getNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a}),b=Object.keys(y).length;b>0&&(u===void 0||b<u)&&(h=this.resolveItem({componentName:t,type:e,stateVariable:r,dependency:a,force:s,recurseUpstream:o,expandComposites:l,numPreviouslyNeeded:b}))}return h}checkForCircularResolveBlocker({componentName:t,type:e,stateVariable:r,dependency:a,previouslyVisited:s=[]}){let o=t;r&&(o+="|"+r,a&&(o+="|"+a));let l=o+"|"+e;if(s.includes(l)){console.log("found circular",l,s);let u=/^([^\|]*)\|/,c=s.map(b=>b.match(u)[1]),p=c.filter(b=>b.slice(0,2)!=="__").reduce((b,g)=>b.includes(g)?b:[...b,g],[]);p.length===0&&(p=[c[0]]);let m;p.length===1?m=p[0]:p.length===2?m=p.join(" and "):(p[p.length-2]=p.slice(p.length-2).join(", and "),p.pop(),m=p.join(", "));let f=[],d=[];for(let b of s){let[g,v]=b.split("|"),C=this._components[g];C&&this.componentInfoObjects.isInheritedComponentType({inheritedComponentType:C.componentType,baseComponentType:"_composite"})&&!(C.attributes.componentType&&C.attributes.componentType.primitive)&&(v==="readyToExpandWhenResolved"?f.push(g):v===C.constructor.stateVariableToEvaluateAfterReplacements&&d.push(g))}let h=!1;for(let b of f)if(d.includes(b)){h=!0;break}let y=`Circular dependency involving ${m}.`;throw h&&(y+="  Specifying the type of a composite component may address this circular dependency."),Error(y)}else s=[...s,l];if(!this.circularResolveBlockedCheckPassed[l]){this.circularResolveBlockedCheckPassed[l]=!0;let u=this.getNeededToResolve({componentName:t,type:e,stateVariable:r,dependency:a});for(let c in u)for(let p of u[c]){let[m,f,d]=p.split("|");this.checkForCircularResolveBlocker({componentName:m,type:c,stateVariable:f,dependency:d,previouslyVisited:s})}}}resetCircularResolveBlockerCheckPassed({componentName:t,type:e,stateVariable:r,dependency:a}){let s=t;r&&(s+="|"+r,a&&(s+="|"+a));let o=s+"|"+e;if(this.circularResolveBlockedCheckPassed[o]){delete this.circularResolveBlockedCheckPassed[o];let l=this.getResolveBlockedBy({componentName:t,type:e,stateVariable:r,dependency:a});for(let u in l)for(let c of l[u]){let[p,m,f]=c.split("|");this.resetCircularResolveBlockerCheckPassed({componentName:p,type:u,stateVariable:m,dependency:f})}}}get components(){return new Proxy(this._components,Ge)}set components(t){return null}},yt=class{constructor({component:t,stateVariable:e,allStateVariablesAffected:r,dependencyName:a,dependencyDefinition:s,dependencyHandler:o}){this.dependencyName=a,this.dependencyHandler=o,this.upstreamComponentName=t.componentName,this.upstreamVariableNames=r,this.definition=Object.assign({},s),this.representativeStateVariable=e,s.doNotProxy&&(this.doNotProxy=!0),s.variablesOptional&&(this.variablesOptional=!0),s.publicStateVariablesOnly&&(this.publicStateVariablesOnly=!0),s.caseInsensitiveVariableMatch&&(this.caseInsensitiveVariableMatch=!0),s.useMappedVariableNames&&(this.useMappedVariableNames=!0),Number.isInteger(s.propIndex)&&(this.propIndex=s.propIndex),this.returnSingleVariableValue=!1,this.returnSingleComponent=!1,this.originalDownstreamVariableNames=[],this.setUpParameters();let l=this.determineDownstreamComponents();this.initialize({downstreamComponentNames:l.downstreamComponentNames,downstreamComponentTypes:l.downstreamComponentTypes})}downstreamVariableNameIfNoVariables="__identity";static get rendererType(){return this.componentType}get dependencyType(){return this.constructor.dependencyType}setUpParameters(){}determineDownstreamComponents(){return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]}}initialize({downstreamComponentNames:t,downstreamComponentTypes:e}){this.componentIdentitiesChanged=!0;let r=this.dependencyHandler.downstreamDependencies[this.upstreamComponentName];r||(r=this.dependencyHandler.downstreamDependencies[this.upstreamComponentName]={});for(let a of this.upstreamVariableNames)r[a]||(r[a]={}),r[a][this.dependencyName]=this;this.originalDownstreamVariableNames.length===0&&!this.originalVariablesByComponent?(delete this.mappedDownstreamVariableNamesByComponent,delete this.upValuesChanged):(this.mappedDownstreamVariableNamesByComponent=[],this.valuesChanged=[]),this.downstreamComponentNames=[],this.downstreamComponentTypes=[];for(let[a,s]of t.entries())this.addDownstreamComponent({downstreamComponentName:s,downstreamComponentType:e[a],index:a});this.onDownstreamComponentChange()}addDownstreamComponent({downstreamComponentName:t,downstreamComponentType:e,index:r}){this.componentIdentitiesChanged=!0,this.downstreamComponentNames.splice(r,0,t),this.downstreamComponentTypes.splice(r,0,e);let a=this.dependencyHandler._components[t];if(a){let s;this.originalVariablesByComponent?s=this.originalDownstreamVariableNamesByComponent[r]:s=this.originalDownstreamVariableNames,this.caseInsensitiveVariableMatch&&(s=this.dependencyHandler.core.findCaseInsensitiveMatches({stateVariables:s,componentClass:a.constructor})),this.publicStateVariablesOnly&&(s=this.dependencyHandler.core.matchPublicStateVariables({stateVariables:s,componentClass:a.constructor}));let o=this.dependencyHandler.core.substituteAliases({stateVariables:s,componentClass:a.constructor});this.constructor.convertToArraySize&&(o=o.map(function(c){let p=a.state[c];if(p)return p.arraySizeStateVariable?p.arraySizeStateVariable:`__${c}_is_not_an_array`;if(a.arrayEntryPrefixes){let m=Object.keys(a.arrayEntryPrefixes).sort((f,d)=>d.length-f.length);for(let f of m)if(c.substring(0,f.length)===f){let d=a.arrayEntryPrefixes[f];return a.state[d].arraySizeStateVariable}}return`__${c}_is_not_an_array`})),this.propIndex!==void 0&&console.warn("Need to implement propIndex!");let l=o;if(s.length>0||this.originalVariablesByComponent){this.mappedDownstreamVariableNamesByComponent.splice(r,0,o);let c={};for(let p of o)c[p]={changed:!0};this.valuesChanged.splice(r,0,c),this.variablesOptional&&(l=l.filter(p=>p in a.state||this.dependencyHandler.core.checkIfArrayEntry({stateVariable:p,component:a})));for(let p of l)if(a.state[p]||this.dependencyHandler.core.createFromArrayEntry({component:a,stateVariable:p}),!a.state[p].isResolved)for(let m of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:t,blockerType:"stateVariable",blockerStateVariable:p,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:m}),this.dependencyType==="determineDependencies"&&this.dependencyHandler.addBlocker({blockerComponentName:t,blockerType:"stateVariable",blockerStateVariable:p,componentNameBlocked:this.upstreamComponentName,typeBlocked:"determineDependencies",stateVariableBlocked:m,dependencyBlocked:this.dependencyName})}l.length===0&&(l=[this.downstreamVariableNameIfNoVariables]);let u=this.dependencyHandler.upstreamDependencies[t];u||(u=this.dependencyHandler.upstreamDependencies[t]={});for(let c of l)if(u[c]===void 0&&(u[c]=[]),u[c].push(this),c!==this.downstreamVariableNameIfNoVariables)for(let p of this.upstreamVariableNames)this.dependencyHandler.resetCircularCheckPassed(this.upstreamComponentName,p)}for(let s of this.upstreamVariableNames)this.dependencyHandler._components[this.upstreamComponentName].state[s].initiallyResolved&&this.dependencyHandler.core.recordActualChangeInStateVariable({componentName:this.upstreamComponentName,varName:s})}removeDownstreamComponent({indexToRemove:t,recordChange:e=!0}){e&&(this.componentIdentitiesChanged=!0);let r=this.downstreamComponentNames[t];if(this.downstreamComponentNames.splice(t,1),this.downstreamComponentTypes.splice(t,1),r in this.dependencyHandler._components){let a;this.mappedDownstreamVariableNamesByComponent?(a=this.mappedDownstreamVariableNamesByComponent[t],this.mappedDownstreamVariableNamesByComponent.splice(t,1),this.valuesChanged.splice(t,1),this.variablesOptional&&a.push(this.downstreamVariableNameIfNoVariables)):a=[this.downstreamVariableNameIfNoVariables];for(let s of a){let o=this.dependencyHandler.upstreamDependencies[r][s];if(o){let l=o.indexOf(this);l!==-1&&(o.length===1?delete this.dependencyHandler.upstreamDependencies[r][s]:o.splice(l,1))}if(s!==this.downstreamVariableNameIfNoVariables)for(let l of this.upstreamVariableNames)this.dependencyHandler.resetCircularCheckPassed(this.upstreamComponentName,l)}}if(e)for(let a of this.upstreamVariableNames)this.dependencyHandler._components[this.upstreamComponentName].state[a].initiallyResolved&&this.dependencyHandler.core.recordActualChangeInStateVariable({componentName:this.upstreamComponentName,varName:a})}swapDownstreamComponents(t,e){this.componentIdentitiesChanged=!0,[this.downstreamComponentNames[t],this.downstreamComponentNames[e]]=[this.downstreamComponentNames[e],this.downstreamComponentNames[t]],[this.downstreamComponentTypes[t],this.downstreamComponentTypes[e]]=[this.downstreamComponentTypes[e],this.downstreamComponentTypes[t]],(this.originalDownstreamVariableNames.length>0||this.originalVariablesByComponent)&&([this.mappedDownstreamVariableNamesByComponent[t],this.mappedDownstreamVariableNamesByComponent[e]]=[this.mappedDownstreamVariableNamesByComponent[e],this.mappedDownstreamVariableNamesByComponent[t]],[this.valuesChanged[t],this.valuesChanged[e]]=[this.valuesChanged[e],this.valuesChanged[t]]);for(let r of this.upstreamVariableNames)this.dependencyHandler._components[this.upstreamComponentName].state[r].initiallyResolved&&this.dependencyHandler.core.recordActualChangeInStateVariable({componentName:this.upstreamComponentName,varName:r})}deleteDependency(){let t=[];if(!this.mappedDownstreamVariableNamesByComponent)t=Array(this.downstreamComponentNames.length).fill([this.downstreamVariableNameIfNoVariables]);else if(t=this.mappedDownstreamVariableNamesByComponent,this.variablesOptional){let r=[];for(let[a,s]of this.downstreamComponentNames.entries()){let o=[];for(let l of t[a])this.dependencyHandler.components[s].state[l]&&o.push(l);o.length>0?r.push(o):r.push([this.downstreamVariableNameIfNoVariables])}t=r}for(let[r,a]of this.downstreamComponentNames.entries())for(let s of t[r]){let o=this.dependencyHandler.upstreamDependencies[a][s];if(o){let l=o.indexOf(this);l!==-1&&(o.length===1?delete this.dependencyHandler.upstreamDependencies[a][s]:o.splice(l,1))}if(s!==this.downstreamVariableNameIfNoVariables)for(let l of this.upstreamVariableNames)this.dependencyHandler.resetCircularCheckPassed(this.upstreamComponentName,l)}this.deleteFromUpdateTriggers();let e=this.dependencyHandler.downstreamDependencies[this.upstreamComponentName];for(let r of this.upstreamVariableNames)delete e[r][this.dependencyName]}deleteFromUpdateTriggers(){}getValue({verbose:t=!1,skipProxy:e=!1}={}){let r=[],a={},s=[];this.componentIdentitiesChanged&&(a.componentIdentitiesChanged=!0,this.componentIdentitiesChanged=!1);for(let[o,l]of this.downstreamComponentNames.entries()){let u=this.dependencyHandler._components[l];if(s[o]=!1,u){let c={componentType:u.componentType};this.skipComponentNames||(c.componentName=l);let p;if(this.originalVariablesByComponent?p=this.originalDownstreamVariableNamesByComponent[o]:p=this.originalDownstreamVariableNames,p.length>0){c.stateValues={};let m={},f=!1;for(let[d,h]of p.entries()){let y=this.mappedDownstreamVariableNamesByComponent[o][d],b=this.useMappedVariableNames?y:h;(!this.variablesOptional||y in u.state)&&(u.state[y].deferred||(c.stateValues[b]=u.state[y].value,this.valuesChanged[o][y].changed&&(a.valuesChanged||(a.valuesChanged={}),a.valuesChanged[o]||(a.valuesChanged[o]={}),a.valuesChanged[o][b]=this.valuesChanged[o][y]),this.valuesChanged[o][y]={},u.state[y].usedDefault&&(m[b]=!0,f=!0)))}f&&(s[o]=m)}r.push(c)}else r.push({componentType:this.downstreamComponentTypes[o]})}if(!t)if(this.returnSingleVariableValue)if(r.length===1){r=r[0],a.valuesChanged&&a.valuesChanged[0]?a.valuesChanged=a.valuesChanged[0]:delete a.valuesChanged,s=s[0];let o=Object.keys(r.stateValues);if(o.length===1){let l=o[0];r=r.stateValues[l],a.valuesChanged&&a.valuesChanged[l]&&(a.valuesChanged=a.valuesChanged[l]),s&&(s=s[l])}else r=null,a.valuesChanged={},s=!1}else r=null,a.valuesChanged={},s=!1;else this.returnSingleComponent&&(r.length===1?(r=r[0],a.valuesChanged&&a.valuesChanged[0]?a.valuesChanged=a.valuesChanged[0]:delete a.valuesChanged,s=s[0]):(r=null,s=!1));return!this.doNotProxy&&!e&&r!==null&&typeof r=="object"&&(r=new Proxy(r,Ge)),{value:r,changes:a,usedDefault:s}}checkForCircular(){for(let t of this.upstreamVariableNames)this.dependencyHandler.resetCircularCheckPassed(this.upstreamComponentName,t);for(let t of this.upstreamVariableNames)this.dependencyHandler.checkForCircularDependency({componentName:this.upstreamComponentName,varName:t})}recalculateDownstreamComponents({force:t=!1}={}){let e=this.determineDownstreamComponents({force:t}),r=e.downstreamComponentNames;if(r.length!==this.downstreamComponentNames.length||this.downstreamComponentNames.some((s,o)=>s!=r[o])){this.componentIdentitiesChanged=!0;let s=0;for(let[o,l]of[...this.downstreamComponentNames].entries())r.includes(l)||(this.removeDownstreamComponent({indexToRemove:o-s}),s++);for(let[o,l]of r.entries()){let u=this.downstreamComponentNames.indexOf(l);u!==-1?u!==o&&this.swapDownstreamComponents(u,o):this.addDownstreamComponent({downstreamComponentName:l,downstreamComponentType:e.downstreamComponentTypes[o],index:o})}}if(this.originalVariablesByComponent)for(let[s,o]of[...this.downstreamComponentNames].entries())(this.mappedDownstreamVariableNamesByComponent[s].length!==this.originalDownstreamVariableNamesByComponent[s].length||this.mappedDownstreamVariableNamesByComponent[s].some((l,u)=>this.originalDownstreamVariableNamesByComponent[s][u]!==l))&&(this.removeDownstreamComponent({indexToRemove:s}),this.addDownstreamComponent({downstreamComponentName:o,downstreamComponentType:e.downstreamComponentTypes[s],index:s}));return this.onDownstreamComponentChange(),{success:e.success}}onDownstreamComponentChange(){}};T(yt,"dependencyType","_base");var xl=class extends yt{setUpParameters(){if(this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName,this.definition.variableName===void 0)throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableName is not defined`);this.originalDownstreamVariableNames=[this.definition.variableName],this.definition.returnAsComponentObject?this.returnSingleComponent=!0:this.returnSingleVariableValue=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}return{success:!0,downstreamComponentNames:[this.componentName],downstreamComponentTypes:[t.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(xl,"dependencyType","stateVariable");Xe.push(xl);var Uw=class extends yt{setUpParameters(){if(this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName,this.definition.variableNames===void 0)throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames is not defined`);this.originalDownstreamVariableNames=this.definition.variableNames,this.returnSingleComponent=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}return{success:!0,downstreamComponentNames:[this.componentName],downstreamComponentTypes:[t.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(Uw,"dependencyType","multipleStateVariables");Xe.push(Uw);var zw=class extends xl{getValue({verbose:t=!1}={}){let e=[],r={};if(this.staticValue)e=[this.staticValue];else if(this.componentIdentitiesChanged&&(r.componentIdentitiesChanged=!0,this.componentIdentitiesChanged=!1),this.downstreamComponentNames.length===1){let a=this.downstreamComponentNames[0],s=this.dependencyHandler.components[a],o={componentName:s.componentName,componentType:s.componentType};o.stateValues={};let l=this.originalDownstreamVariableNames[0],u=this.mappedDownstreamVariableNamesByComponent[0][0],c=this.useMappedVariableNames?u:l;if((!this.variablesOptional||u in s.state)&&!s.state[u].deferred){let p=s.state[u];if(p.value,o.stateValues[c]=p.componentType,p.isArray&&p.wrappingComponents&&p.wrappingComponents.length>0){let f=p.wrappingComponents[p.wrappingComponents.length-1][0];typeof f=="object"&&(f=f.componentType),o.stateValues[c]=f}this.valuesChanged[0][u].changed&&(r.valuesChanged||(r.valuesChanged={}),r.valuesChanged[0]||(r.valuesChanged[0]={}),r.valuesChanged[0][c]=this.valuesChanged[0][u]),this.valuesChanged[0][u]={};let m=p.hasVariableComponentType;!m&&p.isArrayEntry&&(m=s.state[p.arrayStateVariable].hasVariableComponentType),m||(this.staticValue=o,this.removeDownstreamComponent({indexToRemove:0,recordChange:!1}))}e=[o]}if(!t)if(this.returnSingleVariableValue)if(e.length===1){e=e[0];let a=Object.keys(e.stateValues);r.valuesChanged&&r.valuesChanged[0]&&r.valuesChanged[0][0]&&(r.valuesChanged=r.valuesChanged[0][0]),a.length===1?e=e.stateValues[a[0]]:e=null}else e=null;else this.returnSingleComponent&&(e.length===1?(e=e[0],r.valuesChanged&&r.valuesChanged[0]&&(r.valuesChanged=r.valuesChanged[0])):e=null);return!this.doNotProxy&&e!==null&&typeof e=="object"&&(e=new Proxy(e,Ge)),{value:e,changes:r,usedDefault:!1}}};T(zw,"dependencyType","stateVariableComponentType");Xe.push(zw);var x0=class extends xl{};T(x0,"dependencyType","stateVariableArraySize"),T(x0,"convertToArraySize",!0);Xe.push(x0);var Hw=class extends yt{setUpParameters(){if(this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName,this.definition.variableNames===void 0)throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames is not defined`);this.startingVariableNames=this.definition.variableNames,this.originalVariablesByComponent=!0,this.includeImmediateValueWithValue=this.definition.includeImmediateValueWithValue,this.includeRawValueWithImmediateValue=this.definition.includeRawValueWithImmediateValue,this.variablesOptional=!0}determineDownstreamComponents({force:t=!1}={}){this.missingComponents=[],this.originalDownstreamVariableNamesByComponent=[];let e=this.getRecursiveDependencyVariables({componentName:this.componentName,variableNames:this.startingVariableNames,force:t});if(!e.success)return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]};let r=[],a=[];for(let s in e.components)r.push(s),a.push(e.components[s].componentType),this.originalDownstreamVariableNamesByComponent.push(e.components[s].variableNames);return{success:!0,downstreamComponentNames:r,downstreamComponentTypes:a}}getRecursiveDependencyVariables({componentName:t,variableNames:e,force:r,components:a={}}){let s=this.dependencyHandler._components[t];if(!s){if(!this.missingComponents.includes(t)){let u=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[t];u||(u=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[t]=[]),u.includes(this)||u.push(this)}for(let u of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:t,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:u,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:u,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:u});return{success:!1}}this.includeImmediateValueWithValue&&e.includes("value")&&!e.includes("immediateValue")&&"immediateValue"in s.state&&(e=[...e,"immediateValue"]),this.includeRawValueWithImmediateValue&&e.includes("immediateValue")&&!e.includes("rawRendererValue")&&"rawRendererValue"in s.state&&(e=[...e,"rawRendererValue"]);let o=a[t];o||(o=a[t]={componentName:t,componentType:s.componentType,variableNames:[]});let l=this.dependencyHandler.updateTriggers.dependenciesBasedOnDependenciesOfStateVariables[t];l||(l=this.dependencyHandler.updateTriggers.dependenciesBasedOnDependenciesOfStateVariables[t]={});for(let u of e)if(!o.variableNames.includes(u)){o.variableNames.push(u);let c=l[u];c||(c=l[u]=[]),c.includes(this)||c.push(this);let p=s.state[u];if(p){if(!p.isResolved)if(r)p.value;else{for(let f of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:t,blockerType:"stateVariable",blockerStateVariable:u,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:f,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:f,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:f});return{success:!1}}let m=this.dependencyHandler.downstreamDependencies[s.componentName][u];for(let f in m){let d=m[f];for(let[h,y]of d.downstreamComponentNames.entries()){let b=[];if((d.originalDownstreamVariableNames.length>0||d.originalVariablesByComponent)&&(b=d.mappedDownstreamVariableNamesByComponent[h]),!this.getRecursiveDependencyVariables({componentName:y,variableNames:b,force:r,components:a}).success)return{success:!1}}}}}return{success:!0,components:a}}getValue(){this.gettingValue=!0,this.varsWithUpdatedDeps={};let t,e={},r=!0,a={};for(;r;){if(r=!1,t=super.getValue(),t.changes.valuesChanged)if(!a.valuesChanged)a.valuesChanged=t.changes.valuesChanged;else for(let s in t.changes.valuesChanged){let o=t.changes.valuesChanged[s];if(!a.valuesChanged[s])a.valuesChanged[s]=o;else for(let l in o)a.valuesChanged[s][l]=o[l]}for(let s in this.varsWithUpdatedDeps){let o=e[s];o||(o=e[s]=[]);for(let l of this.varsWithUpdatedDeps[s])o.includes(l)||(o.push(l),r=!0)}r&&this.recalculateDownstreamComponents()}return this.gettingValue=!1,t.changes=a,t}deleteFromUpdateTriggers(){for(let t of this.missingComponents){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[t];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}}};T(Hw,"dependencyType","recursiveDependencyValues");Xe.push(Hw);var Gw=class extends yt{setUpParameters(){this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName,this.returnSingleComponent=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}return{success:!0,downstreamComponentNames:[this.componentName],downstreamComponentTypes:[t.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(Gw,"dependencyType","componentIdentity");Xe.push(Gw);var qw=class extends yt{setUpParameters(){if(this.definition.parentName?(this.parentName=this.definition.parentName,this.specifiedComponentName=this.parentName):this.parentName=this.upstreamComponentName,this.definition.variableNames){if(!Array.isArray(this.definition.variableNames))throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames must be an array`);this.originalDownstreamVariableNames=this.definition.variableNames}else this.originalDownstreamVariableNames=[];this.attributeName=this.definition.attributeName,this.returnSingleComponent=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.parentName];if(!t){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}let e=t.attributes[this.attributeName];return e&&e.component?{success:!0,downstreamComponentNames:[e.component.componentName],downstreamComponentTypes:[e.component.componentType]}:{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(qw,"dependencyType","attributeComponent");Xe.push(qw);var Ww=class extends yt{setUpParameters(){if(this.definition.parentName?(this.parentName=this.definition.parentName,this.specifiedComponentName=this.parentName):this.parentName=this.upstreamComponentName,this.definition.variableNames){if(!Array.isArray(this.definition.variableNames))throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames must be an array`);this.originalDownstreamVariableNames=this.definition.variableNames}else this.originalDownstreamVariableNames=[];this.childGroups=this.definition.childGroups,this.definition.childIndices!==void 0&&(this.childIndices=this.definition.childIndices.map(t=>Number(t))),this.skipComponentNames=this.definition.skipComponentNames,this.skipPlaceholders=this.definition.skipPlaceholders}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.parentName];if(!t){let o=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];o||(o=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName]=[]),o.includes(this)||o.push(this);for(let l of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:l,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:l,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:l});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}let e=this.dependencyHandler.updateTriggers.childDependenciesByParent[this.parentName];e||(e=this.dependencyHandler.updateTriggers.childDependenciesByParent[this.parentName]=[]),e.includes(this)||e.push(this);let r=t.returnMatchedChildIndices(this.childGroups);if(r===void 0)throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: childGroups ${this.childGroups} does not exist.`);if(this.childIndices&&(r=r.filter((o,l)=>this.childIndices.includes(l))),!t.childrenMatched){let o=!1;if(t.childrenMatchedWithPlaceholders&&(this.skipPlaceholders&&(r=r.filter(l=>!t.placeholderActiveChildrenIndices.includes(l))),this.skipComponentNames&&this.originalDownstreamVariableNames.length===0?o=!0:o=r.every(l=>!t.placeholderActiveChildrenIndices.includes(l))),!o){let l=t.unexpandedCompositesNotReady.length>0;if(!l&&t.unexpandedCompositesReady.length>0){for(let u of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"childMatches",blockerStateVariable:u,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:u,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:u,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:u});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(l){for(let m of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"childMatches",blockerStateVariable:m,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:m,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:m,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:m});let u=[],c=[];for(let m of t.unexpandedCompositesNotReady){if(t.childrenMatchedWithPlaceholders&&t.placeholderActiveChildrenIndicesByComposite[m].every(h=>!r.includes(h)))continue;let f=this.dependencyHandler._components[m];f.attributes.componentType&&f.attributes.componentType.primitive?u.push(m):c.push(m)}let p=c;p.length===0&&(p=u);for(let m of p)for(let f of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:m,blockerType:"stateVariable",blockerStateVariable:"readyToExpandWhenResolved",componentNameBlocked:this.upstreamComponentName,typeBlocked:"childMatches",stateVariableBlocked:f});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}}}let a=r.map(o=>t.activeChildren[o]),s=a.map((o,l)=>o.componentName?o.componentName:`__placeholder_${l}`);return{success:!0,downstreamComponentNames:s,downstreamComponentTypes:a.map(o=>o.componentType)}}getValue({verbose:t}={}){let e=super.getValue({verbose:t,skipProxy:!0});for(let[r,a]of this.compositeIndices.entries())a!==void 0&&(e.value[r].compositeInd=a,e.value[r].compositeTname=this.compositeTnames[a]);return this.doNotProxy||(e.value=new Proxy(e.value,Ge)),e}deleteFromUpdateTriggers(){let t=this.dependencyHandler.updateTriggers.childDependenciesByParent[this.parentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}if(this.specifiedComponentName){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}}onDownstreamComponentChange(){if(this.compositeIndices=[],this.compositeTnames=[],this.downstreamComponentNames.length>0){let t=this.dependencyHandler._components[this.parentName];for(let[e,r]of t.definingChildren.entries())if(this.dependencyHandler.componentInfoObjects.isInheritedComponentType({inheritedComponentType:r.componentType,baseComponentType:"_composite"})&&(this.compositeTnames[e]=r.stateValues.tName,r.isExpanded)){let a=r.stateValues.fullRecursiveReplacements.map(s=>this.dependencyHandler.components[s.componentName]).map(s=>s.adapterUsed?s.adapterUsed:s).map(s=>s.componentName);for(let[s,o]of this.downstreamComponentNames.entries())a.includes(o)&&(this.compositeIndices[s]=e)}}}};T(Ww,"dependencyType","child");Xe.push(Ww);var $w=class extends yt{setUpParameters(){if(this.definition.ancestorName?(this.ancestorName=this.definition.ancestorName,this.specifiedComponentName=this.ancestorName):this.ancestorName=this.upstreamComponentName,this.definition.variableNames){if(!Array.isArray(this.definition.variableNames))throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames must be an array`);this.originalDownstreamVariableNames=this.definition.variableNames}else this.originalDownstreamVariableNames=[];this.componentTypes=this.definition.componentTypes,this.recurseToMatchedChildren=this.definition.recurseToMatchedChildren,this.useReplacementsForComposites=this.definition.useReplacementsForComposites,this.includeNonActiveChildren=this.definition.includeNonActiveChildren,this.includeAttributeChildren=this.definition.includeAttributeChildren,this.skipOverAdapters=this.definition.skipOverAdapters,this.ignoreReplacementsOfMatchedComposites=this.definition.ignoreReplacementsOfMatchedComposites}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.ancestorName];if(!t){let s=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.ancestorName];s||(s=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.ancestorName]=[]),s.includes(this)||s.push(this);for(let o of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.ancestorName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:o,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:o,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:o});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}let e=this.dependencyHandler.updateTriggers.descendantDependenciesByAncestor[this.ancestorName];e||(e=this.dependencyHandler.updateTriggers.descendantDependenciesByAncestor[this.ancestorName]=[]),e.includes(this)||e.push(this);let r=this.gatherUnexpandedComposites(t);if(r.haveCompositesNotReady||r.haveUnexpandedCompositeReady){for(let s of this.upstreamVariableNames){this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});for(let o in r.unexpandedCompositesReadyByParentName)this.dependencyHandler.addBlocker({blockerComponentName:o,blockerType:"childMatches",blockerStateVariable:s,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName});for(let o in r.unexpandedCompositesNotReadyByParentName)this.dependencyHandler.addBlocker({blockerComponentName:o,blockerType:"childMatches",blockerStateVariable:s,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName})}return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}let a=jw({ancestor:t,descendantTypes:this.componentTypes,recurseToMatchedChildren:this.recurseToMatchedChildren,useReplacementsForComposites:this.useReplacementsForComposites,includeNonActiveChildren:this.includeNonActiveChildren,skipOverAdapters:this.skipOverAdapters,ignoreReplacementsOfMatchedComposites:this.ignoreReplacementsOfMatchedComposites,componentInfoObjects:this.dependencyHandler.componentInfoObjects});return{success:!0,downstreamComponentNames:a.map(s=>s.componentName),downstreamComponentTypes:a.map(s=>s.componentType)}}gatherUnexpandedComposites(t){let e={},r={},a=!1,s=!1,o=this.skipComponentNames&&this.originalDownstreamVariableNames.length===0;if(!t.childrenMatched)if(t.childrenMatchedWithPlaceholders){if(t.unexpandedCompositesReady.length>0){let l=this.unexpandedCompositesAdjustedForPlacedholders(t.unexpandedCompositesReady,o);l.length>0&&(e[t.componentName]=l,a=!0)}if(t.unexpandedCompositesNotReady.length>0){let l=this.unexpandedCompositesAdjustedForPlacedholders(t.unexpandedCompositesNotReady,o);l.length>0&&(r[t.componentName]=l,s=!0)}}else t.unexpandedCompositesReady.length>0&&(e[t.componentName]=t.unexpandedCompositesReady,a=!0),t.unexpandedCompositesNotReady.length>0&&(r[t.componentName]=t.unexpandedCompositesNotReady,s=!0);for(let l in t.allChildren){let u=t.allChildren[l].component,c=this.gatherUnexpandedComposites(u);c.haveUnexpandedCompositeReady&&(Object.assign(e,c.unexpandedCompositesReadyByParentName),a=!0),c.haveCompositesNotReady&&(Object.assign(r,c.unexpandedCompositesNotReadyByParentName),s=!0)}return{unexpandedCompositesReadyByParentName:e,haveUnexpandedCompositeReady:a,unexpandedCompositesNotReadyByParentName:r,haveCompositesNotReady:s}}unexpandedCompositesAdjustedForPlacedholders(t,e){let r=[];for(let a of t){let s=this.dependencyHandler._components[a];if(s.attributes.componentType){let o=s.attributes.componentType.primitive;this.componentTypes.some(u=>this.dependencyHandler.componentInfoObjects.isInheritedComponentType({inheritedComponentType:o,baseComponentType:u}))&&e||r.push(a)}else r.push(a)}return r}deleteFromUpdateTriggers(){let t=this.dependencyHandler.updateTriggers.descendantDependenciesByAncestor[this.ancestorName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}if(this.specifiedComponentName){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}}};T($w,"dependencyType","descendant");Xe.push($w);var Kw=class extends yt{setUpParameters(){if(this.definition.childName?(this.childName=this.definition.childName,this.specifiedComponentName=this.childName):this.childName=this.upstreamComponentName,this.definition.variableName)this.originalDownstreamVariableNames=[this.definition.variableName];else throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: must have a variableName`);this.definition.parentComponentType&&(this.parentComponentType=this.definition.parentComponentType),this.returnSingleVariableValue=!0,this.variablesOptional=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.childName];if(!t){let a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.childName];a||(a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.childName]=[]),a.includes(this)||a.push(this);for(let s of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.childName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.parentName)return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};this.parentName=t.parentName;let e=this.dependencyHandler._components[this.parentName];if(!e){let a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];a||(a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName]=[]),a.includes(this)||a.push(this);for(let s of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(this.parentComponentType&&!this.dependencyHandler.componentInfoObjects.isInheritedComponentType({inheritedComponentType:e.componentType,baseComponentType:this.parentComponentType}))return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};let r=this.dependencyHandler.updateTriggers.parentDependenciesByParent[this.parentName];return r||(r=this.dependencyHandler.updateTriggers.parentDependenciesByParent[this.parentName]=[]),r.includes(this)||r.push(this),{success:!0,downstreamComponentNames:[this.parentName],downstreamComponentTypes:[e.componentType]}}deleteFromUpdateTriggers(){let t=this.dependencyHandler.updateTriggers.parentDependenciesByParent[this.parentName];if(t){let r=t.indexOf(this);r!==-1&&t.splice(r,1)}if(this.specifiedComponentName){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(r){let a=r.indexOf(this);a!==-1&&r.splice(a,1)}}let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}};T(Kw,"dependencyType","parentStateVariable");Xe.push(Kw);var Xw=class extends yt{setUpParameters(){this.definition.childName?(this.childName=this.definition.childName,this.specifiedComponentName=this.childName):this.childName=this.upstreamComponentName,this.definition.parentComponentType&&(this.parentComponentType=this.definition.parentComponentType),this.returnSingleComponent=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.childName];if(!t){let a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.childName];a||(a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.childName]=[]),a.includes(this)||a.push(this);for(let s of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.childName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.parentName)return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};this.parentName=t.parentName;let e=this.dependencyHandler._components[this.parentName];if(!e){let a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];a||(a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName]=[]),a.includes(this)||a.push(this);for(let s of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(this.parentComponentType&&!this.dependencyHandler.componentInfoObjects.isInheritedComponentType({inheritedComponentType:e.componentType,baseComponentType:this.parentComponentType}))return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};let r=this.dependencyHandler.updateTriggers.parentDependenciesByParent[this.parentName];return r||(r=this.dependencyHandler.updateTriggers.parentDependenciesByParent[this.parentName]=[]),r.includes(this)||r.push(this),{success:!0,downstreamComponentNames:[this.parentName],downstreamComponentTypes:[e.componentType]}}deleteFromUpdateTriggers(){let t=this.dependencyHandler.updateTriggers.parentDependenciesByParent[this.parentName];if(t){let r=t.indexOf(this);r!==-1&&t.splice(r,1)}if(this.specifiedComponentName){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(r){let a=r.indexOf(this);a!==-1&&r.splice(a,1)}}let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}};T(Xw,"dependencyType","parentIdentity");Xe.push(Xw);var Yw=class extends yt{setUpParameters(){if(this.definition.descendantName?(this.descendantName=this.definition.descendantName,this.specifiedComponentName=this.descendantName):this.descendantName=this.upstreamComponentName,this.definition.variableNames){if(!Array.isArray(this.definition.variableNames))throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames must be an array`);this.originalDownstreamVariableNames=this.definition.variableNames}else this.originalDownstreamVariableNames=[];this.returnSingleComponent=!0,this.definition.componentType&&(this.componentType=this.definition.componentType)}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.descendantName];if(!t){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.descendantName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.descendantName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.descendantName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!(this.dependencyHandler.core.documentName in this.dependencyHandler._components)){for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r}),this.dependencyHandler.addBlocker({blockerComponentName:this.dependencyHandler.core.documentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}let e=this.findMatchingAncestor(t);if(e.missingComponentName){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[e.missingComponentName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[e.missingComponentName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:e.missingComponentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}for(let r of e.ancestorsExamined){let a=this.dependencyHandler.updateTriggers.ancestorDependenciesByPotentialAncestor[r];a||(a=this.dependencyHandler.updateTriggers.ancestorDependenciesByPotentialAncestor[r]=[]),a.includes(this)||a.push(this)}return this.ancestorResults=e,e.ancestorFound?{success:!0,downstreamComponentNames:[e.ancestorFound.componentName],downstreamComponentTypes:[e.ancestorFound.componentClass.componentType]}:{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]}}findMatchingAncestor(t){let e=[];if(this.componentType){for(let a of t.ancestors){let s=this.dependencyHandler._components[a.componentName];if(!s)return{missingComponentName:a.componentName};if(e.push(a.componentName),this.dependencyHandler.componentInfoObjects.isInheritedComponentType({inheritedComponentType:s.componentType,baseComponentType:this.componentType}))return{ancestorsExamined:e,ancestorFound:a}}return{ancestorsExamined:e}}if(this.originalDownstreamVariableNames.length===0)return console.warn(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: must specify componentType or variableNames to find ancestor`),{ancestorsExamined:e};let r=this.originalDownstreamVariableNames;for(let a of t.ancestors){let s=this.dependencyHandler._components[a.componentName];if(!s)return{missingComponentName:a.componentName};e.push(a.componentName);let o=!0;for(let l of r)if(!(l in s.state||this.dependencyHandler.core.checkIfArrayEntry({stateVariable:l,component:s}))){o=!1;break}if(o)return{ancestorsExamined:e,ancestorFound:a}}return{ancestorsExamined:e}}deleteFromUpdateTriggers(){for(let t of this.ancestorResults.ancestorsExamined){let e=this.dependencyHandler.updateTriggers.ancestorDependenciesByPotentialAncestor[t];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}if(this.ancestorResults&&this.ancestorResults.missingComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.ancestorResults.missingComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(Yw,"dependencyType","ancestor");Xe.push(Yw);var Zw=class extends yt{setUpParameters(){if(this.definition.compositeName?(this.compositeName=this.definition.compositeName,this.specifiedComponentName=this.compositeName):this.compositeName=this.upstreamComponentName,this.definition.variableNames){if(!Array.isArray(this.definition.variableNames))throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames must be an array`);this.originalDownstreamVariableNames=this.definition.variableNames}else this.originalDownstreamVariableNames=[];this.recursive=this.definition.recursive,this.recurseNonStandardComposites=this.definition.recurseNonStandardComposites,Number.isInteger(this.definition.componentIndex)&&(this.componentIndex=this.definition.componentIndex),this.expandReplacements=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.compositeName];if(!t){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.compositeName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.compositeName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.compositeName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.isExpanded){for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r}),this.dependencyHandler.addBlocker({blockerComponentName:this.compositeName,blockerType:"expandComposite",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName});return t.state.readyToExpandWhenResolved.isResolved||this.dependencyHandler.addBlocker({blockerComponentName:this.compositeName,blockerType:"stateVariable",blockerStateVariable:"readyToExpandWhenResolved",componentNameBlocked:this.compositeName,typeBlocked:"expandComposite"}),{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}this.compositesFound=[this.compositeName];let e=t.replacements;if(this.recursive){let r=this.dependencyHandler.core.recursivelyReplaceCompositesWithReplacements({replacements:e,recurseNonStandardComposites:this.recurseNonStandardComposites,expandComposites:!1});if(r.unexpandedCompositesNotReady.length>0||r.unexpandedCompositesReady.length>0){for(let a of this.upstreamVariableNames){this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});for(let s of[...r.unexpandedCompositesReady,...r.unexpandedCompositesNotReady])this.dependencyHandler.addBlocker({blockerComponentName:s,blockerType:"expandComposite",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName})}for(let a of r.unexpandedCompositesNotReady)this.dependencyHandler.addBlocker({blockerComponentName:a,blockerType:"stateVariable",blockerStateVariable:"readyToExpandWhenResolved",componentNameBlocked:a,typeBlocked:"expandComposite"});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}e=r.newReplacements,this.compositesFound.push(...r.compositesFound)}for(let r of this.compositesFound){let a=this.dependencyHandler.updateTriggers.replacementDependenciesByComposite[r];a||(a=this.dependencyHandler.updateTriggers.replacementDependenciesByComposite[r]=[]),a.includes(this)||a.push(this)}if(this.componentIndex!==void 0){let r=e[this.componentIndex-1];r?e=[r]:e=[]}return{success:!0,downstreamComponentNames:e.map(r=>r.componentName),downstreamComponentTypes:e.map(r=>r.componentType)}}deleteFromUpdateTriggers(){if(this.compositesFound)for(let t of this.compositesFound){let e=this.dependencyHandler.updateTriggers.replacementDependenciesByComposite[t];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(Zw,"dependencyType","replacement");Xe.push(Zw);var Jw=class extends yt{setUpParameters(){if(this.definition.replacementName?(this.replacementName=this.definition.replacementName,this.specifiedComponentName=this.replacementName):this.replacementName=this.upstreamComponentName,this.definition.variableName)this.originalDownstreamVariableNames=[this.definition.variableName];else throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: must have a variableName`);this.definition.compositeComponentType&&(this.compositeComponentType=this.definition.compositeComponentType),this.returnSingleVariableValue=!0,this.variablesOptional=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.replacementName];if(!t){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.replacementName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.replacementName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.replacementName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.replacementOf)return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};let e=t.replacementOf;if(this.compositeComponentType)for(;!this.dependencyHandler.componentInfoObjects.isInheritedComponentType({inheritedComponentType:e.componentType,baseComponentType:this.compositeComponentType});)if(e.replacementOf)e=e.replacementOf;else return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};return{success:!0,downstreamComponentNames:[e.componentName],downstreamComponentTypes:[e.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(Jw,"dependencyType","sourceCompositeStateVariable");Xe.push(Jw);var Qw=class extends yt{setUpParameters(){this.definition.replacementName?(this.replacementName=this.definition.replacementName,this.specifiedComponentName=this.replacementName):this.replacementName=this.upstreamComponentName,this.returnSingleComponent=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.replacementName];if(!t){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.replacementName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.replacementName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.replacementName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.replacementOf)return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};let e=t.replacementOf;return{success:!0,downstreamComponentNames:[e.componentName],downstreamComponentTypes:[e.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(Qw,"dependencyType","sourceCompositeIdentity");Xe.push(Qw);var ex=class extends yt{setUpParameters(){if(this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName,this.definition.variableName)this.originalDownstreamVariableNames=[this.definition.variableName];else throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: must have a variableName`);this.returnSingleVariableValue=!0,this.variablesOptional=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];r||(r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),r.includes(this)||r.push(this);for(let a of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:a,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:a,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:a});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.adaptedFrom)return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};let e=t.adaptedFrom;return{success:!0,downstreamComponentNames:[e.componentName],downstreamComponentTypes:[e.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(ex,"dependencyType","adapterSourceStateVariable");Xe.push(ex);var tx=class extends yt{setUpParameters(){this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];a||(a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),a.includes(this)||a.push(this);for(let s of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(!t.parentName)return console.warn(`component ${this.componentName} does not have a parent for state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}.`),{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]};this.parentName=t.parentName;let e=this.dependencyHandler._components[this.parentName];if(!e){let a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];a||(a=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName]=[]),a.includes(this)||a.push(this);for(let s of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:s,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:s,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:s});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}let r=this.dependencyHandler.updateTriggers.childDependenciesByParent[this.parentName];if(r||(r=this.dependencyHandler.updateTriggers.childDependenciesByParent[this.parentName]=[]),r.includes(this)||r.push(this),!e.childrenMatched&&!e.childrenMatchedWithPlaceholders){let s=e.unexpandedCompositesNotReady.length>0;if(!s&&e.unexpandedCompositesReady.length>0){for(let o of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"childMatches",blockerStateVariable:o,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:o,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:o,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:o});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}if(s){for(let o of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"childMatches",blockerStateVariable:o,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:o,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:o,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:o});for(let o of e.unexpandedCompositesNotReady)for(let l of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:o,blockerType:"stateVariable",blockerStateVariable:"readyToExpandWhenResolved",componentNameBlocked:this.upstreamComponentName,typeBlocked:"childMatches",stateVariableBlocked:l});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}}return{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]}}deleteFromUpdateTriggers(){let t=this.dependencyHandler.updateTriggers.childDependenciesByParent[this.parentName];if(t){let r=t.indexOf(this);r!==-1&&t.splice(r,1)}if(this.specifiedComponentName){let r=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(r){let a=r.indexOf(this);a!==-1&&r.splice(a,1)}}let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];if(e){let r=e.indexOf(this);r!==-1&&e.splice(r,1)}}getValue(){let t=this.dependencyHandler.components[this.upstreamComponentName].componentType;return{value:this.dependencyHandler.components[this.parentName].activeChildren.filter(a=>a.componentType===t).map(a=>a.componentName).indexOf(this.upstreamComponentName)+1,changes:{}}}};T(tx,"dependencyType","countAmongSiblingsOfSameType");Xe.push(tx);var rx=class extends yt{setUpParameters(){let t=this.dependencyHandler._components[this.upstreamComponentName];this.tName=t.doenetAttributes.tName,this.tName&&(this.targetComponentName=this.specifiedComponentName=t.doenetAttributes.fullTName),this.returnSingleComponent=!0}determineDownstreamComponents(){if(!this.tName)return{downstreamComponentNames:[],downstreamComponentTypes:[]};let t=this.dependencyHandler._components[this.targetComponentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.targetComponentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.targetComponentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.targetComponentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}return{success:!0,downstreamComponentNames:[this.targetComponentName],downstreamComponentTypes:[t.componentType]}}deleteFromUpdateTriggers(){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}};T(rx,"dependencyType","targetComponent");Xe.push(rx);var nx=class extends yt{setUpParameters(){this.parentName=this.upstreamComponentName,this.tName=this.definition.tName}getValue(){let t=this.dependencyHandler._components[this.parentName],e=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,r=this.parentName.split("/").map(s=>({namespace:s}));e||(r=r.slice(0,r.length-1));let a;try{a=G0({tName:this.tName,namespaceStack:r})}catch(s){a=null}return{value:a,changes:{}}}};T(nx,"dependencyType","expandTargetName");Xe.push(nx);var E0=class extends yt{setUpParameters(){this.value=this.definition.value}getValue(){return{value:this.value,changes:{}}}};T(E0,"dependencyType","value");Xe.push(E0);var ix=class extends E0{setUpParameters(){this.flagName=this.definition.flagName,this.value=this.dependencyHandler.core.flags[this.flagName]}};T(ix,"dependencyType","flag");Xe.push(ix);var ax=class extends xl{setUpParameters(){this.attributeName=this.definition.attributeName,this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName}getValue(){let t=null,e={};return this.componentIdentitiesChanged&&(e.componentIdentitiesChanged=!0,this.componentIdentitiesChanged=!1),this.downstreamComponentNames.length===1&&(t=this.dependencyHandler.components[this.downstreamComponentNames[0]].doenetAttributes[this.attributeName]),!this.doNotProxy&&t!==null&&typeof t=="object"&&(t=new Proxy(t,Ge)),{value:t,changes:e}}};T(ax,"dependencyType","doenetAttribute");Xe.push(ax);var sx=class extends xl{setUpParameters(){this.attributeName=this.definition.attributeName,this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName}getValue(){let t=null,e={};return this.componentIdentitiesChanged&&(e.componentIdentitiesChanged=!0,this.componentIdentitiesChanged=!1),this.downstreamComponentNames.length===1&&(t=this.dependencyHandler.components[this.downstreamComponentNames[0]].attributes[this.attributeName],t?t=t.primitive:t=null),!this.doNotProxy&&t!==null&&typeof t=="object"&&(t=new Proxy(t,Ge)),{value:t,changes:e}}};T(sx,"dependencyType","attributePrimitive");Xe.push(sx);var ox=class extends yt{setUpParameters(){this.definition.parentName?(this.parentName=this.definition.parentName,this.specifiedComponentName=this.parentName):this.parentName=this.upstreamComponentName}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.parentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.parentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.parentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}return{success:!0,downstreamComponentNames:[this.parentName],downstreamComponentTypes:[t.componentType]}}getValue(){return{value:this.dependencyHandler._components[this.parentName].serializedChildren,changes:{}}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(ox,"dependencyType","serializedChildren");Xe.push(ox);var lx=class extends yt{setUpParameters(){this.definition.componentName?(this.componentName=this.definition.componentName,this.specifiedComponentName=this.componentName):this.componentName=this.upstreamComponentName}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}return{success:!0,downstreamComponentNames:[this.componentName],downstreamComponentTypes:[t.componentType]}}getValue(){return{value:this.dependencyHandler._components[this.componentName].variants,changes:{}}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}};T(lx,"dependencyType","variants");Xe.push(lx);var ux=class extends yt{setUpParameters(){this.counterName=this.definition.counterName,this.componentName=this.upstreamComponentName}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName],e=t.counters[this.counterName];return e||(e=t.counters[this.counterName]={dependencies:[],componentList:[],value:null}),e.dependencies.includes(this)||e.dependencies.push(this),this.dependencyHandler.collateCountersAndPropagateToAncestors(t),{success:!0,downstreamComponentNames:[],downstreamComponentTypes:[]}}getValue(){return{value:this.dependencyHandler._components[this.componentName].counters[this.counterName].value,changes:{}}}};T(ux,"dependencyType","counter");Xe.push(ux);var cx=class extends yt{setUpParameters(){if(this.recalculateDependencies=!0,this.definition.componentName?this.componentName=this.definition.componentName:this.componentName=this.upstreamComponentName,this.definition.variableNames===void 0)throw Error(`Invalid state variable ${this.representativeStateVariable} of ${this.upstreamComponentName}, dependency ${this.dependencyName}: variableNames is not defined`);this.originalDownstreamVariableNames=this.definition.variableNames,this.returnSingleComponent=!0}determineDownstreamComponents(){let t=this.dependencyHandler._components[this.componentName];if(!t){let e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName];e||(e=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.componentName]=[]),e.includes(this)||e.push(this);for(let r of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.componentName,blockerType:"componentIdentity",componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:r,dependencyBlocked:this.dependencyName}),this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"recalculateDownstreamComponents",blockerStateVariable:r,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:r});return{success:!1,downstreamComponentNames:[],downstreamComponentTypes:[]}}for(let e of this.upstreamVariableNames)this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"determineDependencies",blockerStateVariable:e,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:e});return{success:!0,downstreamComponentNames:[this.componentName],downstreamComponentTypes:[t.componentType]}}deleteFromUpdateTriggers(){if(this.specifiedComponentName){let t=this.dependencyHandler.updateTriggers.dependenciesMissingComponentBySpecifiedName[this.specifiedComponentName];if(t){let e=t.indexOf(this);e!==-1&&t.splice(e,1)}}}markStale(){let t=this.dependencyHandler._components[this.upstreamComponentName];for(let e of this.upstreamVariableNames)if(!(t&&t.state[e]&&t.state[e].currentlyResolving)){this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"determineDependencies",blockerStateVariable:e,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"stateVariable",stateVariableBlocked:e});for(let r in this.dependencyHandler.downstreamDependencies[this.upstreamComponentName][e])this.dependencyHandler.downstreamDependencies[this.upstreamComponentName][e][r].dependencyType!=="determineDependencies"&&this.dependencyHandler.addBlocker({blockerComponentName:this.upstreamComponentName,blockerType:"determineDependencies",blockerStateVariable:e,blockerDependency:this.dependencyName,componentNameBlocked:this.upstreamComponentName,typeBlocked:"recalculateDownstreamComponents",stateVariableBlocked:e,dependencyBlocked:r})}}};T(cx,"dependencyType","determineDependencies");Xe.push(cx);var bU=j(j0()),gU=j(B0()),vU=class{constructor({doenetML:t,parameters:e,requestedVariant:r,externalFunctions:a,flags:s={},stateVariableChanges:o={},coreReadyCallback:l,coreUpdatedCallback:u,coreId:c}){this.coreId=c,this.numerics=new w0,this.flags=new Proxy(s,Ge),this.externalFunctions=a,a===void 0&&(this.externalFunctions={}),this.executeProcesses=this.executeProcesses.bind(this),this.requestUpdate=this.requestUpdate.bind(this),this.performUpdate=this.performUpdate.bind(this),this.requestAction=this.requestAction.bind(this),this.performAction=this.performAction.bind(this),this.triggerChainedActions=this.triggerChainedActions.bind(this),this.requestRecordEvent=this.requestRecordEvent.bind(this),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this._requestAnimationFrame=this._requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this.calculateScoredItemNumberOfContainer=this.calculateScoredItemNumberOfContainer.bind(this),this.finishCoreConstruction=this.finishCoreConstruction.bind(this),this.getStateVariableValue=this.getStateVariableValue.bind(this),this.coreUpdatedCallback=u,this.coreReadyCallback=function(){l(this),this.requestRecordEvent({verb:"experienced",object:{componentName:this.document.componentName,componentType:"document"}})}.bind(this),this._standardComponentClasses=pU(),this._allComponentClasses=mU(),this._componentTypesCreatingVariants=fU(),this._componentTypeWithPotentialVariants=dU(),this.componentTypeLowerCaseMapping={};for(let m in this._allComponentClasses)this.componentTypeLowerCaseMapping[m.toLowerCase()]=m;this.stateVariableInfo={};for(let m in this.allComponentClasses)Object.defineProperty(this.stateVariableInfo,m,{get:function(){let f=this.allComponentClasses[m].returnStateVariableInfo({flags:this.flags});return delete this.stateVariableInfo[m],this.stateVariableInfo[m]=f}.bind(this),configurable:!0});this.publicStateVariableInfo={};for(let m in this.allComponentClasses)Object.defineProperty(this.publicStateVariableInfo,m,{get:function(){let f=this.allComponentClasses[m].returnStateVariableInfo({onlyPublic:!0,flags:this.flags});return delete this.publicStateVariableInfo[m],this.publicStateVariableInfo[m]=f}.bind(this),configurable:!0});this.componentInfoObjects={standardComponentClasses:this.standardComponentClasses,allComponentClasses:this.allComponentClasses,componentTypesCreatingVariants:this.componentTypesCreatingVariants,componentTypeWithPotentialVariants:this.componentTypeWithPotentialVariants,componentTypeLowerCaseMapping:this.componentTypeLowerCaseMapping,isInheritedComponentType:this.isInheritedComponentType,isCompositeComponent:this.isCompositeComponent,stateVariableInfo:this.stateVariableInfo,publicStateVariableInfo:this.publicStateVariableInfo},this.coreFunctions={requestUpdate:this.requestUpdate,performUpdate:this.performUpdate,requestAction:this.requestAction,performAction:this.performAction,triggerChainedActions:this.triggerChainedActions,requestRecordEvent:this.requestRecordEvent,requestAnimationFrame:this.requestAnimationFrame,cancelAnimationFrame:this.cancelAnimationFrame,calculateScoredItemNumberOfContainer:this.calculateScoredItemNumberOfContainer,recordSolutionView:this.externalFunctions.recordSolutionView},this.updateInfo={componentsTouched:[],compositesToExpand:new Set([]),compositesToUpdateReplacements:[],inactiveCompositesToUpdateReplacements:[],componentsToUpdateActionChaining:{},unresolvedDependencies:{},unresolvedByDependent:{},deletedStateVariables:{},deletedComponents:{},recreatedComponents:{},compositesBeingExpanded:[],stateVariableUpdatesForMissingComponents:JSON.parse(JSON.stringify(o,Vd),Id)},this.animationIDs={},this.lastAnimationID=0,this.requestedVariant=r,this.parameterStack=new A0(e),this.parameterStack.parameters.rngClass=hU;let p=gU.default.stringify((0,bU.default)(t));L0({contentIds:[p],doenetMLs:[t],callBack:this.finishCoreConstruction,componentInfoObjects:this.componentInfoObjects,componentTypeLowerCaseMapping:this.componentTypeLowerCaseMapping,flags:this.flags,contentIdsToDoenetMLs:this.externalFunctions.contentIdsToDoenetMLs})}finishCoreConstruction({contentIds:t,fullSerializedComponents:e,finishSerializedStateProcessing:r=!0,calledAsynchronously:a=!1}){this.contentId=t[0];let s=e[0];xx(s),r?no({serializedComponents:s,componentInfoObjects:this.componentInfoObjects}):s[0].doenetAttributes===void 0&&(s[0].doenetAttributes={}),this.documentName=s[0].componentName,s[0].doenetAttributes.contentId=this.contentId,this._components={},this.renderedComponentInstructions={},this.componentsWithChangedChildrenToRender=new Set([]),this.stateVariableChangeTriggers={},this.actionsChangedToActions={},this.originsOfActionsChangedToActions={},this._renderComponents=[],this._renderComponentsByName={},this._graphRenderComponents=[],this.processQueue=[],this.dependencies=new Lw({_components:this._components,componentInfoObjects:this.componentInfoObjects,core:this}),this.unmatchedChildren={},this.requestedVariant!==void 0&&(this.parameterStack.parameters.variant=this.requestedVariant),s[0].variants={desiredVariant:this.parameterStack.parameters.variant},window.state={components:this._components,renderedComponentInstructions:this.renderedComponentInstructions,renderedComponentTypes:this.renderedComponentTypes,dependencies:this.dependencies,core:this,componentInfoObjects:this.componentInfoObjects},this.changedStateVariables={},this.addComponents({serializedComponents:s,initialAdd:!0}),this.updateInfo.componentsTouched=[],this.rendererTypesInDocument=this.document.allPotentialRendererTypes,this.document.stateValues.itemCreditAchieved,a?this.coreReadyCallback():setTimeout(()=>this.coreReadyCallback(),0)}addComponents({serializedComponents:t,parentName:e,indexOfDefiningChildren:r,initialAdd:a=!1,assignNamesOffset:s}){Array.isArray(t)||(t=[t]);let o,l=[],u="";if(!a){if(o=this._components[e],!o)return console.warn(`Cannot add children to parent ${e} as ${e} does not exist`),[];if(o.isShadow)return console.warn(`Cannot add children to parent ${e} as it is a shadow component.`),[];l=[{componentName:e,componentClass:o.constructor},...o.ancestors],this.parameterStack.push(o.sharedParameters,!1),this.nTimesAddedComponents?this.nTimesAddedComponents++:this.nTimesAddedComponents=1,u=`addComponents${this.nTimesAddedComponents}`}let c=this.createIsolatedComponents({serializedComponents:t,ancestors:l,createNameContext:u});if(a||this.parameterStack.pop(),c.success!==!0)throw Error(c.message);let p=c.components,m={},f={};if(p.forEach(d=>f[d.componentName]=d),a){if(p.length!==1)throw Error("Initial components need to be an array of just one component.");this.document=p[0],this.expandAllComposites(this.document),this.expandAllComposites(this.document,!0),this.replacementChangesFromCompositesToUpdate(),this.initializeRenderedComponentInstruction(this.document),this.processStateVariableTriggers()}else{if(o===void 0)throw Error("Must specify parent when adding components.");r===void 0&&(r=o.definingChildren.length);let d=this.addChildrenAndRecurseToShadows({parent:o,indexOfDefiningChildren:r,newChildren:p,assignNamesOffset:s});if(!d.success)throw Error("Couldn't satisfy child logic result.  Need informative error message");Object.assign(f,d.addedComponents),Object.assign(m,d.deletedComponents),this.expandAllComposites(this.document),this.expandAllComposites(this.document,!0),this.replacementChangesFromCompositesToUpdate(),this.updateRendererInstructions({componentNames:this.componentAndRenderedDescendants(o)}),this.processStateVariableTriggers()}return this.finishUpdate({addedComponents:f,deletedComponents:m,init:a}),p}updateRendererInstructions({componentNames:t,sourceOfUpdate:e,recreatedComponents:r={}}){let a=[],s=[],o=[];for(let l of t)l in this.renderedComponentInstructions&&a.push(l);for(let l of this.componentsWithChangedChildrenToRender)if(l in this.renderedComponentInstructions){let u=[],c=this._components[l];c&&c.constructor.renderChildren&&(c.childrenMatched||this.deriveChildResultsFromDefiningChildren({parent:c,expandComposites:!0,forceExpandComposites:!0}),u=c.activeChildren.filter(y=>y.rendererType).map(y=>y.componentName));let p=this.renderedComponentInstructions[l].children,m=p.map(y=>y.componentName),f=[],d=[];for(let[y,b]of m.entries())u.includes(b)&&!r[b]?f.push(b):d.push({childName:b,ind:y});for(let{childName:y,ind:b}of d.reverse()){let g=this.deleteFromRenderedComponentInstructions({componentName:y,recurseToChildren:!0});p.splice(b,1),o.push({instructionType:"deleteRenderers",parentName:l,firstIndexInParent:b,numberChildrenDeleted:1,deletedComponentNames:g}),s.push(...g)}let h=u.filter(y=>f.includes(y));for(let y=0;y<h.length;y++)if(f[y]!==h[y]){let b=f.indexOf(h[y]);[p[y],p[b]]=[p[b],p[y]],[f[y],f[b]]=[f[b],f[y]],o.push({instructionType:"swapChildRenderers",parentName:l,index1:y,index2:b})}for(let[y,b]of u.entries())if(!m.includes(b)||r[b]){let g=this._components[b];if(g&&g.rendererType){let v=this.initializeRenderedComponentInstruction(g);p.splice(y,0,v),o.push({instructionType:"addRenderer",componentName:g.componentName,parentName:l,indexForParent:y})}}}if(this.componentsWithChangedChildrenToRender=new Set([]),a=a.filter(l=>!s.includes(l)),a.length>0){let l={instructionType:"updateStateVariable",renderersToUpdate:a,sourceOfUpdate:e};o.push(l)}for(let l of a){let u=this._components[l],c={};for(let p in u.state)if(u.state[p].forRenderer){let m=u.state[p].value;m!==null&&typeof m=="object"&&(m=new Proxy(m,Ge)),c[p]=m}Object.assign(this.renderedComponentInstructions[l].stateValues,c)}this.coreUpdatedCallback(o)}initializeRenderedComponentInstruction(t){if(t.rendererType===void 0)return;t.childrenMatched||this.deriveChildResultsFromDefiningChildren({parent:t,expandComposites:!0});let e={};for(let o in t.state)if(t.state[o].forRenderer){let l=t.state[o].value;l!==null&&typeof l=="object"&&(l=new Proxy(l,Ge)),e[o]=l}let r=t.componentName,a=[];if(t.constructor.renderChildren)for(let o of t.activeChildren)o.rendererType&&a.push(this.initializeRenderedComponentInstruction(o));this.componentsWithChangedChildrenToRender.delete(r);let s={};for(let o in t.actions)s[o]=l=>this.requestAction({componentName:t.componentName,actionName:o,args:l});for(let o in t.externalActions){let l=t.externalActions[o];l&&(s[o]=u=>this.requestAction({componentName:l.componentName,actionName:l.actionName,args:u}))}return this.renderedComponentInstructions[r]={componentName:r,componentType:t.componentType,rendererType:t.rendererType,stateValues:e,children:a,actions:s},this.renderedComponentInstructions[r]}deleteFromRenderedComponentInstructions({componentName:t,recurseToChildren:e=!0}){let r=[t];if(e){let a=this.renderedComponentInstructions[t];if(a)for(let s of a.children){let o=this.deleteFromRenderedComponentInstructions({componentName:s.componentName,recurseToChildren:e});r.push(...o)}}return delete this.renderedComponentInstructions[t],r}processStateVariableTriggers(){for(let t in this.stateVariableChangeTriggers){let e=this._components[t];for(let r in this.stateVariableChangeTriggers[t]){let a=this.stateVariableChangeTriggers[t][r],s=e.state[r].value;if(s!==a.previousValue){let o=a.previousValue;a.previousValue=s,e.actions[a.action]&&this.performAction({componentName:t,actionName:a.action,args:{stateValues:{[r]:s},previousValues:{[r]:o}}})}}}}expandAllComposites(t,e=!1){let r=this.expandCompositesOfDescendants(t,e),a=!0;for(;a;){a=!1;for(let s of r){let o=this._components[s],l=!1;for(let u of o.unexpandedCompositesNotReady){let c=this._components[u];if(c.state.readyToExpandWhenResolved.isResolved){l=!0;break}else if(this.dependencies.resolveItem({componentName:c.componentName,type:"stateVariable",stateVariable:"readyToExpandWhenResolved",force:e,recurseUpstream:!0}).success){l=!0;break}}if(l){let u=this._components[s];this.deriveChildResultsFromDefiningChildren({parent:u,expandComposites:!0,forceExpandComposites:e}),a=!0}}}}expandCompositesOfDescendants(t,e=!1){let r=[];t.childrenMatched||(this.deriveChildResultsFromDefiningChildren({parent:t,expandComposites:!0,forceExpandComposites:e}),t.unexpandedCompositesNotReady.length>0?r.push(t.componentName):this.dependencies.resolveBlockersFromChangedActiveChildren(t,e));for(let a in t.attributes){let s=t.attributes[a].component;if(s){let o=this.expandCompositesOfDescendants(s,e);r.push(...o)}}for(let a in t.allChildren){let s=this._components[a],o=this.expandCompositesOfDescendants(s,e);r.push(...o)}return r}componentAndRenderedDescendants(t){if(t===void 0)return[];let e=[t.componentName];if(t.constructor.renderChildren){t.childrenMatched||this.deriveChildResultsFromDefiningChildren({parent:t,expandComposites:!0});for(let r of t.activeChildren)e.push(...this.componentAndRenderedDescendants(r))}return e}createIsolatedComponents({serializedComponents:t,ancestors:e,applyAdapters:r=!0,shadow:a=!1,createNameContext:s=""}){let o="/";if(e.length>0){let c=e[0].componentName,p=this.components[c];p.attributes.newNamespace&&p.attributes.newNamespace.primitive?o=p.componentName+"/":o=to(p.componentName)}let l=this.createIsolatedComponentsSub({serializedComponents:t,ancestors:e,applyAdapters:r,shadow:a,namespaceForUnamed:o,createNameContext:s}),u=[...new Set(this.updateInfo.componentsTouched)];return{success:!0,components:l.components,componentsTouched:u}}createIsolatedComponentsSub({serializedComponents:t,ancestors:e,applyAdapters:r=!0,shadow:a=!1,createNameContext:s="",namespaceForUnamed:o="/",componentsReplacementOf:l}){let u=[],c="";for(let[m,f]of t.entries()){if(f.createdComponent===!0){let g=this._components[f.componentName];u.push(g),this.setAncestors(g,e);continue}let d=this.allComponentClasses[f.componentType];if(d===void 0)throw Error("Cannot create component of type "+f.componentType);f.doenetAttributes||(f.doenetAttributes={});let h=f.componentName;if(h===void 0){let v=e[0].componentName+"|"+s+"|";f.uniqueIdentifier?v+=f.uniqueIdentifier:v+=m,h=Ni(f.componentType.toLowerCase(),v),h=o+h}let b=this.createChildrenThenComponent({serializedComponent:f,componentName:h,ancestors:e,componentClass:d,applyAdapters:r,shadow:a,namespaceForUnamed:o,componentsReplacementOf:l}).newComponent;u.push(b)}return{components:u}}createChildrenThenComponent({serializedComponent:t,componentName:e,ancestors:r,componentClass:a,applyAdapters:s=!0,shadow:o=!1,namespaceForUnamed:l="/",componentsReplacementOf:u}){let c=t.children,p=[],m=[],f=[{componentName:e,componentClass:a},...r],d=this.parameterStack.parameters;this.parameterStack.push();let h=this.parameterStack.parameters;a.descendantCompositesMustHaveAReplacement&&(h.compositesMustHaveAReplacement=!0,h.compositesDefaultReplacementType=a.descendantCompositesDefaultReplacementType);let y=this.propagateAncestorProps({componentClass:a,componentName:e,sharedParameters:h});if(a.modifySharedParameters&&a.modifySharedParameters({sharedParameters:h,serializedComponent:t}),t.doenetAttributes.pushSharedParameters)for(let A of t.doenetAttributes.pushSharedParameters){let E=A.parameterName;E in h?h[E]=[...h[E]]:h[E]=[],h[E].push(A.value)}if(t.doenetAttributes.addToSharedParameters)for(let A of t.doenetAttributes.addToSharedParameters){let E=A.parameterName;E in h?h[E]=Object.assign({},h[E]):h[E]={},h[E][A.key]=A.value}if(c!==void 0){let A=!1,E,I;if(a.alwaysSetUpVariant||a.setUpVariantIfVariantControlChild){for(let[V,O]of c.entries())if(O.componentType==="variantControl"||O.createdComponent&&this._components[O.componentName].componentType==="variantControl"){E=V,I=O;break}(E!==void 0||a.alwaysSetUpVariant)&&(A=!0)}if(!A&&a.setUpVariantUnlessAttributePrimitive){let V=a.setUpVariantUnlessAttributePrimitive;t.attributes&&t.attributes[V]&&t.attributes[V].primitive||(A=!0)}if(A){let V=Np({serializedComponents:c,componentInfoObjects:this.componentInfoObjects});if(E!==void 0){if(t.variants){let G=t.variants.desiredVariant;G!==void 0&&(G.index!==void 0?I.variants={desiredVariantIndex:G.index}:G.name!==void 0&&(I.variants={desiredVariantName:G.name})),t.variants.uniqueVariants&&(h.numberOfVariants=t.variants.numberOfVariants)}let L=this.createIsolatedComponentsSub({serializedComponents:[I],ancestors:f,applyAdapters:s,shadow:o,createNameContext:"variantControl",namespaceForUnamed:l});p[E]=L.components[0]}a.setUpVariant({serializedComponent:t,sharedParameters:h,definingChildrenSoFar:p,allComponentClasses:this.allComponentClasses,descendantVariantComponents:V});let O=[...c.keys()].filter(L=>L!==E),k=c.filter((L,G)=>G!==E),M=this.createIsolatedComponentsSub({serializedComponents:k,ancestors:f,applyAdapters:s,shadow:o,namespaceForUnamed:l});for(let[L,G]of O.entries())p[G]=M.components[L]}else if(a.keepChildrenSerialized){let V=new Set([]),O=a.keepChildrenSerialized({serializedComponent:t,componentInfoObjects:this.componentInfoObjects});for(let M of O){if(V.has(Number(M)))throw Error("Invalid instructions to keep children serialized from "+a.componentType+": child repeated");V.add(Number(M)),m.push(c[M])}let k=[];for(let[M,L]of c.entries())V.has(M)||k.push(L);k.length>0&&(p=this.createIsolatedComponentsSub({serializedComponents:k,ancestors:f,applyAdapters:s,shadow:o,namespaceForUnamed:l}).components)}else p=this.createIsolatedComponentsSub({serializedComponents:c,ancestors:f,applyAdapters:s,shadow:o,namespaceForUnamed:l}).components}let b={};if(t.attributes)for(let A in t.attributes)if(t.attributes[A].component){let I=this.createIsolatedComponentsSub({serializedComponents:[t.attributes[A].component],ancestors:f,applyAdapters:s,shadow:o,namespaceForUnamed:l,createNameContext:`attribute|${A}`});b[A]={component:I.components[0]}}else b[A]=t.attributes[A];let g={};t.downstreamDependencies&&Object.assign(g,t.downstreamDependencies);for(let A in y){let E=y[A],I=E.componentName;g[I]===void 0&&(g[I]=[]),g[I].push({dependencyType:"ancestorProp",attribute:A,ancestorIdentity:E})}let v=this.createStateVariableDefinitions({componentClass:a,prescribedDependencies:g});this.updateInfo.deletedComponents[e]&&(this.updateInfo.recreatedComponents[e]=!0),delete this.updateInfo.deletedComponents[e],delete this.updateInfo.deletedStateVariables[e];let C=new a({componentName:e,ancestors:r,definingChildren:p,stateVariableDefinitions:v,serializedChildren:m,serializedComponent:t,attributes:b,componentInfoObjects:this.componentInfoObjects,coreFunctions:this.coreFunctions,flags:this.flags,shadow:o,numerics:this.numerics,sharedParameters:h,parentSharedParameters:d});this.registerComponent(C),u&&(C.replacementOf=u),t.adaptedFrom&&(C.adaptedFrom=this._components[t.adaptedFrom],C.adaptedFrom.adapterUsed=C);for(let A in g){let E=g[A];for(let I of E)if(I.dependencyType==="referenceShadow"){let V={componentName:A};Object.assign(V,I),delete V.dependencyType,C.shadows=new Proxy(V,Ge);let O=this._components[A];O.shadowedBy||(O.shadowedBy=[]),O.shadowedBy.push(C);break}}this.deriveChildResultsFromDefiningChildren({parent:C,expandComposites:!1}),this.initializeComponentStateVariables(C),this.dependencies.setUpComponentDependencies(C);let w=this.dependencies.checkForDependenciesOnNewComponent(e);for(let A of w)this.recordActualChangeInStateVariable({componentName:A.componentName,varName:A.varName});return this.checkForStateVariablesUpdatesForNewComponent(e),this.dependencies.resolveStateVariablesIfReady({component:C}),this.checkForActionChaining({component:C}),this.parameterStack.pop(),{newComponent:C}}checkForStateVariablesUpdatesForNewComponent(t){t in this.updateInfo.stateVariableUpdatesForMissingComponents&&(this.processNewStateVariableValues({[t]:this.updateInfo.stateVariableUpdatesForMissingComponents[t]}),delete this.updateInfo.stateVariableUpdatesForMissingComponents[t])}propagateAncestorProps({componentClass:t,componentName:e,sharedParameters:r}){let a=t.createAttributesObject({flags:this.flags}),s={};for(let u in a)a[u].propagateToDescendants&&(s[u]={componentName:e,componentType:t.componentType});let o={},l={};for(let u in r.attributesToPropagate)u in a&&(l[u]=!0,a[u].ignorePropagationFromAncestors||(o[u]=r.attributesToPropagate[u]));if(Object.keys(s).length>0||Object.keys(l).length>0){if(r.attributesToPropagate){r.attributesToPropagate=Object.assign({},r.attributesToPropagate);for(let u in l)delete r.attributesToPropagate[u]}else r.attributesToPropagate={};Object.assign(r.attributesToPropagate,s)}return o}deriveChildResultsFromDefiningChildren({parent:t,expandComposites:e=!0,forceExpandComposites:r=!1}){if(this.derivingChildResults||(this.derivingChildResults=[]),this.derivingChildResults.includes(t.componentName))return{success:!1,skipping:!0};this.derivingChildResults.push(t.componentName),t.activeChildren&&this.evaluatedDeferredChildStateVariables(t);let a=this.expandCompositeOfDefiningChildren(t,t.definingChildren,e,r);t.unexpandedCompositesReady=a.unexpandedCompositesReady,t.unexpandedCompositesNotReady=a.unexpandedCompositesNotReady,t.activeChildren=t.definingChildren.slice(),t.allChildren={};for(let l=0;l<t.activeChildren.length;l++){let u=t.activeChildren[l];t.allChildren[u.componentName]={activeChildrenIndex:l,definingChildrenIndex:l,component:u}}if(t.allChildrenOrdered=t.activeChildren.map(l=>l.componentName),this.replaceCompositeChildren(t),!t.constructor.includeBlankStringChildren||t.constructor.removeBlankStringChildrenPostSugar){let l=[],u=!1,c=0;for(let p of t.activeChildren)p.componentType==="string"&&!/\S/.test(p.stateValues.value)?u=!0:(l.push(p),u&&p.componentName&&(t.allChildren[p.componentName].activeChildrenIndex=c),c++);t.activeChildren=l}let s=this.matchChildrenToChildGroups(t);if(s.success)delete this.unmatchedChildren[t.componentName],t.childrenMatchedWithPlaceholders=!0;else{t.childrenMatchedWithPlaceholders=!1;let l=s.unmatchedChildren.map(u=>u.componentType).join(", ");this.unmatchedChildren[t.componentName]={message:`invalid children of type(s): ${l}`}}this.dependencies.addBlockersFromChangedActiveChildren({parent:t});let o=this.derivingChildResults.indexOf(t.componentName);return this.derivingChildResults.splice(o,1),t.constructor.renderChildren&&this.componentsWithChangedChildrenToRender.add(t.componentName),s}expandCompositeOfDefiningChildren(t,e,r,a){let s=[],o=[];for(let l=0;l<e.length;l++){let u=e[l];if(u instanceof this._allComponentClasses._composite){if(this.findChildGroup(u.componentType,t.constructor).success)continue;if(!u.isExpanded){if(u.state.readyToExpandWhenResolved.isResolved){if(!r){s.push(u.componentName),this.updateInfo.compositesToExpand.add(u.componentName);continue}}else if(r){if(!this.dependencies.resolveItem({componentName:u.componentName,type:"stateVariable",stateVariable:"readyToExpandWhenResolved",expandComposites:r,force:a}).success){o.push(u.componentName),this.updateInfo.compositesToExpand.add(u.componentName);continue}}else{o.push(u.componentName),this.updateInfo.compositesToExpand.add(u.componentName);continue}this.expandCompositeComponent(u)}let c=this.expandCompositeOfDefiningChildren(t,u.replacements,r,a);s.push(...c.unexpandedCompositesReady),o.push(...c.unexpandedCompositesNotReady)}}return{unexpandedCompositesReady:s,unexpandedCompositesNotReady:o}}matchChildrenToChildGroups(t){t.childMatchesByGroup={};for(let a in t.constructor.childGroupIndsByName)t.childMatchesByGroup[a]=[];let e=!0,r=[];for(let[a,s]of t.activeChildren.entries()){let o=this.findChildGroup(s.componentType,t.constructor);o.success?(t.childMatchesByGroup[o.group].push(a),o.adapterIndUsed!==void 0&&this.substituteAdapter({parent:t,childInd:a,adapterIndUsed:o.adapterIndUsed})):(e=!1,r.push(s))}return{success:e,unmatchedChildren:r}}findChildGroup(t,e){let r=this.findChildGroupNoAdapters(t,e);if(r.success)return r;let a=this.allComponentClasses[t],s=a.nAdapters;for(let o=0;o<s;o++){let l=a.getAdapterComponentType(o,this.publicStateVariableInfo);if(r=this.findChildGroupNoAdapters(l,e),r.success)return r.adapterIndUsed=o,r}return{success:!1}}findChildGroupNoAdapters(t,e){if(e.childGroupOfComponentType[t])return{success:!0,group:e.childGroupOfComponentType[t]};for(let r of e.childGroups)for(let a of r.componentTypes)if(this.componentInfoObjects.isInheritedComponentType({inheritedComponentType:t,baseComponentType:a})&&!(a==="_base"&&this.componentInfoObjects.isInheritedComponentType({inheritedComponentType:t,baseComponentType:"_composite"})))return e.childGroupOfComponentType[t]=r.group,{success:!0,group:r.group};return{success:!1}}substituteAdapter({parent:t,childInd:e,adapterIndUsed:r}){let a=t.activeChildren[e],s;a.componentName?s=a.getAdapter(r):s={componentType:this.allComponentClasses[a.componentType].getAdapterComponentType(n,this.publicStateVariableInfo),placeholderInd:a.placeholderInd+"adapt"};let o=a.adapterUsed;if(o===void 0||o.componentType!==s.componentType)if(a.componentName){let l;t.attributes.newNamespace&&t.attributes.newNamespace.primitive?l=t.componentName+"/":l=to(t.componentName),s.adaptedFrom=a.componentName,o=this.createIsolatedComponentsSub({serializedComponents:[s],shadow:!0,ancestors:a.ancestors,createNameContext:a.componentName+"|adapter",namespaceForUnamed:l}).components[0]}else s.adaptedFrom=a,o=s;if(t.activeChildren.splice(e,1,o),a.componentName&&(delete t.allChildren[a.componentName].activeChildrenIndex,t.allChildren[o.componentName]={activeChildrenIndex:e,component:o}),a.componentName){let l=t.allChildrenOrdered.indexOf(a.componentName);t.allChildrenOrdered.splice(l+1,0,o.componentName)}else{let l=t.allChildrenOrdered.indexOf(a.placeholderInd);t.allChildrenOrdered.splice(l+1,0,o.placeholderInd)}}expandCompositeComponent(t){if(!("readyToExpandWhenResolved"in t.state))throw Error(`Could not find state variable readyToExpandWhenResolved of composite ${t.componentName}`);if(!t.state.readyToExpandWhenResolved.isResolved)return this.updateInfo.compositesToExpand.add(t.componentName),{success:!1};if(this.updateInfo.compositesToExpand.delete(t.componentName),this.updateInfo.compositesBeingExpanded.push(t.componentName),t.parent){if(t.parent.unexpandedCompositesReady){let a=t.parent.unexpandedCompositesReady.indexOf(t.componentName);a!==-1&&t.parent.unexpandedCompositesReady.splice(a,1)}if(t.parent.unexpandedCompositesNotReady){let a=t.parent.unexpandedCompositesNotReady.indexOf(t.componentName);a!==-1&&t.parent.unexpandedCompositesNotReady.splice(a,1)}}if(t.shadows)return this.expandShadowingComposite(t);let e=t.constructor.createSerializedReplacements({component:this.components[t.componentName],components:this.components,workspace:t.replacementsWorkspace,componentInfoObjects:this.componentInfoObjects,flags:this.flags,resolveItem:this.dependencies.resolveItem.bind(this.dependencies),publicCaseInsensitiveAliasSubstitutions:this.publicCaseInsensitiveAliasSubstitutions.bind(this)});if(t.constructor.stateVariableToEvaluateAfterReplacements&&t.stateValues[t.constructor.stateVariableToEvaluateAfterReplacements],e.replacements){let a=e.replacements;this.createAndSetReplacements({component:t,serializedReplacements:a}),e.withholdReplacements&&(t.replacementsToWithhold=t.replacements.length)}else throw Error(`Invalid createSerializedReplacements of ${t.componentName}`);let r=this.updateInfo.compositesBeingExpanded.indexOf(t.componentName);if(r===-1)throw Error(`Something is wrong as we lost track that we were expanding ${t.componentName}`);return this.updateInfo.compositesBeingExpanded.splice(r,1),{success:!0,compositesExpanded:[t.componentName]}}expandShadowingComposite(t){if(this.updateInfo.compositesBeingExpanded.includes(t.shadows.componentName)){let p=this._components[t.shadows.componentName];for(;p.shadows;)p=this._components[p.shadows.componentName];throw Error(`Circular reference involving ${p.componentName}`)}let e=this._components[t.shadows.componentName],r=[];if(!e.isExpanded){let p=this.expandCompositeComponent(e);if(!p.success)throw Error(`expand result of ${t.componentName} was not a success even though ready to expand.`);r.push(...p.compositesExpanded)}let a=e.replacements.map(p=>p.serialize({forLink:!0})),s=t.replacementsWorkspace.uniqueIdentifiersUsed=[],o=t.shadows.compositeName;a=Rr({serializedComponents:a,componentName:o,uniqueIdentifiersUsed:s});let l=t.attributes.newNamespace&&t.attributes.newNamespace.primitive,u=t.constructor.createAttributesObject({flags:this.flags});for(let p of a){p.attributes||(p.attributes={});let m=Ye({attributes:t.attributes,componentType:p.componentType,componentInfoObjects:this.componentInfoObjects,compositeAttributesObj:u,compositeCreatesNewNamespace:l});Object.assign(p.attributes,m)}if(t.constructor.assignNamesToReplacements){let p=t.constructor.originalNamesAreConsistent&&l;a=de({assignNames:t.doenetAttributes.assignNames,serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:l,componentInfoObjects:this.componentInfoObjects,originalNamesAreConsistent:p}).serializedComponents}else{let p=l;a=de({serializedComponents:a,parentName:t.componentName,parentCreatesNewNamespace:l,componentInfoObjects:this.componentInfoObjects,originalNamesAreConsistent:p}).serializedComponents}this.createAndSetReplacements({component:t,serializedReplacements:a});let c=this.updateInfo.compositesBeingExpanded.indexOf(t.componentName);if(c===-1)throw Error(`Something is wrong as we lost track that we were expanding ${t.componentName}`);return this.updateInfo.compositesBeingExpanded.splice(c,1),r.push(t.componentName),{success:!0,compositesExpanded:r}}createAndSetReplacements({component:t,serializedReplacements:e}){this.parameterStack.push(t.sharedParameters,!1);let r;t.attributes.newNamespace&&t.attributes.newNamespace.primitive?r=t.componentName+"/":r=to(t.componentName);let a=this.createIsolatedComponentsSub({serializedComponents:e,ancestors:t.ancestors,shadow:!0,createNameContext:t.componentName+"|replacements",namespaceForUnamed:r,componentsReplacementOf:t});this.parameterStack.pop(),t.replacements=a.components,this.dependencies.addBlockersFromChangedReplacements(t),t.isExpanded=!0}replaceCompositeChildren(t){delete t.placeholderActiveChildrenIndices,delete t.placeholderActiveChildrenIndicesByComposite;let e=0;for(let r=0;r<t.activeChildren.length;r++){let a=t.activeChildren[r];if(a instanceof this._allComponentClasses._composite){if(this.findChildGroup(a.componentType,t.constructor).success)continue;let s=!1;if(!a.isExpanded)if(a.attributes.componentType&&a.attributes.componentType.primitive)s=!0;else continue;let o;if(s){let c;a.attributes.nComponents?c=a.attributes.nComponents.primitive:c=1;let p=this.componentInfoObjects.componentTypeLowerCaseMapping[a.attributes.componentType.primitive.toLowerCase()];o=[];for(let f=0;f<c;f++)o.push({componentType:p,fromComposite:a.componentName,placeholderInd:e}),e++;t.hasPlaceholderActiveChildren=!0;let m=[...Array(c).keys()].map(f=>f+r);t.placeholderActiveChildrenIndices||(t.placeholderActiveChildrenIndices=[]),t.placeholderActiveChildrenIndices.push(...m),t.placeholderActiveChildrenIndicesByComposite||(t.placeholderActiveChildrenIndicesByComposite={}),t.placeholderActiveChildrenIndicesByComposite[a.componentName]=m}else this.markWithheldReplacementsInactive(a),o=a.replacements,a.replacementsToWithhold>0&&(o=o.slice(0,-a.replacementsToWithhold));t.activeChildren.splice(r,1,...o);let l=t.allChildren[a.componentName];delete l.activeChildrenIndex;for(let c=0;c<o.length;c++){let p=o[c];p.componentName&&(t.allChildren[p.componentName]={activeChildrenIndex:r+c,component:p})}let u=t.allChildrenOrdered.indexOf(a.componentName);if(t.allChildrenOrdered.splice(u+1,0,...o.map(c=>c.componentName?c.componentName:c.placeholderInd)),o.length!==1){let c=o.length-1;for(let p=r+o.length;p<t.activeChildren.length;p++){let m=t.activeChildren[p];t.allChildren[m.componentName].activeChildrenIndex+=c}}r--}}}markWithheldReplacementsInactive(t){let e=t.replacements.length;t.stateValues.isInactiveCompositeReplacement?e=0:t.replacementsToWithhold>0&&(e-=t.replacementsToWithhold);for(let r of t.replacements.slice(0,e))this.changeInactiveComponentAndDescendants(r,!1);for(let r of t.replacements.slice(e))this.changeInactiveComponentAndDescendants(r,!0);if(!t.stateValues.isInactiveCompositeReplacement){let r=t.componentName;this.updateInfo.inactiveCompositesToUpdateReplacements.includes(r)&&(this.updateInfo.inactiveCompositesToUpdateReplacements=this.updateInfo.inactiveCompositesToUpdateReplacements.filter(a=>a!=r),this.updateInfo.compositesToUpdateReplacements.push(r))}}changeInactiveComponentAndDescendants(t,e){if(t.stateValues.isInactiveCompositeReplacement!==e){t.state.isInactiveCompositeReplacement.value=e,this.markUpstreamDependentsStale({component:t,varName:"isInactiveCompositeReplacement"}),this.dependencies.recordActualChangeInUpstreamDependencies({component:t,varName:"isInactiveCompositeReplacement"});for(let r in t.allChildren)this.changeInactiveComponentAndDescendants(this._components[r],e);for(let r in t.attributes){let a=t.attributes[r].component;a&&this.changeInactiveComponentAndDescendants(this._components[a.componentName],e)}t.replacements&&this.markWithheldReplacementsInactive(t)}}findShadowedChildInSerializedComponents({serializedComponents:t,shadowedComponentName:e}){for(let r of t){if(r.originalName===e)return r;if(r.children){let a=this.findShadowedChildInSerializedComponents({serializedComponents:r.children,shadowedComponentName:e});if(a)return a}}}createStateVariableDefinitions({componentClass:t,prescribedDependencies:e}){let r,a={};if(e)for(let l in e){let u=e[l];for(let c of u)c.dependencyType==="referenceShadow"?r={linkSource:"referenceShadow",targetName:l,compositeName:c.compositeName,propVariable:c.propVariable,arrayStateVariable:c.arrayStateVariable,arrayKey:c.arrayKey,ignorePrimaryStateVariable:c.ignorePrimaryStateVariable,substituteForPrimaryStateVariable:c.substituteForPrimaryStateVariable,firstLevelReplacement:c.firstLevelReplacement}:c.dependencyType==="adapter"?r={linkSource:"adapter",adapterTargetIdentity:c.adapterTargetIdentity,adapterVariable:c.adapterVariable,substituteForPrimaryStateVariable:c.substituteForPrimaryStateVariable}:c.dependencyType==="ancestorProp"&&(a[c.attribute]=c.ancestorIdentity)}let s={};r||this.createAttributeStateVariableDefinitions({ancestorProps:a,stateVariableDefinitions:s,componentClass:t});let o=t.returnNormalizedStateVariableDefinitions({attributeNames:Object.keys(s),numerics:this.numerics});return Object.assign(s,o),r&&(r.linkSource==="adapter"?this.createAdapterStateVariableDefinitions({redefineDependencies:r,stateVariableDefinitions:s,componentClass:t}):this.createReferenceShadowStateVariableDefinitions({redefineDependencies:r,stateVariableDefinitions:s,componentClass:t,ancestorProps:a})),s}createAttributeStateVariableDefinitions({componentClass:t,ancestorProps:e,stateVariableDefinitions:r}){let a=t.createAttributesObject({flags:this.flags});for(let s in a){let o=a[s];if(!o.createStateVariable)continue;let l=o.createStateVariable,u=r[l]={isAttribute:!0},c=!o.createComponentOfType;o.public&&(u.public=!0,u.componentType=o.stateVariableComponentType,u.componentType===void 0&&(c?u.componentType=o.createPrimitiveOfType:u.componentType=o.createComponentOfType));let p;if(!c){let f=this.allComponentClasses[o.createComponentOfType];if(!f)throw Error(`Component type ${o.createComponentOfType} does not exist so cannot create state variable for attribute ${s} of componentType ${t.componentType}.`);p=o.componentStateVariableForAttributeValue,p===void 0&&(p=f.stateVariableForAttributeValue,p===void 0&&(p="value"))}if(s in e){u.returnDependencies=function(){let d={ancestorProp:{dependencyType:"stateVariable",componentName:e[s].componentName,variableName:s}};return c?d.attributePrimitive={dependencyType:"attributePrimitive",attributeName:s}:d.attributeComponent={dependencyType:"attributeComponent",attributeName:s,variableNames:[p]},d};let f=d=>d;u.componentType==="boolean"?f=Boolean:u.componentType==="text"&&(f=String),u.definition=function({dependencyValues:d,usedDefault:h}){let y;if(d.attributeComponent)y=d.attributeComponent.stateValues[p];else if(d.attributePrimitive!==void 0&&d.attributePrimitive!==null)y=d.attributePrimitive;else return h.ancestorProp?{useEssentialOrDefaultValue:{[l]:{variablesToCheck:[l,s],defaultValue:f(d.ancestorProp)}}}:{newValues:{[l]:f(d.ancestorProp)}};if(y=bd({value:y,attributeSpecification:o,attribute:s}),o.mergeArrays&&Array.isArray(d.ancestorProp)&&Array.isArray(y)){let b=[...y,...d.ancestorProp];return{newValues:{[l]:b}}}else return{newValues:{[l]:y}}},u.inverseDefinition=function({desiredStateVariableValues:d,dependencyValues:h,usedDefault:y}){return h.attributeComponent?o.mergeArrays?{success:!1}:{success:!0,instructions:[{setDependency:"attributeComponent",desiredValue:d[l],variableIndex:0}]}:h.attributePrimitive!==void 0&&h.attributePrimitive!==null?{success:!1}:y.ancestorProp?{success:!0,instructions:[{setStateVariable:l,value:d[l]}]}:{success:!0,instructions:[{setDependency:"ancestorProp",desiredValue:d[l]}]}}}else u.returnDependencies=function(){return c?{attributePrimitive:{dependencyType:"attributePrimitive",attributeName:s}}:{attributeComponent:{dependencyType:"attributeComponent",attributeName:s,variableNames:[p]}}},u.definition=function({dependencyValues:f}){let d;if(f.attributeComponent)d=f.attributeComponent.stateValues[p];else if(f.attributePrimitive!==void 0&&f.attributePrimitive!==null)d=f.attributePrimitive;else return{useEssentialOrDefaultValue:{[l]:{variablesToCheck:[l,s]}}};if(d=bd({value:d,attributeSpecification:o,attribute:s}),o.mergeArrayWithDefault&&Array.isArray(d)){let h=o.defaultValue;if(Array.isArray(h)){let y=[...d,...h];return{newValues:{[l]:y}}}}return{newValues:{[l]:d}}},u.inverseDefinition=function({desiredStateVariableValues:f,dependencyValues:d}){return d.attributeComponent?o.mergeArrays?{success:!1}:{success:!0,instructions:[{setDependency:"attributeComponent",desiredValue:f[l],variableIndex:0}]}:d.attributePrimitive!==void 0&&d.attributePrimitive!==null?{success:!1}:{success:!0,instructions:[{setStateVariable:l,value:f[l]}]}};let m=["forRenderer","defaultValue","propagateToProps","triggerActionOnChange"];for(let f of m)f in o&&(u[f]=o[f])}}createAdapterStateVariableDefinitions({redefineDependencies:t,stateVariableDefinitions:e,componentClass:r}){let a=this._components[t.adapterTargetIdentity.componentName],s=r.createAttributesObject({flags:this.flags});for(let u in s){let c=s[u];if(!c.createStateVariable)continue;let p=c.createStateVariable,m=e[p]={isAttribute:!0},f=!c.createComponentOfType;c.public&&(m.public=!0,m.componentType=c.stateVariableComponentType,m.componentType===void 0&&(f?(m.componentType=c.createPrimitiveOfType,m.componentType==="string"&&(m.componentType="text")):m.componentType=c.createComponentOfType)),p in a.state?m.returnDependencies=()=>({adapterTargetVariable:{dependencyType:"stateVariable",componentName:t.adapterTargetIdentity.componentName,variableName:p}}):m.returnDependencies=()=>({}),m.definition=function({dependencyValues:h,usedDefault:y}){return h.adapterTargetVariable===void 0||y.adapterTargetVariable?{useEssentialOrDefaultValue:{[p]:{variablesToCheck:[p,u]}}}:{newValues:{[p]:h.adapterTargetVariable}}},m.inverseDefinition=function({desiredStateVariableValues:h,dependencyValues:y}){return y.adapterTargetVariable===void 0?{success:!0,instructions:[{setStateVariable:p,value:h[p]}]}:{success:!0,instructions:[{setDependency:"adapterTargetVariable",desiredValue:h[p]}]}};let d=["forRenderer","defaultValue","propagateToProps"];for(let h of d)h in c&&(m[h]=c[h])}let o="value";t.substituteForPrimaryStateVariable?o=t.substituteForPrimaryStateVariable:r.primaryStateVariableForDefinition&&(o=r.primaryStateVariableForDefinition);let l=e[o];l.returnDependencies=()=>({adapterTargetVariable:{dependencyType:"stateVariable",componentName:t.adapterTargetIdentity.componentName,variableName:t.adapterVariable}}),l.set?l.definition=function({dependencyValues:u}){return{newValues:{[o]:l.set(u.adapterTargetVariable)}}}:l.definition=function({dependencyValues:u}){return{newValues:{[o]:u.adapterTargetVariable}}},l.inverseDefinition=function({desiredStateVariableValues:u}){return{success:!0,instructions:[{setDependency:"adapterTargetVariable",desiredValue:u[o]}]}}}createReferenceShadowStateVariableDefinitions({redefineDependencies:t,stateVariableDefinitions:e,componentClass:r,ancestorProps:a}){let s=this._components[t.compositeName],o=this._components[t.targetName],l={};if(t.propVariable){let f=o.state[t.propVariable];f&&f.stateVariablesPrescribingAdditionalAttributes&&(l=f.stateVariablesPrescribingAdditionalAttributes)}let u=r.createAttributesObject({flags:this.flags});for(let f in u){let d=u[f];if(!d.createStateVariable)continue;let h=d.createStateVariable,y=e[h]={isAttribute:!0},b=!d.createComponentOfType;d.public&&(y.public=!0,y.componentType=d.stateVariableComponentType,y.componentType===void 0&&(b?(y.componentType=d.createPrimitiveOfType,y.componentType==="string"&&(y.componentType="text")):y.componentType=d.createComponentOfType));let g;if(!b){let w=this.allComponentClasses[d.createComponentOfType];if(!w)throw Error(`Component type ${d.createComponentOfType} does not exist so cannot create state variable for attribute ${f} of componentType ${r.componentType}.`);g=d.componentStateVariableForAttributeValue,g===void 0&&(g=w.stateVariableForAttributeValue,g===void 0&&(g="value"))}let v={};b?v.attributePrimitive={dependencyType:"attributePrimitive",attributeName:f}:v.attributeComponent={dependencyType:"attributeComponent",attributeName:f,variableNames:[g]},(!t.propVariable||d.propagateToProps)&&f in o.state&&(v.targetVariable={dependencyType:"stateVariable",componentName:o.componentName,variableName:f},"targetAttributesToIgnore"in s.state&&t.firstLevelReplacement&&(v.targetAttributesToIgnore={dependencyType:"stateVariable",componentName:s.componentName,variableName:"targetAttributesToIgnore"})),l[f]&&(v.targetVariable={dependencyType:"stateVariable",componentName:o.componentName,variableName:l[f]}),f in a&&(v.ancestorProp={dependencyType:"stateVariable",componentName:a[f].componentName,variableName:f}),y.returnDependencies=()=>v,f in a?(y.definition=function({dependencyValues:w,usedDefault:S}){let A;if(w.attributeComponent)A=w.attributeComponent.stateValues[g];else if(w.attributePrimitive!==void 0&&w.attributePrimitive!==null)A=w.attributePrimitive;else{if(w.targetVariable!==void 0&&!(w.targetAttributesToIgnore&&w.targetAttributesToIgnore.includes(f))&&!S.targetVariable)return{newValues:{[f]:w.targetVariable}};if(S.ancestorProp)return{useEssentialOrDefaultValue:{[h]:{variablesToCheck:[h,f],defaultValue:w.ancestorProp}}};{let E=bd({value:w.ancestorProp,attributeSpecification:d,attribute:f});return{newValues:{[h]:E}}}}if(A=bd({value:A,attributeSpecification:d,attribute:f}),d.mergeArrays&&Array.isArray(w.ancestorProp)&&Array.isArray(A)){let E=[...A,...w.ancestorProp];return{newValues:{[h]:E}}}else return{newValues:{[h]:A}}},y.inverseDefinition=function({desiredStateVariableValues:w,dependencyValues:S,usedDefault:A}){return S.attributeComponent?d.mergeArrays?{success:!1}:{success:!0,instructions:[{setDependency:"attributeComponent",desiredValue:w[h],variableIndex:0}]}:S.attributePrimitive!==void 0&&S.attributePrimitive!==null?{success:!1}:S.targetVariable!==void 0&&!(S.targetAttributesToIgnore&&S.targetAttributesToIgnore.includes(f))&&!A.targetVariable?{success:!0,instructions:[{setDependency:"targetVariable",desiredValue:w[h]}]}:A.ancestorProp?{success:!0,instructions:[{setStateVariable:h,value:w[h]}]}:{success:!0,instructions:[{setDependency:"ancestorProp",desiredValue:w[h]}]}}):(y.definition=function({dependencyValues:w,usedDefault:S}){let A;if(w.attributeComponent)A=w.attributeComponent.stateValues[g];else if(w.attributePrimitive!==void 0&&w.attributePrimitive!==null)A=w.attributePrimitive;else return w.targetVariable!==void 0&&!(w.targetAttributesToIgnore&&w.targetAttributesToIgnore.includes(f))&&!S.targetVariable?{newValues:{[h]:w.targetVariable}}:{useEssentialOrDefaultValue:{[h]:{variablesToCheck:[h,f]}}};if(A=bd({value:A,attributeSpecification:d,attribute:f}),d.mergeArrayWithDefault&&Array.isArray(A)){let E=d.defaultValue;if(Array.isArray(E)){let I=[...A,...E];return{newValues:{[h]:I}}}}return{newValues:{[h]:A}}},y.inverseDefinition=function({desiredStateVariableValues:w,dependencyValues:S}){return S.attributeComponent?d.mergeArrays?{success:!1}:{success:!0,instructions:[{setDependency:"attributeComponent",desiredValue:w[h],variableIndex:0}]}:S.attributePrimitive!==void 0&&S.attributePrimitive!==null?{success:!1}:S.targetVariable!==void 0&&!(S.targetAttributesToIgnore&&S.targetAttributesToIgnore.includes(f))?{success:!0,instructions:[{setDependency:"targetVariable",desiredValue:w[h]}]}:{success:!0,instructions:[{setStateVariable:h,value:w[h]}]}});let C=["forRenderer","defaultValue","propagateToProps"];for(let w of C)w in d&&(y[w]=d[w])}if(t.propVariable){if(!t.ignorePrimaryStateVariable){let f="value";t.substituteForPrimaryStateVariable?f=t.substituteForPrimaryStateVariable:r.primaryStateVariableForDefinition&&(f=r.primaryStateVariableForDefinition);let d=e[f];if(!d)throw t.substituteForPrimaryStateVariable?Error(`Invalid public state variable of componentType ${r.componentType}: substituteForPrimaryStateVariable ${t.substituteForPrimaryStateVariable} does not exist`):Error(`Cannot have a public state variable with componentType ${r.componentType} as the class doesn't have a primary state variable for definition`);d.returnDependencies=()=>({targetVariable:{dependencyType:"stateVariable",componentName:o.componentName,variableName:t.propVariable}}),d.set?d.definition=function({dependencyValues:h}){return{newValues:{[f]:d.set(h.targetVariable)},alwaysShadow:[f]}}:d.definition=function({dependencyValues:h}){return{newValues:{[f]:h.targetVariable},alwaysShadow:[f]}},d.inverseDefinition=function({desiredStateVariableValues:h}){return{success:!0,instructions:[{setDependency:"targetVariable",desiredValue:h[f]}]}}}return}let c=!1;if("readyToExpandWhenResolved"in e){c=!0;let f=e.readyToExpandWhenResolved,d=f.returnDependencies.bind(f),h=f.definition;f.returnDependencies=function(y){let b=d(y);return b.targetReadyToExpandWhenResolved={dependencyType:"stateVariable",componentName:o.componentName,variableName:"readyToExpandWhenResolved"},b},f.definition=function(y){let b=h(y);return b.newValues&&b.newValues.readyToExpandWhenResolved&&(y.dependencyValues.targetReadyToExpandWhenResolved||(b.newValues.readyToExpandWhenResolved=!1)),b}}let p=[...o.constructor.stateVariablesShadowedForReference];p||(p=[]);let m=[];for(let f in o.state){let d=o.state[f];if(!(d.isAttribute||f in p)&&(d.isResolved&&!d.willNeverBeEssential&&d.value,!d.neverShadow)){if(d.essential||d.alwaysShadow||d.isShadow||d.isArray&&d.isResolved&&o.state[d.arraySizeStateVariable].isResolved&&d.getAllArrayKeys(d.arraySize).length>0&&d.getAllArrayKeys(d.arraySize).some(h=>d.essentialByArrayKey[h]))p.includes(f)||p.push(f);else if((!d.isResolved||d.isArray&&!o.state[d.arraySizeStateVariable].isResolved)&&!m.includes(f)){let h=e[f];if(!h)continue;let y=[f];h.additionalStateVariablesDefined&&y.push(...h.additionalStateVariablesDefined);let b={targetComponent:o,foundReadyToExpandWhenResolved:c};d.isArray&&!o.state[d.arraySizeStateVariable].isResolved&&(b.arraySizeStateVariableToResolve=d.arraySizeStateVariable);for(let g of y)e[g].determineIfShadowData=b;m.push(...y)}}}this.modifyStateDefsToBeShadows({stateVariablesToShadow:p,stateVariableDefinitions:e,foundReadyToExpandWhenResolved:c,targetComponent:o})}modifyStateDefsToBeShadows({stateVariablesToShadow:t,stateVariableDefinitions:e,foundReadyToExpandWhenResolved:r,targetComponent:a}){let s={};for(let o of t){let l=e[o];if(l===void 0)if(o.slice(0,8)==="__array_")l=e[o]={};else continue;if(l.isShadow=!0,l.additionalStateVariablesDefined)for(let c of l.additionalStateVariablesDefined)t.includes(c)||(s[c]||(s[c]=[]),s[c].push(o));delete l.additionalStateVariablesDefined,r||delete l.stateVariablesDeterminingDependencies;let u=l.public&&l.hasVariableComponentType;if(l.isArray)l.returnArrayDependenciesByKey=function({arrayKeys:c}){let p={};for(let f of c)p[f]={targetVariable:{dependencyType:"stateVariable",componentName:a.componentName,variableName:this.arrayVarNameFromArrayKey(f)}};let m={};return u&&(m.targetVariableComponentType={dependencyType:"stateVariableComponentType",componentName:a.componentName,variableName:o}),{globalDependencies:m,dependenciesByKey:p}},l.arrayDefinitionByKey=function({globalDependencyValues:c,dependencyValuesByKey:p,arrayKeys:m}){let f={};for(let h of m)"targetVariable"in p[h]?f[h]=p[h].targetVariable:f[h]=l.defaultEntryValue;let d={newValues:{[o]:f},alwaysShadow:[o]};return"targetVariableComponentType"in c&&(d.setComponentType={[o]:c.targetVariableComponentType}),d},l.inverseArrayDefinitionByKey=function({desiredStateVariableValues:c,dependencyValuesByKey:p,dependencyNamesByKey:m,arraySize:f}){let d=[];for(let h in c[o])!p[h]||d.push({setDependency:m[h].targetVariable,desiredValue:c[o][h],shadowedVariable:!0});return{success:!0,instructions:d}};else{let c={};r&&(c=l.returnDependencies.bind(l)),l.returnDependencies=function(p){let m=Object.assign({},c);return m.targetVariable={dependencyType:"stateVariable",componentName:a.componentName,variableName:o},u&&(m.targetVariableComponentType={dependencyType:"stateVariableComponentType",componentName:a.componentName,variableName:o}),m},l.definition=function({dependencyValues:p,usedDefault:m}){let f={alwaysShadow:[o]};return"targetVariableComponentType"in p&&(f.setComponentType={[o]:p.targetVariableComponentType}),m.targetVariable&&"defaultValue"in l?f.useEssentialOrDefaultValue={[o]:{variablesToCheck:[o]}}:f.newValues={[o]:p.targetVariable},f},l.inverseDefinition=function({desiredStateVariableValues:p,dependencyValues:m}){return{success:!0,instructions:[{setDependency:"targetVariable",desiredValue:p[o],shadowedVariable:!0}]}}}}for(let o in s)this.modifyStateDefToDeleteVariableReferences({varNamesToDelete:s[o],stateDef:e[o]})}modifyStateDefToDeleteVariableReferences({varNamesToDelete:t,stateDef:e}){for(let a of t){let s=e.additionalStateVariablesDefined.indexOf(a);e.additionalStateVariablesDefined.splice(s,1)}let r=e.definition;e.definition=function(a){let s=r(a);for(let o in s)if(Array.isArray(s[o]))for(let l of t){let u=s[o].indexOf(l);u!==-1&&s[o].splice(u,1)}else for(let l of t)delete s[o][l];return s}}initializeComponentStateVariables(t){for(let e in t.state)t.state[e].isAlias?(t.stateVarAliases||(t.stateVarAliases={}),t.stateVarAliases[e]=t.state[e].targetVariableName,delete t.state[e]):this.initializeStateVariable({component:t,stateVariable:e})}initializeStateVariable({component:t,stateVariable:e,arrayStateVariable:r,arrayEntryPrefix:a}){let s=this.getStateVariableValue;t.state[e]||(t.state[e]={});let o=t.state[e];if(o.isResolved=!1,Object.defineProperty(o,"value",{get:()=>s({component:t,stateVariable:e}),configurable:!0}),a!==void 0?this.initializeArrayEntryStateVariable({stateVarObj:o,arrayStateVariable:r,arrayEntryPrefix:a,component:t,stateVariable:e}):o.isArray&&this.initializeArrayStateVariable({stateVarObj:o,component:t,stateVariable:e}),o.triggerActionOnChange){let l=this.stateVariableChangeTriggers[t.componentName];l||(l=this.stateVariableChangeTriggers[t.componentName]={}),l[e]={action:o.triggerActionOnChange}}}checkForActionChaining({component:t,stateVariables:e}){if(!!t){e||(e=Object.keys(t.state));for(let r of e){let a=t.state[r];if(a.chainActionOnActionOfStateVariableTargets){let s=a.chainActionOnActionOfStateVariableTargets,o=a.value,l=this.originsOfActionsChangedToActions[t.componentName],u;l&&(u=l[r]),u||(u=[]);let c=[];if(Array.isArray(o)){c=[...new Set(o)];for(let p of c){let m=u.indexOf(p);if(m===-1){let f=this.actionsChangedToActions[p];f||(f=this.actionsChangedToActions[p]=[]),f.push({componentName:t.componentName,actionName:s.triggeredAction,stateVariableDefiningChain:r})}else u.splice(m,1)}}for(let p of u){let m=this.actionsChangedToActions[p];if(m){let f=[];for(let d of m)(d.componentName!==t.componentName||d.stateVariableDefiningChain!==r)&&f.push(d);this.actionsChangedToActions[p]=f}}c.length>0?(l||(l=this.originsOfActionsChangedToActions[t.componentName]={}),l[r]=c):l&&(delete l[r],Object.keys(l).length===0&&delete this.originsOfActionsChangedToActions[t.componentName])}}}}initializeArrayEntryStateVariable({stateVarObj:t,arrayStateVariable:e,arrayEntryPrefix:r,component:a,stateVariable:s}){t.isArrayEntry=!0,t.neverShadow=!0,t.arrayStateVariable=e;let o=a.state[e];if(t.definition=o.definition,t.inverseDefinition=o.inverseDefinition,t.markStale=o.markStale,t.freshnessInfo=o.freshnessInfo,t.getPreviousDependencyValuesForMarkStale=o.getPreviousDependencyValuesForMarkStale,t.nDimensions=o.returnEntryDimensions(r),t.wrappingComponents=o.returnWrappingComponents(r),t.entryPrefix=r,t.varEnding=s.slice(r.length),o.createWorkspace&&(t.createWorkspace=!0,t.workspace=o.workspace),o.basedOnArrayKeyStateVariables&&(t.basedOnArrayKeyStateVariables=!0),o.determineIfShadowData&&(t.determineIfShadowData=o.determineIfShadowData),o.additionalStateVariablesDefined){t.additionalStateVariablesDefined=[];let u=o.entryPrefixes.indexOf(r);for(let c of o.additionalStateVariablesDefined){let p=a.state[c];if(p.isArray){let f=p.entryPrefixes[u]+t.varEnding;t.additionalStateVariablesDefined.push(f)}else t.additionalStateVariablesDefined.push(c)}}if(o.getEntryValues?t.getValueFromArrayValues=function(){return o.getEntryValues({varName:s})}:t.getValueFromArrayValues=function(){if(t.arrayKeys.length===0)return;let u=[];for(let c of t.arrayKeys)u.push(o.getArrayValue({arrayKey:c}));return u.length===1?u[0]:u},t.arraySizeStateVariable=o.arraySizeStateVariable,t._arrayKeys=[],t._unflattenedArrayKeys=[],Object.defineProperty(t,"arrayKeys",{get:function(){return o.arraySize,t._arrayKeys}}),Object.defineProperty(t,"unflattenedArrayKeys",{get:function(){return o.arraySize,t._unflattenedArrayKeys}}),a.state[t.arraySizeStateVariable].initiallyResolved){let u=o.arraySize,c=o.getArrayKeysFromVarName({arrayEntryPrefix:t.entryPrefix,varEnding:t.varEnding,arraySize:u,nDimensions:o.nDimensions});t._unflattenedArrayKeys=c,t._arrayKeys=Er(c);let p=o.varNamesIncludingArrayKeys;for(let m of t._arrayKeys)p[m]||(p[m]=[]),p[m].push(s)}if(o.arrayEntryNames.push(s),Object.defineProperty(t,"arraySize",{get:()=>o.arraySize}),Object.defineProperty(t,"arrayEntrySize",{get:function(){let u=t.unflattenedArrayKeys,c=[],p=[u];for(let m=0;m<t.nDimensions;m++)p=p[0],c.push(p.length);return c.reverse(),c}}),o.stateVariablesDeterminingDependencies){t.stateVariablesDeterminingDependencies||(t.stateVariablesDeterminingDependencies=[]);for(let u of o.stateVariablesDeterminingDependencies)t.stateVariablesDeterminingDependencies.includes(u)||t.stateVariablesDeterminingDependencies.push(u)}let l=o.returnDependencies.bind(o);t.returnDependencies=function(u){u.arraySize=t.arraySize,u.arrayKeys=t.arrayKeys;let c=l(u),p=Object.keys(o.dependencyNames.namesByKey).length;return t.numberNamesInPreviousReturnDep!==p&&(u.changedDependency=!0),t.numberNamesInPreviousReturnDep=p,c}}initializeArrayStateVariable({stateVarObj:t,component:e,stateVariable:r}){t.arrayValues=[],t.nDimensions===void 0&&(t.nDimensions=1),t.nDimensions>1?(t.keyToIndex=l=>l.split(",").map(u=>Number(u)),t.setArrayValue=function({value:l,arrayKey:u,arraySize:c}){let p=t.keyToIndex(u),m=p.length;if(!m>t.nDimensions)return console.warn("Cannot set array value.  Number of dimensions is too large."),{nFailures:1};let f=t.arrayValues,d=c;for(let y of p.slice(0,p.length-1))if(y>=0&&y<d[0])f[y]||(f[y]=[]),f=f[y],d=d.slice(1);else return console.warn("ignore setting array value out of bounds"),{nFailures:1};let h=0;if(m<t.nDimensions){let y=function(g,v,C){if(!Array.isArray(g))return console.warn("ignoring array values with insufficient dimensions"),{nFailures:1};let w=0,S=C[0];if(g.length>S&&(console.warn("ignoring array values of out bounds"),w+=g.length-S,g=g.slice(0,S)),C.length===1)for(let[A,E]of g.entries())v[A]=E;else for(let[A,E]of g.entries())v[A]||(v=[]),w+=y(E,v[A],C[A]).nFailures;return{nFailures:w}};h+=y(l,f,d).nFailures}else f[p[p.length-1]]=l;return{nFailures:h}},t.getArrayValue=function({arrayKey:l,arrayValues:u=t.arrayValues}){let c=t.keyToIndex(l),p=u;for(let m of c.slice(0,c.length-1))if(p=p[m],!p)return;return p[c[c.length-1]]},t.getArrayKeysFromVarName||(t.getArrayKeysFromVarName=function({arrayEntryPrefix:l,varEnding:u,arraySize:c,nDimensions:p}){let m=u.split("_").map(f=>Number(f)-1);return m.length===p&&m.every((f,d)=>Number.isInteger(f)&&f>=0)?c?m.every((f,d)=>f<c[d])?[String(m)]:[]:[String(m)]:[]}),t.getAllArrayKeys||(t.getAllArrayKeys=function(l,u=!0,c){function p(m){if(m.length===1)return Array.from(Array(m[0]),(f,d)=>String(d));{let f=m[0],d=p(m.slice(1)),h=[];for(let y=0;y<f;y++)u?h.push(...d.map(b=>y+","+b)):h.push(d.map(b=>y+","+b));return h}}return c?c.length===0?[]:p(c):!l||l.length===0?[]:p(l)}),t.arrayVarNameFromArrayKey||(t.arrayVarNameFromArrayKey=function(l){return a[0]+l.split(",").map(u=>Number(u)+1).join("_")}),t.adjustArrayToNewArraySize=function(){function l(u,c){if(u.length=c[0],c.length>1){let p=c.slice(1);for(let[m,f]of u.entries())f||(f=u[m]=[]),l(f,p)}}l(t.arrayValues,t.arraySize);for(let u of Object.keys(t.essentialByArrayKey))t.keyToIndex(u).some((p,m)=>p>=t.arraySize[m])&&delete t.essentialByArrayKey[u]}):(t.keyToIndex=l=>Number(l),t.setArrayValue=function({value:l,arrayKey:u,arraySize:c}){let p=t.keyToIndex(u);return p>=0&&p<c[0]?(t.arrayValues[p]=l,{nFailures:0}):(console.warn(`Ignoring setting array values out of bounds: ${u} of ${r}`),{nFailures:1})},t.getArrayValue=function({arrayKey:l,arrayValues:u=t.arrayValues}){return u[l]},t.getArrayKeysFromVarName||(t.getArrayKeysFromVarName=function({arrayEntryPrefix:l,varEnding:u,arraySize:c}){let p=Number(u)-1;return Number.isInteger(p)&&p>=0?c?p<c[0]?[String(p)]:[]:[String(p)]:[]}),t.getAllArrayKeys||(t.getAllArrayKeys=function(l,u,c){return c?c.length===0?[]:Array.from(Array(c[0]),(p,m)=>String(m)):!l||l.length===0?[]:Array.from(Array(l[0]),(p,m)=>String(m))}),t.arrayVarNameFromArrayKey||(t.arrayVarNameFromArrayKey=function(l){return a[0]+String(Number(l)+1)}),t.adjustArrayToNewArraySize=function(){t.arrayValues.length=t.arraySize[0];for(let l of Object.keys(t.essentialByArrayKey))t.keyToIndex(l)>=t.arraySize[0]&&delete t.essentialByArrayKey[l]}),t.indexToKey=l=>String(l);let a=t.entryPrefixes;a||(a=t.entryPrefixes=[r]),e.arrayEntryPrefixes||(e.arrayEntryPrefixes={});for(let l of a)e.arrayEntryPrefixes[l]=r;t.returnEntryDimensions||(t.returnEntryDimensions=()=>1),t.returnWrappingComponents||(t.returnWrappingComponents=l=>[]),t.wrappingComponents=t.returnWrappingComponents(),t.essentialByArrayKey={},t.arrayEntryNames=[],t.varNamesIncludingArrayKeys={};let s=[r];t.additionalStateVariablesDefined&&s.push(...t.additionalStateVariablesDefined),t.returnDependencies=function(l){l.arraySize=t.arraySize;for(let c in l.stateValues)c.slice(0,8)==="__array_"&&delete l.stateValues[c];if(l.arrayKeys===void 0&&(l.arrayKeys=t.getAllArrayKeys(l.arraySize)),!t.dependencyNames&&(t.dependencyNames={namesByKey:{},keysByName:{},global:[]},t.additionalStateVariablesDefined))for(let c of t.additionalStateVariablesDefined)e.state[c].dependencyNames=t.dependencyNames;let u={};if(t.basedOnArrayKeyStateVariables&&l.arrayKeys.length>1)for(let c of l.arrayKeys)for(let p of s){let m=e.state[p];u[p+"_"+c]={dependencyType:"stateVariable",variableName:m.arrayVarNameFromArrayKey(c)}}else{let c=t.returnArrayDependenciesByKey(l);c.globalDependencies&&(t.dependencyNames.global=Object.keys(c.globalDependencies),Object.assign(u,c.globalDependencies)),c.dependenciesByKey||(c.dependenciesByKey={});for(let p of l.arrayKeys){p in t.dependencyNames.namesByKey||(l.changedDependency=!0),t.dependencyNames.namesByKey[p]={};for(let m in c.dependenciesByKey[p]){let f="__"+p+"_"+m;u[f]=c.dependenciesByKey[p][m],t.dependencyNames.namesByKey[p][m]=f,t.dependencyNames.keysByName[f]||(t.dependencyNames.keysByName[f]=[]),t.dependencyNames.keysByName[f].includes(p)||t.dependencyNames.keysByName[f].push(p)}}t.dependencyNames.global.push("__array_size")}return u.__array_size={dependencyType:"stateVariable",variableName:t.arraySizeStateVariable},u},t.getCurrentFreshness=function({freshnessInfo:l,arrayKeys:u,arraySize:c}){u===void 0&&(u=t.getAllArrayKeys(c));let p=l.freshByKey,m=l.freshArraySize?1:0;for(let f of u)p[f]&&(m+=1);return m>0?m===u.length+1?{fresh:{[r]:!0}}:{partiallyFresh:{[r]:m}}:{fresh:{[r]:!1}}},t.markStale=function({freshnessInfo:l,changes:u,arrayKeys:c,arraySize:p}){let m={};c===void 0&&(c=t.getAllArrayKeys(p)),t.markStaleByKey&&(m=t.markStaleByKey({arrayKeys:c,changes:u}));let f=l.freshByKey;if(u.__array_size)return l.freshArraySize=!1,l.freshByKey={},m.fresh={[r]:!1},m;if(Object.keys(f).length===0)return l.freshByKey={},l.freshArraySize?(m.partiallyFresh={[r]:1},m):(m.fresh={[r]:!1},m);for(let h in u){if(t.dependencyNames.global.includes(h))return l.freshByKey={},l.freshArraySize?(m.partiallyFresh={[r]:1},m):(m.fresh={[r]:!1},m);if(t.basedOnArrayKeyStateVariables&&c.length>1)delete f[h];else for(let y of t.dependencyNames.keysByName[h])delete f[y]}let d=l.freshArraySize?1:0;for(let h of c)f[h]&&(d+=1);return d>0?d===c.length+1?(m.fresh={[r]:!0},m):(m.partiallyFresh={[r]:d},m):(m.fresh={[r]:!1},m)},t.freshenOnNoChanges=function({arrayKeys:l,freshnessInfo:u,arraySize:c}){let p=u.freshByKey;l===void 0&&(l=t.getAllArrayKeys(c));for(let m of l)p[m]=!0};function o(l,u){let c={};for(let f of t.dependencyNames.global)c[f]=l[f];let p={},m={};for(let f of u)if(p[f]={},f in t.dependencyNames.namesByKey){m[f]=!0;for(let d in t.dependencyNames.namesByKey[f]){let h=t.dependencyNames.namesByKey[f][d];h in l?p[f][d]=l[h]:m[f]=!1}}return{globalDependencyValues:c,dependencyValuesByKey:p,foundAllDependencyValuesForKey:m}}if(t.definition=function(l){if(l.arrayKeys===void 0&&(l.arrayKeys=t.getAllArrayKeys(l.arraySize)),t.basedOnArrayKeyStateVariables&&l.arrayKeys.length>1)return{};{let u=o(l.dependencyValues,l.arrayKeys),c=u.globalDependencyValues,p=u.dependencyValuesByKey,m=u.foundAllDependencyValuesForKey;delete l.dependencyValues,l.globalDependencyValues=c,l.dependencyValuesByKey=p;let f=[],d=l.freshnessInfo.freshByKey;for(let y of l.arrayKeys)!d[y]&&m[y]&&(d[y]=!0,f.push(y));let h;if(f.length===0)h={};else{if(l.arrayKeys=f,!t.arrayDefinitionByKey)throw Error(`For ${r} of ${e.componentType}, arrayDefinitionByKey must be a function`);if(h=t.arrayDefinitionByKey(l),h.newValues&&h.newValues[r])for(let y in h.newValues[r])d[y]=!0;if(h.useEssentialOrDefaultValue&&h.useEssentialOrDefaultValue[r])for(let y in h.useEssentialOrDefaultValue[r])d[y]=!0}if(!l.freshnessInfo.freshArraySize){if(l.changes.__array_size&&(h.arraySizeChanged=[r],t.additionalStateVariablesDefined))for(let y of t.additionalStateVariablesDefined)e.state[y].isArray&&h.arraySizeChanged.push(y);l.freshnessInfo.freshArraySize=!0}return h}},t.inverseDefinition=function(l){if(!t.inverseArrayDefinitionByKey)return{success:!1};if(l.arrayKeys===void 0&&(l.arrayKeys=t.getAllArrayKeys(l.arraySize)),t.basedOnArrayKeyStateVariables&&l.arrayKeys.length>1){let u=[];for(let c of s)for(let p in l.desiredStateVariableValues[c]){let m=c+"_"+p;m in l.dependencyValues&&u.push({setDependency:m,desiredValue:l.desiredStateVariableValues[c][p],treatAsInitialChange:l.initialChange})}return{success:!0,instructions:u}}else{let u=o(l.dependencyValues,l.arrayKeys),c=u.globalDependencyValues,p=u.dependencyValuesByKey;return delete l.dependencyValues,l.globalDependencyValues=c,l.dependencyValuesByKey=p,l.dependencyNamesByKey=t.dependencyNames.namesByKey,t.inverseArrayDefinitionByKey(l)}},this.createArraySizeStateVariable({stateVarObj:t,component:e,stateVariable:r}),t.arraySizeStale=!0,t.previousArraySize=[],Object.defineProperty(t,"arraySize",{get:function(){return e.state[t.arraySizeStateVariable].initiallyResolved?(t.arraySizeStale&&t.recalculateArraySizeDependentQuantities(),e.stateValues[t.arraySizeStateVariable]):[]}}),t.recalculateArraySizeDependentQuantities=function(){let l=e.stateValues[t.arraySizeStateVariable];if(t.previousArraySize.length!==l.length||t.previousArraySize.some((u,c)=>u!=l[c])){t.previousArraySize=[...l];let u=t.varNamesIncludingArrayKeys={};for(let c of t.arrayEntryNames){let p=e.state[c],m=t.getArrayKeysFromVarName({arrayEntryPrefix:p.entryPrefix,varEnding:p.varEnding,arraySize:l,nDimensions:t.nDimensions});p._unflattenedArrayKeys=m,p._arrayKeys=Er(m);for(let f of p._arrayKeys)u[f]||(u[f]=[]),u[f].push(c)}}t.arraySizeStale=!1},!t.freshnessInfo&&(t.freshnessInfo={freshByKey:{}},t.additionalStateVariablesDefined))for(let l of t.additionalStateVariablesDefined)e.state[l]||(e.state[l]={}),e.state[l].freshnessInfo=t.freshnessInfo}createArraySizeStateVariable({stateVarObj:t,component:e,stateVariable:r}){let a=[r];t.additionalStateVariablesDefined&&a.push(...t.additionalStateVariablesDefined),a.sort();let s="__array_size_"+a.join("_");t.arraySizeStateVariable=s;let o,l;if(t.stateVariablesDeterminingDependencies?(o=[...t.stateVariablesDeterminingDependencies],t.stateVariablesDeterminingDependencies.push(s)):t.stateVariablesDeterminingDependencies=[s],e.state[s]){if(e.state[s].isShadow){let u=e.state[s];u.markStale=function(){for(let c of a)e.state[c].arraySizeStale=!0;return{}}}return}e.state[s]={returnDependencies:t.returnArraySizeDependencies,definition({dependencyValues:u}){let c=t.returnArraySize({dependencyValues:u});for(let[p,m]of c.entries())Number.isInteger(m)&&m>=0||(c[p]=0);return{newValues:{[s]:c}}},markStale(){for(let u of a)e.state[u].arraySizeStale=!0;return{}}},t.stateVariablesDeterminingArraySizeDependencies&&(e.state[s].stateVariablesDeterminingDependencies=t.stateVariablesDeterminingArraySizeDependencies),this.initializeStateVariable({component:e,stateVariable:s})}recursivelyReplaceCompositesWithReplacements({replacements:t,recurseNonStandardComposites:e=!1,expandComposites:r=!0,forceExpandComposites:a=!1}){let s=[],o=[],l=[],u=[];for(let c of t)if(this.isCompositeComponent({componentType:c.componentType,includeNonStandard:e}))if(s.push(c.componentName),c.isExpanded||(r&&!c.state.readyToExpandWhenResolved.isResolved&&this.dependencies.resolveItem({componentName:c.componentName,type:"stateVariable",stateVariable:"readyToExpandWhenResolved",force:a}),c.state.readyToExpandWhenResolved.isResolved?r?this.expandCompositeComponent(c):l.push(c.componentName):u.push(c.componentName)),c.isExpanded){let p=this.recursivelyReplaceCompositesWithReplacements({replacements:c.replacements,recurseNonStandardComposites:e,expandComposites:r,forceExpandComposites:a});s.push(...p.compositesFound),o.push(...p.newReplacements),l.push(...p.unexpandedCompositesReady),u.push(...p.unexpandedCompositesNotReady)}else o.push(c);else o.push(c);return{compositesFound:s,newReplacements:o,unexpandedCompositesReady:l,unexpandedCompositesNotReady:u}}getStateVariableValue({component:t,stateVariable:e}){let r=t.state[e];if(!r)throw Error(`Can't get value of ${e} of ${t.componentName} as it doesn't exist.`);let a=r.additionalStateVariablesDefined,s=[e];a&&s.push(...a);for(let p of s)if(!t.state[p].isResolved&&!this.dependencies.resolveItem({componentName:t.componentName,type:"stateVariable",stateVariable:p,force:!0}).success)throw Error(`Can't get value of ${e} of ${t.componentName} as ${p} couldn't be resolved.`);let o=this.getStateVariableDefinitionArguments({component:t,stateVariable:e});o.componentInfoObjects=this.componentInfoObjects,o.freshnessInfo=r.freshnessInfo;let l;if(Object.keys(o.changes).length===0&&r._previousValue!==void 0&&!r.forceRecalculation){let p=[e];a&&p.push(...a),l={noChanges:p},r.freshenOnNoChanges&&r.freshenOnNoChanges(o)}else delete r.forceRecalculation,l=r.definition(o);let u={[e]:!1},c={};if(a)for(let p of a)u[p]=!1;for(let p in l.newValues){if(!(p in t.state))throw Error(`Definition of state variable ${e} of ${t.componentName} returned value of ${p}, which isn't a state variable.`);let m;if(p in u)u[p]=!0,c[p]=!0;else{if(t.state[p].isArray&&t.state[p].arrayEntryNames){for(let f of t.state[p].arrayEntryNames)if(f in u){m=f,u[f]=!0,c[f]=!0;break}}if(!m)throw Error(`Attempting to set value of stateVariable ${p} in definition of ${e} of ${t.componentName}, but it's not listed as an additional state variable defined.`)}if(!t.state[p].isResolved&&(!m||!t.state[m].isResolved))throw Error(`Attempting to set value of stateVariable ${p} of ${t.componentName} while it is still unresolved!`);if(t.state[p].isArray){c[p]={arrayKeysChanged:{}};let f={};l.checkForActualChange&&l.checkForActualChange[p]&&(f=l.checkForActualChange[p]);let d=t.state[p].arraySize;for(let h in l.newValues[p])if(f[h]){let y=t.state[p].getArrayValue({arrayKey:h}),b=l.newValues[p][h];y!==b&&(t.state[p].setArrayValue({value:l.newValues[p][h],arrayKey:h,arraySize:d}),c[p].arrayKeysChanged[h]=!0)}else t.state[p].setArrayValue({value:l.newValues[p][h],arrayKey:h,arraySize:d}),c[p].arrayKeysChanged[h]=!0}else if(delete t.state[p].value,t.state[p].value=l.newValues[p],delete t.state[p].usedDefault,l.checkForActualChange&&l.checkForActualChange[p]){let f=t.state[p].value,d=t.state[p]._previousValue;(f===d||Array.isArray(f)&&Array.isArray(d)&&f.length===d.length&&f.every((h,y)=>h===d[y]))&&delete c[p]}}for(let p in l.useEssentialOrDefaultValue){if(!(p in t.state))throw Error(`Definition of state variable ${e} of ${t.componentName} requested essential or default value of ${p}, which isn't a state variable.`);let m;if(p in u)u[p]=!0;else{if(t.state[p].isArray&&t.state[p].arrayEntryNames){for(let y of t.state[p].arrayEntryNames)if(y in u){m=y,u[y]=!0;break}}if(!m)throw Error(`Attempting to set value of stateVariable ${p} in definition of ${e} of ${t.componentName}, but it's not listed as an additional state variable defined.`)}if(!t.state[p].isResolved&&(!m||!t.state[m].isResolved))throw Error(`Attempting to set value of stateVariable ${p} of ${t.componentName} while it is still unresolved!`);let{haveEssentialValue:f,valueUnchanged:d,byArrayEntries:h}=this.setValueToEssential({component:t,varName:p,useEssentialInfo:l.useEssentialOrDefaultValue[p]});if(h){let y=t.state[p].arraySize;for(let b in l.useEssentialOrDefaultValue[p])f[b]||("defaultValue"in l.useEssentialOrDefaultValue[p][b]?(t.state[p].setArrayValue({value:l.useEssentialOrDefaultValue[p][b].defaultValue,arrayKey:b,arraySize:y}),t.state[p].essentialByArrayKey[b]=!0):"defaultEntryValue"in t.state[p]&&(t.state[p].setArrayValue({value:t.state[p].defaultEntryValue,arrayKey:b,arraySize:y}),t.state[p].essentialByArrayKey[b]=!0)),d[b]||(c[p]===void 0&&(c[p]={arrayKeysChanged:{}}),c[p].arrayKeysChanged[b]=!0)}else if(d||(c[p]=!0),!f)if("defaultValue"in l.useEssentialOrDefaultValue[p])delete t.state[p].value,t.state[p].value=l.useEssentialOrDefaultValue[p].defaultValue,t.state[p].usedDefault=!0,t.state[p].essential=!0;else if("defaultValue"in t.state[p])delete t.state[p].value,t.state[p].value=t.state[p].defaultValue,t.state[p].usedDefault=!0,t.state[p].essential=!0;else throw Error(`Neither value nor default value specified; state variable: ${p}, component: ${t.componentName}.`)}if(l.noChanges)for(let p of l.noChanges){if(!t.state[p].isResolved)throw Error(`Claiming state variable is unchanged when it isn't yet resolved: ${p} of ${t.componentName}`);if(!(p in u)){let m;if(t.state[p].isArray&&t.state[p].arrayEntryNames){for(let f of t.state[p].arrayEntryNames)if(f in u){m=f;break}}if(!m)throw Error(`Claiming stateVariable ${p} is unchanged in definition of ${e} of ${t.componentName}, but it's not listed as an additional state variable defined.`)}u[p]=!0,(Object.getOwnPropertyDescriptor(t.state[p],"value").get||t.state[p].immutable)&&(delete t.state[p].value,t.state[p].value=t.state[p]._previousValue)}for(let p in l.makeEssential){if(!(p in t.state))throw Error(`Definition of state variable ${e} of ${t.componentName} tried to make ${p} essential, which isn't a state variable.`);if(!t.state[p].isResolved)throw Error(`Attempting to make stateVariable ${p} of ${t.componentName} essential while it is still unresolved!`);if(!(p in u)){let m;if(t.state[p].isArray&&t.state[p].arrayEntryNames){for(let f of t.state[p].arrayEntryNames)if(f in u){m=f;break}}if(!m)throw Error(`Attempting to make stateVariable ${p} in definition of ${e} of ${t.componentName} essential, but it's not listed as an additional state variable defined.`)}if(t.state[p].isArray&&typeof l.makeEssential[p]=="object")for(let m in l.makeEssential[p])l.makeEssential[p][m]&&(t.state[p].essentialByArrayKey[m]=!0);else l.makeEssential[p]&&(t.state[p].essential=!0)}if(l.makeImmutable)for(let p of l.makeImmutable){if(!(p in t.state))throw Error(`Definition of state variable ${e} of ${t.componentName} tried to make ${p} immutable, which isn't a state variable.`);if(!t.state[p].isResolved)throw Error(`Attempting to make stateVariable ${p} of ${t.componentName} immutable while it is still unresolved!`);if(!(p in u)){let m;if(t.state[p].isArray&&t.state[p].arrayEntryNames){for(let f of t.state[p].arrayEntryNames)if(f in u){m=f;break}}if(!m)throw Error(`Attempting to make stateVariable ${p} in definition of ${e} of ${t.componentName} immutable, but it's not listed as an additional state variable defined.`)}t.state[p].immutable=!0}if(l.alwaysShadow)for(let p of l.alwaysShadow){if(!(p in t.state))throw Error(`Definition of state variable ${e} of ${t.componentName} set alwaysShadow for ${p}, which isn't a state variable.`);if(!(p in u)){let m=!1;if(t.state[p].isArray&&t.state[p].arrayEntryNames){for(let f of t.state[p].arrayEntryNames)if(f in u){m=!0;break}}if(!m)throw Error(`Definition of state variable ${e} of ${t.componentName} set alwaysShadow for ${p}, but didn't set its value.`)}t.state[p].alwaysShadow=!0}if(l.setComponentType)for(let p in l.setComponentType){if(!t.state[p].hasVariableComponentType)throw Error(`Cannot set type of ${p} of ${t.componentName} as it it does not have the hasVariableComponentType attribute.`);let m=!1,f=t.state[p].componentType,d=l.setComponentType[p];if(Array.isArray(f)?Array.isArray(d)?(f.length!==d.length||f.some((h,y)=>h!=d[y]))&&(m=!0):m=!0:Array.isArray(d)?m=!0:m=f!==d,m&&(c[p]=!0),t.state[p].componentType=l.setComponentType[p],t.state[p].isArray&&t.state[p].arrayEntryNames){let h=l.setComponentType[p],y=Array.isArray(h);for(let b of t.state[p].arrayEntryNames)if(y){let g=t.state[b].arrayKeys,v=[];for(let C of g){let w=t.state[p].keyToIndex(C);v.push(h[w])}t.state[b].componentType=v}else t.state[b].componentType=h}}if(l.arraySizeChanged)for(let p of l.arraySizeChanged)t.state[p].adjustArrayToNewArraySize(),c[p]===void 0?c[p]={arrayKeysChanged:{}}:c[p]===!0&&(c[p]={allArrayKeysChanged:!0,arrayKeysChanged:{}}),c[p].arraySizeChanged=!0;for(let p in u){if(!(u[p]||t.state[p].isArrayEntry||t.state[p].isArray))throw Error(`definition of ${e} of ${t.componentName} didn't return value of ${p}`);t.state[p].isArray?(delete t.state[p].value,t.state[p].value=t.state[p].arrayValues):t.state[p].isArrayEntry&&(delete t.state[p].value,t.state[p].value=t.state[p].getValueFromArrayValues())}for(let p in c)if(this.dependencies.recordActualChangeInUpstreamDependencies({component:t,varName:p,changes:c[p]}),t.state[p].isArray){let m=[];if(c[p]===!0||c[p].allArrayKeysChanged||c.arraySizeChanged)t.state[p].arrayEntryNames&&(m=t.state[p].arrayEntryNames);else{let f=t.state[p].varNamesIncludingArrayKeys;for(let d in c[p].arrayKeysChanged){let h=f[d];h&&m.push(...h)}}for(let f of m)this.dependencies.recordActualChangeInUpstreamDependencies({component:t,varName:f})}return r.value}setValueToEssential({component:t,varName:e,useEssentialInfo:r}){let a=!1,s=!1,o=!1;if(t.state[e].isArray)if("__entire_array"in r)r=r.__entire_array;else{o=!0,s={},a={};for(let l in r)a[l]=!1}if(t.state[e].essential&&!o)return t.state[e].isArray||(delete t.state[e].value,t.state[e].value=t.state[e]._previousValue),{haveEssentialValue:!0,valueUnchanged:!0,byArrayEntries:o};if(t.potentialEssentialState)if(o){let l=t.state[e].arraySize;for(let u in r)if(t.state[e].essentialByArrayKey[u]||t.state[e].essential)a[u]=!0,s[u]=!0;else{let c=r[u].variablesToCheck;if(c&&!Array.isArray(c)&&(c=[c]),c){let{foundEssential:p,value:m}=this.findPotentialEssentialValue({variablesToCheck:c,potentialEssentialState:t.potentialEssentialState});p&&(t.state[e].setArrayValue({value:m,arrayKey:u,arraySize:l}),t.state[e].essentialByArrayKey[u]=!0,a[u]=!0)}}}else{let l=r.variablesToCheck;if(l&&!Array.isArray(l)&&(l=[l]),l){let{foundEssential:u,value:c}=this.findPotentialEssentialValue({variablesToCheck:l,potentialEssentialState:t.potentialEssentialState});u&&(t.state[e].isArray?t.state[e].arrayValues=c:(delete t.state[e].value,t.state[e].value=c),t.state[e].essential=!0,a=!0)}}else if(o)for(let l in r)(t.state[e].essentialByArrayKey[l]||t.state[e].essential)&&(a[l]=!0,s[l]=!0);return{haveEssentialValue:a,valueUnchanged:s,byArrayEntries:o}}findPotentialEssentialValue({variablesToCheck:t,potentialEssentialState:e}){for(let r of t){let a,s,o;if(typeof r=="string"?a=r:(a=r.variableName,s=r.mathComponentIndex,o=r.arrayIndex),e[a]!==void 0){let l=e[a];if(o!==void 0)if(Array.isArray(o))for(let u of o)l=l[u];else l=l[o];else s!==void 0&&l instanceof K2e.class&&(l=l.get_component(s));return{foundEssential:!0,value:l}}}return{foundEssential:!1}}getStateVariableDefinitionArguments({component:t,stateVariable:e}){let r=this.dependencies.getStateVariableDependencyValues({component:t,stateVariable:e});r.componentName=t.componentName;let a=t.state[e];if(a.isArrayEntry?(r.arrayKeys=a.arrayKeys,r.arraySize=a.arraySize):a.isArray&&(r.arraySize=a.arraySize),a.createWorkspace&&(r.workspace=a.workspace),a.providePreviousValuesInDefinition){let s=[e];a.additionalStateVariablesDefined&&s.push(...a.additionalStateVariablesDefined);let o={};for(let l of s)o[l]=t.state[l]._previousValue;r.previousValues=o}return r}recordActualChangeInStateVariable({componentName:t,varName:e,includeAdditionalStateVariables:r=!0}){let a=this._components[t];this.markStateVariableAndUpstreamDependentsStale({component:a,varName:e});let s=[e];r&&a.state[e].additionalStateVariablesDefined&&s.push(...a.state[e].additionalStateVariablesDefined);for(let o of s)a.state[o].forceRecalculation=!0,this.dependencies.recordActualChangeInUpstreamDependencies({component:a,varName:o})}findCaseInsensitiveMatches({stateVariables:t,componentClass:e}){let r=this.componentInfoObjects.stateVariableInfo[e.componentType],a=[];for(let s of t){let o=!1,l=s.toLowerCase();for(let m in r.stateVariableDescriptions)if(l===m.toLowerCase()){o=!0,a.push(m);break}if(o)continue;let u=!1,c=l;l.substring(0,13)==="__array_size_"&&(u=!0,c=l.substring(13));for(let m in r.aliases)if(c===m.toLowerCase()){u&&(m="__array_size_"+m),a.push(m),o=!0;break}if(o)continue;let p=Object.keys(r.arrayEntryPrefixes).sort((m,f)=>f.length-m.length);for(let m of p)if(l.substring(0,m.length)===m.toLowerCase()){let f=m+l.substring(m.length);o=!0,a.push(f);break}o||a.push(s)}return a}matchPublicStateVariables({stateVariables:t,componentClass:e}){let r=this.componentInfoObjects.publicStateVariableInfo[e.componentType],a=[];for(let s of t){if(s in r.stateVariableDescriptions){a.push(s);continue}let o=s;if(o in r.aliases&&(o=r.aliases[o],o in r.stateVariableDescriptions)){a.push(o);continue}let l=!1,u=Object.keys(r.arrayEntryPrefixes).sort((c,p)=>p.length-c.length);for(let c of u)if(o.substring(0,c.length)===c){l=!0;break}l?a.push(s):a.push("__not_public_"+s)}return a}substituteAliases({stateVariables:t,componentClass:e}){let r=[],a=this.componentInfoObjects.stateVariableInfo[e.componentType];for(let s of t){let o=!1;s.substring(0,13)==="__array_size_"&&(o=!0,s=s.substring(13)),s=s in a.aliases?a.aliases[s]:s,o&&(s="__array_size_"+s),r.push(s)}return r}publicCaseInsensitiveAliasSubstitutions({stateVariables:t,componentClass:e}){let r=this.findCaseInsensitiveMatches({stateVariables:t,componentClass:e});return r=this.matchPublicStateVariables({stateVariables:r,componentClass:e}),r=this.substituteAliases({stateVariables:r,componentClass:e}),r}checkIfArrayEntry({stateVariable:t,component:e}){for(let r in e.arrayEntryPrefixes)if(t.substring(0,r.length)===r)return!0;return!1}createFromArrayEntry({stateVariable:t,component:e,initializeOnly:r=!1}){if(!e.arrayEntryPrefixes)throw Error(`Unknown state variable ${t} of ${e.componentName}`);let a=Object.keys(e.arrayEntryPrefixes).sort((s,o)=>o.length-s.length);for(let s of a)if(t.substring(0,s.length)===s){let o=e.arrayEntryPrefixes[s];if(this.initializeStateVariable({component:e,stateVariable:t,arrayStateVariable:o,arrayEntryPrefix:s}),r)return;let l=[t];if(e.state[t].additionalStateVariablesDefined){l.push(...e.state[t].additionalStateVariablesDefined);for(let c of e.state[t].additionalStateVariablesDefined)e.state[c]||this.createFromArrayEntry({stateVariable:c,component:e,initializeOnly:!0})}this.dependencies.setUpStateVariableDependencies({component:e,stateVariable:t,allStateVariablesAffected:l,core:this});let u=[];for(let c of l)this.dependencies.checkForCircularDependency({componentName:e.componentName,varName:c}),u.push(c),e.state[c].determineDependenciesStateVariable&&u.push(e.state[c].determineDependenciesStateVariable);this.dependencies.resolveStateVariablesIfReady({component:e,stateVariables:u});return}throw Error(`Unknown state variable ${t} of ${e.componentName}`)}markStateVariableAndUpstreamDependentsStale({component:t,varName:e}){this.updateInfo.componentsTouched.push(t.componentName);let r={[e]:t.state[e]};t.state[e].additionalStateVariablesDefined&&t.state[e].additionalStateVariablesDefined.forEach(m=>r[m]=t.state[m]);let a=this.lookUpCurrentFreshness({component:t,varName:e,allStateVariablesAffectedObj:r}),s=[],o=[],l=0;for(let m in r){let f=r[m];Object.getOwnPropertyDescriptor(f,"value").get||f.immutable?a&&(a.fresh&&a.fresh[m]?o.push(m):a.partiallyFresh&&a.partiallyFresh[m]&&(l+=a.partiallyFresh[m])):s.push(m)}o.push(...s);let u=o.length>0||l>0,c={};for(let m in r)c[m]=!0;let p=!1;if(u){let m=this.processMarkStale({component:t,varName:e,allStateVariablesAffectedObj:r});if(m.fresh)for(let d in m.fresh)m.fresh[d]&&delete c[d];let f=0;for(let d in r){if(o.includes(d)&&!(m.fresh&&m.fresh[d])){p=!0;break}m.partiallyFresh&&m.partiallyFresh[d]&&(f+=m.partiallyFresh[d])}if(f<l&&(p=!0),m.updateReplacements&&this.updateInfo.compositesToUpdateReplacements.push(t.componentName),m.updateActionChaining){let d=this.updateInfo.componentsToUpdateActionChaining[t.componentName];d||(d=this.updateInfo.componentsToUpdateActionChaining[t.componentName]=[]);for(let h in r)d.includes(h)||d.push(h)}if(m.updateDependencies)for(let d of m.updateDependencies)t.state[d].needDependenciesUpdated=!0}for(let m in c){let f=r[m];if(delete f.recursiveDependencyValues,s.includes(m)){f._previousValue=f.value,delete f.value;let d=this.getStateVariableValue;Object.defineProperty(f,"value",{get:()=>d({component:t,stateVariable:m}),configurable:!0})}}if(p)for(let m in c)this.markUpstreamDependentsStale({component:t,varName:m})}lookUpCurrentFreshness({component:t,varName:e,allStateVariablesAffectedObj:r}){let a=t.state[e];if(!a.getCurrentFreshness)return;let s=a.freshnessInfo,o,l;if(a.isArrayEntry&&(o=new Proxy(a._arrayKeys,Ge)),a.isArrayEntry||a.isArray){let c=t.state[a.arraySizeStateVariable];l=c._previousValue,!(Object.getOwnPropertyDescriptor(c,"value").get||c.immutable)&&(l=c.value),Array.isArray(l)?l=new Proxy(l,Ge):l=[]}let u=a.getCurrentFreshness({freshnessInfo:s,arrayKeys:o,arraySize:l});if(u.partiallyFresh){for(let c in r)if(r[c].isArrayEntry){let p=r[c].arrayStateVariable;u.partiallyFresh[c]=u.partiallyFresh[p],delete u.partiallyFresh[p]}}if(u.fresh){for(let c in r)if(r[c].isArrayEntry){let p=r[c].arrayStateVariable;p in u.fresh&&(u.fresh[c]=u.fresh[p],delete u.fresh[p])}}return u}processMarkStale({component:t,varName:e,allStateVariablesAffectedObj:r}){let a=t.state[e];if(!a.markStale||!a.initiallyResolved){let m={};return Object.keys(r).forEach(f=>m[f]=!1),{fresh:m}}let s={},o=this.dependencies.downstreamDependencies[t.componentName][e];for(let m in o){let f=o[m],d={},h=!1;f.componentIdentityChanged&&(d.componentIdentityChanged=!0,h=!0),f.componentIdentitiesChanged&&(d.componentIdentitiesChanged=!0,h=!0),f.valuesChanged&&(d.valuesChanged=f.valuesChanged,h=!0),h&&(s[m]=d)}let l=a.freshnessInfo,u,c;if(a.isArrayEntry&&(u=new Proxy(a._arrayKeys,Ge)),a.isArrayEntry||a.isArray){let m=t.state[a.arraySizeStateVariable];c=m._previousValue,!(Object.getOwnPropertyDescriptor(m,"value").get||m.immutable)&&(c=m.value),Array.isArray(c)?c=new Proxy(c,Ge):c=[]}let p=a.markStale({freshnessInfo:l,changes:s,arrayKeys:u,arraySize:c});if(p.partiallyFresh){for(let m in r)if(r[m].isArrayEntry){let f=r[m].arrayStateVariable;p.partiallyFresh[m]=p.partiallyFresh[f],delete p.partiallyFresh[f]}}if(p.fresh){for(let m in r)if(r[m].isArrayEntry){let f=r[m].arrayStateVariable;f in p.fresh&&(p.fresh[m]=p.fresh[f],delete p.fresh[f])}}return p}markUpstreamDependentsStale({component:t,varName:e}){let r=t.componentName,a=this.getStateVariableValue,s=this.dependencies.upstreamDependencies[r][e],o;if(t.state[e]&&(o=t.state[e].freshnessInfo),s)for(let l of s){let u=!1;if(l.markStale&&l.markStale(),l.downstreamComponentNames){let c=l.downstreamComponentNames.indexOf(r);if(c===-1)continue;if(l.mappedDownstreamVariableNamesByComponent){if(l.mappedDownstreamVariableNamesByComponent[c].indexOf(e)===-1)throw Error(`something went wrong as ${e} not a downstreamVariable of ${l.dependencyName}`);l.dependencyType==="determineDependencies"&&(l.recalculateDependencies=!0),l.valuesChanged||(l.valuesChanged=[]),l.valuesChanged[c]||(l.valuesChanged[c]={}),l.valuesChanged[c][e]||(l.valuesChanged[c][e]={}),l.valuesChanged[c][e].potentialChange=!0,o&&(l.valuesChanged[c][e].freshnessInfo=new Proxy(o,Ge)),u=!0}else e===l.downstreamVariableNameIfNoVariables&&(l.valuesChanged||(l.valuesChanged={[l.downstreamVariableNameIfNoVariables]:{}}),l.componentIdentityChanged=!0,l.valuesChanged[l.downstreamVariableNameIfNoVariables].potentialChange=!0,u=!0)}if(u){this.updateInfo.componentsTouched.push(l.upstreamComponentName);let c=l.upstreamVariableNames[0],p=this._components[l.upstreamComponentName],m={};l.upstreamVariableNames.forEach(C=>m[C]=p.state[C]);let f=this.lookUpCurrentFreshness({component:p,varName:c,allStateVariablesAffectedObj:m}),d=[],h=[],y=0;for(let C in m){let w=m[C];Object.getOwnPropertyDescriptor(w,"value").get||w.immutable?f&&(f.fresh&&f.fresh[C]?h.push(C):f.partiallyFresh&&f.partiallyFresh[C]&&(y+=f.partiallyFresh[C])):d.push(C)}h.push(...d);let b=h.length>0||y>0,g={};for(let C in m)g[C]=!0;let v=!1;if(b){let C=this.processMarkStale({component:p,varName:c,allStateVariablesAffectedObj:m});if(C.fresh)for(let S in C.fresh)C.fresh[S]&&delete g[S];let w=0;for(let S in m){if(h.includes(S)&&!(C.fresh&&C.fresh[S])){v=!0;break}C.partiallyFresh&&C.partiallyFresh[S]&&(w+=C.partiallyFresh[S])}if(w<y&&(v=!0),C.updateReplacements&&this.updateInfo.compositesToUpdateReplacements.push(l.upstreamComponentName),C.updateActionChaining){let S=this.updateInfo.componentsToUpdateActionChaining[l.componentName];S||(S=this.updateInfo.componentsToUpdateActionChaining[l.componentName]=[]);for(let A in m)S.includes(A)||S.push(A)}if(C.updateDependencies)for(let S of C.updateDependencies)t.state[S].needDependenciesUpdated=!0}for(let C in g){let w=m[C];delete w.recursiveDependencyValues,d.includes(C)&&(w._previousValue=w.value,delete w.value,Object.defineProperty(w,"value",{get:()=>a({component:p,stateVariable:C}),configurable:!0}))}if(v)for(let C in g)this.markUpstreamDependentsStale({component:p,varName:C})}}}evaluatedDeferredChildStateVariables(t){for(let e of t.activeChildren)if(e.componentType==="string"){for(let r in e.state)if(e.state[r].deferred){let a=e.state[r].value}}}registerComponent(t){if(t.componentName in this._components)throw Error(`Duplicate componentName: ${t.componentName}`);this._components[t.componentName]=t}deregisterComponent(t,e=!0){if(e===!0)for(let r in t.allChildren)this.deregisterComponent(t.allChildren[r].component);delete this._components[t.componentName]}setAncestors(t,e=[]){t.ancestors=e;let r=[{componentName:t.componentName,componentClass:t.constructor},...t.ancestors];for(let a in t.allChildren){let s=this._components[a];this.setAncestors(s,r)}for(let a in t.attributes){let s=t.attributes[a].component;s&&this.setAncestors(s,r)}}addChildrenAndRecurseToShadows({parent:t,indexOfDefiningChildren:e,newChildren:r,assignNamesOffset:a}){this.spliceChildren(t,e,r);let s=this.processNewDefiningChildren({parent:t}),o={},l={};if(!s.success)return s;if(r.forEach(u=>o[u.componentName]=u),t.shadowedBy)for(let u of t.shadowedBy){if(u.shadows.propVariable)continue;let c=r.map(g=>g.serialize({forLink:!0}));c=Rr({serializedComponents:c,componentName:u.shadows.compositeName});let p=u.attributes.newNamespace&&u.attributes.newNamespace.primitive,m=p;c=de({indOffset:a,serializedComponents:c,parentName:u.componentName,parentCreatesNewNamespace:p,componentInfoObjects:this.componentInfoObjects,originalNamesAreConsistent:m}).serializedComponents;let d=this._components[u.componentName];this.parameterStack.push(d.sharedParameters,!1);let h;p?h=u.componentName+"/":h=to(u.componentName);let y=this.createIsolatedComponentsSub({serializedComponents:c,ancestors:u.ancestors,createNameContext:u.componentName+"|addChildren|"+a,namespaceForUnamed:h});this.parameterStack.pop();let b=this.addChildrenAndRecurseToShadows({parent:d,indexOfDefiningChildren:e,newChildren:y.components,assignNamesOffset:a});if(!b.success)throw Error("was able to add components to parent but not shadows!");Object.assign(o,b.addedComponents)}return{success:!0,deletedComponents:l,addedComponents:o}}processNewDefiningChildren({parent:t,expandComposites:e=!0}){this.parameterStack.push(t.sharedParameters,!1);let r=this.deriveChildResultsFromDefiningChildren({parent:t,expandComposites:e});this.parameterStack.pop();let a=[{componentName:t.componentName,componentClass:t.constructor},...t.ancestors];for(let s in t.allChildren){let o=this._components[s];this.setAncestors(o,a)}return r}spliceChildren(t,e,r){let a=t.definingChildren.length;if(!Number.isInteger(e)||e>a||e<0)throw Error("Can't add children at index "+e+". Invalid index.");t.definingChildren.splice(e,0,...r)}finishUpdate({deletedComponents:t,addedComponents:e,init:r=!1}={}){}deleteComponents({components:t,deleteUpstreamDependencies:e=!0,skipProcessingChildrenOfParents:r=[]}){Array.isArray(t)||(t=[t]);let a={};this.determineComponentsToDelete({components:t,deleteUpstreamDependencies:e,componentsToDelete:a});let s={};for(let u in a){let c=a[u],p=this.components[c.parentName];if(p===void 0||p.componentName in a)continue;let m=s[c.parentName];m===void 0&&(m={parent:this._components[c.parentName],childNamesToBeDeleted:new Set},s[c.parentName]=m),m.childNamesToBeDeleted.add(u)}let o=[];for(let u in a){let c=this._components[u];if(c.replacementOf){let p=c.replacementOf,f=p.replacements.map(d=>d.componentName).indexOf(u);f!==-1&&(p.replacements.splice(f,1),o.includes(p.componentName)||o.push(p.componentName))}}for(let u of o)u in a||this.dependencies.addBlockersFromChangedReplacements(this._components[u]);let l=[];for(let u in s){let c=s[u],p=c.parent;l.push(p),p.activeChildren&&this.evaluatedDeferredChildStateVariables(p);for(let m=p.definingChildren.length-1;m>=0;m--){let f=p.definingChildren[m];c.childNamesToBeDeleted.has(f.componentName)&&p.definingChildren.splice(m,1)}r.includes(p.componentName)||this.processNewDefiningChildren({parent:p,expandComposites:!1})}for(let u in a){let c=this._components[u];if(c.shadows){let p=this._components[c.shadows.componentName];p.shadowedBy.length===1?delete p.shadowedBy:p.shadowedBy.splice(p.shadowedBy.indexOf(c),1)}this.dependencies.deleteAllDownstreamDependencies({component:c});for(let p in this.dependencies.upstreamDependencies[c.componentName]){let m=this.dependencies.upstreamDependencies[c.componentName][p];for(let f of m)if(f.specifiedComponentName&&f.specifiedComponentName in a){let d=this.dependencies.updateTriggers.dependenciesMissingComponentBySpecifiedName[f.specifiedComponentName];d||(d=this.dependencies.updateTriggers.dependenciesMissingComponentBySpecifiedName[f.specifiedComponentName]=[]),d.includes(f)||d.push(f)}}this.dependencies.deleteAllUpstreamDependencies({component:c}),this.updateInfo.deletedStateVariables[c.componentName]||(this.updateInfo.deletedStateVariables[c.componentName]=[]),this.updateInfo.deletedStateVariables[c.componentName].push(...Object.keys(c.state)),this.updateInfo.deletedComponents[c.componentName]=!0,delete this.unmatchedChildren[c.componentName],delete this.stateVariableChangeTriggers[c.componentName]}for(let u in a){let c=this._components[u];this.deregisterComponent(c,!1)}return this.updateInfo.componentsTouched=[...new Set(this.updateInfo.componentsTouched)].filter(u=>!(u in a)),this.updateInfo.compositesToUpdateReplacements=[...new Set(this.updateInfo.compositesToUpdateReplacements)].filter(u=>!(u in a)),{success:!0,deletedComponents:a,parentsOfDeleted:l}}determineComponentsToDelete({components:t,deleteUpstreamDependencies:e,componentsToDelete:r}){for(let a of t){if(a.componentName in r)continue;r[a.componentName]=this._components[a.componentName];let s=Object.values(a.allChildren).map(o=>o.component);for(let o in a.attributes){let l=a.attributes[o].component;l&&s.push(l)}a.adaptedFrom!==void 0&&s.push(a.adaptedFrom),e===!0&&(a.shadowedBy&&s.push(...a.shadowedBy),a.adapterUsed&&s.push(a.adapterUsed),a.replacements&&s.push(...a.replacements)),this.determineComponentsToDelete({components:s,deleteUpstreamDependencies:e,componentsToDelete:r})}}updateCompositeReplacements({component:t,componentChanges:e,sourceOfUpdate:r}){let a={},s={},o=new Set;if(t.shadows)return{success:!0,deletedComponents:a,addedComponents:s,parentsOfDeleted:o};let l=this.components[t.componentName];t.replacements||(t.replacements=[]),t.stateValues.readyToExpandWhenResolved;let u=t.constructor.calculateReplacementChanges({component:l,componentChanges:e,components:this.components,workspace:t.replacementsWorkspace,componentInfoObjects:this.componentInfoObjects,flags:this.flags,resolveItem:this.dependencies.resolveItem.bind(this.dependencies),publicCaseInsensitiveAliasSubstitutions:this.publicCaseInsensitiveAliasSubstitutions.bind(this)});t.constructor.stateVariableToEvaluateAfterReplacements&&t.stateValues[t.constructor.stateVariableToEvaluateAfterReplacements];for(let p of u)if(p.changeType==="add"){p.replacementsToWithhold!==void 0&&this.adjustReplacementsToWithhold({component:t,change:p,componentChanges:e});let m=this._components[t.componentName];this.parameterStack.push(m.sharedParameters,!1);let f,d={[t.componentName]:gd(t)},h=p.numberReplacementsToReplace,y=p.firstReplacementInd;if(h>0&&p.changeTopLevelReplacements&&this.deleteReplacementsFromShadowsThenComposite({change:p,composite:t,componentChanges:e,sourceOfUpdate:r,parentsOfDeleted:o,deletedComponents:a,addedComponents:s,processNewChildren:!1}),p.serializedReplacements){let g=p.serializedReplacements,v;t.attributes.newNamespace&&t.attributes.newNamespace.primitive?v=t.componentName+"/":v=to(t.componentName),f=this.createIsolatedComponentsSub({serializedComponents:g,ancestors:t.ancestors,createNameContext:t.componentName+"|replacements",namespaceForUnamed:v,componentsReplacementOf:t}).components}else throw Error("Invalid replacement change.");this.parameterStack.pop();let b={[t.componentName]:{newComponents:f,parent:p.parent}};if(m.shadowedBy&&d[m.componentName].length>0){let g=this.createShadowedReplacements({replacementsToShadow:f,componentToShadow:m,parentToShadow:p.parent,currentShadowedBy:d,assignNamesOffset:p.assignNamesOffset,componentChanges:e,sourceOfUpdate:r,parentsOfDeleted:o,deletedComponents:a,addedComponents:s});Object.assign(b,g)}for(let g in b){let v=this._components[g];if(!v)continue;let C=b[g].newComponents;if(!v.isExpanded){this.expandCompositeComponent(v);let w={changeType:"addedReplacements",composite:v,newReplacements:v.replacements,topLevel:!0,firstIndex:0,numberDeleted:0};e.push(w);continue}for(let w of C)s[w.componentName]=w;if(p.changeTopLevelReplacements===!0){let w=this._components[v.parentName];v.replacements.splice(y,0,...C),this.dependencies.addBlockersFromChangedReplacements(v);let S={changeType:"addedReplacements",composite:v,newReplacements:C,topLevel:!0,firstIndex:y,numberDeleted:h};e.push(S),this.processNewDefiningChildren({parent:w,expandComposites:!1}),this.updateInfo.componentsTouched.push(...this.componentAndRenderedDescendants(w))}else{let w=this._components[b[g].parent.componentName];this.spliceChildren(w,p.indexOfDefiningChildren,C),this.processNewDefiningChildren({parent:w}),C.forEach(A=>s[A.componentName]=A),this.updateInfo.componentsTouched.push(...this.componentAndRenderedDescendants(w));let S={changeType:"addedReplacements",composite:v,newReplacements:C};e.push(S)}}}else if(p.changeType==="delete")p.replacementsToWithhold!==void 0&&this.adjustReplacementsToWithhold({component:t,change:p,componentChanges:e}),this.deleteReplacementsFromShadowsThenComposite({change:p,composite:t,componentsToDelete:p.components,componentChanges:e,sourceOfUpdate:r,parentsOfDeleted:o,deletedComponents:a,addedComponents:s});else{if(p.changeType==="moveDependency")throw Error("moveDependency not implemented");if(p.changeType==="addDependency")throw Error("addDependency not implemented");if(p.changeType==="updateStateVariables"){this.updateInfo.componentsTouched.push(p.component.componentName);let m={},f={};for(let d in p.stateChanges){let h={componentName:p.component.componentName,stateVariable:d,value:p.stateChanges[d],overrideFixed:!0};this.requestComponentChanges({instruction:h,initialChange:!1,workspace:m,newStateVariableValues:f})}this.processNewStateVariableValues(f)}else if(p.changeType==="changeReplacementsToWithhold"){if(p.replacementsToWithhold!==void 0){let m=this.adjustReplacementsToWithhold({component:t,change:p,componentChanges:e})}this.processChildChangesAndRecurseToShadows(t)}}return{success:!0,deletedComponents:a,addedComponents:s,parentsOfDeleted:o}}deleteReplacementsFromShadowsThenComposite({change:t,composite:e,componentsToDelete:r,componentChanges:a,sourceOfUpdate:s,parentsOfDeleted:o,deletedComponents:l,addedComponents:u,processNewChildren:c=!0}){let p=[];if(!e.isExpanded)return p;if(e.shadowedBy)for(let m of e.shadowedBy){if(m.shadows.propVariable)continue;let f;if(r){f=[];for(let h of r){let y;if(h.shadowedBy){for(let b of h.shadowedBy)if(!b.shadows.propVariable&&b.shadows.compositeName===m.shadows.compositeName){y=b;break}}y?f.push(y):console.error(`could not find shadowing component of ${h.componentName}`)}}let d=this.deleteReplacementsFromShadowsThenComposite({change:t,composite:m,componentsToDelete:f,componentChanges:a,sourceOfUpdate:s,parentsOfDeleted:o,deletedComponents:l,addedComponents:u,processNewChildren:c});p.push(...d)}if(t.changeTopLevelReplacements){let m=t.firstReplacementInd,f=t.numberReplacementsToDelete;t.changeType==="add"&&(f=t.numberReplacementsToReplace);let d=e.replacements.splice(m,f);this.dependencies.addBlockersFromChangedReplacements(e);let h=this.deleteComponents({components:d,componentChanges:a,sourceOfUpdate:s,skipProcessingChildrenOfParents:[e.parentName]});if(c&&this.processNewDefiningChildren({parent:this._components[e.parentName],expandComposites:!1}),h.success===!1)throw Error("Couldn't delete components on composite update");for(let v of h.parentsOfDeleted)o.add(v.componentName),this.updateInfo.componentsTouched.push(...this.componentAndRenderedDescendants(v));let y={};for(let v in h.deletedComponents){let w=h.deletedComponents[v].parentName;y[w]===void 0&&(y[w]=[]),y[w].push(v)}let b={changeType:"deletedReplacements",composite:e,topLevel:!0,firstIndex:m,numberDeleted:f,deletedNamesByParent:y,deletedComponents:h.deletedComponents};a.push(b),Object.assign(l,h.deletedComponents);let g=this._components[e.parentName];this.updateInfo.componentsTouched.push(...this.componentAndRenderedDescendants(g))}else{let m=r.length,f=this.deleteComponents({components:r,deleteUpstreamDependencies:!1,componentChanges:a,sourceOfUpdate:s});if(f.success===!1)throw Error("Couldn't delete components prescribed by composite");for(let y of f.parentsOfDeleted)o.add(y.componentName),this.updateInfo.componentsTouched.push(...this.componentAndRenderedDescendants(y));let d={};for(let y in f.deletedComponents){let g=f.deletedComponents[y].parentName;d[g]===void 0&&(d[g]=[]),d[g].push(y)}let h={changeType:"deletedReplacements",composite:e,numberDeleted:m,deletedNamesByParent:d,deletedComponents:f.deletedComponents};a.push(h),Object.assign(l,f.deletedComponents),Object.assign(u,f.addedComponents)}return p}processChildChangesAndRecurseToShadows(t){let e=this._components[t.parentName];if(this.processNewDefiningChildren({parent:e,expandComposites:!1}),this.updateInfo.componentsTouched.push(...this.componentAndRenderedDescendants(e)),t.shadowedBy)for(let r of t.shadowedBy)r.shadows.propVariable||this.processChildChangesAndRecurseToShadows(r)}createShadowedReplacements({replacementsToShadow:t,componentToShadow:e,parentToShadow:r,currentShadowedBy:a,assignNamesOffset:s,componentChanges:o,sourceOfUpdate:l,parentsOfDeleted:u,deletedComponents:c,addedComponents:p}){let m=gd(e);if(!a[e.componentName]||!m.every(h=>a[e.componentName].includes(h)))throw Error(`circular reference involving ${e.componentName}`);this.updateInfo.compositesBeingExpanded.push(e.componentName);let f={};for(let h of e.shadowedBy)if(!h.shadows.propVariable){if(this.updateInfo.compositesBeingExpanded.includes(h.componentName))throw Error(`circular dependence involving ${h.componentName}`);if(h.shadowedBy&&(a[h.componentName]=gd(h)),h.isExpanded){let y=t.map(E=>E.serialize({forLink:!0}));y=Rr({serializedComponents:y,componentName:h.shadows.compositeName});let b=h.attributes.newNamespace&&shadowingComponnet.attributes.newNamespace.primitive,g=h.constructor.createAttributesObject({flags:this.flags});for(let E of y){E.attributes||(E.attributes={});let I=Ye({attributes:h.attributes,componentType:E.componentType,componentInfoObjects:this.componentInfoObjects,compositeAttributesObj:g,compositeCreatesNewNamespace:b});Object.assign(E.attributes,I)}if(h.constructor.assignNamesToReplacements){let E=h.constructor.originalNamesAreConsistent&&b;y=de({assignNames:h.doenetAttributes.assignNames,indOffset:s,serializedComponents:y,parentName:h.componentName,parentCreatesNewNamespace:b,componentInfoObjects:this.componentInfoObjects,originalNamesAreConsistent:E}).serializedComponents}else{let E=b;y=de({indOffset:s,serializedComponents:y,parentName:h.componentName,parentCreatesNewNamespace:b,componentInfoObjects:this.componentInfoObjects,originalNamesAreConsistent:E}).serializedComponents}let v,C=this._components[h.componentName];this.parameterStack.push(C.sharedParameters,!1);let w;b?w=h.componentName+"/":w=to(h.componentName);let S=this.createIsolatedComponentsSub({serializedComponents:y,ancestors:h.ancestors,createNameContext:h.componentName+"|replacements",namespaceForUnamed:w,componentsReplacementOf:h});this.parameterStack.pop(),v=S.components;let A;if(r){if(r.shadowedBy){for(let E of r.shadowedBy)if(!E.shadows.propVariable&&E.shadows.compositeName===h.shadows.compositeName){A=E;break}}A||console.error(`could not find shadowing parent of ${r.componentName}`)}if(f[h.componentName]={newComponents:v,parent:A},h.shadowedBy&&a[h.componentName].length>0){let E=this.createShadowedReplacements({replacementsToShadow:v,componentToShadow:h,parentToShadow:A,currentShadowedBy:a,assignNamesOffset:s,componentChanges:o,sourceOfUpdate:l,parentsOfDeleted:u,deletedComponents:c,addedComponents:p});Object.assign(f,E)}}}let d=this.updateInfo.compositesBeingExpanded.indexOf(e.componentName);if(d===-1)throw Error(`Something is wrong as we lost track that we were expanding ${component.componentName}`);return this.updateInfo.compositesBeingExpanded.splice(d,1),f}adjustReplacementsToWithhold({component:t,change:e,componentChanges:r}){let a=[],s=e.replacementsToWithhold,o;if(t.replacementsToWithhold!==void 0?o=s-t.replacementsToWithhold:o=s,o<0){a.push(t.componentName);let l=t.replacements.length-s,u=t.replacements.length-s+o,c=t.replacements.slice(u,l),p={changeType:"addedReplacements",composite:t,topLevel:!0,newReplacements:c,firstIndex:u,numberDeleted:0};r.push(p)}else if(o>0){a.push(t.componentName);let l=t.replacements.length-s,u=l+o,c=t.replacements.slice(l,u),p={};for(let f of c){let d=f.parentName;p[d]===void 0&&(p[d]=[]),p[d].push(f.componentName)}let m={changeType:"deletedReplacements",composite:t,topLevel:!0,firstIndex:l,numberDeleted:o,deletedNamesByParent:p,deletedComponents:c};r.push(m)}if(t.replacementsToWithhold=s,this.dependencies.addBlockersFromChangedReplacements(t),t.shadowedBy)for(let l of t.shadowedBy){if(l.shadows.propVariable)continue;let u=this.adjustReplacementsToWithhold({component:l,change:e,componentChanges:r});a.push(...u)}return a}get standardComponentClasses(){return new Proxy(this._standardComponentClasses,Ge)}set standardComponentClasses(t){return null}get allComponentClasses(){return new Proxy(this._allComponentClasses,Ge)}set allComponentClasses(t){return null}isInheritedComponentType({inheritedComponentType:t,baseComponentType:e}){if(t===e)return!0;let r=this.allComponentClasses[e];return r?r.isPrototypeOf(this.allComponentClasses[t]):!1}isCompositeComponent({componentType:t,includeNonStandard:e=!0}){let r=this.allComponentClasses[t];return r?this.isInheritedComponentType({inheritedComponentType:t,baseComponentType:"_composite"})&&(e||!r.treatAsComponentForRecursiveReplacements):!1}get componentTypesCreatingVariants(){return new Proxy(this._componentTypesCreatingVariants,Ge)}set componentTypesCreatingVariants(t){return null}get componentTypeWithPotentialVariants(){return new Proxy(this._componentTypeWithPotentialVariants,Ge)}set componentTypeWithPotentialVariants(t){return null}get components(){return new Proxy(this._components,Ge)}set components(t){return null}async executeProcesses(){for(;this.processQueue.length>0;){let t=this.processQueue.splice(0,1)[0],e;if(t.type==="update")(!t.skippable||this.processQueue.length<2)&&(e=await this.performUpdate(t));else if(t.type==="action")(!t.skippable||this.processQueue.length<2)&&(e=await this.performAction(t));else if(t.type==="recordEvent")e=await this.performRecordEvent(t);else throw Error(`Unrecognized process type: ${t.type}`);t.resolve(e)}this.processing=!1}requestAction({componentName:t,actionName:e,args:r,event:a}){return new Promise((s,o)=>{let l=r&&r.skippable;this.processing?this.processQueue.push({type:"action",componentName:t,actionName:e,args:r,skippable:l,event:a,resolve:s,reject:o}):(this.processing=!0,this.performAction({componentName:t,actionName:e,args:r,event:a}).then(s),this.processQueue.length>0?setTimeout(this.executeProcesses,0):this.processing=!1)})}performAction({componentName:t,actionName:e,args:r,event:a}){let s=this.components[t];if(s&&s.actions){let o=s.actions[e];if(o)return new Promise((l,u)=>{a&&this.requestRecordEvent(a),Promise.resolve(o(r)).then(l)})}return console.warn(`Cannot run action ${e} on component ${t}`),Promise.resolve()}async triggerChainedActions({componentName:t}){for(let e in this.updateInfo.componentsToUpdateActionChaining)this.checkForActionChaining({component:this.components[e],stateVariables:this.updateInfo.componentsToUpdateActionChaining[e]});if(this.updateInfo.componentsToUpdateActionChaining={},this.actionsChangedToActions[t])for(let e of this.actionsChangedToActions[t])await this.performAction(e)}requestUpdate({updateInstructions:t,transient:e=!1,event:r,skippable:a=!1,overrideReadOnly:s=!1}){if(this.flags.readOnly&&!s){let o={};for(let l of t){let u=o[l.componentName];u||(u=o[l.componentName]={}),l.sourceInformation&&Object.assign(u,l.sourceInformation)}return this.updateRendererInstructions({componentNames:t.map(l=>l.componentName),sourceOfUpdate:{sourceInformation:o}}),this.finishUpdate(),Promise.resolve()}return new Promise((o,l)=>{this.processing?this.processQueue.push({type:"update",updateInstructions:t,transient:e,event:r,skippable:a,resolve:o,reject:l}):(this.processing=!0,this.performUpdate({updateInstructions:t,transient:e,event:r}).then(o),this.processQueue.length>0?setTimeout(this.executeProcesses,0):this.processing=!1)})}performUpdate({updateInstructions:t,transient:e=!1,event:r}){let a={},s={},o={},l=[];for(let p of t){if(p.componentName){let m=s[p.componentName];m||(m=s[p.componentName]={}),p.sourceInformation&&Object.assign(m,p.sourceInformation)}if(p.updateType==="updateValue")this.requestComponentChanges({instruction:p,workspace:o,newStateVariableValues:a});else if(p.updateType==="addComponents")this.addComponents({serializedComponents:p.serializedComponents,parentName:p.parentName,assignNamesOffset:p.assignNamesOffset});else if(p.updateType==="deleteComponents"){if(p.componentNames.length>0){let m=[];for(let f of p.componentNames){let d=this._components[f];d?m.push(d):console.warn(`Cannot delete ${f} as it doesn't exist.`)}m.length>0&&this.deleteComponents({components:m})}}else p.updateType==="executeUpdate"?this.executeUpdateStateVariables({newStateVariableValues:a,preliminary:!0}):p.updateType==="recordItemSubmission"&&l.push(p.itemNumber)}let u=1/0;for(;u>0;){let p=this.executeUpdateStateVariables({newStateVariableValues:a,sourceOfUpdate:{sourceInformation:s,local:!0}});if(!(p.nFailures&&p.nFailures<u))break;u=p.nFailures}let c={};if(l.length>0){l=[...new Set(l)],r&&(r.context||(r.context={}),r.context.itemCreditAchieved||(r.context.itemCreditAchieved={}),r.context.documentCreditAchieved=this.document.stateValues.creditAchieved);for(let p of l)c[p]=this.document.stateValues.itemCreditAchieved[p-1],r&&(r.context.itemCreditAchieved[p]=this.document.stateValues.itemCreditAchieved[p-1])}return this.externalFunctions.localStateChanged&&setTimeout(()=>this.externalFunctions.localStateChanged({newStateVariableValues:a,contentId:this.contentId,sourceOfUpdate:{sourceInformation:s},transient:e,itemsWithCreditAchieved:c}),0),this.document.stateValues.itemCreditAchieved,r&&this.requestRecordEvent(r),Promise.resolve()}requestRecordEvent(t){return new Promise((e,r)=>{this.externalFunctions.recordEvent?(this.processQueue.push({type:"recordEvent",event:t,resolve:e,reject:r}),this.processing||(this.processing=!0,setTimeout(this.executeProcesses,0))):e()})}performRecordEvent({event:t}){return this.externalFunctions.recordEvent&&(t.timestamp=new Date().toISOString().slice(0,19).replace("T"," "),t.result||(t.result={}),t.context||(t.context={}),setTimeout(()=>this.externalFunctions.recordEvent(t),0)),Promise.resolve()}executeUpdateStateVariables({newStateVariableValues:t,sourceOfUpdate:e,preliminary:r=!1}){let a={};for(let l in t){let u=this._components[l];if(u){let c=this.changedStateVariables[l];c||(c=this.changedStateVariables[l]={});for(let p in t[l]){let m=u.state[p];if(m)if(m.isArray){c[p]||(c[p]=new Set);for(let f in t[l][p])f!=="mergeObject"&&c[p].add(f)}else c[p]=!0}}}let s=this.processNewStateVariableValues(t);if(Object.assign(a,s),this.replacementChangesFromCompositesToUpdate().updatedComposites&&(this.expandAllComposites(this.document),this.expandAllComposites(this.document,!0)),this.replacementChangesFromCompositesToUpdate(),r)return a;if(this.updateInfo.componentsTouched=[...new Set(this.updateInfo.componentsTouched)],this.updateRendererInstructions({componentNames:this.updateInfo.componentsTouched,sourceOfUpdate:e,recreatedComponents:this.updateInfo.recreatedComponents}),this.processStateVariableTriggers(),this.updateInfo.componentsTouched=[],this.finishUpdate(),Object.keys(this.unmatchedChildren).length>0){let l="";for(let u in this.unmatchedChildren)this._components[u].isShadow||(l+=`Invalid children for ${u}: ${this.unmatchedChildren[u].message} `);l&&console.warn(l)}return a}replacementChangesFromCompositesToUpdate(){let t=[...new Set(this.updateInfo.compositesToUpdateReplacements)];this.updateInfo.compositesToUpdateReplacements=[];let e=[],r=0,a=!1,s=[];for(;t.length>0;){for(let o of t){let l=this._components[o];if(l instanceof this.allComponentClasses._composite&&l.isExpanded)if(l.state.readyToExpandWhenResolved.initiallyResolved)if(l.stateValues.isInactiveCompositeReplacement)this.updateInfo.inactiveCompositesToUpdateReplacements.push(o);else{let u=this.updateCompositeReplacements({component:l,componentChanges:s});for(let c in u.addedComponents){a=!0,this.changedStateVariables[c]={};for(let p in this._components[c].state){let m=this._components[c].state[p];m.isArray?this.changedStateVariables[c][p]=new Set(m.getAllArrayKeys(m.arraySize)):m.isArrayEntry||(this.changedStateVariables[c][p]=!0)}}Object.keys(u.deletedComponents).length>0&&(a=!0)}else e.push(o)}if(t=[...new Set(this.updateInfo.compositesToUpdateReplacements)],this.updateInfo.compositesToUpdateReplacements=[],r++,r>100)throw Error("Seem to have an infinite loop while calculating replacement changes")}return this.updateInfo.compositesToUpdateReplacements=e,{updatedComposites:a}}processNewStateVariableValues(t){let e=0,r=this.getStateVariableValue;for(let a in t){let s=this._components[a];if(s===void 0){let l=this.updateInfo.stateVariableUpdatesForMissingComponents[a];l===void 0&&(l=this.updateInfo.stateVariableUpdatesForMissingComponents[a]={}),Object.assign(l,t[a]);continue}let o=t[a];for(let l in o){let u=s.state[l];if(u===void 0){console.warn(`can't update state variable ${l} of component ${a}, as it doesn't exist.`),e+=1;continue}if(u.isResolved||this.dependencies.resolveIfReady({componentName:a,type:"stateVariable",stateVariable:l}),(u.isResolved||!(u.esssential||u.willBeEssential))&&(u.value,u._previousValue=u.value),u.isArray){let c=[];if(Array.isArray(o[l]))throw Error(`do we still want to support setting entire array in inverse direction? ${l}, ${a}`);for(let p in o[l]){if(p==="mergeObject")continue;if(!(u.essential||u.essentialByArrayKey[p])){console.warn(`can't update arrayKey ${p}  of state variable ${l} of component ${a}, as it is not an essential state variable.`),e+=1;continue}e+=u.setArrayValue({value:o[l][p],arrayKey:p,arraySize:u.arraySize}).nFailures;let f=u.varNamesIncludingArrayKeys[p];f&&c.push(...f)}for(let p of c){let m=s.state[p];Object.getOwnPropertyDescriptor(m,"value").get||m.immutable||(m._previousValue=m.value,delete m.value,Object.defineProperty(m,"value",{get:()=>r({component:s,stateVariable:p}),configurable:!0})),this.markUpstreamDependentsStale({component:s,varName:p}),this.dependencies.recordActualChangeInUpstreamDependencies({component:s,varName:p})}}else{if(!u.essential)if(u.willBeEssential)u.essential=!0,delete u.value;else{console.warn(`can't update state variable ${l} of component ${a}, as it is not an essential state variable.`),e+=1;continue}u.set?u.value=u.set(o[l]):u.value=o[l],delete u.usedDefault}this.markUpstreamDependentsStale({component:s,varName:l}),this.dependencies.recordActualChangeInUpstreamDependencies({component:s,varName:l})}}return{nFailures:e}}requestComponentChanges({instruction:t,initialChange:e=!0,workspace:r,newStateVariableValues:a}){let s=this._components[t.componentName],o=this.substituteAliases({stateVariables:[t.stateVariable],componentClass:s.constructor})[0];r[t.componentName]===void 0&&(r[t.componentName]={});let l=r[t.componentName],u=s.state[o],c=u.additionalStateVariablesDefined,p=[o];c&&p.push(...c);for(let g of p)if(!s.state[g].isResolved&&!this.dependencies.resolveItem({componentName:s.componentName,type:"stateVariable",stateVariable:g,force:!0}).success)throw Error(`Can't get value of ${o} of ${s.componentName} as ${g} couldn't be resolved.`);let m=this.getStateVariableDefinitionArguments({component:s,stateVariable:o});m.componentInfoObjects=this.componentInfoObjects,m.initialChange=e,m.stateValues=s.stateValues,m.overrideFixed=t.overrideFixed,m.shadowedVariable=t.shadowedVariable,m.sourceInformation=t.sourceInformation;let f=o;if(u.isArrayEntry){let g=u.arrayStateVariable;f=g;let v={};if(m.arrayKeys.length===1){if("value"in t)v[m.arrayKeys[0]]=t.value;else if("valueOfStateVariable"in t){let C=this.substituteAliases({stateVariables:[t.valueOfStateVariable],componentClass:s.constructor})[0],w=s.state[C];if(w)v[m.arrayKeys[0]]=w.value;else throw Error(`Invalid instruction to change ${t.stateVariable} of ${t.componentName}, value of state variable ${t.valueOfStateVariable} not found.`)}}else for(let[C,w]of m.arrayKeys.entries())v[w]=t.value[C];m.desiredStateVariableValues={[g]:v}}else if("value"in t)m.desiredStateVariableValues={[o]:t.value};else if("valueOfStateVariable"in t){let g=this.substituteAliases({stateVariables:[t.valueOfStateVariable],componentClass:s.constructor})[0],v=s.state[g];if(v)m.desiredStateVariableValues={[o]:v.value};else throw Error(`Invalid instruction to change ${t.stateVariable} of ${t.componentName}, value of state variable ${t.valueOfStateVariable} not found.`)}let d=l[f];if(d===void 0&&(d=l[f]={}),u.additionalStateVariablesDefined)for(let g of u.additionalStateVariablesDefined){let v=g;s.state[g].isArray&&(v=u.arrayStateVariable);let w=l[v];w&&(Object.assign(d,w),l[v]=d)}if(m.workspace=d,t.additionalStateVariableValues)for(let g in t.additionalStateVariableValues){if(!u.additionalStateVariablesDefined.includes(g)){console.warn(`Can't invert ${g} at the same time as ${o}, as not an additional state variable defined`);continue}m.desiredStateVariableValues[g]=t.additionalStateVariableValues[g]}if(this.updateInfo.componentsTouched.push(s.componentName),!u.inverseDefinition){console.warn(`Cannot change state variable ${o} of ${s.componentName} as it doesn't have an inverse definition`);return}if(s.stateValues.fixed&&!t.overrideFixed){console.log(`Changing ${o} of ${s.componentName} did not succeed because fixed is true.`);return}if(!(e||s.stateValues.modifyIndirectly!==!1)){console.log(`Changing ${o} of ${s.componentName} did not succeed because modifyIndirectly is false.`);return}let h=u.inverseDefinition(m);if(!h.success)return;let y=[],b;for(let g of h.instructions){let v=!1;if(g.setDependency){let C=g.setDependency,w=this.dependencies.downstreamDependencies[s.componentName][o][C];if(["stateVariable","parentStateVariable"].includes(w.dependencyType)&&w.downstreamComponentNames.length===1){let S=w.downstreamComponentNames[0],A=w.mappedDownstreamVariableNamesByComponent[0][0],E=this._components[S].state[A];if(E.isArrayEntry||E.isArray){let I=E.isArrayEntry?E.arrayStateVariable:A;if(b&&!(b.componentName===S&&b.stateVariable===I&&b.shadowedVariable===g.shadowedVariable&&b.treatAsInitialChange===g.treatAsInitialChange)&&(y.push(b),b=void 0),!(g.additionalDependencyValues||E.basedOnArrayKeyStateVariables))if(v=!0,b||(b={combinedArray:!0,componentName:S,stateVariable:I,shadowedVariable:g.shadowedVariable,treatAsInitialChange:g.treatAsInitialChange,desiredValue:{}}),E.isArrayEntry){let V=E.arrayKeys;if(V.length===1)b.desiredValue[V[0]]=g.desiredValue;else for(let[O,k]of V.entries())b.desiredValue[k]=g.desiredValue[O]}else Object.assign(b.desiredValue,g.desiredValue)}}}v||(b&&(y.push(b),b=void 0),y.push(g))}b&&(y.push(b),b=void 0);for(let g of y)if(g.setStateVariable){if(!p.includes(g.setStateVariable)){let v=!1;if(u.isArrayEntry){let C=[u.arrayStateVariable];if(u.additionalStateVariablesDefined)for(let w of u.additionalStateVariablesDefined){let S=s.state[w];S.isArrayEntry&&C.push(S.arrayStateVariable)}v=C.includes(g.setStateVariable)}if(!v)throw Error(`Invalid inverse definition of ${o} of ${s.componentName}: specified changing value of ${g.setStateVariable}, which is not a state variable defined with ${o}.`)}if(!("value"in g))throw Error(`Invalid inverse definition of ${o} of ${s.componentName}: setStateVariable must specify a value`);a[s.componentName]||(a[s.componentName]={}),s.state[g.setStateVariable].isArray?(a[s.componentName][g.setStateVariable]||(a[s.componentName][g.setStateVariable]={mergeObject:!0}),Object.assign(a[s.componentName][g.setStateVariable],g.value)):a[s.componentName][g.setStateVariable]=g.value}else if(g.setDependency){let v=g.setDependency,C=this.dependencies.downstreamDependencies[s.componentName][o][v];if(C.dependencyType==="child"){let w=C.downstreamComponentNames[g.childIndex];if(!w)throw Error(`Invalid inverse definition of ${o} of ${s.componentName}: ${v} child of index ${g.childIndex} does not exist.`);let S=C.mappedDownstreamVariableNamesByComponent[g.childIndex][g.variableIndex];if(!S)throw Error(`Invalid inverse definition of ${o} of ${s.componentName}: ${v} variable of index ${g.variableIndex} does not exist.`);let A={componentName:w,stateVariable:S,value:g.desiredValue,overrideFixed:t.overrideFixed,arrayKey:g.arrayKey};this.requestComponentChanges({instruction:A,initialChange:g.treatAsInitialChange===!0,workspace:r,newStateVariableValues:a})}else if(C.dependencyType==="attributeComponent"){let w=C.downstreamComponentNames[0],S=C.mappedDownstreamVariableNamesByComponent[0][g.variableIndex];if(!S)throw Error(`Invalid inverse definition of ${o} of ${s.componentName}: ${v} variable of index ${g.variableIndex} does not exist.`);let A={componentName:w,stateVariable:S,value:g.desiredValue,overrideFixed:t.overrideFixed,arrayKey:g.arrayKey};this.requestComponentChanges({instruction:A,initialChange:g.treatAsInitialChange===!0,workspace:r,newStateVariableValues:a})}else if(["stateVariable","parentStateVariable"].includes(C.dependencyType)&&C.downstreamComponentNames.length===1){let w=C.downstreamComponentNames[0],S=C.mappedDownstreamVariableNamesByComponent[0][0],A={componentName:w,stateVariable:S,value:g.desiredValue,overrideFixed:t.overrideFixed,shadowedVariable:g.shadowedVariable};if(g.additionalDependencyValues){let E=this.components[w].state[S];for(let I in g.additionalDependencyValues){let V=this.dependencies.downstreamDependencies[s.componentName][o][I];if(!(["stateVariable","parentStateVariable"].includes(V.dependencyType)&&V.downstreamComponentNames.length===1)){console.warn(`Can't simultaneously set additional dependency value ${I} if it isn't a state variable`);continue}let O=V.mappedDownstreamVariableNamesByComponent[0][0];if(V.downstreamComponentNames[0]!==w||!E.additionalStateVariablesDefined.includes(O)){console.warn(`Can't simultaneously set additional dependency value ${I} if it doesn't correspond to additional state variable defined of ${v}'s state variable`);continue}A.additionalStateVariableValues||(A.additionalStateVariableValues={}),A.additionalStateVariableValues[O]=g.additionalDependencyValues[I]}}this.requestComponentChanges({instruction:A,initialChange:g.treatAsInitialChange===!0,workspace:r,newStateVariableValues:a})}else throw Error(`unimplemented dependency type ${C.dependencyType} in requestComponentChanges`)}else if(g.combinedArray){let v={componentName:g.componentName,stateVariable:g.stateVariable,value:g.desiredValue,overrideFixed:t.overrideFixed,shadowedVariable:g.shadowedVariable};this.requestComponentChanges({instruction:v,initialChange:g.treatAsInitialChange===!0,workspace:r,newStateVariableValues:a})}else if(g.deferSettingDependency){let v=g.deferSettingDependency,C=this.dependencies.downstreamDependencies[s.componentName][o][v];if(C.dependencyType==="child"){let w=C.downstreamComponentNames[g.childIndex];if(!w)throw Error(`Invalid for deferSettingDependency in inverse definition of ${o} of ${s.componentName}: ${v} child of index ${g.childIndex} does not exist.`);let S=C.mappedDownstreamVariableNamesByComponent[g.childIndex][g.variableIndex];if(!S)throw Error(`Invalid for deferSettingDependency in inverse definition of ${o} of ${s.componentName}: ${v} variable of index ${g.variableIndex} does not exist..`);let A=this._components[w];if(A.componentType!=="string")throw Error("deferStateVariableDependency is implemented just when dependency is a string.");Object.getOwnPropertyDescriptor(A.state[S],"value").get||(A.state[S]._previousValue=A.state[S].value),delete A.state[S].value;let E=()=>this.getDeferredStateVariable({component:A,stateVariable:S,upstreamComponent:s,upstreamStateVariable:o,dependencyValues:g.dependencyValues,inverseDefinition:g.inverseDefinition});Object.defineProperty(A.state[S],"value",{get:E,configurable:!0}),A.state[S].deferred=!0}else throw Error(`unimplemented dependency type ${C.dependencyType} in requestComponentChanges`)}else throw console.log(g),Error(`Unrecognized instruction in inverse definition of ${o} of ${s.componentName}`)}getDeferredStateVariable({component:t,stateVariable:e,upstreamComponent:r,upstreamStateVariable:a,dependencyValues:s,inverseDefinition:o}){let l=o({dependencyValues:s,stateValues:r.stateValues});if(!l.success){console.warn(`Inverse definition for deferring state variable failed. component: ${t.componentName}, stateVariable: ${e}, upstreamComponent: ${r.componentName}, upstreamStateVariable: ${a}`);return}for(let u of l.instructions)if(u.setDependency){let c=u.setDependency,p=this.dependencies.downstreamDependencies[r.componentName][a][c];if(p.dependencyType==="child"){let m=p.downstreamComponentNames[u.childIndex];if(!m)throw Error(`Invalid inverse definition of ${e} of ${t.componentName}: ${c} child of index ${u.childIndex} does not exist.`);let f=p.mappedDownstreamVariableNamesByComponent[u.childIndex][u.variableIndex];if(!f)throw Error(`Invalid inverse definition of ${e} of ${t.componentName}: ${c} variable of index ${u.variableIndex} does not exist..`);let d=this._components[m];delete d.state[f].value,delete d.state[f].deferred,d.state[f].value=u.desiredValue}else throw Error(`unimplemented dependency type ${p.dependencyType} in deferred inverse definition`)}else throw Error(`Unrecognized instruction deferred inverse definition of ${e} of ${t.componentName}`);if(Object.getOwnPropertyDescriptor(t.state[e],"value").get)throw Error(`deferred inverse definition of ${e} of ${t.componentName} didn't return value of variable`);return t.state[e].value}calculateScoredItemNumberOfContainer(t){let r=[...this._components[t].ancestors.slice(0,-1).reverse().map(o=>o.componentName),t],a,s;for(let[o,l]of this.document.stateValues.scoredDescendants.entries()){for(let u of r)if(l.componentName===u){a=u,s=o+1;break}if(a!==void 0)break}return a===void 0&&(a=this.document.componentName,s=this.document.stateValues.scoredDescendants.length),{scoredItemNumber:s,scoredComponent:a}}get doenetState(){return this._renderComponents}set doenetState(t){return null}get scoredItemWeights(){return this.document.stateValues.scoredDescendants.map(t=>t.stateValues.weight)}requestAnimationFrame(t,e){if(!this.preventMoreAnimations){let r=++this.lastAnimationID;if(e){let a=window.setTimeout(s=>this._requestAnimationFrame(t,r),e);return this.animationIDs[r]={timeoutID:a},r}else return this.animationIDs[r]={},this._requestAnimationFrame(t,r)}}_requestAnimationFrame(t,e){let r=window.requestAnimationFrame(t),a=this.animationIDs[e];return delete a.timeoutID,a.animationFrameID=r,e}cancelAnimationFrame(t){let e=this.animationIDs[t],r=e.timeoutID;r!==void 0&&window.clearTimeout(r);let a=e.animationFrameID;return a!==void 0&&window.cancelAnimationFrame(a),delete this.animationIDs[t],Promise.resolve()}componentWillUnmount(){this.preventMoreAnimations=!0;for(let t in this.animationIDs)this.coreFunctions.cancelAnimationFrame(t);this.animationIDs={}}};function bd({value:i,attributeSpecification:t,attribute:e}){if(t.valueTransformations&&i in t.valueTransformations&&(i=t.valueTransformations[i]),t.transformNonFiniteTo!==void 0&&!Number.isFinite(i)&&(i=t.transformNonFiniteTo),t.toLowerCase&&(i=i.toLowerCase()),t.trim&&(i=i.trim()),t.validValues){if(!t.validValues.includes(i)){let r=t.validValues[0];console.warn(`Invalid value ${i} for attribute ${e}, using value ${r}`),i=r}}else t.clamp&&(i<t.clamp[0]?i=t.clamp[0]:i>t.clamp[1]?i=t.clamp[1]:Number.isFinite(i)||(i=t.defaultValue));return i}function gd(i){let t=[];if(i.shadowedBy){for(let e of i.shadowedBy)if(!e.shadows.propVariable){t.push(e.componentName);let r=gd(e);t.push(...r)}}if(i.replacementOf){let e=gd(i.replacementOf);t.push(...e)}return t}export{vU as default};
/**
 * @license
 * Copyright (c) 2021 Handsoncode. All rights reserved.
 */
/**
 * @license
 Copyright (c) 2013 jStat

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 */
/**
 * @license
 bessel.js (C) 2013-present SheetJS -- http://sheetjs.com
 
                                 Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

 TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

 1. Definitions.

 "License" shall mean the terms and conditions for use, reproduction,
 and distribution as defined by Sections 1 through 9 of this document.

 "Licensor" shall mean the copyright owner or entity authorized by
 the copyright owner that is granting the License.

 "Legal Entity" shall mean the union of the acting entity and all
 other entities that control, are controlled by, or are under common
 control with that entity. For the purposes of this definition,
 "control" means (i) the power, direct or indirect, to cause the
 direction or management of such entity, whether by contract or
 otherwise, or (ii) ownership of fifty percent (50%) or more of the
 outstanding shares, or (iii) beneficial ownership of such entity.

 "You" (or "Your") shall mean an individual or Legal Entity
 exercising permissions granted by this License.

 "Source" form shall mean the preferred form for making modifications,
 including but not limited to software source code, documentation
 source, and configuration files.

 "Object" form shall mean any form resulting from mechanical
 transformation or translation of a Source form, including but
 not limited to compiled object code, generated documentation,
 and conversions to other media types.

 "Work" shall mean the work of authorship, whether in Source or
 Object form, made available under the License, as indicated by a
 copyright notice that is included in or attached to the work
 (an example is provided in the Appendix below).

 "Derivative Works" shall mean any work, whether in Source or Object
 form, that is based on (or derived from) the Work and for which the
 editorial revisions, annotations, elaborations, or other modifications
 represent, as a whole, an original work of authorship. For the purposes
 of this License, Derivative Works shall not include works that remain
 separable from, or merely link (or bind by name) to the interfaces of,
 the Work and Derivative Works thereof.

 "Contribution" shall mean any work of authorship, including
 the original version of the Work and any modifications or additions
 to that Work or Derivative Works thereof, that is intentionally
 submitted to Licensor for inclusion in the Work by the copyright owner
 or by an individual or Legal Entity authorized to submit on behalf of
 the copyright owner. For the purposes of this definition, "submitted"
 means any form of electronic, verbal, or written communication sent
 to the Licensor or its representatives, including but not limited to
 communication on electronic mailing lists, source code control systems,
 and issue tracking systems that are managed by, or on behalf of, the
 Licensor for the purpose of discussing and improving the Work, but
 excluding communication that is conspicuously marked or otherwise
 designated in writing by the copyright owner as "Not a Contribution."

 "Contributor" shall mean Licensor and any individual or Legal Entity
 on behalf of whom a Contribution has been received by Licensor and
 subsequently incorporated within the Work.

 2. Grant of Copyright License. Subject to the terms and conditions of
 this License, each Contributor hereby grants to You a perpetual,
 worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 copyright license to reproduce, prepare Derivative Works of,
 publicly display, publicly perform, sublicense, and distribute the
 Work and such Derivative Works in Source or Object form.

 3. Grant of Patent License. Subject to the terms and conditions of
 this License, each Contributor hereby grants to You a perpetual,
 worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 (except as stated in this section) patent license to make, have made,
 use, offer to sell, sell, import, and otherwise transfer the Work,
 where such license applies only to those patent claims licensable
 by such Contributor that are necessarily infringed by their
 Contribution(s) alone or by combination of their Contribution(s)
 with the Work to which such Contribution(s) was submitted. If You
 institute patent litigation against any entity (including a
 cross-claim or counterclaim in a lawsuit) alleging that the Work
 or a Contribution incorporated within the Work constitutes direct
 or contributory patent infringement, then any patent licenses
 granted to You under this License for that Work shall terminate
 as of the date such litigation is filed.

 4. Redistribution. You may reproduce and distribute copies of the
 Work or Derivative Works thereof in any medium, with or without
 modifications, and in Source or Object form, provided that You
 meet the following conditions:

 (a) You must give any other recipients of the Work or
 Derivative Works a copy of this License; and

 (b) You must cause any modified files to carry prominent notices
 stating that You changed the files; and

 (c) You must retain, in the Source form of any Derivative Works
 that You distribute, all copyright, patent, trademark, and
 attribution notices from the Source form of the Work,
 excluding those notices that do not pertain to any part of
 the Derivative Works; and

 (d) If the Work includes a "NOTICE" text file as part of its
 distribution, then any Derivative Works that You distribute must
 include a readable copy of the attribution notices contained
 within such NOTICE file, excluding those notices that do not
 pertain to any part of the Derivative Works, in at least one
 of the following places: within a NOTICE text file distributed
 as part of the Derivative Works; within the Source form or
 documentation, if provided along with the Derivative Works; or,
 within a display generated by the Derivative Works, if and
 wherever such third-party notices normally appear. The contents
 of the NOTICE file are for informational purposes only and
 do not modify the License. You may add Your own attribution
 notices within Derivative Works that You distribute, alongside
 or as an addendum to the NOTICE text from the Work, provided
 that such additional attribution notices cannot be construed
 as modifying the License.

 You may add Your own copyright statement to Your modifications and
 may provide additional or different license terms and conditions
 for use, reproduction, or distribution of Your modifications, or
 for any such Derivative Works as a whole, provided Your use,
 reproduction, and distribution of the Work otherwise complies with
 the conditions stated in this License.

 5. Submission of Contributions. Unless You explicitly state otherwise,
 any Contribution intentionally submitted for inclusion in the Work
 by You to the Licensor shall be under the terms and conditions of
 this License, without any additional terms or conditions.
 Notwithstanding the above, nothing herein shall supersede or modify
 the terms of any separate license agreement you may have executed
 with Licensor regarding such Contributions.

 6. Trademarks. This License does not grant permission to use the trade
 names, trademarks, service marks, or product names of the Licensor,
 except as required for reasonable and customary use in describing the
 origin of the Work and reproducing the content of the NOTICE file.

 7. Disclaimer of Warranty. Unless required by applicable law or
 agreed to in writing, Licensor provides the Work (and each
 Contributor provides its Contributions) on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 implied, including, without limitation, any warranties or conditions
 of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 PARTICULAR PURPOSE. You are solely responsible for determining the
 appropriateness of using or redistributing the Work and assume any
 risks associated with Your exercise of permissions under this License.

 8. Limitation of Liability. In no event and under no legal theory,
 whether in tort (including negligence), contract, or otherwise,
 unless required by applicable law (such as deliberate and grossly
 negligent acts) or agreed to in writing, shall any Contributor be
 liable to You for damages, including any direct, indirect, special,
 incidental, or consequential damages of any character arising as a
 result of this License or out of the use or inability to use the
 Work (including but not limited to damages for loss of goodwill,
 work stoppage, computer failure or malfunction, or any and all
 other commercial damages or losses), even if such Contributor
 has been advised of the possibility of such damages.

 9. Accepting Warranty or Additional Liability. While redistributing
 the Work or Derivative Works thereof, You may choose to offer,
 and charge a fee for, acceptance of support, warranty, indemnity,
 or other liability obligations and/or rights consistent with this
 License. However, in accepting such obligations, You may act only
 on Your own behalf and on Your sole responsibility, not on behalf
 of any other Contributor, and only if You agree to indemnify,
 defend, and hold each Contributor harmless for any liability
 incurred by, or claims asserted against, such Contributor by reason
 of your accepting any such warranty or additional liability.

 END OF TERMS AND CONDITIONS

 APPENDIX: How to apply the Apache License to your work.

 To apply the Apache License to your work, attach the following
 boilerplate notice, with the fields enclosed by brackets "{}"
 replaced with your own identifying information. (Don't include
 the brackets!)  The text should be enclosed in the appropriate
 comment syntax for the file format. We also recommend that a
 file or class name and description of purpose be included on the
 same "printed page" as the copyright notice for easier
 identification within third-party archives.

 Copyright (C) 2013-present   SheetJS LLC

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

 http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.

 */
